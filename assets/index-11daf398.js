var t$=Object.defineProperty;var i$=(ie,te,ne)=>te in ie?t$(ie,te,{enumerable:!0,configurable:!0,writable:!0,value:ne}):ie[te]=ne;var ei=(ie,te,ne)=>(i$(ie,typeof te!="symbol"?te+"":te,ne),ne),n$=(ie,te,ne)=>{if(!te.has(ie))throw TypeError("Cannot "+ne)};var Aa=(ie,te,ne)=>{if(te.has(ie))throw TypeError("Cannot add the same private member more than once");te instanceof WeakSet?te.add(ie):te.set(ie,ne)};var Xo=(ie,te,ne)=>(n$(ie,te,"access private method"),ne);(function(){const te=document.createElement("link").relList;if(te&&te.supports&&te.supports("modulepreload"))return;for(const oe of document.querySelectorAll('link[rel="modulepreload"]'))re(oe);new MutationObserver(oe=>{for(const le of oe)if(le.type==="childList")for(const ae of le.addedNodes)ae.tagName==="LINK"&&ae.rel==="modulepreload"&&re(ae)}).observe(document,{childList:!0,subtree:!0});function ne(oe){const le={};return oe.integrity&&(le.integrity=oe.integrity),oe.referrerPolicy&&(le.referrerPolicy=oe.referrerPolicy),oe.crossOrigin==="use-credentials"?le.credentials="include":oe.crossOrigin==="anonymous"?le.credentials="omit":le.credentials="same-origin",le}function re(oe){if(oe.ep)return;oe.ep=!0;const le=ne(oe);fetch(oe.href,le)}})();const tableSort=function(){$.tablesort=function(ie,te){var ne=this;this.$table=ie,this.$thead=this.$table.find("thead"),this.settings=$.extend({},$.tablesort.defaults,te),this.$sortCells=this.$thead.length>0?this.$thead.find("th:not(.no-sort)"):this.$table.find("th:not(.no-sort)"),this.$sortCells.on("click.tablesort",function(){ne.sort($(this))}),this.index=null,this.$th=null,this.direction=null},$.tablesort.prototype={sort:function(ie,te){var ne=new Date,re=this,oe=this.$table,le=oe.find("tbody").length>0?oe.find("tbody"):oe,ae=le.find("tr").has("td, th"),he=ae.find(":nth-child("+(ie.index()+1)+")").filter("td, th"),de=ie.data().sortBy,ue=[],pe=he.map(function(fe,ge){return de?typeof de=="function"?de($(ie),$(ge),re):de:$(this).data().sortValue!=null?$(this).data().sortValue:$(this).text()});pe.length!==0&&(this.index!==ie.index()?(this.direction="asc",this.index=ie.index()):te!=="asc"&&te!=="desc"?this.direction=this.direction==="asc"?"desc":"asc":this.direction=te,te=this.direction=="asc"?1:-1,re.$table.trigger("tablesort:start",[re]),re.log("Sorting by "+this.index+" "+this.direction),re.$table.css("display"),setTimeout(function(){re.$sortCells.removeClass(re.settings.asc+" "+re.settings.desc);for(var fe=0,ge=pe.length;fe<ge;fe++)ue.push({index:fe,cell:he[fe],row:ae[fe],value:pe[fe]});ue.sort(function($e,Te){return re.settings.compare($e.value,Te.value)*te}),$.each(ue,function($e,Te){le.append(Te.row)}),ie.addClass(re.settings[re.direction]),re.log("Sort finished in "+(new Date().getTime()-ne.getTime())+"ms"),re.$table.trigger("tablesort:complete",[re]),re.$table.css("display")},pe.length>2e3?200:10))},log:function(ie){($.tablesort.DEBUG||this.settings.debug)&&console&&console.log&&console.log("[tablesort] "+ie)},destroy:function(){return this.$sortCells.off("click.tablesort"),this.$table.data("tablesort",null),null}},$.tablesort.DEBUG=!1,$.tablesort.defaults={debug:$.tablesort.DEBUG,asc:"sorted ascending",desc:"sorted descending",compare:function(ie,te){return ie>te?1:ie<te?-1:0}},$.fn.tablesort=function(ie){var te,ne;return this.each(function(){te=$(this),ne=te.data("tablesort"),ne&&ne.destroy(),te.data("tablesort",new $.tablesort(te,ie))})}};function super_stringify(ie,te=!1){let ne="";if(typeof ie=="string")ne+='"'+ie.replace(/"/g,'\\"').replace(/'/g,"\\'")+'"';else if(Array.isArray(ie))ne+="[",ie.forEach((re,oe)=>{re!=null&&re!=null&&(ne+=super_stringify(re,te)+",")}),ne=ne.replace(/,+$/,"")+"]";else if(typeof ie=="function"){let re=ie.toString().replace(/[\n\t\r](?=(?:(?:[^"]*"){2})*[^"]*$)/g,"");te&&(re=re.replace(/"/g,'\\"').replace(/'/g,"\\'")),ne+=(te?'"':"")+re+(te?'"':"")}else typeof ie=="object"?(ne+="{",Object.keys(ie).forEach((oe,le)=>{ie[oe]!==void 0&&ie[oe]!==null&&(ne+='"'+oe.toString()+'":'+super_stringify(ie[oe],te)+",")}),ne=ne.replace(/,+$/,"")+"}"):ne+=ie.toString();return ne}$(()=>{tableSort(),reload()});const reload=function(ie=null){ie===null?$("[data-module]").each(function(){reload_module(this)}):$("#"+ie).find("[data-module]").each(function(){reload_module(this)})},reload_module=function(ie){let te=get_settings($(ie).data("module"));$.each(te,(ne,re)=>{if(re.hasOwnProperty("type")){let oe=re.type,le=re.hasOwnProperty("activate")?re.activate:!1,ae=re.hasOwnProperty("settings")?re.settings.hasOwnProperty("settings")?re.settings.settings:re.settings:{};switch(oe){case"":break;case"menu":$("#"+$(ie).attr("id")+" .item").tab({silent:!0,...ae});break;case"tab":break;case"calendar":typeof ae=="object"&&ae&&(ae.hasOwnProperty("startCalendar")&&(ae.startCalendar=$("#"+ae.startCalendar)),ae.hasOwnProperty("endCalendar")&&(ae.endCalendar=$("#"+ae.endCalendar))),$(ie)[oe](ae);break;case"flyout":case"sidebar":const he={silent:!0};$(ie)[oe]({...he,...ae});break;case"popup":const de={delay:{show:100,hide:300}};$(ie)[oe]({...de,...ae});break;case"dropdown":$(ie)[oe](ae);break;case"progress":case"embed":le&&$(ie)[oe](ae);break;default:$(ie)[oe](ae);break}}})};function construct_jquery_command(ie){var te="";let ne="";if(ie.hasOwnProperty("id")){let re=get_settings($("#"+ie.id).data("module"));ne=extract_module_type_from_settings(re),(!ne||ne==="")&&(ne=ie.type)}else ne=ie.type;if(ne!==""){if(te+="$",ie.hasOwnProperty("id")?te+="('#"+ie.id+"')":ie.hasOwnProperty("class")&&(te+="('."+ie.class+"')"),ie.hasOwnProperty("settings")){let re=super_stringify(ie.settings);te+="."+ne+"("+re+")"}ie.hasOwnProperty("commands")?ie.commands.forEach(re=>{te+="."+ne+"('"+re+"')"}):ie.hasOwnProperty("settings")||(te+="."+ne+"()")}return te}const behavior=function(...ie){let te=ie.shift(),ne;if(typeof te=="object")ne=new Function(construct_jquery_command(te))();else{let re=te,oe=get_settings($("#"+re).data("module")),le=extract_module_type_from_settings(oe);if(le&&re&&$("#"+re)[le])ne=$("#"+re)[le](...ie);else return null}return ne};function get_settings(ie){let te=[];return ie&&(Array.isArray(ie)?ie.forEach(ne=>{typeof ne=="string"?te.push(deserialize(ne)):te.push(ne)}):te.push(ie)),te}function extract_module_type_from_settings(ie){let te;return ie.hasOwnProperty("type")?te=ie.type:ie.forEach(ne=>{ne.type!=="popup"&&(te=ne.type),!te&&ie.length>0&&(te="popup")}),te}function deserialize(serialized){let deserialized={};try{deserialized=JSON.parse(serialized)}catch(ie){}const obj={};for(const key in deserialized)if(deserialized.hasOwnProperty(key)){const val=deserialized[key];if(key==="settings"){obj.settings={};for(const key2 in val){const val2=val[key2];typeof val2=="string"&&(val2.startsWith("function")||val2.indexOf("=>")>-1)?obj.settings[key2]=eval("("+val2+")"):obj.settings[key2]=val2}}else typeof val=="string"&&(val.startsWith("function")||val.indexOf("=>")>-1)?obj[key]=eval(val):obj[key]=val}return obj}const app="",__vite_glob_0_0="/assets/MR-a2fa3ad8.png",__vite_glob_0_1="/assets/antennae-71933376.png",__vite_glob_0_2="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_01-a042c5c7.png",__vite_glob_0_3="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_02-32860049.png",__vite_glob_0_4="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_03-e43f449a.png",__vite_glob_0_5="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_04-e3192e17.png",__vite_glob_0_6="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_05-8c6c6238.png",__vite_glob_0_7="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_06-fe595277.png",__vite_glob_0_8="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_07-e788f92a.png",__vite_glob_0_9="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_08-12a0e507.png",__vite_glob_0_10="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_09-5f9dfd39.png",__vite_glob_0_11="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_10-1829c646.png",__vite_glob_0_12="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_11-5dcef76d.png",__vite_glob_0_13="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_12-2eb3103f.png",__vite_glob_0_14="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_13-4ce77b53.png",__vite_glob_0_15="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_14-08b3f9ee.png",__vite_glob_0_16="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_15-9a0bcd9e.png",__vite_glob_0_17="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_16-1c404ac8.png",__vite_glob_0_18="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_17-4415c5f5.png",__vite_glob_0_19="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_18-70d49477.png",__vite_glob_0_20="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_19-f5975a76.png",__vite_glob_0_21="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_20-77753fcd.png",__vite_glob_0_22="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_21-ea15fd82.png",__vite_glob_0_23="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_22-35c19abc.png",__vite_glob_0_24="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_23-51db1c92.png",__vite_glob_0_25="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_24-96e6b053.png",__vite_glob_0_26="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_25-68640ef7.png",__vite_glob_0_27="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_26-2081c4ec.png",__vite_glob_0_28="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_27-a8d92ff8.png",__vite_glob_0_29="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_28-37079d27.png",__vite_glob_0_30="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_29-d101fa49.png",__vite_glob_0_31="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_30-9ac235f6.png",__vite_glob_0_32="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_31-c09bd6b4.png",__vite_glob_0_33="/assets/Beautiful.ai - Reality2 - digital glue_Page_13-dea74a53.png",__vite_glob_0_34="/assets/Beautiful.ai - Reality2 - digital glue_Page_14-dd8ab31a.png",__vite_glob_0_35="/assets/Beautiful.ai - Reality2 - digital glue_Page_15-142247e9.png",__vite_glob_0_36="/assets/Beautiful.ai - Reality2 - digital glue_Page_16-9500aad1.png",__vite_glob_0_37="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_36-125b7ca3.png",__vite_glob_0_38="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_37-906b9730.png",__vite_glob_0_39="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_38-a0f101c5.png",__vite_glob_0_40="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_39-9107c685.png",__vite_glob_0_41="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_40-7e7bd11c.png",__vite_glob_0_42="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_41-b6c50f52.png",__vite_glob_0_43="/assets/Beautiful.ai - Reality2 Beautifully Usable_Page_42-5a0b0efd.png",__vite_glob_0_44="/assets/bee-9d3df901.png",__vite_glob_0_45="/assets/behaviours-067f647c.png",__vite_glob_0_46="/assets/Beautiful.ai - Reality2 - digital glue_Page_01-8ded24fb.png",__vite_glob_0_47="/assets/Beautiful.ai - Reality2 - digital glue_Page_02-37937e0d.png",__vite_glob_0_48="/assets/Beautiful.ai - Reality2 - digital glue_Page_03-1fd478a6.png",__vite_glob_0_49="/assets/Beautiful.ai - Reality2 - digital glue_Page_04-8f6f9d63.png",__vite_glob_0_50="/assets/Beautiful.ai - Reality2 - digital glue_Page_05-ae257319.png",__vite_glob_0_51="/assets/Beautiful.ai - Reality2 - digital glue_Page_06-99bc2fd1.png",__vite_glob_0_52="/assets/Beautiful.ai - Reality2 - digital glue_Page_07-6b90b0fc.png",__vite_glob_0_53="/assets/Beautiful.ai - Reality2 - digital glue_Page_08-bab9b8fe.png",__vite_glob_0_54="/assets/Beautiful.ai - Reality2 - digital glue_Page_09-f2fb51ea.png",__vite_glob_0_55="/assets/Beautiful.ai - Reality2 - digital glue_Page_10-f041ec51.png",__vite_glob_0_56="/assets/Beautiful.ai - Reality2 - digital glue_Page_11-d7a2bdbb.png",__vite_glob_0_57="/assets/Beautiful.ai - Reality2 - digital glue_Page_12-06262b07.png",__vite_glob_0_58="/assets/Beautiful.ai - Reality2 - digital glue_Page_13-dea74a53.png",__vite_glob_0_59="/assets/Beautiful.ai - Reality2 - digital glue_Page_14-dd8ab31a.png",__vite_glob_0_60="/assets/Beautiful.ai - Reality2 - digital glue_Page_15-142247e9.png",__vite_glob_0_61="/assets/Beautiful.ai - Reality2 - digital glue_Page_16-9500aad1.png",__vite_glob_0_62="/assets/Beautiful.ai - Reality2 - digital glue_Page_17-a8ea4480.png",__vite_glob_0_63="/assets/Beautiful.ai - Reality2 - digital glue_Page_18-5582e740.png",__vite_glob_0_64="/assets/Beautiful.ai - Reality2 - digital glue_Page_19-fa7f6770.png",__vite_glob_0_65="/assets/Beautiful.ai - Reality2 - digital glue_Page_20-131c8783.png",__vite_glob_0_66="/assets/Beautiful.ai - Reality2 - digital glue_Page_21-d34fe4fa.png",__vite_glob_0_67="/assets/Beautiful.ai - Reality2 - digital glue_Page_22-292effce.png",__vite_glob_0_68="/assets/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_01-3e7b9433.png",__vite_glob_0_69="/assets/Beautiful.ai - Reality2 wanderland example_Page_02-901b0542.png",__vite_glob_0_70="/assets/Beautiful.ai - Reality2 wanderland example_Page_03-35933060.png",__vite_glob_0_71="/assets/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_04-bb3deaf4.png",__vite_glob_0_72="/assets/Beautiful.ai - Reality2 wanderland example_Page_05-c1a844ec.png",__vite_glob_0_73="/assets/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_06-5a5964ae.png",__vite_glob_0_74="/assets/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_07-f65b382c.png",__vite_glob_0_75="/assets/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_08-57198046.png",__vite_glob_0_76="/assets/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_09-702f0bb9.png",__vite_glob_0_77="/assets/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_10-d74f082c.png",__vite_glob_0_78="/assets/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_11-7b0f19b4.png",__vite_glob_0_79="/assets/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_12-0c93bad7.png",__vite_glob_0_80="/assets/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_13-b88650b2.png",__vite_glob_0_81="/assets/Beautiful.ai - Reality2 wanderland example_Page_17-f0470599.png",__vite_glob_0_82="/assets/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_15-40fe95b5.png",__vite_glob_0_83="/assets/Beautiful.ai - Reality2 wanderland example_Page_19-1ccb3d39.png",__vite_glob_0_84="/assets/quadruplediamond-6b9d8ec3.png",__vite_glob_0_85="/assets/reality2 enabled-33b77548.png",__vite_glob_0_86="/assets/reality2_big_bee-430d3c6f.png",__vite_glob_0_87="/assets/swarm-0fc6f956.png",__vite_glob_0_88="/assets/Beautiful.ai - Reality2 wanderland example_Page_01-df8db0e2.png",__vite_glob_0_89="/assets/Beautiful.ai - Reality2 wanderland example_Page_02-901b0542.png",__vite_glob_0_90="/assets/Beautiful.ai - Reality2 wanderland example_Page_03-35933060.png",__vite_glob_0_91="/assets/Beautiful.ai - Reality2 wanderland example_Page_04-a469eda9.png",__vite_glob_0_92="/assets/Beautiful.ai - Reality2 wanderland example_Page_05-c1a844ec.png",__vite_glob_0_93="/assets/Beautiful.ai - Reality2 wanderland example_Page_06-76fc6ba7.png",__vite_glob_0_94="/assets/Beautiful.ai - Reality2 wanderland example_Page_07-b07be315.png",__vite_glob_0_95="/assets/Beautiful.ai - Reality2 wanderland example_Page_08-dc1ceadf.png",__vite_glob_0_96="/assets/Beautiful.ai - Reality2 wanderland example_Page_09-421d182b.png",__vite_glob_0_97="/assets/Beautiful.ai - Reality2 wanderland example_Page_10-23117595.png",__vite_glob_0_98="/assets/Beautiful.ai - Reality2 wanderland example_Page_11-848697c9.png",__vite_glob_0_99="/assets/Beautiful.ai - Reality2 wanderland example_Page_12-968b633f.png",__vite_glob_0_100="/assets/Beautiful.ai - Reality2 wanderland example_Page_13-3273b29d.png",__vite_glob_0_101="/assets/Beautiful.ai - Reality2 wanderland example_Page_14-8b93fdc6.png",__vite_glob_0_102="/assets/Beautiful.ai - Reality2 wanderland example_Page_15-f44bdfcf.png",__vite_glob_0_103="/assets/Beautiful.ai - Reality2 wanderland example_Page_16-b61f3638.png",__vite_glob_0_104="/assets/Beautiful.ai - Reality2 wanderland example_Page_17-f0470599.png",__vite_glob_0_105="/assets/Beautiful.ai - Reality2 wanderland example_Page_18-85f5be20.png",__vite_glob_0_106="/assets/Beautiful.ai - Reality2 wanderland example_Page_19-1ccb3d39.png";function noop$2(){}function assign(ie,te){for(const ne in te)ie[ne]=te[ne];return ie}function run$1(ie){return ie()}function blank_object(){return Object.create(null)}function run_all(ie){ie.forEach(run$1)}function is_function(ie){return typeof ie=="function"}function safe_not_equal(ie,te){return ie!=ie?te==te:ie!==te||ie&&typeof ie=="object"||typeof ie=="function"}let src_url_equal_anchor;function src_url_equal(ie,te){return ie===te?!0:(src_url_equal_anchor||(src_url_equal_anchor=document.createElement("a")),src_url_equal_anchor.href=te,ie===src_url_equal_anchor.href)}function is_empty(ie){return Object.keys(ie).length===0}function create_slot(ie,te,ne,re){if(ie){const oe=get_slot_context(ie,te,ne,re);return ie[0](oe)}}function get_slot_context(ie,te,ne,re){return ie[1]&&re?assign(ne.ctx.slice(),ie[1](re(te))):ne.ctx}function get_slot_changes(ie,te,ne,re){if(ie[2]&&re){const oe=ie[2](re(ne));if(te.dirty===void 0)return oe;if(typeof oe=="object"){const le=[],ae=Math.max(te.dirty.length,oe.length);for(let he=0;he<ae;he+=1)le[he]=te.dirty[he]|oe[he];return le}return te.dirty|oe}return te.dirty}function update_slot_base(ie,te,ne,re,oe,le){if(oe){const ae=get_slot_context(te,ne,re,le);ie.p(ae,oe)}}function get_all_dirty_from_scope(ie){if(ie.ctx.length>32){const te=[],ne=ie.ctx.length/32;for(let re=0;re<ne;re++)te[re]=-1;return te}return-1}function exclude_internal_props(ie){const te={};for(const ne in ie)ne[0]!=="$"&&(te[ne]=ie[ne]);return te}function compute_rest_props(ie,te){const ne={};te=new Set(te);for(const re in ie)!te.has(re)&&re[0]!=="$"&&(ne[re]=ie[re]);return ne}function append$2(ie,te){ie.appendChild(te)}function insert(ie,te,ne){ie.insertBefore(te,ne||null)}function detach(ie){ie.parentNode&&ie.parentNode.removeChild(ie)}function destroy_each(ie,te){for(let ne=0;ne<ie.length;ne+=1)ie[ne]&&ie[ne].d(te)}function element(ie){return document.createElement(ie)}function text$2(ie){return document.createTextNode(ie)}function space(){return text$2(" ")}function empty$1(){return text$2("")}function listen(ie,te,ne,re){return ie.addEventListener(te,ne,re),()=>ie.removeEventListener(te,ne,re)}function attr(ie,te,ne){ne==null?ie.removeAttribute(te):ie.getAttribute(te)!==ne&&ie.setAttribute(te,ne)}const always_set_through_set_attribute=["width","height"];function set_attributes(ie,te){const ne=Object.getOwnPropertyDescriptors(ie.__proto__);for(const re in te)te[re]==null?ie.removeAttribute(re):re==="style"?ie.style.cssText=te[re]:re==="__value"?ie.value=ie[re]=te[re]:ne[re]&&ne[re].set&&always_set_through_set_attribute.indexOf(re)===-1?ie[re]=te[re]:attr(ie,re,te[re])}function get_binding_group_value(ie,te,ne){const re=new Set;for(let oe=0;oe<ie.length;oe+=1)ie[oe].checked&&re.add(ie[oe].__value);return ne||re.delete(te),Array.from(re)}function init_binding_group(ie){let te;return{p(...ne){te=ne,te.forEach(re=>ie.push(re))},r(){te.forEach(ne=>ie.splice(ie.indexOf(ne),1))}}}function to_number(ie){return ie===""?null:+ie}function children$1(ie){return Array.from(ie.childNodes)}function set_data(ie,te){te=""+te,ie.data!==te&&(ie.data=te)}function set_input_value(ie,te){ie.value=te??""}function set_style(ie,te,ne,re){ne==null?ie.style.removeProperty(te):ie.style.setProperty(te,ne,re?"important":"")}let crossorigin;function is_crossorigin(){if(crossorigin===void 0){crossorigin=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{crossorigin=!0}}return crossorigin}function add_iframe_resize_listener(ie,te){getComputedStyle(ie).position==="static"&&(ie.style.position="relative");const re=element("iframe");re.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),re.setAttribute("aria-hidden","true"),re.tabIndex=-1;const oe=is_crossorigin();let le;return oe?(re.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",le=listen(window,"message",ae=>{ae.source===re.contentWindow&&te()})):(re.src="about:blank",re.onload=()=>{le=listen(re.contentWindow,"resize",te),te()}),append$2(ie,re),()=>{(oe||le&&re.contentWindow)&&le(),detach(re)}}function custom_event(ie,te,{bubbles:ne=!1,cancelable:re=!1}={}){return new CustomEvent(ie,{detail:te,bubbles:ne,cancelable:re})}let current_component;function set_current_component(ie){current_component=ie}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(ie){get_current_component().$$.on_mount.push(ie)}function afterUpdate(ie){get_current_component().$$.after_update.push(ie)}function onDestroy(ie){get_current_component().$$.on_destroy.push(ie)}function createEventDispatcher(){const ie=get_current_component();return(te,ne,{cancelable:re=!1}={})=>{const oe=ie.$$.callbacks[te];if(oe){const le=custom_event(te,ne,{cancelable:re});return oe.slice().forEach(ae=>{ae.call(ie,le)}),!le.defaultPrevented}return!0}}function bubble(ie,te){const ne=ie.$$.callbacks[te.type];ne&&ne.slice().forEach(re=>re.call(this,te))}const dirty_components=[],binding_callbacks=[];let render_callbacks=[];const flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(ie){render_callbacks.push(ie)}function add_flush_callback(ie){flush_callbacks.push(ie)}const seen_callbacks=new Set;let flushidx=0;function flush(){if(flushidx!==0)return;const ie=current_component;do{try{for(;flushidx<dirty_components.length;){const te=dirty_components[flushidx];flushidx++,set_current_component(te),update(te.$$)}}catch(te){throw dirty_components.length=0,flushidx=0,te}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let te=0;te<render_callbacks.length;te+=1){const ne=render_callbacks[te];seen_callbacks.has(ne)||(seen_callbacks.add(ne),ne())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(ie)}function update(ie){if(ie.fragment!==null){ie.update(),run_all(ie.before_update);const te=ie.dirty;ie.dirty=[-1],ie.fragment&&ie.fragment.p(ie.ctx,te),ie.after_update.forEach(add_render_callback)}}function flush_render_callbacks(ie){const te=[],ne=[];render_callbacks.forEach(re=>ie.indexOf(re)===-1?te.push(re):ne.push(re)),ne.forEach(re=>re()),render_callbacks=te}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(ie,te){ie&&ie.i&&(outroing.delete(ie),ie.i(te))}function transition_out(ie,te,ne,re){if(ie&&ie.o){if(outroing.has(ie))return;outroing.add(ie),outros.c.push(()=>{outroing.delete(ie),re&&(ne&&ie.d(1),re())}),ie.o(te)}else re&&re()}function ensure_array_like(ie){return(ie==null?void 0:ie.length)!==void 0?ie:Array.from(ie)}function get_spread_update(ie,te){const ne={},re={},oe={$$scope:1};let le=ie.length;for(;le--;){const ae=ie[le],he=te[le];if(he){for(const de in ae)de in he||(re[de]=1);for(const de in he)oe[de]||(ne[de]=he[de],oe[de]=1);ie[le]=he}else for(const de in ae)oe[de]=1}for(const ae in re)ae in ne||(ne[ae]=void 0);return ne}function bind(ie,te,ne){const re=ie.$$.props[te];re!==void 0&&(ie.$$.bound[re]=ne,ne(ie.$$.ctx[re]))}function create_component(ie){ie&&ie.c()}function mount_component(ie,te,ne){const{fragment:re,after_update:oe}=ie.$$;re&&re.m(te,ne),add_render_callback(()=>{const le=ie.$$.on_mount.map(run$1).filter(is_function);ie.$$.on_destroy?ie.$$.on_destroy.push(...le):run_all(le),ie.$$.on_mount=[]}),oe.forEach(add_render_callback)}function destroy_component(ie,te){const ne=ie.$$;ne.fragment!==null&&(flush_render_callbacks(ne.after_update),run_all(ne.on_destroy),ne.fragment&&ne.fragment.d(te),ne.on_destroy=ne.fragment=null,ne.ctx=[])}function make_dirty(ie,te){ie.$$.dirty[0]===-1&&(dirty_components.push(ie),schedule_update(),ie.$$.dirty.fill(0)),ie.$$.dirty[te/31|0]|=1<<te%31}function init$2(ie,te,ne,re,oe,le,ae,he=[-1]){const de=current_component;set_current_component(ie);const ue=ie.$$={fragment:null,ctx:[],props:le,update:noop$2,not_equal:oe,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(te.context||(de?de.$$.context:[])),callbacks:blank_object(),dirty:he,skip_bound:!1,root:te.target||de.$$.root};ae&&ae(ue.root);let pe=!1;if(ue.ctx=ne?ne(ie,te.props||{},(fe,ge,...$e)=>{const Te=$e.length?$e[0]:ge;return ue.ctx&&oe(ue.ctx[fe],ue.ctx[fe]=Te)&&(!ue.skip_bound&&ue.bound[fe]&&ue.bound[fe](Te),pe&&make_dirty(ie,fe)),ge}):[],ue.update(),pe=!0,run_all(ue.before_update),ue.fragment=re?re(ue.ctx):!1,te.target){if(te.hydrate){const fe=children$1(te.target);ue.fragment&&ue.fragment.l(fe),fe.forEach(detach)}else ue.fragment&&ue.fragment.c();te.intro&&transition_in(ie.$$.fragment),mount_component(ie,te.target,te.anchor),flush()}set_current_component(de)}class SvelteComponent{constructor(){ei(this,"$$");ei(this,"$$set")}$destroy(){destroy_component(this,1),this.$destroy=noop$2}$on(te,ne){if(!is_function(ne))return noop$2;const re=this.$$.callbacks[te]||(this.$$.callbacks[te]=[]);return re.push(ne),()=>{const oe=re.indexOf(ne);oe!==-1&&re.splice(oe,1)}}$set(te){this.$$set&&!is_empty(te)&&(this.$$.skip_bound=!0,this.$$set(te),this.$$.skip_bound=!1)}}const PUBLIC_VERSION="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(PUBLIC_VERSION);function classString(ie,te,ne){let re=ie?"ui ":"";Object.keys(te).forEach((le,ae)=>{typeof te[le]=="boolean"&&te[le]&&(re=re+((ae>0?" ":"")+le))}),te.hasOwnProperty("_")&&(re=re+" "+te._),re+=" "+ne;let oe=re.trim();return oe===""?void 0:oe}function otherProps(ie){let te={};return Object.keys(ie).forEach(ne=>{ne==="data"?Object.keys(ie[ne]).forEach(re=>{te["data-"+re]=ie[ne][re]}):typeof ie[ne]!="boolean"&&ne!="_"&&(te[ne]=ie[ne])}),te}function serialize$1(...ie){let te={};if(ie.length>=3)if(ie[0])te={type:ie[0],settings:ie[1],activate:ie[2]};else return;else if(ie.length>=2)if(ie[0])te={type:ie[0],settings:ie[1]};else return;else if(ie.length>=1)if(ie[0])te={type:ie[0],settings:{}};else return;else return;return super_stringify(te,!0)}function rationalize(ie){let te=ie.filter(ne=>ne!=null);if(te.length!==0)return JSON.stringify(te)}function contextualFunction(ie,te,ne,re,oe){let le="{";re.forEach((he,de)=>{le+=he+":"+(de>=re.length-oe.length?oe[de-(re.length-oe.length)]:he)+","}),le=le.replace(/,\s*$/,"")+"}";let ae='document.dispatchEvent( new CustomEvent("'+ie+te+ne+'", { detail: {'+ne+":"+le+"} } ) )";return new Function(...re,ae)}function initialize$1(ie="",te){let ne=[...Array(12)].map(re=>(~~(Math.random()*36)).toString(36)).join("");return te!==void 0&&Object.keys(te).forEach(re=>{document.removeEventListener(ne+ie+re,()=>{}),document.addEventListener(ne+ie+re,oe=>{te[re]._(oe.detail[re])})}),ne}function functionize(ie,te="",ne){let re=[];return ne!==void 0&&Object.keys(ne).forEach(oe=>{let le=Object.keys(ne[oe]).filter(he=>he.charAt(0)!=="_"),ae=Object.keys(ne[oe]).filter(he=>he.charAt(0)!=="_"&&ne[oe][he]).map(he=>'"'+ne[oe][he].toString()+'"');re[oe]=contextualFunction(ie,te,oe,le,ae)}),re}function decommission(ie,te,ne){ne!==void 0&&Object.keys(ne).forEach(re=>{document.removeEventListener(ie+te+re,()=>{})})}function create_fragment$F(ie){let te,ne,re,oe;const le=ie[4].default,ae=create_slot(le,ie,ie[3],null);let he=[{class:ne=classString(ie[0],ie[2],"items")},{"data-module":re=serialize$1(ie[1]?"popup":null,typeof ie[1]=="boolean"?void 0:ie[1])},otherProps(ie[2])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("div"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,[pe]){ae&&ae.p&&(!oe||pe&8)&&update_slot_base(ae,le,ue,ue[3],oe?get_slot_changes(le,ue[3],pe,null):get_all_dirty_from_scope(ue[3]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&5&&ne!==(ne=classString(ue[0],ue[2],"items")))&&{class:ne},(!oe||pe&2&&re!==(re=serialize$1(ue[1]?"popup":null,typeof ue[1]=="boolean"?void 0:ue[1])))&&{"data-module":re},pe&4&&otherProps(ue[2])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function instance$F(ie,te,ne){const re=["ui","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{popup:de=void 0}=te;return ie.$$set=ue=>{te=assign(assign({},te),exclude_internal_props(ue)),ne(2,oe=compute_rest_props(te,re)),"ui"in ue&&ne(0,he=ue.ui),"popup"in ue&&ne(1,de=ue.popup),"$$scope"in ue&&ne(3,ae=ue.$$scope)},[he,de,oe,ae,le]}class Items extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$F,create_fragment$F,safe_not_equal,{ui:0,popup:1})}}function create_fragment$E(ie){let te,ne,re,oe,le,ae;const he=ie[7].default,de=create_slot(he,ie,ie[6],null);let ue=[{class:ne=classString(ie[1],ie[4],"item")},{"data-value":ie[0]},{"data-module":re=serialize$1(ie[2]?"popup":null,typeof ie[2]=="boolean"?void 0:ie[2])},otherProps(ie[4])],pe={};for(let fe=0;fe<ue.length;fe+=1)pe=assign(pe,ue[fe]);return{c(){te=element("div"),de&&de.c(),set_attributes(te,pe)},m(fe,ge){insert(fe,te,ge),de&&de.m(te,null),oe=!0,le||(ae=[listen(te,"click",ie[3]),listen(te,"keydown",ie[8]),listen(te,"keypress",ie[9]),listen(te,"keyup",ie[10])],le=!0)},p(fe,[ge]){de&&de.p&&(!oe||ge&64)&&update_slot_base(de,he,fe,fe[6],oe?get_slot_changes(he,fe[6],ge,null):get_all_dirty_from_scope(fe[6]),null),set_attributes(te,pe=get_spread_update(ue,[(!oe||ge&18&&ne!==(ne=classString(fe[1],fe[4],"item")))&&{class:ne},(!oe||ge&1)&&{"data-value":fe[0]},(!oe||ge&4&&re!==(re=serialize$1(fe[2]?"popup":null,typeof fe[2]=="boolean"?void 0:fe[2])))&&{"data-module":re},ge&16&&otherProps(fe[4])]))},i(fe){oe||(transition_in(de,fe),oe=!0)},o(fe){transition_out(de,fe),oe=!1},d(fe){fe&&detach(te),de&&de.d(fe),le=!1,run_all(ae)}}}function instance$E(ie,te,ne){const re=["ui","id","value","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{id:de=void 0}=te,{value:ue=void 0}=te,{popup:pe=void 0}=te;const fe=createEventDispatcher();function ge(Se){Se.target.attributes["data-value"]?(ne(0,ue=Se.target.attributes["data-value"].value),fe("click",{id:de,target:Se.target,value:ue})):fe("click",{id:de,target:Se.target})}function $e(Se){bubble.call(this,ie,Se)}function Te(Se){bubble.call(this,ie,Se)}function Ee(Se){bubble.call(this,ie,Se)}return ie.$$set=Se=>{te=assign(assign({},te),exclude_internal_props(Se)),ne(4,oe=compute_rest_props(te,re)),"ui"in Se&&ne(1,he=Se.ui),"id"in Se&&ne(5,de=Se.id),"value"in Se&&ne(0,ue=Se.value),"popup"in Se&&ne(2,pe=Se.popup),"$$scope"in Se&&ne(6,ae=Se.$$scope)},[ue,he,pe,ge,oe,de,ae,le,$e,Te,Ee]}class Item extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$E,create_fragment$E,safe_not_equal,{ui:1,id:5,value:0,popup:2})}}function create_fragment$D(ie){let te,ne,re,oe;const le=ie[4].default,ae=create_slot(le,ie,ie[3],null);let he=[{class:ne=classString(ie[0],ie[2],"extra")},{"data-module":re=serialize$1(ie[1]?"popup":null,typeof ie[1]=="boolean"?void 0:ie[1])},otherProps(ie[2])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("div"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,[pe]){ae&&ae.p&&(!oe||pe&8)&&update_slot_base(ae,le,ue,ue[3],oe?get_slot_changes(le,ue[3],pe,null):get_all_dirty_from_scope(ue[3]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&5&&ne!==(ne=classString(ue[0],ue[2],"extra")))&&{class:ne},(!oe||pe&2&&re!==(re=serialize$1(ue[1]?"popup":null,typeof ue[1]=="boolean"?void 0:ue[1])))&&{"data-module":re},pe&4&&otherProps(ue[2])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function instance$D(ie,te,ne){const re=["ui","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{popup:de=void 0}=te;return ie.$$set=ue=>{te=assign(assign({},te),exclude_internal_props(ue)),ne(2,oe=compute_rest_props(te,re)),"ui"in ue&&ne(0,he=ue.ui),"popup"in ue&&ne(1,de=ue.popup),"$$scope"in ue&&ne(3,ae=ue.$$scope)},[he,de,oe,ae,le]}class Extra extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$D,create_fragment$D,safe_not_equal,{ui:0,popup:1})}}function create_fragment$C(ie){let te,ne,re,oe,le;const ae=ie[8].default,he=create_slot(ae,ie,ie[7],null);let de=[{class:ne=classString(ie[4],ie[6],"pusher")},{"data-module":re=serialize$1(ie[5]?"popup":null,typeof ie[5]=="boolean"?void 0:ie[5])},otherProps(ie[6])],ue={};for(let pe=0;pe<de.length;pe+=1)ue=assign(ue,de[pe]);return{c(){te=element("div"),he&&he.c(),set_attributes(te,ue),add_render_callback(()=>ie[9].call(te))},m(pe,fe){insert(pe,te,fe),he&&he.m(te,null),oe=add_iframe_resize_listener(te,ie[9].bind(te)),le=!0},p(pe,[fe]){he&&he.p&&(!le||fe&128)&&update_slot_base(he,ae,pe,pe[7],le?get_slot_changes(ae,pe[7],fe,null):get_all_dirty_from_scope(pe[7]),null),set_attributes(te,ue=get_spread_update(de,[(!le||fe&80&&ne!==(ne=classString(pe[4],pe[6],"pusher")))&&{class:ne},(!le||fe&32&&re!==(re=serialize$1(pe[5]?"popup":null,typeof pe[5]=="boolean"?void 0:pe[5])))&&{"data-module":re},fe&64&&otherProps(pe[6])]))},i(pe){le||(transition_in(he,pe),le=!0)},o(pe){transition_out(he,pe),le=!1},d(pe){pe&&detach(te),he&&he.d(pe),oe()}}}function instance$C(ie,te,ne){const re=["ui","popup","clientWidth","clientHeight","offsetWidth","offsetHeight"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{popup:de=void 0}=te,{clientWidth:ue=0}=te,{clientHeight:pe=0}=te,{offsetWidth:fe=0}=te,{offsetHeight:ge=0}=te;function $e(){ue=this.clientWidth,pe=this.clientHeight,fe=this.offsetWidth,ge=this.offsetHeight,ne(0,ue),ne(1,pe),ne(2,fe),ne(3,ge)}return ie.$$set=Te=>{te=assign(assign({},te),exclude_internal_props(Te)),ne(6,oe=compute_rest_props(te,re)),"ui"in Te&&ne(4,he=Te.ui),"popup"in Te&&ne(5,de=Te.popup),"clientWidth"in Te&&ne(0,ue=Te.clientWidth),"clientHeight"in Te&&ne(1,pe=Te.clientHeight),"offsetWidth"in Te&&ne(2,fe=Te.offsetWidth),"offsetHeight"in Te&&ne(3,ge=Te.offsetHeight),"$$scope"in Te&&ne(7,ae=Te.$$scope)},[ue,pe,fe,ge,he,de,oe,ae,le,$e]}class Pusher extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$C,create_fragment$C,safe_not_equal,{ui:4,popup:5,clientWidth:0,clientHeight:1,offsetWidth:2,offsetHeight:3})}}function create_fragment$B(ie){let te,ne,re,oe;const le=ie[8].default,ae=create_slot(le,ie,ie[7],null);let he=[{id:ie[1]},{class:ne=classString(ie[0],ie[6],"modal")},{"data-module":re=rationalize([serialize$1(ie[3]?"popup":null,typeof ie[3]=="boolean"?void 0:ie[3]),serialize$1("modal",{...functionize(ie[5],ie[1],ie[4]),...ie[2]})])},otherProps(ie[6])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("div"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,[pe]){ae&&ae.p&&(!oe||pe&128)&&update_slot_base(ae,le,ue,ue[7],oe?get_slot_changes(le,ue[7],pe,null):get_all_dirty_from_scope(ue[7]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&2)&&{id:ue[1]},(!oe||pe&65&&ne!==(ne=classString(ue[0],ue[6],"modal")))&&{class:ne},(!oe||pe&30&&re!==(re=rationalize([serialize$1(ue[3]?"popup":null,typeof ue[3]=="boolean"?void 0:ue[3]),serialize$1("modal",{...functionize(ue[5],ue[1],ue[4]),...ue[2]})])))&&{"data-module":re},pe&64&&otherProps(ue[6])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function instance$B(ie,te,ne){const re=["ui","id","settings","popup","callbacks"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{id:de=void 0}=te,{settings:ue=void 0}=te,{popup:pe=void 0}=te,{callbacks:fe=void 0}=te;const ge=initialize$1(de,fe);return onDestroy(()=>{decommission(ge,de,fe)}),ie.$$set=$e=>{te=assign(assign({},te),exclude_internal_props($e)),ne(6,oe=compute_rest_props(te,re)),"ui"in $e&&ne(0,he=$e.ui),"id"in $e&&ne(1,de=$e.id),"settings"in $e&&ne(2,ue=$e.settings),"popup"in $e&&ne(3,pe=$e.popup),"callbacks"in $e&&ne(4,fe=$e.callbacks),"$$scope"in $e&&ne(7,ae=$e.$$scope)},[he,de,ue,pe,fe,ge,oe,ae,le]}class Modal extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$B,create_fragment$B,safe_not_equal,{ui:0,id:1,settings:2,popup:3,callbacks:4})}}function create_fragment$A(ie){let te,ne,re,oe;const le=ie[8].default,ae=create_slot(le,ie,ie[7],null);let he=[{id:ie[1]},{class:ne=classString(ie[0],ie[6],"flyout")},{"data-module":re=rationalize([serialize$1(ie[3]?"popup":null,typeof ie[3]=="boolean"?void 0:ie[3]),serialize$1("flyout",{...functionize(ie[5],ie[1],ie[4]),...ie[2]})])},otherProps(ie[6])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("div"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,[pe]){ae&&ae.p&&(!oe||pe&128)&&update_slot_base(ae,le,ue,ue[7],oe?get_slot_changes(le,ue[7],pe,null):get_all_dirty_from_scope(ue[7]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&2)&&{id:ue[1]},(!oe||pe&65&&ne!==(ne=classString(ue[0],ue[6],"flyout")))&&{class:ne},(!oe||pe&30&&re!==(re=rationalize([serialize$1(ue[3]?"popup":null,typeof ue[3]=="boolean"?void 0:ue[3]),serialize$1("flyout",{...functionize(ue[5],ue[1],ue[4]),...ue[2]})])))&&{"data-module":re},pe&64&&otherProps(ue[6])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function instance$A(ie,te,ne){const re=["ui","id","settings","popup","callbacks"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{id:de=void 0}=te,{settings:ue=void 0}=te,{popup:pe=void 0}=te,{callbacks:fe=void 0}=te;const ge=initialize$1(de,fe);return onDestroy(()=>{decommission(ge,de,fe)}),ie.$$set=$e=>{te=assign(assign({},te),exclude_internal_props($e)),ne(6,oe=compute_rest_props(te,re)),"ui"in $e&&ne(0,he=$e.ui),"id"in $e&&ne(1,de=$e.id),"settings"in $e&&ne(2,ue=$e.settings),"popup"in $e&&ne(3,pe=$e.popup),"callbacks"in $e&&ne(4,fe=$e.callbacks),"$$scope"in $e&&ne(7,ae=$e.$$scope)},[he,de,ue,pe,fe,ge,oe,ae,le]}let Flyout$2=class extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$A,create_fragment$A,safe_not_equal,{ui:0,id:1,settings:2,popup:3,callbacks:4})}};function create_fragment$z(ie){let te,ne,re,oe;const le=ie[4].default,ae=create_slot(le,ie,ie[3],null);let he=[{class:ne=classString(ie[0],ie[2],"actions")},{"data-module":re=serialize$1(ie[1]?"popup":null,typeof ie[1]=="boolean"?void 0:ie[1])},otherProps(ie[2])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("div"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,[pe]){ae&&ae.p&&(!oe||pe&8)&&update_slot_base(ae,le,ue,ue[3],oe?get_slot_changes(le,ue[3],pe,null):get_all_dirty_from_scope(ue[3]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&5&&ne!==(ne=classString(ue[0],ue[2],"actions")))&&{class:ne},(!oe||pe&2&&re!==(re=serialize$1(ue[1]?"popup":null,typeof ue[1]=="boolean"?void 0:ue[1])))&&{"data-module":re},pe&4&&otherProps(ue[2])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function instance$z(ie,te,ne){const re=["ui","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{popup:de=void 0}=te;return ie.$$set=ue=>{te=assign(assign({},te),exclude_internal_props(ue)),ne(2,oe=compute_rest_props(te,re)),"ui"in ue&&ne(0,he=ue.ui),"popup"in ue&&ne(1,de=ue.popup),"$$scope"in ue&&ne(3,ae=ue.$$scope)},[he,de,oe,ae,le]}class Actions extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$z,create_fragment$z,safe_not_equal,{ui:0,popup:1})}}function create_else_block$a(ie){let te,ne,re,oe;const le=ie[5].default,ae=create_slot(le,ie,ie[4],null);let he=[{class:ne=classString(ie[0],ie[3],"")},{"data-module":re=serialize$1(ie[2]?"popup":null,typeof ie[2]=="boolean"?void 0:ie[2])},otherProps(ie[3])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("td"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,pe){ae&&ae.p&&(!oe||pe&16)&&update_slot_base(ae,le,ue,ue[4],oe?get_slot_changes(le,ue[4],pe,null):get_all_dirty_from_scope(ue[4]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&9&&ne!==(ne=classString(ue[0],ue[3],"")))&&{class:ne},(!oe||pe&4&&re!==(re=serialize$1(ue[2]?"popup":null,typeof ue[2]=="boolean"?void 0:ue[2])))&&{"data-module":re},pe&8&&otherProps(ue[3])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function create_if_block$d(ie){let te,ne,re,oe;const le=ie[5].default,ae=create_slot(le,ie,ie[4],null);let he=[{class:ne=classString(ie[0],ie[3],"")},{"data-module":re=serialize$1(ie[2]?"popup":null,typeof ie[2]=="boolean"?void 0:ie[2])},otherProps(ie[3])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("th"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,pe){ae&&ae.p&&(!oe||pe&16)&&update_slot_base(ae,le,ue,ue[4],oe?get_slot_changes(le,ue[4],pe,null):get_all_dirty_from_scope(ue[4]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&9&&ne!==(ne=classString(ue[0],ue[3],"")))&&{class:ne},(!oe||pe&4&&re!==(re=serialize$1(ue[2]?"popup":null,typeof ue[2]=="boolean"?void 0:ue[2])))&&{"data-module":re},pe&8&&otherProps(ue[3])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function create_fragment$y(ie){let te,ne,re,oe;const le=[create_if_block$d,create_else_block$a],ae=[];function he(de,ue){return de[1]?0:1}return te=he(ie),ne=ae[te]=le[te](ie),{c(){ne.c(),re=empty$1()},m(de,ue){ae[te].m(de,ue),insert(de,re,ue),oe=!0},p(de,[ue]){let pe=te;te=he(de),te===pe?ae[te].p(de,ue):(group_outros(),transition_out(ae[pe],1,1,()=>{ae[pe]=null}),check_outros(),ne=ae[te],ne?ne.p(de,ue):(ne=ae[te]=le[te](de),ne.c()),transition_in(ne,1),ne.m(re.parentNode,re))},i(de){oe||(transition_in(ne),oe=!0)},o(de){transition_out(ne),oe=!1},d(de){de&&detach(re),ae[te].d(de)}}}function instance$y(ie,te,ne){const re=["ui","head","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{head:de=!1}=te,{popup:ue=void 0}=te;return ie.$$set=pe=>{te=assign(assign({},te),exclude_internal_props(pe)),ne(3,oe=compute_rest_props(te,re)),"ui"in pe&&ne(0,he=pe.ui),"head"in pe&&ne(1,de=pe.head),"popup"in pe&&ne(2,ue=pe.popup),"$$scope"in pe&&ne(4,ae=pe.$$scope)},[he,de,ue,oe,ae,le]}class Table_Col extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$y,create_fragment$y,safe_not_equal,{ui:0,head:1,popup:2})}}function create_fragment$x(ie){let te,ne,re,oe;const le=ie[4].default,ae=create_slot(le,ie,ie[3],null);let he=[{class:ne=classString(ie[0],ie[2],"")},{"data-module":re=serialize$1(ie[1]?"popup":null,typeof ie[1]=="boolean"?void 0:ie[1])},otherProps(ie[2])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("tr"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,[pe]){ae&&ae.p&&(!oe||pe&8)&&update_slot_base(ae,le,ue,ue[3],oe?get_slot_changes(le,ue[3],pe,null):get_all_dirty_from_scope(ue[3]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&5&&ne!==(ne=classString(ue[0],ue[2],"")))&&{class:ne},(!oe||pe&2&&re!==(re=serialize$1(ue[1]?"popup":null,typeof ue[1]=="boolean"?void 0:ue[1])))&&{"data-module":re},pe&4&&otherProps(ue[2])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function instance$x(ie,te,ne){const re=["ui","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{popup:de=void 0}=te;return ie.$$set=ue=>{te=assign(assign({},te),exclude_internal_props(ue)),ne(2,oe=compute_rest_props(te,re)),"ui"in ue&&ne(0,he=ue.ui),"popup"in ue&&ne(1,de=ue.popup),"$$scope"in ue&&ne(3,ae=ue.$$scope)},[he,de,oe,ae,le]}class Table_Row extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$x,create_fragment$x,safe_not_equal,{ui:0,popup:1})}}function create_fragment$w(ie){let te,ne,re,oe;const le=ie[4].default,ae=create_slot(le,ie,ie[3],null);let he=[{class:ne=classString(ie[0],ie[2],"")},{"data-module":re=serialize$1(ie[1]?"popup":null,typeof ie[1]=="boolean"?void 0:ie[1])},otherProps(ie[2])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("thead"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,[pe]){ae&&ae.p&&(!oe||pe&8)&&update_slot_base(ae,le,ue,ue[3],oe?get_slot_changes(le,ue[3],pe,null):get_all_dirty_from_scope(ue[3]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&5&&ne!==(ne=classString(ue[0],ue[2],"")))&&{class:ne},(!oe||pe&2&&re!==(re=serialize$1(ue[1]?"popup":null,typeof ue[1]=="boolean"?void 0:ue[1])))&&{"data-module":re},pe&4&&otherProps(ue[2])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function instance$w(ie,te,ne){const re=["ui","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{popup:de=void 0}=te;return ie.$$set=ue=>{te=assign(assign({},te),exclude_internal_props(ue)),ne(2,oe=compute_rest_props(te,re)),"ui"in ue&&ne(0,he=ue.ui),"popup"in ue&&ne(1,de=ue.popup),"$$scope"in ue&&ne(3,ae=ue.$$scope)},[he,de,oe,ae,le]}class Table_Head extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$w,create_fragment$w,safe_not_equal,{ui:0,popup:1})}}function create_fragment$v(ie){let te,ne,re,oe;const le=ie[4].default,ae=create_slot(le,ie,ie[3],null);let he=[{class:ne=classString(ie[0],ie[2],"")},{"data-module":re=serialize$1(ie[1]?"popup":null,typeof ie[1]=="boolean"?void 0:ie[1])},otherProps(ie[2])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("tbody"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,[pe]){ae&&ae.p&&(!oe||pe&8)&&update_slot_base(ae,le,ue,ue[3],oe?get_slot_changes(le,ue[3],pe,null):get_all_dirty_from_scope(ue[3]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&5&&ne!==(ne=classString(ue[0],ue[2],"")))&&{class:ne},(!oe||pe&2&&re!==(re=serialize$1(ue[1]?"popup":null,typeof ue[1]=="boolean"?void 0:ue[1])))&&{"data-module":re},pe&4&&otherProps(ue[2])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function instance$v(ie,te,ne){const re=["ui","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{popup:de=void 0}=te;return ie.$$set=ue=>{te=assign(assign({},te),exclude_internal_props(ue)),ne(2,oe=compute_rest_props(te,re)),"ui"in ue&&ne(0,he=ue.ui),"popup"in ue&&ne(1,de=ue.popup),"$$scope"in ue&&ne(3,ae=ue.$$scope)},[he,de,oe,ae,le]}class Table_Body extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$v,create_fragment$v,safe_not_equal,{ui:0,popup:1})}}const Tablesort="";function create_fragment$u(ie){let te,ne,re,oe;const le=ie[5].default,ae=create_slot(le,ie,ie[4],null);let he=[{class:ne=classString(ie[0],ie[3],"table")},{"data-module":re=rationalize([serialize$1(ie[2]?"popup":null,typeof ie[2]=="boolean"?void 0:ie[2]),serialize$1(ie[1]?"tablesort":null)])},otherProps(ie[3])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("table"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,[pe]){ae&&ae.p&&(!oe||pe&16)&&update_slot_base(ae,le,ue,ue[4],oe?get_slot_changes(le,ue[4],pe,null):get_all_dirty_from_scope(ue[4]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&9&&ne!==(ne=classString(ue[0],ue[3],"table")))&&{class:ne},(!oe||pe&6&&re!==(re=rationalize([serialize$1(ue[2]?"popup":null,typeof ue[2]=="boolean"?void 0:ue[2]),serialize$1(ue[1]?"tablesort":null)])))&&{"data-module":re},pe&8&&otherProps(ue[3])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function instance$u(ie,te,ne){const re=["ui","sortable","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{sortable:de=!1}=te,{popup:ue=void 0}=te;return ie.$$set=pe=>{te=assign(assign({},te),exclude_internal_props(pe)),ne(3,oe=compute_rest_props(te,re)),"ui"in pe&&ne(0,he=pe.ui),"sortable"in pe&&ne(1,de=pe.sortable),"popup"in pe&&ne(2,ue=pe.popup),"$$scope"in pe&&ne(4,ae=pe.$$scope)},[he,de,ue,oe,ae,le]}class Table extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$u,create_fragment$u,safe_not_equal,{ui:0,sortable:1,popup:2})}}function create_fragment$t(ie){let te,ne,re,oe;const le=ie[4].default,ae=create_slot(le,ie,ie[3],null);let he=[{class:ne=classString(ie[0],ie[2],"row")},{"data-module":re=serialize$1(ie[1]?"popup":null,typeof ie[1]=="boolean"?void 0:ie[1])},otherProps(ie[2])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("div"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,[pe]){ae&&ae.p&&(!oe||pe&8)&&update_slot_base(ae,le,ue,ue[3],oe?get_slot_changes(le,ue[3],pe,null):get_all_dirty_from_scope(ue[3]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&5&&ne!==(ne=classString(ue[0],ue[2],"row")))&&{class:ne},(!oe||pe&2&&re!==(re=serialize$1(ue[1]?"popup":null,typeof ue[1]=="boolean"?void 0:ue[1])))&&{"data-module":re},pe&4&&otherProps(ue[2])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function instance$t(ie,te,ne){const re=["ui","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{popup:de=void 0}=te;return ie.$$set=ue=>{te=assign(assign({},te),exclude_internal_props(ue)),ne(2,oe=compute_rest_props(te,re)),"ui"in ue&&ne(0,he=ue.ui),"popup"in ue&&ne(1,de=ue.popup),"$$scope"in ue&&ne(3,ae=ue.$$scope)},[he,de,oe,ae,le]}class Row extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$t,create_fragment$t,safe_not_equal,{ui:0,popup:1})}}function create_fragment$s(ie){let te,ne,re,oe,le,ae;const he=ie[12].default,de=create_slot(he,ie,ie[11],null);let ue=[{id:ie[0]},{class:ne=classString(ie[1],ie[7],"menu")},{"data-module":re=rationalize([serialize$1(ie[3]?"popup":null,typeof ie[3]=="boolean"?void 0:ie[3]),serialize$1("menu",{...functionize(ie[5],ie[0],ie[4]),...ie[2]})])},otherProps(ie[7])],pe={};for(let fe=0;fe<ue.length;fe+=1)pe=assign(pe,ue[fe]);return{c(){te=element("div"),de&&de.c(),set_attributes(te,pe)},m(fe,ge){insert(fe,te,ge),de&&de.m(te,null),oe=!0,le||(ae=[listen(te,"click",ie[6]),listen(te,"change",ie[13])],le=!0)},p(fe,[ge]){de&&de.p&&(!oe||ge&2048)&&update_slot_base(de,he,fe,fe[11],oe?get_slot_changes(he,fe[11],ge,null):get_all_dirty_from_scope(fe[11]),null),set_attributes(te,pe=get_spread_update(ue,[(!oe||ge&1)&&{id:fe[0]},(!oe||ge&130&&ne!==(ne=classString(fe[1],fe[7],"menu")))&&{class:ne},(!oe||ge&29&&re!==(re=rationalize([serialize$1(fe[3]?"popup":null,typeof fe[3]=="boolean"?void 0:fe[3]),serialize$1("menu",{...functionize(fe[5],fe[0],fe[4]),...fe[2]})])))&&{"data-module":re},ge&128&&otherProps(fe[7])]))},i(fe){oe||(transition_in(de,fe),oe=!0)},o(fe){transition_out(de,fe),oe=!1},d(fe){fe&&detach(te),de&&de.d(fe),le=!1,run_all(ae)}}}function instance$s(ie,te,ne){const re=["ui","id","selected","value","settings","popup","values","callbacks"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{id:de=void 0}=te,{selected:ue=void 0}=te,{value:pe=void 0}=te,{settings:fe=void 0}=te,{popup:ge=void 0}=te,{values:$e=!1}=te,{callbacks:Te=void 0}=te;de=de||Math.random().toString(36).substring(2,6);const Ee=initialize$1(de,Te);onDestroy(()=>{decommission(Ee,de,Te)});function Se(ke){(ke.target.attributes.hasOwnProperty("data-value")||ke.target.attributes.hasOwnProperty("value")||!$e&&ke.target.innerText)&&(ne(9,pe=ke.target.attributes.hasOwnProperty("data-value")?ke.target.attributes["data-value"].value:ke.target.attributes.hasOwnProperty("value").value?ke.target.attributes.value.value:$e?void 0:ke.target.innerText.trim()),ne(8,ue=pe))}function ve(ke){bubble.call(this,ie,ke)}return ie.$$set=ke=>{te=assign(assign({},te),exclude_internal_props(ke)),ne(7,oe=compute_rest_props(te,re)),"ui"in ke&&ne(1,he=ke.ui),"id"in ke&&ne(0,de=ke.id),"selected"in ke&&ne(8,ue=ke.selected),"value"in ke&&ne(9,pe=ke.value),"settings"in ke&&ne(2,fe=ke.settings),"popup"in ke&&ne(3,ge=ke.popup),"values"in ke&&ne(10,$e=ke.values),"callbacks"in ke&&ne(4,Te=ke.callbacks),"$$scope"in ke&&ne(11,ae=ke.$$scope)},[de,he,fe,ge,Te,Ee,Se,oe,ue,pe,$e,ae,le,ve]}let Menu$2=class extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$s,create_fragment$s,safe_not_equal,{ui:1,id:0,selected:8,value:9,settings:2,popup:3,values:10,callbacks:4})}};function create_fragment$r(ie){let te,ne,re,oe;const le=ie[4].default,ae=create_slot(le,ie,ie[3],null);let he=[{class:ne=classString(ie[0],ie[2],"column")},{"data-module":re=serialize$1(ie[1]?"popup":null,typeof ie[1]=="boolean"?void 0:ie[1])},otherProps(ie[2])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("div"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,[pe]){ae&&ae.p&&(!oe||pe&8)&&update_slot_base(ae,le,ue,ue[3],oe?get_slot_changes(le,ue[3],pe,null):get_all_dirty_from_scope(ue[3]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&5&&ne!==(ne=classString(ue[0],ue[2],"column")))&&{class:ne},(!oe||pe&2&&re!==(re=serialize$1(ue[1]?"popup":null,typeof ue[1]=="boolean"?void 0:ue[1])))&&{"data-module":re},pe&4&&otherProps(ue[2])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function instance$r(ie,te,ne){const re=["ui","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{popup:de=void 0}=te;return ie.$$set=ue=>{te=assign(assign({},te),exclude_internal_props(ue)),ne(2,oe=compute_rest_props(te,re)),"ui"in ue&&ne(0,he=ue.ui),"popup"in ue&&ne(1,de=ue.popup),"$$scope"in ue&&ne(3,ae=ue.$$scope)},[he,de,oe,ae,le]}class Column extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$r,create_fragment$r,safe_not_equal,{ui:0,popup:1})}}function create_else_block$9(ie){let te,ne,re,oe,le,ae,he,de=[{id:ie[3]},{type:"text"},{class:ne=classString(ie[5],ie[25],"input")},{"data-module":re=serialize$1(ie[23]?"popup":null,typeof ie[23]=="boolean"?void 0:ie[23])},otherProps(ie[25])],ue={};for(let ge=0;ge<de.length;ge+=1)ue=assign(ue,de[ge]);const pe=ie[28].default,fe=create_slot(pe,ie,ie[27],null);return{c(){te=element("input"),oe=space(),fe&&fe.c(),set_attributes(te,ue)},m(ge,$e){insert(ge,te,$e),te.autofocus&&te.focus(),set_input_value(te,ie[0]),insert(ge,oe,$e),fe&&fe.m(ge,$e),le=!0,ae||(he=[listen(te,"input",ie[119]),listen(te,"click",ie[24]),listen(te,"change",ie[97]),listen(te,"keydown",ie[98]),listen(te,"keypress",ie[99]),listen(te,"keyup",ie[100])],ae=!0)},p(ge,$e){set_attributes(te,ue=get_spread_update(de,[(!le||$e[0]&8)&&{id:ge[3]},{type:"text"},(!le||$e[0]&33554464&&ne!==(ne=classString(ge[5],ge[25],"input")))&&{class:ne},(!le||$e[0]&8388608&&re!==(re=serialize$1(ge[23]?"popup":null,typeof ge[23]=="boolean"?void 0:ge[23])))&&{"data-module":re},$e[0]&33554432&&otherProps(ge[25])])),$e[0]&1&&te.value!==ge[0]&&set_input_value(te,ge[0]),fe&&fe.p&&(!le||$e[0]&134217728)&&update_slot_base(fe,pe,ge,ge[27],le?get_slot_changes(pe,ge[27],$e,null):get_all_dirty_from_scope(ge[27]),null)},i(ge){le||(transition_in(fe,ge),le=!0)},o(ge){transition_out(fe,ge),le=!1},d(ge){ge&&(detach(te),detach(oe)),fe&&fe.d(ge),ae=!1,run_all(he)}}}function create_if_block_19(ie){let te,ne,re,oe;const le=ie[28].default,ae=create_slot(le,ie,ie[27],null);let he=[{class:ne=classString(ie[5],ie[25],"input")},{"data-module":re=serialize$1(ie[23]?"popup":null,typeof ie[23]=="boolean"?void 0:ie[23])},otherProps(ie[25])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("div"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,pe){ae&&ae.p&&(!oe||pe[0]&134217728)&&update_slot_base(ae,le,ue,ue[27],oe?get_slot_changes(le,ue[27],pe,null):get_all_dirty_from_scope(ue[27]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe[0]&33554464&&ne!==(ne=classString(ue[5],ue[25],"input")))&&{class:ne},(!oe||pe[0]&8388608&&re!==(re=serialize$1(ue[23]?"popup":null,typeof ue[23]=="boolean"?void 0:ue[23])))&&{"data-module":re},pe[0]&33554432&&otherProps(ue[25])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function create_if_block_18(ie){let te,ne,re,oe,le,ae,he,de,ue=[{type:"radio"},{id:ie[3]},{class:ne=classString(ie[5],ie[25],"input")},{"data-module":re=rationalize([serialize$1(ie[23]?"popup":null,typeof ie[23]=="boolean"?void 0:ie[23]),serialize$1("checkbox",ie[4])])},otherProps(ie[25]),otherProps(ie[25])],pe={};for(let $e=0;$e<ue.length;$e+=1)pe=assign(pe,ue[$e]);const fe=ie[28].default,ge=create_slot(fe,ie,ie[27],null);return ae=init_binding_group(ie[117][0]),{c(){te=element("input"),oe=space(),ge&&ge.c(),set_attributes(te,pe),ae.p(te)},m($e,Te){insert($e,te,Te),te.autofocus&&te.focus(),te.checked=te.__value===ie[2],set_input_value(te,ie[0]),insert($e,oe,Te),ge&&ge.m($e,Te),le=!0,he||(de=[listen(te,"change",ie[118]),listen(te,"click",ie[24]),listen(te,"change",ie[93]),listen(te,"keydown",ie[94]),listen(te,"keypress",ie[95]),listen(te,"keyup",ie[96])],he=!0)},p($e,Te){set_attributes(te,pe=get_spread_update(ue,[{type:"radio"},(!le||Te[0]&8)&&{id:$e[3]},(!le||Te[0]&33554464&&ne!==(ne=classString($e[5],$e[25],"input")))&&{class:ne},(!le||Te[0]&8388624&&re!==(re=rationalize([serialize$1($e[23]?"popup":null,typeof $e[23]=="boolean"?void 0:$e[23]),serialize$1("checkbox",$e[4])])))&&{"data-module":re},Te[0]&33554432&&otherProps($e[25]),Te[0]&33554432&&otherProps($e[25])])),Te[0]&4&&(te.checked=te.__value===$e[2]),Te[0]&1&&set_input_value(te,$e[0]),ge&&ge.p&&(!le||Te[0]&134217728)&&update_slot_base(ge,fe,$e,$e[27],le?get_slot_changes(fe,$e[27],Te,null):get_all_dirty_from_scope($e[27]),null)},i($e){le||(transition_in(ge,$e),le=!0)},o($e){transition_out(ge,$e),le=!1},d($e){$e&&(detach(te),detach(oe)),ge&&ge.d($e),ae.r(),he=!1,run_all(de)}}}function create_if_block_17(ie){let te,ne,re,oe,le,ae,he,de,ue=[{type:"checkbox"},{id:ie[3]},{class:ne=classString(ie[5],ie[25],"input")},{"data-module":re=rationalize([serialize$1(ie[23]?"popup":null,typeof ie[23]=="boolean"?void 0:ie[23]),serialize$1("checkbox",ie[4])])},otherProps(ie[25]),otherProps(ie[25])],pe={};for(let $e=0;$e<ue.length;$e+=1)pe=assign(pe,ue[$e]);const fe=ie[28].default,ge=create_slot(fe,ie,ie[27],null);return ae=init_binding_group(ie[117][0]),{c(){te=element("input"),oe=space(),ge&&ge.c(),set_attributes(te,pe),ae.p(te)},m($e,Te){insert($e,te,Te),te.autofocus&&te.focus(),te.checked=~(ie[2]||[]).indexOf(te.__value),te.checked=ie[1],set_input_value(te,ie[0]),insert($e,oe,Te),ge&&ge.m($e,Te),le=!0,he||(de=[listen(te,"change",ie[116]),listen(te,"click",ie[24]),listen(te,"change",ie[89]),listen(te,"keydown",ie[90]),listen(te,"keypress",ie[91]),listen(te,"keyup",ie[92])],he=!0)},p($e,Te){set_attributes(te,pe=get_spread_update(ue,[{type:"checkbox"},(!le||Te[0]&8)&&{id:$e[3]},(!le||Te[0]&33554464&&ne!==(ne=classString($e[5],$e[25],"input")))&&{class:ne},(!le||Te[0]&8388624&&re!==(re=rationalize([serialize$1($e[23]?"popup":null,typeof $e[23]=="boolean"?void 0:$e[23]),serialize$1("checkbox",$e[4])])))&&{"data-module":re},Te[0]&33554432&&otherProps($e[25]),Te[0]&33554432&&otherProps($e[25])])),Te[0]&4&&(te.checked=~($e[2]||[]).indexOf(te.__value)),Te[0]&2&&(te.checked=$e[1]),Te[0]&1&&set_input_value(te,$e[0]),ge&&ge.p&&(!le||Te[0]&134217728)&&update_slot_base(ge,fe,$e,$e[27],le?get_slot_changes(fe,$e[27],Te,null):get_all_dirty_from_scope($e[27]),null)},i($e){le||(transition_in(ge,$e),le=!0)},o($e){transition_out(ge,$e),le=!1},d($e){$e&&(detach(te),detach(oe)),ge&&ge.d($e),ae.r(),he=!1,run_all(de)}}}function create_if_block_16(ie){let te,ne,re,oe,le,ae,he,de=[{type:"year"},{id:ie[3]},{class:ne=classString(ie[5],ie[25],"input")},{"data-module":re=serialize$1(ie[23]?"popup":null,typeof ie[23]=="boolean"?void 0:ie[23])},otherProps(ie[25])],ue={};for(let ge=0;ge<de.length;ge+=1)ue=assign(ue,de[ge]);const pe=ie[28].default,fe=create_slot(pe,ie,ie[27],null);return{c(){te=element("input"),oe=space(),fe&&fe.c(),set_attributes(te,ue)},m(ge,$e){insert(ge,te,$e),te.autofocus&&te.focus(),set_input_value(te,ie[0]),insert(ge,oe,$e),fe&&fe.m(ge,$e),le=!0,ae||(he=[listen(te,"input",ie[115]),listen(te,"click",ie[24]),listen(te,"change",ie[85]),listen(te,"keydown",ie[86]),listen(te,"keypress",ie[87]),listen(te,"keyup",ie[88])],ae=!0)},p(ge,$e){set_attributes(te,ue=get_spread_update(de,[{type:"year"},(!le||$e[0]&8)&&{id:ge[3]},(!le||$e[0]&33554464&&ne!==(ne=classString(ge[5],ge[25],"input")))&&{class:ne},(!le||$e[0]&8388608&&re!==(re=serialize$1(ge[23]?"popup":null,typeof ge[23]=="boolean"?void 0:ge[23])))&&{"data-module":re},$e[0]&33554432&&otherProps(ge[25])])),$e[0]&1&&set_input_value(te,ge[0]),fe&&fe.p&&(!le||$e[0]&134217728)&&update_slot_base(fe,pe,ge,ge[27],le?get_slot_changes(pe,ge[27],$e,null):get_all_dirty_from_scope(ge[27]),null)},i(ge){le||(transition_in(fe,ge),le=!0)},o(ge){transition_out(fe,ge),le=!1},d(ge){ge&&(detach(te),detach(oe)),fe&&fe.d(ge),ae=!1,run_all(he)}}}function create_if_block_15(ie){let te,ne,re,oe,le,ae,he,de=[{type:"month"},{id:ie[3]},{class:ne=classString(ie[5],ie[25],"input")},{"data-module":re=serialize$1(ie[23]?"popup":null,typeof ie[23]=="boolean"?void 0:ie[23])},otherProps(ie[25])],ue={};for(let ge=0;ge<de.length;ge+=1)ue=assign(ue,de[ge]);const pe=ie[28].default,fe=create_slot(pe,ie,ie[27],null);return{c(){te=element("input"),oe=space(),fe&&fe.c(),set_attributes(te,ue)},m(ge,$e){insert(ge,te,$e),te.autofocus&&te.focus(),set_input_value(te,ie[0]),insert(ge,oe,$e),fe&&fe.m(ge,$e),le=!0,ae||(he=[listen(te,"input",ie[114]),listen(te,"click",ie[24]),listen(te,"change",ie[81]),listen(te,"keydown",ie[82]),listen(te,"keypress",ie[83]),listen(te,"keyup",ie[84])],ae=!0)},p(ge,$e){set_attributes(te,ue=get_spread_update(de,[{type:"month"},(!le||$e[0]&8)&&{id:ge[3]},(!le||$e[0]&33554464&&ne!==(ne=classString(ge[5],ge[25],"input")))&&{class:ne},(!le||$e[0]&8388608&&re!==(re=serialize$1(ge[23]?"popup":null,typeof ge[23]=="boolean"?void 0:ge[23])))&&{"data-module":re},$e[0]&33554432&&otherProps(ge[25])])),$e[0]&1&&set_input_value(te,ge[0]),fe&&fe.p&&(!le||$e[0]&134217728)&&update_slot_base(fe,pe,ge,ge[27],le?get_slot_changes(pe,ge[27],$e,null):get_all_dirty_from_scope(ge[27]),null)},i(ge){le||(transition_in(fe,ge),le=!0)},o(ge){transition_out(fe,ge),le=!1},d(ge){ge&&(detach(te),detach(oe)),fe&&fe.d(ge),ae=!1,run_all(he)}}}function create_if_block_14(ie){let te,ne,re,oe,le,ae,he,de=[{type:"week"},{id:ie[3]},{class:ne=classString(ie[5],ie[25],"input")},{"data-module":re=serialize$1(ie[23]?"popup":null,typeof ie[23]=="boolean"?void 0:ie[23])},otherProps(ie[25])],ue={};for(let ge=0;ge<de.length;ge+=1)ue=assign(ue,de[ge]);const pe=ie[28].default,fe=create_slot(pe,ie,ie[27],null);return{c(){te=element("input"),oe=space(),fe&&fe.c(),set_attributes(te,ue)},m(ge,$e){insert(ge,te,$e),te.autofocus&&te.focus(),set_input_value(te,ie[0]),insert(ge,oe,$e),fe&&fe.m(ge,$e),le=!0,ae||(he=[listen(te,"input",ie[113]),listen(te,"click",ie[24]),listen(te,"change",ie[77]),listen(te,"keydown",ie[78]),listen(te,"keypress",ie[79]),listen(te,"keyup",ie[80])],ae=!0)},p(ge,$e){set_attributes(te,ue=get_spread_update(de,[{type:"week"},(!le||$e[0]&8)&&{id:ge[3]},(!le||$e[0]&33554464&&ne!==(ne=classString(ge[5],ge[25],"input")))&&{class:ne},(!le||$e[0]&8388608&&re!==(re=serialize$1(ge[23]?"popup":null,typeof ge[23]=="boolean"?void 0:ge[23])))&&{"data-module":re},$e[0]&33554432&&otherProps(ge[25])])),$e[0]&1&&set_input_value(te,ge[0]),fe&&fe.p&&(!le||$e[0]&134217728)&&update_slot_base(fe,pe,ge,ge[27],le?get_slot_changes(pe,ge[27],$e,null):get_all_dirty_from_scope(ge[27]),null)},i(ge){le||(transition_in(fe,ge),le=!0)},o(ge){transition_out(fe,ge),le=!1},d(ge){ge&&(detach(te),detach(oe)),fe&&fe.d(ge),ae=!1,run_all(he)}}}function create_if_block_13(ie){let te,ne,re,oe,le,ae,he,de=[{type:"range"},{id:ie[3]},{class:ne=classString(ie[5],ie[25],"input")},{"data-module":re=serialize$1(ie[23]?"popup":null,typeof ie[23]=="boolean"?void 0:ie[23])},otherProps(ie[25])],ue={};for(let ge=0;ge<de.length;ge+=1)ue=assign(ue,de[ge]);const pe=ie[28].default,fe=create_slot(pe,ie,ie[27],null);return{c(){te=element("input"),oe=space(),fe&&fe.c(),set_attributes(te,ue)},m(ge,$e){insert(ge,te,$e),te.autofocus&&te.focus(),set_input_value(te,ie[0]),insert(ge,oe,$e),fe&&fe.m(ge,$e),le=!0,ae||(he=[listen(te,"change",ie[112]),listen(te,"input",ie[112]),listen(te,"click",ie[24]),listen(te,"change",ie[73]),listen(te,"keydown",ie[74]),listen(te,"keypress",ie[75]),listen(te,"keyup",ie[76])],ae=!0)},p(ge,$e){set_attributes(te,ue=get_spread_update(de,[{type:"range"},(!le||$e[0]&8)&&{id:ge[3]},(!le||$e[0]&33554464&&ne!==(ne=classString(ge[5],ge[25],"input")))&&{class:ne},(!le||$e[0]&8388608&&re!==(re=serialize$1(ge[23]?"popup":null,typeof ge[23]=="boolean"?void 0:ge[23])))&&{"data-module":re},$e[0]&33554432&&otherProps(ge[25])])),$e[0]&1&&set_input_value(te,ge[0]),fe&&fe.p&&(!le||$e[0]&134217728)&&update_slot_base(fe,pe,ge,ge[27],le?get_slot_changes(pe,ge[27],$e,null):get_all_dirty_from_scope(ge[27]),null)},i(ge){le||(transition_in(fe,ge),le=!0)},o(ge){transition_out(fe,ge),le=!1},d(ge){ge&&(detach(te),detach(oe)),fe&&fe.d(ge),ae=!1,run_all(he)}}}function create_if_block_12(ie){let te,ne,re,oe,le,ae,he,de=[{type:"search"},{id:ie[3]},{class:ne=classString(ie[5],ie[25],"input")},{"data-module":re=serialize$1(ie[23]?"popup":null,typeof ie[23]=="boolean"?void 0:ie[23])},otherProps(ie[25])],ue={};for(let ge=0;ge<de.length;ge+=1)ue=assign(ue,de[ge]);const pe=ie[28].default,fe=create_slot(pe,ie,ie[27],null);return{c(){te=element("input"),oe=space(),fe&&fe.c(),set_attributes(te,ue)},m(ge,$e){insert(ge,te,$e),te.autofocus&&te.focus(),set_input_value(te,ie[0]),insert(ge,oe,$e),fe&&fe.m(ge,$e),le=!0,ae||(he=[listen(te,"input",ie[111]),listen(te,"click",ie[24]),listen(te,"change",ie[69]),listen(te,"keydown",ie[70]),listen(te,"keypress",ie[71]),listen(te,"keyup",ie[72])],ae=!0)},p(ge,$e){set_attributes(te,ue=get_spread_update(de,[{type:"search"},(!le||$e[0]&8)&&{id:ge[3]},(!le||$e[0]&33554464&&ne!==(ne=classString(ge[5],ge[25],"input")))&&{class:ne},(!le||$e[0]&8388608&&re!==(re=serialize$1(ge[23]?"popup":null,typeof ge[23]=="boolean"?void 0:ge[23])))&&{"data-module":re},$e[0]&33554432&&otherProps(ge[25])])),$e[0]&1&&te.value!==ge[0]&&set_input_value(te,ge[0]),fe&&fe.p&&(!le||$e[0]&134217728)&&update_slot_base(fe,pe,ge,ge[27],le?get_slot_changes(pe,ge[27],$e,null):get_all_dirty_from_scope(ge[27]),null)},i(ge){le||(transition_in(fe,ge),le=!0)},o(ge){transition_out(fe,ge),le=!1},d(ge){ge&&(detach(te),detach(oe)),fe&&fe.d(ge),ae=!1,run_all(he)}}}function create_if_block_11(ie){let te,ne,re,oe,le,ae,he,de=[{type:"file"},{id:ie[3]},{class:ne=classString(ie[5],ie[25],"input")},{"data-module":re=serialize$1(ie[23]?"popup":null,typeof ie[23]=="boolean"?void 0:ie[23])},otherProps(ie[25])],ue={};for(let ge=0;ge<de.length;ge+=1)ue=assign(ue,de[ge]);const pe=ie[28].default,fe=create_slot(pe,ie,ie[27],null);return{c(){te=element("input"),oe=space(),fe&&fe.c(),set_attributes(te,ue)},m(ge,$e){insert(ge,te,$e),te.autofocus&&te.focus(),insert(ge,oe,$e),fe&&fe.m(ge,$e),le=!0,ae||(he=[listen(te,"change",ie[110]),listen(te,"click",ie[24]),listen(te,"change",ie[65]),listen(te,"keydown",ie[66]),listen(te,"keypress",ie[67]),listen(te,"keyup",ie[68])],ae=!0)},p(ge,$e){set_attributes(te,ue=get_spread_update(de,[{type:"file"},(!le||$e[0]&8)&&{id:ge[3]},(!le||$e[0]&33554464&&ne!==(ne=classString(ge[5],ge[25],"input")))&&{class:ne},(!le||$e[0]&8388608&&re!==(re=serialize$1(ge[23]?"popup":null,typeof ge[23]=="boolean"?void 0:ge[23])))&&{"data-module":re},$e[0]&33554432&&otherProps(ge[25])])),fe&&fe.p&&(!le||$e[0]&134217728)&&update_slot_base(fe,pe,ge,ge[27],le?get_slot_changes(pe,ge[27],$e,null):get_all_dirty_from_scope(ge[27]),null)},i(ge){le||(transition_in(fe,ge),le=!0)},o(ge){transition_out(fe,ge),le=!1},d(ge){ge&&(detach(te),detach(oe)),fe&&fe.d(ge),ae=!1,run_all(he)}}}function create_if_block_10(ie){let te,ne,re,oe,le,ae,he,de=[{type:"color"},{id:ie[3]},{class:ne=classString(ie[5],ie[25],"input")},{"data-module":re=serialize$1(ie[23]?"popup":null,typeof ie[23]=="boolean"?void 0:ie[23])},otherProps(ie[25])],ue={};for(let ge=0;ge<de.length;ge+=1)ue=assign(ue,de[ge]);const pe=ie[28].default,fe=create_slot(pe,ie,ie[27],null);return{c(){te=element("input"),oe=space(),fe&&fe.c(),set_attributes(te,ue)},m(ge,$e){insert(ge,te,$e),te.autofocus&&te.focus(),set_input_value(te,ie[0]),insert(ge,oe,$e),fe&&fe.m(ge,$e),le=!0,ae||(he=[listen(te,"input",ie[109]),listen(te,"click",ie[24]),listen(te,"change",ie[61]),listen(te,"keydown",ie[62]),listen(te,"keypress",ie[63]),listen(te,"keyup",ie[64])],ae=!0)},p(ge,$e){set_attributes(te,ue=get_spread_update(de,[{type:"color"},(!le||$e[0]&8)&&{id:ge[3]},(!le||$e[0]&33554464&&ne!==(ne=classString(ge[5],ge[25],"input")))&&{class:ne},(!le||$e[0]&8388608&&re!==(re=serialize$1(ge[23]?"popup":null,typeof ge[23]=="boolean"?void 0:ge[23])))&&{"data-module":re},$e[0]&33554432&&otherProps(ge[25])])),$e[0]&1&&set_input_value(te,ge[0]),fe&&fe.p&&(!le||$e[0]&134217728)&&update_slot_base(fe,pe,ge,ge[27],le?get_slot_changes(pe,ge[27],$e,null):get_all_dirty_from_scope(ge[27]),null)},i(ge){le||(transition_in(fe,ge),le=!0)},o(ge){transition_out(fe,ge),le=!1},d(ge){ge&&(detach(te),detach(oe)),fe&&fe.d(ge),ae=!1,run_all(he)}}}function create_if_block_9(ie){let te,ne,re,oe,le,ae,he,de=[{type:"time"},{id:ie[3]},{class:ne=classString(ie[5],ie[25],"input")},{"data-module":re=serialize$1(ie[23]?"popup":null,typeof ie[23]=="boolean"?void 0:ie[23])},otherProps(ie[25])],ue={};for(let ge=0;ge<de.length;ge+=1)ue=assign(ue,de[ge]);const pe=ie[28].default,fe=create_slot(pe,ie,ie[27],null);return{c(){te=element("input"),oe=space(),fe&&fe.c(),set_attributes(te,ue)},m(ge,$e){insert(ge,te,$e),te.autofocus&&te.focus(),set_input_value(te,ie[0]),insert(ge,oe,$e),fe&&fe.m(ge,$e),le=!0,ae||(he=[listen(te,"input",ie[108]),listen(te,"click",ie[24]),listen(te,"change",ie[57]),listen(te,"keydown",ie[58]),listen(te,"keypress",ie[59]),listen(te,"keyup",ie[60])],ae=!0)},p(ge,$e){set_attributes(te,ue=get_spread_update(de,[{type:"time"},(!le||$e[0]&8)&&{id:ge[3]},(!le||$e[0]&33554464&&ne!==(ne=classString(ge[5],ge[25],"input")))&&{class:ne},(!le||$e[0]&8388608&&re!==(re=serialize$1(ge[23]?"popup":null,typeof ge[23]=="boolean"?void 0:ge[23])))&&{"data-module":re},$e[0]&33554432&&otherProps(ge[25])])),$e[0]&1&&set_input_value(te,ge[0]),fe&&fe.p&&(!le||$e[0]&134217728)&&update_slot_base(fe,pe,ge,ge[27],le?get_slot_changes(pe,ge[27],$e,null):get_all_dirty_from_scope(ge[27]),null)},i(ge){le||(transition_in(fe,ge),le=!0)},o(ge){transition_out(fe,ge),le=!1},d(ge){ge&&(detach(te),detach(oe)),fe&&fe.d(ge),ae=!1,run_all(he)}}}function create_if_block_8(ie){let te,ne,re,oe,le,ae,he,de=[{type:"date"},{id:ie[3]},{class:ne=classString(ie[5],ie[25],"input")},{"data-module":re=serialize$1(ie[23]?"popup":null,typeof ie[23]=="boolean"?void 0:ie[23])},otherProps(ie[25])],ue={};for(let ge=0;ge<de.length;ge+=1)ue=assign(ue,de[ge]);const pe=ie[28].default,fe=create_slot(pe,ie,ie[27],null);return{c(){te=element("input"),oe=space(),fe&&fe.c(),set_attributes(te,ue)},m(ge,$e){insert(ge,te,$e),te.autofocus&&te.focus(),set_input_value(te,ie[0]),insert(ge,oe,$e),fe&&fe.m(ge,$e),le=!0,ae||(he=[listen(te,"input",ie[107]),listen(te,"click",ie[24]),listen(te,"change",ie[53]),listen(te,"keydown",ie[54]),listen(te,"keypress",ie[55]),listen(te,"keyup",ie[56])],ae=!0)},p(ge,$e){set_attributes(te,ue=get_spread_update(de,[{type:"date"},(!le||$e[0]&8)&&{id:ge[3]},(!le||$e[0]&33554464&&ne!==(ne=classString(ge[5],ge[25],"input")))&&{class:ne},(!le||$e[0]&8388608&&re!==(re=serialize$1(ge[23]?"popup":null,typeof ge[23]=="boolean"?void 0:ge[23])))&&{"data-module":re},$e[0]&33554432&&otherProps(ge[25])])),$e[0]&1&&set_input_value(te,ge[0]),fe&&fe.p&&(!le||$e[0]&134217728)&&update_slot_base(fe,pe,ge,ge[27],le?get_slot_changes(pe,ge[27],$e,null):get_all_dirty_from_scope(ge[27]),null)},i(ge){le||(transition_in(fe,ge),le=!0)},o(ge){transition_out(fe,ge),le=!1},d(ge){ge&&(detach(te),detach(oe)),fe&&fe.d(ge),ae=!1,run_all(he)}}}function create_if_block_7(ie){let te,ne,re,oe,le,ae,he,de=[{type:"tel"},{id:ie[3]},{class:ne=classString(ie[5],ie[25],"input")},{"data-module":re=serialize$1(ie[23]?"popup":null,typeof ie[23]=="boolean"?void 0:ie[23])},otherProps(ie[25])],ue={};for(let ge=0;ge<de.length;ge+=1)ue=assign(ue,de[ge]);const pe=ie[28].default,fe=create_slot(pe,ie,ie[27],null);return{c(){te=element("input"),oe=space(),fe&&fe.c(),set_attributes(te,ue)},m(ge,$e){insert(ge,te,$e),te.autofocus&&te.focus(),set_input_value(te,ie[0]),insert(ge,oe,$e),fe&&fe.m(ge,$e),le=!0,ae||(he=[listen(te,"input",ie[106]),listen(te,"click",ie[24]),listen(te,"change",ie[49]),listen(te,"keydown",ie[50]),listen(te,"keypress",ie[51]),listen(te,"keyup",ie[52])],ae=!0)},p(ge,$e){set_attributes(te,ue=get_spread_update(de,[{type:"tel"},(!le||$e[0]&8)&&{id:ge[3]},(!le||$e[0]&33554464&&ne!==(ne=classString(ge[5],ge[25],"input")))&&{class:ne},(!le||$e[0]&8388608&&re!==(re=serialize$1(ge[23]?"popup":null,typeof ge[23]=="boolean"?void 0:ge[23])))&&{"data-module":re},$e[0]&33554432&&otherProps(ge[25])])),$e[0]&1&&set_input_value(te,ge[0]),fe&&fe.p&&(!le||$e[0]&134217728)&&update_slot_base(fe,pe,ge,ge[27],le?get_slot_changes(pe,ge[27],$e,null):get_all_dirty_from_scope(ge[27]),null)},i(ge){le||(transition_in(fe,ge),le=!0)},o(ge){transition_out(fe,ge),le=!1},d(ge){ge&&(detach(te),detach(oe)),fe&&fe.d(ge),ae=!1,run_all(he)}}}function create_if_block_6$1(ie){let te,ne,re,oe,le,ae,he,de=[{type:"email"},{id:ie[3]},{class:ne=classString(ie[5],ie[25],"input")},{"data-module":re=serialize$1(ie[23]?"popup":null,typeof ie[23]=="boolean"?void 0:ie[23])},otherProps(ie[25])],ue={};for(let ge=0;ge<de.length;ge+=1)ue=assign(ue,de[ge]);const pe=ie[28].default,fe=create_slot(pe,ie,ie[27],null);return{c(){te=element("input"),oe=space(),fe&&fe.c(),set_attributes(te,ue)},m(ge,$e){insert(ge,te,$e),te.autofocus&&te.focus(),set_input_value(te,ie[0]),insert(ge,oe,$e),fe&&fe.m(ge,$e),le=!0,ae||(he=[listen(te,"input",ie[105]),listen(te,"click",ie[24]),listen(te,"change",ie[45]),listen(te,"keydown",ie[46]),listen(te,"keypress",ie[47]),listen(te,"keyup",ie[48])],ae=!0)},p(ge,$e){set_attributes(te,ue=get_spread_update(de,[{type:"email"},(!le||$e[0]&8)&&{id:ge[3]},(!le||$e[0]&33554464&&ne!==(ne=classString(ge[5],ge[25],"input")))&&{class:ne},(!le||$e[0]&8388608&&re!==(re=serialize$1(ge[23]?"popup":null,typeof ge[23]=="boolean"?void 0:ge[23])))&&{"data-module":re},$e[0]&33554432&&otherProps(ge[25])])),$e[0]&1&&te.value!==ge[0]&&set_input_value(te,ge[0]),fe&&fe.p&&(!le||$e[0]&134217728)&&update_slot_base(fe,pe,ge,ge[27],le?get_slot_changes(pe,ge[27],$e,null):get_all_dirty_from_scope(ge[27]),null)},i(ge){le||(transition_in(fe,ge),le=!0)},o(ge){transition_out(fe,ge),le=!1},d(ge){ge&&(detach(te),detach(oe)),fe&&fe.d(ge),ae=!1,run_all(he)}}}function create_if_block_5$2(ie){let te,ne,re,oe,le,ae,he,de=[{type:"number"},{id:ie[3]},{class:ne=classString(ie[5],ie[25],"input")},{"data-module":re=serialize$1(ie[23]?"popup":null,typeof ie[23]=="boolean"?void 0:ie[23])},otherProps(ie[25])],ue={};for(let ge=0;ge<de.length;ge+=1)ue=assign(ue,de[ge]);const pe=ie[28].default,fe=create_slot(pe,ie,ie[27],null);return{c(){te=element("input"),oe=space(),fe&&fe.c(),set_attributes(te,ue)},m(ge,$e){insert(ge,te,$e),te.autofocus&&te.focus(),set_input_value(te,ie[0]),insert(ge,oe,$e),fe&&fe.m(ge,$e),le=!0,ae||(he=[listen(te,"input",ie[104]),listen(te,"click",ie[24]),listen(te,"change",ie[41]),listen(te,"keydown",ie[42]),listen(te,"keypress",ie[43]),listen(te,"keyup",ie[44])],ae=!0)},p(ge,$e){set_attributes(te,ue=get_spread_update(de,[{type:"number"},(!le||$e[0]&8)&&{id:ge[3]},(!le||$e[0]&33554464&&ne!==(ne=classString(ge[5],ge[25],"input")))&&{class:ne},(!le||$e[0]&8388608&&re!==(re=serialize$1(ge[23]?"popup":null,typeof ge[23]=="boolean"?void 0:ge[23])))&&{"data-module":re},$e[0]&33554432&&otherProps(ge[25])])),$e[0]&1&&to_number(te.value)!==ge[0]&&set_input_value(te,ge[0]),fe&&fe.p&&(!le||$e[0]&134217728)&&update_slot_base(fe,pe,ge,ge[27],le?get_slot_changes(pe,ge[27],$e,null):get_all_dirty_from_scope(ge[27]),null)},i(ge){le||(transition_in(fe,ge),le=!0)},o(ge){transition_out(fe,ge),le=!1},d(ge){ge&&(detach(te),detach(oe)),fe&&fe.d(ge),ae=!1,run_all(he)}}}function create_if_block_4$3(ie){let te,ne,re,oe,le,ae,he,de=[{type:"hidden"},{id:ie[3]},{class:ne=classString(ie[5],ie[25],"input")},{"data-module":re=serialize$1(ie[23]?"popup":null,typeof ie[23]=="boolean"?void 0:ie[23])},otherProps(ie[25])],ue={};for(let ge=0;ge<de.length;ge+=1)ue=assign(ue,de[ge]);const pe=ie[28].default,fe=create_slot(pe,ie,ie[27],null);return{c(){te=element("input"),oe=space(),fe&&fe.c(),set_attributes(te,ue)},m(ge,$e){insert(ge,te,$e),te.autofocus&&te.focus(),set_input_value(te,ie[0]),insert(ge,oe,$e),fe&&fe.m(ge,$e),le=!0,ae||(he=[listen(te,"input",ie[103]),listen(te,"click",ie[24]),listen(te,"change",ie[37]),listen(te,"keydown",ie[38]),listen(te,"keypress",ie[39]),listen(te,"keyup",ie[40])],ae=!0)},p(ge,$e){set_attributes(te,ue=get_spread_update(de,[{type:"hidden"},(!le||$e[0]&8)&&{id:ge[3]},(!le||$e[0]&33554464&&ne!==(ne=classString(ge[5],ge[25],"input")))&&{class:ne},(!le||$e[0]&8388608&&re!==(re=serialize$1(ge[23]?"popup":null,typeof ge[23]=="boolean"?void 0:ge[23])))&&{"data-module":re},$e[0]&33554432&&otherProps(ge[25])])),$e[0]&1&&set_input_value(te,ge[0]),fe&&fe.p&&(!le||$e[0]&134217728)&&update_slot_base(fe,pe,ge,ge[27],le?get_slot_changes(pe,ge[27],$e,null):get_all_dirty_from_scope(ge[27]),null)},i(ge){le||(transition_in(fe,ge),le=!0)},o(ge){transition_out(fe,ge),le=!1},d(ge){ge&&(detach(te),detach(oe)),fe&&fe.d(ge),ae=!1,run_all(he)}}}function create_if_block_3$4(ie){let te,ne,re,oe,le,ae,he,de=[{type:"password"},{id:ie[3]},{class:ne=classString(ie[5],ie[25],"input")},{"data-module":re=serialize$1(ie[23]?"popup":null,typeof ie[23]=="boolean"?void 0:ie[23])},otherProps(ie[25])],ue={};for(let ge=0;ge<de.length;ge+=1)ue=assign(ue,de[ge]);const pe=ie[28].default,fe=create_slot(pe,ie,ie[27],null);return{c(){te=element("input"),oe=space(),fe&&fe.c(),set_attributes(te,ue)},m(ge,$e){insert(ge,te,$e),te.autofocus&&te.focus(),set_input_value(te,ie[0]),insert(ge,oe,$e),fe&&fe.m(ge,$e),le=!0,ae||(he=[listen(te,"input",ie[102]),listen(te,"click",ie[24]),listen(te,"change",ie[33]),listen(te,"keydown",ie[34]),listen(te,"keypress",ie[35]),listen(te,"keyup",ie[36])],ae=!0)},p(ge,$e){set_attributes(te,ue=get_spread_update(de,[{type:"password"},(!le||$e[0]&8)&&{id:ge[3]},(!le||$e[0]&33554464&&ne!==(ne=classString(ge[5],ge[25],"input")))&&{class:ne},(!le||$e[0]&8388608&&re!==(re=serialize$1(ge[23]?"popup":null,typeof ge[23]=="boolean"?void 0:ge[23])))&&{"data-module":re},$e[0]&33554432&&otherProps(ge[25])])),$e[0]&1&&te.value!==ge[0]&&set_input_value(te,ge[0]),fe&&fe.p&&(!le||$e[0]&134217728)&&update_slot_base(fe,pe,ge,ge[27],le?get_slot_changes(pe,ge[27],$e,null):get_all_dirty_from_scope(ge[27]),null)},i(ge){le||(transition_in(fe,ge),le=!0)},o(ge){transition_out(fe,ge),le=!1},d(ge){ge&&(detach(te),detach(oe)),fe&&fe.d(ge),ae=!1,run_all(he)}}}function create_if_block_2$4(ie){let te,ne,re,oe,le,ae,he,de=[{type:"text"},{id:ie[3]},{class:ne=classString(ie[5],ie[25],"input")},{"data-module":re=serialize$1(ie[23]?"popup":null,typeof ie[23]=="boolean"?void 0:ie[23])},otherProps(ie[25])],ue={};for(let ge=0;ge<de.length;ge+=1)ue=assign(ue,de[ge]);const pe=ie[28].default,fe=create_slot(pe,ie,ie[27],null);return{c(){te=element("input"),oe=space(),fe&&fe.c(),set_attributes(te,ue)},m(ge,$e){insert(ge,te,$e),te.autofocus&&te.focus(),set_input_value(te,ie[0]),insert(ge,oe,$e),fe&&fe.m(ge,$e),le=!0,ae||(he=[listen(te,"input",ie[101]),listen(te,"click",ie[24]),listen(te,"change",ie[29]),listen(te,"keydown",ie[30]),listen(te,"keypress",ie[31]),listen(te,"keyup",ie[32])],ae=!0)},p(ge,$e){set_attributes(te,ue=get_spread_update(de,[{type:"text"},(!le||$e[0]&8)&&{id:ge[3]},(!le||$e[0]&33554464&&ne!==(ne=classString(ge[5],ge[25],"input")))&&{class:ne},(!le||$e[0]&8388608&&re!==(re=serialize$1(ge[23]?"popup":null,typeof ge[23]=="boolean"?void 0:ge[23])))&&{"data-module":re},$e[0]&33554432&&otherProps(ge[25])])),$e[0]&1&&te.value!==ge[0]&&set_input_value(te,ge[0]),fe&&fe.p&&(!le||$e[0]&134217728)&&update_slot_base(fe,pe,ge,ge[27],le?get_slot_changes(pe,ge[27],$e,null):get_all_dirty_from_scope(ge[27]),null)},i(ge){le||(transition_in(fe,ge),le=!0)},o(ge){transition_out(fe,ge),le=!1},d(ge){ge&&(detach(te),detach(oe)),fe&&fe.d(ge),ae=!1,run_all(he)}}}function create_if_block_1$8(ie){let te,ne,re,oe;const le=ie[28].default,ae=create_slot(le,ie,ie[27],null);let he=[{class:ne=classString(ie[5],ie[25],"search input")},{"data-module":re=serialize$1(ie[23]?"popup":null,typeof ie[23]=="boolean"?void 0:ie[23])},otherProps(ie[25])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("div"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,pe){ae&&ae.p&&(!oe||pe[0]&134217728)&&update_slot_base(ae,le,ue,ue[27],oe?get_slot_changes(le,ue[27],pe,null):get_all_dirty_from_scope(ue[27]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe[0]&33554464&&ne!==(ne=classString(ue[5],ue[25],"search input")))&&{class:ne},(!oe||pe[0]&8388608&&re!==(re=serialize$1(ue[23]?"popup":null,typeof ue[23]=="boolean"?void 0:ue[23])))&&{"data-module":re},pe[0]&33554432&&otherProps(ue[25])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function create_if_block$c(ie){let te,ne,re,oe;const le=ie[28].default,ae=create_slot(le,ie,ie[27],null);let he=[{class:ne=classString(ie[5],ie[25],"file input")},{"data-module":re=serialize$1(ie[23]?"popup":null,typeof ie[23]=="boolean"?void 0:ie[23])},otherProps(ie[25])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("div"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,pe){ae&&ae.p&&(!oe||pe[0]&134217728)&&update_slot_base(ae,le,ue,ue[27],oe?get_slot_changes(le,ue[27],pe,null):get_all_dirty_from_scope(ue[27]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe[0]&33554464&&ne!==(ne=classString(ue[5],ue[25],"file input")))&&{class:ne},(!oe||pe[0]&8388608&&re!==(re=serialize$1(ue[23]?"popup":null,typeof ue[23]=="boolean"?void 0:ue[23])))&&{"data-module":re},pe[0]&33554432&&otherProps(ue[25])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function create_fragment$q(ie){let te,ne,re,oe;const le=[create_if_block$c,create_if_block_1$8,create_if_block_2$4,create_if_block_3$4,create_if_block_4$3,create_if_block_5$2,create_if_block_6$1,create_if_block_7,create_if_block_8,create_if_block_9,create_if_block_10,create_if_block_11,create_if_block_12,create_if_block_13,create_if_block_14,create_if_block_15,create_if_block_16,create_if_block_17,create_if_block_18,create_if_block_19,create_else_block$9],ae=[];function he(de,ue){return de[5]&&de[17]?0:de[5]&&de[18]?1:de[6]?2:de[7]?3:de[8]?4:de[9]?5:de[10]?6:de[11]?7:de[14]?8:de[15]?9:de[16]?10:de[17]?11:de[18]?12:de[19]?13:de[20]?14:de[21]?15:de[22]?16:de[12]?17:de[13]?18:de[5]?19:20}return te=he(ie),ne=ae[te]=le[te](ie),{c(){ne.c(),re=empty$1()},m(de,ue){ae[te].m(de,ue),insert(de,re,ue),oe=!0},p(de,ue){let pe=te;te=he(de),te===pe?ae[te].p(de,ue):(group_outros(),transition_out(ae[pe],1,1,()=>{ae[pe]=null}),check_outros(),ne=ae[te],ne?ne.p(de,ue):(ne=ae[te]=le[te](de),ne.c()),transition_in(ne,1),ne.m(re.parentNode,re))},i(de){oe||(transition_in(ne),oe=!0)},o(de){transition_out(ne),oe=!1},d(de){de&&detach(re),ae[te].d(de)}}}function instance$q(ie,te,ne){const re=["value","checked","group","id","settings","ui","text","password","hidden","number","email","tel","checkbox","radio","date","time","color","file","search","range","week","month","year","popup","callbacks"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{value:he=""}=te,{checked:de=!1}=te,{group:ue=""}=te,{id:pe=void 0}=te,{settings:fe=void 0}=te,{ui:ge=!1}=te,{text:$e=!1}=te,{password:Te=!1}=te,{hidden:Ee=!1}=te,{number:Se=!1}=te,{email:ve=!1}=te,{tel:ke=!1}=te,{checkbox:Re=!1}=te,{radio:Ne=!1}=te,{date:xe=!1}=te,{time:ze=!1}=te,{color:Me=!1}=te,{file:Ae=!1}=te,{search:Qe=!1}=te,{range:ht=!1}=te,{week:Pe=!1}=te,{month:_t=!1}=te,{year:rt=!1}=te,{popup:Ke=void 0}=te,{callbacks:Je=void 0}=te;const qe=initialize$1(pe,Je);onDestroy(()=>{decommission(qe,pe,Je)});const ct=createEventDispatcher();function Le(Ge){Re?ct("click",{id:pe,target:Ge.target,checked:de,value:he}):Ne?ct("click",{id:pe,target:Ge.target,group:ue,value:he}):ct("click",{id:pe,target:Ge.target,value:he})}const je=[[]];function pt(Ge){bubble.call(this,ie,Ge)}function Ot(Ge){bubble.call(this,ie,Ge)}function Ht(Ge){bubble.call(this,ie,Ge)}function Ze(Ge){bubble.call(this,ie,Ge)}function bt(Ge){bubble.call(this,ie,Ge)}function Pt(Ge){bubble.call(this,ie,Ge)}function Et(Ge){bubble.call(this,ie,Ge)}function Lt(Ge){bubble.call(this,ie,Ge)}function Ut(Ge){bubble.call(this,ie,Ge)}function Bt(Ge){bubble.call(this,ie,Ge)}function Ft(Ge){bubble.call(this,ie,Ge)}function jt(Ge){bubble.call(this,ie,Ge)}function zt(Ge){bubble.call(this,ie,Ge)}function mi(Ge){bubble.call(this,ie,Ge)}function Fi(Ge){bubble.call(this,ie,Ge)}function ki(Ge){bubble.call(this,ie,Ge)}function $i(Ge){bubble.call(this,ie,Ge)}function Di(Ge){bubble.call(this,ie,Ge)}function Ui(Ge){bubble.call(this,ie,Ge)}function Yi(Ge){bubble.call(this,ie,Ge)}function Nt(Ge){bubble.call(this,ie,Ge)}function Jt(Ge){bubble.call(this,ie,Ge)}function Yt(Ge){bubble.call(this,ie,Ge)}function zi(Ge){bubble.call(this,ie,Ge)}function _i(Ge){bubble.call(this,ie,Ge)}function Fe(Ge){bubble.call(this,ie,Ge)}function Li(Ge){bubble.call(this,ie,Ge)}function hi(Ge){bubble.call(this,ie,Ge)}function si(Ge){bubble.call(this,ie,Ge)}function vi(Ge){bubble.call(this,ie,Ge)}function lt(Ge){bubble.call(this,ie,Ge)}function Ct(Ge){bubble.call(this,ie,Ge)}function Ce(Ge){bubble.call(this,ie,Ge)}function Oe(Ge){bubble.call(this,ie,Ge)}function Ue(Ge){bubble.call(this,ie,Ge)}function We(Ge){bubble.call(this,ie,Ge)}function Tt(Ge){bubble.call(this,ie,Ge)}function Kt(Ge){bubble.call(this,ie,Ge)}function Ii(Ge){bubble.call(this,ie,Ge)}function Hi(Ge){bubble.call(this,ie,Ge)}function ln(Ge){bubble.call(this,ie,Ge)}function Ki(Ge){bubble.call(this,ie,Ge)}function ye(Ge){bubble.call(this,ie,Ge)}function we(Ge){bubble.call(this,ie,Ge)}function Be(Ge){bubble.call(this,ie,Ge)}function Ve(Ge){bubble.call(this,ie,Ge)}function ft(Ge){bubble.call(this,ie,Ge)}function It(Ge){bubble.call(this,ie,Ge)}function Dt(Ge){bubble.call(this,ie,Ge)}function Oi(Ge){bubble.call(this,ie,Ge)}function an(Ge){bubble.call(this,ie,Ge)}function fn(Ge){bubble.call(this,ie,Ge)}function mn(Ge){bubble.call(this,ie,Ge)}function Pi(Ge){bubble.call(this,ie,Ge)}function In(Ge){bubble.call(this,ie,Ge)}function fs(Ge){bubble.call(this,ie,Ge)}function ms(Ge){bubble.call(this,ie,Ge)}function $s(Ge){bubble.call(this,ie,Ge)}function Ms(Ge){bubble.call(this,ie,Ge)}function tn(Ge){bubble.call(this,ie,Ge)}function On(Ge){bubble.call(this,ie,Ge)}function xs(Ge){bubble.call(this,ie,Ge)}function Zn(Ge){bubble.call(this,ie,Ge)}function Ds(Ge){bubble.call(this,ie,Ge)}function Qn(Ge){bubble.call(this,ie,Ge)}function xt(Ge){bubble.call(this,ie,Ge)}function Xe(Ge){bubble.call(this,ie,Ge)}function St(Ge){bubble.call(this,ie,Ge)}function At(Ge){bubble.call(this,ie,Ge)}function ii(Ge){bubble.call(this,ie,Ge)}function Ti(Ge){bubble.call(this,ie,Ge)}function gi(Ge){bubble.call(this,ie,Ge)}function Ci(){he=this.value,ne(0,he)}function Gi(){he=this.value,ne(0,he)}function $n(){he=this.value,ne(0,he)}function fi(){he=to_number(this.value),ne(0,he)}function Ps(){he=this.value,ne(0,he)}function Rn(){he=this.value,ne(0,he)}function Bs(){he=this.value,ne(0,he)}function dr(){he=this.value,ne(0,he)}function il(){he=this.value,ne(0,he)}function nl(){he=this.value,ne(0,he)}function sl(){he=this.value,ne(0,he)}function Fn(){he=to_number(this.value),ne(0,he)}function Ri(){he=this.value,ne(0,he)}function Fs(){he=this.value,ne(0,he)}function Zr(){he=this.value,ne(0,he)}function cn(){ue=get_binding_group_value(je[0],this.__value,this.checked),de=this.checked,he=this.value,ne(2,ue),ne(1,de),ne(0,he)}function wn(){ue=this.__value,he=this.value,ne(2,ue),ne(0,he)}function rl(){he=this.value,ne(0,he)}return ie.$$set=Ge=>{te=assign(assign({},te),exclude_internal_props(Ge)),ne(25,oe=compute_rest_props(te,re)),"value"in Ge&&ne(0,he=Ge.value),"checked"in Ge&&ne(1,de=Ge.checked),"group"in Ge&&ne(2,ue=Ge.group),"id"in Ge&&ne(3,pe=Ge.id),"settings"in Ge&&ne(4,fe=Ge.settings),"ui"in Ge&&ne(5,ge=Ge.ui),"text"in Ge&&ne(6,$e=Ge.text),"password"in Ge&&ne(7,Te=Ge.password),"hidden"in Ge&&ne(8,Ee=Ge.hidden),"number"in Ge&&ne(9,Se=Ge.number),"email"in Ge&&ne(10,ve=Ge.email),"tel"in Ge&&ne(11,ke=Ge.tel),"checkbox"in Ge&&ne(12,Re=Ge.checkbox),"radio"in Ge&&ne(13,Ne=Ge.radio),"date"in Ge&&ne(14,xe=Ge.date),"time"in Ge&&ne(15,ze=Ge.time),"color"in Ge&&ne(16,Me=Ge.color),"file"in Ge&&ne(17,Ae=Ge.file),"search"in Ge&&ne(18,Qe=Ge.search),"range"in Ge&&ne(19,ht=Ge.range),"week"in Ge&&ne(20,Pe=Ge.week),"month"in Ge&&ne(21,_t=Ge.month),"year"in Ge&&ne(22,rt=Ge.year),"popup"in Ge&&ne(23,Ke=Ge.popup),"callbacks"in Ge&&ne(26,Je=Ge.callbacks),"$$scope"in Ge&&ne(27,ae=Ge.$$scope)},[he,de,ue,pe,fe,ge,$e,Te,Ee,Se,ve,ke,Re,Ne,xe,ze,Me,Ae,Qe,ht,Pe,_t,rt,Ke,Le,oe,Je,ae,le,pt,Ot,Ht,Ze,bt,Pt,Et,Lt,Ut,Bt,Ft,jt,zt,mi,Fi,ki,$i,Di,Ui,Yi,Nt,Jt,Yt,zi,_i,Fe,Li,hi,si,vi,lt,Ct,Ce,Oe,Ue,We,Tt,Kt,Ii,Hi,ln,Ki,ye,we,Be,Ve,ft,It,Dt,Oi,an,fn,mn,Pi,In,fs,ms,$s,Ms,tn,On,xs,Zn,Ds,Qn,xt,Xe,St,At,ii,Ti,gi,Ci,Gi,$n,fi,Ps,Rn,Bs,dr,il,nl,sl,Fn,Ri,Fs,Zr,cn,je,wn,rl]}let Input$2=class extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$q,create_fragment$q,safe_not_equal,{value:0,checked:1,group:2,id:3,settings:4,ui:5,text:6,password:7,hidden:8,number:9,email:10,tel:11,checkbox:12,radio:13,date:14,time:15,color:16,file:17,search:18,range:19,week:20,month:21,year:22,popup:23,callbacks:26},null,[-1,-1,-1,-1])}};function create_else_block$8(ie){let te,ne,re=!1,oe,le,ae,he,de,ue,pe,fe,ge,$e=[{id:he=ie[0]+"_div"},{class:de=classString(ie[3],ie[13],(ie[9]?"disabled ":"")+(ie[8]?" toggle":ie[7]?" slider":"")+" checkbox")},{"data-value":ie[4]},{"data-module":ue=rationalize([serialize$1(ie[11]?"popup":null,typeof ie[11]=="boolean"?void 0:ie[11]),serialize$1("checkbox",ie[10])])},otherProps(ie[13])],Te={};for(let Ee=0;Ee<$e.length;Ee+=1)Te=assign(Te,$e[Ee]);return pe=init_binding_group(ie[26][0]),{c(){te=element("div"),ne=element("input"),oe=space(),le=element("label"),ae=text$2(ie[5]),attr(ne,"type","checkbox"),attr(ne,"id",ie[0]),attr(ne,"name",ie[6]),ne.__value=ie[4],set_input_value(ne,ne.__value),ne.disabled=ie[9],attr(ne,"tabindex","0"),attr(le,"for",ie[0]),attr(le,"class","ui checkbox"),set_attributes(te,Te),pe.p(ne)},m(Ee,Se){insert(Ee,te,Se),append$2(te,ne),ne.checked=~(ie[1]||[]).indexOf(ne.__value),ne.checked=ie[2],ie[29](ne),append$2(te,oe),append$2(te,le),append$2(le,ae),fe||(ge=[listen(ne,"change",ie[28]),listen(te,"click",ie[21]),listen(te,"keydown",ie[22]),listen(te,"keypress",ie[23]),listen(te,"keyup",ie[24])],fe=!0)},p(Ee,Se){Se&1&&attr(ne,"id",Ee[0]),Se&64&&attr(ne,"name",Ee[6]),Se&16&&(ne.__value=Ee[4],set_input_value(ne,ne.__value),re=!0),Se&512&&(ne.disabled=Ee[9]),(re||Se&2)&&(ne.checked=~(Ee[1]||[]).indexOf(ne.__value)),Se&4&&(ne.checked=Ee[2]),Se&32&&set_data(ae,Ee[5]),Se&1&&attr(le,"for",Ee[0]),set_attributes(te,Te=get_spread_update($e,[Se&1&&he!==(he=Ee[0]+"_div")&&{id:he},Se&9096&&de!==(de=classString(Ee[3],Ee[13],(Ee[9]?"disabled ":"")+(Ee[8]?" toggle":Ee[7]?" slider":"")+" checkbox"))&&{class:de},Se&16&&{"data-value":Ee[4]},Se&3072&&ue!==(ue=rationalize([serialize$1(Ee[11]?"popup":null,typeof Ee[11]=="boolean"?void 0:Ee[11]),serialize$1("checkbox",Ee[10])]))&&{"data-module":ue},Se&8192&&otherProps(Ee[13])]))},i:noop$2,o:noop$2,d(Ee){Ee&&detach(te),ie[29](null),pe.r(),fe=!1,run_all(ge)}}}function create_if_block$b(ie){let te,ne,re=!1,oe,le,ae,he,de,ue,pe,fe;const ge=ie[16].default,$e=create_slot(ge,ie,ie[15],null);return ue=init_binding_group(ie[26][0]),{c(){te=element("div"),ne=element("input"),oe=space(),$e&&$e.c(),attr(ne,"type","checkbox"),attr(ne,"id",ie[0]),attr(ne,"name",ie[6]),ne.__value=ie[4],set_input_value(ne,ne.__value),ne.disabled=ie[9],attr(ne,"tabindex","0"),attr(te,"id",le=ie[0]+"_div"),attr(te,"class",ae=classString(ie[3],ie[13],(ie[8]?" toggle":ie[7]?" slider":"")+" checkbox")),attr(te,"data-value",ie[4]),attr(te,"data-module",he=rationalize([serialize$1(ie[11]?"popup":null,typeof ie[11]=="boolean"?void 0:ie[11]),serialize$1("checkbox",ie[10])])),ue.p(ne)},m(Te,Ee){insert(Te,te,Ee),append$2(te,ne),ne.checked=~(ie[1]||[]).indexOf(ne.__value),ne.checked=ie[2],ie[27](ne),append$2(te,oe),$e&&$e.m(te,null),de=!0,pe||(fe=[listen(ne,"change",ie[25]),listen(te,"click",ie[17]),listen(te,"keydown",ie[18]),listen(te,"keypress",ie[19]),listen(te,"keyup",ie[20])],pe=!0)},p(Te,Ee){(!de||Ee&1)&&attr(ne,"id",Te[0]),(!de||Ee&64)&&attr(ne,"name",Te[6]),(!de||Ee&16)&&(ne.__value=Te[4],set_input_value(ne,ne.__value),re=!0),(!de||Ee&512)&&(ne.disabled=Te[9]),(re||Ee&2)&&(ne.checked=~(Te[1]||[]).indexOf(ne.__value)),Ee&4&&(ne.checked=Te[2]),$e&&$e.p&&(!de||Ee&32768)&&update_slot_base($e,ge,Te,Te[15],de?get_slot_changes(ge,Te[15],Ee,null):get_all_dirty_from_scope(Te[15]),null),(!de||Ee&1&&le!==(le=Te[0]+"_div"))&&attr(te,"id",le),(!de||Ee&8584&&ae!==(ae=classString(Te[3],Te[13],(Te[8]?" toggle":Te[7]?" slider":"")+" checkbox")))&&attr(te,"class",ae),(!de||Ee&16)&&attr(te,"data-value",Te[4]),(!de||Ee&3072&&he!==(he=rationalize([serialize$1(Te[11]?"popup":null,typeof Te[11]=="boolean"?void 0:Te[11]),serialize$1("checkbox",Te[10])])))&&attr(te,"data-module",he)},i(Te){de||(transition_in($e,Te),de=!0)},o(Te){transition_out($e,Te),de=!1},d(Te){Te&&detach(te),ie[27](null),$e&&$e.d(Te),ue.r(),pe=!1,run_all(fe)}}}function create_fragment$p(ie){let te,ne,re,oe;const le=[create_if_block$b,create_else_block$8],ae=[];function he(de,ue){return de[5]?1:0}return te=he(ie),ne=ae[te]=le[te](ie),{c(){ne.c(),re=empty$1()},m(de,ue){ae[te].m(de,ue),insert(de,re,ue),oe=!0},p(de,[ue]){let pe=te;te=he(de),te===pe?ae[te].p(de,ue):(group_outros(),transition_out(ae[pe],1,1,()=>{ae[pe]=null}),check_outros(),ne=ae[te],ne?ne.p(de,ue):(ne=ae[te]=le[te](de),ne.c()),transition_in(ne,1),ne.m(re.parentNode,re))},i(de){oe||(transition_in(ne),oe=!0)},o(de){transition_out(ne),oe=!1},d(de){de&&detach(re),ae[te].d(de)}}}function instance$p(ie,te,ne){const re=["ui","id","group","value","label","name","checked","slider","toggle","disabled","indeterminate","settings","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{id:de=null}=te,{group:ue=[]}=te,{value:pe=null}=te,{label:fe=null}=te,{name:ge=null}=te,{checked:$e=!1}=te,{slider:Te=!1}=te,{toggle:Ee=!1}=te,{disabled:Se=!1}=te,{indeterminate:ve=!1}=te,{settings:ke=void 0}=te,{popup:Re=void 0}=te;de=de||Math.random().toString(36).substring(2,6);let Ne;onMount(()=>{ne(12,Ne.indeterminate=ve,Ne)}),afterUpdate(()=>{ne(12,Ne.indeterminate=ve,Ne)});const xe=[[]];function ze(Le){bubble.call(this,ie,Le)}function Me(Le){bubble.call(this,ie,Le)}function Ae(Le){bubble.call(this,ie,Le)}function Qe(Le){bubble.call(this,ie,Le)}function ht(Le){bubble.call(this,ie,Le)}function Pe(Le){bubble.call(this,ie,Le)}function _t(Le){bubble.call(this,ie,Le)}function rt(Le){bubble.call(this,ie,Le)}function Ke(){ue=get_binding_group_value(xe[0],this.__value,this.checked),$e=this.checked,ne(1,ue),ne(2,$e)}function Je(Le){binding_callbacks[Le?"unshift":"push"](()=>{Ne=Le,ne(12,Ne)})}function qe(){ue=get_binding_group_value(xe[0],this.__value,this.checked),$e=this.checked,ne(1,ue),ne(2,$e)}function ct(Le){binding_callbacks[Le?"unshift":"push"](()=>{Ne=Le,ne(12,Ne)})}return ie.$$set=Le=>{te=assign(assign({},te),exclude_internal_props(Le)),ne(13,oe=compute_rest_props(te,re)),"ui"in Le&&ne(3,he=Le.ui),"id"in Le&&ne(0,de=Le.id),"group"in Le&&ne(1,ue=Le.group),"value"in Le&&ne(4,pe=Le.value),"label"in Le&&ne(5,fe=Le.label),"name"in Le&&ne(6,ge=Le.name),"checked"in Le&&ne(2,$e=Le.checked),"slider"in Le&&ne(7,Te=Le.slider),"toggle"in Le&&ne(8,Ee=Le.toggle),"disabled"in Le&&ne(9,Se=Le.disabled),"indeterminate"in Le&&ne(14,ve=Le.indeterminate),"settings"in Le&&ne(10,ke=Le.settings),"popup"in Le&&ne(11,Re=Le.popup),"$$scope"in Le&&ne(15,ae=Le.$$scope)},[de,ue,$e,he,pe,fe,ge,Te,Ee,Se,ke,Re,Ne,oe,ve,ae,le,ze,Me,Ae,Qe,ht,Pe,_t,rt,Ke,xe,Je,qe,ct]}class Checkbox extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$p,create_fragment$p,safe_not_equal,{ui:3,id:0,group:1,value:4,label:5,name:6,checked:2,slider:7,toggle:8,disabled:9,indeterminate:14,settings:10,popup:11})}}function create_else_block$7(ie){let te,ne,re,oe;const le=ie[4].default,ae=create_slot(le,ie,ie[3],null);let he=[{class:ne=classString(ie[0],ie[2],"text")},{"data-module":re=serialize$1(ie[1]?"popup":null,typeof ie[1]=="boolean"?void 0:ie[1])},otherProps(ie[2])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("div"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,pe){ae&&ae.p&&(!oe||pe&8)&&update_slot_base(ae,le,ue,ue[3],oe?get_slot_changes(le,ue[3],pe,null):get_all_dirty_from_scope(ue[3]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&5&&ne!==(ne=classString(ue[0],ue[2],"text")))&&{class:ne},(!oe||pe&2&&re!==(re=serialize$1(ue[1]?"popup":null,typeof ue[1]=="boolean"?void 0:ue[1])))&&{"data-module":re},pe&4&&otherProps(ue[2])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function create_if_block$a(ie){let te,ne,re,oe;const le=ie[4].default,ae=create_slot(le,ie,ie[3],null);let he=[{class:ne=classString(ie[0],ie[2],"text")},{"data-module":re=serialize$1(ie[1]?"popup":null,typeof ie[1]=="boolean"?void 0:ie[1])},otherProps(ie[2])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("span"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,pe){ae&&ae.p&&(!oe||pe&8)&&update_slot_base(ae,le,ue,ue[3],oe?get_slot_changes(le,ue[3],pe,null):get_all_dirty_from_scope(ue[3]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&5&&ne!==(ne=classString(ue[0],ue[2],"text")))&&{class:ne},(!oe||pe&2&&re!==(re=serialize$1(ue[1]?"popup":null,typeof ue[1]=="boolean"?void 0:ue[1])))&&{"data-module":re},pe&4&&otherProps(ue[2])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function create_fragment$o(ie){let te,ne,re,oe;const le=[create_if_block$a,create_else_block$7],ae=[];function he(de,ue){return de[0]?0:1}return te=he(ie),ne=ae[te]=le[te](ie),{c(){ne.c(),re=empty$1()},m(de,ue){ae[te].m(de,ue),insert(de,re,ue),oe=!0},p(de,[ue]){let pe=te;te=he(de),te===pe?ae[te].p(de,ue):(group_outros(),transition_out(ae[pe],1,1,()=>{ae[pe]=null}),check_outros(),ne=ae[te],ne?ne.p(de,ue):(ne=ae[te]=le[te](de),ne.c()),transition_in(ne,1),ne.m(re.parentNode,re))},i(de){oe||(transition_in(ne),oe=!0)},o(de){transition_out(ne),oe=!1},d(de){de&&detach(re),ae[te].d(de)}}}function instance$o(ie,te,ne){const re=["ui","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{popup:de=void 0}=te;return ie.$$set=ue=>{te=assign(assign({},te),exclude_internal_props(ue)),ne(2,oe=compute_rest_props(te,re)),"ui"in ue&&ne(0,he=ue.ui),"popup"in ue&&ne(1,de=ue.popup),"$$scope"in ue&&ne(3,ae=ue.$$scope)},[he,de,oe,ae,le]}class Text extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$o,create_fragment$o,safe_not_equal,{ui:0,popup:1})}}function create_fragment$n(ie){let te,ne,re,oe;const le=ie[4].default,ae=create_slot(le,ie,ie[3],null);let he=[{class:ne=classString(ie[0],ie[2],"segment")},{"data-module":re=serialize$1(ie[1]?"popup":null,typeof ie[1]=="boolean"?void 0:ie[1])},otherProps(ie[2])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("div"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,[pe]){ae&&ae.p&&(!oe||pe&8)&&update_slot_base(ae,le,ue,ue[3],oe?get_slot_changes(le,ue[3],pe,null):get_all_dirty_from_scope(ue[3]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&5&&ne!==(ne=classString(ue[0],ue[2],"segment")))&&{class:ne},(!oe||pe&2&&re!==(re=serialize$1(ue[1]?"popup":null,typeof ue[1]=="boolean"?void 0:ue[1])))&&{"data-module":re},pe&4&&otherProps(ue[2])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function instance$n(ie,te,ne){const re=["ui","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{popup:de=void 0}=te;return ie.$$set=ue=>{te=assign(assign({},te),exclude_internal_props(ue)),ne(2,oe=compute_rest_props(te,re)),"ui"in ue&&ne(0,he=ue.ui),"popup"in ue&&ne(1,de=ue.popup),"$$scope"in ue&&ne(3,ae=ue.$$scope)},[he,de,oe,ae,le]}class Segment extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$n,create_fragment$n,safe_not_equal,{ui:0,popup:1})}}function create_fragment$m(ie){let te,ne,re,oe,le,ae;const he=ie[7].default,de=create_slot(he,ie,ie[6],null);let ue=[{id:ie[2]},{class:ne=classString(ie[1],ie[5],"")},{"data-value":ie[0]},{"data-module":re=serialize$1(ie[3]?"popup":null,typeof ie[3]=="boolean"?void 0:ie[3])},otherProps(ie[5])],pe={};for(let fe=0;fe<ue.length;fe+=1)pe=assign(pe,ue[fe]);return{c(){te=element("a"),de&&de.c(),set_attributes(te,pe)},m(fe,ge){insert(fe,te,ge),de&&de.m(te,null),oe=!0,le||(ae=[listen(te,"click",ie[4]),listen(te,"keydown",ie[8]),listen(te,"keypress",ie[9]),listen(te,"keyup",ie[10])],le=!0)},p(fe,[ge]){de&&de.p&&(!oe||ge&64)&&update_slot_base(de,he,fe,fe[6],oe?get_slot_changes(he,fe[6],ge,null):get_all_dirty_from_scope(fe[6]),null),set_attributes(te,pe=get_spread_update(ue,[(!oe||ge&4)&&{id:fe[2]},(!oe||ge&34&&ne!==(ne=classString(fe[1],fe[5],"")))&&{class:ne},(!oe||ge&1)&&{"data-value":fe[0]},(!oe||ge&8&&re!==(re=serialize$1(fe[3]?"popup":null,typeof fe[3]=="boolean"?void 0:fe[3])))&&{"data-module":re},ge&32&&otherProps(fe[5])]))},i(fe){oe||(transition_in(de,fe),oe=!0)},o(fe){transition_out(de,fe),oe=!1},d(fe){fe&&detach(te),de&&de.d(fe),le=!1,run_all(ae)}}}function instance$m(ie,te,ne){const re=["ui","id","value","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{id:de=void 0}=te,{value:ue=void 0}=te,{popup:pe=void 0}=te;const fe=createEventDispatcher();function ge(Se){Se.target.attributes["data-value"]?(ne(0,ue=Se.target.attributes["data-value"].value),fe("click",{id:de,target:Se.target,value:ue})):fe("click",{id:de,target:Se.target})}function $e(Se){bubble.call(this,ie,Se)}function Te(Se){bubble.call(this,ie,Se)}function Ee(Se){bubble.call(this,ie,Se)}return ie.$$set=Se=>{te=assign(assign({},te),exclude_internal_props(Se)),ne(5,oe=compute_rest_props(te,re)),"ui"in Se&&ne(1,he=Se.ui),"id"in Se&&ne(2,de=Se.id),"value"in Se&&ne(0,ue=Se.value),"popup"in Se&&ne(3,pe=Se.popup),"$$scope"in Se&&ne(6,ae=Se.$$scope)},[ue,he,de,pe,ge,oe,ae,le,$e,Te,Ee]}class Link extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$m,create_fragment$m,safe_not_equal,{ui:1,id:2,value:0,popup:3})}}function create_else_block$6(ie){let te,ne,re,oe;const le=ie[8].default,ae=create_slot(le,ie,ie[7],null);let he=[{class:ne=classString(ie[0],ie[6],"label")},{"data-module":re=serialize$1(ie[5]?"popup":null,typeof ie[5]=="boolean"?void 0:ie[5])},otherProps(ie[6])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("div"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,pe){ae&&ae.p&&(!oe||pe&128)&&update_slot_base(ae,le,ue,ue[7],oe?get_slot_changes(le,ue[7],pe,null):get_all_dirty_from_scope(ue[7]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&65&&ne!==(ne=classString(ue[0],ue[6],"label")))&&{class:ne},(!oe||pe&32&&re!==(re=serialize$1(ue[5]?"popup":null,typeof ue[5]=="boolean"?void 0:ue[5])))&&{"data-module":re},pe&64&&otherProps(ue[6])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function create_if_block_1$7(ie){let te,ne;const re=ie[8].default,oe=create_slot(re,ie,ie[7],null);return{c(){te=element("label"),oe&&oe.c()},m(le,ae){insert(le,te,ae),oe&&oe.m(te,null),ne=!0},p(le,ae){oe&&oe.p&&(!ne||ae&128)&&update_slot_base(oe,re,le,le[7],ne?get_slot_changes(re,le[7],ae,null):get_all_dirty_from_scope(le[7]),null)},i(le){ne||(transition_in(oe,le),ne=!0)},o(le){transition_out(oe,le),ne=!1},d(le){le&&detach(te),oe&&oe.d(le)}}}function create_if_block$9(ie){let te,ne,re,oe;const le=ie[8].default,ae=create_slot(le,ie,ie[7],null);let he=[{class:ne=classString(ie[0],ie[6],"label")},{"data-module":re=serialize$1(ie[5]?"popup":null,typeof ie[5]=="boolean"?void 0:ie[5])},otherProps(ie[6]),{for:ie[4]}],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("label"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,pe){ae&&ae.p&&(!oe||pe&128)&&update_slot_base(ae,le,ue,ue[7],oe?get_slot_changes(le,ue[7],pe,null):get_all_dirty_from_scope(ue[7]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&65&&ne!==(ne=classString(ue[0],ue[6],"label")))&&{class:ne},(!oe||pe&32&&re!==(re=serialize$1(ue[5]?"popup":null,typeof ue[5]=="boolean"?void 0:ue[5])))&&{"data-module":re},pe&64&&otherProps(ue[6]),(!oe||pe&16)&&{for:ue[4]}]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function create_fragment$l(ie){let te,ne,re,oe;const le=[create_if_block$9,create_if_block_1$7,create_else_block$6],ae=[];function he(de,ue){return de[4]?0:de[1]||de[2]||de[3]?1:2}return te=he(ie),ne=ae[te]=le[te](ie),{c(){ne.c(),re=empty$1()},m(de,ue){ae[te].m(de,ue),insert(de,re,ue),oe=!0},p(de,[ue]){let pe=te;te=he(de),te===pe?ae[te].p(de,ue):(group_outros(),transition_out(ae[pe],1,1,()=>{ae[pe]=null}),check_outros(),ne=ae[te],ne?ne.p(de,ue):(ne=ae[te]=le[te](de),ne.c()),transition_in(ne,1),ne.m(re.parentNode,re))},i(de){oe||(transition_in(ne),oe=!0)},o(de){transition_out(ne),oe=!1},d(de){de&&detach(re),ae[te].d(de)}}}function instance$l(ie,te,ne){const re=["ui","checkbox","input","radio","_for","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{checkbox:de=!1}=te,{input:ue=!1}=te,{radio:pe=!1}=te,{_for:fe=""}=te,{popup:ge=void 0}=te;return ie.$$set=$e=>{te=assign(assign({},te),exclude_internal_props($e)),ne(6,oe=compute_rest_props(te,re)),"ui"in $e&&ne(0,he=$e.ui),"checkbox"in $e&&ne(1,de=$e.checkbox),"input"in $e&&ne(2,ue=$e.input),"radio"in $e&&ne(3,pe=$e.radio),"_for"in $e&&ne(4,fe=$e._for),"popup"in $e&&ne(5,ge=$e.popup),"$$scope"in $e&&ne(7,ae=$e.$$scope)},[he,de,ue,pe,fe,ge,oe,ae,le]}class Label extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$l,create_fragment$l,safe_not_equal,{ui:0,checkbox:1,input:2,radio:3,_for:4,popup:5})}}const get_default_slot_changes=ie=>({mouseover:ie&16}),get_default_slot_context=ie=>({mouseover:ie[4]});function create_else_block$5(ie){let te,ne,re,oe,le,ae;const he=ie[7].default,de=create_slot(he,ie,ie[6],get_default_slot_context);let ue=[{class:ne=classString(ie[0],ie[5],"image")},{"data-module":re=serialize$1(ie[3]?"popup":null,typeof ie[3]=="boolean"?void 0:ie[3])},otherProps(ie[5])],pe={};for(let fe=0;fe<ue.length;fe+=1)pe=assign(pe,ue[fe]);return{c(){te=element("div"),de&&de.c(),set_attributes(te,pe)},m(fe,ge){insert(fe,te,ge),de&&de.m(te,null),oe=!0,le||(ae=[listen(te,"mouseenter",ie[9]),listen(te,"mouseleave",ie[10]),listen(te,"focus",ie[8])],le=!0)},p(fe,ge){de&&de.p&&(!oe||ge&80)&&update_slot_base(de,he,fe,fe[6],oe?get_slot_changes(he,fe[6],ge,get_default_slot_changes):get_all_dirty_from_scope(fe[6]),get_default_slot_context),set_attributes(te,pe=get_spread_update(ue,[(!oe||ge&33&&ne!==(ne=classString(fe[0],fe[5],"image")))&&{class:ne},(!oe||ge&8&&re!==(re=serialize$1(fe[3]?"popup":null,typeof fe[3]=="boolean"?void 0:fe[3])))&&{"data-module":re},ge&32&&otherProps(fe[5])]))},i(fe){oe||(transition_in(de,fe),oe=!0)},o(fe){transition_out(de,fe),oe=!1},d(fe){fe&&detach(te),de&&de.d(fe),le=!1,run_all(ae)}}}function create_if_block$8(ie){let te,ne,re,oe,le=[{src:ne=ie[2]},{class:re=classString(ie[0],ie[5],"image")},{alt:ie[1]},{"data-module":oe=serialize$1(ie[3]?"popup":null,typeof ie[3]=="boolean"?void 0:ie[3])},otherProps(ie[5])],ae={};for(let he=0;he<le.length;he+=1)ae=assign(ae,le[he]);return{c(){te=element("img"),set_attributes(te,ae)},m(he,de){insert(he,te,de)},p(he,de){set_attributes(te,ae=get_spread_update(le,[de&4&&!src_url_equal(te.src,ne=he[2])&&{src:ne},de&33&&re!==(re=classString(he[0],he[5],"image"))&&{class:re},de&2&&{alt:he[1]},de&8&&oe!==(oe=serialize$1(he[3]?"popup":null,typeof he[3]=="boolean"?void 0:he[3]))&&{"data-module":oe},de&32&&otherProps(he[5])]))},i:noop$2,o:noop$2,d(he){he&&detach(te)}}}function create_fragment$k(ie){let te,ne,re,oe;const le=[create_if_block$8,create_else_block$5],ae=[];function he(de,ue){return de[2]||!de[2]&&de[0]?0:1}return te=he(ie),ne=ae[te]=le[te](ie),{c(){ne.c(),re=empty$1()},m(de,ue){ae[te].m(de,ue),insert(de,re,ue),oe=!0},p(de,[ue]){let pe=te;te=he(de),te===pe?ae[te].p(de,ue):(group_outros(),transition_out(ae[pe],1,1,()=>{ae[pe]=null}),check_outros(),ne=ae[te],ne?ne.p(de,ue):(ne=ae[te]=le[te](de),ne.c()),transition_in(ne,1),ne.m(re.parentNode,re))},i(de){oe||(transition_in(ne),oe=!0)},o(de){transition_out(ne),oe=!1},d(de){de&&detach(re),ae[te].d(de)}}}function instance$k(ie,te,ne){const re=["ui","alt","src","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{alt:de=void 0}=te,{src:ue=void 0}=te,{popup:pe=void 0}=te,fe=!1;function ge(Ee){bubble.call(this,ie,Ee)}const $e=()=>{ne(4,fe=!0)},Te=()=>{ne(4,fe=!1)};return ie.$$set=Ee=>{te=assign(assign({},te),exclude_internal_props(Ee)),ne(5,oe=compute_rest_props(te,re)),"ui"in Ee&&ne(0,he=Ee.ui),"alt"in Ee&&ne(1,de=Ee.alt),"src"in Ee&&ne(2,ue=Ee.src),"popup"in Ee&&ne(3,pe=Ee.popup),"$$scope"in Ee&&ne(6,ae=Ee.$$scope)},[he,de,ue,pe,fe,oe,ae,le,ge,$e,Te]}let Image$1=class extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$k,create_fragment$k,safe_not_equal,{ui:0,alt:1,src:2,popup:3})}};function create_else_block$4(ie){let te,ne,re,oe;const le=ie[8].default,ae=create_slot(le,ie,ie[7],null);let he=[{id:ie[3]},{class:ne=classString(ie[1],ie[6],"icon")},{"data-value":ie[0]},{"data-module":re=serialize$1(ie[4]?"popup":null,typeof ie[4]=="boolean"?void 0:ie[4])},otherProps(ie[6])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("i"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,pe){ae&&ae.p&&(!oe||pe&128)&&update_slot_base(ae,le,ue,ue[7],oe?get_slot_changes(le,ue[7],pe,null):get_all_dirty_from_scope(ue[7]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&8)&&{id:ue[3]},(!oe||pe&66&&ne!==(ne=classString(ue[1],ue[6],"icon")))&&{class:ne},(!oe||pe&1)&&{"data-value":ue[0]},(!oe||pe&16&&re!==(re=serialize$1(ue[4]?"popup":null,typeof ue[4]=="boolean"?void 0:ue[4])))&&{"data-module":re},pe&64&&otherProps(ue[6])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function create_if_block$7(ie){let te,ne,re,oe,le,ae;const he=ie[8].default,de=create_slot(he,ie,ie[7],null);let ue=[{id:ie[3]},{class:ne=classString(ie[1],ie[6],"icon")},{"data-value":ie[0]},{"data-module":re=serialize$1(ie[4]?"popup":null,typeof ie[4]=="boolean"?void 0:ie[4])},otherProps(ie[6])],pe={};for(let fe=0;fe<ue.length;fe+=1)pe=assign(pe,ue[fe]);return{c(){te=element("i"),de&&de.c(),set_attributes(te,pe)},m(fe,ge){insert(fe,te,ge),de&&de.m(te,null),oe=!0,le||(ae=[listen(te,"click",ie[5]),listen(te,"keydown",ie[9]),listen(te,"keypress",ie[10]),listen(te,"keyup",ie[11])],le=!0)},p(fe,ge){de&&de.p&&(!oe||ge&128)&&update_slot_base(de,he,fe,fe[7],oe?get_slot_changes(he,fe[7],ge,null):get_all_dirty_from_scope(fe[7]),null),set_attributes(te,pe=get_spread_update(ue,[(!oe||ge&8)&&{id:fe[3]},(!oe||ge&66&&ne!==(ne=classString(fe[1],fe[6],"icon")))&&{class:ne},(!oe||ge&1)&&{"data-value":fe[0]},(!oe||ge&16&&re!==(re=serialize$1(fe[4]?"popup":null,typeof fe[4]=="boolean"?void 0:fe[4])))&&{"data-module":re},ge&64&&otherProps(fe[6])]))},i(fe){oe||(transition_in(de,fe),oe=!0)},o(fe){transition_out(de,fe),oe=!1},d(fe){fe&&detach(te),de&&de.d(fe),le=!1,run_all(ae)}}}function create_fragment$j(ie){let te,ne,re,oe;const le=[create_if_block$7,create_else_block$4],ae=[];function he(de,ue){return de[2]?0:1}return te=he(ie),ne=ae[te]=le[te](ie),{c(){ne.c(),re=empty$1()},m(de,ue){ae[te].m(de,ue),insert(de,re,ue),oe=!0},p(de,[ue]){let pe=te;te=he(de),te===pe?ae[te].p(de,ue):(group_outros(),transition_out(ae[pe],1,1,()=>{ae[pe]=null}),check_outros(),ne=ae[te],ne?ne.p(de,ue):(ne=ae[te]=le[te](de),ne.c()),transition_in(ne,1),ne.m(re.parentNode,re))},i(de){oe||(transition_in(ne),oe=!0)},o(de){transition_out(ne),oe=!1},d(de){de&&detach(re),ae[te].d(de)}}}function instance$j(ie,te,ne){const re=["ui","link","id","value","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{link:de=!1}=te,{id:ue=void 0}=te,{value:pe=void 0}=te,{popup:fe=void 0}=te;const ge=createEventDispatcher();function $e(ve){ve.target.attributes["data-value"]?(ne(0,pe=ve.target.attributes["data-value"].value),ge("click",{id:ue,target:ve.target,value:pe})):ge("click",{id:ue,target:ve.target})}function Te(ve){bubble.call(this,ie,ve)}function Ee(ve){bubble.call(this,ie,ve)}function Se(ve){bubble.call(this,ie,ve)}return ie.$$set=ve=>{te=assign(assign({},te),exclude_internal_props(ve)),ne(6,oe=compute_rest_props(te,re)),"ui"in ve&&ne(1,he=ve.ui),"link"in ve&&ne(2,de=ve.link),"id"in ve&&ne(3,ue=ve.id),"value"in ve&&ne(0,pe=ve.value),"popup"in ve&&ne(4,fe=ve.popup),"$$scope"in ve&&ne(7,ae=ve.$$scope)},[pe,he,de,ue,fe,$e,oe,ae,le,Te,Ee,Se]}class Icon extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$j,create_fragment$j,safe_not_equal,{ui:1,link:2,id:3,value:0,popup:4})}}function create_else_block$3(ie){let te,ne,re,oe;const le=ie[10].default,ae=create_slot(le,ie,ie[9],null);let he=[{class:ne=classString(ie[0],ie[8],"header")},{"data-module":re=serialize$1(ie[7]?"popup":null,typeof ie[7]=="boolean"?void 0:ie[7])},otherProps(ie[8])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("div"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,pe){ae&&ae.p&&(!oe||pe&512)&&update_slot_base(ae,le,ue,ue[9],oe?get_slot_changes(le,ue[9],pe,null):get_all_dirty_from_scope(ue[9]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&257&&ne!==(ne=classString(ue[0],ue[8],"header")))&&{class:ne},(!oe||pe&128&&re!==(re=serialize$1(ue[7]?"popup":null,typeof ue[7]=="boolean"?void 0:ue[7])))&&{"data-module":re},pe&256&&otherProps(ue[8])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function create_if_block_5$1(ie){let te,ne,re,oe;const le=ie[10].default,ae=create_slot(le,ie,ie[9],null);let he=[{class:ne=classString(ie[0],ie[8],"header")},{"data-module":re=serialize$1(ie[7]?"popup":null,typeof ie[7]=="boolean"?void 0:ie[7])},otherProps(ie[8])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("h6"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,pe){ae&&ae.p&&(!oe||pe&512)&&update_slot_base(ae,le,ue,ue[9],oe?get_slot_changes(le,ue[9],pe,null):get_all_dirty_from_scope(ue[9]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&257&&ne!==(ne=classString(ue[0],ue[8],"header")))&&{class:ne},(!oe||pe&128&&re!==(re=serialize$1(ue[7]?"popup":null,typeof ue[7]=="boolean"?void 0:ue[7])))&&{"data-module":re},pe&256&&otherProps(ue[8])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function create_if_block_4$2(ie){let te,ne,re,oe;const le=ie[10].default,ae=create_slot(le,ie,ie[9],null);let he=[{class:ne=classString(ie[0],ie[8],"header")},{"data-module":re=serialize$1(ie[7]?"popup":null,typeof ie[7]=="boolean"?void 0:ie[7])},otherProps(ie[8])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("h5"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,pe){ae&&ae.p&&(!oe||pe&512)&&update_slot_base(ae,le,ue,ue[9],oe?get_slot_changes(le,ue[9],pe,null):get_all_dirty_from_scope(ue[9]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&257&&ne!==(ne=classString(ue[0],ue[8],"header")))&&{class:ne},(!oe||pe&128&&re!==(re=serialize$1(ue[7]?"popup":null,typeof ue[7]=="boolean"?void 0:ue[7])))&&{"data-module":re},pe&256&&otherProps(ue[8])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function create_if_block_3$3(ie){let te,ne,re,oe;const le=ie[10].default,ae=create_slot(le,ie,ie[9],null);let he=[{class:ne=classString(ie[0],ie[8],"header")},{"data-module":re=serialize$1(ie[7]?"popup":null,typeof ie[7]=="boolean"?void 0:ie[7])},otherProps(ie[8])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("h4"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,pe){ae&&ae.p&&(!oe||pe&512)&&update_slot_base(ae,le,ue,ue[9],oe?get_slot_changes(le,ue[9],pe,null):get_all_dirty_from_scope(ue[9]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&257&&ne!==(ne=classString(ue[0],ue[8],"header")))&&{class:ne},(!oe||pe&128&&re!==(re=serialize$1(ue[7]?"popup":null,typeof ue[7]=="boolean"?void 0:ue[7])))&&{"data-module":re},pe&256&&otherProps(ue[8])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function create_if_block_2$3(ie){let te,ne,re,oe;const le=ie[10].default,ae=create_slot(le,ie,ie[9],null);let he=[{class:ne=classString(ie[0],ie[8],"header")},{"data-module":re=serialize$1(ie[7]?"popup":null,typeof ie[7]=="boolean"?void 0:ie[7])},otherProps(ie[8])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("h3"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,pe){ae&&ae.p&&(!oe||pe&512)&&update_slot_base(ae,le,ue,ue[9],oe?get_slot_changes(le,ue[9],pe,null):get_all_dirty_from_scope(ue[9]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&257&&ne!==(ne=classString(ue[0],ue[8],"header")))&&{class:ne},(!oe||pe&128&&re!==(re=serialize$1(ue[7]?"popup":null,typeof ue[7]=="boolean"?void 0:ue[7])))&&{"data-module":re},pe&256&&otherProps(ue[8])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function create_if_block_1$6(ie){let te,ne,re,oe;const le=ie[10].default,ae=create_slot(le,ie,ie[9],null);let he=[{class:ne=classString(ie[0],ie[8],"header")},{"data-module":re=serialize$1(ie[7]?"popup":null,typeof ie[7]=="boolean"?void 0:ie[7])},otherProps(ie[8])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("h2"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,pe){ae&&ae.p&&(!oe||pe&512)&&update_slot_base(ae,le,ue,ue[9],oe?get_slot_changes(le,ue[9],pe,null):get_all_dirty_from_scope(ue[9]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&257&&ne!==(ne=classString(ue[0],ue[8],"header")))&&{class:ne},(!oe||pe&128&&re!==(re=serialize$1(ue[7]?"popup":null,typeof ue[7]=="boolean"?void 0:ue[7])))&&{"data-module":re},pe&256&&otherProps(ue[8])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function create_if_block$6(ie){let te,ne,re,oe;const le=ie[10].default,ae=create_slot(le,ie,ie[9],null);let he=[{class:ne=classString(ie[0],ie[8],"header")},{"data-module":re=serialize$1(ie[7]?"popup":null,typeof ie[7]=="boolean"?void 0:ie[7])},otherProps(ie[8])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("h1"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,pe){ae&&ae.p&&(!oe||pe&512)&&update_slot_base(ae,le,ue,ue[9],oe?get_slot_changes(le,ue[9],pe,null):get_all_dirty_from_scope(ue[9]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&257&&ne!==(ne=classString(ue[0],ue[8],"header")))&&{class:ne},(!oe||pe&128&&re!==(re=serialize$1(ue[7]?"popup":null,typeof ue[7]=="boolean"?void 0:ue[7])))&&{"data-module":re},pe&256&&otherProps(ue[8])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function create_fragment$i(ie){let te,ne,re,oe;const le=[create_if_block$6,create_if_block_1$6,create_if_block_2$3,create_if_block_3$3,create_if_block_4$2,create_if_block_5$1,create_else_block$3],ae=[];function he(de,ue){return de[1]?0:de[2]?1:de[3]?2:de[4]?3:de[5]?4:de[6]?5:6}return te=he(ie),ne=ae[te]=le[te](ie),{c(){ne.c(),re=empty$1()},m(de,ue){ae[te].m(de,ue),insert(de,re,ue),oe=!0},p(de,[ue]){let pe=te;te=he(de),te===pe?ae[te].p(de,ue):(group_outros(),transition_out(ae[pe],1,1,()=>{ae[pe]=null}),check_outros(),ne=ae[te],ne?ne.p(de,ue):(ne=ae[te]=le[te](de),ne.c()),transition_in(ne,1),ne.m(re.parentNode,re))},i(de){oe||(transition_in(ne),oe=!0)},o(de){transition_out(ne),oe=!1},d(de){de&&detach(re),ae[te].d(de)}}}function instance$i(ie,te,ne){const re=["ui","h1","h2","h3","h4","h5","h6","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{h1:de=!1}=te,{h2:ue=!1}=te,{h3:pe=!1}=te,{h4:fe=!1}=te,{h5:ge=!1}=te,{h6:$e=!1}=te,{popup:Te=void 0}=te;return ie.$$set=Ee=>{te=assign(assign({},te),exclude_internal_props(Ee)),ne(8,oe=compute_rest_props(te,re)),"ui"in Ee&&ne(0,he=Ee.ui),"h1"in Ee&&ne(1,de=Ee.h1),"h2"in Ee&&ne(2,ue=Ee.h2),"h3"in Ee&&ne(3,pe=Ee.h3),"h4"in Ee&&ne(4,fe=Ee.h4),"h5"in Ee&&ne(5,ge=Ee.h5),"h6"in Ee&&ne(6,$e=Ee.h6),"popup"in Ee&&ne(7,Te=Ee.popup),"$$scope"in Ee&&ne(9,ae=Ee.$$scope)},[he,de,ue,pe,fe,ge,$e,Te,oe,ae,le]}class Header extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$i,create_fragment$i,safe_not_equal,{ui:0,h1:1,h2:2,h3:3,h4:4,h5:5,h6:6,popup:7})}}function create_fragment$h(ie){let te,ne,re,oe;const le=ie[4].default,ae=create_slot(le,ie,ie[3],null);let he=[{class:ne=classString(ie[0],ie[2],"divider")},{"data-module":re=serialize$1(ie[1]?"popup":null,typeof ie[1]=="boolean"?void 0:ie[1])},otherProps(ie[2])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("div"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,[pe]){ae&&ae.p&&(!oe||pe&8)&&update_slot_base(ae,le,ue,ue[3],oe?get_slot_changes(le,ue[3],pe,null):get_all_dirty_from_scope(ue[3]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&5&&ne!==(ne=classString(ue[0],ue[2],"divider")))&&{class:ne},(!oe||pe&2&&re!==(re=serialize$1(ue[1]?"popup":null,typeof ue[1]=="boolean"?void 0:ue[1])))&&{"data-module":re},pe&4&&otherProps(ue[2])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function instance$h(ie,te,ne){const re=["ui","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{popup:de=void 0}=te;return ie.$$set=ue=>{te=assign(assign({},te),exclude_internal_props(ue)),ne(2,oe=compute_rest_props(te,re)),"ui"in ue&&ne(0,he=ue.ui),"popup"in ue&&ne(1,de=ue.popup),"$$scope"in ue&&ne(3,ae=ue.$$scope)},[he,de,oe,ae,le]}class Divider extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$h,create_fragment$h,safe_not_equal,{ui:0,popup:1})}}function create_fragment$g(ie){let te,ne,re,oe;const le=ie[4].default,ae=create_slot(le,ie,ie[3],null);let he=[{class:ne=classString(ie[0],ie[2],"description")},{"data-module":re=serialize$1(ie[1]?"popup":null,typeof ie[1]=="boolean"?void 0:ie[1])},otherProps(ie[2])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("div"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,[pe]){ae&&ae.p&&(!oe||pe&8)&&update_slot_base(ae,le,ue,ue[3],oe?get_slot_changes(le,ue[3],pe,null):get_all_dirty_from_scope(ue[3]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&5&&ne!==(ne=classString(ue[0],ue[2],"description")))&&{class:ne},(!oe||pe&2&&re!==(re=serialize$1(ue[1]?"popup":null,typeof ue[1]=="boolean"?void 0:ue[1])))&&{"data-module":re},pe&4&&otherProps(ue[2])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function instance$g(ie,te,ne){const re=["ui","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{popup:de=void 0}=te;return ie.$$set=ue=>{te=assign(assign({},te),exclude_internal_props(ue)),ne(2,oe=compute_rest_props(te,re)),"ui"in ue&&ne(0,he=ue.ui),"popup"in ue&&ne(1,de=ue.popup),"$$scope"in ue&&ne(3,ae=ue.$$scope)},[he,de,oe,ae,le]}class Description extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$g,create_fragment$g,safe_not_equal,{ui:0,popup:1})}}function create_fragment$f(ie){let te,ne,re,oe;const le=ie[5].default,ae=create_slot(le,ie,ie[4],null);let he=[{class:ne=classString(ie[0],ie[3],"content")},{"data-value":ie[1]},{"data-module":re=serialize$1(ie[2]?"popup":null,typeof ie[2]=="boolean"?void 0:ie[2])},otherProps(ie[3])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("div"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,[pe]){ae&&ae.p&&(!oe||pe&16)&&update_slot_base(ae,le,ue,ue[4],oe?get_slot_changes(le,ue[4],pe,null):get_all_dirty_from_scope(ue[4]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&9&&ne!==(ne=classString(ue[0],ue[3],"content")))&&{class:ne},(!oe||pe&2)&&{"data-value":ue[1]},(!oe||pe&4&&re!==(re=serialize$1(ue[2]?"popup":null,typeof ue[2]=="boolean"?void 0:ue[2])))&&{"data-module":re},pe&8&&otherProps(ue[3])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function instance$f(ie,te,ne){const re=["ui","value","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{value:de=void 0}=te,{popup:ue=void 0}=te;return ie.$$set=pe=>{te=assign(assign({},te),exclude_internal_props(pe)),ne(3,oe=compute_rest_props(te,re)),"ui"in pe&&ne(0,he=pe.ui),"value"in pe&&ne(1,de=pe.value),"popup"in pe&&ne(2,ue=pe.popup),"$$scope"in pe&&ne(4,ae=pe.$$scope)},[he,de,ue,oe,ae,le]}class Content extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$f,create_fragment$f,safe_not_equal,{ui:0,value:1,popup:2})}}function create_fragment$e(ie){let te,ne,re,oe;const le=ie[4].default,ae=create_slot(le,ie,ie[3],null);let he=[{class:ne=classString(ie[0],ie[2],"container")},{"data-module":re=serialize$1(ie[1]?"popup":null,typeof ie[1]=="boolean"?void 0:ie[1])},otherProps(ie[2])],de={};for(let ue=0;ue<he.length;ue+=1)de=assign(de,he[ue]);return{c(){te=element("div"),ae&&ae.c(),set_attributes(te,de)},m(ue,pe){insert(ue,te,pe),ae&&ae.m(te,null),oe=!0},p(ue,[pe]){ae&&ae.p&&(!oe||pe&8)&&update_slot_base(ae,le,ue,ue[3],oe?get_slot_changes(le,ue[3],pe,null):get_all_dirty_from_scope(ue[3]),null),set_attributes(te,de=get_spread_update(he,[(!oe||pe&5&&ne!==(ne=classString(ue[0],ue[2],"container")))&&{class:ne},(!oe||pe&2&&re!==(re=serialize$1(ue[1]?"popup":null,typeof ue[1]=="boolean"?void 0:ue[1])))&&{"data-module":re},pe&4&&otherProps(ue[2])]))},i(ue){oe||(transition_in(ae,ue),oe=!0)},o(ue){transition_out(ae,ue),oe=!1},d(ue){ue&&detach(te),ae&&ae.d(ue)}}}function instance$e(ie,te,ne){const re=["ui","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{popup:de=void 0}=te;return ie.$$set=ue=>{te=assign(assign({},te),exclude_internal_props(ue)),ne(2,oe=compute_rest_props(te,re)),"ui"in ue&&ne(0,he=ue.ui),"popup"in ue&&ne(1,de=ue.popup),"$$scope"in ue&&ne(3,ae=ue.$$scope)},[he,de,oe,ae,le]}class Container extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$e,create_fragment$e,safe_not_equal,{ui:0,popup:1})}}function create_fragment$d(ie){let te,ne,re,oe,le,ae;const he=ie[7].default,de=create_slot(he,ie,ie[6],null);let ue=[{id:ie[1]},{class:ne=classString(ie[0],ie[4],"buttons")},{"data-module":re=serialize$1(ie[2]?"popup":null,typeof ie[2]=="boolean"?void 0:ie[2])},otherProps(ie[4])],pe={};for(let fe=0;fe<ue.length;fe+=1)pe=assign(pe,ue[fe]);return{c(){te=element("div"),de&&de.c(),set_attributes(te,pe)},m(fe,ge){insert(fe,te,ge),de&&de.m(te,null),oe=!0,le||(ae=[listen(te,"click",ie[3]),listen(te,"keydown",ie[8]),listen(te,"keypress",ie[9]),listen(te,"keyup",ie[10])],le=!0)},p(fe,[ge]){de&&de.p&&(!oe||ge&64)&&update_slot_base(de,he,fe,fe[6],oe?get_slot_changes(he,fe[6],ge,null):get_all_dirty_from_scope(fe[6]),null),set_attributes(te,pe=get_spread_update(ue,[(!oe||ge&2)&&{id:fe[1]},(!oe||ge&17&&ne!==(ne=classString(fe[0],fe[4],"buttons")))&&{class:ne},(!oe||ge&4&&re!==(re=serialize$1(fe[2]?"popup":null,typeof fe[2]=="boolean"?void 0:fe[2])))&&{"data-module":re},ge&16&&otherProps(fe[4])]))},i(fe){oe||(transition_in(de,fe),oe=!0)},o(fe){transition_out(de,fe),oe=!1},d(fe){fe&&detach(te),de&&de.d(fe),le=!1,run_all(ae)}}}function instance$d(ie,te,ne){const re=["ui","id","value","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{id:de=void 0}=te,{value:ue=void 0}=te,{popup:pe=void 0}=te;const fe=createEventDispatcher();function ge(Se){Se.target.attributes["data-value"]&&(ne(5,ue=Se.target.attributes["data-value"].value),de?fe("click",{id:de,target:Se.target,value:ue}):fe("click",{id:de,target:Se.target}))}function $e(Se){bubble.call(this,ie,Se)}function Te(Se){bubble.call(this,ie,Se)}function Ee(Se){bubble.call(this,ie,Se)}return ie.$$set=Se=>{te=assign(assign({},te),exclude_internal_props(Se)),ne(4,oe=compute_rest_props(te,re)),"ui"in Se&&ne(0,he=Se.ui),"id"in Se&&ne(1,de=Se.id),"value"in Se&&ne(5,ue=Se.value),"popup"in Se&&ne(2,pe=Se.popup),"$$scope"in Se&&ne(6,ae=Se.$$scope)},[he,de,pe,ge,oe,ue,ae,le,$e,Te,Ee]}class Buttons extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$d,create_fragment$d,safe_not_equal,{ui:0,id:1,value:5,popup:2})}}const get_off_slot_changes=ie=>({}),get_off_slot_context=ie=>({}),get_on_slot_changes=ie=>({}),get_on_slot_context=ie=>({});function create_else_block_1(ie){let te,ne,re,oe,le,ae;const he=ie[12].default,de=create_slot(he,ie,ie[11],null);let ue=[{id:ie[4]},{class:ne=classString(ie[2],ie[10],"button")},{"data-value":ie[1]},{"data-module":re=serialize$1(ie[7]?"popup":null,typeof ie[7]=="boolean"?void 0:ie[7])},otherProps(ie[10])],pe={};for(let fe=0;fe<ue.length;fe+=1)pe=assign(pe,ue[fe]);return{c(){te=element("div"),de&&de.c(),set_attributes(te,pe)},m(fe,ge){insert(fe,te,ge),de&&de.m(te,null),oe=!0,le||(ae=[listen(te,"click",ie[8]),listen(te,"keydown",ie[16]),listen(te,"keypress",ie[17]),listen(te,"keyup",ie[18])],le=!0)},p(fe,ge){de&&de.p&&(!oe||ge&2048)&&update_slot_base(de,he,fe,fe[11],oe?get_slot_changes(he,fe[11],ge,null):get_all_dirty_from_scope(fe[11]),null),set_attributes(te,pe=get_spread_update(ue,[(!oe||ge&16)&&{id:fe[4]},(!oe||ge&1028&&ne!==(ne=classString(fe[2],fe[10],"button")))&&{class:ne},(!oe||ge&2)&&{"data-value":fe[1]},(!oe||ge&128&&re!==(re=serialize$1(fe[7]?"popup":null,typeof fe[7]=="boolean"?void 0:fe[7])))&&{"data-module":re},ge&1024&&otherProps(fe[10])]))},i(fe){oe||(transition_in(de,fe),oe=!0)},o(fe){transition_out(de,fe),oe=!1},d(fe){fe&&detach(te),de&&de.d(fe),le=!1,run_all(ae)}}}function create_if_block$5(ie){let te,ne,re,oe,le,ae,he,de;const ue=[create_if_block_1$5,create_else_block$2],pe=[];function fe(Te,Ee){return Te[0]?0:1}ne=fe(ie),re=pe[ne]=ue[ne](ie);let ge=[{id:ie[4]},{class:oe=classString(ie[2],ie[10],(ie[0]?ie[5]:ie[6])+" button")},{"data-value":ie[1]},{"data-module":le=serialize$1(ie[7]?"popup":null,typeof ie[7]=="boolean"?void 0:ie[7])},otherProps(ie[10])],$e={};for(let Te=0;Te<ge.length;Te+=1)$e=assign($e,ge[Te]);return{c(){te=element("div"),re.c(),set_attributes(te,$e)},m(Te,Ee){insert(Te,te,Ee),pe[ne].m(te,null),ae=!0,he||(de=[listen(te,"click",ie[9]),listen(te,"keydown",ie[13]),listen(te,"keypress",ie[14]),listen(te,"keyup",ie[15])],he=!0)},p(Te,Ee){let Se=ne;ne=fe(Te),ne===Se?pe[ne].p(Te,Ee):(group_outros(),transition_out(pe[Se],1,1,()=>{pe[Se]=null}),check_outros(),re=pe[ne],re?re.p(Te,Ee):(re=pe[ne]=ue[ne](Te),re.c()),transition_in(re,1),re.m(te,null)),set_attributes(te,$e=get_spread_update(ge,[(!ae||Ee&16)&&{id:Te[4]},(!ae||Ee&1125&&oe!==(oe=classString(Te[2],Te[10],(Te[0]?Te[5]:Te[6])+" button")))&&{class:oe},(!ae||Ee&2)&&{"data-value":Te[1]},(!ae||Ee&128&&le!==(le=serialize$1(Te[7]?"popup":null,typeof Te[7]=="boolean"?void 0:Te[7])))&&{"data-module":le},Ee&1024&&otherProps(Te[10])]))},i(Te){ae||(transition_in(re),ae=!0)},o(Te){transition_out(re),ae=!1},d(Te){Te&&detach(te),pe[ne].d(),he=!1,run_all(de)}}}function create_else_block$2(ie){let te;const ne=ie[12].off,re=create_slot(ne,ie,ie[11],get_off_slot_context);return{c(){re&&re.c()},m(oe,le){re&&re.m(oe,le),te=!0},p(oe,le){re&&re.p&&(!te||le&2048)&&update_slot_base(re,ne,oe,oe[11],te?get_slot_changes(ne,oe[11],le,get_off_slot_changes):get_all_dirty_from_scope(oe[11]),get_off_slot_context)},i(oe){te||(transition_in(re,oe),te=!0)},o(oe){transition_out(re,oe),te=!1},d(oe){re&&re.d(oe)}}}function create_if_block_1$5(ie){let te;const ne=ie[12].on,re=create_slot(ne,ie,ie[11],get_on_slot_context);return{c(){re&&re.c()},m(oe,le){re&&re.m(oe,le),te=!0},p(oe,le){re&&re.p&&(!te||le&2048)&&update_slot_base(re,ne,oe,oe[11],te?get_slot_changes(ne,oe[11],le,get_on_slot_changes):get_all_dirty_from_scope(oe[11]),get_on_slot_context)},i(oe){te||(transition_in(re,oe),te=!0)},o(oe){transition_out(re,oe),te=!1},d(oe){re&&re.d(oe)}}}function create_fragment$c(ie){let te,ne,re,oe;const le=[create_if_block$5,create_else_block_1],ae=[];function he(de,ue){return de[3]?0:1}return te=he(ie),ne=ae[te]=le[te](ie),{c(){ne.c(),re=empty$1()},m(de,ue){ae[te].m(de,ue),insert(de,re,ue),oe=!0},p(de,[ue]){let pe=te;te=he(de),te===pe?ae[te].p(de,ue):(group_outros(),transition_out(ae[pe],1,1,()=>{ae[pe]=null}),check_outros(),ne=ae[te],ne?ne.p(de,ue):(ne=ae[te]=le[te](de),ne.c()),transition_in(ne,1),ne.m(re.parentNode,re))},i(de){oe||(transition_in(ne),oe=!0)},o(de){transition_out(ne),oe=!1},d(de){de&&detach(re),ae[te].d(de)}}}function instance$c(ie,te,ne){const re=["ui","toggle","id","active","on_style","off_style","value","popup"];let oe=compute_rest_props(te,re),{$$slots:le={},$$scope:ae}=te,{ui:he=!1}=te,{toggle:de=!1}=te,{id:ue=void 0}=te,{active:pe=!1}=te,{on_style:fe=""}=te,{off_style:ge=""}=te,{value:$e=void 0}=te,{popup:Te=void 0}=te;const Ee=createEventDispatcher();function Se(Ae){Ae.target.attributes["data-value"]?(ne(1,$e=Ae.target.attributes["data-value"].value),Ee("click",{id:ue,target:Ae.target,value:$e})):Ee("click",{id:ue,target:Ae.target})}function ve(Ae){ne(0,pe=!pe),Ae.target.attributes["data-value"]?(ne(1,$e=Ae.target.attributes["data-value"].value),Ee("toggle",{id:ue,active:pe,target:Ae.target,value:$e})):(ne(1,$e=pe),Ee("toggle",{id:ue,active:pe,target:Ae.target}))}function ke(Ae){bubble.call(this,ie,Ae)}function Re(Ae){bubble.call(this,ie,Ae)}function Ne(Ae){bubble.call(this,ie,Ae)}function xe(Ae){bubble.call(this,ie,Ae)}function ze(Ae){bubble.call(this,ie,Ae)}function Me(Ae){bubble.call(this,ie,Ae)}return ie.$$set=Ae=>{te=assign(assign({},te),exclude_internal_props(Ae)),ne(10,oe=compute_rest_props(te,re)),"ui"in Ae&&ne(2,he=Ae.ui),"toggle"in Ae&&ne(3,de=Ae.toggle),"id"in Ae&&ne(4,ue=Ae.id),"active"in Ae&&ne(0,pe=Ae.active),"on_style"in Ae&&ne(5,fe=Ae.on_style),"off_style"in Ae&&ne(6,ge=Ae.off_style),"value"in Ae&&ne(1,$e=Ae.value),"popup"in Ae&&ne(7,Te=Ae.popup),"$$scope"in Ae&&ne(11,ae=Ae.$$scope)},[pe,$e,he,de,ue,fe,ge,Te,Se,ve,oe,ae,le,ke,Re,Ne,xe,ze,Me]}class Button extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$c,create_fragment$c,safe_not_equal,{ui:2,toggle:3,id:4,active:0,on_style:5,off_style:6,value:1,popup:7})}}function create_default_slot_9$8(ie){let te;return{c(){te=text$2("Home")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_8$8(ie){let te;return{c(){te=text$2("Objects and Actors")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_7$9(ie){let te;return{c(){te=text$2("Sentient Agents")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_6$9(ie){let te;return{c(){te=text$2("Transient Networks")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_5$9(ie){let te;return{c(){te=text$2("Marketplace")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_4$9(ie){let te;return{c(){te=text$2("Guides")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_3$9(ie){let te;return{c(){te=text$2("Case Studies")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_2$9(ie){let te,ne,re,oe,le,ae;return te=new Link({props:{item:!0,active:ie[0]==="marketplace",orange:ie[0]==="marketplace",$$slots:{default:[create_default_slot_5$9]},$$scope:{ctx:ie}}}),te.$on("click",ie[5]),re=new Link({props:{item:!0,active:ie[0]==="information",green:ie[0]==="information",$$slots:{default:[create_default_slot_4$9]},$$scope:{ctx:ie}}}),re.$on("click",ie[6]),le=new Link({props:{item:!0,active:ie[0]==="about",green:ie[0]==="about",$$slots:{default:[create_default_slot_3$9]},$$scope:{ctx:ie}}}),le.$on("click",ie[7]),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment),oe=space(),create_component(le.$$.fragment)},m(he,de){mount_component(te,he,de),insert(he,ne,de),mount_component(re,he,de),insert(he,oe,de),mount_component(le,he,de),ae=!0},p(he,de){const ue={};de&1&&(ue.active=he[0]==="marketplace"),de&1&&(ue.orange=he[0]==="marketplace"),de&256&&(ue.$$scope={dirty:de,ctx:he}),te.$set(ue);const pe={};de&1&&(pe.active=he[0]==="information"),de&1&&(pe.green=he[0]==="information"),de&256&&(pe.$$scope={dirty:de,ctx:he}),re.$set(pe);const fe={};de&1&&(fe.active=he[0]==="about"),de&1&&(fe.green=he[0]==="about"),de&256&&(fe.$$scope={dirty:de,ctx:he}),le.$set(fe)},i(he){ae||(transition_in(te.$$.fragment,he),transition_in(re.$$.fragment,he),transition_in(le.$$.fragment,he),ae=!0)},o(he){transition_out(te.$$.fragment,he),transition_out(re.$$.fragment,he),transition_out(le.$$.fragment,he),ae=!1},d(he){he&&(detach(ne),detach(oe)),destroy_component(te,he),destroy_component(re,he),destroy_component(le,he)}}}function create_default_slot_1$9(ie){let te,ne,re,oe,le,ae,he,de,ue,pe;return te=new Link({props:{item:!0,active:ie[0]==="start",blue:ie[0]==="start",$$slots:{default:[create_default_slot_9$8]},$$scope:{ctx:ie}}}),te.$on("click",ie[1]),re=new Link({props:{item:!0,active:ie[0]==="objectsandactors",blue:ie[0]==="objectsandactors",$$slots:{default:[create_default_slot_8$8]},$$scope:{ctx:ie}}}),re.$on("click",ie[2]),le=new Link({props:{item:!0,active:ie[0]==="sentants",blue:ie[0]==="sentants",$$slots:{default:[create_default_slot_7$9]},$$scope:{ctx:ie}}}),le.$on("click",ie[3]),he=new Link({props:{item:!0,active:ie[0]==="transientnetworks",blue:ie[0]==="transientnetworks",$$slots:{default:[create_default_slot_6$9]},$$scope:{ctx:ie}}}),he.$on("click",ie[4]),ue=new Menu$2({props:{right:!0,$$slots:{default:[create_default_slot_2$9]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment),oe=space(),create_component(le.$$.fragment),ae=space(),create_component(he.$$.fragment),de=space(),create_component(ue.$$.fragment)},m(fe,ge){mount_component(te,fe,ge),insert(fe,ne,ge),mount_component(re,fe,ge),insert(fe,oe,ge),mount_component(le,fe,ge),insert(fe,ae,ge),mount_component(he,fe,ge),insert(fe,de,ge),mount_component(ue,fe,ge),pe=!0},p(fe,ge){const $e={};ge&1&&($e.active=fe[0]==="start"),ge&1&&($e.blue=fe[0]==="start"),ge&256&&($e.$$scope={dirty:ge,ctx:fe}),te.$set($e);const Te={};ge&1&&(Te.active=fe[0]==="objectsandactors"),ge&1&&(Te.blue=fe[0]==="objectsandactors"),ge&256&&(Te.$$scope={dirty:ge,ctx:fe}),re.$set(Te);const Ee={};ge&1&&(Ee.active=fe[0]==="sentants"),ge&1&&(Ee.blue=fe[0]==="sentants"),ge&256&&(Ee.$$scope={dirty:ge,ctx:fe}),le.$set(Ee);const Se={};ge&1&&(Se.active=fe[0]==="transientnetworks"),ge&1&&(Se.blue=fe[0]==="transientnetworks"),ge&256&&(Se.$$scope={dirty:ge,ctx:fe}),he.$set(Se);const ve={};ge&257&&(ve.$$scope={dirty:ge,ctx:fe}),ue.$set(ve)},i(fe){pe||(transition_in(te.$$.fragment,fe),transition_in(re.$$.fragment,fe),transition_in(le.$$.fragment,fe),transition_in(he.$$.fragment,fe),transition_in(ue.$$.fragment,fe),pe=!0)},o(fe){transition_out(te.$$.fragment,fe),transition_out(re.$$.fragment,fe),transition_out(le.$$.fragment,fe),transition_out(he.$$.fragment,fe),transition_out(ue.$$.fragment,fe),pe=!1},d(fe){fe&&(detach(ne),detach(oe),detach(ae),detach(de)),destroy_component(te,fe),destroy_component(re,fe),destroy_component(le,fe),destroy_component(he,fe),destroy_component(ue,fe)}}}function create_default_slot$a(ie){let te,ne;return te=new Menu$2({props:{ui:!0,large:!0,secondary:!0,inverted:!0,pointing:!0,stackable:!0,$$slots:{default:[create_default_slot_1$9]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&257&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_fragment$b(ie){let te,ne;return te=new Container({props:{ui:!0,stackable:!0,$$slots:{default:[create_default_slot$a]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,[oe]){const le={};oe&257&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function instance$b(ie,te,ne){let{page:re="start"}=te;const oe=()=>ne(0,re="start"),le=()=>ne(0,re="objectsandactors"),ae=()=>ne(0,re="sentants"),he=()=>ne(0,re="transientnetworks"),de=()=>ne(0,re="marketplace"),ue=()=>ne(0,re="information"),pe=()=>ne(0,re="about");return ie.$$set=fe=>{"page"in fe&&ne(0,re=fe.page)},[re,oe,le,ae,he,de,ue,pe]}class MainMenu extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$b,create_fragment$b,safe_not_equal,{page:0})}}const reality2bee$1="/assets/reality2_big_bee-430d3c6f.png";function create_if_block_1$4(ie){let te,ne,re,oe;return te=new Button({props:{ui:!0,icon:!0,popup:!0,massive:!0,basic:!0,disabled:ie[1]==0,"data-tooltip":"Previous","data-position":"top left",style:"position: absolute; top: 50%; left: 10px; transform: translateY(-50%);",$$slots:{default:[create_default_slot_11$6]},$$scope:{ctx:ie}}}),te.$on("click",ie[6]),re=new Button({props:{ui:!0,icon:!0,popup:!0,massive:!0,basic:!0,disabled:ie[1]==ie[3].length-1,"data-tooltip":"Next","data-position":"top right",style:"position: absolute; top: 50%; right: 10px; transform: translateY(-50%);",$$slots:{default:[create_default_slot_10$6]},$$scope:{ctx:ie}}}),re.$on("click",ie[7]),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment)},m(le,ae){mount_component(te,le,ae),insert(le,ne,ae),mount_component(re,le,ae),oe=!0},p(le,ae){const he={};ae&2&&(he.disabled=le[1]==0),ae&8192&&(he.$$scope={dirty:ae,ctx:le}),te.$set(he);const de={};ae&2&&(de.disabled=le[1]==le[3].length-1),ae&8192&&(de.$$scope={dirty:ae,ctx:le}),re.$set(de)},i(le){oe||(transition_in(te.$$.fragment,le),transition_in(re.$$.fragment,le),oe=!0)},o(le){transition_out(te.$$.fragment,le),transition_out(re.$$.fragment,le),oe=!1},d(le){le&&detach(ne),destroy_component(te,le),destroy_component(re,le)}}}function create_default_slot_11$6(ie){let te,ne;return te=new Icon({props:{angle:!0,left:!0,grey:!0}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p:noop$2,i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_10$6(ie){let te,ne;return te=new Icon({props:{angle:!0,right:!0,grey:!0}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p:noop$2,i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_9$7(ie){let te,ne,re,oe;ne=new Image$1({props:{ui:!0,fluid:!0,src:ie[3][ie[1]]}});let le=ie[2]>600&&create_if_block_1$4(ie);return{c(){te=element("div"),create_component(ne.$$.fragment),re=space(),le&&le.c(),set_style(te,"padding","0px"),set_style(te,"position","relative")},m(ae,he){insert(ae,te,he),mount_component(ne,te,null),append$2(te,re),le&&le.m(te,null),oe=!0},p(ae,he){const de={};he&2&&(de.src=ae[3][ae[1]]),ne.$set(de),ae[2]>600?le?(le.p(ae,he),he&4&&transition_in(le,1)):(le=create_if_block_1$4(ae),le.c(),transition_in(le,1),le.m(te,null)):le&&(group_outros(),transition_out(le,1,1,()=>{le=null}),check_outros())},i(ae){oe||(transition_in(ne.$$.fragment,ae),transition_in(le),oe=!0)},o(ae){transition_out(ne.$$.fragment,ae),transition_out(le),oe=!1},d(ae){ae&&detach(te),destroy_component(ne),le&&le.d()}}}function create_default_slot_8$7(ie){let te,ne;return te=new Icon({props:{angle:!0,double:!0,left:!0,grey:!0}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p:noop$2,i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_7$8(ie){let te,ne;return te=new Icon({props:{angle:!0,left:!0,grey:!0}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p:noop$2,i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_6$8(ie){let te=ie[1]+1+"",ne,re,oe=ie[3].length+"",le;return{c(){ne=text$2(te),re=text$2(" of "),le=text$2(oe)},m(ae,he){insert(ae,ne,he),insert(ae,re,he),insert(ae,le,he)},p(ae,he){he&2&&te!==(te=ae[1]+1+"")&&set_data(ne,te)},d(ae){ae&&(detach(ne),detach(re),detach(le))}}}function create_default_slot_5$8(ie){let te,ne;return te=new Text({props:{ui:!0,grey:!0,$$slots:{default:[create_default_slot_6$8]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&8194&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_4$8(ie){let te,ne;return te=new Icon({props:{angle:!0,right:!0,grey:!0}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p:noop$2,i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_if_block$4(ie){let te,ne;return te=new Button({props:{ui:!0,grey:!0,icon:!0,$$slots:{default:[create_default_slot_3$8]},$$scope:{ctx:ie}}}),te.$on("click",ie[11]),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&8192&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_3$8(ie){let te,ne;return te=new Icon({props:{expand:!0,grey:!0}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p:noop$2,i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_2$8(ie){let te,ne,re,oe,le,ae,he,de,ue,pe;te=new Button({props:{ui:!0,grey:!0,icon:!0,disabled:ie[1]==0,$$slots:{default:[create_default_slot_8$7]},$$scope:{ctx:ie}}}),te.$on("click",ie[8]),re=new Button({props:{ui:!0,grey:!0,icon:!0,disabled:ie[1]==0,$$slots:{default:[create_default_slot_7$8]},$$scope:{ctx:ie}}}),re.$on("click",ie[9]),le=new Button({props:{ui:!0,grey:!0,style:"pointer-events: none; cursor: not-allowed;",$$slots:{default:[create_default_slot_5$8]},$$scope:{ctx:ie}}}),he=new Button({props:{ui:!0,grey:!0,icon:!0,disabled:ie[1]==ie[3].length-1,$$slots:{default:[create_default_slot_4$8]},$$scope:{ctx:ie}}}),he.$on("click",ie[10]);let fe=ie[0]!=""&&create_if_block$4(ie);return{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment),oe=space(),create_component(le.$$.fragment),ae=space(),create_component(he.$$.fragment),de=space(),fe&&fe.c(),ue=empty$1()},m(ge,$e){mount_component(te,ge,$e),insert(ge,ne,$e),mount_component(re,ge,$e),insert(ge,oe,$e),mount_component(le,ge,$e),insert(ge,ae,$e),mount_component(he,ge,$e),insert(ge,de,$e),fe&&fe.m(ge,$e),insert(ge,ue,$e),pe=!0},p(ge,$e){const Te={};$e&2&&(Te.disabled=ge[1]==0),$e&8192&&(Te.$$scope={dirty:$e,ctx:ge}),te.$set(Te);const Ee={};$e&2&&(Ee.disabled=ge[1]==0),$e&8192&&(Ee.$$scope={dirty:$e,ctx:ge}),re.$set(Ee);const Se={};$e&8194&&(Se.$$scope={dirty:$e,ctx:ge}),le.$set(Se);const ve={};$e&2&&(ve.disabled=ge[1]==ge[3].length-1),$e&8192&&(ve.$$scope={dirty:$e,ctx:ge}),he.$set(ve),ge[0]!=""?fe?(fe.p(ge,$e),$e&1&&transition_in(fe,1)):(fe=create_if_block$4(ge),fe.c(),transition_in(fe,1),fe.m(ue.parentNode,ue)):fe&&(group_outros(),transition_out(fe,1,1,()=>{fe=null}),check_outros())},i(ge){pe||(transition_in(te.$$.fragment,ge),transition_in(re.$$.fragment,ge),transition_in(le.$$.fragment,ge),transition_in(he.$$.fragment,ge),transition_in(fe),pe=!0)},o(ge){transition_out(te.$$.fragment,ge),transition_out(re.$$.fragment,ge),transition_out(le.$$.fragment,ge),transition_out(he.$$.fragment,ge),transition_out(fe),pe=!1},d(ge){ge&&(detach(ne),detach(oe),detach(ae),detach(de),detach(ue)),destroy_component(te,ge),destroy_component(re,ge),destroy_component(le,ge),destroy_component(he,ge),fe&&fe.d(ge)}}}function create_default_slot_1$8(ie){let te,ne;return te=new Buttons({props:{ui:!0,basic:!0,$$slots:{default:[create_default_slot_2$8]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&8195&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot$9(ie){let te,ne,re,oe;return te=new Column({props:{style:"padding-bottom: 0px;",$$slots:{default:[create_default_slot_9$7]},$$scope:{ctx:ie}}}),re=new Column({props:{center:!0,aligned:!0,$$slots:{default:[create_default_slot_1$8]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment)},m(le,ae){mount_component(te,le,ae),insert(le,ne,ae),mount_component(re,le,ae),oe=!0},p(le,ae){const he={};ae&8198&&(he.$$scope={dirty:ae,ctx:le}),te.$set(he);const de={};ae&8195&&(de.$$scope={dirty:ae,ctx:le}),re.$set(de)},i(le){oe||(transition_in(te.$$.fragment,le),transition_in(re.$$.fragment,le),oe=!0)},o(le){transition_out(te.$$.fragment,le),transition_out(re.$$.fragment,le),oe=!1},d(le){le&&detach(ne),destroy_component(te,le),destroy_component(re,le)}}}function create_fragment$a(ie){let te,ne;return te=new Container({props:{ui:!0,style:"padding-top:20px;min-height:200px;padding-bottom:0px;",$$slots:{default:[create_default_slot$9]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,[oe]){const le={};oe&8199&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function instance$a(ie,te,ne){let{allImages:re}=te,{folder:oe=""}=te,{link:le=""}=te;function ae(Se){return Object.entries(re).filter(([ve])=>ve.includes(`/src/assets/${Se}/`)).map(([,ve])=>ve)}const he=ae(oe);let de=0,ue;ue=window.innerWidth;const pe=()=>ne(1,de=Math.max(0,de-1)),fe=()=>ne(1,de=Math.min(he.length-1,de+1)),ge=()=>ne(1,de=0),$e=()=>ne(1,de=Math.max(0,de-1)),Te=()=>ne(1,de=Math.min(he.length-1,de+1)),Ee=()=>window.open(le,"_blank");return ie.$$set=Se=>{"allImages"in Se&&ne(4,re=Se.allImages),"folder"in Se&&ne(5,oe=Se.folder),"link"in Se&&ne(0,le=Se.link)},window.addEventListener("resize",()=>{ne(2,ue=window.innerWidth)}),[le,de,ue,he,re,oe,pe,fe,ge,$e,Te,Ee]}class Slidedeck extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$a,create_fragment$a,safe_not_equal,{allImages:4,folder:5,link:0})}}function create_default_slot_7$7(ie){let te,ne;return te=new Image$1({props:{ui:!0,src:reality2bee$1}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p:noop$2,i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_6$7(ie){let te;return{c(){te=text$2("Reality2 combines the immersive power of Mixed Reality with the seamless integration of Calm Technology, to create a harmonious blend of digital and physical worlds that respect privacy.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_5$7(ie){let te;return{c(){te=text$2("It enables intuitive, context-aware interactions, allowing people to engage naturally with virtual and real things, enhancing experiences whilst encouraging full presence in their surroundings.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_4$7(ie){let te,ne,re,oe,le,ae,he,de,ue,pe;return te=new Divider({props:{ui:!0}}),re=new Text({props:{ui:!0,big:!0,$$slots:{default:[create_default_slot_6$7]},$$scope:{ctx:ie}}}),le=new Divider({props:{ui:!0}}),he=new Text({props:{ui:!0,big:!0,$$slots:{default:[create_default_slot_5$7]},$$scope:{ctx:ie}}}),ue=new Divider({props:{ui:!0}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment),oe=space(),create_component(le.$$.fragment),ae=space(),create_component(he.$$.fragment),de=space(),create_component(ue.$$.fragment)},m(fe,ge){mount_component(te,fe,ge),insert(fe,ne,ge),mount_component(re,fe,ge),insert(fe,oe,ge),mount_component(le,fe,ge),insert(fe,ae,ge),mount_component(he,fe,ge),insert(fe,de,ge),mount_component(ue,fe,ge),pe=!0},p(fe,ge){const $e={};ge&4&&($e.$$scope={dirty:ge,ctx:fe}),re.$set($e);const Te={};ge&4&&(Te.$$scope={dirty:ge,ctx:fe}),he.$set(Te)},i(fe){pe||(transition_in(te.$$.fragment,fe),transition_in(re.$$.fragment,fe),transition_in(le.$$.fragment,fe),transition_in(he.$$.fragment,fe),transition_in(ue.$$.fragment,fe),pe=!0)},o(fe){transition_out(te.$$.fragment,fe),transition_out(re.$$.fragment,fe),transition_out(le.$$.fragment,fe),transition_out(he.$$.fragment,fe),transition_out(ue.$$.fragment,fe),pe=!1},d(fe){fe&&(detach(ne),detach(oe),detach(ae),detach(de)),destroy_component(te,fe),destroy_component(re,fe),destroy_component(le,fe),destroy_component(he,fe),destroy_component(ue,fe)}}}function create_default_slot_3$7(ie){let te,ne,re,oe;return te=new Column({props:{seven:!0,wide:!0,$$slots:{default:[create_default_slot_7$7]},$$scope:{ctx:ie}}}),re=new Column({props:{nine:!0,wide:!0,left:!0,$$slots:{default:[create_default_slot_4$7]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment)},m(le,ae){mount_component(te,le,ae),insert(le,ne,ae),mount_component(re,le,ae),oe=!0},p(le,ae){const he={};ae&4&&(he.$$scope={dirty:ae,ctx:le}),te.$set(he);const de={};ae&4&&(de.$$scope={dirty:ae,ctx:le}),re.$set(de)},i(le){oe||(transition_in(te.$$.fragment,le),transition_in(re.$$.fragment,le),oe=!0)},o(le){transition_out(te.$$.fragment,le),transition_out(re.$$.fragment,le),oe=!1},d(le){le&&detach(ne),destroy_component(te,le),destroy_component(re,le)}}}function create_default_slot_2$7(ie){let te,ne;return te=new Slidedeck({props:{folder:"digital_glue",link:"https://www.beautiful.ai/player/-O7al3iulcpXDvP26FJH",allImages:ie[0]}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&1&&(le.allImages=re[0]),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_1$7(ie){let te,ne;return te=new Column({props:{sixteen:!0,wide:!0,$$slots:{default:[create_default_slot_2$7]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&5&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot$8(ie){let te,ne,re,oe;return te=new Row({props:{$$slots:{default:[create_default_slot_3$7]},$$scope:{ctx:ie}}}),re=new Row({props:{$$slots:{default:[create_default_slot_1$7]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment)},m(le,ae){mount_component(te,le,ae),insert(le,ne,ae),mount_component(re,le,ae),oe=!0},p(le,ae){const he={};ae&4&&(he.$$scope={dirty:ae,ctx:le}),te.$set(he);const de={};ae&5&&(de.$$scope={dirty:ae,ctx:le}),re.$set(de)},i(le){oe||(transition_in(te.$$.fragment,le),transition_in(re.$$.fragment,le),oe=!0)},o(le){transition_out(te.$$.fragment,le),transition_out(re.$$.fragment,le),oe=!1},d(le){le&&detach(ne),destroy_component(te,le),destroy_component(re,le)}}}function create_fragment$9(ie){let te,ne;return te=new Container({props:{ui:!0,grid:!0,stackable:!0,style:"padding-top:50px;padding-bottom:0px;vertical-align:top;",$$slots:{default:[create_default_slot$8]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,[oe]){const le={};oe&5&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function instance$9(ie,te,ne){let{page:re="start"}=te,{allImages:oe}=te;return ie.$$set=le=>{"page"in le&&ne(1,re=le.page),"allImages"in le&&ne(0,oe=le.allImages)},[oe,re]}class Start extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$9,create_fragment$9,safe_not_equal,{page:1,allImages:0})}}function create_fragment$8(ie){let te,ne,re,oe,le,ae;return te=new Slidedeck({props:{folder:"beautifully_usable",link:"https://www.beautiful.ai/player/-OCjBNmWkL5wgRbuc8-0",allImages:ie[0]}}),re=new Slidedeck({props:{folder:"wanderland",link:"https://www.beautiful.ai/player/-OE5nw-d5AbdoN2nxs_X",allImages:ie[0]}}),le=new Slidedeck({props:{folder:"iot",link:"https://www.beautiful.ai/player/-OCgbjzxI9gUFFavigV1",allImages:ie[0]}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment),oe=space(),create_component(le.$$.fragment)},m(he,de){mount_component(te,he,de),insert(he,ne,de),mount_component(re,he,de),insert(he,oe,de),mount_component(le,he,de),ae=!0},p(he,[de]){const ue={};de&1&&(ue.allImages=he[0]),te.$set(ue);const pe={};de&1&&(pe.allImages=he[0]),re.$set(pe);const fe={};de&1&&(fe.allImages=he[0]),le.$set(fe)},i(he){ae||(transition_in(te.$$.fragment,he),transition_in(re.$$.fragment,he),transition_in(le.$$.fragment,he),ae=!0)},o(he){transition_out(te.$$.fragment,he),transition_out(re.$$.fragment,he),transition_out(le.$$.fragment,he),ae=!1},d(he){he&&(detach(ne),detach(oe)),destroy_component(te,he),destroy_component(re,he),destroy_component(le,he)}}}function instance$8(ie,te,ne){let{page:re="start"}=te,{allImages:oe}=te;return ie.$$set=le=>{"page"in le&&ne(1,re=le.page),"allImages"in le&&ne(0,oe=le.allImages)},[oe,re]}class About extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$8,create_fragment$8,safe_not_equal,{page:1,allImages:0})}}const reality2bee="/assets/bee-9d3df901.png",reality2swarm="/assets/swarm-0fc6f956.png",reality2antennae="/assets/antennae-71933376.png",reality2behaviours="/assets/behaviours-067f647c.png";class GH{constructor(){ei(this,"_rest_api_url","https://api.github.com/repos")}listDirectory(te){return new Promise((ne,re)=>{this._rest_get(this._listDirectory(te)).then(oe=>{ne(oe)},oe=>{re(oe)})})}getInfo(te){return new Promise((ne,re)=>{this._rest_get(this._getInfo(te)).then(oe=>{let le=JSON.parse(atob(oe.content));ne(le)},oe=>{re(oe)})})}getFile(te,ne){return new Promise((re,oe)=>{this._rest_get(this._getFile(te,ne)).then(le=>{let ae=atob(le.content);re(ae)},le=>{oe(le)})})}_rest_get(te){let ne=this._rest_api_url+te;return fetch(ne,{method:"GET",headers:{"Content-Type":"application/json"}}).then(oe=>oe.json()).then(oe=>oe)}_listDirectory(te){return"/reality-two/reality2-definitions/contents/"+te}_getInfo(te){return"/reality-two/reality2-definitions/contents/"+te+"/info.json"}_getFile(te,ne){return"/reality-two/reality2-definitions/contents/"+te+"/"+ne}}function get_each_context$1(ie,te,ne){const re=ie.slice();return re[11]=te[ne],re}function create_else_block$1(ie){let te,ne,re,oe;return te=new Items({props:{ui:!0,inverted:!0,left:!0,aligned:!0,divided:!0,$$slots:{default:[create_default_slot_2$6]},$$scope:{ctx:ie}}}),re=new Divider({props:{ui:!0}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment)},m(le,ae){mount_component(te,le,ae),insert(le,ne,ae),mount_component(re,le,ae),oe=!0},p(le,ae){const he={};ae&16387&&(he.$$scope={dirty:ae,ctx:le}),te.$set(he)},i(le){oe||(transition_in(te.$$.fragment,le),transition_in(re.$$.fragment,le),oe=!0)},o(le){transition_out(te.$$.fragment,le),transition_out(re.$$.fragment,le),oe=!1},d(le){le&&detach(ne),destroy_component(te,le),destroy_component(re,le)}}}function create_if_block$3(ie){let te,ne;return te=new Header({props:{ui:!0,h3:!0,inverted:!0,$$slots:{default:[create_default_slot_1$6]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&16384&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_12$5(ie){let te,ne;return te=new Image$1({props:{src:ie[0]}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&1&&(le.src=re[0]),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_11$5(ie){let te=ie[1][ie[11]].title+"",ne;return{c(){ne=text$2(te)},m(re,oe){insert(re,ne,oe)},p(re,oe){oe&2&&te!==(te=re[1][re[11]].title+"")&&set_data(ne,te)},d(re){re&&detach(ne)}}}function create_default_slot_10$5(ie){let te,ne=ie[1][ie[11]].description+"",re;return{c(){te=element("p"),re=text$2(ne)},m(oe,le){insert(oe,te,le),append$2(te,re)},p(oe,le){le&2&&ne!==(ne=oe[1][oe[11]].description+"")&&set_data(re,ne)},d(oe){oe&&detach(te)}}}function create_if_block_3$2(ie){let te,ne;return te=new Label({props:{ui:!0,orange:!0,$$slots:{default:[create_default_slot_9$6]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_if_block_2$2(ie){let te,ne;return te=new Label({props:{ui:!0,green:!0,$$slots:{default:[create_default_slot_8$6]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_if_block_1$3(ie){let te,ne;return te=new Label({props:{ui:!0,blue:!0,$$slots:{default:[create_default_slot_7$6]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_9$6(ie){let te;return{c(){te=text$2("TOML")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_8$6(ie){let te;return{c(){te=text$2("JSON")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_7$6(ie){let te;return{c(){te=text$2("YAML")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_6$6(ie){let te,ne,re,oe;const le=[create_if_block_1$3,create_if_block_2$2,create_if_block_3$2],ae=[];function he(de,ue){return de[1][de[11]].type=="yaml"?0:de[1][de[11]].type=="json"?1:de[1][de[11]].type=="toml"?2:-1}return~(te=he(ie))&&(ne=ae[te]=le[te](ie)),{c(){ne&&ne.c(),re=empty$1()},m(de,ue){~te&&ae[te].m(de,ue),insert(de,re,ue),oe=!0},p(de,ue){let pe=te;te=he(de),te!==pe&&(ne&&(group_outros(),transition_out(ae[pe],1,1,()=>{ae[pe]=null}),check_outros()),~te?(ne=ae[te],ne||(ne=ae[te]=le[te](de),ne.c()),transition_in(ne,1),ne.m(re.parentNode,re)):ne=null)},i(de){oe||(transition_in(ne),oe=!0)},o(de){transition_out(ne),oe=!1},d(de){de&&detach(re),~te&&ae[te].d(de)}}}function create_default_slot_5$6(ie){let te,ne,re,oe,le,ae;return te=new Link({props:{header:!0,target:"_blank",href:ie[1][ie[11]].link,$$slots:{default:[create_default_slot_11$5]},$$scope:{ctx:ie}}}),re=new Description({props:{$$slots:{default:[create_default_slot_10$5]},$$scope:{ctx:ie}}}),le=new Extra({props:{$$slots:{default:[create_default_slot_6$6]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment),oe=space(),create_component(le.$$.fragment)},m(he,de){mount_component(te,he,de),insert(he,ne,de),mount_component(re,he,de),insert(he,oe,de),mount_component(le,he,de),ae=!0},p(he,de){const ue={};de&2&&(ue.href=he[1][he[11]].link),de&16386&&(ue.$$scope={dirty:de,ctx:he}),te.$set(ue);const pe={};de&16386&&(pe.$$scope={dirty:de,ctx:he}),re.$set(pe);const fe={};de&16386&&(fe.$$scope={dirty:de,ctx:he}),le.$set(fe)},i(he){ae||(transition_in(te.$$.fragment,he),transition_in(re.$$.fragment,he),transition_in(le.$$.fragment,he),ae=!0)},o(he){transition_out(te.$$.fragment,he),transition_out(re.$$.fragment,he),transition_out(le.$$.fragment,he),ae=!1},d(he){he&&(detach(ne),detach(oe)),destroy_component(te,he),destroy_component(re,he),destroy_component(le,he)}}}function create_default_slot_4$6(ie){let te,ne;return te=new Icon({props:{ui:!0,download:!0}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p:noop$2,i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_3$6(ie){let te,ne,re,oe,le,ae,he;te=new Link({props:{ui:!0,small:!0,image:!0,target:"_blank",href:ie[1][ie[11]].link,$$slots:{default:[create_default_slot_12$5]},$$scope:{ctx:ie}}}),re=new Content({props:{middle:!0,aligned:!0,$$slots:{default:[create_default_slot_5$6]},$$scope:{ctx:ie}}});function de(...ue){return ie[8](ie[11],...ue)}return le=new Button({props:{ui:!0,basic:!0,grey:!0,inverted:!0,icon:!0,style:"position: absolute; top: 10px; right: 30px;",$$slots:{default:[create_default_slot_4$6]},$$scope:{ctx:ie}}}),le.$on("click",de),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment),oe=space(),create_component(le.$$.fragment),ae=space()},m(ue,pe){mount_component(te,ue,pe),insert(ue,ne,pe),mount_component(re,ue,pe),insert(ue,oe,pe),mount_component(le,ue,pe),insert(ue,ae,pe),he=!0},p(ue,pe){ie=ue;const fe={};pe&2&&(fe.href=ie[1][ie[11]].link),pe&16385&&(fe.$$scope={dirty:pe,ctx:ie}),te.$set(fe);const ge={};pe&16386&&(ge.$$scope={dirty:pe,ctx:ie}),re.$set(ge);const $e={};pe&16384&&($e.$$scope={dirty:pe,ctx:ie}),le.$set($e)},i(ue){he||(transition_in(te.$$.fragment,ue),transition_in(re.$$.fragment,ue),transition_in(le.$$.fragment,ue),he=!0)},o(ue){transition_out(te.$$.fragment,ue),transition_out(re.$$.fragment,ue),transition_out(le.$$.fragment,ue),he=!1},d(ue){ue&&(detach(ne),detach(oe),detach(ae)),destroy_component(te,ue),destroy_component(re,ue),destroy_component(le,ue)}}}function create_each_block$1(ie){let te,ne;return te=new Item({props:{style:"position: relative;",$$slots:{default:[create_default_slot_3$6]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&16387&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_2$6(ie){let te,ne,re=ensure_array_like(Object.keys(ie[1])),oe=[];for(let ae=0;ae<re.length;ae+=1)oe[ae]=create_each_block$1(get_each_context$1(ie,re,ae));const le=ae=>transition_out(oe[ae],1,1,()=>{oe[ae]=null});return{c(){for(let ae=0;ae<oe.length;ae+=1)oe[ae].c();te=empty$1()},m(ae,he){for(let de=0;de<oe.length;de+=1)oe[de]&&oe[de].m(ae,he);insert(ae,te,he),ne=!0},p(ae,he){if(he&11){re=ensure_array_like(Object.keys(ae[1]));let de;for(de=0;de<re.length;de+=1){const ue=get_each_context$1(ae,re,de);oe[de]?(oe[de].p(ue,he),transition_in(oe[de],1)):(oe[de]=create_each_block$1(ue),oe[de].c(),transition_in(oe[de],1),oe[de].m(te.parentNode,te))}for(group_outros(),de=re.length;de<oe.length;de+=1)le(de);check_outros()}},i(ae){if(!ne){for(let he=0;he<re.length;he+=1)transition_in(oe[he]);ne=!0}},o(ae){oe=oe.filter(Boolean);for(let he=0;he<oe.length;he+=1)transition_out(oe[he]);ne=!1},d(ae){ae&&detach(te),destroy_each(oe,ae)}}}function create_default_slot_1$6(ie){let te;return{c(){te=text$2("Loading...")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot$7(ie){let te,ne,re,oe;const le=[create_if_block$3,create_else_block$1],ae=[];function he(de,ue){return de[2]?0:1}return te=he(ie),ne=ae[te]=le[te](ie),{c(){ne.c(),re=empty$1()},m(de,ue){ae[te].m(de,ue),insert(de,re,ue),oe=!0},p(de,ue){let pe=te;te=he(de),te===pe?ae[te].p(de,ue):(group_outros(),transition_out(ae[pe],1,1,()=>{ae[pe]=null}),check_outros(),ne=ae[te],ne?ne.p(de,ue):(ne=ae[te]=le[te](de),ne.c()),transition_in(ne,1),ne.m(re.parentNode,re))},i(de){oe||(transition_in(ne),oe=!0)},o(de){transition_out(ne),oe=!1},d(de){de&&detach(re),ae[te].d(de)}}}function create_fragment$7(ie){let te,ne;return te=new Container({props:{ui:!0,left:!0,aligned:!0,$$slots:{default:[create_default_slot$7]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,[oe]){const le={};oe&16391&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function saveToFile(ie,te){const ne=new Blob([te],{type:"text/plain"}),re=document.createElement("a");re.href=URL.createObjectURL(ne),re.download=ie,document.body.appendChild(re),re.click(),document.body.removeChild(re),URL.revokeObjectURL(re.href)}function instance$7(ie,te,ne){let{extension:re="bee"}=te,{dir:oe="bees"}=te,{default_image:le=""}=te,{subpage:ae=""}=te,{incoming_data:he=["json",""]}=te,de=new GH,ue={},pe=!0;de.listDirectory(oe).then($e=>{de.getInfo(oe).then(Te=>{ne(2,pe=!1);for(let Ee=0;Ee<$e.length;Ee++){let Se=$e[Ee],ve=Se.name.replace(new RegExp(`\\.${re}\\.(yaml|json|toml)$`),"");if(Te.hasOwnProperty(ve)){let ke=Te[ve];ne(1,ue[ve]={filename:Se.name,title:ke.name,description:ke.description,type:Se.name.slice(-4),link:"https://github.com/reality-two/reality2-definitions/blob/main/"+oe+"/"+Se.name},ue)}}})});function fe($e,Te){de.getFile(oe,$e).then(Ee=>{saveToFile($e,Ee)})}const ge=($e,Te)=>{fe(ue[$e].filename,ue[$e].type)};return ie.$$set=$e=>{"extension"in $e&&ne(6,re=$e.extension),"dir"in $e&&ne(7,oe=$e.dir),"default_image"in $e&&ne(0,le=$e.default_image),"subpage"in $e&&ne(4,ae=$e.subpage),"incoming_data"in $e&&ne(5,he=$e.incoming_data)},[le,ue,pe,fe,ae,he,re,oe,ge]}class MarketItems extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$7,create_fragment$7,safe_not_equal,{extension:6,dir:7,default_image:0,subpage:4,incoming_data:5})}}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(ie){return ie&&ie.__esModule&&Object.prototype.hasOwnProperty.call(ie,"default")?ie.default:ie}function getAugmentedNamespace(ie){if(ie.__esModule)return ie;var te=ie.default;if(typeof te=="function"){var ne=function re(){if(this instanceof re){var oe=[null];oe.push.apply(oe,arguments);var le=Function.bind.apply(te,oe);return new le}return te.apply(this,arguments)};ne.prototype=te.prototype}else ne={};return Object.defineProperty(ne,"__esModule",{value:!0}),Object.keys(ie).forEach(function(re){var oe=Object.getOwnPropertyDescriptor(ie,re);Object.defineProperty(ne,re,oe.get?oe:{enumerable:!0,get:function(){return ie[re]}})}),ne}var blockly$1={exports:{}},blockly_compressed={exports:{}},hasRequiredBlockly_compressed;function requireBlockly_compressed(){return hasRequiredBlockly_compressed||(hasRequiredBlockly_compressed=1,function(ie,te){(function(ne,re){ie.exports=re()})(commonjsGlobal,function(){var ne={},re,oe,le,ae,he,de,ue,pe,fe,ge,$e,Te,Ee,Se,ve,ke,Re,Ne,xe,ze,Me,Ae,Qe,ht,Pe,_t,rt,Ke,Je,qe,ct,Le,je,pt,Ot,Ht,Ze,bt,Pt,Et,Lt,Ut,Bt,Ft,jt,zt,mi,Fi,ki,$i,Di,Ui,Yi,Nt,Jt,Yt,zi,_i,Fe,Li,hi,si,vi,lt,Ct,Ce,Oe,Ue,We,Tt,Kt,Ii,Hi,ln,Ki,ye,we,Be,Ve,ft,It,Dt,Oi,an,fn,mn,Pi,In,fs,ms,$s,Ms,tn,On,xs,Zn,Ds,Qn,xt,Xe,St,At,ii,Ti,gi,Ci,Gi,$n,fi,Ps,Rn,Bs,dr,il,nl,sl,Fn,Ri,Fs,Zr,cn,wn,rl,Ge,ol,Ma,ud,xa,Qr,hd,ll,dd,_d,al,pd,_r,gd,Da,cl,Pa,Ba,fd,ul,pr,hl,md,Fa,Ua,$d,Td,Us,bd,eo,un,Ed,yd,Sd,Cd,kd,vd,Id,Ha,es,gr,Ga,Od,Rd,wd,Ad,Ld,Nd,Md,xd,Dd,Wa,Pd,fr,dl,Bd,mr,Va,za,Xa,_l,pl,ja,Fd,Ya,Ka,qa,Ja,Za,Qa,ec,Ud,to,tc,gl,fl,Un,ic,nc,io,sc,rc,Hd,ml,oc,Gd,Wd,Vd,zd,Xd,$r,lc,ac,Tr,$l,jd,Yd,cc,uc,ts,hc,dc,Kd,qd,Jd,Zd,_c,Qd,pc,e_,Hs,no,Tl,bl,Gs,gc,El,fc,bi,t_,Er,yr,i_,mc,yl,Sr,$c,Ws,so,Tc,bc,n_,s_,r_,Ec,o_,yc,ro,l_,a_,c_,u_,oo,Sc,Cc,Sl,Cl,h_,lo,kc,ao,d_,__,Ts,vc,Hn,p_,g_,Ic,f_,Vs,Oc,m_,$_,T_,b_,E_,Rc,y_,S_,kl,C_,k_,wc,vl,Ac,Il,Lc,Nc,Cr,zs,is,Gn,v_,I_,O_,Mc,Ol,R_,w_,A_,xc,Rl,Dc,wl,L_,N_,M_,x_,Mt,nn,Ni,ci,Wn,kr,wt,Ei,Pc,D_,bs,Al,Ll,Bc,P_,Fc,Nl,Uc,Hc,B_,Gc,F_,Ml,U_,H_,G_,W_,V_,Wc,z_,co,uo,X_,Vc,zc,Xc,jc,xl,Yc,j_,Y_,K_,vr,Kc,q_,Dl,Tn,J_,Es,qc,Z_,ho,Jc,Zc,Qc,eu,tu,iu,nu,su,ru,ou,Q_,ep,tp,ip,np,sp,rp,op,lp,lu,au,cu,uu,hu,du,_u,Pl,_o,pu,ap,gu,fu,mu,$u,Tu,bu,Eu,yu,Su,Cu,cp,up,hp,ku,dp,_p,pp,gp,fp,mt;re=function(ee,se,ce,_e){if(!(ee instanceof $t)&&typeof ee!="string"||`${ee}`.trim()==="")throw Error('Invalid type "'+ee+'". The type must be a non-empty string or a Blockly.registry.Type.');if(ee=`${ee}`.toLowerCase(),typeof se!="string"||se.trim()==="")throw Error('Invalid name "'+se+'". The name must be a non-empty string.');const me=se.toLowerCase();if(!ce)throw Error("Can not register a null value");let be=ys[ee],Ie=Bl[ee];if(be||(be=ys[ee]=Object.create(null),Ie=Bl[ee]=Object.create(null)),oe(ee,ce),!_e&&be[me]&&be[me]!==ce)throw Error('Name "'+me+'" with type "'+ee+'" already registered.');be[me]=ce,Ie[me]=se},oe=function(ee,se){switch(ee){case String($t.FIELD):if(typeof se.fromJson!="function")throw Error('Type "'+ee+'" must have a fromJson function')}},le=function(ee,se){ee=`${ee}`.toLowerCase(),se=se.toLowerCase();const ce=ys[ee];ce&&ce[se]?(delete ys[ee][se],delete Bl[ee][se]):console.warn("Unable to unregister ["+se+"]["+ee+"] from the registry.")},ae=function(ee,se,ce){ee=`${ee}`.toLowerCase(),se=se.toLowerCase();const _e=ys[ee];if(!_e||!_e[se]){if(se="Unable to find ["+se+"]["+ee+"] in the registry.",ce)throw Error(se+" You must require or register a "+ee+" plugin.");return console.warn(se),null}return _e[se]},he=function(ee,se){return ee=`${ee}`.toLowerCase(),se=se.toLowerCase(),(ee=ys[ee])?!!ee[se]:!1},de=function(ee,se,ce){return ae(ee,se,ce)},ue=function(ee,se,ce){return ae(ee,se,ce)},pe=function(ee,se,ce){ee=`${ee}`.toLowerCase();var _e=ys[ee];if(!_e){if(_e=`Unable to find [${ee}] in the registry.`,ce)throw Error(`${_e} You must require or register a ${ee} plugin.`);return console.warn(_e),null}if(!se)return _e;ee=Bl[ee],ce=Object.create(null);for(const me of Object.keys(_e))ce[ee[me]]=_e[me];return ce},fe=function(ee,se,ce){return se=se.plugins[String(ee)]||Vn,typeof se=="function"?se:de(ee,se,ce)},ge=function(ee,se,ce,_e){ee=ee+" was deprecated in "+se+" and will be deleted in "+ce+".",_e&&(ee+=`
Use `+_e+" instead."),$p.has(ee)||($p.add(ee),console.warn(ee))},$e=function(){return"blockly-"+(lm++).toString(36)},Te=function(){return Ep.genUid()},Ee=function(ee){return ee.type===it.BLOCK_CREATE},Se=function(ee){return ee.type===it.BLOCK_DELETE},ve=function(ee){return ee.type===it.BLOCK_CHANGE},ke=function(ee){return ee.type===it.BLOCK_FIELD_INTERMEDIATE_CHANGE},Re=function(ee){return ee.type===it.BLOCK_MOVE},Ne=function(ee){return ee.type===it.CLICK},xe=function(ee){return ee.type===it.BUBBLE_OPEN},ze=function(ee){return ee.type===it.VIEWPORT_CHANGE},ne.setRecordUndo$$module$build$src$core$events$utils=function(ee){po=ee},Me=function(){return po},Ae=function(ee){Sp.fireInternal(ee)},Qe=function(ee){if(Ke()){if(!ss.length)try{requestAnimationFrame(()=>{setTimeout(ht,0)})}catch{setTimeout(ht,0)}Pe(ee)}},ht=function(){const ee=_t(ss,!0);ss.length=0;for(const se of ee){if(!se.workspaceId)continue;let ce;(ce=pt(se.workspaceId))==null||ce.fireChangeListener(se)}},Pe=function(ee){if(ve(ee)&&ee.element==="mutation"){let se;for(se=ss.length;0<se;se--){const ce=ss[se-1];if(ce.group!==ee.group||ce.workspaceId!==ee.workspaceId||!Re(ce)||ce.newParentId!==ee.blockId)break}ss.splice(se,0,ee)}else ss.push(ee)},_t=function(ee,se=!0){se||(ge("filter(queue, /*forward=*/false)","v11.2","v12"),ee=ee.slice().reverse());const ce=[];for(const _e of ee)if(ee=ce[ce.length-1],!_e.isNull())if(ee&&ee.workspaceId===_e.workspaceId&&ee.group===_e.group)if(Re(_e)&&Re(ee)&&_e.blockId===ee.blockId){if(ee.newParentId=_e.newParentId,ee.newInputName=_e.newInputName,ee.newCoordinate=_e.newCoordinate,ee.reason||_e.reason){let me,be;ee.reason=Array.from(new Set(((me=ee.reason)!=null?me:[]).concat((be=_e.reason)!=null?be:[])))}}else ve(_e)&&ve(ee)&&_e.blockId===ee.blockId&&_e.element===ee.element&&_e.name===ee.name?ee.newValue=_e.newValue:ze(_e)&&ze(ee)?(ee.viewTop=_e.viewTop,ee.viewLeft=_e.viewLeft,ee.scale=_e.scale,ee.oldScale=_e.oldScale):Ne(_e)&&xe(ee)||ce.push(_e);else ce.push(_e);return ee=ce.filter(_e=>!_e.isNull()),se||ee.reverse(),ee},rt=function(){for(let ee=0,se;se=ss[ee];ee++)se.recordUndo=!1},ne.disable$$module$build$src$core$events$utils=function(){Iu++},ne.enable$$module$build$src$core$events$utils=function(){Iu--},Ke=function(){return Iu===0},ne.getGroup$$module$build$src$core$events$utils=function(){return yp},ne.setGroup$$module$build$src$core$events$utils=function(ee){Sp.setGroupInternal(ee)},Je=function(ee){yp=typeof ee=="boolean"?ee?Te():"":ee},qe=function(ee){const se=[];ee=ee.getDescendants(!1);for(let ce=0,_e;_e=ee[ce];ce++)se[ce]=_e.id;return se},ct=function(ee,se){const ce=Le(ee.type);if(!ce)throw Error("Unknown event type.");return ce.fromJson(ee,se)},Le=function(ee){const se=de($t.EVENT,ee);if(!se)throw Error(`Event type ${ee} not found in registry.`);return se},je=function(ee){if((Re(ee)||Ee(ee))&&ee.workspaceId){var se=pt(ee.workspaceId);if(!ee.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(ee=se.getBlockById(ee.blockId)){const ce=po;try{po=!1;const _e=ee.getParent();if(_e&&!_e.hasDisabledReason(Ou)){const me=ee.getDescendants(!1);for(let be=0,Ie;Ie=me[be];be++)Ie.setDisabledReason(!1,Ou)}else if((ee.outputConnection||ee.previousConnection)&&!se.isDragging())do ee.setDisabledReason(!0,Ou),ee=ee.getNextBlock();while(ee)}finally{po=ce}}}},pt=function(ee){return go[ee]||null},Ot=function(){const ee=[];for(const se in go)ee.push(go[se]);return ee},Ht=function(ee){go[ee.id]=ee},Ze=function(ee){delete go[ee.id]},bt=function(){return Cp},Pt=function(ee){Cp=ee},Et=function(){return Xs},ne.setSelected$$module$build$src$core$common=function(ee){if(Xs!==ee){var se,ce,_e,me,be,Ie,De=new(Le(it.SELECTED))((_e=(se=Xs)==null?void 0:se.id)!=null?_e:null,(me=ee==null?void 0:ee.id)!=null?me:null,(Ie=(be=ee==null?void 0:ee.workspace.id)!=null?be:(ce=Xs)==null?void 0:ce.workspace.id)!=null?Ie:"");Ae(De);var dt;(dt=Xs)==null||dt.unselect(),Xs=ee;var vt;(vt=Xs)==null||vt.select()}},Lt=function(){return kp},Ut=function(ee){kp=ee},Bt=function(ee){for(;ee.options.parentWorkspace;)ee=ee.options.parentWorkspace;const se=ee.getParentSvg(),ce=ee.getCachedParentSvgSize();var _e=se.parentElement;if(_e instanceof HTMLElement){var me=_e.offsetWidth;_e=_e.offsetHeight,ce.width!==me&&(se.setAttribute("width",me+"px"),ee.setCachedParentSvgSize(me,null)),ce.height!==_e&&(se.setAttribute("height",_e+"px"),ee.setCachedParentSvgSize(null,_e)),ee.resize()}},Ft=function(ee,se){const ce=Object.create(null),_e=ee.getDescendants(!0);se&&(ee=ee.getNextBlock())&&(ee=_e.indexOf(ee),_e.splice(ee,_e.length-ee));for(let me=0,be;be=_e[me];me++)ce[be.type]?ce[be.type]++:ce[be.type]=1;return ce},jt=function(ee){return function(){this.jsonInit(ee)}},zt=function(ee){vp.defineBlocksWithJsonArrayInternal(ee)},mi=function(ee){ne.defineBlocks$$module$build$src$core$common(ne.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(ee))},ne.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(ee){const se={};for(let ce=0;ce<ee.length;ce++){const _e=ee[ce];if(!_e){console.warn(`Block definition #${ce} in JSON array is ${_e}. Skipping`);continue}const me=_e.type;me?se[me]={init:jt(_e)}:console.warn(`Block definition #${ce} in JSON array is missing a type attribute. Skipping.`)}return se},ne.defineBlocks$$module$build$src$core$common=function(ee){for(const se of Object.keys(ee)){const ce=ee[se];se in sn&&console.warn(`Block definition "${se}" overwrites previous definition.`),sn[se]=ce}},Fi=function(ee,se){ki(),Ul=setTimeout(function(){se&&se.handleRightClick(ee)},am)},ki=function(){Ul&&(clearTimeout(Ul),Ul=0)},$i=function(){Fl=null},Di=function(ee){return!ee.type.startsWith("pointer")||ee instanceof PointerEvent&&Yi(ee)},Ui=function(ee){return`${ee.pointerId}`},Yi=function(ee){const se=Ui(ee);return Fl?Fl===se:ee.type==="pointerdown"?(Fl=se,!0):!1},Nt=function(ee,se,ce,_e,me){function be(De){(me||Di(De))&&(ce?_e.call(ce,De):_e(De))}const Ie=[];if(se in js)for(let De=0;De<js[se].length;De++){const dt=js[se][De];ee.addEventListener(dt,be,!1),Ie.push([ee,dt,be])}else ee.addEventListener(se,be,!1),Ie.push([ee,se,be]);return Ie},Jt=function(ee,se,ce,_e){function me(Ie){ce?_e.call(ce,Ie):_e(Ie)}const be=[];if(se in js)for(let Ie=0;Ie<js[se].length;Ie++){const De=js[se][Ie];ee.addEventListener(De,me,!1),be.push([ee,De,me])}else ee.addEventListener(se,me,!1),be.push([ee,se,me]);return be},Yt=function(ee){const se=ee[ee.length-1][2];for(;ee.length;){const[ce,_e,me]=ee.pop();ce.removeEventListener(_e,me,!1)}return se},zi=function(ee){if(ee.target instanceof HTMLElement){if(ee.target.isContentEditable||ee.target.getAttribute("data-is-text-input")==="true")return!0;if(ee.target instanceof HTMLInputElement)return ee=ee.target,ee.type==="text"||ee.type==="number"||ee.type==="email"||ee.type==="password"||ee.type==="search"||ee.type==="tel"||ee.type==="url";if(ee.target instanceof HTMLTextAreaElement)return!0}return!1},_i=function(ee){return ee.ctrlKey&&Mu?!0:ee.button===2},Fe=function(ee,se,ce){const _e=se.createSVGPoint();return _e.x=ee.clientX,_e.y=ee.clientY,ce||(ce=se.getScreenCTM().inverse()),_e.matrixTransform(ce)},Li=function(ee){switch(ee.deltaMode){default:return{x:ee.deltaX,y:ee.deltaY};case 1:return{x:ee.deltaX*Bp,y:ee.deltaY*Bp};case 2:return{x:ee.deltaX*Fp,y:ee.deltaY*Fp}}},hi=function(ee,se){return se=ee.indexOf(se),se===-1?!1:(ee.splice(se,1),!0)},si=function(ee){if(xu)throw Error("CSS already injected");Du+=`
`+ee},vi=function(ee,se){xu||(xu=!0,ee&&(ee=se.replace(/[\\/]$/,""),se=Du.replace(/<<<PATH>>>/g,ee),Du="",ee=document.createElement("style"),ee.id="blockly-common-style",se=document.createTextNode(se),ee.appendChild(se),document.head.insertBefore(ee,document.head.firstChild)))},lt=function(ee,se,ce){ee=document.createElementNS(mo,`${ee}`);for(const _e in se)ee.setAttribute(_e,`${se[_e]}`);return ce&&ce.appendChild(ee),ee},Ct=function(ee,se){return se=se.split(" "),se.every(ce=>ee.classList.contains(ce))?!1:(ee.classList.add(...se),!0)},Ce=function(ee,se){ee.classList.remove(...se.split(" "))},Oe=function(ee,se){return se=se.split(" "),se.every(ce=>!ee.classList.contains(ce))?!1:(ee.classList.remove(...se),!0)},Ue=function(ee,se){return ee.classList.contains(se)},We=function(ee){return ee&&ee.parentNode?ee.parentNode.removeChild(ee):null},Tt=function(ee,se){const ce=se.nextSibling;if(se=se.parentNode,!se)throw Error("Reference node has no parent.");ce?se.insertBefore(ee,ce):se.appendChild(ee)},Kt=function(ee,se){ee.style.transform=se,ee.style["-webkit-transform"]=se},Ii=function(){Bu++,Ln||(Ln=Object.create(null))},Hi=function(){Bu--,Bu||(Ln=null)},ln=function(ee){const se=ee.textContent+`
`+ee.className.baseVal;let ce;if(Ln&&(ce=Ln[se]))return ce;try{ce=ee.getComputedTextLength()}catch{return 8*ee.textContent.length}return Ln&&(Ln[se]=ce),ce},Ki=function(ee,se,ce,_e){return ye(ee,se+"pt",ce,_e)},ye=function(ee,se,ce,_e){const me=ee.textContent;ee=me+`
`+ee.className.baseVal;var be;return Ln&&(be=Ln[ee])||(Vl||(be=document.createElement("canvas"),be.className="blocklyComputeCanvas",document.body.appendChild(be),Vl=be.getContext("2d")),Vl.font=ce+" "+se+" "+_e,be=me?Vl.measureText(me).width:0,Ln&&(Ln[ee]=be)),be},we=function(ee,se,ce,_e){const me=document.createElement("span");me.style.font=ce+" "+se+" "+_e,me.textContent=ee,ee=document.createElement("div"),ee.style.width="1px",ee.style.height="0",se=document.createElement("div"),se.style.display="flex",se.style.position="fixed",se.style.top="0",se.style.left="0",se.appendChild(me),se.appendChild(ee),document.body.appendChild(se),ce={height:0,baseline:0};try{se.style.alignItems="baseline",ce.baseline=ee.offsetTop-me.offsetTop,se.style.alignItems="flex-end",ce.height=ee.offsetTop-me.offsetTop}finally{document.body.removeChild(se)}return ce},Be=function(ee){return Hp.getSizeInternal(ee)},Ve=function(ee){if(It(ee,"display")!=="none")return ft(ee);const se=ee.style,ce=se.display,_e=se.visibility,me=se.position;se.visibility="hidden",se.position="absolute",se.display="inline";const be=ee.offsetWidth;return ee=ee.offsetHeight,se.display=ce,se.position=me,se.visibility=_e,new Xt(be,ee)},ft=function(ee){return new Xt(ee.offsetWidth,ee.offsetHeight)},It=function(ee,se){return ee=window.getComputedStyle(ee),ee[se]||ee.getPropertyValue(se)},Dt=function(ee){const se=new yt(0,0);ee=ee.getBoundingClientRect();var ce=document.documentElement;return ce=new yt(window.pageXOffset||ce.scrollLeft,window.pageYOffset||ce.scrollTop),se.x=ee.left+ce.x,se.y=ee.top+ce.y,se},Oi=function(){const ee=document.body,se=document.documentElement;return new yt(ee.scrollLeft||se.scrollLeft,ee.scrollTop||se.scrollTop)},an=function(ee){const se=parseFloat(It(ee,"borderLeftWidth")),ce=parseFloat(It(ee,"borderRightWidth")),_e=parseFloat(It(ee,"borderTopWidth"));return ee=parseFloat(It(ee,"borderBottomWidth")),new ri(_e,ee,se,ce)},fn=function(ee,se,ce){ee=mn(ee,se,ce),se.scrollLeft=ee.x,se.scrollTop=ee.y},mn=function(ee,se,ce){var _e=Dt(ee),me=Dt(se),be=an(se);const Ie=_e.x-me.x-be.left;return _e=_e.y-me.y-be.top,me=ft(ee),ee=se.clientWidth-me.width,me=se.clientHeight-me.height,be=se.scrollLeft,se=se.scrollTop,ce?(be+=Ie-ee/2,se+=_e-me/2):(be+=Math.min(Ie,Math.max(Ie-ee,0)),se+=Math.min(_e,Math.max(_e-me,0))),new yt(be,se)},Pi=function(ee){const se=new yt(0,0);var ce=ee.x&&ee.getAttribute("x");const _e=ee.y&&ee.getAttribute("y");return ce&&(se.x=parseInt(ce)),_e&&(se.y=parseInt(_e)),(ce=(ce=ee.getAttribute("transform"))&&ce.match(Gp))&&(se.x+=Number(ce[1]),ce[3]&&(se.y+=Number(ce[3]))),(ee=ee.getAttribute("style"))&&ee.includes("translate")&&(ee=ee.match(Wp))&&(se.x+=Number(ee[1]),ee[3]&&(se.y+=Number(ee[3]))),se},In=function(ee){let se=0,ce=0;for(;ee;){const _e=Pi(ee);if(se+=_e.x,ce+=_e.y,(" "+(ee.getAttribute("class")||"")+" ").includes(" injectionDiv "))break;ee=ee.parentNode}return new yt(se,ce)},fs=function(){const ee=Oi();return new ri(ee.y,document.documentElement.clientHeight+ee.y,ee.x,document.documentElement.clientWidth+ee.x)},ms=function(){const ee=document.documentElement,se=window;return new yt(se.pageXOffset||ee.scrollLeft,se.pageYOffset||ee.scrollTop)},$s=function(ee,se){var ce=se.x;se=se.y;const _e=ee.getInjectionDiv().getBoundingClientRect();return ce=new yt(ce-_e.left,se-_e.top),se=ee.getOriginOffsetInPixels(),yt.difference(ce,se).scale(1/ee.scale)},Ms=function(ee,se){var ce=se.scale(ee.scale);se=ce.x,ce=ce.y;const _e=ee.getInjectionDiv().getBoundingClientRect();return ee=ee.getOriginOffsetInPixels(),new yt(se+_e.left+ee.x,ce+_e.top+ee.y)},tn=function(ee){({document:Xl=Xl,DOMParser:$o=$o,XMLSerializer:To=To}=ee),zl=new $o,Fu=new To},ne.createElement$$module$build$src$core$utils$xml=function(ee){return Xl.createElementNS(Vp,ee)},ne.createTextNode$$module$build$src$core$utils$xml=function(ee){return Xl.createTextNode(ee)},ne.textToDom$$module$build$src$core$utils$xml=function(ee){let se=zl.parseFromString(ee,"text/xml");if(se&&se.documentElement&&!se.getElementsByTagName("parsererror").length)return se.documentElement;if((se=zl.parseFromString(ee,"text/html"))&&se.body.firstChild&&se.body.firstChild.nodeName.toLowerCase()==="xml")return se.body.firstChild;throw Error(`DOMParser was unable to parse: ${ee}`)},On=function(ee){return xs(Fu.serializeToString(ee))},xs=function(ee){return ee.replace(dm,se=>`&#${se.charCodeAt(0)};`)},Zn=function(ee){return ee?((ee instanceof Element||typeof ee=="string")&&(ee=gi(ee),ee=At(ee)),Ds(ee),ee):null},Ds=function(ee){const se=ee.kind;if(ee=ee.contents,se&&se!==zp&&se!==Uu)throw Error("Invalid toolbox kind "+se+". Please supply either "+zp+" or "+Uu);if(!ee)throw Error("Toolbox must have a contents attribute.")},Qn=function(ee){return ee?ee.contents?ee.contents:Array.isArray(ee)&&0<ee.length&&!ee[0].nodeType?ee:ii(ee):[]},xt=function(ee){return Xp.hasCategoriesInternal(ee)},Xe=function(ee){if(!ee)return!1;const se=ee.kind;return se?se===Uu:!!ee.contents.filter(ce=>ce.kind.toUpperCase()==="CATEGORY").length},St=function(ee){return ee&&ee.contents?!!ee.contents.filter(function(se){return se.kind.toUpperCase()==="CATEGORY"}).length:!1},At=function(ee){const se={contents:ii(ee)};return ee instanceof Node&&Ti(ee,se),se},ii=function(ee){const se=[];let ce=ee.childNodes;ce||(ce=ee);for(let _e=0,me;me=ce[_e];_e++){if(!me.tagName)continue;ee={};const be=me.tagName.toUpperCase();ee.kind=be,be==="BLOCK"?ee.blockxml=me:me.childNodes&&0<me.childNodes.length&&(ee.contents=ii(me)),Ti(me,ee),se.push(ee)}return se},Ti=function(ee,se){for(let ce=0;ce<ee.attributes.length;ce++){const _e=ee.attributes[ce];_e.nodeName.includes("css-")?(se.cssconfig=se.cssconfig||{},se.cssconfig[_e.nodeName.replace("css-","")]=_e.value):se[_e.nodeName]=_e.value}},gi=function(ee){let se=null;if(ee)if(typeof ee=="string"){if(se=ne.textToDom$$module$build$src$core$utils$xml(ee),se.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else ee instanceof Element&&(se=ee);return se},Ci=function(ee,se,ce,_e,me,be){const Ie=be.scrollbar&&be.scrollbar.canScrollVertically();return ee.horizontal===Rr.LEFT?(ce=me.absoluteMetrics.left+ce,Ie&&be.RTL&&(ce+=yi.scrollbarThickness)):(ce=me.absoluteMetrics.left+me.viewMetrics.width-se.width-ce,Ie&&!be.RTL&&(ce-=yi.scrollbarThickness)),ee.vertical===as.TOP?ee=me.absoluteMetrics.top+_e:(ee=me.absoluteMetrics.top+me.viewMetrics.height-se.height-_e,be.scrollbar&&be.scrollbar.canScrollHorizontally()&&(ee-=yi.scrollbarThickness)),new ri(ee,ee+se.height,ce,ce+se.width)},Gi=function(ee,se){return{horizontal:se.toolboxMetrics.position===Gt.LEFT||ee.horizontalLayout&&!ee.RTL?Rr.RIGHT:Rr.LEFT,vertical:se.toolboxMetrics.position===Gt.BOTTOM?as.TOP:as.BOTTOM}},$n=function(ee,se,ce,_e){const me=ee.left,be=ee.right-ee.left,Ie=ee.bottom-ee.top;for(let De=0;De<_e.length;De++){const dt=_e[De];ee.intersects(dt)&&(ee=ce===ks.UP?dt.top-Ie-se:dt.bottom+se,ee=new ri(ee,ee+Ie,me,me+be),De=-1)}return ee},fi=function(ee,se){re($t.SERIALIZER,ee,se)},Ps=function(ee){le($t.SERIALIZER,ee)},Rn=function(ee,{addCoordinates:se=!1,saveIds:ce=!0}={}){const _e=ee.workspace,me=Object.create(null);return me.height=ee.getSize().height,me.width=ee.getSize().width,ce&&(me.id=ee.id),se&&(se=ee.getRelativeToSurfaceXY(),me.x=_e.RTL?_e.getWidth()-se.x:se.x,me.y=se.y),ee.getText()&&(me.text=ee.getText()),ee.isCollapsed()&&(me.collapsed=!0),ee.isOwnEditable()||(me.editable=!1),ee.isOwnMovable()||(me.movable=!1),ee.isOwnDeletable()||(me.deletable=!1),me},Bs=function(ee,se,{recordUndo:ce=!1}={}){const _e=Me();if(ne.setRecordUndo$$module$build$src$core$events$utils(ce),ce=se.newComment(ee.id),ee.text!==void 0&&ce.setText(ee.text),ee.x!==void 0||ee.y!==void 0){const be=ce.getRelativeToSurfaceXY();let Ie,De=(Ie=ee.x)!=null?Ie:be.x;De=se.RTL?se.getWidth()-De:De;var me;se=(me=ee.y)!=null?me:be.y,ce.moveTo(new yt(De,se))}if(ee.width!==void 0||ee.height){me=ce.getSize();let be,Ie;ce.setSize(new Xt((be=ee.width)!=null?be:me.width,(Ie=ee.height)!=null?Ie:me.height))}return ee.collapsed!==void 0&&ce.setCollapsed(ee.collapsed),ee.editable!==void 0&&ce.setEditable(ee.editable),ee.movable!==void 0&&ce.setMovable(ee.movable),ee.deletable!==void 0&&ce.setDeletable(ee.deletable),ne.setRecordUndo$$module$build$src$core$events$utils(_e),ce},dr=function(ee,se){re($t.PASTER,ee,se)},il=function(ee){le($t.PASTER,ee)},nl=function(ee){const se=ee.workspace,ce=ee.getRelativeToSurfaceXY(),_e=new yt(0,0),me=se.getTopComments(!1).filter(be=>be.id!==ee.id).map(be=>be.getRelativeToSurfaceXY());for(;sl(yt.sum(ce,_e),me);)_e.translate(se.RTL?-30:30,30);ee.moveTo(yt.sum(ce,_e))},sl=function(ee,se){return se.some(ce=>1>=Math.abs(ce.x-ee.x)&&1>=Math.abs(ce.y-ee.y))},Fn=function(ee,se){ee.setAttribute(gm,se)},Ri=function(ee,se,ce){Array.isArray(ce)&&(ce=ce.join(" ")),ee.setAttribute(pm+se,`${ce}`)},Fs=function(ee){return ee.saveState!==void 0&&ee.loadState!==void 0},Zr=function(ee){return Ge(ee),rl()?(ol(),Promise.resolve()):(wr||(wr=new Promise(se=>{Yu=se,Qp=window.requestAnimationFrame(()=>{ol(),se()})})),wr)},cn=function(){return wr||Promise.resolve()},wn=function(ee){ee||window.cancelAnimationFrame(Qp),ol(ee),!ee&&Yu&&Yu()},rl=function(){return Mp},Ge=function(ee){Xu.add(ee),ju.set(ee,ne.getGroup$$module$build$src$core$events$utils());const se=ee.getParent();se?Ge(se):ql.add(ee)},ol=function(ee){const se=ee?new Set([ee]):new Set([...ql].map(be=>be.workspace)),ce=[...ql].filter(ud).filter(be=>se.has(be.workspace));for(var _e of ce)xa(_e);for(const be of se)be.resizeContents();for(var me of ce)_e=me.getRelativeToSurfaceXY(),me.updateComponentLocations(_e);for(const be of ce)me=ne.getGroup$$module$build$src$core$events$utils(),(_e=ju.get(be))&&ne.setGroup$$module$build$src$core$events$utils(_e),be.bumpNeighbours(),ne.setGroup$$module$build$src$core$events$utils(me);for(const be of ce)Ma(be);ee||(wr=null)},Ma=function(ee){ql.delete(ee),Xu.delete(ee),ju.delete(ee);for(const se of ee.getChildren(!1))Ma(se)},ud=function(ee){return!ee.isDisposed()&&!ee.getParent()},xa=function(ee){if(Xu.has(ee)&&ee.initialized){for(const se of ee.getChildren(!1))xa(se);ee.renderEfficiently()}},Qr=function(ee,se){eg(ee,se)},hd=function(ee){eg=ee},ll=function(ee,se){ng.confirmInternal(ee,se)},dd=function(ee,se){tg(ee,se)},_d=function(ee){tg=ee},al=function(ee,se,ce){ig(ee,se,ce)},pd=function(ee){ig=ee},_r=function(ee){return ee.getProcedureDef!==void 0},gd=function(ee){return ee.getProcedureCall!==void 0&&ee.renameProcedure!==void 0},Da=function(ee){return ee.getVariableModel!==void 0},ne.allUsedVarModels$$module$build$src$core$variables=function(ee){ee=ee.getAllBlocks(!1);const se=new Set;for(let ce=0;ce<ee.length;ce++){const _e=ee[ce].getVarModels();if(_e)for(let me=0;me<_e.length;me++){const be=_e[me];be.getId()&&se.add(be)}}return Array.from(se.values())},ne.allDeveloperVariables$$module$build$src$core$variables=function(ee){ee=ee.getAllBlocks(!1);const se=new Set;for(let _e=0,me;me=ee[_e];_e++){var ce=me.getDeveloperVariables;if(ce){ce=ce();for(let be=0;be<ce.length;be++)se.add(ce[be])}}return Array.from(se.values())},cl=function(ee){let se=[];const ce=document.createElement("button");return ce.setAttribute("text","%{BKY_NEW_VARIABLE}"),ce.setAttribute("callbackKey","CREATE_VARIABLE"),ee.registerButtonCallback("CREATE_VARIABLE",function(_e){pr(_e.getTargetWorkspace())}),se.push(ce),ee=Pa(ee),se=se.concat(ee)},Pa=function(ee){ee=ee.getVariablesOfType("");const se=[];if(0<ee.length){var ce=ee[ee.length-1];if(sn.variables_set){var _e=ne.createElement$$module$build$src$core$utils$xml("block");_e.setAttribute("type","variables_set"),_e.setAttribute("gap",sn.math_change?"8":"24"),_e.appendChild(Us(ce)),se.push(_e)}if(sn.math_change&&(_e=ne.createElement$$module$build$src$core$utils$xml("block"),_e.setAttribute("type","math_change"),_e.setAttribute("gap",sn.variables_get?"20":"8"),_e.appendChild(Us(ce)),ce=ne.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),_e.appendChild(ce),se.push(_e)),sn.variables_get){ee.sort(So.compareByName);for(let me=0,be;be=ee[me];me++)ce=ne.createElement$$module$build$src$core$utils$xml("block"),ce.setAttribute("type","variables_get"),ce.setAttribute("gap","8"),ce.appendChild(Us(be)),se.push(ce)}}return se},Ba=function(ee){return rg.generateUniqueNameInternal(ee)},fd=function(ee){return ul(Zu.charAt(0),ee.getAllVariableNames())},ul=function(ee,se){if(!se.length)return ee;const ce=Zu;let _e="",me=ce.indexOf(ee);for(;;){let be=!1;for(let Ie=0;Ie<se.length;Ie++)if(se[Ie].toLowerCase()===ee){be=!0;break}if(!be)break;me++,me===ce.length&&(me=0,_e=`${Number(_e)+1}`),ee=ce.charAt(me)+_e}return ee},pr=function(ee,se,ce){function _e(be){hl(ne.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,be,function(Ie){if(Ie){var De=Fa(Ie,ee);if(De){if(De.type===me)var dt=ne.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",De.name);else dt=ne.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,dt=dt.replace("%1",De.name).replace("%2",De.type);Qr(dt,function(){_e(Ie)})}else ee.createVariable(Ie,me),se&&se(Ie)}else se&&se(null)})}const me=ce||"";_e("")},ne.renameVariable$$module$build$src$core$variables=function(ee,se,ce){function _e(me){const be=ne.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",se.name);hl(be,me,function(Ie){if(Ie){var De=md(Ie,se.type,ee),dt=Ua(se.name,Ie,ee);if(De||dt){var vt="";De?vt=ne.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",De.name).replace("%2",De.type):dt&&(vt=ne.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",Ie).replace("%2",dt)),Qr(vt,function(){_e(Ie)})}else ee.renameVariableById(se.getId(),Ie),ce&&ce(Ie)}else ce&&ce(null)})}_e("")},hl=function(ee,se,ce){al(ee,se,function(_e){_e&&(_e=_e.replace(/[\s\xa0]+/g," ").trim(),_e===ne.Msg$$module$build$src$core$msg.RENAME_VARIABLE||_e===ne.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(_e=null),ce(_e)})},md=function(ee,se,ce){ce=ce.getVariableMap().getAllVariables(),ee=ee.toLowerCase();for(let _e=0,me;me=ce[_e];_e++)if(me.name.toLowerCase()===ee&&me.type!==se)return me;return null},Fa=function(ee,se){se=se.getVariableMap().getAllVariables(),ee=ee.toLowerCase();for(let ce=0,_e;_e=se[ce];ce++)if(_e.name.toLowerCase()===ee)return _e;return null},Ua=function(ee,se,ce){return ce.getProcedureMap().getProcedures().length?$d(ee,se,ce):Td(ee,se,ce)},$d=function(ee,se,ce){ee=ee.toLowerCase(),se=se.toLowerCase(),ce=ce.getProcedureMap().getProcedures();for(const me of ce){var _e=me.getParameters().filter(Da).map(be=>be.getVariableModel().name);if(_e&&(ce=_e.some(be=>be.toLowerCase()===ee),_e=_e.some(be=>be.toLowerCase()===se),ce&&_e))return me.getName()}return null},Td=function(ee,se,ce){ee=ee.toLowerCase(),se=se.toLowerCase(),ce=ce.getAllBlocks(!1);for(const me of ce){if(!_r(me))continue;ce=me.getProcedureDef();var _e=ce[1];const be=_e.some(Ie=>Ie.toLowerCase()===ee);if(_e=_e.some(Ie=>Ie.toLowerCase()===se),be&&_e)return ce[0]}return null},Us=function(ee){const se=ne.createElement$$module$build$src$core$utils$xml("field");return se.setAttribute("name","VAR"),se.setAttribute("id",ee.getId()),se.setAttribute("variabletype",ee.type),ee=ne.createTextNode$$module$build$src$core$utils$xml(ee.name),se.appendChild(ee),se},ne.getOrCreateVariablePackage$$module$build$src$core$variables=function(ee,se,ce,_e){let me=ne.getVariable$$module$build$src$core$variables(ee,se,ce,_e);return me||(me=bd(ee,se,ce,_e)),me},ne.getVariable$$module$build$src$core$variables=function(ee,se,ce,_e){const me=ee.getPotentialVariableMap();let be=null;if(se&&(be=ee.getVariableById(se),!be&&me&&(be=me.getVariableById(se)),be))return be;if(ce){if(_e===void 0)throw Error("Tried to look up a variable by name without a type");be=ee.getVariable(ce,_e),!be&&me&&(be=me.getVariable(ce,_e))}return be},bd=function(ee,se,ce,_e){const me=ee.getPotentialVariableMap();return ce||(ce=Ba(ee.isFlyout?ee.targetWorkspace:ee)),me?me.createVariable(ce,_e,se):ee.createVariable(ce,_e,se)},eo=function(ee,se){ee=ee.getAllVariables();const ce=[];if(se.length!==ee.length)for(let _e=0;_e<ee.length;_e++){const me=ee[_e];se.includes(me)||ce.push(me)}return ce},un=function(ee,{addCoordinates:se=!1,addInputBlocks:ce=!0,addNextBlocks:_e=!0,doFullSerialization:me=!0,saveIds:be=!0}={}){if(ee.isInsertionMarker())return null;const Ie={type:ee.type,id:be?ee.id:void 0};return se&&yd(ee,Ie),Ed(ee,Ie),Sd(ee,Ie,me),Cd(ee,Ie,me),kd(ee,Ie,me),ce&&vd(ee,Ie,me,be),_e&&Id(ee,Ie,me,be),Ie},Ed=function(ee,se){ee.isCollapsed()&&(se.collapsed=!0),ee.isEnabled()||(se.disabledReasons=Array.from(ee.getDisabledReasons())),ee.isOwnDeletable()||(se.deletable=!1),ee.isOwnMovable()||(se.movable=!1),ee.isOwnEditable()||(se.editable=!1),ee.inputsInline!==void 0&&ee.inputsInline!==ee.inputsInlineDefault&&(se.inline=ee.inputsInline),ee.data&&(se.data=ee.data)},yd=function(ee,se){const ce=ee.workspace;ee=ee.getRelativeToSurfaceXY(),se.x=Math.round(ce.RTL?ce.getWidth()-ee.x:ee.x),se.y=Math.round(ee.y)},Sd=function(ee,se,ce){ee.saveExtraState?(ee=ee.saveExtraState(ce),ee!==null&&(se.extraState=ee)):ee.mutationToDom&&(ee=ee.mutationToDom(),ee!==null&&(se.extraState=Hn(ee).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},Cd=function(ee,se,ce){const _e=Object.create(null);for(const me of ee.getIcons())Fs(me)&&(ee=me.saveState(ce))&&(_e[me.getType().toString()]=ee);Object.keys(_e).length&&(se.icons=_e)},kd=function(ee,se,ce){const _e=Object.create(null);for(let me=0;me<ee.inputList.length;me++){const be=ee.inputList[me];for(let Ie=0;Ie<be.fieldRow.length;Ie++){const De=be.fieldRow[Ie];De.isSerializable()&&(_e[De.name]=De.saveState(ce))}}Object.keys(_e).length&&(se.fields=_e)},vd=function(ee,se,ce,_e){const me=Object.create(null);for(let be=0;be<ee.inputList.length;be++){const Ie=ee.inputList[be];if(!Ie.connection)continue;const De=Ha(Ie.connection,ce,_e);De&&(me[Ie.name]=De)}Object.keys(me).length&&(se.inputs=me)},Id=function(ee,se,ce,_e){ee.nextConnection&&(ee=Ha(ee.nextConnection,ce,_e))&&(se.next=ee)},Ha=function(ee,se,ce){const _e=ee.getShadowState(!0);if(ee=ee.targetBlock(),!_e&&!ee)return null;const me=Object.create(null);return _e&&(me.shadow=_e),ee&&!ee.isShadow()&&(me.block=un(ee,{doFullSerialization:se,saveIds:ce})),me},es=function(ee,se,{recordUndo:ce=!1}={}){return ee=gr(ee,se,{recordUndo:ce}),se.rendered&&wn(),ee},gr=function(ee,se,{parentConnection:ce,isShadow:_e=!1,recordUndo:me=!1}={}){const be=Me();ne.setRecordUndo$$module$build$src$core$events$utils(me),(me=ne.getGroup$$module$build$src$core$events$utils())||ne.setGroup$$module$build$src$core$events$utils(!0),ne.disable$$module$build$src$core$events$utils();const Ie=se.getAllVariables();let De;try{De=Ga(ee,se,{parentConnection:ce,isShadow:_e})}finally{ne.enable$$module$build$src$core$events$utils()}if(Od(se,Ie),Ke()&&Ae(new(Le(it.BLOCK_CREATE))(De)),ne.setGroup$$module$build$src$core$events$utils(me),ne.setRecordUndo$$module$build$src$core$events$utils(be),se.rendered){const dt=De;setTimeout(()=>{dt.disposed||dt.setConnectionTracking(!0)},1)}return De},Ga=function(ee,se,{parentConnection:ce,isShadow:_e=!1}={}){if(!ee.type)throw new og(ee);const me=se.newBlock(ee.type,ee.id);return me.setShadow(_e),Rd(me,ee),wd(me,ee),Ad(me,ee),Ld(ce,me,ee),Nd(me,ee),Md(me,ee),xd(me,ee),Dd(me,ee),Pd(me,se.rendered),me},Od=function(ee,se){if(Ke())for(ee=eo(ee,se),se=0;se<ee.length;se++){const ce=ee[se];Ae(new(Le(it.VAR_CREATE))(ce))}},Rd=function(ee,se){let ce=se.x===void 0?0:se.x;se=se.y===void 0?0:se.y;const _e=ee.workspace;ce=_e.RTL?_e.getWidth()-ce:ce,ee.moveBy(ce,se)},wd=function(ee,se){if(se.collapsed&&ee.setCollapsed(!0),se.deletable===!1&&ee.setDeletable(!1),se.movable===!1&&ee.setMovable(!1),se.editable===!1&&ee.setEditable(!1),se.enabled===!1&&ee.setDisabledReason(!0,Ji),Array.isArray(se.disabledReasons))for(const ce of se.disabledReasons)ee.setDisabledReason(!0,ce);se.inline!==void 0&&ee.setInputsInline(se.inline),se.data!==void 0&&(ee.data=se.data)},Ad=function(ee,se){se.extraState&&(ee.loadExtraState?ee.loadExtraState(se.extraState):ee.domToMutation&&ee.domToMutation(ne.textToDom$$module$build$src$core$utils$xml(se.extraState)))},Ld=function(ee,se,ce){if(ee){if(ee.getSourceBlock().isShadow()&&!se.isShadow())throw new ag(ce);if(ee.type===ne.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var _e=se.outputConnection;if(!_e)throw new Co("output",se,ce)}else if(_e=se.previousConnection,!_e)throw new Co("previous",se,ce);if(!ee.connect(_e)){const me=se.workspace.connectionChecker;throw new lg(me.getErrorMessage(me.canConnectWithReason(_e,ee,!1),_e,ee),ee.type===ne.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",se,ce)}}},Nd=function(ee,se){if(se.icons){var ce=Object.keys(se.icons);for(const me of ce){ce=se.icons[me];var _e=ee.getIcon(me);if(!_e){if(_e=de($t.ICON,me,!1),!_e)throw new cg(me,ee,se);_e=new _e(ee),ee.addIcon(_e)}Fs(_e)&&_e.loadState(ce)}}},Md=function(ee,se){if(se.fields){var ce=Object.keys(se.fields);for(let _e=0;_e<ce.length;_e++){const me=ce[_e],be=se.fields[me],Ie=ee.getField(me);Ie?Ie.loadState(be):console.warn(`Ignoring non-existant field ${me} in block ${ee.type}`)}}},xd=function(ee,se){if(se.inputs){var ce=Object.keys(se.inputs);for(let _e=0;_e<ce.length;_e++){const me=ce[_e],be=ee.getInput(me);if(!be||!be.connection)throw new Co(me,ee,se);Wa(be.connection,se.inputs[me])}}},Dd=function(ee,se){if(se.next){if(!ee.nextConnection)throw new Co("next",ee,se);Wa(ee.nextConnection,se.next)}},Wa=function(ee,se){se.shadow&&ee.setShadowState(se.shadow),se.block&&Ga(se.block,ee.getSourceBlock().workspace,{parentConnection:ee})},Pd=function(ee,se){if(se){ee.setConnectionTracking(!1),ee.initSvg(),ee.queueRender();for(const ce of ee.getIcons())ce.onLocationChange(ee.getRelativeToSurfaceXY())}else ee.initModel()},fr=function(ee){return ee.bubbleIsVisible!==void 0&&ee.setBubbleVisible!==void 0},dl=function(ee){return ee*Math.PI/180},Bd=function(ee){return 180*ee/Math.PI},mr=function(ee,se,ce){if(ce<ee){const _e=ce;ce=ee,ee=_e}return Math.max(ee,Math.min(se,ce))},Va=function(){document.querySelector(".blocklyDropDownDiv")||(Zt=document.createElement("div"),Zt.className="blocklyDropDownDiv",(Lt()||document.body).appendChild(Zt),Mr=document.createElement("div"),Mr.className="blocklyDropDownContent",Zt.appendChild(Mr),ir=document.createElement("div"),ir.className="blocklyDropDownArrow",Zt.appendChild(ir),Zt.style.opacity="0",Zt.style.transition="transform "+Ql+"s, opacity "+Ql+"s",Zt.addEventListener("focusin",function(){Ct(Zt,"blocklyFocused")}),Zt.addEventListener("focusout",function(){Oe(Zt,"blocklyFocused")}))},za=function(ee){ih=ee},Xa=function(){return vs},_l=function(){return Mr},pl=function(){Mr.textContent="",Mr.style.width=""},ja=function(ee,se){Zt.style.backgroundColor=ee,Zt.style.borderColor=se},Fd=function(ee,se,ce,_e){return Ja(Ka(se),ee,ce,_e)},Ya=function(ee,se,ce){return dg=!0,Ja(qa(ee),ee,se,ce)},Ka=function(ee){var se=ee.getSvgRoot();const ce=ee.workspace.scale,_e=ee.height*ce;return ee=ee.width*ce,se=Dt(se),new ri(se.y,se.y+_e,se.x,se.x+ee)},qa=function(ee){return ee=ee.getScaledBBox(),new ri(ee.top,ee.bottom,ee.left,ee.right)},Ja=function(ee,se,ce,_e){const me=ee.left+(ee.right-ee.left)/2,be=ee.bottom;ee=ee.top,_e&&(ee+=_e),_e=se.getSourceBlock();let Ie=_e.workspace;for(;Ie.options.parentWorkspace;)Ie=Ie.options.parentWorkspace;return za(Ie.getParentSvg().parentNode),Za(se,_e.RTL,me,be,me,ee,ce)},Za=function(ee,se,ce,_e,me,be,Ie){return vs=ee,tr=Ie||null,Zt.style.direction=se?"rtl":"ltr",ee=bt(),Lr=ee.getRenderer().getClassName(),Nr=ee.getTheme().getClassName(),Lr&&Ct(Zt,Lr),Nr&&Ct(Zt,Nr),ic(ce,_e,me,be)},Qa=function(ee,se,ce,_e){return ee=to(ee,ce.left,ce.right,_e.width),{initialX:ee.divX,initialY:se,finalX:ee.divX,finalY:se+eh,arrowX:ee.arrowX,arrowY:-(vo/2+Qu),arrowAtTop:!0,arrowVisible:!0}},ec=function(ee,se,ce,_e){return ee=to(ee,ce.left,ce.right,_e.width),{initialX:ee.divX,initialY:se-_e.height,finalX:ee.divX,finalY:se-_e.height-eh,arrowX:ee.arrowX,arrowY:_e.height-2*Qu-vo/2,arrowAtTop:!1,arrowVisible:!0}},Ud=function(ee,se,ce){return ee=to(ee,se.left,se.right,ce.width),{initialX:ee.divX,initialY:0,finalX:ee.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},to=function(ee,se,ce,_e){return se=mr(se,ee-_e/2,ce-_e),ee=ee-vo/2-se,ce=hg,ee=mr(ce,ee,_e-ce-vo),{arrowX:ee,divX:se}},tc=function(){return!!vs},gl=function(ee,se){return vs===ee?(se?Un():fl(),!0):!1},fl=function(){Zt.style.transform="translate(0, 0)",Zt.style.opacity="0",th=setTimeout(function(){Un()},1e3*Ql),tr&&(tr(),tr=null)},Un=function(){tc()&&(th&&clearTimeout(th),Zt.style.transform="",Zt.style.left="",Zt.style.top="",Zt.style.opacity="0",Zt.style.display="none",Zt.style.backgroundColor="",Zt.style.borderColor="",tr&&(tr(),tr=null),pl(),vs=null,Lr&&(Oe(Zt,Lr),Lr=""),Nr&&(Oe(Zt,Nr),Nr=""),bt().markFocused())},ic=function(ee,se,ce,_e){ee=nh.getPositionMetrics(ee,se,ce,_e),ee.arrowVisible?(ir.style.display="",ir.style.transform="translate("+ee.arrowX+"px,"+ee.arrowY+"px) rotate(45deg)",ir.setAttribute("class",ee.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):ir.style.display="none",se=Math.floor(ee.initialX),ce=Math.floor(ee.initialY),_e=Math.floor(ee.finalX);const me=Math.floor(ee.finalY);return Zt.style.left=se+"px",Zt.style.top=ce+"px",Zt.style.display="block",Zt.style.opacity="1",Zt.style.transform="translate("+(_e-se)+"px,"+(me-ce)+"px)",!!ee.arrowAtTop},nc=function(){if(vs){var ee=vs.getSourceBlock();ee=dg?qa(vs):Ka(ee);const se=ee.left+(ee.right-ee.left)/2;ic(se,ee.bottom,se,ee.top)}else fl()},io=function(ee){return ee.length?ee.reduce(function(se,ce){return se.length<ce.length?se:ce}).length:0},sc=function(ee,se){if(!ee.length)return 0;if(ee.length===1)return ee[0].length;let ce=0;se=se||io(ee);let _e;for(_e=0;_e<se;_e++){for(var me=ee[0][_e],be=1;be<ee.length;be++)if(me!==ee[be][_e])return ce;me===" "&&(ce=_e+1)}for(me=1;me<ee.length;me++)if((be=ee[me][_e])&&be!==" ")return ce;return se},rc=function(ee,se){if(!ee.length)return 0;if(ee.length===1)return ee[0].length;let ce=0;se=se||io(ee);let _e;for(_e=0;_e<se;_e++){for(var me=ee[0].substr(-_e-1,1),be=1;be<ee.length;be++)if(me!==ee[be].substr(-_e-1,1))return ce;me===" "&&(ce=_e+1)}for(me=1;me<ee.length;me++)if((be=ee[me].charAt(ee[me].length-_e-1))&&be!==" ")return ce;return se},ne.wrap$$module$build$src$core$utils$string=function(ee,se){ee=ee.split(`
`);for(let ce=0;ce<ee.length;ce++)ee[ce]=Hd(ee[ce],se);return ee.join(`
`)},Hd=function(ee,se){if(ee.length<=se)return ee;const ce=ee.trim().split(/\s+/);for(var _e=0;_e<ce.length;_e++)ce[_e].length>se&&(se=ce[_e].length);var me=-1/0;let be,Ie=1;do{_e=me,be=ee,ee=[],me=ce.length/Ie;let De=1;for(let dt=0;dt<ce.length-1;dt++)De<(dt+1.5)/me?(De++,ee[dt]=!0):ee[dt]=!1;ee=oc(ce,ee,se),me=ml(ce,ee,se),ee=Gd(ce,ee),Ie++}while(me>_e);return be},ml=function(ee,se,ce){const _e=[0],me=[];for(var be=0;be<ee.length;be++)_e[_e.length-1]+=ee[be].length,se[be]===!0?(_e.push(0),me.push(ee[be].charAt(ee[be].length-1))):se[be]===!1&&_e[_e.length-1]++;for(ee=Math.max(..._e),se=0,be=0;be<_e.length;be++)se-=2*Math.pow(Math.abs(ce-_e[be]),1.5),se-=Math.pow(ee-_e[be],1.5),".?!".includes(me[be])?se+=ce/3:",;)]}".includes(me[be])&&(se+=ce/4);return 1<_e.length&&_e[_e.length-1]<=_e[_e.length-2]&&(se+=.5),se},oc=function(ee,se,ce){let _e=ml(ee,se,ce),me;for(let be=0;be<se.length-1;be++){if(se[be]===se[be+1])continue;const Ie=[].concat(se);Ie[be]=!Ie[be],Ie[be+1]=!Ie[be+1];const De=ml(ee,Ie,ce);De>_e&&(_e=De,me=Ie)}return me?oc(ee,me,ce):se},Gd=function(ee,se){const ce=[];for(let _e=0;_e<ee.length;_e++)ce.push(ee[_e]),se[_e]!==void 0&&ce.push(se[_e]?`
`:" ");return ce.join("")},ne.isNumber$$module$build$src$core$utils$string=function(ee){return/^\s*-?\d+(\.\d+)?\s*$/.test(ee)},Wd=function(ee){ea=ee},Vd=function(){return ea},zd=function(){return Oo},Xd=function(){return Ai},$r=function(ee){if(ee=lc(ee)){for(ee=ee.tooltip;typeof ee=="function";)ee=ee();if(typeof ee!="string")throw Error("Tooltip function must return a string.");return ee}return""},lc=function(ee){for(;ee&&ee.tooltip;){if(typeof ee.tooltip=="string"||typeof ee.tooltip=="function")return ee;ee=ee.tooltip}return null},ac=function(){document.querySelector(".blocklyTooltipDiv")||(Ai=document.createElement("div"),Ai.className="blocklyTooltipDiv",(Lt()||document.body).appendChild(Ai))},Tr=function(ee){ee.mouseOverWrapper_=Jt(ee,"pointerover",null,jd),ee.mouseOutWrapper_=Jt(ee,"pointerout",null,Yd),ee.addEventListener("pointermove",cc,!1)},$l=function(ee){ee&&(Yt(ee.mouseOverWrapper_),Yt(ee.mouseOutWrapper_),ee.removeEventListener("pointermove",cc))},jd=function(ee){Dr||(ee=lc(ee.currentTarget),bn!==ee&&(ts(),Ro=null,bn=ee),clearTimeout(pg))},Yd=function(ee){Dr||(pg=setTimeout(function(){Ro=bn=null,ts()},1),clearTimeout(nr),nr=0)},cc=function(ee){if(bn&&bn.tooltip&&!Dr)if(Oo){const se=sh-ee.pageX;ee=rh-ee.pageY,Math.sqrt(se*se+ee*ee)>gg&&ts()}else Ro!==bn&&(clearTimeout(nr),sh=ee.pageX,rh=ee.pageY,nr=setTimeout(Zd,fg))},uc=function(){Ro=bn=null,ts()},ts=function(){Oo&&(Oo=!1,Ai&&(Ai.style.display="none")),nr&&(clearTimeout(nr),nr=0)},hc=function(){ts(),Dr=!0},dc=function(){Dr=!1},Kd=function(){Ai&&bn&&(typeof ea=="function"?ea(Ai,bn):qd())},qd=function(){var ee=$r(bn);ee=ne.wrap$$module$build$src$core$utils$string(ee,_g),ee=ee.split(`
`);for(let se=0;se<ee.length;se++){const ce=document.createElement("div");ce.appendChild(document.createTextNode(ee[se])),Ai.appendChild(ce)}},Jd=function(ee){const se=document.documentElement.clientWidth,ce=document.documentElement.clientHeight;let _e=sh;_e=ee?_e-(oh+Ai.offsetWidth):_e+oh;let me=rh+lh;return me+Ai.offsetHeight>ce+window.scrollY&&(me-=Ai.offsetHeight+2*lh),ee?_e=Math.max(ta-window.scrollX,_e):_e+Ai.offsetWidth>se+window.scrollX-2*ta&&(_e=se-Ai.offsetWidth-2*ta),{x:_e,y:me}},Zd=function(){if(!Dr&&(Ro=bn,Ai)){Ai.textContent="",Kd();var ee=bn.RTL;Ai.style.direction=ee?"rtl":"ltr",Ai.style.display="block",Oo=!0;var{x:se,y:ce}=Jd(ee);Ai.style.left=se+"px",Ai.style.top=ce+"px"}},_c=function(){return ah},Qd=function(ee){ah=ee},pc=function(){return ch},e_=function(ee){ch=ee},Hs=function(ee){ee=`${ee}`.toLowerCase().trim();var se=mg[ee];if(se||(se=ee.substring(0,2)==="0x"?"#"+ee.substring(2):ee,se=se[0]==="#"?se:"#"+se,/^#[0-9a-f]{6}$/.test(se)))return se;if(/^#[0-9a-f]{3}$/.test(se))return["#",se[1],se[1],se[2],se[2],se[3],se[3]].join("");var ce=ee.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return ce&&(ee=Number(ce[1]),se=Number(ce[2]),ce=Number(ce[3]),0<=ee&&256>ee&&0<=se&&256>se&&0<=ce&&256>ce)?no(ee,se,ce):null},no=function(ee,se,ce){return se=ee<<16|se<<8|ce,16>ee?"#"+(16777216|se).toString(16).substr(1):"#"+se.toString(16)},Tl=function(ee){return ee=Hs(ee),ee?(ee=parseInt(ee.substr(1),16),[ee>>16,ee>>8&255,ee&255]):[0,0,0]},bl=function(ee,se,ce){let _e=0,me=0,be=0;if(se===0)be=me=_e=ce;else{const Ie=Math.floor(ee/60),De=ee/60-Ie;ee=ce*(1-se);const dt=ce*(1-se*De);switch(se=ce*(1-se*(1-De)),Ie){case 1:_e=dt,me=ce,be=ee;break;case 2:_e=ee,me=ce,be=se;break;case 3:_e=ee,me=dt,be=ce;break;case 4:_e=se,me=ee,be=ce;break;case 5:_e=ce,me=ee,be=dt;break;case 6:case 0:_e=ce,me=se,be=ee}}return no(Math.floor(_e),Math.floor(me),Math.floor(be))},Gs=function(ee,se,ce){return ee=Hs(ee),!ee||(se=Hs(se),!se)?null:(ee=Tl(ee),se=Tl(se),no(Math.round(se[0]+ce*(ee[0]-se[0])),Math.round(se[1]+ce*(ee[1]-se[1])),Math.round(se[2]+ce*(ee[2]-se[2]))))},gc=function(ee){return bl(ee,ah,255*ch)},El=function(ee,se,ce){const _e=[];var me=ee.split("");me.push("");var be=0;ee=[];let Ie=null;for(let vt=0;vt<me.length;vt++){var De=me[vt];if(be===0)if(De==="%")(be=ee.join(""))&&_e.push(be),ee.length=0,be=1;else if(ce&&De===`
`){const ai=ee.join("");ai&&_e.push(ai),ee.length=0,_e.push(De)}else ee.push(De);else if(be===1)De==="%"?(ee.push(De),be=0):se&&"0"<=De&&"9">=De?(be=2,Ie=De,(De=ee.join(""))&&_e.push(De),ee.length=0):De==="{"?be=3:(ee.push("%",De),be=0);else if(be===2)if("0"<=De&&"9">=De)Ie+=De;else{var dt=void 0;_e.push(parseInt((dt=Ie)!=null?dt:"",10)),vt--,be=0}else be===3&&(De===""?(ee.splice(0,0,"%{"),vt--,be=0):De!=="}"?ee.push(De):(be=ee.join(""),/[A-Z]\w*/i.test(be)?(De=be.toUpperCase(),(De=De.startsWith("BKY_")?De.substring(4):null)&&De in ne.Msg$$module$build$src$core$msg?(be=ne.Msg$$module$build$src$core$msg[De],typeof be=="string"?Array.prototype.push.apply(_e,El(be,se,ce)):se?_e.push(`${be}`):_e.push(be)):_e.push("%{"+be+"}")):_e.push("%{"+be+"}"),be=ee.length=0))}for((se=ee.join(""))&&_e.push(se),dt=[],ee.length=0,me=0;me<_e.length;me++)typeof _e[me]!="string"||ce&&_e[me]===`
`?((se=ee.join(""))&&dt.push(se),ee.length=0,dt.push(_e[me])):ee.push(_e[me]);return(se=ee.join(""))&&dt.push(se),ee.length=0,dt},fc=function(ee){return El(ee,!0,!0)},bi=function(ee){return typeof ee!="string"?ee:(ee=El(ee,!1,!1),ee.length?String(ee[0]):"")},t_=function(ee){let se=!0;const ce=ne.Msg$$module$build$src$core$msg,_e=ee.match(/%{BKY_[A-Z]\w*}/gi);if(_e)for(let me=0;me<_e.length;me++){const be=_e[me].toUpperCase();ce[be.slice(6,-1)]===void 0&&(console.warn("No message string for "+_e[me]+" in "+ee),se=!1)}return se},Er=function(ee){const se=typeof ee=="string"?bi(ee):ee;var ce=Number(se);if(!isNaN(ce)&&0<=ce&&360>=ce)return{hue:ce,hex:bl(ce,_c(),255*pc())};if(ce=Hs(se))return{hue:null,hex:ce};throw ce='Invalid colour: "'+se+'"',ee!==se&&(ce+=' (from "'+ee+'")'),Error(ce)},yr=function(){return Mn},i_=function(ee){if(Mn=ee,ee===null){let se;(se=document.querySelector("."+na))==null||se.remove()}},mc=function(){const ee=Lt()||document.body;document.querySelector("."+na)?Mn=document.querySelector("."+na):(Mn=document.createElement("div"),Mn.className=na),ee.appendChild(Mn)},yl=function(ee,se,ce,_e){if(Sr(),Pr=ee,ia=ce,ce=Mn){if(ce.style.direction=se?"rtl":"ltr",ce.style.display="block",!_e&&ee instanceof oi){let Ie;_e=(Ie=ee.getSourceBlock())==null?void 0:Ie.workspace}var me;uh=(me=_e)!=null?me:null;var be;ee=(be=_e)!=null?be:bt(),Br=ee.getRenderer().getClassName(),Fr=ee.getTheme().getClassName(),Br&&Ct(ce,Br),Fr&&Ct(ce,Fr)}},Sr=function(){if($c()){Pr=null;var ee=Mn;ee&&(ee.style.display="none",ee.style.left="",ee.style.top="",ia&&ia(),ia=null,ee.textContent="",Br&&(Oe(ee,Br),Br=""),Fr&&(Oe(ee,Fr),Fr=""),bt().markFocused())}},$c=function(){return!!Pr},Ws=function(ee){Pr===ee&&Sr()},so=function(ee){uh!==null&&uh!==ee||Sr()},Tc=function(ee,se,ce){Mn.style.left=ee+"px",Mn.style.top=se+"px",Mn.style.height=ce+"px"},bc=function(ee,se,ce,_e){const me=s_(ee,se,ce);ee=n_(ee,se,ce,_e),0>me?Tc(ee,0,ce.height+me):Tc(ee,me,ce.height)},n_=function(ee,se,ce,_e){return _e?Math.min(Math.max(se.right-ce.width,ee.left),ee.right-ce.width):Math.max(Math.min(se.left,ee.right-ce.width),ee.left)},s_=function(ee,se,ce){return se.bottom+ce.height>=ee.bottom?se.top-ce.height:se.bottom},r_=function(ee){return!(ee==null||!ee.repositionForWindowResize)},Ec=function(){r_(Pr)&&Pr.repositionForWindowResize()||Sr()},o_=function(){return sa},yc=function(ee){sa=ee},ro=function(ee,se,ce,_e){if(yl($g,ce,Sc,_e),se.length){var me=l_(se,ce,ee);ra=me,a_(me,ee,ce),setTimeout(function(){me.focus()},1),sa=null}else oo()},l_=function(ee,se,ce){const _e=new Vu;_e.setRole(Nn.MENU);for(let me=0;me<ee.length;me++){const be=ee[me],Ie=new zu(be.text);Ie.setRightToLeft(se),Ie.setRole(Nn.MENUITEM),_e.addChild(Ie),Ie.setEnabled(be.enabled),be.enabled&&Ie.onAction(function(){oo(),requestAnimationFrame(()=>{setTimeout(()=>{be.callback(be.scope,ce)},0)})},{})}return _e},a_=function(ee,se,ce){const _e=fs();se=new ri(se.clientY+_e.top,se.clientY+_e.top,se.clientX+_e.left,se.clientX+_e.left),c_(ee);const me=ee.getSize();ce&&(se.left+=me.width,se.right+=me.width,_e.left+=me.width,_e.right+=me.width),bc(_e,se,me,ce),ee.focus()},c_=function(ee){var se=yr();if(!se)throw Error("Attempting to create a context menu when widget div is null");se=ee.render(se),Ct(se,"blocklyContextMenu"),Nt(se,"contextmenu",null,u_),ee.focus()},u_=function(ee){ee.preventDefault(),ee.stopPropagation()},oo=function(){Ws($g),sa=null},Sc=function(){ra&&(ra.dispose(),ra=null)},ne.callbackFactory$$module$build$src$core$contextmenu=function(ee,se){return()=>{ne.disable$$module$build$src$core$events$utils();let ce;try{ce=se instanceof Element?Vs(se,ee.workspace):gr(se,ee.workspace);const _e=ee.getRelativeToSurfaceXY();_e.x=ee.RTL?_e.x-ne.config$$module$build$src$core$config.snapRadius:_e.x+ne.config$$module$build$src$core$config.snapRadius,_e.y+=2*ne.config$$module$build$src$core$config.snapRadius,ce.moveBy(_e.x,_e.y)}finally{ne.enable$$module$build$src$core$events$utils()}return Ke()&&!ce.isShadow()&&Ae(new(Le(it.BLOCK_CREATE))(ce)),ne.setSelected$$module$build$src$core$common(ce),ce}},Cc=function(ee,se){return se=Fe(se,ee.getParentSvg(),ee.getInverseScreenCTM()),se.x/=ee.scale,se.y/=ee.scale,se},Sl=function(ee,se,ce){se=Cc(ee,se),bg.set(ee,yt.difference(ce,se))},Cl=function(ee,se){if(se=Cc(ee,se),ee=bg.get(ee),!ee)throw Error("Drag not initialized");return yt.sum(ee,se)},h_=function(ee,se=!1){const ce=ne.createElement$$module$build$src$core$utils$xml("xml");var _e=kc(ne.allUsedVarModels$$module$build$src$core$variables(ee));_e.hasChildNodes()&&ce.appendChild(_e);for(const me of ee.getTopComments())ce.appendChild(lo(me,se));for(ee=ee.getTopBlocks(!0),_e=0;_e<ee.length;_e++)ce.appendChild(ao(ee[_e],se));return ce},lo=function(ee,se=!1){const ce=ne.createElement$$module$build$src$core$utils$xml("comment");se||ce.setAttribute("id",ee.id),se=ee.workspace;const _e=ee.getRelativeToSurfaceXY();return _e.x=se.RTL?se.getWidth()-_e.x:_e.x,ce.setAttribute("x",`${_e.x}`),ce.setAttribute("y",`${_e.y}`),ce.setAttribute("w",`${ee.getSize().width}`),ce.setAttribute("h",`${ee.getSize().height}`),ee.getText()&&(ce.textContent=ee.getText()),ee.isCollapsed()&&ce.setAttribute("collapsed","true"),ee.isOwnEditable()||ce.setAttribute("editable","false"),ee.isOwnMovable()||ce.setAttribute("movable","false"),ee.isOwnDeletable()||ce.setAttribute("deletable","false"),ce},kc=function(ee){const se=ne.createElement$$module$build$src$core$utils$xml("variables");for(let ce=0;ce<ee.length;ce++){const _e=ee[ce],me=ne.createElement$$module$build$src$core$utils$xml("variable");me.appendChild(ne.createTextNode$$module$build$src$core$utils$xml(_e.name)),_e.type&&me.setAttribute("type",_e.type),me.id=_e.getId(),se.appendChild(me)}return se},ao=function(ee,se){if(ee.isInsertionMarker()&&(ee=ee.getChildren(!1)[0],!ee))return new DocumentFragment;let ce=0;if(ee.workspace.RTL&&(ce=ee.workspace.getWidth()),se=Ts(ee,se),wc(se)){const _e=ee.getRelativeToSurfaceXY();se.setAttribute("x",String(Math.round(ee.workspace.RTL?ce-_e.x:_e.x))),se.setAttribute("y",String(Math.round(_e.y)))}return se},d_=function(ee){if(ee.isSerializable()){const se=ne.createElement$$module$build$src$core$utils$xml("field");return se.setAttribute("name",ee.name||""),ee.toXml(se)}return null},__=function(ee,se){for(let ce=0;ce<ee.inputList.length;ce++){const _e=ee.inputList[ce];for(let me=0;me<_e.fieldRow.length;me++){const be=d_(_e.fieldRow[me]);be&&se.appendChild(be)}}},Ts=function(ee,se){if(ee.isInsertionMarker())return(se=ee.getChildren(!1)[0])?Ts(se):new DocumentFragment;const ce=ne.createElement$$module$build$src$core$utils$xml(ee.isShadow()?"shadow":"block");if(ce.setAttribute("type",ee.type),se||(ce.id=ee.id),ee.mutationToDom){var _e=ee.mutationToDom();_e&&(_e.hasChildNodes()||_e.hasAttributes())&&ce.appendChild(_e)}if(__(ee,ce),_e=ee.getCommentText()){var me=ee.getIcon(wi.COMMENT),be=me.getBubbleSize();me=me.bubbleIsVisible();var Ie=ne.createElement$$module$build$src$core$utils$xml("comment");Ie.appendChild(ne.createTextNode$$module$build$src$core$utils$xml(_e)),Ie.setAttribute("pinned",`${me}`),Ie.setAttribute("h",String(be.height)),Ie.setAttribute("w",String(be.width)),ce.appendChild(Ie)}for(ee.data&&(_e=ne.createElement$$module$build$src$core$utils$xml("data"),_e.appendChild(ne.createTextNode$$module$build$src$core$utils$xml(ee.data)),ce.appendChild(_e)),_e=0;_e<ee.inputList.length;_e++){be=ee.inputList[_e];var De=void 0;if(me=!0,be.type!==ne.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&be.type!==ne.inputTypes$$module$build$src$core$inputs$input_types.END_ROW){Ie=be.connection.targetBlock(),be.type===ne.inputTypes$$module$build$src$core$inputs$input_types.VALUE?De=ne.createElement$$module$build$src$core$utils$xml("value"):be.type===ne.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(De=ne.createElement$$module$build$src$core$utils$xml("statement"));const vt=be.connection.getShadowDom();!vt||Ie&&Ie.isShadow()||De.appendChild(vc(vt,se)),Ie&&(Ie=Ts(Ie,se),Ie.nodeType===ls.ELEMENT_NODE&&(De.appendChild(Ie),me=!1)),De.setAttribute("name",be.name),me||ce.appendChild(De)}}ee.inputsInline!==void 0&&ee.inputsInline!==ee.inputsInlineDefault&&ce.setAttribute("inline",String(ee.inputsInline)),ee.isCollapsed()&&ce.setAttribute("collapsed","true"),ee.isEnabled()||ce.setAttribute("disabled-reasons",Array.from(ee.getDisabledReasons()).map(encodeURIComponent).join(",")),ee.isOwnDeletable()||ce.setAttribute("deletable","false"),ee.isOwnMovable()||ce.setAttribute("movable","false"),ee.isOwnEditable()||ce.setAttribute("editable","false"),De=ee.getNextBlock();let dt;return De&&(_e=Ts(De,se),_e.nodeType===ls.ELEMENT_NODE&&(dt=ne.createElement$$module$build$src$core$utils$xml("next"),dt.appendChild(_e),ce.appendChild(dt))),ee=ee.nextConnection&&ee.nextConnection.getShadowDom(),!ee||De&&De.isShadow()||dt.appendChild(vc(ee,se)),ce},vc=function(ee,se){let ce=ee=ee.cloneNode(!0),_e;for(;ce;)if(se&&ce.nodeName==="shadow"&&ce.removeAttribute("id"),ce.firstChild)ce=ce.firstChild;else{for(;ce&&!ce.nextSibling;){_e=ce,ce=ce.parentNode;let me;_e.nodeType===ls.TEXT_NODE&&_e.data.trim()===""&&((me=ce)==null?void 0:me.firstChild)!==_e&&We(_e)}ce&&(_e=ce,ce=ce.nextSibling,_e.nodeType===ls.TEXT_NODE&&_e.data.trim()===""&&We(_e))}return ee},Hn=function(ee){return On(ee).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},p_=function(ee){ee=Hn(ee).split("<");let se="";for(let ce=1;ce<ee.length;ce++){const _e=ee[ce];_e[0]==="/"&&(se=se.substring(2)),ee[ce]=se+"<"+_e,_e[0]!=="/"&&_e.slice(-2)!=="/>"&&(se+="  ")}return ee=ee.join(`
`),ee=ee.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),ee.replace(/^\n/,"")},g_=function(ee,se){return se.setResizesEnabled(!1),se.clear(),ee=ne.domToWorkspace$$module$build$src$core$xml(ee,se),se.setResizesEnabled(!0),ee},ne.domToWorkspace$$module$build$src$core$xml=function(ee,se){let ce=0;se.RTL&&(ce=se.getWidth());const _e=[];Ii();const me=ne.getGroup$$module$build$src$core$events$utils();me||ne.setGroup$$module$build$src$core$events$utils(!0),se.setResizesEnabled&&se.setResizesEnabled(!1);let be=!0;try{for(let Ie=0,De;De=ee.childNodes[Ie];Ie++){const dt=De.nodeName.toLowerCase(),vt=De;if(dt==="block"||dt==="shadow"&&!Me()){const ai=Vs(vt,se);_e.push(ai.id);let li;const on=parseInt((li=vt.getAttribute("x"))!=null?li:"10",10);let qr;const zo=parseInt((qr=vt.getAttribute("y"))!=null?qr:"10",10);isNaN(on)||isNaN(zo)||ai.moveBy(se.RTL?ce-on:on,zo,["create"]),be=!1}else{if(dt==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(dt==="comment")Ic(vt,se);else if(dt==="variables"){if(be)Oc(vt,se);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");be=!1}}}}finally{ne.setGroup$$module$build$src$core$events$utils(me),se.setResizesEnabled&&se.setResizesEnabled(!0),se.rendered&&wn(),Hi()}return Ae(new(Le(it.FINISHED_LOADING))(se)),_e},Ic=function(ee,se){var ce;const _e=(ce=ee.getAttribute("id"))!=null?ce:void 0;ce=se.rendered?new aa(se,_e):new la(se,_e);var me;ce.setText((me=ee.textContent)!=null?me:"");var be;me=parseInt((be=ee.getAttribute("x"))!=null?be:"",10);let Ie;be=parseInt((Ie=ee.getAttribute("y"))!=null?Ie:"",10),isNaN(me)||isNaN(be)||(me=se.RTL?se.getWidth()-me:me,ce.moveTo(new yt(me,be)));var De;se=parseInt((De=ee.getAttribute("w"))!=null?De:"",10);let dt;return De=parseInt((dt=ee.getAttribute("h"))!=null?dt:"",10),isNaN(se)||isNaN(De)||ce.setSize(new Xt(se,De)),ee.getAttribute("collapsed")==="true"&&ce.setCollapsed(!0),ee.getAttribute("editable")==="false"&&ce.setEditable(!1),ee.getAttribute("movable")==="false"&&ce.setMovable(!1),ee.getAttribute("deletable")==="false"&&ce.setDeletable(!1),ce},f_=function(ee,se){if(!se.getBlocksBoundingBox)return ne.domToWorkspace$$module$build$src$core$xml(ee,se);var ce=se.getBlocksBoundingBox();if(ee=ne.domToWorkspace$$module$build$src$core$xml(ee,se),ce&&ce.top!==ce.bottom){var _e=ce.bottom;ce=se.RTL?ce.right:ce.left;var me=1/0;let be=-1/0,Ie=1/0;for(let De=0;De<ee.length;De++){const dt=se.getBlockById(ee[De]).getRelativeToSurfaceXY();dt.y<Ie&&(Ie=dt.y),dt.x<me&&(me=dt.x),dt.x>be&&(be=dt.x)}for(_e=_e-Ie+10,ce=se.RTL?ce-be:ce-me,me=0;me<ee.length;me++)se.getBlockById(ee[me]).moveBy(ce,_e,["create"])}return ee},ne.domToBlock$$module$build$src$core$xml=function(ee,se){return ee=Vs(ee,se),se.rendered&&wn(),ee},Vs=function(ee,se){ne.disable$$module$build$src$core$events$utils();var ce=se.getAllVariables();let _e;try{if(_e=kl(ee,se),se.rendered){const me=_e,be=_e.getDescendants(!1);me.setConnectionTracking(!1);for(let Ie=be.length-1;0<=Ie;Ie--)be[Ie].initSvg();for(let Ie=be.length-1;0<=Ie;Ie--)be[Ie].queueRender();setTimeout(function(){me.disposed||me.setConnectionTracking(!0)},1),se.resizeContents()}else{const me=_e.getDescendants(!1);for(let be=me.length-1;0<=be;be--)me[be].initModel()}}finally{ne.enable$$module$build$src$core$events$utils()}if(Ke()){for(ee=eo(se,ce),se=0;se<ee.length;se++)ce=ee[se],Ae(new(Le(it.VAR_CREATE))(ce));Ae(new(Le(it.BLOCK_CREATE))(_e))}return _e},Oc=function(ee,se){for(let _e=0;_e<ee.children.length;_e++){var ce=ee.children[_e];const me=ce.getAttribute("type"),be=ce.getAttribute("id");if(ce=ce.textContent,!ce)break;se.createVariable(ce,me,be)}},m_=function(ee){const se={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let ce=0;ce<ee.children.length;ce++){const _e=ee.children[ce];if(_e.nodeType!==ls.TEXT_NODE)switch(_e.nodeName.toLowerCase()){case"mutation":se.mutation.push(_e);break;case"comment":se.comment.push(_e);break;case"data":se.data.push(_e);break;case"title":case"field":se.field.push(_e);break;case"value":case"statement":se.input.push(_e);break;case"next":se.next.push(_e);break;default:console.warn("Ignoring unknown tag: "+_e.nodeName)}}return se},$_=function(ee,se){let ce=!1;for(let _e=0;_e<ee.length;_e++){const me=ee[_e];se.domToMutation&&(se.domToMutation(me),se.initSvg&&(ce=!0))}return ce},T_=function(ee,se){for(let _e=0;_e<ee.length;_e++){var ce=ee[_e];const me=ce.textContent,be=ce.getAttribute("pinned")==="true";let Ie;const De=parseInt((Ie=ce.getAttribute("w"))!=null?Ie:"50",10);let dt;ce=parseInt((dt=ce.getAttribute("h"))!=null?dt:"50",10),se.setCommentText(me);const vt=se.getIcon(wi.COMMENT);isNaN(De)||isNaN(ce)||vt.setBubbleSize(new Xt(De,ce)),vt.setBubbleVisible(be),setTimeout(()=>vt.setBubbleVisible(be),1)}},b_=function(ee,se){for(let ce=0;ce<ee.length;ce++)se.data=ee[ce].textContent},E_=function(ee,se){for(let ce=0;ce<ee.length;ce++){const _e=ee[ce],me=_e.getAttribute("name");me?C_(se,me,_e):console.warn(`Ignoring unnamed field in block ${se.type}`)}},Rc=function(ee){let se=null,ce=null;for(let _e=0;_e<ee.childNodes.length;_e++){const me=ee.childNodes[_e];wc(me)&&(me.nodeName.toLowerCase()==="block"?se=me:me.nodeName.toLowerCase()==="shadow"&&(ce=me))}return{childBlockElement:se,childShadowElement:ce}},y_=function(ee,se,ce,_e){for(let be=0;be<ee.length;be++){var me=ee[be];const Ie=me.getAttribute("name"),De=Ie?ce.getInput(Ie):null;if(!De){console.warn("Ignoring non-existent input "+Ie+" in block "+_e);break}if(me=Rc(me),me.childBlockElement){if(!De.connection)throw TypeError("Input connection does not exist.");kl(me.childBlockElement,se,De.connection,!1)}if(me.childShadowElement){let dt;(dt=De.connection)==null||dt.setShadowDom(me.childShadowElement)}}},S_=function(ee,se,ce){for(let _e=0;_e<ee.length;_e++){const me=Rc(ee[_e]);if(me.childBlockElement){if(!ce.nextConnection)throw TypeError("Next statement does not exist.");if(ce.nextConnection.isConnected())throw TypeError("Next statement is already connected.");kl(me.childBlockElement,se,ce.nextConnection,!0)}me.childShadowElement&&ce.nextConnection&&ce.nextConnection.setShadowDom(me.childShadowElement)}},kl=function(ee,se,ce,_e){var me;const be=ee.getAttribute("type");if(!be)throw TypeError("Block type unspecified: "+ee.outerHTML);var Ie=(me=ee.getAttribute("id"))!=null?me:void 0;me=se.newBlock(be,Ie),Ie=m_(ee);const De=$_(Ie.mutation,me);if(T_(Ie.comment,me),b_(Ie.data,me),ce)if(_e)if(me.previousConnection)ce.connect(me.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(me.outputConnection)ce.connect(me.outputConnection);else if(me.previousConnection)ce.connect(me.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(E_(Ie.field,me),y_(Ie.input,se,me,be),S_(Ie.next,se,me),De&&me.initSvg(),(se=ee.getAttribute("inline"))&&me.setInputsInline(se==="true"),(se=ee.getAttribute("disabled"))&&me.setDisabledReason(se==="true"||se==="disabled",Ji),se=ee.getAttribute("disabled-reasons"),se!==null)for(var dt of se.split(","))me.setDisabledReason(!0,decodeURIComponent(dt));if((dt=ee.getAttribute("deletable"))&&me.setDeletable(dt==="true"),(dt=ee.getAttribute("movable"))&&me.setMovable(dt==="true"),(dt=ee.getAttribute("editable"))&&me.setEditable(dt==="true"),(dt=ee.getAttribute("collapsed"))&&me.setCollapsed(dt==="true"),ee.nodeName.toLowerCase()==="shadow"){for(ee=me.getChildren(!1),dt=0;dt<ee.length;dt++)if(!ee[dt].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");me.setShadow(!0)}return me},C_=function(ee,se,ce){const _e=ee.getField(se);_e?_e.fromXml(ce):console.warn("Ignoring non-existent field "+se+" in block "+ee.type)},k_=function(ee){for(let se=0;se<ee.childNodes.length;se++){const ce=ee.childNodes[se];if(ce.nodeName.toLowerCase()==="next"){ee.removeChild(ce);break}}},wc=function(ee){return ee.nodeType===ls.ELEMENT_NODE},vl=function(ee){if(!(100<ee.getDescendants(!1).length)){var se=ee.workspace,ce=ee.getSvgRoot();se.getAudioManager().play("delete");var _e=ee.getRelativeToSurfaceXY(),me=ce.cloneNode(!0);me.setAttribute("transform","translate("+_e.x+","+_e.y+")");var be;(be=se.getLayerManager())==null||be.appendToAnimationLayer({getSvgRoot:()=>me}),Ac(me,{x:_e.x,y:_e.y,width:ee.width,height:ee.height},se.RTL,new Date)}},Ac=function(ee,se,ce,_e){const me=(new Date().getTime()-_e.getTime())/150;1<me?We(ee):(ee.setAttribute("transform","translate("+(se.x+(ce?-1:1)*se.width/2*me)+","+(se.y+se.height/2*me)+") scale("+(1-me)+")"),setTimeout(Ac,10,ee,se,ce,_e))},Il=function(ee){var se=ee.workspace;const ce=se.scale;if(se.getAudioManager().play("click"),!(1>ce)){var _e=se.getSvgXY(ee.getSvgRoot());ee.outputConnection?(_e.x+=(ee.RTL?3:-3)*ce,_e.y+=13*ce):ee.previousConnection&&(_e.x+=(ee.RTL?-23:23)*ce,_e.y+=3*ce);var me=lt(Ye.CIRCLE,{cx:_e.x,cy:_e.y,r:0,fill:"none",stroke:"#888","stroke-width":10},se.getParentSvg());ee=lt(Ye.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*ce},me),se=lt(Ye.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},me),ee.beginElement(),se.beginElement(),setTimeout(()=>void We(me),150)}},Lc=function(ee){if(Cr(),ee.workspace.getAudioManager().play("disconnect"),!(1>ee.workspace.scale)){var se=ee.getHeightWidth().height;se=Math.atan(10/se)/Math.PI*180,ee.RTL||(se*=-1),Ao=ee,Nc(ee,se,new Date)}},Nc=function(ee,se,ce){const _e=(new Date().getTime()-ce.getTime())/200;let me="";1>=_e&&(me=`skewX(${Math.round(Math.sin(_e*Math.PI*3)*(1-_e)*se)})`,ca=setTimeout(Nc,10,ee,se,ce)),ee.getSvgRoot().setAttribute("transform",`${ee.getTranslation()} ${me}`)},Cr=function(){Ao&&(ca&&(clearTimeout(ca),ca=null),Ao.getSvgRoot().setAttribute("transform",Ao.getTranslation()),Ao=null)},zs=function(ee){return ee.getRelativeToSurfaceXY!==void 0&&ee.isMovable!==void 0&&ee.startDrag!==void 0&&ee.drag!==void 0&&ee.endDrag!==void 0&&ee.revertDrag!==void 0},is=function(ee,se){for(const ce in se)ee[ce]=se[ce]!==null&&typeof se[ce]=="object"?is(ee[ce]||Object.create(null),se[ce]):se[ce];return ee},Gn=function(ee,se){re($t.FIELD,ee,se)},v_=function(ee){le($t.FIELD,ee)},ne.fromJson$$module$build$src$core$field_registry=function(ee){return Cg.fromJsonInternal(ee)},I_=function(ee){const se=ue($t.FIELD,ee.type);return se?se.fromJson(ee):(console.warn("Blockly could not create a field of type "+ee.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},ne.register$$module$build$src$core$extensions=function(ee,se){if(typeof ee!="string"||ee.trim()==="")throw Error('Error: Invalid extension name "'+ee+'"');if(Hr[ee])throw Error('Error: Extension "'+ee+'" is already registered.');if(typeof se!="function")throw Error('Error: Extension "'+ee+'" must be a function');Hr[ee]=se},ne.registerMixin$$module$build$src$core$extensions=function(ee,se){if(!se||typeof se!="object")throw Error('Error: Mixin "'+ee+'" must be a object');ne.register$$module$build$src$core$extensions(ee,function(){this.mixin(se)})},ne.registerMutator$$module$build$src$core$extensions=function(ee,se,ce,_e){const me='Error when registering mutator "'+ee+'": ';Dc(me,se);const be=xc(se,me);if(ce&&typeof ce!="function")throw Error(me+'Extension "'+ee+'" is not a function');ne.register$$module$build$src$core$extensions(ee,function(){be&&this.setMutator(new ne.MutatorIcon$$module$build$src$core$icons$mutator_icon(_e||[],this)),this.mixin(se),ce&&ce.apply(this)})},O_=function(ee){Mc(ee)?delete Hr[ee]:console.warn('No extension mapping for name "'+ee+'" found to unregister')},Mc=function(ee){return!!Hr[ee]},Ol=function(ee,se,ce){const _e=Hr[ee];if(typeof _e!="function")throw Error('Error: Extension "'+ee+'" not found.');let me;if(ce?R_(ee,se):me=wl(se),_e.apply(se),ce)Dc('Error after applying mutator "'+ee+'": ',se);else if(!L_(me,se))throw Error('Error when applying extension "'+ee+'": mutation properties changed when applying a non-mutator extension.')},R_=function(ee,se){if(wl(se).length)throw Error('Error: tried to apply mutation "'+ee+'" to a block that already has mutator functions.  Block id: '+se.id)},w_=function(ee,se){return Rl(ee.mutationToDom,ee.domToMutation,se+" mutationToDom/domToMutation")},A_=function(ee,se){return Rl(ee.saveExtraState,ee.loadExtraState,se+" saveExtraState/loadExtraState")},xc=function(ee,se){return Rl(ee.compose,ee.decompose,se+" compose/decompose")},Rl=function(ee,se,ce){if(ee&&se){if(typeof ee!="function"||typeof se!="function")throw Error(ce+" must be a function");return!0}if(!ee&&!se)return!1;throw Error(ce+"Must have both or neither functions")},Dc=function(ee,se){const ce=w_(se,ee),_e=A_(se,ee);if(!ce&&!_e)throw Error(ee+"Mutations must contain either XML hooks, or JSON hooks, or both");xc(se,ee)},wl=function(ee){const se=[];return ee.domToMutation!==void 0&&se.push(ee.domToMutation),ee.mutationToDom!==void 0&&se.push(ee.mutationToDom),ee.saveExtraState!==void 0&&se.push(ee.saveExtraState),ee.loadExtraState!==void 0&&se.push(ee.loadExtraState),ee.compose!==void 0&&se.push(ee.compose),ee.decompose!==void 0&&se.push(ee.decompose),se},L_=function(ee,se){if(se=wl(se),se.length!==ee.length)return!1;for(let ce=0;ce<se.length;ce++)if(ee[ce]!==se[ce])return!1;return!0},N_=function(ee){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")ee();else{const se=setInterval(function(){document.readyState==="complete"&&(clearInterval(se),ee())},10)}},ne.buildTooltipForDropdown$$module$build$src$core$extensions=function(ee,se){const ce=[];return function(){ce.includes(this.type)||(M_(this,ee,se),ce.push(this.type)),this.setTooltip((function(){const _e=String(this.getFieldValue(ee));return bi(se[_e])}).bind(this))}},M_=function(ee,se,ce){var _e=ee.getField(se);if(_e instanceof rn&&!_e.isOptionListDynamic()){_e=_e.getOptions();for(const[,me]of _e)ce[me]===void 0&&console.warn(`No tooltip mapping for value ${me} of field ${se} of block type ${ee.type}.`)}},ne.buildTooltipWithFieldText$$module$build$src$core$extensions=function(ee,se){return function(){this.setTooltip((function(){const ce=this.getField(se);return bi(ee).replace("%1",ce?ce.getText():"")}).bind(this))}},x_=function(){const ee=this.tooltip;this.setTooltip((function(){const se=this.getParent();return se&&se.getInputsInline()&&se.tooltip||ee}).bind(this))},Mt=function(ee,se){return" "+ee+","+se+" "},nn=function(ee,se){return" "+ee+se.join("")},Ni=function(ee,se){return" M "+ee+","+se+" "},ci=function(ee,se){return" m "+ee+","+se+" "},Wn=function(ee,se){return" l "+ee+","+se+" "},kr=function(ee){return" l"+ee.join("")},wt=function(ee,se){return" "+ee+" "+se+" "},Ei=function(ee,se,ce,_e){return ee+" "+ce+" "+ce+" "+se+_e},Pc=function(ee,se){re($t.ICON,ee.toString(),se)},D_=function(ee){le($t.ICON,ee)},bs=function(ee){return ee.getProcedureModel!==void 0&&ee.doProcedureUpdate!==void 0&&ee.isProcedureDef!==void 0},Al=function(ee){return ee.startPublishing!==void 0&&ee.stopPublishing!==void 0},Ll=function(ee){const se=ee.getProcedureMap().getProcedures().filter(_e=>!_e.getReturnTypes()).map(_e=>[_e.getName(),_e.getParameters().map(me=>me.getName()),!1]);ee.getBlocksByType("procedures_defnoreturn",!1).forEach(_e=>{!bs(_e)&&_r(_e)&&se.push(_e.getProcedureDef())});const ce=ee.getProcedureMap().getProcedures().filter(_e=>!!_e.getReturnTypes()).map(_e=>[_e.getName(),_e.getParameters().map(me=>me.getName()),!0]);return ee.getBlocksByType("procedures_defreturn",!1).forEach(_e=>{!bs(_e)&&_r(_e)&&ce.push(_e.getProcedureDef())}),se.sort(Bc),ce.sort(Bc),[se,ce]},Bc=function(ee,se){return ee[0].localeCompare(se[0],void 0,{sensitivity:"base"})},ne.findLegalName$$module$build$src$core$procedures=function(ee,se){if(se.isInFlyout)return ee;for(ee=ee||ne.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!P_(ee,se.workspace,se);){const ce=ee.match(/^(.*?)(\d+)$/);ee=ce?ce[1]+(parseInt(ce[2])+1):ee+"2"}return ee},P_=function(ee,se,ce){return!Fc(ee,se,ce)},Fc=function(ee,se,ce){for(const _e of se.getAllBlocks(!1))if(_e!==ce&&_r(_e)&&ne.Names$$module$build$src$core$names.equals(_e.getProcedureDef()[0],ee))return!0;ce=ce&&bs(ce)?ce==null?void 0:ce.getProcedureModel():void 0;for(const _e of se.getProcedureMap().getProcedures())if(_e!==ce&&ne.Names$$module$build$src$core$names.equals(_e.getName(),ee))return!0;return!1},ne.rename$$module$build$src$core$procedures=function(ee){var se=this.getSourceBlock();if(!se)throw new Si;ee=ee.trim();const ce=ne.findLegalName$$module$build$src$core$procedures(ee,se);bs(se)&&!se.isInsertionMarker()&&se.getProcedureModel().setName(ce);const _e=this.getValue();if(_e!==ee&&_e!==ce)for(ee=se.workspace.getAllBlocks(!1),se=0;se<ee.length;se++){const me=ee[se];me.renameProcedure&&me.renameProcedure(_e,ce)}return ce},Nl=function(ee){function se(be,Ie){for(let dt=0;dt<be.length;dt++){var De=be[dt][0];const vt=be[dt][1],ai=ne.createElement$$module$build$src$core$utils$xml("block");ai.setAttribute("type",Ie),ai.setAttribute("gap","16");const li=ne.createElement$$module$build$src$core$utils$xml("mutation");for(li.setAttribute("name",De),ai.appendChild(li),De=0;De<vt.length;De++){const on=ne.createElement$$module$build$src$core$utils$xml("arg");on.setAttribute("name",vt[De]),li.appendChild(on)}ce.push(ai)}}const ce=[];if(sn.procedures_defnoreturn){var _e=ne.createElement$$module$build$src$core$utils$xml("block");_e.setAttribute("type","procedures_defnoreturn"),_e.setAttribute("gap","16");var me=ne.createElement$$module$build$src$core$utils$xml("field");me.setAttribute("name","NAME"),me.appendChild(ne.createTextNode$$module$build$src$core$utils$xml(ne.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),_e.appendChild(me),ce.push(_e)}return sn.procedures_defreturn&&(_e=ne.createElement$$module$build$src$core$utils$xml("block"),_e.setAttribute("type","procedures_defreturn"),_e.setAttribute("gap","16"),me=ne.createElement$$module$build$src$core$utils$xml("field"),me.setAttribute("name","NAME"),me.appendChild(ne.createTextNode$$module$build$src$core$utils$xml(ne.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),_e.appendChild(me),ce.push(_e)),sn.procedures_ifreturn&&(_e=ne.createElement$$module$build$src$core$utils$xml("block"),_e.setAttribute("type","procedures_ifreturn"),_e.setAttribute("gap","16"),ce.push(_e)),ce.length&&ce[ce.length-1].setAttribute("gap","24"),ee=Ll(ee),se(ee[0],"procedures_callnoreturn"),se(ee[1],"procedures_callreturn"),ce},Uc=function(ee){var se=[],ce=ee.getBlocksByType("procedures_mutatorarg",!1);for(let be=0,Ie;Ie=ce[be];be++)se.push(Ie.getFieldValue("NAME"));ce=ne.createElement$$module$build$src$core$utils$xml("xml");const _e=ne.createElement$$module$build$src$core$utils$xml("block");_e.setAttribute("type","procedures_mutatorarg");const me=ne.createElement$$module$build$src$core$utils$xml("field");me.setAttribute("name","NAME"),se=ul(ne.DEFAULT_ARG$$module$build$src$core$procedures,se),se=ne.createTextNode$$module$build$src$core$utils$xml(se),me.appendChild(se),_e.appendChild(me),ce.appendChild(_e),ee.updateToolbox(ce)},Hc=function(ee){if(xe(ee)&&ee.bubbleType==="mutator"&&ee.isOpen&&ee.blockId){ee=pt(ee.workspaceId).getBlockById(ee.blockId);var se=ee.type;(se==="procedures_defnoreturn"||se==="procedures_defreturn")&&(ee=ee.getIcon(ne.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),Uc(ee),ee.addChangeListener(B_))}},B_=function(ee){(Ee(ee)||Se(ee)||ve(ee)||ke(ee))&&(ee=pt(ee.workspaceId),Uc(ee))},Gc=function(ee,se){return se.getAllBlocks(!1).filter(ce=>F_(ce,ee)||gd(ce)&&ne.Names$$module$build$src$core$names.equals(ce.getProcedureCall(),ee))},F_=function(ee,se){return bs(ee)&&!ee.isProcedureDef()&&ee.getProcedureModel()&&ne.Names$$module$build$src$core$names.equals(ee.getProcedureModel().getName(),se)},ne.mutateCallers$$module$build$src$core$procedures=function(ee){const se=Me();var ce=ee.getProcedureDef()[0];const _e=ee.mutationToDom(!0);ee=Gc(ce,ee.workspace);for(let be=0,Ie;Ie=ee[be];be++){ce=(ce=Ie.mutationToDom())&&On(ce),Ie.domToMutation&&Ie.domToMutation(_e);var me=Ie.mutationToDom();me=me&&On(me),ce!==me&&(ne.setRecordUndo$$module$build$src$core$events$utils(!1),Ae(new(Le(it.BLOCK_CHANGE))(Ie,"mutation",null,ce,me)),ne.setRecordUndo$$module$build$src$core$events$utils(se))}},ne.getDefinition$$module$build$src$core$procedures=function(ee,se){for(const ce of se.getAllBlocks(!1))if(bs(ce)&&ce.isProcedureDef()&&ne.Names$$module$build$src$core$names.equals(ce.getProcedureModel().getName(),ee)||_r(ce)&&ne.Names$$module$build$src$core$names.equals(ce.getProcedureDef()[0],ee))return ce;return null},Ml=function(ee){return ee.isDynamic},U_=function(ee){return ee.pathDown!==void 0&&ee.pathUp!==void 0},H_=function(ee){return ee.pathLeft!==void 0&&ee.pathRight!==void 0},G_=function(ee,se){if(!ee||!se)throw Error("Cannot connect null connections.");ee.targetConnection=se,se.targetConnection=ee},W_=function(ee,se){let ce=null;se=se.outputConnection;const _e=se==null?void 0:se.getConnectionChecker();for(let me=0,be;be=ee.inputList[me];me++){const Ie=be.connection;let De;if(Ie&&((De=_e)!=null&&De.canConnect(se,Ie,!1))){if(ce)return null;ce=Ie}}return ce},V_=function(ee,se){let ce;for(;ce=W_(ee,se);)if(ee=ce.targetBlock(),!ee||ee.isShadow())return ce;return null},Wc=function(ee){return ee.getType!==void 0&&ee.initView!==void 0&&ee.dispose!==void 0&&ee.getWeight!==void 0&&ee.getSize!==void 0&&ee.applyColour!==void 0&&ee.hideForInsertionMarker!==void 0&&ee.updateEditable!==void 0&&ee.updateCollapsed!==void 0&&ee.isShownWhenCollapsed!==void 0&&ee.setOffsetInBlock!==void 0&&ee.onLocationChange!==void 0&&ee.onClick!==void 0},z_=function(ee){return Wc(ee)&&fr(ee)&&Fs(ee)&&ee.setText!==void 0&&ee.getText!==void 0&&ee.setBubbleSize!==void 0&&ee.getBubbleSize!==void 0&&ee.getType()===wi.COMMENT},co=function(ee){let se=ee.outputConnection;return(!se||ee.previousConnection&&ee.previousConnection.isConnected())&&(se=ee.previousConnection),se},uo=function(ee,se){re($t.RENDERER,ee,se)},X_=function(ee){le($t.RENDERER,ee)},Vc=function(ee,se,ce){return ee=new(de($t.RENDERER,ee))(ee),ee.init(se,ce),ee},zc=function(ee){pr(ee.getTargetWorkspace(),void 0,"String")},Xc=function(ee){pr(ee.getTargetWorkspace(),void 0,"Number")},jc=function(ee){pr(ee.getTargetWorkspace(),void 0,"Colour")},xl=function(ee){let se=[],ce=document.createElement("button");return ce.setAttribute("text",ne.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),ce.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),se.push(ce),ce=document.createElement("button"),ce.setAttribute("text",ne.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),ce.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),se.push(ce),ce=document.createElement("button"),ce.setAttribute("text",ne.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),ce.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),se.push(ce),ee.registerButtonCallback("CREATE_VARIABLE_STRING",zc),ee.registerButtonCallback("CREATE_VARIABLE_NUMBER",Xc),ee.registerButtonCallback("CREATE_VARIABLE_COLOUR",jc),ee=Yc(ee),se=se.concat(ee)},Yc=function(ee){ee=ee.getAllVariables();const se=[];if(0<ee.length){if(sn.variables_set_dynamic){var ce=ee[ee.length-1];const _e=ne.createElement$$module$build$src$core$utils$xml("block");_e.setAttribute("type","variables_set_dynamic"),_e.setAttribute("gap","24"),_e.appendChild(Us(ce)),se.push(_e)}if(sn.variables_get_dynamic){ee.sort(So.compareByName);for(let _e=0,me;me=ee[_e];_e++)ce=ne.createElement$$module$build$src$core$utils$xml("block"),ce.setAttribute("type","variables_get_dynamic"),ce.setAttribute("gap","8"),ce.appendChild(Us(me)),se.push(ce)}}return se},j_=function(ee,se){const ce=ee.workspace,_e=ne.config$$module$build$src$core$config.snapRadius,me=yt.difference(se,ee.getRelativeToSurfaceXY()),be=new yt(0,0),Ie=ce.getAllBlocks(!1).filter(De=>De.id!=ee.id).map(De=>De.getRelativeToSurfaceXY());for(;Y_(yt.sum(se,be),Ie)||K_(ee,yt.sum(me,be),_e);)ce.RTL?be.translate(-_e,2*_e):be.translate(_e,2*_e);ee.moveTo(yt.sum(se,be))},Y_=function(ee,se){return se.some(ce=>1>=Math.abs(ce.x-ee.x)&&1>=Math.abs(ce.y-ee.y))},K_=function(ee,se,ce){return ee.getConnections_(!1).some(_e=>!!_e.closest(ce,se).connection)},vr=function(ee,se,ce){const _e=ce.getBoundingRectangle(),me=_e.right-_e.left,be=mr(se.top,_e.top,se.top+se.height-(_e.bottom-_e.top))-_e.top;let Ie=se.left;return se=se.left+se.width-me,ee.RTL?Ie=Math.min(se,Ie):se=Math.max(Ie,se),(ee=mr(Ie,_e.left,se)-_e.left)||be?(ce.moveBy(ee,be,["inbounds"]),!0):!1},Kc=function(ee){return se=>{var ce=ee.getMetricsManager();if(ce.hasFixedEdges()&&!ee.isDragging()){var _e;if(mp.includes((_e=se.type)!=null?_e:"")){_e=ce.getScrollMetrics(!0);const me=q_(ee,se);me&&(ce=ne.getGroup$$module$build$src$core$events$utils()||!1,ne.setGroup$$module$build$src$core$events$utils(se.group),vr(ee,_e,me)&&!se.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),ne.setGroup$$module$build$src$core$events$utils(ce))}else ze(se)&&se.scale&&se.oldScale&&se.scale>se.oldScale&&Dl(ee)}}},q_=function(ee,se){let ce=null;switch(se.type){case it.BLOCK_CREATE:case it.BLOCK_MOVE:(ce=ee.getBlockById(se.blockId))&&(ce=ce.getRootBlock());break;case it.COMMENT_CREATE:case it.COMMENT_MOVE:case it.COMMENT_RESIZE:ce=ee.getCommentById(se.commentId)}return ce},Dl=function(ee){var se=ee.getMetricsManager();if(se.hasFixedEdges()&&!ee.isDragging()){se=se.getScrollMetrics(!0);var ce=ee.getTopBoundedElements();for(let _e=0,me;me=ce[_e];_e++)vr(ee,se,me)}},Tn=function(ee){return ee.isDeletable!==void 0&&ee.dispose!==void 0&&ee.setDeleteStyle!==void 0},J_=function(ee){const se=ee.toCopyData();Bh=se;let ce;return Fh=(ce=ee.workspace)!=null?ce:null,se},Es=function(ee,se,ce){return ee&&se?qc(ee,se,ce):Bh&&Fh?qc(Bh,Fh):null},qc=function(ee,se,ce){let _e;se=(_e=se.getRootWorkspace())!=null?_e:se;let me,be;return(be=(me=ue($t.PASTER,ee.paster,!1))==null?void 0:me.paste(ee,se,ce))!=null?be:null},Z_=function(ee){const se=ee.toCopyData();return se?Es(se,ee.workspace):null},ho=function(ee){return ee.toCopyData!==void 0},Jc=function(){Qt.registry.register({name:Yn.ESCAPE,preconditionFn(ee){return!ee.options.readOnly},callback(ee){return ee.hideChaff(),!0},keyCodes:[Vt.ESC]})},Zc=function(){Qt.registry.register({name:Yn.DELETE,preconditionFn(ee){const se=Et();return!ee.options.readOnly&&se!=null&&Tn(se)&&se.isDeletable()&&!cs.inProgress()},callback(ee,se){return se.preventDefault(),ee=Et(),ee instanceof vn?ee.checkAndDelete():Tn(ee)&&ee.isDeletable()&&(ne.setGroup$$module$build$src$core$events$utils(!0),ee.dispose(),ne.setGroup$$module$build$src$core$events$utils(!1)),!0},keyCodes:[Vt.DELETE,Vt.BACKSPACE]})},Qc=function(){const ee=Qt.registry.createSerializedKey(Vt.C,[Vt.CTRL]),se=Qt.registry.createSerializedKey(Vt.C,[Vt.ALT]),ce=Qt.registry.createSerializedKey(Vt.C,[Vt.META]);Qt.registry.register({name:Yn.COPY,preconditionFn(_e){const me=Et();return!_e.options.readOnly&&!cs.inProgress()&&me!=null&&Tn(me)&&me.isDeletable()&&zs(me)&&me.isMovable()&&ho(me)},callback(_e,me){return me.preventDefault(),_e.hideChaff(),me=Et(),!me||!ho(me)?!1:(As=me.toCopyData(),Ls=_e,jr=zs(me)?me.getRelativeToSurfaceXY():null,!!As)},keyCodes:[ee,se,ce]})},eu=function(){const ee=Qt.registry.createSerializedKey(Vt.X,[Vt.CTRL]),se=Qt.registry.createSerializedKey(Vt.X,[Vt.ALT]),ce=Qt.registry.createSerializedKey(Vt.X,[Vt.META]);Qt.registry.register({name:Yn.CUT,preconditionFn(_e){const me=Et();return!_e.options.readOnly&&!cs.inProgress()&&me!=null&&Tn(me)&&me.isDeletable()&&zs(me)&&me.isMovable()&&!me.workspace.isFlyout},callback(_e){const me=Et();return me instanceof vn?(As=me.toCopyData(),Ls=_e,jr=me.getRelativeToSurfaceXY(),me.checkAndDelete(),!0):Tn(me)&&me.isDeletable()&&ho(me)?(As=me.toCopyData(),Ls=_e,jr=zs(me)?me.getRelativeToSurfaceXY():null,me.dispose(),!0):!1},keyCodes:[ee,se,ce]})},tu=function(){const ee=Qt.registry.createSerializedKey(Vt.V,[Vt.CTRL]),se=Qt.registry.createSerializedKey(Vt.V,[Vt.ALT]),ce=Qt.registry.createSerializedKey(Vt.V,[Vt.META]);Qt.registry.register({name:Yn.PASTE,preconditionFn(_e){return!_e.options.readOnly&&!cs.inProgress()},callback(){if(!As||!Ls)return!1;if(!jr)return!!Es(As,Ls);const{left:_e,top:me,width:be,height:Ie}=Ls.getMetricsManager().getViewMetrics(!0);if(new ri(me,me+Ie,_e,_e+be).contains(jr.x,jr.y))return!!Es(As,Ls);const De=new yt(_e+be/2,me+Ie/2);return!!Es(As,Ls,De)},keyCodes:[ee,se,ce]})},iu=function(){const ee=Qt.registry.createSerializedKey(Vt.Z,[Vt.CTRL]),se=Qt.registry.createSerializedKey(Vt.Z,[Vt.ALT]),ce=Qt.registry.createSerializedKey(Vt.Z,[Vt.META]);Qt.registry.register({name:Yn.UNDO,preconditionFn(_e){return!_e.options.readOnly&&!cs.inProgress()},callback(_e,me){return _e.hideChaff(),_e.undo(!1),me.preventDefault(),!0},keyCodes:[ee,se,ce]})},nu=function(){const ee=Qt.registry.createSerializedKey(Vt.Z,[Vt.SHIFT,Vt.CTRL]),se=Qt.registry.createSerializedKey(Vt.Z,[Vt.SHIFT,Vt.ALT]),ce=Qt.registry.createSerializedKey(Vt.Z,[Vt.SHIFT,Vt.META]),_e=Qt.registry.createSerializedKey(Vt.Y,[Vt.CTRL]);Qt.registry.register({name:Yn.REDO,preconditionFn(me){return!cs.inProgress()&&!me.options.readOnly},callback(me,be){return me.hideChaff(),me.undo(!0),be.preventDefault(),!0},keyCodes:[ee,se,ce,_e]})},su=function(){Jc(),Zc(),Qc(),eu(),tu(),iu(),nu()},ru=function(ee){const se=ee.saveState();return ee.getParameters().length&&(se.parameters=ee.getParameters().map(ce=>ce.saveState())),se},ou=function(ee,se,ce,_e){if(ee=ee.loadState(ce,_e),!ce.parameters)return ee;for(const[me,be]of ce.parameters.entries())ee.insertParameter(se.loadState(be,_e),me);return ee},Q_=function(ee){const se=Object.create(null),ce=pe($t.SERIALIZER,!0);for(const _e in ce){let me;const be=(me=ce[_e])==null?void 0:me.save(ee);be&&(se[_e]=be)}return se},ep=function(ee,se,{recordUndo:ce=!1}={}){var _e=pe($t.SERIALIZER,!0);if(_e){_e=Object.entries(_e).sort((be,Ie)=>Ie[1].priority-be[1].priority);var me=Me();ne.setRecordUndo$$module$build$src$core$events$utils(ce),(ce=ne.getGroup$$module$build$src$core$events$utils())||ne.setGroup$$module$build$src$core$events$utils(!0),Ii(),se instanceof kn&&se.setResizesEnabled(!1);for(const[,be]of _e.reverse()){let Ie;(Ie=be)==null||Ie.clear(se)}for(const[be,Ie]of _e.reverse())if(ee[be]){let De;(De=Ie)==null||De.load(ee[be],se)}se instanceof kn&&se.setResizesEnabled(!0),Hi(),Ae(new(Le(it.FINISHED_LOADING))(se)),ne.setGroup$$module$build$src$core$events$utils(ce),ne.setRecordUndo$$module$build$src$core$events$utils(me)}},tp=function(ee,se){let ce=null;ce=typeof ee=="string"?document.getElementById(ee)||document.querySelector(ee):ee;var _e;if(!document.contains(ce)&&document!==((_e=ce)==null?void 0:_e.ownerDocument))throw Error("Error: container is not in current document");ee=new yn(se||{}),_e=document.createElement("div"),Ct(_e,"injectionDiv"),se!=null&&se.rtl&&Ct(_e,"blocklyRTL"),_e.tabIndex=0,Ri(_e,Mi.LABEL,ne.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),ce.appendChild(_e),se=ip(_e,ee);const me=np(_e,se,ee);return sp(me),Pt(me),Bt(me),_e.addEventListener("focusin",function(){Pt(me)}),Nt(_e,"keydown",null,rp),me},ip=function(ee,se){ee.setAttribute("dir","LTR"),vi(se.hasCss,se.pathToMedia),ee=lt(Ye.SVG,{xmlns:mo,"xmlns:html":zn,"xmlns:xlink":hn,version:"1.1",class:"blocklySvg",tabindex:"0"},ee);const ce=lt(Ye.DEFS,{},ee),_e=String(Math.random()).substring(2);return se.gridPattern=ph.createDom(_e,se.gridOptions,ce),ee},np=function(ee,se,ce){ce.parentWorkspace=null,ce=new kn(ce);const _e=ce.options;ce.scale=_e.zoomOptions.startScale,se.appendChild(ce.createDom("blocklyMainBackground",ee));var me=ce.getRenderer().getClassName();return me&&Ct(ee,me),(me=ce.getTheme().getClassName())&&Ct(ee,me),!_e.hasCategories&&_e.languageTree&&(ee=ce.addFlyout(Ye.SVG),Tt(ee,se)),_e.hasTrashcan&&ce.addTrashcan(),_e.zoomOptions&&_e.zoomOptions.controls&&ce.addZoomControls(),ce.getThemeManager().subscribe(se,"workspaceBackgroundColour","background-color"),ce.translate(0,0),ce.addChangeListener(Kc(ce)),Bt(ce),mc(),Va(),ac(),ce},sp=function(ee){const se=ee.options;var ce=ee.getParentSvg();if(Nt(ce.parentNode,"contextmenu",null,function(_e){zi(_e)||_e.preventDefault()}),ce=Nt(window,"resize",null,function(){ts(),ee.hideComponents(!0),nc(),Ec(),Bt(ee),Dl(ee)}),ee.setResizeHandlerWrapper(ce),op(),se.languageTree){ce=ee.getToolbox();const _e=ee.getFlyout(!0);ce?ce.init():_e&&(_e.init(ee),_e.show(se.languageTree),typeof _e.scrollToStart=="function"&&_e.scrollToStart())}se.hasTrashcan&&ee.trashcan.init(),se.zoomOptions&&se.zoomOptions.controls&&ee.zoomControls_.init(),se.moveOptions&&se.moveOptions.scrollbars?(ee.scrollbar=new Hh(ee,se.moveOptions.scrollbars===!0||!!se.moveOptions.scrollbars.horizontal,se.moveOptions.scrollbars===!0||!!se.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),ee.scrollbar.resize()):ee.setMetrics({x:.5,y:.5}),se.hasSounds&&lp(se.pathToMedia,ee)},rp=function(ee){const se=bt();se&&!(zi(ee)||se.rendered&&!se.isVisible())&&Qt.registry.onKeyDown(se,ee)},op=function(){uf||(Nt(document,"scroll",null,function(){const ee=Ot();for(let se=0,ce;ce=ee[se];se++)ce instanceof kn&&ce.updateInverseScreenCTM()}),Jt(document,"touchend",null,ki),Jt(document,"touchcancel",null,ki)),uf=!0},lp=function(ee,se){function ce(){for(;me.length;){const be=me.pop();be&&Yt(be)}_e.preload()}const _e=se.getAudioManager();_e.load([ee+"click.mp3",ee+"click.wav",ee+"click.ogg"],"click"),_e.load([ee+"disconnect.wav",ee+"disconnect.mp3",ee+"disconnect.ogg"],"disconnect"),_e.load([ee+"delete.mp3",ee+"delete.ogg",ee+"delete.wav"],"delete");const me=[];me.push(Nt(document,"pointermove",null,ce,!0)),me.push(Nt(document,"touchstart",null,ce,!0))},lu=function(){Wt.registry.register({displayText(){return ne.Msg$$module$build$src$core$msg.UNDO},preconditionFn(ee){return 0<ee.workspace.getUndoStack().length?"enabled":"disabled"},callback(ee){ee.workspace.undo(!1)},scopeType:Wt.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},au=function(){Wt.registry.register({displayText(){return ne.Msg$$module$build$src$core$msg.REDO},preconditionFn(ee){return 0<ee.workspace.getRedoStack().length?"enabled":"disabled"},callback(ee){ee.workspace.undo(!0)},scopeType:Wt.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},cu=function(){Wt.registry.register({displayText(){return ne.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(ee){return ee.workspace.isMovable()?1<ee.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(ee){ee.workspace.cleanUp()},scopeType:Wt.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},uu=function(ee,se){function ce(be){me--,be.setCollapsed(ee),me===0&&ne.setGroup$$module$build$src$core$events$utils(!1)}let _e=0,me=0;ne.setGroup$$module$build$src$core$events$utils(!0);for(let be=0;be<se.length;be++){let Ie=se[be];for(;Ie;)me++,setTimeout(ce.bind(null,Ie),_e),Ie=Ie.getNextBlock(),_e+=10}},hu=function(){Wt.registry.register({displayText(){return ne.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(ee){if(ee.workspace.options.collapse){ee=ee.workspace.getTopBlocks(!1);for(let se=0;se<ee.length;se++){let ce=ee[se];for(;ce;){if(!ce.isCollapsed())return"enabled";ce=ce.getNextBlock()}}return"disabled"}return"hidden"},callback(ee){uu(!0,ee.workspace.getTopBlocks(!0))},scopeType:Wt.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},du=function(){Wt.registry.register({displayText(){return ne.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(ee){if(ee.workspace.options.collapse){ee=ee.workspace.getTopBlocks(!1);for(let se=0;se<ee.length;se++){let ce=ee[se];for(;ce;){if(ce.isCollapsed())return"enabled";ce=ce.getNextBlock()}}return"disabled"}return"hidden"},callback(ee){uu(!1,ee.workspace.getTopBlocks(!0))},scopeType:Wt.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},_u=function(ee,se){if(ee.isDeletable())Array.prototype.push.apply(se,ee.getDescendants(!1));else{ee=ee.getChildren(!1);for(let ce=0;ce<ee.length;ce++)_u(ee[ce],se)}},Pl=function(ee){const se=[];ee=ee.getTopBlocks(!0);for(let ce=0;ce<ee.length;ce++)_u(ee[ce],se);return se},_o=function(ee,se){se?ne.setGroup$$module$build$src$core$events$utils(se):(ne.setGroup$$module$build$src$core$events$utils(!0),se=ne.getGroup$$module$build$src$core$events$utils());const ce=ee.shift();ce&&(ce.isDeadOrDying()?_o(ee,se):(ce.dispose(!1,!0),setTimeout(_o,10,ee,se))),ne.setGroup$$module$build$src$core$events$utils(!1)},pu=function(){Wt.registry.register({displayText(ee){return ee.workspace?(ee=Pl(ee.workspace).length,ee===1?ne.Msg$$module$build$src$core$msg.DELETE_BLOCK:ne.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${ee}`)):""},preconditionFn(ee){return ee.workspace&&0<Pl(ee.workspace).length?"enabled":"disabled"},callback(ee){if(ee.workspace){ee.workspace.cancelCurrentGesture();var se=Pl(ee.workspace);2>se.length?_o(se):ll(ne.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(se.length)),function(ce){ce&&_o(se)})}},scopeType:Wt.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},ap=function(){lu(),au(),cu(),hu(),du(),pu()},gu=function(){Wt.registry.register({displayText(){return ne.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(ee){return ee=ee.block,!ee.isInFlyout&&ee.isDeletable()&&ee.isMovable()?ee.isDuplicatable()?"enabled":"disabled":"hidden"},callback(ee){if(ee.block){var se=ee.block.toCopyData();se&&Es(se,ee.block.workspace)}},scopeType:Wt.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},fu=function(){Wt.registry.register({displayText(ee){return ee.block.hasIcon(ds.TYPE)?ne.Msg$$module$build$src$core$msg.REMOVE_COMMENT:ne.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(ee){return ee=ee.block,!ee.isInFlyout&&ee.workspace.options.comments&&!ee.isCollapsed()&&ee.isEditable()?"enabled":"hidden"},callback(ee){ee=ee.block,ee.hasIcon(ds.TYPE)?ee.setCommentText(null):ee.setCommentText("")},scopeType:Wt.ScopeType.BLOCK,id:"blockComment",weight:2})},mu=function(){Wt.registry.register({displayText(ee){return ee.block.getInputsInline()?ne.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:ne.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(ee){if(ee=ee.block,!ee.isInFlyout&&ee.isMovable()&&!ee.isCollapsed()){for(let se=1;se<ee.inputList.length;se++)if(!(ee.inputList[se-1]instanceof Oa||ee.inputList[se]instanceof Oa))return"enabled"}return"hidden"},callback(ee){ee.block.setInputsInline(!ee.block.getInputsInline())},scopeType:Wt.ScopeType.BLOCK,id:"blockInline",weight:3})},$u=function(){Wt.registry.register({displayText(ee){return ee.block.isCollapsed()?ne.Msg$$module$build$src$core$msg.EXPAND_BLOCK:ne.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(ee){return ee=ee.block,!ee.isInFlyout&&ee.isMovable()&&ee.workspace.options.collapse?"enabled":"hidden"},callback(ee){ee.block.setCollapsed(!ee.block.isCollapsed())},scopeType:Wt.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},Tu=function(){Wt.registry.register({displayText(ee){return ee.block.hasDisabledReason(Ji)?ne.Msg$$module$build$src$core$msg.ENABLE_BLOCK:ne.Msg$$module$build$src$core$msg.DISABLE_BLOCK},preconditionFn(ee){if(ee=ee.block,!ee.isInFlyout&&ee.workspace.options.disable&&ee.isEditable()){var se=ee.getDisabledReasons();return se=se.size>(se.has(Ji)?1:0),ee.getInheritedDisabled()||se?"disabled":"enabled"}return"hidden"},callback(ee){ee=ee.block;const se=ne.getGroup$$module$build$src$core$events$utils();se||ne.setGroup$$module$build$src$core$events$utils(!0),ee.setDisabledReason(!ee.hasDisabledReason(Ji),Ji),ne.setGroup$$module$build$src$core$events$utils(se)},scopeType:Wt.ScopeType.BLOCK,id:"blockDisable",weight:5})},bu=function(){Wt.registry.register({displayText(ee){var se=ee.block;return ee=se.getDescendants(!1).length,(se=se.getNextBlock())&&(ee-=se.getDescendants(!1).length),ee===1?ne.Msg$$module$build$src$core$msg.DELETE_BLOCK:ne.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${ee}`)},preconditionFn(ee){return!ee.block.isInFlyout&&ee.block.isDeletable()?"enabled":"hidden"},callback(ee){ee.block&&ee.block.checkAndDelete()},scopeType:Wt.ScopeType.BLOCK,id:"blockDelete",weight:6})},Eu=function(){Wt.registry.register({displayText(){return ne.Msg$$module$build$src$core$msg.HELP},preconditionFn(ee){return ee=ee.block,(typeof ee.helpUrl=="function"?ee.helpUrl():ee.helpUrl)?"enabled":"hidden"},callback(ee){ee.block.showHelp()},scopeType:Wt.ScopeType.BLOCK,id:"blockHelp",weight:7})},yu=function(){Wt.registry.register({displayText:()=>ne.Msg$$module$build$src$core$msg.REMOVE_COMMENT,preconditionFn(ee){let se;return(se=ee.comment)!=null&&se.isDeletable()?"enabled":"hidden"},callback(ee){ne.setGroup$$module$build$src$core$events$utils(!0);let se;(se=ee.comment)==null||se.dispose(),ne.setGroup$$module$build$src$core$events$utils(!1)},scopeType:Wt.ScopeType.COMMENT,id:"commentDelete",weight:6})},Su=function(){Wt.registry.register({displayText:()=>ne.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,preconditionFn(ee){let se;return(se=ee.comment)!=null&&se.isMovable()?"enabled":"hidden"},callback(ee){if(ee.comment){var se=ee.comment.toCopyData();se&&Es(se,ee.comment.workspace)}},scopeType:Wt.ScopeType.COMMENT,id:"commentDuplicate",weight:1})},Cu=function(){Wt.registry.register({displayText:()=>ne.Msg$$module$build$src$core$msg.ADD_COMMENT,preconditionFn:()=>"enabled",callback:(ee,se)=>{if(ee=ee.workspace){ne.setGroup$$module$build$src$core$events$utils(!0);var ce=new aa(ee);ce.setText(ne.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT),ce.moveTo(cp(new yt(se.clientX,se.clientY),ee)),ne.setSelected$$module$build$src$core$common(ce),ne.setGroup$$module$build$src$core$events$utils(!1)}},scopeType:Wt.ScopeType.WORKSPACE,id:"commentCreate",weight:8})},cp=function(ee,se){var ce=se.getInjectionDiv().getBoundingClientRect();return ee=new yt(ee.x-ce.left,ee.y-ce.top),ce=se.getOriginOffsetInPixels(),ee=yt.difference(ee,ce),ee.scale(1/se.scale),ee},up=function(){gu(),fu(),mu(),$u(),Tu(),bu(),Eu()},hp=function(){Su(),yu(),Cu()},ku=function(){ap(),up()},dp=function(ee){return ee.paste!==void 0},_p=function(ee){return ee.getSvgRoot!==void 0},pp=function(ee){return typeof ee.id=="string"&&ee.workspace!==void 0&&ee.select!==void 0&&ee.unselect!==void 0},gp=function(ee){return ee.isSelectable()},fp=function(ee){bt().hideChaff(ee)},mt=mt||{},mt.scope={},mt.ASSUME_ES5=!1,mt.ASSUME_NO_NATIVE_MAP=!1,mt.ASSUME_NO_NATIVE_SET=!1,mt.SIMPLE_FROUND_POLYFILL=!1,mt.ISOLATE_POLYFILLS=!1,mt.FORCE_POLYFILL_PROMISE=!1,mt.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,mt.defineProperty=mt.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(ee,se,ce){return ee==Array.prototype||ee==Object.prototype||(ee[se]=ce.value),ee},mt.getGlobal=function(ee){ee=[typeof globalThis=="object"&&globalThis,ee,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var se=0;se<ee.length;++se){var ce=ee[se];if(ce&&ce.Math==Math)return ce}throw Error("Cannot find global object")},mt.global=mt.getGlobal(this),mt.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",mt.TRUST_ES6_POLYFILLS=!mt.ISOLATE_POLYFILLS||mt.IS_SYMBOL_NATIVE,mt.polyfills={},mt.propertyToPolyfillSymbol={},mt.POLYFILL_PREFIX="$jscp$",mt.polyfill=function(ee,se,ce,_e){se&&(mt.ISOLATE_POLYFILLS?mt.polyfillIsolated(ee,se,ce,_e):mt.polyfillUnisolated(ee,se,ce,_e))},mt.polyfillUnisolated=function(ee,se,ce,_e){for(ce=mt.global,ee=ee.split("."),_e=0;_e<ee.length-1;_e++){var me=ee[_e];if(!(me in ce))return;ce=ce[me]}ee=ee[ee.length-1],_e=ce[ee],se=se(_e),se!=_e&&se!=null&&mt.defineProperty(ce,ee,{configurable:!0,writable:!0,value:se})},mt.polyfillIsolated=function(ee,se,ce,_e){var me=ee.split(".");ee=me.length===1,_e=me[0],_e=!ee&&_e in mt.polyfills?mt.polyfills:mt.global;for(var be=0;be<me.length-1;be++){var Ie=me[be];if(!(Ie in _e))return;_e=_e[Ie]}me=me[me.length-1],ce=mt.IS_SYMBOL_NATIVE&&ce==="es6"?_e[me]:null,se=se(ce),se!=null&&(ee?mt.defineProperty(mt.polyfills,me,{configurable:!0,writable:!0,value:se}):se!==ce&&(mt.propertyToPolyfillSymbol[me]===void 0&&(ce=1e9*Math.random()>>>0,mt.propertyToPolyfillSymbol[me]=mt.IS_SYMBOL_NATIVE?mt.global.Symbol(me):mt.POLYFILL_PREFIX+ce+"$"+me),mt.defineProperty(_e,mt.propertyToPolyfillSymbol[me],{configurable:!0,writable:!0,value:se})))},mt.underscoreProtoCanBeSet=function(){var ee={a:!0},se={};try{return se.__proto__=ee,se.a}catch{}return!1},mt.setPrototypeOf=mt.TRUST_ES6_POLYFILLS&&typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf:mt.underscoreProtoCanBeSet()?function(ee,se){if(ee.__proto__=se,ee.__proto__!==se)throw new TypeError(ee+" is not extensible");return ee}:null,mt.arrayIteratorImpl=function(ee){var se=0;return function(){return se<ee.length?{done:!1,value:ee[se++]}:{done:!0}}},mt.arrayIterator=function(ee){return{next:mt.arrayIteratorImpl(ee)}},mt.makeIterator=function(ee){var se=typeof Symbol<"u"&&Symbol.iterator&&ee[Symbol.iterator];if(se)return se.call(ee);if(typeof ee.length=="number")return mt.arrayIterator(ee);throw Error(String(ee)+" is not an iterable or ArrayLike")},mt.generator={},mt.generator.ensureIteratorResultIsObject_=function(ee){if(!(ee instanceof Object))throw new TypeError("Iterator result "+ee+" is not an object")},mt.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},mt.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},mt.generator.Context.prototype.stop_=function(){this.isRunning_=!1},mt.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},mt.generator.Context.prototype.next_=function(ee){this.yieldResult=ee},mt.generator.Context.prototype.throw_=function(ee){this.abruptCompletion_={exception:ee,isException:!0},this.jumpToErrorHandler_()},mt.generator.Context.prototype.return=function(ee){this.abruptCompletion_={return:ee},this.nextAddress=this.finallyAddress_},mt.generator.Context.prototype.jumpThroughFinallyBlocks=function(ee){this.abruptCompletion_={jumpTo:ee},this.nextAddress=this.finallyAddress_},mt.generator.Context.prototype.yield=function(ee,se){return this.nextAddress=se,{value:ee}},mt.generator.Context.prototype.yieldAll=function(ee,se){ee=mt.makeIterator(ee);var ce=ee.next();if(mt.generator.ensureIteratorResultIsObject_(ce),ce.done)this.yieldResult=ce.value,this.nextAddress=se;else return this.yieldAllIterator_=ee,this.yield(ce.value,se)},mt.generator.Context.prototype.jumpTo=function(ee){this.nextAddress=ee},mt.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},mt.generator.Context.prototype.setCatchFinallyBlocks=function(ee,se){this.catchAddress_=ee,se!=null&&(this.finallyAddress_=se)},mt.generator.Context.prototype.setFinallyBlock=function(ee){this.catchAddress_=0,this.finallyAddress_=ee||0},mt.generator.Context.prototype.leaveTryBlock=function(ee,se){this.nextAddress=ee,this.catchAddress_=se||0},mt.generator.Context.prototype.enterCatchBlock=function(ee){return this.catchAddress_=ee||0,ee=this.abruptCompletion_.exception,this.abruptCompletion_=null,ee},mt.generator.Context.prototype.enterFinallyBlock=function(ee,se,ce){ce?this.finallyContexts_[ce]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=ee||0,this.finallyAddress_=se||0},mt.generator.Context.prototype.leaveFinallyBlock=function(ee,se){if(se=this.finallyContexts_.splice(se||0)[0],se=this.abruptCompletion_=this.abruptCompletion_||se){if(se.isException)return this.jumpToErrorHandler_();se.jumpTo!=null&&this.finallyAddress_<se.jumpTo?(this.nextAddress=se.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=ee},mt.generator.Context.prototype.forIn=function(ee){return new mt.generator.Context.PropertyIterator(ee)},mt.generator.Context.PropertyIterator=function(ee){this.object_=ee,this.properties_=[];for(var se in ee)this.properties_.push(se);this.properties_.reverse()},mt.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var ee=this.properties_.pop();if(ee in this.object_)return ee}return null},mt.generator.Engine_=function(ee){this.context_=new mt.generator.Context,this.program_=ee},mt.generator.Engine_.prototype.next_=function(ee){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,ee,this.context_.next_):(this.context_.next_(ee),this.nextStep_())},mt.generator.Engine_.prototype.return_=function(ee){this.context_.start_();var se=this.context_.yieldAllIterator_;return se?this.yieldAllStep_("return"in se?se.return:function(ce){return{value:ce,done:!0}},ee,this.context_.return):(this.context_.return(ee),this.nextStep_())},mt.generator.Engine_.prototype.throw_=function(ee){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,ee,this.context_.next_):(this.context_.throw_(ee),this.nextStep_())},mt.generator.Engine_.prototype.yieldAllStep_=function(ee,se,ce){try{var _e=ee.call(this.context_.yieldAllIterator_,se);if(mt.generator.ensureIteratorResultIsObject_(_e),!_e.done)return this.context_.stop_(),_e;var me=_e.value}catch(be){return this.context_.yieldAllIterator_=null,this.context_.throw_(be),this.nextStep_()}return this.context_.yieldAllIterator_=null,ce.call(this.context_,me),this.nextStep_()},mt.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var ee=this.program_(this.context_);if(ee)return this.context_.stop_(),{value:ee.value,done:!1}}catch(se){this.context_.yieldResult=void 0,this.context_.throw_(se)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(ee=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,ee.isException)throw ee.exception;return{value:ee.return,done:!0}}return{value:void 0,done:!0}},mt.generator.Generator_=function(ee){this.next=function(se){return ee.next_(se)},this.throw=function(se){return ee.throw_(se)},this.return=function(se){return ee.return_(se)},this[Symbol.iterator]=function(){return this}},mt.generator.createGenerator=function(ee,se){return se=new mt.generator.Generator_(new mt.generator.Engine_(se)),mt.setPrototypeOf&&ee.prototype&&mt.setPrototypeOf(se,ee.prototype),se},mt.asyncExecutePromiseGenerator=function(ee){function se(_e){return ee.next(_e)}function ce(_e){return ee.throw(_e)}return new Promise(function(_e,me){function be(Ie){Ie.done?_e(Ie.value):Promise.resolve(Ie.value).then(se,ce).then(be,me)}be(ee.next())})},mt.asyncExecutePromiseGeneratorFunction=function(ee){return mt.asyncExecutePromiseGenerator(ee())},mt.asyncExecutePromiseGeneratorProgram=function(ee){return mt.asyncExecutePromiseGenerator(new mt.generator.Generator_(new mt.generator.Engine_(ee)))},mt.polyfill("globalThis",function(ee){return ee||mt.global},"es_2020","es3"),mt.polyfill("Array.prototype.includes",function(ee){return ee||function(se,ce){var _e=this;_e instanceof String&&(_e=String(_e));var me=_e.length;for(ce=ce||0,0>ce&&(ce=Math.max(ce+me,0));ce<me;ce++){var be=_e[ce];if(be===se||Object.is(be,se))return!0}return!1}},"es7","es3"),mt.initSymbol=function(){},mt.iteratorPrototype=function(ee){return ee={next:ee},ee[Symbol.iterator]=function(){return this},ee},mt.iteratorFromArray=function(ee,se){ee instanceof String&&(ee+="");var ce=0,_e=!1,me={next:function(){if(!_e&&ce<ee.length){var be=ce++;return{value:se(be,ee[be]),done:!1}}return _e=!0,{done:!0,value:void 0}}};return me[Symbol.iterator]=function(){return me},me},mt.polyfill("Array.prototype.values",function(ee){return ee||function(){return mt.iteratorFromArray(this,function(se,ce){return ce})}},"es8","es3"),mt.polyfill("Array.prototype.flat",function(ee){return ee||function(se){se=se===void 0?1:se;var ce=[];return Array.prototype.forEach.call(this,function(_e){Array.isArray(_e)&&0<se?(_e=Array.prototype.flat.call(_e,se-1),ce.push.apply(ce,_e)):ce.push(_e)}),ce}},"es9","es5"),mt.polyfill("Array.prototype.flatMap",function(ee){return ee||function(se,ce){var _e=[];return Array.prototype.forEach.call(this,function(me,be){me=se.call(ce,me,be,this),Array.isArray(me)?_e.push.apply(_e,me):_e.push(me)}),_e}},"es9","es5"),mt.owns=function(ee,se){return Object.prototype.hasOwnProperty.call(ee,se)},mt.polyfill("Object.entries",function(ee){return ee||function(se){var ce=[],_e;for(_e in se)mt.owns(se,_e)&&ce.push([_e,se[_e]]);return ce}},"es8","es3"),mt.polyfill("Object.values",function(ee){return ee||function(se){var ce=[],_e;for(_e in se)mt.owns(se,_e)&&ce.push(se[_e]);return ce}},"es8","es3");var ys=Object.create(null),om={typeMap:ys},Bl=Object.create(null),Vn="default",$t=class{constructor(ee){this.name=ee}toString(){return this.name}};$t.CONNECTION_CHECKER=new $t("connectionChecker"),$t.CONNECTION_PREVIEWER=new $t("connectionPreviewer"),$t.CURSOR=new $t("cursor"),$t.EVENT=new $t("event"),$t.FIELD=new $t("field"),$t.INPUT=new $t("input"),$t.RENDERER=new $t("renderer"),$t.TOOLBOX=new $t("toolbox"),$t.THEME=new $t("theme"),$t.TOOLBOX_ITEM=new $t("toolboxItem"),$t.FLYOUTS_VERTICAL_TOOLBOX=new $t("flyoutsVerticalToolbox"),$t.FLYOUTS_HORIZONTAL_TOOLBOX=new $t("flyoutsHorizontalToolbox"),$t.METRICS_MANAGER=new $t("metricsManager"),$t.BLOCK_DRAGGER=new $t("blockDragger"),$t.SERIALIZER=new $t("serializer"),$t.ICON=new $t("icon"),$t.PASTER=new $t("paster");var ns={DEFAULT:Vn,TEST_ONLY:om};ns.Type=$t,ns.getAllItems=pe,ns.getClass=de,ns.getClassFromOptions=fe,ns.getObject=ue,ns.hasItem=he,ns.register=re,ns.unregister=le;var sn=Object.create(null),it;(function(ee){ee.BLOCK_CREATE="create",ee.BLOCK_DELETE="delete",ee.BLOCK_CHANGE="change",ee.BLOCK_FIELD_INTERMEDIATE_CHANGE="block_field_intermediate_change",ee.BLOCK_MOVE="move",ee.VAR_CREATE="var_create",ee.VAR_DELETE="var_delete",ee.VAR_RENAME="var_rename",ee.UI="ui",ee.BLOCK_DRAG="drag",ee.SELECTED="selected",ee.CLICK="click",ee.MARKER_MOVE="marker_move",ee.BUBBLE_OPEN="bubble_open",ee.TRASHCAN_OPEN="trashcan_open",ee.TOOLBOX_ITEM_SELECT="toolbox_item_select",ee.THEME_CHANGE="theme_change",ee.VIEWPORT_CHANGE="viewport_change",ee.COMMENT_CREATE="comment_create",ee.COMMENT_DELETE="comment_delete",ee.COMMENT_CHANGE="comment_change",ee.COMMENT_MOVE="comment_move",ee.COMMENT_RESIZE="comment_resize",ee.COMMENT_DRAG="comment_drag",ee.COMMENT_COLLAPSE="comment_collapse",ee.FINISHED_LOADING="finished_loading"})(it||(it={}));var mp=[it.BLOCK_CREATE,it.BLOCK_MOVE,it.COMMENT_CREATE,it.COMMENT_MOVE],$p=new Set,Tp={};Tp.warn=ge;var bp="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Ep={genUid:()=>{const ee=bp.length,se=[];for(let ce=0;20>ce;ce++)se[ce]=bp.charAt(Math.random()*ee);return se.join("")}},lm=0,vu={TEST_ONLY:Ep};vu.genUid=Te,vu.getNextUniqueId=$e;var yp="",po=!0,Iu=0,Ou="ORPHANED_BLOCK",ss=[],Sp={FIRE_QUEUE:ss,enqueueEvent:Pe,fireNow:ht,fireInternal:Qe,setGroupInternal:Je};ne.disable$$module$build$src$core$events$utils,ne.enable$$module$build$src$core$events$utils,ne.getGroup$$module$build$src$core$events$utils,ne.setGroup$$module$build$src$core$events$utils,ne.setRecordUndo$$module$build$src$core$events$utils;var go=Object.create(null),Cp,Xs=null,kp,fo=[],vp={defineBlocksWithJsonArrayInternal:mi},Wi={TEST_ONLY:vp};Wi.createBlockDefinitionsFromJsonArray=ne.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,Wi.defineBlocks=ne.defineBlocks$$module$build$src$core$common,Wi.defineBlocksWithJsonArray=zt,Wi.draggingConnections=fo,Wi.getAllWorkspaces=Ot,Wi.getBlockTypeCounts=Ft,Wi.getMainWorkspace=bt,Wi.getParentContainer=Lt,Wi.getSelected=Et,Wi.getWorkspaceById=pt,Wi.registerWorkspace=Ht,Wi.setMainWorkspace=Pt,Wi.setParentContainer=Ut,Wi.setSelected=ne.setSelected$$module$build$src$core$common,Wi.svgResize=Bt,Wi.unregisterWorkpace=Ze;var Ir=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=ne.getGroup$$module$build$src$core$events$utils(),this.recordUndo=Me()}toJson(){return{type:this.type,group:this.group}}static fromJson(ee,se,ce){return ce.isBlank=!1,ce.group=ee.group||"",ce.workspaceId=se.id,ce}isNull(){return!1}run(ee){}getEventWorkspace_(){let ee;if(this.workspaceId&&(ee=pt(this.workspaceId)),!ee)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return ee}},An=class extends Ir{constructor(ee){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof ee>"u",this.workspaceId=ee||""}},Ru=class extends An{constructor(ee,se,ce){se=ee?ee.workspace.id:se,se===null&&(se=void 0),super(se),this.type=it.CLICK,this.blockId=ee?ee.id:void 0,this.targetType=ce}toJson(){const ee=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return ee.targetType=this.targetType,ee.blockId=this.blockId,ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new Ru),se.targetType=ee.targetType,se.blockId=ee.blockId,se}},wu;(function(ee){ee.BLOCK="block",ee.WORKSPACE="workspace",ee.ZOOM_CONTROLS="zoom_controls"})(wu||(wu={})),re($t.EVENT,it.CLICK,Ru);var am=750,Ip="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),Fl=null,js={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},Ul=0,Ys={TOUCH_ENABLED:Ip,TOUCH_MAP:js};Ys.checkTouchIdentifier=Yi,Ys.clearTouchIdentifier=$i,Ys.getTouchIdentifierFromEvent=Ui,Ys.longStart=Fi,Ys.longStop=ki,Ys.shouldHandleEvent=Di;var Au,Op,Rp,wp,Hl,Gl,Lu,Ap,Lp,Np;(function(ee){function se(_e){return ce.includes(_e.toUpperCase())}Au=ee;const ce=Au.toUpperCase();Op=se("JavaFX"),Rp=se("WebKit"),wp=se("Gecko")&&!Rp,Hl=se("Android"),ee=globalThis.navigator&&globalThis.navigator.maxTouchPoints,Gl=se("iPad")||se("Macintosh")&&0<ee,Lu=se("iPhone")&&!Gl,Ap=se("Macintosh"),Lp=Gl||Hl&&!se("Mobile")||se("Silk"),Np=!Lp&&(Lu||Hl)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var cm=Au,Mp=Op,xp=wp,Nu=Hl,Wl=Gl,Dp=Lu,Mu=Ap,Pp=Np,um={ANDROID:Nu,GECKO:xp,IPAD:Wl,IPHONE:Dp,JavaFx:Mp,MAC:Mu,MOBILE:Pp,raw:cm},Bp=40,Fp=125,rs={};rs.bind=Jt,rs.conditionalBind=Nt,rs.getScrollDeltaPixels=Li,rs.isRightButton=_i,rs.isTargetInput=zi,rs.mouseToSvg=Fe,rs.unbind=Yt;var Up={};Up.removeElem=hi;var os=class{constructor(ee){this.name=ee}toString(){return this.name}};os.POSITIONABLE=new os("positionable"),os.DRAG_TARGET=new os("drag_target"),os.DELETE_AREA=new os("delete_area"),os.AUTOHIDEABLE=new os("autohideable");var ui=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(ee,se){const ce=ee.component.id;if(!se&&this.componentData.has(ce)){var _e;throw Error('Plugin "'+ce+'" with capabilities "'+((_e=this.componentData.get(ce))==null?void 0:_e.capabilities)+'" already added.')}for(this.componentData.set(ce,ee),se=[],_e=0;_e<ee.capabilities.length;_e++){const me=String(ee.capabilities[_e]).toLowerCase();if(se.push(me),this.capabilityToComponentIds.has(me)){let be;(be=this.capabilityToComponentIds.get(me))==null||be.push(ce)}else this.capabilityToComponentIds.set(me,[ce])}this.componentData.get(ce).capabilities=se}removeComponent(ee){const se=this.componentData.get(ee);if(se){for(let ce=0;ce<se.capabilities.length;ce++){const _e=String(se.capabilities[ce]).toLowerCase();hi(this.capabilityToComponentIds.get(_e),ee)}this.componentData.delete(ee)}}addCapability(ee,se){if(!this.getComponent(ee))throw Error('Cannot add capability, "'+se+'". Plugin "'+ee+'" has not been added to the ComponentManager');if(this.hasCapability(ee,se))console.warn('Plugin "'+ee+'already has capability "'+se+'"');else{se=`${se}`.toLowerCase();var ce;(ce=this.componentData.get(ee))==null||ce.capabilities.push(se);var _e;(_e=this.capabilityToComponentIds.get(se))==null||_e.push(ee)}}removeCapability(ee,se){if(!this.getComponent(ee))throw Error('Cannot remove capability, "'+se+'". Plugin "'+ee+'" has not been added to the ComponentManager');this.hasCapability(ee,se)?(se=`${se}`.toLowerCase(),hi(this.componentData.get(ee).capabilities,se),hi(this.capabilityToComponentIds.get(se),ee)):console.warn('Plugin "'+ee+`doesn't have capability "`+se+'" to remove')}hasCapability(ee,se){return se=`${se}`.toLowerCase(),this.componentData.has(ee)&&this.componentData.get(ee).capabilities.includes(se)}getComponent(ee){let se;return(se=this.componentData.get(ee))==null?void 0:se.component}getComponents(ee,se){if(ee=`${ee}`.toLowerCase(),ee=this.capabilityToComponentIds.get(ee),!ee)return[];const ce=[];if(se){const _e=[];ee.forEach(me=>{_e.push(this.componentData.get(me))}),_e.sort(function(me,be){return me.weight-be.weight}),_e.forEach(function(me){ce.push(me.component)})}else ee.forEach(_e=>{ce.push(this.componentData.get(_e).component)});return ce}};ui.Capability=os,function(ee){ee=ee.ComponentWeight||(ee.ComponentWeight={}),ee[ee.TOOLBOX_WEIGHT=0]="TOOLBOX_WEIGHT",ee[ee.FLYOUT_WEIGHT=1]="FLYOUT_WEIGHT",ee[ee.TRASHCAN_WEIGHT=2]="TRASHCAN_WEIGHT",ee[ee.ZOOM_CONTROLS_WEIGHT=3]="ZOOM_CONTROLS_WEIGHT"}(ui||(ui={})),ui.ComponentWeight;var xu=!1,Du=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
  /* Drag surface disables events to not block the toolbox, so we have to
   * reenable them here for the cursor values to work. */
  pointer-events: auto;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
  height: 100%;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}

.blocklyBlockDragSurface, .blocklyAnimationLayer {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 80;
  pointer-events: none;
}
`,Pu={};Pu.inject=vi,Pu.register=si;var yt=class{constructor(ee,se){this.x=ee,this.y=se}clone(){return new yt(this.x,this.y)}scale(ee){return this.x*=ee,this.y*=ee,this}translate(ee,se){return this.x+=ee,this.y+=se,this}static equals(ee,se){return ee===se?!0:ee&&se?ee.x===se.x&&ee.y===se.y:!1}static distance(ee,se){const ce=ee.x-se.x;return ee=ee.y-se.y,Math.sqrt(ce*ce+ee*ee)}static magnitude(ee){return Math.sqrt(ee.x*ee.x+ee.y*ee.y)}static difference(ee,se){return new yt(ee.x-se.x,ee.y-se.y)}static sum(ee,se){return new yt(ee.x+se.x,ee.y+se.y)}},mo="http://www.w3.org/2000/svg",zn="http://www.w3.org/1999/xhtml",hn="http://www.w3.org/1999/xlink",ls;(function(ee){ee[ee.ELEMENT_NODE=1]="ELEMENT_NODE",ee[ee.TEXT_NODE=3]="TEXT_NODE",ee[ee.COMMENT_NODE=8]="COMMENT_NODE"})(ls||(ls={}));var Ln=null,Bu=0,Vl=null,Bi={HTML_NS:zn};Bi.NodeType=ls,Bi.SVG_NS=mo,Bi.XLINK_NS=hn,Bi.addClass=Ct,Bi.createSvgElement=lt,Bi.getFastTextWidth=Ki,Bi.getFastTextWidthWithSizeString=ye,Bi.getTextWidth=ln,Bi.hasClass=Ue,Bi.insertAfter=Tt,Bi.measureFontMetrics=we,Bi.removeClass=Oe,Bi.removeClasses=Ce,Bi.removeNode=We,Bi.setCssTransform=Kt,Bi.startTextWidthCache=Ii,Bi.stopTextWidthCache=Hi;var Ye=class{constructor(ee){this.tagName=ee}toString(){return this.tagName}};Ye.ANIMATE=new Ye("animate"),Ye.CIRCLE=new Ye("circle"),Ye.CLIPPATH=new Ye("clipPath"),Ye.DEFS=new Ye("defs"),Ye.FECOMPOSITE=new Ye("feComposite"),Ye.FECOMPONENTTRANSFER=new Ye("feComponentTransfer"),Ye.FEFLOOD=new Ye("feFlood"),Ye.FEFUNCA=new Ye("feFuncA"),Ye.FEGAUSSIANBLUR=new Ye("feGaussianBlur"),Ye.FEPOINTLIGHT=new Ye("fePointLight"),Ye.FESPECULARLIGHTING=new Ye("feSpecularLighting"),Ye.FILTER=new Ye("filter"),Ye.FOREIGNOBJECT=new Ye("foreignObject"),Ye.G=new Ye("g"),Ye.IMAGE=new Ye("image"),Ye.LINE=new Ye("line"),Ye.PATH=new Ye("path"),Ye.PATTERN=new Ye("pattern"),Ye.POLYGON=new Ye("polygon"),Ye.RECT=new Ye("rect"),Ye.SVG=new Ye("svg"),Ye.TEXT=new Ye("text"),Ye.TSPAN=new Ye("tspan");var ri=class{constructor(ee,se,ce,_e){this.top=ee,this.bottom=se,this.left=ce,this.right=_e}clone(){return new ri(this.top,this.bottom,this.left,this.right)}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}contains(ee,se){return ee>=this.left&&ee<=this.right&&se>=this.top&&se<=this.bottom}intersects(ee){return this.left<=ee.right&&this.right>=ee.left&&this.bottom>=ee.top&&this.top<=ee.bottom}static equals(ee,se){return ee===se?!0:ee&&se?ee.top===se.top&&ee.bottom===se.bottom&&ee.left===se.left&&ee.right===se.right:!1}static createFromPoint(ee,se,ce){const _e=ee.x;return ee=ee.y,new ri(ee,ee+ce,_e,_e+se)}},Xt=class{constructor(ee,se){this.width=ee,this.height=se}static equals(ee,se){return ee===se?!0:ee&&se?ee.width===se.width&&ee.height===se.height:!1}static max(ee,se){return new Xt(Math.max(ee.width,se.width),Math.max(ee.height,se.height))}static min(ee,se){return new Xt(Math.min(ee.width,se.width),Math.min(ee.height,se.height))}},Hp={getSizeInternal:Ve},Ss={TEST_ONLY:Hp};Ss.getBorderBox=an,Ss.getComputedStyle=It,Ss.getContainerOffsetToScrollInto=mn,Ss.getPageOffset=Dt,Ss.getSize=Be,Ss.getViewportPageOffset=Oi,Ss.scrollIntoContainerView=fn;var Gp=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,Wp=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,hm={XY_REGEX:Gp,XY_STYLE_REGEX:Wp},Ks={TEST_ONLY:hm};Ks.getDocumentScroll=ms,Ks.getInjectionDivXY=In,Ks.getRelativeXY=Pi,Ks.getViewportBBox=fs,Ks.screenToWsCoordinates=$s,Ks.wsToScreenCoordinates=Ms;var yi=class{constructor(ee,se,ce,_e,me){this.workspace=ee,this.horizontal=se,this.oldHostMetrics=null,this.ratio=1,this.origin=new yt(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new yt(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=ce||!1,this.margin=me!==void 0?me:yi.DEFAULT_SCROLLBAR_MARGIN,ee="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),_e&&(ee+=" "+_e),this.outerSvg=lt(Ye.SVG,{class:ee}),_e=lt(Ye.G,{},this.outerSvg),this.svgBackground=lt(Ye.RECT,{class:"blocklyScrollbarBackground"},_e),ee=Math.floor((yi.scrollbarThickness-5)/2),this.svgHandle=lt(Ye.RECT,{class:"blocklyScrollbarHandle",rx:ee,ry:ee},_e),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),Tt(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),se?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=Nt(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=Nt(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const ee=yi.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(ee)),this.outerSvg.setAttribute("height",String(ee)),this.svgHandle.setAttribute("height",String(ee-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(ee)),this.outerSvg.setAttribute("width",String(ee)),this.svgHandle.setAttribute("width",String(ee-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),Yt(this.onMouseDownBarWrapper_),Yt(this.onMouseDownHandleWrapper_),We(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(ee){return ee=0>=ee||isNaN(ee)?0:Math.min(ee,this.scrollbarLength)}setHandleLength(ee){this.handleLength=ee,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(ee){return ee=0>=ee||isNaN(ee)?0:Math.min(ee,this.scrollbarLength-this.handleLength)}setHandlePosition(ee){this.handlePosition=ee,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(ee){this.scrollbarLength=ee,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(ee,se){this.position.x=ee,this.position.y=se,Kt(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(ee){!ee&&(ee=this.workspace.getMetrics(),!ee)||this.oldHostMetrics&&yi.metricsAreEquivalent(ee,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(ee):this.resizeVertical(ee),this.oldHostMetrics=ee,this.updateMetrics())}requiresViewResize(ee){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==ee.viewWidth||this.oldHostMetrics.viewHeight!==ee.viewHeight||this.oldHostMetrics.absoluteLeft!==ee.absoluteLeft||this.oldHostMetrics.absoluteTop!==ee.absoluteTop:!0}resizeHorizontal(ee){this.requiresViewResize(ee)?this.resizeViewHorizontal(ee):this.resizeContentHorizontal(ee)}resizeViewHorizontal(ee){var se=ee.viewWidth-2*this.margin;this.pair&&(se-=yi.scrollbarThickness),this.setScrollbarLength(Math.max(0,se)),se=ee.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(se+=yi.scrollbarThickness),this.setPosition(se,ee.absoluteTop+ee.viewHeight-yi.scrollbarThickness-this.margin),this.resizeContentHorizontal(ee)}resizeContentHorizontal(ee){if(ee.viewWidth>=ee.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var se=this.scrollbarLength*ee.viewWidth/ee.scrollWidth;se=this.constrainHandleLength(se),this.setHandleLength(se),se=ee.scrollWidth-ee.viewWidth;var ce=this.scrollbarLength-this.handleLength;ee=(ee.viewLeft-ee.scrollLeft)/se*ce,ee=this.constrainHandlePosition(ee),this.setHandlePosition(ee),this.ratio=ce/se}}resizeVertical(ee){this.requiresViewResize(ee)?this.resizeViewVertical(ee):this.resizeContentVertical(ee)}resizeViewVertical(ee){let se=ee.viewHeight-2*this.margin;this.pair&&(se-=yi.scrollbarThickness),this.setScrollbarLength(Math.max(0,se)),this.setPosition(this.workspace.RTL?ee.absoluteLeft+this.margin:ee.absoluteLeft+ee.viewWidth-yi.scrollbarThickness-this.margin,ee.absoluteTop+this.margin),this.resizeContentVertical(ee)}resizeContentVertical(ee){if(ee.viewHeight>=ee.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var se=this.scrollbarLength*ee.viewHeight/ee.scrollHeight;se=this.constrainHandleLength(se),this.setHandleLength(se),se=ee.scrollHeight-ee.viewHeight;var ce=this.scrollbarLength-this.handleLength;ee=(ee.viewTop-ee.scrollTop)/se*ce,ee=this.constrainHandlePosition(ee),this.setHandlePosition(ee),this.ratio=ce/se}}isVisible(){return this.isHandleVisible}setContainerVisible(ee){const se=ee!==this.containerVisible;this.containerVisible=ee,se&&this.updateDisplay_()}setVisible(ee){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(ee)}setVisibleInternal(ee){const se=ee!==this.isVisible();this.isHandleVisible=ee,se&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(ee){if(this.workspace.markFocused(),$i(),this.cleanUp(),_i(ee))ee.stopPropagation();else{var se=Fe(ee,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());se=this.horizontal?se.x:se.y;var ce=In(this.svgHandle);ce=this.horizontal?ce.x:ce.y;var _e=this.handlePosition,me=.95*this.handleLength;se<=ce?_e-=me:se>=ce+this.handleLength&&(_e+=me),this.setHandlePosition(this.constrainHandlePosition(_e)),this.updateMetrics(),ee.stopPropagation(),ee.preventDefault()}}onMouseDownHandle(ee){this.workspace.markFocused(),this.cleanUp(),_i(ee)?ee.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?ee.clientX:ee.clientY,this.onMouseUpWrapper_=Nt(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=Nt(document,"pointermove",this,this.onMouseMoveHandle),ee.stopPropagation(),ee.preventDefault())}onMouseMoveHandle(ee){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?ee.clientX:ee.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){$i(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(Yt(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(Yt(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let ee=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(ee)&&(ee=0),ee}updateMetrics(){const ee=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:ee}):this.workspace.setMetrics({y:ee})}set(ee,se){this.setHandlePosition(this.constrainHandlePosition(ee*this.ratio)),(se||se===void 0)&&this.updateMetrics()}setOrigin(ee,se){this.origin=new yt(ee,se)}static metricsAreEquivalent(ee,se){return ee.viewWidth===se.viewWidth&&ee.viewHeight===se.viewHeight&&ee.viewLeft===se.viewLeft&&ee.viewTop===se.viewTop&&ee.absoluteTop===se.absoluteTop&&ee.absoluteLeft===se.absoluteLeft&&ee.scrollWidth===se.scrollWidth&&ee.scrollHeight===se.scrollHeight&&ee.scrollLeft===se.scrollLeft&&ee.scrollTop===se.scrollTop}};yi.scrollbarThickness=Ip?25:15,yi.DEFAULT_SCROLLBAR_MARGIN=.5;var zl={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},Fu={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:Xl,DOMParser:$o,XMLSerializer:To}=globalThis;$o&&(zl=new $o),To&&(Fu=new To);var Vp="https://developers.google.com/blockly/xml",dm=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,Or={NAME_SPACE:Vp};Or.createElement=ne.createElement$$module$build$src$core$utils$xml,Or.createTextNode=ne.createTextNode$$module$build$src$core$utils$xml,Or.domToText=On,Or.injectDependencies=tn,Or.textToDom=ne.textToDom$$module$build$src$core$utils$xml;var Uu="categoryToolbox",zp="flyoutToolbox",Gt;(function(ee){ee[ee.TOP=0]="TOP",ee[ee.BOTTOM=1]="BOTTOM",ee[ee.LEFT=2]="LEFT",ee[ee.RIGHT=3]="RIGHT"})(Gt||(Gt={}));var Xp={hasCategoriesInternal:Xe},Cs={};Cs.Position=Gt,Cs.TEST_ONLY=Xp,Cs.convertFlyoutDefToJsonArray=Qn,Cs.convertToolboxDefToJson=Zn,Cs.hasCategories=xt,Cs.isCategoryCollapsible=St,Cs.parseToolboxTree=gi;var as;(function(ee){ee[ee.TOP=0]="TOP",ee[ee.BOTTOM=1]="BOTTOM"})(as||(as={}));var Rr;(function(ee){ee[ee.LEFT=0]="LEFT",ee[ee.RIGHT=1]="RIGHT"})(Rr||(Rr={}));var ks;(function(ee){ee[ee.UP=0]="UP",ee[ee.DOWN=1]="DOWN"})(ks||(ks={}));var qs={};qs.bumpDirection=ks,qs.bumpPositionRect=$n,qs.getCornerOppositeToolbox=Gi,qs.getStartPositionRect=Ci,qs.horizontalPosition=Rr,qs.verticalPosition=as;var qi={width:96,height:124,url:"sprites.png"},jp=class{constructor(ee){this.workspace=ee,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=lt(Ye.G,{});const ee=String(Math.random()).substring(2);return this.createZoomOutSvg(ee),this.createZoomInSvg(ee),this.workspace.isMovable()&&this.createZoomResetSvg(ee),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:ui.ComponentWeight.ZOOM_CONTROLS_WEIGHT,capabilities:[ui.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&We(this.svgGroup);for(const ee of this.boundEvents)Yt(ee);this.boundEvents.length=0}getBoundingRectangle(){let ee=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(ee+=this.LARGE_SPACING+this.HEIGHT),new ri(this.top,this.top+ee,this.left,this.left+this.WIDTH)}position(ee,se){if(this.initialized){var ce=Gi(this.workspace,ee),_e=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(_e+=this.LARGE_SPACING+this.HEIGHT),ee=Ci(ce,new Xt(this.WIDTH,_e),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,ee,this.workspace),ce=ce.vertical,se=$n(ee,this.MARGIN_VERTICAL,ce===as.TOP?ks.DOWN:ks.UP,se),ce===as.TOP){var me=this.SMALL_SPACING+this.HEIGHT,be;(be=this.zoomInGroup)==null||be.setAttribute("transform","translate(0, "+me+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(me+this.LARGE_SPACING+this.HEIGHT)+")")}else{be=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let De;(De=this.zoomInGroup)==null||De.setAttribute("transform","translate(0, "+be+")"),be=be+this.SMALL_SPACING+this.HEIGHT,(me=this.zoomOutGroup)==null||me.setAttribute("transform","translate(0, "+be+")")}this.top=se.top,this.left=se.left;var Ie;(Ie=this.svgGroup)==null||Ie.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(ee){this.zoomOutGroup=lt(Ye.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const se=lt(Ye.CLIPPATH,{id:"blocklyZoomoutClipPath"+ee},this.zoomOutGroup);lt(Ye.RECT,{width:32,height:32},se),lt(Ye.IMAGE,{width:qi.width,height:qi.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+ee+")"},this.zoomOutGroup).setAttributeNS(hn,"xlink:href",this.workspace.options.pathToMedia+qi.url),this.boundEvents.push(Nt(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(ee){this.zoomInGroup=lt(Ye.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const se=lt(Ye.CLIPPATH,{id:"blocklyZoominClipPath"+ee},this.zoomInGroup);lt(Ye.RECT,{width:32,height:32},se),lt(Ye.IMAGE,{width:qi.width,height:qi.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+ee+")"},this.zoomInGroup).setAttributeNS(hn,"xlink:href",this.workspace.options.pathToMedia+qi.url),this.boundEvents.push(Nt(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(ee,se){this.workspace.markFocused(),this.workspace.zoomCenter(ee),this.fireZoomEvent(),$i(),se.stopPropagation(),se.preventDefault()}createZoomResetSvg(ee){this.zoomResetGroup=lt(Ye.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const se=lt(Ye.CLIPPATH,{id:"blocklyZoomresetClipPath"+ee},this.zoomResetGroup);lt(Ye.RECT,{width:32,height:32},se),lt(Ye.IMAGE,{width:qi.width,height:qi.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+ee+")"},this.zoomResetGroup).setAttributeNS(hn,"xlink:href",this.workspace.options.pathToMedia+qi.url),this.boundEvents.push(Nt(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(ee){this.workspace.markFocused();const se=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(se),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),$i(),ee.stopPropagation(),ee.preventDefault()}fireZoomEvent(){const ee=new(Le(it.CLICK))(null,this.workspace.id,"zoom_controls");Ae(ee)}};si(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var Yp=100,Kp=75,qp=50,Jp=25,_m={BLOCKS:qp,PROCEDURES:Kp,VARIABLES:Yp,WORKSPACE_COMMENTS:Jp},Hu={};Hu.register=fi,Hu.unregister=Ps;var Zp=class{constructor(){this.priority=Jp}save(ee){const se=[];for(const ce of ee.getTopComments())(ee=Rn(ce,{addCoordinates:!0,saveIds:!0}))&&se.push(ee);return se.length?se:null}load(ee,se){for(const ce of ee)Bs(ce,se,{recordUndo:Me()})}clear(ee){for(const se of ee.getTopComments())se.dispose()}};fi("workspaceComments",new Zp);var jl={};jl.WorkspaceCommentSerializer=Zp,jl.append=Bs,jl.save=Rn;var Gu={};Gu.register=dr,Gu.unregister=il;var Yl=class{paste(ee,se,ce){ee=ee.commentState,ce&&(ee.x=ce.x,ee.y=ce.y),ne.disable$$module$build$src$core$events$utils();let _e;try{_e=Bs(ee,se),nl(_e)}finally{ne.enable$$module$build$src$core$events$utils()}return _e?(Ke()&&Ae(new(Le(it.COMMENT_CREATE))(_e)),ne.setSelected$$module$build$src$core$common(_e),_e):null}};Yl.TYPE="workspace-comment",dr(Yl.TYPE,new Yl);var Wu;Wu=28,ne.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:Wu,connectingSnapRadius:Wu,currentConnectionPreference:8,bumpDelay:250},ne.config$$module$build$src$core$config;var pm="aria-",gm="role",Nn;(function(ee){ee.GRID="grid",ee.GRIDCELL="gridcell",ee.GROUP="group",ee.LISTBOX="listbox",ee.MENU="menu",ee.MENUITEM="menuitem",ee.MENUITEMCHECKBOX="menuitemcheckbox",ee.OPTION="option",ee.PRESENTATION="presentation",ee.ROW="row",ee.TREE="tree",ee.TREEITEM="treeitem"})(Nn||(Nn={}));var Mi;(function(ee){ee.ACTIVEDESCENDANT="activedescendant",ee.COLCOUNT="colcount",ee.DISABLED="disabled",ee.EXPANDED="expanded",ee.INVALID="invalid",ee.LABEL="label",ee.LABELLEDBY="labelledby",ee.LEVEL="level",ee.ORIENTATION="orientation",ee.POSINSET="posinset",ee.ROWCOUNT="rowcount",ee.SELECTED="selected",ee.SETSIZE="setsize",ee.VALUEMAX="valuemax",ee.VALUEMIN="valuemin"})(Mi||(Mi={}));var bo={};bo.Role=Nn,bo.State=Mi,bo.setRole=Fn,bo.setState=Ri;var Vu=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(ee){this.menuItems.push(ee)}render(ee){const se=document.createElement("div");se.className="blocklyMenu goog-menu blocklyNonSelectable",se.tabIndex=0,this.roleName&&Fn(se,this.roleName),this.element=se;for(let ce=0,_e;_e=this.menuItems[ce];ce++)se.appendChild(_e.createDom());return this.mouseOverHandler=Nt(se,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=Nt(se,"pointerup",this,this.handleClick,!0),this.mouseEnterHandler=Nt(se,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=Nt(se,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=Nt(se,"keydown",this,this.handleKeyEvent),ee.appendChild(se),se}getElement(){return this.element}focus(){const ee=this.getElement();ee&&(ee.focus({preventScroll:!0}),Ct(ee,"blocklyFocused"))}blur(){const ee=this.getElement();ee&&(ee.blur(),Oe(ee,"blocklyFocused"))}setRole(ee){this.roleName=ee}dispose(){this.mouseOverHandler&&(Yt(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(Yt(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(Yt(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(Yt(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(Yt(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let ee=0,se;se=this.menuItems[ee];ee++)se.dispose();this.element=null}getMenuItem(ee){const se=this.getElement();for(;ee&&ee!==se;){if(ee.classList.contains("blocklyMenuItem")){for(let ce=0,_e;_e=this.menuItems[ce];ce++)if(_e.getElement()===ee)return _e}ee=ee.parentElement}return null}setHighlighted(ee){var se=this.highlightedItem;se&&(se.setHighlighted(!1),this.highlightedItem=null),ee&&(ee.setHighlighted(!0),this.highlightedItem=ee,se=this.getElement(),fn(ee.getElement(),se),Ri(se,Mi.ACTIVEDESCENDANT,ee.getId()))}highlightNext(){const ee=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(ee,1)}highlightPrevious(){const ee=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>ee?this.menuItems.length:ee,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(ee,se){ee+=se;let ce;for(;ce=this.menuItems[ee];){if(ce.isEnabled()){this.setHighlighted(ce);break}ee+=se}}handleMouseOver(ee){(ee=this.getMenuItem(ee.target))&&(ee.isEnabled()?this.highlightedItem!==ee&&this.setHighlighted(ee):this.setHighlighted(null))}handleClick(ee){const se=this.openingCoords;if(this.openingCoords=null,se&&typeof ee.clientX=="number"){const ce=new yt(ee.clientX,ee.clientY);if(1>yt.distance(se,ce))return}(ee=this.getMenuItem(ee.target))&&ee.performAction()}handleMouseEnter(ee){this.focus()}handleMouseLeave(ee){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(ee){if(this.menuItems.length&&!(ee.shiftKey||ee.ctrlKey||ee.metaKey||ee.altKey)){var se=this.highlightedItem;switch(ee.key){case"Enter":case" ":se&&se.performAction();break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}ee.preventDefault(),ee.stopPropagation()}}getSize(){const ee=this.getElement(),se=Be(ee);return se.height=ee.scrollHeight,se}},zu=class{constructor(ee,se){this.content=ee,this.opt_value=se,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const ee=document.createElement("div");ee.id=$e(),this.element=ee,ee.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const se=document.createElement("div");if(se.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var ce=document.createElement("div");ce.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",se.appendChild(ce)}return ce=this.content,typeof this.content=="string"&&(ce=document.createTextNode(this.content)),se.appendChild(ce),ee.appendChild(se),this.roleName&&Fn(ee,this.roleName),Ri(ee,Mi.SELECTED,this.checkable&&this.checked||!1),Ri(ee,Mi.DISABLED,!this.enabled),ee}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let ee;return(ee=this.opt_value)!=null?ee:null}setRightToLeft(ee){this.rightToLeft=ee}setRole(ee){this.roleName=ee}setCheckable(ee){this.checkable=ee}setChecked(ee){this.checked=ee}setHighlighted(ee){this.highlight=ee;const se=this.getElement();se&&this.isEnabled()&&(ee?(Ct(se,"blocklyMenuItemHighlight"),Ct(se,"goog-menuitem-highlight")):(Oe(se,"blocklyMenuItemHighlight"),Oe(se,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(ee){this.enabled=ee}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(ee,se){this.actionHandler=ee.bind(se)}},Eo="_TEMP_COLLAPSED_INPUT",Kl="_TEMP_COLLAPSED_FIELD",Ji="MANUALLY_DISABLED",fm={COLLAPSED_FIELD_NAME:Kl,COLLAPSED_INPUT_NAME:Eo,MANUALLY_DISABLED:Ji};(function(ee){ee[ee.VALUE=1]="VALUE",ee[ee.STATEMENT=3]="STATEMENT",ee[ee.DUMMY=5]="DUMMY",ee[ee.CUSTOM=6]="CUSTOM",ee[ee.END_ROW=7]="END_ROW"})(ne.inputTypes$$module$build$src$core$inputs$input_types||(ne.inputTypes$$module$build$src$core$inputs$input_types={})),ne.inputTypes$$module$build$src$core$inputs$input_types;var ql=new Set,Xu=new WeakSet,ju=new WeakMap,wr=null,Yu=null,Qp=0,Jl={};Jl.finishQueuedRenders=cn,Jl.queueRender=Zr,Jl.triggerQueuedRenders=wn;var eg=function(ee,se){window.alert(ee),se&&se()},tg=function(ee,se){se(window.confirm(ee))},ig=function(ee,se,ce){ce(window.prompt(ee,se))},ng={confirmInternal:dd},Js={TEST_ONLY:ng};Js.alert=Qr,Js.confirm=ll,Js.prompt=al,Js.setAlert=hd,Js.setConfirm=_d,Js.setPrompt=pd;var Ku,sg;ne.Msg$$module$build$src$core$msg=Object.create(null),Ku=function(ee){Object.keys(ee).forEach(function(se){ne.Msg$$module$build$src$core$msg[se]=ee[se]})},sg={Msg:ne.Msg$$module$build$src$core$msg,setLocale:Ku};var yo=class extends Ir{constructor(ee){super(),this.isBlank=typeof ee>"u",ee&&(this.varId=ee.getId(),this.workspaceId=ee.workspace.id)}toJson(){const ee=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return ee.varId=this.varId,ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new yo),se.varId=ee.varId,se}},qu=class extends yo{constructor(ee){super(ee),this.type=it.VAR_CREATE,ee&&(this.varType=ee.type,this.varName=ee.name)}toJson(){const ee=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return ee.varType=this.varType,ee.varName=this.varName,ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new qu),se.varType=ee.varType,se.varName=ee.varName,se}run(ee){const se=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");ee?se.createVariable(this.varName,this.varType,this.varId):se.deleteVariableById(this.varId)}};re($t.EVENT,it.VAR_CREATE,qu);var So=class{constructor(ee,se,ce,_e){this.workspace=ee,this.name=se,this.type=ce||"",this.id=_e||Te()}getId(){return this.id}static compareByName(ee,se){return ee.name.localeCompare(se.name,void 0,{sensitivity:"base"})}},Ju="VARIABLE",Zu="ijkmnopqrstuvwxyzabcdefgh",rg={generateUniqueNameInternal:fd},Vi={CATEGORY_NAME:Ju,TEST_ONLY:rg,VAR_LETTER_OPTIONS:Zu};Vi.allDeveloperVariables=ne.allDeveloperVariables$$module$build$src$core$variables,Vi.allUsedVarModels=ne.allUsedVarModels$$module$build$src$core$variables,Vi.createVariableButtonHandler=pr,Vi.flyoutCategory=cl,Vi.flyoutCategoryBlocks=Pa,Vi.generateUniqueName=Ba,Vi.generateUniqueNameFromOptions=ul,Vi.generateVariableFieldDom=Us,Vi.getAddedVariables=eo,Vi.getOrCreateVariablePackage=ne.getOrCreateVariablePackage$$module$build$src$core$variables,Vi.getVariable=ne.getVariable$$module$build$src$core$variables,Vi.nameUsedWithAnyType=Fa,Vi.nameUsedWithConflictingParam=Ua,Vi.promptName=hl,Vi.renameVariable=ne.renameVariable$$module$build$src$core$variables;var Ar=class extends Error{},og=class extends Ar{constructor(ee){super("Expected to find a 'type' property, defining the block type"),this.state=ee}},Co=class extends Ar{constructor(ee,se,ce){super(`The block ${se.toDevString()} is missing a(n) ${ee}
connection`),this.block=se,this.state=ce}},lg=class extends Ar{constructor(ee,se,ce,_e){super(`The block ${ce.toDevString()} could not connect its
${se} to its parent, because: ${ee}`),this.childBlock=ce,this.childState=_e}},ag=class extends Ar{constructor(ee){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=ee}},cg=class extends Ar{constructor(ee,se,ce){super(`Cannot add an icon of type '${ee}' to the block ${se.toDevString()}, because there is no icon registered with type '${ee}'. Make sure that all of your icons have been registered.`),this.block=se,this.state=ce}},Zs={};Zs.BadConnectionCheck=lg,Zs.DeserializationError=Ar,Zs.MissingBlockType=og,Zs.MissingConnection=Co,Zs.RealChildOfShadow=ag,Zs.UnregisteredIcon=cg;var ug=class{constructor(){this.priority=qp}save(ee){const se=[];for(const ce of ee.getTopBlocks(!1))(ee=un(ce,{addCoordinates:!0,doFullSerialization:!1}))&&se.push(ee);return se.length?{languageVersion:0,blocks:se}:null}load(ee,se){ee=ee.blocks;for(const ce of ee)es(ce,se,{recordUndo:Me()})}clear(ee){for(const se of ee.getTopBlocks(!1))se.dispose(!1)}};fi("blocks",new ug);var ko={};ko.BlockSerializer=ug,ko.append=es,ko.appendInternal=gr,ko.save=un;var wi=class{constructor(ee){this.name=ee}toString(){return this.name}equals(ee){return this.name===ee.toString()}};wi.MUTATOR=new wi("mutator"),wi.WARNING=new wi("warning"),wi.COMMENT=new wi("comment");var Qs=class extends Ir{constructor(ee){super(),this.isBlank=!ee,ee&&(this.blockId=ee.id,this.workspaceId=ee.workspace.id)}toJson(){const ee=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return ee.blockId=this.blockId,ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new Qs),se.blockId=ee.blockId,se}},er=class extends Qs{constructor(ee,se,ce,_e,me){super(ee),this.type=it.BLOCK_CHANGE,ee&&(this.element=se,this.name=ce||void 0,this.oldValue=_e,this.newValue=me)}toJson(){const ee=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return ee.element=this.element,ee.name=this.name,ee.oldValue=this.oldValue,ee.newValue=this.newValue,this.disabledReason&&(ee.disabledReason=this.disabledReason),ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new er),se.element=ee.element,se.name=ee.name,se.oldValue=ee.oldValue,se.newValue=ee.newValue,ee.disabledReason!==void 0&&(se.disabledReason=ee.disabledReason),se}setDisabledReason(ee){if(this.element!=="disabled")throw Error('Cannot set the disabled reason for a BlockChange event if the element is not "disabled".');this.disabledReason=ee}isNull(){return this.oldValue===this.newValue}run(ee){var se=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(se=se.getBlockById(this.blockId),!se)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");const ce=se.getIcon(wi.MUTATOR);switch(ce&&fr(ce)&&ce.bubbleIsVisible()&&ce.setBubbleVisible(!1),ee=ee?this.newValue:this.oldValue,this.element){case"field":(se=se.getField(this.name))?se.setValue(ee):console.warn("Can't set non-existent field: "+this.name);break;case"comment":se.setCommentText(ee||null);break;case"collapsed":se.setCollapsed(!!ee);break;case"disabled":var _e;se.setDisabledReason(!!ee,(_e=this.disabledReason)!=null?_e:Ji);break;case"inline":se.setInputsInline(!!ee);break;case"mutation":_e=er.getExtraBlockState_(se),se.loadExtraState?se.loadExtraState(JSON.parse(ee||"{}")):se.domToMutation&&se.domToMutation(ne.textToDom$$module$build$src$core$utils$xml(ee||"<mutation/>")),Ae(new er(se,"mutation",null,_e,ee));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(ee){return ee.saveExtraState?(ee=ee.saveExtraState(!0))?JSON.stringify(ee):"":ee.mutationToDom&&(ee=ee.mutationToDom())?Hn(ee):""}};re($t.EVENT,it.BLOCK_CHANGE,er);var Zl={};Zl.clamp=mr,Zl.toDegrees=Bd,Zl.toRadians=dl;var vo=16,Qu=1,hg=12,eh=16,Ql=.25,th=null,tr=null,Lr="",Nr="",Zt,Mr,ir,ih=null,vs=null,dg=null,nh={getBoundsInfo:function(){const ee=Dt(ih),se=Be(ih);return{left:ee.x,right:ee.x+se.width,top:ee.y,bottom:ee.y+se.height,width:se.width,height:se.height}},getPositionMetrics:function(ee,se,ce,_e){const me=nh.getBoundsInfo(),be=Be(Zt);return se+be.height<me.bottom?Qa(ee,se,me,be):_e-be.height>me.top?ec(ce,_e,me,be):se+be.height<document.documentElement.clientHeight?Qa(ee,se,me,be):_e-be.height>document.documentElement.clientTop?ec(ce,_e,me,be):Ud(ee,me,be)}},Xi={ANIMATION_TIME:Ql,ARROW_HORIZONTAL_PADDING:hg,ARROW_SIZE:vo,BORDER_SIZE:Qu,PADDING_Y:eh,TEST_ONLY:nh};Xi.clearContent=pl,Xi.createDom=Va,Xi.getContentDiv=_l,Xi.getOwner=Xa,Xi.getPositionX=to,Xi.hide=fl,Xi.hideIfOwner=gl,Xi.hideWithoutAnimation=Un,Xi.isVisible=tc,Xi.repositionForWindowResize=nc,Xi.setBoundsElement=za,Xi.setColour=ja,Xi.show=Za,Xi.showPositionedByBlock=Fd,Xi.showPositionedByField=Ya;var Io=class{constructor(ee){this.workspace=ee,this.cursorSvg=this.cursor=null,this.markers=new Map,this.markerSvg=null}registerMarker(ee,se){this.markers.has(ee)&&this.unregisterMarker(ee),se.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,se)),this.setMarkerSvg(se.getDrawer().createDom()),this.markers.set(ee,se)}unregisterMarker(ee){const se=this.markers.get(ee);if(se)se.dispose(),this.markers.delete(ee);else throw Error("Marker with ID "+ee+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor}getMarker(ee){return this.markers.get(ee)||null}setCursor(ee){this.cursor&&this.cursor.getDrawer()&&this.cursor.getDrawer().dispose(),(this.cursor=ee)&&(ee=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor),this.cursor.setDrawer(ee),this.setCursorSvg(this.cursor.getDrawer().createDom()))}setCursorSvg(ee){ee?(this.workspace.getBlockCanvas().appendChild(ee),this.cursorSvg=ee):this.cursorSvg=null}setMarkerSvg(ee){ee?this.workspace.getBlockCanvas()&&(this.cursorSvg?this.workspace.getBlockCanvas().insertBefore(ee,this.cursorSvg):this.workspace.getBlockCanvas().appendChild(ee)):this.markerSvg=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg&&this.workspace.getCursor().draw()}dispose(){const ee=Object.keys(this.markers);for(let se=0,ce;ce=ee[se];se++)this.unregisterMarker(ce);this.markers.clear(),this.cursor&&(this.cursor.dispose(),this.cursor=null)}};Io.LOCAL_MARKER="local_marker_1";var xr={};xr.commonWordPrefix=sc,xr.commonWordSuffix=rc,xr.isNumber=ne.isNumber$$module$build$src$core$utils$string,xr.shortestStringLength=io,xr.wrap=ne.wrap$$module$build$src$core$utils$string;var ea=void 0,Oo=!1,Dr=!1,_g=50,pg=0,nr=0,sh=0,rh=0,bn=null,Ro=null,oh=0,lh=10,gg=10,fg=750,ta=5,Ai=null,dn={HOVER_MS:fg,LIMIT:_g,MARGINS:ta,OFFSET_X:oh,OFFSET_Y:lh,RADIUS_OK:gg};dn.bindMouseEvents=Tr,dn.block=hc,dn.createDom=ac,dn.dispose=uc,dn.getCustomTooltip=Vd,dn.getDiv=Xd,dn.getTooltipOfObject=$r,dn.hide=ts,dn.isVisible=zd,dn.setCustomTooltip=Wd,dn.unbindMouseEvents=$l,dn.unblock=dc;var ah=.45,ch=.65,mg={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},En={};En.blend=Gs,En.getHsvSaturation=_c,En.getHsvValue=pc,En.hexToRgb=Tl,En.hsvToHex=bl,En.hueToHex=gc,En.names=mg,En.parse=Hs,En.rgbToHex=no,En.setHsvSaturation=Qd,En.setHsvValue=e_;var wo={};wo.checkMessageReferences=t_,wo.parseBlockColour=Er,wo.replaceMessageReferences=bi,wo.tokenizeInterpolation=fc;var oi=class{constructor(ee,se,ce){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg=this.cursorSvg=this.tooltip=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new Xt(0,0),ee!==oi.SKIP_SETUP&&(ce&&this.configure_(ce),this.setValue(ee),se&&this.setValidator(se))}configure_(ee){ee.tooltip&&this.setTooltip(bi(ee.tooltip))}setSourceBlock(ee){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=ee}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=lt(Ye.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip),this.bindEvents_(),this.initModel(),this.applyColour())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=lt(Ye.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=lt(Ye.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const ee=this.getClickTarget_();if(!ee)throw Error("A click target has not been set.");Tr(ee),this.mouseDownWrapper=Nt(ee,"pointerdown",this,this.onMouseDown_)}fromXml(ee){this.setValue(ee.textContent)}toXml(ee){return ee.textContent=this.getValue(),ee}saveState(ee){return ee=this.saveLegacyState(oi),ee!==null?ee:this.getValue()}loadState(ee){this.loadLegacyState(oi,ee)||this.setValue(ee)}saveLegacyState(ee){return ee.prototype.saveState===this.saveState&&ee.prototype.toXml!==this.toXml?(ee=ne.createElement$$module$build$src$core$utils$xml("field"),ee.setAttribute("name",this.name||""),On(this.toXml(ee)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(ee,se){return ee.prototype.loadState===this.loadState&&ee.prototype.fromXml!==this.fromXml?(this.fromXml(ne.textToDom$$module$build$src$core$utils$xml(se)),!0):!1}dispose(){gl(this),Ws(this);let ee;(ee=this.getSourceBlock())!=null&&ee.isDeadOrDying()||We(this.fieldGroup_),this.disposed=!0}updateEditable(){const ee=this.fieldGroup_,se=this.getSourceBlock();this.EDITABLE&&ee&&se&&(this.enabled_&&se.isEditable()?(Ct(ee,"blocklyEditableText"),Oe(ee,"blocklyNonEditableText"),ee.style.cursor=this.CURSOR):(Ct(ee,"blocklyNonEditableText"),Oe(ee,"blocklyEditableText"),ee.style.cursor=""))}setEnabled(ee){this.enabled_=ee,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==oi.prototype.showEditor_}isClickableInFlyout(ee){return!ee}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let ee=!1;return this.name&&(this.SERIALIZABLE?ee=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),ee=!0)),ee}isVisible(){return this.visible_}setVisible(ee){if(this.visible_!==ee){this.visible_=ee;var se=this.fieldGroup_;se&&(se.style.display=ee?"block":"none")}}setValidator(ee){this.validator_=ee}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(ee){this.isClickable()&&this.showEditor_(ee)}showEditor_(ee){}repositionForWindowResize(){return!1}updateSize_(ee){const se=this.getConstants();ee=ee!==void 0?ee:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let ce=2*ee,_e=se.FIELD_TEXT_HEIGHT,me=0;this.textElement_&&(me=Ki(this.textElement_,se.FIELD_TEXT_FONTSIZE,se.FIELD_TEXT_FONTWEIGHT,se.FIELD_TEXT_FONTFAMILY),ce+=me),this.isFullBlockField()||(_e=Math.max(_e,se.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=_e,this.size_.width=ce,this.positionTextElement_(ee,me),this.positionBorderRect_()}positionTextElement_(ee,se){if(this.textElement_){var ce=this.getConstants(),_e=this.size_.height/2,me;this.textElement_.setAttribute("x",String((me=this.getSourceBlock())!=null&&me.RTL?this.size_.width-se-ee:ee)),this.textElement_.setAttribute("y",String(ce.FIELD_TEXT_BASELINE_CENTER?_e:_e-ce.FIELD_TEXT_HEIGHT/2+ce.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new Xt(0,0)}getScaledBBox(){let ee;var se=this.getSourceBlock();if(!se)throw new Si;if(this.isFullBlockField()){var ce=this.sourceBlock_.getHeightWidth();const _e=se.workspace.scale;ee=this.getAbsoluteXY_(),se=(ce.width+1)*_e,ce=(ce.height+1)*_e,xp?(ee.x+=1.5*_e,ee.y+=1.5*_e):(ee.x-=.5*_e,ee.y-=.5*_e)}else ce=this.borderRect_.getBoundingClientRect(),ee=Dt(this.borderRect_),se=ce.width,ce=ce.height;return new ri(ee.y,ee.y+ce,ee.x,ee.x+se)}onLocationChange(ee){}getDisplayText_(){let ee=this.getText();return ee?(ee.length>this.maxDisplayLength&&(ee=ee.substring(0,this.maxDisplayLength-2)+"…"),ee=ee.replace(/\s/g,oi.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(ee+="‏"),ee):oi.NBSP}getText(){const ee=this.getText_();return String(ee!==null?ee:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_.queueRender()}setValue(ee,se=!0){if(ee!==null){var ce=ne.getGroup$$module$build$src$core$events$utils();ce||ne.setGroup$$module$build$src$core$events$utils(!0);try{const dt=this.doClassValidation_(ee),vt=this.processValidation(ee,dt,se);if(!(vt instanceof Error)){var _e,me=(_e=this.getValidator())==null?void 0:_e.call(this,vt),be=this.processValidation(vt,me,se);if(!(be instanceof Error)){var Ie=this.sourceBlock_;if(!Ie||!Ie.disposed){var De=this.getValue();De===be?this.doValueUpdate_(be):(this.doValueUpdate_(be),se&&Ie&&Ke()&&Ae(new(Le(it.BLOCK_CHANGE))(Ie,"field",this.name||null,De,be)),this.isDirty_&&this.forceRerender())}}}}finally{ne.setGroup$$module$build$src$core$events$utils(ce)}}}processValidation(ee,se,ce){return se===null?(this.doValueInvalid_(ee,ce),this.isDirty_&&this.forceRerender(),Error()):se===void 0?ee:se}getValue(){return this.value_}doClassValidation_(ee){return ee??null}doValueUpdate_(ee){this.value_=ee,this.isDirty_=!0}doValueInvalid_(ee,se){}onMouseDown_(ee){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(ee=this.sourceBlock_.workspace.getGesture(ee))&&ee.setStartField(this)}setTooltip(ee){ee||ee===""||(ee=this.sourceBlock_);const se=this.getClickTarget_();se?se.tooltip=ee:this.tooltip=ee}getTooltip(){const ee=this.getClickTarget_();return $r(ee||{tooltip:this.tooltip})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return Dt(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let ee=null;const se=this.getSourceBlock();if(!se)throw new Si;const ce=se.inputList;for(let _e=0;_e<se.inputList.length;_e++){const me=ce[_e],be=me.fieldRow;for(let Ie=0;Ie<be.length;Ie++)if(be[Ie]===this){ee=me;break}}return ee}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(ee){return!1}setCursorSvg(ee){if(ee){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(ee),this.cursorSvg=ee}else this.cursorSvg=null}setMarkerSvg(ee){if(ee){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(ee),this.markerSvg=ee}else this.markerSvg=null}updateMarkers_(){var ee=this.getSourceBlock();if(!ee)throw new Si;ee=ee.workspace,ee.keyboardAccessibilityMode&&this.cursorSvg&&ee.getCursor().draw(),ee.keyboardAccessibilityMode&&this.markerSvg&&ee.getMarker(Io.LOCAL_MARKER).draw()}static fromJson(ee){throw Error("Attempted to instantiate a field from the registry that hasn't defined a 'fromJson' method.")}};oi.NBSP=" ",oi.SKIP_SETUP=Symbol("SKIP_SETUP");var Si=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},Pr=null,uh=null,ia=null,na="blocklyWidgetDiv",Br="",Fr="",Mn,xn={};xn.createDom=mc,xn.getDiv=yr,xn.hide=Sr,xn.hideIfOwner=Ws,xn.hideIfOwnerIsInWorkspace=so,xn.isVisible=$c,xn.positionWithAnchor=bc,xn.repositionForWindowResize=Ec,xn.show=yl,xn.testOnly_setDiv=i_;var sa=null,$g={},ra=null,sr={};sr.callbackFactory=ne.callbackFactory$$module$build$src$core$contextmenu,sr.dispose=Sc,sr.getCurrentBlock=o_,sr.hide=oo,sr.setCurrentBlock=yc,sr.show=ro;var Wt=class{constructor(){this.registeredItems=new Map,this.reset()}reset(){this.registeredItems.clear()}register(ee){if(this.registeredItems.has(ee.id))throw Error('Menu item with ID "'+ee.id+'" is already registered.');this.registeredItems.set(ee.id,ee)}unregister(ee){if(!this.registeredItems.has(ee))throw Error('Menu item with ID "'+ee+'" not found.');this.registeredItems.delete(ee)}getItem(ee){let se;return(se=this.registeredItems.get(ee))!=null?se:null}getContextMenuOptions(ee,se){const ce=[];for(const me of this.registeredItems.values())if(ee===me.scopeType){var _e=me.preconditionFn(se);_e!=="hidden"&&(_e={text:typeof me.displayText=="function"?me.displayText(se):me.displayText,enabled:_e==="enabled",callback:me.callback,scope:se,weight:me.weight},ce.push(_e))}return ce.sort(function(me,be){return me.weight-be.weight}),ce}};(function(ee){var se=ee.ScopeType||(ee.ScopeType={});se.BLOCK="block",se.WORKSPACE="workspace",se.COMMENT="comment",ee.registry=new ee})(Wt||(Wt={})),Wt.ScopeType;var Is=50,oa=100,mm={BLOCK:Is,BUBBLE:oa},Tg=class{constructor(ee){this.comment=ee,this.startLoc=null,this.inGroup=!1,this.workspace=ee.workspace}isMovable(){return this.comment.isOwnMovable()&&!this.comment.isDeadOrDying()&&!this.workspace.options.readOnly}startDrag(){(this.inGroup=!!ne.getGroup$$module$build$src$core$events$utils())||ne.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent(),this.startLoc=this.comment.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let ee;(ee=this.workspace.getLayerManager())==null||ee.moveToDragLayer(this.comment),this.comment.setDragging(!0)}drag(ee){this.comment.moveDuringDrag(ee)}endDrag(){this.fireDragEndEvent(),this.fireMoveEvent();let ee;(ee=this.workspace.getLayerManager())==null||ee.moveOffDragLayer(this.comment,Is),this.comment.setDragging(!1),this.comment.snapToGrid(),this.workspace.setResizesEnabled(!0),this.inGroup||ne.setGroup$$module$build$src$core$events$utils(!1)}fireDragStartEvent(){const ee=new(Le(it.COMMENT_DRAG))(this.comment,!0);Ae(ee)}fireDragEndEvent(){const ee=new(Le(it.COMMENT_DRAG))(this.comment,!1);Ae(ee)}fireMoveEvent(){if(!this.comment.isDeadOrDying()){var ee=new(Le(it.COMMENT_MOVE))(this.comment);ee.setReason(["drag"]),ee.oldCoordinate_=this.startLoc,ee.recordNew(),Ae(ee)}}revertDrag(){this.startLoc&&this.comment.moveDuringDrag(this.startLoc)}},bg=new WeakMap,Eg=class{constructor(ee){this.workspace=ee,this.size=new Xt(120,100),this.collapsed=!1,this.editable=!0,this.location=new yt(0,0),this.text="",this.textChangeListeners=[],this.sizeChangeListeners=[],this.disposeListeners=[],this.collapseChangeListeners=[],this.resizePointerMoveListener=this.resizePointerUpListener=null,this.disposed=this.disposing=!1,this.svgRoot=lt(Ye.G,{class:"blocklyComment blocklyEditable blocklyDraggable"}),this.highlightRect=this.createHighlightRect(this.svgRoot),{topBarGroup:this.topBarGroup,topBarBackground:this.topBarBackground,deleteIcon:this.deleteIcon,foldoutIcon:this.foldoutIcon,textPreview:this.textPreview,textPreviewNode:this.textPreviewNode}=this.createTopBar(this.svgRoot,ee),{foreignObject:this.foreignObject,textArea:this.textArea}=this.createTextArea(this.svgRoot),this.resizeHandle=this.createResizeHandle(this.svgRoot,ee);let se;(se=ee.getLayerManager())==null||se.append(this,Is),this.setSizeWithoutFiringEvents(this.size),this.moveTo(new yt(0,0))}createHighlightRect(ee){return lt(Ye.RECT,{class:"blocklyCommentHighlight"},ee)}createTopBar(ee,se){ee=lt(Ye.G,{class:"blocklyCommentTopbar"},ee);const ce=lt(Ye.RECT,{class:"blocklyCommentTopbarBackground"},ee),_e=lt(Ye.IMAGE,{class:"blocklyDeleteIcon",href:`${se.options.pathToMedia}delete-icon.svg`},ee);se=lt(Ye.IMAGE,{class:"blocklyFoldoutIcon",href:`${se.options.pathToMedia}foldout-icon.svg`},ee);const me=lt(Ye.TEXT,{class:"blocklyCommentPreview blocklyCommentText blocklyText"},ee),be=document.createTextNode("");return me.appendChild(be),Nt(se,"pointerdown",this,this.onFoldoutDown),Nt(_e,"pointerdown",this,this.onDeleteDown),{topBarGroup:ee,topBarBackground:ce,deleteIcon:_e,foldoutIcon:se,textPreview:me,textPreviewNode:be}}createTextArea(ee){ee=lt(Ye.FOREIGNOBJECT,{class:"blocklyCommentForeignObject"},ee);const se=document.createElementNS(zn,"body");se.setAttribute("xmlns",zn),se.className="blocklyMinimalBody";const ce=document.createElementNS(zn,"textarea");return Ct(ce,"blocklyCommentText"),Ct(ce,"blocklyTextarea"),Ct(ce,"blocklyText"),se.appendChild(ce),ee.appendChild(se),Nt(ce,"change",this,this.onTextChange),{foreignObject:ee,textArea:ce}}createResizeHandle(ee,se){return ee=lt(Ye.IMAGE,{class:"blocklyResizeHandle",href:`${se.options.pathToMedia}resize-handle.svg`},ee),Nt(ee,"pointerdown",this,this.onResizePointerDown),ee}getSvgRoot(){return this.svgRoot}getSize(){return this.collapsed?this.topBarBackground.getBBox():this.size}setSizeWithoutFiringEvents(ee){const se=this.topBarBackground.getBBox(),ce=this.deleteIcon.getBBox(),_e=this.foldoutIcon.getBBox(),me=this.textPreview.getBBox(),be=this.resizeHandle.getBBox();this.size=ee=Xt.max(ee,this.calcMinSize(se,_e,ce)),this.svgRoot.setAttribute("height",`${ee.height}`),this.svgRoot.setAttribute("width",`${ee.width}`),this.updateHighlightRect(ee),this.updateTopBarSize(ee),this.updateTextAreaSize(ee,se),this.updateDeleteIconPosition(ee,se,ce),this.updateFoldoutIconPosition(se,_e),this.updateTextPreviewSize(ee,se,me,ce,be),this.updateResizeHandlePosition(ee,be)}setSize(ee){const se=this.preResizeSize||this.size;this.setSizeWithoutFiringEvents(ee),this.onSizeChange(se,this.size)}calcMinSize(ee,se,ce){var _e;this.updateTextPreview((_e=this.textArea.value)!=null?_e:""),_e=ln(this.textPreview);const me=this.calcFoldoutMargin(ee,se),be=this.calcDeleteMargin(ee,ce);let Ie=_e;return this.foldoutIcon.checkVisibility()?Ie+=se.width+2*me:_e&&(Ie+=4),this.deleteIcon.checkVisibility()?Ie+=ce.width+2*be:_e&&(Ie+=4),new Xt(Ie,ee.height+20)}calcDeleteMargin(ee,se){return(ee.height-se.height)/2}calcFoldoutMargin(ee,se){return(ee.height-se.height)/2}updateHighlightRect(ee){this.highlightRect.setAttribute("height",`${ee.height}`),this.highlightRect.setAttribute("width",`${ee.width}`),this.workspace.RTL&&this.highlightRect.setAttribute("x",`${-ee.width}`)}updateTopBarSize(ee){this.topBarBackground.setAttribute("width",`${ee.width}`)}updateTextAreaSize(ee,se){this.foreignObject.setAttribute("height",`${ee.height-se.height}`),this.foreignObject.setAttribute("width",`${ee.width}`),this.foreignObject.setAttribute("y",`${se.height}`),this.workspace.RTL&&this.foreignObject.setAttribute("x",`${-ee.width}`)}updateDeleteIconPosition(ee,se,ce){se=this.calcDeleteMargin(se,ce),this.deleteIcon.setAttribute("y",`${se}`),this.deleteIcon.setAttribute("x",`${ee.width-ce.width-se}`)}updateFoldoutIconPosition(ee,se){ee=this.calcFoldoutMargin(ee,se),this.foldoutIcon.setAttribute("y",`${ee}`),this.foldoutIcon.setAttribute("x",`${ee}`)}updateTextPreviewSize(ee,se,ce,_e,me){const be=(se.height-ce.height)/2,Ie=this.calcDeleteMargin(se,_e);se=this.calcFoldoutMargin(se,me),ee=ee.width-me.width-2*se-_e.width-2*Ie,this.textPreview.setAttribute("x",`${me.width+2*se*(this.workspace.RTL?-1:1)}`),this.textPreview.setAttribute("y",`${be+ce.height/2}`),this.textPreview.setAttribute("width",`${ee}`)}updateResizeHandlePosition(ee,se){this.resizeHandle.setAttribute("y",`${ee.height-se.height}`),this.resizeHandle.setAttribute("x",`${ee.width-se.width}`)}onSizeChange(ee,se){for(let ce=this.sizeChangeListeners.length-1;0<=ce;ce--)this.sizeChangeListeners[ce](ee,se)}addSizeChangeListener(ee){this.sizeChangeListeners.push(ee)}removeSizeChangeListener(ee){this.sizeChangeListeners.splice(this.sizeChangeListeners.indexOf(ee),1)}onResizePointerDown(ee){this.isEditable()&&(this.bringToFront(),_i(ee)||(this.preResizeSize=this.getSize(),Sl(this.workspace,ee,new yt(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=Nt(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=Nt(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),ee.stopPropagation())}onResizePointerUp(ee){$i(),this.resizePointerUpListener&&(Yt(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(Yt(this.resizePointerMoveListener),this.resizePointerMoveListener=null),this.setSize(this.size),this.preResizeSize=void 0}onResizePointerMove(ee){ee=Cl(this.workspace,ee),this.setSizeWithoutFiringEvents(new Xt(this.workspace.RTL?-ee.x:ee.x,ee.y))}isCollapsed(){return this.collapsed}setCollapsed(ee){(this.collapsed=ee)?Ct(this.svgRoot,"blocklyCollapsed"):Oe(this.svgRoot,"blocklyCollapsed"),this.setSizeWithoutFiringEvents(this.size),this.onCollapse()}onCollapse(){for(let ee=this.collapseChangeListeners.length-1;0<=ee;ee--)this.collapseChangeListeners[ee](this.collapsed)}addOnCollapseListener(ee){this.collapseChangeListeners.push(ee)}removeOnCollapseListener(ee){this.collapseChangeListeners.splice(this.collapseChangeListeners.indexOf(ee),1)}onFoldoutDown(ee){$i(),this.bringToFront(),_i(ee)||(this.setCollapsed(!this.collapsed),this.workspace.hideChaff()),ee.stopPropagation()}isEditable(){return this.editable}setEditable(ee){(this.editable=ee)?(Ct(this.svgRoot,"blocklyEditable"),Oe(this.svgRoot,"blocklyReadonly"),this.textArea.removeAttribute("readonly")):(Oe(this.svgRoot,"blocklyEditable"),Ct(this.svgRoot,"blocklyReadonly"),this.textArea.setAttribute("readonly","true"))}getRelativeToSurfaceXY(){return this.location}moveTo(ee){this.location=ee,this.svgRoot.setAttribute("transform",`translate(${ee.x}, ${ee.y})`)}getText(){return this.text}setText(ee){this.textArea.value=ee,this.onTextChange()}addTextChangeListener(ee){this.textChangeListeners.push(ee)}removeTextChangeListener(ee){this.textChangeListeners.splice(this.textChangeListeners.indexOf(ee),1)}onTextChange(){const ee=this.text;this.text=this.textArea.value,this.updateTextPreview(this.text),this.setSize(this.size);for(let se=this.textChangeListeners.length-1;0<=se;se--)this.textChangeListeners[se](ee,this.text)}updateTextPreview(ee){this.textPreviewNode.textContent=this.truncateText(ee)}truncateText(ee){return 12<=ee.length?`${ee.substring(0,9)}...`:ee}bringToFront(){const ee=this.svgRoot.parentNode,se=ee.childNodes;se[se.length-1]!==this.svgRoot&&ee.appendChild(this.svgRoot)}onDeleteDown(ee){$i(),_i(ee)||this.dispose(),ee.stopPropagation()}dispose(){this.disposing=!0,We(this.svgRoot);for(let ee=this.disposeListeners.length-1;0<=ee;ee--)this.disposeListeners[ee]();this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}addDisposeListener(ee){this.disposeListeners.push(ee)}removeDisposeListener(ee){this.disposeListeners.splice(this.disposeListeners.indexOf(ee),1)}};si(`
.injectionDiv {
  --commentFillColour: #FFFCC7;
  --commentBorderColour: #F2E49B;
}

.blocklyComment .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 1px solid var(--commentBorderColour);
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}

.blocklyReadonly.blocklyComment .blocklyTextarea {
  cursor: inherit;
}

.blocklyDeleteIcon {
  width: 20px;
  height: 20px;
  display: none;
  cursor: pointer;
}

.blocklyFoldoutIcon {
  width: 20px;
  height: 20px;
  transform-origin: 12px 12px;
  cursor: pointer;
}
.blocklyResizeHandle {
  width: 12px;
  height: 12px;
  cursor: se-resize;
}
.blocklyReadonly.blocklyComment .blocklyResizeHandle {
  cursor: inherit;
}

.blocklyCommentTopbarBackground {
  fill: var(--commentBorderColour);
  height: 24px;
}

.blocklyComment .blocklyCommentPreview.blocklyText {
  fill: #000;
  dominant-baseline: middle;
  visibility: hidden;
}

.blocklyCollapsed.blocklyComment .blocklyCommentPreview {
  visibility: visible;
}

.blocklyCollapsed.blocklyComment .blocklyCommentForeignObject,
.blocklyCollapsed.blocklyComment .blocklyResizeHandle {
  display: none;
}

.blocklyCollapsed.blocklyComment .blocklyFoldoutIcon {
  transform: rotate(-90deg);
}

.blocklyRTL .blocklyCommentTopbar {
  transform: scale(-1, 1);
}

.blocklyRTL .blocklyCommentForeignObject {
  direction: rtl;
}

.blocklyRTL .blocklyCommentPreview {
  /* Revert the scale and control RTL using direction instead. */
  transform: scale(-1, 1);
  direction: rtl;
}

.blocklyRTL .blocklyResizeHandle {
  transform: scale(-1, 1);
  cursor: sw-resize;
}

.blocklyCommentHighlight {
  fill: none;
}

.blocklySelected .blocklyCommentHighlight {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCollapsed.blocklySelected .blocklyCommentHighlight {
  stroke: none;
}

.blocklyCollapsed.blocklySelected .blocklyCommentTopbarBackground {
  stroke: #fc3;
  stroke-width: 3px;
}
`);var la=class{constructor(ee,se){this.workspace=ee,this.text="",this.size=new Xt(120,100),this.collapsed=!1,this.deletable=this.movable=this.editable=!0,this.location=new yt(0,0),this.disposing=this.disposed=!1,this.id=se&&!ee.getCommentById(se)?se:Te(),ee.addTopComment(this),this.fireCreateEvent()}fireCreateEvent(){Ke()&&Ae(new(Le(it.COMMENT_CREATE))(this))}fireDeleteEvent(){Ke()&&Ae(new(Le(it.COMMENT_DELETE))(this))}fireChangeEvent(ee,se){Ke()&&Ae(new(Le(it.COMMENT_CHANGE))(this,ee,se))}fireCollapseEvent(ee){Ke()&&Ae(new(Le(it.COMMENT_COLLAPSE))(this,ee))}setText(ee){const se=this.text;this.text=ee,this.fireChangeEvent(se,ee)}getText(){return this.text}setSize(ee){const se=new(Le(it.COMMENT_RESIZE))(this);this.size=ee,se.recordCurrentSizeAsNewSize(),Ae(se)}getSize(){return this.size}setCollapsed(ee){this.collapsed=ee,this.fireCollapseEvent(ee)}isCollapsed(){return this.collapsed}setEditable(ee){this.editable=ee}isEditable(){return this.isOwnEditable()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable}setMovable(ee){this.movable=ee}isMovable(){return this.isOwnMovable()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable}setDeletable(ee){this.deletable=ee}isDeletable(){return this.isOwnDeletable()&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable}moveTo(ee,se){const ce=new(Le(it.COMMENT_MOVE))(this);se&&ce.setReason(se),this.location=ee,ce.recordNew(),Ae(ce)}getRelativeToSurfaceXY(){return this.location}dispose(){this.disposing=!0,this.fireDeleteEvent(),this.workspace.removeTopComment(this),this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}},aa=class extends la{constructor(ee,se){super(ee,se),this.dragStrategy=new Tg(this),this.workspace=ee,this.view=new Eg(ee),this.view.setSize(this.getSize()),this.view.setEditable(this.isEditable()),this.view.getSvgRoot().setAttribute("data-id",this.id),this.addModelUpdateBindings(),Nt(this.view.getSvgRoot(),"pointerdown",this,this.startGesture),Nt(this.view.getSvgRoot(),"wheel",this,ce=>{ce.stopPropagation()})}addModelUpdateBindings(){this.view.addTextChangeListener((ee,se)=>void super.setText(se)),this.view.addSizeChangeListener((ee,se)=>void super.setSize(se)),this.view.addOnCollapseListener(()=>void super.setCollapsed(this.view.isCollapsed())),this.view.addDisposeListener(()=>{this.isDeadOrDying()||this.dispose()})}setText(ee){this.view.setText(ee)}setSize(ee){this.view.setSize(ee)}setCollapsed(ee){this.view.setCollapsed(ee)}setEditable(ee){super.setEditable(ee),this.view.setEditable(this.isEditable())}getSvgRoot(){return this.view.getSvgRoot()}getSize(){return super.getSize()}getBoundingRectangle(){const ee=this.getRelativeToSurfaceXY();var se,ce;const _e=(ce=(se=this.view)==null?void 0:se.getSize())!=null?ce:this.getSize();return this.workspace.RTL?(se=ee.x-_e.width,ce=ee.x):(se=ee.x,ce=ee.x+_e.width),new ri(ee.y,ee.y+_e.height,se,ce)}moveBy(ee,se,ce){const _e=this.getRelativeToSurfaceXY();ee=new yt(_e.x+ee,_e.y+se),this.moveTo(ee,ce)}moveTo(ee,se){super.moveTo(ee,se),this.view.moveTo(ee)}moveDuringDrag(ee){this.location=ee,this.view.moveTo(ee)}setDragging(ee){ee?Ct(this.getSvgRoot(),"blocklyDragging"):Oe(this.getSvgRoot(),"blocklyDragging")}dispose(){this.disposing=!0,this.view.isDeadOrDying()||this.view.dispose(),super.dispose()}startGesture(ee){const se=this.workspace.getGesture(ee);if(se){se.handleCommentStart(ee,this);let ce;(ce=this.workspace.getLayerManager())==null||ce.append(this,Is),ne.setSelected$$module$build$src$core$common(this)}}setDeleteStyle(ee){ee?Ct(this.getSvgRoot(),"blocklyDraggingDelete"):Oe(this.getSvgRoot(),"blocklyDraggingDelete")}isMovable(){return this.dragStrategy.isMovable()}startDrag(){this.dragStrategy.startDrag()}drag(ee){this.dragStrategy.drag(ee)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){Ct(this.getSvgRoot(),"blocklySelected")}unselect(){Oe(this.getSvgRoot(),"blocklySelected")}toCopyData(){return{paster:Yl.TYPE,commentState:Rn(this,{addCoordinates:!0})}}showContextMenu(ee){const se=Wt.registry.getContextMenuOptions(Wt.ScopeType.COMMENT,{comment:this});ro(ee,se,this.workspace.RTL,this.workspace)}snapToGrid(){if(!this.isDeadOrDying()){var ee=this.workspace.getGrid();if(ee!=null&&ee.shouldSnap()){var se=this.getRelativeToSurfaceXY();ee=ee.alignXY(se),ee!==se&&this.moveTo(ee,["snap"])}}}},ji={};ji.appendDomToWorkspace=f_,ji.blockToDom=Ts,ji.blockToDomWithXY=ao,ji.clearWorkspaceAndLoadFromXml=g_,ji.deleteNext=k_,ji.domToBlock=ne.domToBlock$$module$build$src$core$xml,ji.domToBlockInternal=Vs,ji.domToPrettyText=p_,ji.domToText=Hn,ji.domToVariables=Oc,ji.domToWorkspace=ne.domToWorkspace$$module$build$src$core$xml,ji.loadWorkspaceComment=Ic,ji.saveWorkspaceComment=lo,ji.variablesToDom=kc,ji.workspaceToDom=h_;var hh=class extends Qs{constructor(ee){super(ee),this.type=it.BLOCK_CREATE,ee&&(ee.isShadow()&&(this.recordUndo=!1),this.xml=ao(ee),this.ids=qe(ee),this.json=un(ee,{addCoordinates:!0}))}toJson(){const ee=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return ee.xml=Hn(this.xml),ee.ids=this.ids,ee.json=this.json,this.recordUndo||(ee.recordUndo=this.recordUndo),ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new hh),se.xml=ne.textToDom$$module$build$src$core$utils$xml(ee.xml),se.ids=ee.ids,se.json=ee.json,ee.recordUndo!==void 0&&(se.recordUndo=ee.recordUndo),se}run(ee){const se=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!$m(se,this.ids))if(ee)es(this.json,se);else for(ee=0;ee<this.ids.length;ee++){const ce=this.ids[ee],_e=se.getBlockById(ce);_e?_e.dispose(!1):ce===this.blockId&&console.warn("Can't uncreate non-existent block: "+ce)}}},$m=function(ee,se){return se.map(ce=>ee.getBlockById(ce)).filter(ce=>ce&&ce.isShadow()).length===se.length};re($t.EVENT,it.BLOCK_CREATE,hh);var dh=class extends An{constructor(ee,se){super(se),this.type=it.THEME_CHANGE,this.themeName=ee}toJson(){const ee=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return ee.themeName=this.themeName,ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new dh),se.themeName=ee.themeName,se}};re($t.EVENT,it.THEME_CHANGE,dh);var _h=class extends An{constructor(ee,se,ce,_e,me){super(_e),this.type=it.VIEWPORT_CHANGE,this.viewTop=ee,this.viewLeft=se,this.scale=ce,this.oldScale=me}toJson(){const ee=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return ee.viewTop=this.viewTop,ee.viewLeft=this.viewLeft,ee.scale=this.scale,ee.oldScale=this.oldScale,ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new _h),se.viewTop=ee.viewTop,se.viewLeft=ee.viewLeft,se.scale=ee.scale,se.oldScale=ee.oldScale,se}};re($t.EVENT,it.VIEWPORT_CHANGE,_h);var Rt;(function(ee){ee[ee.INPUT_VALUE=1]="INPUT_VALUE",ee[ee.OUTPUT_VALUE=2]="OUTPUT_VALUE",ee[ee.NEXT_STATEMENT=3]="NEXT_STATEMENT",ee[ee.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(Rt||(Rt={}));var Ur=class{constructor(ee){this.connectionChecker=ee,this.connections=[]}addConnection(ee,se){se=this.calculateIndexForYPos(se),this.connections.splice(se,0,ee)}findIndexOfConnection(ee,se){if(!this.connections.length)return-1;const ce=this.calculateIndexForYPos(se);if(ce>=this.connections.length)return-1;se=ee.y;let _e=ce;for(;0<=_e&&this.connections[_e].y===se;){if(this.connections[_e]===ee)return _e;_e--}for(_e=ce;_e<this.connections.length&&this.connections[_e].y===se;){if(this.connections[_e]===ee)return _e;_e++}return-1}calculateIndexForYPos(ee){if(!this.connections.length)return 0;let se=0,ce=this.connections.length;for(;se<ce;){const _e=Math.floor((se+ce)/2);if(this.connections[_e].y<ee)se=_e+1;else if(this.connections[_e].y>ee)ce=_e;else{se=_e;break}}return se}removeConnection(ee,se){if(ee=this.findIndexOfConnection(ee,se),ee===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(ee,1)}getNeighbours(ee,se){function ce(vt){const ai=me-_e[vt].x,li=be-_e[vt].y;return Math.sqrt(ai*ai+li*li)<=se&&dt.push(_e[vt]),li<se}const _e=this.connections,me=ee.x,be=ee.y;ee=0;let Ie=_e.length-2,De=Ie;for(;ee<De;)_e[De].y<be?ee=De:Ie=De,De=Math.floor((ee+Ie)/2);const dt=[];if(Ie=ee=De,_e.length){for(;0<=ee&&ce(ee);)ee--;do Ie++;while(Ie<_e.length&&ce(Ie))}return dt}isInYRange(ee,se,ce){return Math.abs(this.connections[ee].y-se)<=ce}searchForClosest(ee,se,ce){if(!this.connections.length)return{connection:null,radius:se};const _e=ee.y,me=ee.x;ee.x=me+ce.x,ee.y=_e+ce.y;var be=this.calculateIndexForYPos(ee.y);ce=null;let Ie=se,De,dt=be-1;for(;0<=dt&&this.isInYRange(dt,ee.y,se);)De=this.connections[dt],this.connectionChecker.canConnect(ee,De,!0,Ie)&&(ce=De,Ie=De.distanceFrom(ee)),dt--;for(;be<this.connections.length&&this.isInYRange(be,ee.y,se);)De=this.connections[be],this.connectionChecker.canConnect(ee,De,!0,Ie)&&(ce=De,Ie=De.distanceFrom(ee)),be++;return ee.x=me,ee.y=_e,{connection:ce,radius:Ie}}static init(ee){const se=[];return se[Rt.INPUT_VALUE]=new Ur(ee),se[Rt.OUTPUT_VALUE]=new Ur(ee),se[Rt.NEXT_STATEMENT]=new Ur(ee),se[Rt.PREVIOUS_STATEMENT]=new Ur(ee),se}},ca=null,Ao=null,Lo={};Lo.connectionUiEffect=Il,Lo.disconnectUiEffect=Lc,Lo.disconnectUiStop=Cr,Lo.disposeUiEffect=vl;var yg=class{constructor(ee){this.workspace=ee,this.horizontalScrollEnabled=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled=this.workspace.isMovableVertically(),this.startScrollXY_=new yt(ee.scrollX,ee.scrollY)}dispose(){this.workspace=null}startDrag(){Et()&&Et().unselect()}endDrag(ee){this.drag(ee)}drag(ee){if(ee=yt.sum(this.startScrollXY_,ee),this.horizontalScrollEnabled&&this.verticalScrollEnabled)this.workspace.scroll(ee.x,ee.y);else if(this.horizontalScrollEnabled)this.workspace.scroll(ee.x,this.workspace.scrollY);else if(this.verticalScrollEnabled)this.workspace.scroll(this.workspace.scrollX,ee.y);else throw new TypeError("Invalid state.")}},Tm=5,bm=6,cs=class{constructor(ee,se){this.creatorWorkspace=se,this.mouseDownXY=new yt(0,0),this.startWorkspace_=this.targetBlock=this.startComment=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.workspaceDragger=this.dragger=null,this.dragging=!1,this.flyout=null,this.multiTouch=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=ee,this.currentDragDeltaXY=new yt(0,0)}dispose(){$i(),dc(),this.creatorWorkspace.clearGesture();for(const ee of this.boundEvents)Yt(ee);this.boundEvents.length=0,this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(ee){const se=new yt(ee.clientX,ee.clientY);this.updateDragDelta(se)&&(this.updateIsDragging(ee),ki()),this.mostRecentEvent=ee}updateDragDelta(ee){return this.currentDragDeltaXY=yt.difference(ee,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=yt.magnitude(this.currentDragDeltaXY)>(this.flyout?ne.config$$module$build$src$core$config.flyoutDragRadius:ne.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let ee;if(!this.targetBlock||(ee=this.flyout)==null||!ee.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),ne.getGroup$$module$build$src$core$events$utils()||ne.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),ne.setSelected$$module$build$src$core$common(this.targetBlock),!0):!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.dragging=!0,this.workspaceDragger=new yg(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(ee){if(!this.startWorkspace_)throw Error("Cannot update dragging because the start workspace is undefined");if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.flyout&&this.updateIsDraggingFromFlyout();const se=Et();se&&zs(se)&&se.isMovable()?(this.dragging=!0,this.dragger=this.createDragger(se,this.startWorkspace_),this.dragger.onDragStart(ee),this.dragger.onDrag(ee,this.currentDragDeltaXY)):this.updateIsDraggingWorkspace()}createDragger(ee,se){return new(fe($t.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(ee,se)}doStart(ee){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,zi(ee)?this.cancel():(this.gestureHasStarted=!0,Cr(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=Xa(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=ee,hc(),_i(ee)?this.handleRightClick(ee):(ee.type.toLowerCase()==="pointerdown"&&ee.pointerType!=="mouse"&&Fi(ee,this),this.mouseDownXY=new yt(ee.clientX,ee.clientY),this.bindMouseEvents(ee),this.isEnding_||this.handleTouchStart(ee)))}bindMouseEvents(ee){this.boundEvents.push(Nt(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(Nt(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(Nt(document,"pointerup",null,this.handleUp.bind(this),!0)),ee.preventDefault(),ee.stopPropagation()}handleStart(ee){this.isDragging()||(this.handleTouchStart(ee),this.isMultiTouch()&&ki())}handleMove(ee){this.isDragging()&&Di(ee)||!this.isMultiTouch()?(this.updateFromEvent(ee),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),ee.preventDefault(),ee.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(ee),ki())}handleUp(ee){if(this.isDragging()||this.handleTouchEnd(ee),!this.isMultiTouch()||this.isDragging()){if(!Di(ee))return;if(this.updateFromEvent(ee),ki(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.dragger?this.dragger.onDragEnd(ee,this.currentDragDeltaXY):this.workspaceDragger?this.workspaceDragger.endDrag(this.currentDragDeltaXY):this.isBubbleClick()||this.isCommentClick()||(this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(ee))}ee.preventDefault(),ee.stopPropagation(),this.dispose()}handleTouchStart(ee){var se=Ui(ee);this.cachedPoints.set(se,this.getTouchPoint(ee));var ce=Array.from(this.cachedPoints.keys());ce.length===2&&(se=this.cachedPoints.get(ce[0]),ce=this.cachedPoints.get(ce[1]),this.startDistance=yt.distance(se,ce),this.multiTouch=!0,ee.preventDefault())}handleTouchMove(ee){const se=Ui(ee);this.cachedPoints.set(se,this.getTouchPoint(ee)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(ee):(this.updateFromEvent(ee),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),ee.preventDefault(),ee.stopPropagation())}handlePinch(ee){var se=Array.from(this.cachedPoints.keys()),ce=this.cachedPoints.get(se[0]);if(se=this.cachedPoints.get(se[1]),ce=yt.distance(ce,se)/this.startDistance,0<this.previousScale&&1/0>this.previousScale){if(se=ce-this.previousScale,se=0<se?se*Tm:se*bm,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const _e=this.startWorkspace_,me=Fe(ee,_e.getParentSvg(),_e.getInverseScreenCTM());_e.zoom(me.x,me.y,se)}this.previousScale=ce,ee.preventDefault()}handleTouchEnd(ee){ee=Ui(ee),this.cachedPoints.has(ee)&&this.cachedPoints.delete(ee),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(ee){return this.startWorkspace_?new yt(ee.pageX,ee.pageY):null}isMultiTouch(){return this.multiTouch}cancel(){this.isEnding_||(ki(),this.dragger?this.dragger.onDragEnd(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(ee){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(ee)):this.startBubble?this.startBubble.showContextMenu(ee):this.startComment?(this.startComment.workspace.hideChaff(),this.startComment.showContextMenu(ee)):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(ee)),ee.preventDefault(),ee.stopPropagation(),this.dispose()}handleWsStart(ee,se){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(se),this.mostRecentEvent=ee,this.startBlock||this.startBubble||this.startComment||ne.setSelected$$module$build$src$core$common(null),this.doStart(ee)}fireWorkspaceClick(ee){Ae(new(Le(it.CLICK))(null,ee.id,"workspace"))}handleFlyoutStart(ee,se){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(se),this.handleWsStart(ee,se.getWorkspace())}handleBlockStart(ee,se){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(se),this.mostRecentEvent=ee}handleBubbleStart(ee,se){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(se),this.mostRecentEvent=ee}handleCommentStart(ee,se){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleCommentStart, but the gesture had already been started.");this.setStartComment(se),this.mostRecentEvent=ee}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent),this.bringBlockToFront()}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");if(this.targetBlock.isEnabled()){ne.getGroup$$module$build$src$core$events$utils()||ne.setGroup$$module$build$src$core$events$utils(!0);var ee=this.flyout.createBlock(this.targetBlock);ee.snapToGrid(),ee.bumpNeighbours()}}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");ee=new(Le(it.CLICK))(this.startBlock,this.startWorkspace_.id,"block"),Ae(ee)}this.bringBlockToFront(),ne.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(ee){ee=this.creatorWorkspace,Et()&&Et().unselect(),this.fireWorkspaceClick(this.startWorkspace_||ee)}bringBlockToFront(){this.targetBlock&&!this.flyout&&this.targetBlock.bringToFront()}setStartField(ee){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=ee)}setStartIcon(ee){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=ee)}setStartBubble(ee){this.startBubble||(this.startBubble=ee)}setStartComment(ee){this.startComment||(this.startComment=ee)}setStartBlock(ee){this.startBlock||this.startBubble||(this.startBlock=ee,ne.setSelected$$module$build$src$core$common(this.startBlock),ee.isInFlyout&&ee!==ee.getRootBlock()?this.setTargetBlock(ee.getRootBlock()):this.setTargetBlock(ee))}setTargetBlock(ee){ee.isShadow()?this.setTargetBlock(ee.getParent()):this.targetBlock=ee}setStartWorkspace(ee){this.startWorkspace_||(this.startWorkspace_=ee)}setStartFlyout(ee){this.flyout||(this.flyout=ee)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isCommentClick(){return!!this.startComment&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const ee=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&ee}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}getCurrentDragger(){let ee,se;return(se=(ee=this.workspaceDragger)!=null?ee:this.dragger)!=null?se:null}isDragging(){return this.dragging}hasStarted(){return this.gestureHasStarted}static inProgress(){const ee=Ot();for(let se=0,ce;ce=ee[se];se++)if(ce.currentGesture_)return!0;return!1}},ph=class{constructor(ee,se){this.pattern=ee,this.scale=1;let ce;this.spacing=(ce=se.spacing)!=null?ce:0;let _e;this.length=(_e=se.length)!=null?_e:1,this.line2=(this.line1=ee.firstChild)&&this.line1.nextSibling;let me;this.snapToGrid=(me=se.snap)!=null?me:!1}setSpacing(ee){this.spacing=ee,this.update(this.scale)}getSpacing(){return this.spacing}setLength(ee){this.length=ee,this.update(this.scale)}getLength(){return this.length}setSnapToGrid(ee){this.snapToGrid=ee}shouldSnap(){return this.snapToGrid}getPatternId(){return this.pattern.id}update(ee){this.scale=ee;var se=this.spacing*ee;this.pattern.setAttribute("width",`${se}`),this.pattern.setAttribute("height",`${se}`),se=Math.floor(this.spacing/2)+.5;let ce=se-this.length/2,_e=se+this.length/2;se*=ee,ce*=ee,_e*=ee,this.setLineAttributes(this.line1,ee,ce,_e,se,se),this.setLineAttributes(this.line2,ee,se,se,ce,_e)}setLineAttributes(ee,se,ce,_e,me,be){ee&&(ee.setAttribute("stroke-width",`${se}`),ee.setAttribute("x1",`${ce}`),ee.setAttribute("y1",`${me}`),ee.setAttribute("x2",`${_e}`),ee.setAttribute("y2",`${be}`))}moveTo(ee,se){this.pattern.setAttribute("x",`${ee}`),this.pattern.setAttribute("y",`${se}`)}alignXY(ee){var se=this.getSpacing();const ce=se/2,_e=Math.round(Math.round((ee.x-ce)/se)*se+ce);return se=Math.round(Math.round((ee.y-ce)/se)*se+ce),_e===ee.x&&se===ee.y?ee:new yt(_e,se)}static createDom(ee,se,ce){ee=lt(Ye.PATTERN,{id:"blocklyGridPattern"+ee,patternUnits:"userSpaceOnUse"},ce);let _e,me;if(0<((_e=se.length)!=null?_e:1)&&0<((me=se.spacing)!=null?me:0)){lt(Ye.LINE,{stroke:se.colour},ee);let be;(be=se.length)!=null&&be&&lt(Ye.LINE,{stroke:se.colour},ee)}else lt(Ye.LINE,{},ee);return ee}},Em=class{constructor(ee){this.workspace=ee,this.layers=new Map,(ee=ee.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(ee),this.animationLayer=this.createAnimationLayer(ee)),ee=this.createLayer(Is),Ct(ee,"blocklyBlockCanvas"),ee=this.createLayer(oa),Ct(ee,"blocklyBubbleCanvas")}createDragLayer(ee){const se=lt(Ye.SVG,{class:"blocklyBlockDragSurface",xmlns:mo,"xmlns:html":zn,"xmlns:xlink":hn,version:"1.1"});return ee.append(se),lt(Ye.G,{},se)}createAnimationLayer(ee){const se=lt(Ye.SVG,{class:"blocklyAnimationLayer",xmlns:mo,"xmlns:html":zn,"xmlns:xlink":hn,version:"1.1"});return ee.append(se),lt(Ye.G,{},se)}appendToAnimationLayer(ee){let se;const ce=(se=this.dragLayer)==null?void 0:se.getAttribute("transform");if(ce){let me;(me=this.animationLayer)==null||me.setAttribute("transform",ce)}let _e;(_e=this.animationLayer)==null||_e.appendChild(ee.getSvgRoot())}translateLayers(ee,se){ee=`translate(${ee.x}, ${ee.y}) scale(${se})`;let ce;(ce=this.dragLayer)==null||ce.setAttribute("transform",ee);for(const[,_e]of this.layers)_e.setAttribute("transform",ee)}moveToDragLayer(ee){let se;(se=this.dragLayer)==null||se.appendChild(ee.getSvgRoot())}moveOffDragLayer(ee,se){this.append(ee,se)}append(ee,se){this.layers.has(se)||this.createLayer(se);let ce;(ce=this.layers.get(se))==null||ce.appendChild(ee.getSvgRoot())}createLayer(ee){const se=this.workspace.getSvgGroup(),ce=lt(Ye.G,{});let _e=!1;const me=[...this.layers].sort((be,Ie)=>be[0]-Ie[0]);for(const[be,Ie]of me)if(ee<be){se.insertBefore(ce,Ie),_e=!0;break}return _e||se.appendChild(ce),this.layers.set(ee,ce),ce}hasLayer(ee){return ee===this.dragLayer||new Set(this.layers.values()).has(ee)}getBlockLayer(){return this.layers.get(Is)}getBubbleLayer(){return this.layers.get(oa)}},Sg={};Sg.deepMerge=is;var rr=class{constructor(ee,se,ce,_e){this.name=ee,this.startHats=!1,this.blockStyles=se||Object.create(null),this.categoryStyles=ce||Object.create(null),this.componentStyles=_e||Object.create(null),this.fontStyle=Object.create(null),re($t.THEME,ee,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(ee,se){this.blockStyles[ee]=se}setCategoryStyle(ee,se){this.categoryStyles[ee]=se}getComponentStyle(ee){if(ee=this.componentStyles[ee],!ee)return null;if(typeof ee=="string"){const se=this.getComponentStyle(ee);if(se)return se}return`${ee}`}setComponentStyle(ee,se){this.componentStyles[ee]=se}setFontStyle(ee){this.fontStyle=ee}setStartHats(ee){this.startHats=ee}static defineTheme(ee,se){ee=ee.toLowerCase();const ce=new rr(ee);let _e=se.base;if(_e){if(typeof _e=="string"){let me;_e=(me=ue($t.THEME,_e))!=null?me:void 0}_e instanceof rr&&(is(ce,_e),ce.name=ee)}return is(ce.blockStyles,se.blockStyles),is(ce.categoryStyles,se.categoryStyles),is(ce.componentStyles,se.componentStyles),is(ce.fontStyle,se.fontStyle),se.startHats!==null&&(ce.startHats=se.startHats),ce}},ym={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},Sm={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},ua=new rr("classic",ym,Sm),yn=class{constructor(ee){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let se=null,ce=!1;var _e=!1,me=!1,be=!1,Ie=!1,De=!1;const dt=!!ee.readOnly;if(!dt){var vt;se=Zn((vt=ee.toolbox)!=null?vt:null),ce=xt(se),_e=ee.trashcan,_e=_e===void 0?ce:_e,me=ee.collapse,me=me===void 0?ce:me,be=ee.comments,be=be===void 0?ce:be,Ie=ee.disable,Ie=Ie===void 0?ce:Ie,De=ee.sounds,De=De===void 0?!0:De}vt=ee.maxTrashcanContents,_e?vt===void 0&&(vt=32):vt=0;const ai=!!ee.rtl;let li=ee.horizontalLayout;li===void 0&&(li=!1);var on=ee.toolboxPosition!=="end";on=li?on?Gt.TOP:Gt.BOTTOM:on===ai?Gt.RIGHT:Gt.LEFT;let qr=ee.css;qr===void 0&&(qr=!0);let zo="https://blockly-demo.appspot.com/static/media/";ee.media&&(zo=ee.media.endsWith("/")?ee.media:ee.media+"/");const em=ee.oneBasedIndex,Qm=ee.renderer||"geras",e$=ee.plugins||{};let ad=ee.modalInputs;ad===void 0&&(ad=!0),this.RTL=ai,this.oneBasedIndex=em===void 0?!0:em,this.collapse=me,this.comments=be,this.disable=Ie,this.readOnly=dt,this.maxBlocks=ee.maxBlocks||1/0;let tm;this.maxInstances=(tm=ee.maxInstances)!=null?tm:null,this.modalInputs=ad,this.pathToMedia=zo,this.hasCategories=ce,this.moveOptions=yn.parseMoveOptions(ee,ce),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=_e,this.maxTrashcanContents=vt,this.hasSounds=De,this.hasCss=qr,this.horizontalLayout=li,this.languageTree=se,this.gridOptions=yn.parseGridOptions(ee),this.zoomOptions=yn.parseZoomOptions(ee),this.toolboxPosition=on,this.theme=yn.parseThemeOptions(ee),this.renderer=Qm;let im;this.rendererOverrides=(im=ee.rendererOverrides)!=null?im:null;let nm;this.parentWorkspace=(nm=ee.parentWorkspace)!=null?nm:null,this.plugins=e$}static parseMoveOptions(ee,se){const ce=ee.move||{},_e={};return ce.scrollbars===void 0&&ee.scrollbars===void 0?_e.scrollbars=se:typeof ce.scrollbars=="object"?(_e.scrollbars={horizontal:!!ce.scrollbars.horizontal,vertical:!!ce.scrollbars.vertical},_e.scrollbars.horizontal&&_e.scrollbars.vertical?_e.scrollbars=!0:_e.scrollbars.horizontal||_e.scrollbars.vertical||(_e.scrollbars=!1)):_e.scrollbars=!!ce.scrollbars||!!ee.scrollbars,_e.wheel=_e.scrollbars&&ce.wheel!==void 0?!!ce.wheel:typeof _e.scrollbars=="object",_e.drag=_e.scrollbars?ce.drag===void 0?!0:!!ce.drag:!1,_e}static parseZoomOptions(ee){ee=ee.zoom||{};const se={};return se.controls=ee.controls===void 0?!1:!!ee.controls,se.wheel=ee.wheel===void 0?!1:!!ee.wheel,se.startScale=ee.startScale===void 0?1:Number(ee.startScale),se.maxScale=ee.maxScale===void 0?3:Number(ee.maxScale),se.minScale=ee.minScale===void 0?.3:Number(ee.minScale),se.scaleSpeed=ee.scaleSpeed===void 0?1.2:Number(ee.scaleSpeed),se.pinch=ee.pinch===void 0?se.wheel||se.controls:!!ee.pinch,se}static parseGridOptions(ee){ee=ee.grid||{};const se={};return se.spacing=Number(ee.spacing)||0,se.colour=ee.colour||"#888",se.length=ee.length===void 0?1:Number(ee.length),se.snap=0<se.spacing&&!!ee.snap,se}static parseThemeOptions(ee){return ee=ee.theme||ua,typeof ee=="string"?ue($t.THEME,ee):ee instanceof rr?ee:rr.defineTheme(ee.name||"builtin"+$e(),ee)}},Cg={fromJsonInternal:I_},ha={TEST_ONLY:Cg};ha.fromJson=ne.fromJson$$module$build$src$core$field_registry,ha.register=Gn,ha.unregister=v_;var rn=class extends oi{constructor(ee,se,ce){super(oi.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,ee!==oi.SKIP_SETUP&&(Array.isArray(ee)?(this.validateOptions(ee),ee=this.trimOptions(ee),this.menuGenerator_=ee.options,this.prefixField=ee.prefix||null,this.suffixField=ee.suffix||null):this.menuGenerator_=ee,this.selectedOption=this.getOptions(!1)[0],ce&&this.configure_(ce),this.setValue(this.selectedOption[1]),se&&this.setValidator(se))}fromXml(ee){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(ee.textContent)}loadState(ee){this.loadLegacyState(rn,ee)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(ee))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=lt(Ye.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&Ct(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let ee;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((ee=this.getSourceBlock())!=null&&ee.isShadow())}createTextArrow_(){this.arrow=lt(Ye.TSPAN,{},this.textElement_);let ee;this.arrow.appendChild(document.createTextNode((ee=this.getSourceBlock())!=null&&ee.RTL?rn.ARROW_CHAR+" ":" "+rn.ARROW_CHAR)),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.arrow.setAttribute("dominant-baseline","central");let se;(se=this.getSourceBlock())!=null&&se.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=lt(Ye.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(hn,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(ee){var se=this.getSourceBlock();if(!se)throw new Si;this.dropdownCreate(),this.menu_.openingCoords=ee&&typeof ee.clientX=="number"?new yt(ee.clientX,ee.clientY):null,pl(),ee=this.menu_.render(_l()),Ct(ee,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(se=se.getColour(),ja(se,this.sourceBlock_.style.colourTertiary)),Ya(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem&&(this.menu_.setHighlighted(this.selectedMenuItem),fn(this.selectedMenuItem.getElement(),_l(),!0)),this.applyColour()}dropdownCreate(){const ee=this.getSourceBlock();if(!ee)throw new Si;const se=new Vu;se.setRole(Nn.LISTBOX),this.menu_=se;const ce=this.getOptions(!1);this.selectedMenuItem=null;for(let me=0;me<ce.length;me++){const[be,Ie]=ce[me];if(typeof be=="object"){var _e=new Image(be.width,be.height);_e.src=be.src,_e.alt=be.alt||""}else _e=be;_e=new zu(_e,Ie),_e.setRole(Nn.OPTION),_e.setRightToLeft(ee.RTL),_e.setCheckable(!0),se.addChild(_e),_e.setChecked(Ie===this.value_),Ie===this.value_&&(this.selectedMenuItem=_e),_e.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(ee){gl(this,!0),this.onItemSelected_(this.menu_,ee)}onItemSelected_(ee,se){this.setValue(se.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(ee){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:ee&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),this.validateOptions(this.generatedOptions),this.generatedOptions)}doClassValidation_(ee){return this.getOptions(!0).some(se=>se[1]===ee)?ee:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+ee),null)}doValueUpdate_(ee){super.doValueUpdate_(ee),ee=this.getOptions(!0);for(let se=0,ce;ce=ee[se];se++)ce[1]===this.value_&&(this.selectedOption=ce)}applyColour(){const ee=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",ee.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",ee.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow&&(this.sourceBlock_.isShadow()?this.arrow.style.fill=ee.colourSecondary:this.arrow.style.fill=ee.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const ee=this.selectedOption&&this.selectedOption[0];ee&&typeof ee=="object"?this.renderSelectedImage(ee):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(ee){const se=this.getSourceBlock();if(!se)throw new Si;this.imageElement.style.display="",this.imageElement.setAttributeNS(hn,"xlink:href",ee.src),this.imageElement.setAttribute("height",String(ee.height)),this.imageElement.setAttribute("width",String(ee.width));const ce=Number(ee.height);ee=Number(ee.width);var _e=!!this.borderRect_;const me=Math.max(_e?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,ce+rn.IMAGE_Y_PADDING);_e=_e?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let be;be=this.svgArrow?this.positionSVGArrow(ee+_e,me/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):Ki(this.arrow,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=ee+be+2*_e,this.size_.height=me;let Ie=0;se.RTL?this.imageElement.setAttribute("x",`${_e+be}`):(Ie=ee+be,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${_e}`)),this.imageElement.setAttribute("y",String(me/2-ce/2)),this.positionTextElement_(Ie+_e,ee+be)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var ee=this.getTextElement();Ct(ee,"blocklyDropdownText"),ee.setAttribute("text-anchor","start");var se=!!this.borderRect_;ee=Math.max(se?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const ce=Ki(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);se=se?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let _e=0;this.svgArrow&&(_e=this.positionSVGArrow(ce+se,ee/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=ce+_e+2*se,this.size_.height=ee,this.positionTextElement_(se,ce)}positionSVGArrow(ee,se){if(!this.svgArrow)return 0;const ce=this.getSourceBlock();if(!ce)throw new Si;const _e=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,me=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,be=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(ce.RTL?_e:ee+me)+","+se+")"),be+me}getText_(){if(!this.selectedOption)return null;const ee=this.selectedOption[0];return typeof ee=="object"?ee.alt:ee}static fromJson(ee){if(!ee.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(ee.options,void 0,ee)}trimOptions(ee){let se=!1;const ce=ee.map(([Ie,De])=>typeof Ie=="string"?[bi(Ie),De]:(se=!0,[Ie.alt!==null?Object.assign({},Ie,{alt:bi(Ie.alt)}):Object.assign({},Ie),De]));if(se||2>ee.length)return{options:ce};var _e=ce.map(([Ie])=>Ie),me=io(_e);ee=sc(_e,me);const be=rc(_e,me);return!ee&&!be||me<=ee+be?{options:ce}:(me=ee?_e[0].substring(0,ee-1):void 0,_e=be?_e[0].substr(1-be):void 0,{options:this.applyTrim(ce,ee,be),prefix:me,suffix:_e})}applyTrim(ee,se,ce){return ee.map(([_e,me])=>[_e.substring(se,_e.length-ce),me])}validateOptions(ee){if(!Array.isArray(ee))throw TypeError("FieldDropdown options must be an array.");if(!ee.length)throw TypeError("FieldDropdown options must not be an empty array.");let se=!1;for(let ce=0;ce<ee.length;ce++){const _e=ee[ce];Array.isArray(_e)?typeof _e[1]!="string"?(se=!0,console.error(`Invalid option[${ce}]: Each FieldDropdown option id must be a string. 
          Found ${_e[1]} in: ${_e}`)):_e[0]&&typeof _e[0]!="string"&&typeof _e[0].src!="string"&&(se=!0,console.error(`Invalid option[${ce}]: Each FieldDropdown option must have a string 
          label or image description. Found ${_e[0]} in: ${_e}`)):(se=!0,console.error(`Invalid option[${ce}]: Each FieldDropdown option must be an array.
          Found: ${_e}`))}if(se)throw TypeError("Found invalid FieldDropdown options.")}};rn.CHECKMARK_OVERHANG=25,rn.MAX_MENU_HEIGHT_VH=.45,rn.ARROW_CHAR="▾",rn.IMAGE_Y_OFFSET=5,rn.IMAGE_Y_PADDING=2*rn.IMAGE_Y_OFFSET,Gn("field_dropdown",rn);var kg=class{constructor(ee,se){this.bubble=ee,this.workspace=se,this.startLoc=null,this.inGroup=!1}isMovable(){return!0}startDrag(){(this.inGroup=!!ne.getGroup$$module$build$src$core$events$utils())||ne.setGroup$$module$build$src$core$events$utils(!0),this.startLoc=this.bubble.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let ee;(ee=this.workspace.getLayerManager())==null||ee.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}drag(ee){this.bubble.moveDuringDrag(ee)}endDrag(){this.workspace.setResizesEnabled(!0),this.inGroup||ne.setGroup$$module$build$src$core$events$utils(!1);let ee;(ee=this.workspace.getLayerManager())==null||ee.moveOffDragLayer(this.bubble,oa),this.bubble.setDragging(!1)}revertDrag(){this.startLoc&&this.bubble.moveDuringDrag(this.startLoc)}},_n,ni=class{constructor(ee,se,ce){this.workspace=ee,this.anchor=se,this.ownerRect=ce,this.size=new Xt(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.dragStrategy=new kg(this,this.workspace),this.id=$e(),this.svgRoot=lt(Ye.G,{class:"blocklyBubble"},ee.getBubbleCanvas()),ee=lt(Ye.G,{filter:`url(#${this.workspace.getRenderer().getConstants().embossFilterId})`},this.svgRoot),this.tail=lt(Ye.PATH,{class:"blocklyBubbleTail"},ee),this.background=lt(Ye.RECT,{class:"blocklyDraggable",x:0,y:0,rx:_n.BORDER_WIDTH,ry:_n.BORDER_WIDTH},ee),this.contentContainer=lt(Ye.G,{},this.svgRoot),Nt(this.background,"pointerdown",this,this.onMouseDown)}dispose(){We(this.svgRoot),this.disposed=!0}setAnchorLocation(ee,se=!1){this.anchor=ee,se?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(ee,se){this.relativeLeft=ee,this.relativeTop=se,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(ee,se=!1){ee.width=Math.max(ee.width,_n.MIN_SIZE),ee.height=Math.max(ee.height,_n.MIN_SIZE),this.size=ee,this.background.setAttribute("width",`${ee.width}`),this.background.setAttribute("height",`${ee.height}`),se?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(ee){this.colour=ee,this.tail.setAttribute("fill",ee),this.background.setAttribute("fill",ee)}onMouseDown(ee){let se;(se=this.workspace.getGesture(ee))==null||se.handleBubbleStart(ee,this),this.bringToFront(),ne.setSelected$$module$build$src$core$common(this)}positionRelativeToAnchor(){let ee=this.anchor.x;ee=this.workspace.RTL?ee-(this.relativeLeft+this.size.width):ee+this.relativeLeft,this.moveTo(ee,this.relativeTop+this.anchor.y)}moveTo(ee,se){this.svgRoot.setAttribute("transform",`translate(${ee}, ${se})`)}positionByRect(ee=new ri(0,0,0,0)){var se=this.workspace.getMetricsManager().getViewMetrics(!0),ce=this.getOptimalRelativeLeft(se),_e=this.getOptimalRelativeTop(se);const me={x:ce,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},be={x:-this.size.width-30,y:_e};_e={x:ee.getWidth(),y:_e};var Ie={x:ce,y:ee.getHeight()};ce=ee.getWidth()<ee.getHeight()?_e:Ie,ee=ee.getWidth()<ee.getHeight()?Ie:_e,_e=this.getOverlap(me,se),Ie=this.getOverlap(be,se);const De=this.getOverlap(ce,se);se=this.getOverlap(ee,se),se=Math.max(_e,Ie,De,se),_e===se?(this.relativeLeft=me.x,this.relativeTop=me.y):Ie===se?(this.relativeLeft=be.x,this.relativeTop=be.y):De===se?(this.relativeLeft=ce.x,this.relativeTop=ce.y):(this.relativeLeft=ee.x,this.relativeTop=ee.y),this.positionRelativeToAnchor()}getOverlap(ee,se){var ce=this.workspace.RTL?this.anchor.x-ee.x-this.size.width:ee.x+this.anchor.x;return ee=ee.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(ce+this.size.width,se.left+se.width)-Math.max(ce,se.left))*(Math.min(ee+this.size.height,se.top+se.height)-Math.max(ee,se.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(ee){let se=-this.size.width/4;if(this.size.width>ee.width)return se;if(ee=this.getWorkspaceViewRect(ee),this.workspace.RTL){var ce=this.anchor.x-se;ce-this.size.width<ee.left?se=-(ee.left-this.anchor.x+this.size.width):ce>ee.right&&(se=-(ee.right-this.anchor.x))}else{ce=se+this.anchor.x;const _e=ce+this.size.width;ce<ee.left?se=ee.left-this.anchor.x:_e>ee.right&&(se=ee.right-this.anchor.x-this.size.width)}return se}getOptimalRelativeTop(ee){let se=-this.size.height/4;if(this.size.height>ee.height)return se;const ce=this.anchor.y+se,_e=ce+this.size.height;return ee=this.getWorkspaceViewRect(ee),ce<ee.top?se=ee.top-this.anchor.y:_e>ee.bottom&&(se=ee.bottom-this.anchor.y-this.size.height),se}getWorkspaceViewRect(ee){const se=ee.top;let ce=ee.top+ee.height,_e=ee.left;return ee=ee.left+ee.width,ce-=this.getScrollbarThickness(),this.workspace.RTL?_e-=this.getScrollbarThickness():ee-=this.getScrollbarThickness(),new ri(se,ce,_e,ee)}getScrollbarThickness(){return yi.scrollbarThickness/this.workspace.scale}renderTail(){const ee=[];var se=this.size.width/2,ce=this.size.height/2,_e=-this.relativeLeft,me=-this.relativeTop;if(se===_e&&ce===me)ee.push("M "+se+","+ce);else{me-=ce,_e-=se,this.workspace.RTL&&(_e*=-1);var be=Math.sqrt(me*me+_e*_e),Ie=Math.acos(_e/be);0>me&&(Ie=2*Math.PI-Ie);var De=Ie+Math.PI/2;De>2*Math.PI&&(De-=2*Math.PI);var dt=Math.sin(De);const ai=Math.cos(De);let li=(this.size.width+this.size.height)/_n.TAIL_THICKNESS;li=Math.min(li,this.size.width,this.size.height)/4,De=1-_n.ANCHOR_RADIUS/be,_e=se+De*_e,me=ce+De*me,De=se+li*ai;const on=ce+li*dt;se-=li*ai,ce-=li*dt,dt=dl(this.workspace.RTL?-_n.TAIL_ANGLE:_n.TAIL_ANGLE),dt=Ie+dt,dt>2*Math.PI&&(dt-=2*Math.PI),Ie=Math.sin(dt)*be/_n.TAIL_BEND,be=Math.cos(dt)*be/_n.TAIL_BEND,ee.push("M"+De+","+on),ee.push("C"+(De+be)+","+(on+Ie)+" "+_e+","+me+" "+_e+","+me),ee.push("C"+_e+","+me+" "+(se+be)+","+(ce+Ie)+" "+se+","+ce)}ee.push("z");let vt;(vt=this.tail)==null||vt.setAttribute("d",ee.join(" "))}bringToFront(){let ee;const se=(ee=this.svgRoot)==null?void 0:ee.parentNode;return this.svgRoot&&(se==null?void 0:se.lastChild)!==this.svgRoot?(se==null||se.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new yt(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(ee){this.moveTo(ee.x,ee.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-ee.x-this.size.width:ee.x-this.anchor.x,this.relativeTop=ee.y-this.anchor.y,this.renderTail()}setDragging(ee){}setDeleteStyle(ee){}isDeletable(){return!1}showContextMenu(ee){}isMovable(){return!0}startDrag(){this.dragStrategy.startDrag()}drag(ee){this.dragStrategy.drag(ee)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){}unselect(){}};_n=ni,ni.BORDER_WIDTH=6,ni.DOUBLE_BORDER=2*_n.BORDER_WIDTH,ni.MIN_SIZE=_n.DOUBLE_BORDER,ni.TAIL_THICKNESS=1,ni.TAIL_ANGLE=20,ni.TAIL_BEND=4,ni.ANCHOR_RADIUS=8;var us=class extends ni{constructor(ee,se,ce,_e){super(se,ce,_e),this.workspace=se,this.anchor=ce,this.ownerRect=_e,this.autoLayout=!0,se=new yn(ee),this.validateWorkspaceOptions(se),this.svgDialog=lt(Ye.SVG,{x:ni.BORDER_WIDTH,y:ni.BORDER_WIDTH},this.contentContainer),ee.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new yn(ee)),this.miniWorkspace.internalIsMutator=!0,ee=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(ee),se.languageTree&&(ee.insertBefore(this.miniWorkspace.addFlyout(Ye.G),this.miniWorkspace.getCanvas()),ee=this.miniWorkspace.getFlyout(),ee==null||ee.init(this.miniWorkspace),ee==null||ee.show(se.languageTree)),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let me,be;(me=this.miniWorkspace.getFlyout())==null||(be=me.getWorkspace())==null||be.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(ee){this.miniWorkspace.addChangeListener(ee)}validateWorkspaceOptions(ee){if(ee.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(ee.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(ee.zoomOptions.controls||ee.zoomOptions.wheel||ee.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(ee.moveOptions.scrollbars||ee.moveOptions.wheel||ee.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(ee.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging())for(const ee of this.miniWorkspace.getTopBlocks(!1)){const se=ee.getRelativeToSurfaceXY();if(20>se.y&&ee.moveBy(0,20-se.y),ee.RTL){let ce=-20;const _e=this.miniWorkspace.getFlyout();_e&&(ce-=_e.getWidth()),se.x>ce&&ee.moveBy(ce-se.x,0)}else 20>se.x&&ee.moveBy(20-se.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()){var ee=this.getSize(),se=this.calculateWorkspaceSize();Math.abs(ee.width-se.width)<us.MINIMUM_VIEW_CHANGE&&Math.abs(ee.height-se.height)<us.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${se.width}px`),this.svgDialog.setAttribute("height",`${se.height}px`),this.miniWorkspace.setCachedParentSvgSize(se.width,se.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${se.width}, 0)`),this.setSize(new Xt(se.width+ni.DOUBLE_BORDER,se.height+ni.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var ee=this.miniWorkspace.getCanvas().getBBox();let se=ee.width+us.MARGIN;ee=ee.height+us.MARGIN;const ce=this.miniWorkspace.getFlyout();if(ce){const _e=ce.getWorkspace().getMetricsManager().getScrollMetrics();ee=Math.max(ee,_e.height+20),se+=ce.getWidth()}return new Xt(se,ee)}updateBlockStyles(){for(var ee of this.miniWorkspace.getAllBlocks(!1))ee.setStyle(ee.getStyleName());let se;if(ee=(se=this.miniWorkspace.getFlyout())==null?void 0:se.getWorkspace())for(const ce of ee.getAllBlocks(!1))ce.setStyle(ce.getStyleName())}moveDuringDrag(ee){super.moveDuringDrag(ee),this.autoLayout=!1}moveTo(ee,se){super.moveTo(ee,se),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(ee){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};us.MINIMUM_VIEW_CHANGE=10,us.MARGIN=3*ni.DOUBLE_BORDER;var da=class{constructor(ee){this.sourceBlock=ee,this.offsetInBlock=new yt(0,0),this.workspaceLocation=new yt(0,0),this.svgRoot=null,this.tooltip=ee}getType(){throw Error("Icons must implement getType")}initView(ee){if(!this.svgRoot){var se=this.sourceBlock;this.svgRoot=lt(Ye.G,{class:"blocklyIconGroup"}),se.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),Nt(this.svgRoot,"pointerdown",this,ee),this.svgRoot.tooltip=this,Tr(this.svgRoot)}}dispose(){$l(this.svgRoot),We(this.svgRoot)}getWeight(){return-1}getSize(){return new Xt(0,0)}setTooltip(ee){this.tooltip=ee??this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",fr(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(ee){this.offsetInBlock=ee,this.updateSvgRootOffset()}updateSvgRootOffset(){let ee;(ee=this.svgRoot)==null||ee.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(ee){this.workspaceLocation=yt.sum(ee,this.offsetInBlock)}onClick(){}isClickableInFlyout(ee){return!0}},_a,pa;_a=17,pa=16,ne.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends da{constructor(ee,se){super(se),this.flyoutBlockTypes=ee,this.sourceBlock=se,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return ne.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(ee){this.svgRoot||(super.initView(ee),lt(Ye.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),lt(Ye.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),lt(Ye.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),Ct(this.svgRoot,"blockly-icon-mutator"))}dispose(){super.dispose();let ee;(ee=this.miniWorkspaceBubble)==null||ee.dispose()}getWeight(){return ne.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new Xt(_a,_a)}applyColour(){super.applyColour();let ee;(ee=this.miniWorkspaceBubble)==null||ee.setColour(this.sourceBlock.style.colourPrimary);let se;(se=this.miniWorkspaceBubble)==null||se.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(ee){super.onLocationChange(ee);let se;(se=this.miniWorkspaceBubble)==null||se.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(ee){const se=this;return mt.asyncExecutePromiseGeneratorFunction(function*(){if(se.bubbleIsVisible()!==ee){if(yield cn(),ee){se.miniWorkspaceBubble=new us(se.getMiniWorkspaceConfig(),se.sourceBlock.workspace,se.getAnchorLocation(),se.getBubbleOwnerRect()),se.applyColour(),se.createRootBlock(),se.addSaveConnectionsListener();let ce;(ce=se.miniWorkspaceBubble)==null||ce.addWorkspaceChangeListener(se.createMiniWorkspaceChangeListener())}else{let ce;(ce=se.miniWorkspaceBubble)==null||ce.dispose(),se.miniWorkspaceBubble=null,se.saveConnectionsListener&&se.sourceBlock.workspace.removeChangeListener(se.saveConnectionsListener),se.saveConnectionsListener=null}Ae(new(Le(it.BUBBLE_OPEN))(se.sourceBlock,ee,"mutator"))}})}getMiniWorkspaceConfig(){let ee;const se={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(ee=this.sourceBlock.workspace.options.rendererOverrides)!=null?ee:void 0};return this.flyoutBlockTypes.length&&(se.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(ce=>({kind:"block",type:ce}))}),se}getAnchorLocation(){const ee=_a/2;return yt.sum(this.workspaceLocation,new yt(ee,ee))}getBubbleOwnerRect(){const ee=this.sourceBlock.getSvgRoot().getBBox();return new ri(ee.y,ee.y+ee.height,ee.x,ee.x+ee.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var ee of this.rootBlock.getDescendants(!1))ee.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let se,ce,_e,me;ee=(me=(se=this.miniWorkspaceBubble)==null||(ce=se.getWorkspace())==null||(_e=ce.getFlyout())==null?void 0:_e.getWidth())!=null?me:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(ee+pa):pa,pa)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return ee=>{ne.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(ee)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(ee){return ee.isUiEvent||Ee(ee)||ve(ee)&&ee.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var ee=ne.getGroup$$module$build$src$core$events$utils();ee||ne.setGroup$$module$build$src$core$events$utils(!0);var se=er.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var ce=er.getExtraBlockState_(this.sourceBlock);se!==ce&&Ae(new(Le(it.BLOCK_CHANGE))(this.sourceBlock,"mutation",null,se,ce)),ne.setGroup$$module$build$src$core$events$utils(ee)}}getWorkspace(){let ee;return(ee=this.miniWorkspaceBubble)==null?void 0:ee.getWorkspace()}},ne.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=wi.MUTATOR,ne.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,ne.MutatorIcon$$module$build$src$core$icons$mutator_icon;var Hr=Object.create(null),Cm={allExtensions:Hr};ne.register$$module$build$src$core$extensions("parent_tooltip_when_inline",x_);var Dn={TEST_ONLY:Cm};Dn.apply=Ol,Dn.buildTooltipForDropdown=ne.buildTooltipForDropdown$$module$build$src$core$extensions,Dn.buildTooltipWithFieldText=ne.buildTooltipWithFieldText$$module$build$src$core$extensions,Dn.isRegistered=Mc,Dn.register=ne.register$$module$build$src$core$extensions,Dn.registerMixin=ne.registerMixin$$module$build$src$core$extensions,Dn.registerMutator=ne.registerMutator$$module$build$src$core$extensions,Dn.runAfterPageLoad=N_,Dn.unregister=O_;var Vt;(function(ee){ee[ee.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",ee[ee.MAC_ENTER=3]="MAC_ENTER",ee[ee.BACKSPACE=8]="BACKSPACE",ee[ee.TAB=9]="TAB",ee[ee.NUM_CENTER=12]="NUM_CENTER",ee[ee.ENTER=13]="ENTER",ee[ee.SHIFT=16]="SHIFT",ee[ee.CTRL=17]="CTRL",ee[ee.ALT=18]="ALT",ee[ee.PAUSE=19]="PAUSE",ee[ee.CAPS_LOCK=20]="CAPS_LOCK",ee[ee.ESC=27]="ESC",ee[ee.SPACE=32]="SPACE",ee[ee.PAGE_UP=33]="PAGE_UP",ee[ee.PAGE_DOWN=34]="PAGE_DOWN",ee[ee.END=35]="END",ee[ee.HOME=36]="HOME",ee[ee.LEFT=37]="LEFT",ee[ee.UP=38]="UP",ee[ee.RIGHT=39]="RIGHT",ee[ee.DOWN=40]="DOWN",ee[ee.PLUS_SIGN=43]="PLUS_SIGN",ee[ee.PRINT_SCREEN=44]="PRINT_SCREEN",ee[ee.INSERT=45]="INSERT",ee[ee.DELETE=46]="DELETE",ee[ee.ZERO=48]="ZERO",ee[ee.ONE=49]="ONE",ee[ee.TWO=50]="TWO",ee[ee.THREE=51]="THREE",ee[ee.FOUR=52]="FOUR",ee[ee.FIVE=53]="FIVE",ee[ee.SIX=54]="SIX",ee[ee.SEVEN=55]="SEVEN",ee[ee.EIGHT=56]="EIGHT",ee[ee.NINE=57]="NINE",ee[ee.FF_SEMICOLON=59]="FF_SEMICOLON",ee[ee.FF_EQUALS=61]="FF_EQUALS",ee[ee.FF_DASH=173]="FF_DASH",ee[ee.FF_HASH=163]="FF_HASH",ee[ee.QUESTION_MARK=63]="QUESTION_MARK",ee[ee.AT_SIGN=64]="AT_SIGN",ee[ee.A=65]="A",ee[ee.B=66]="B",ee[ee.C=67]="C",ee[ee.D=68]="D",ee[ee.E=69]="E",ee[ee.F=70]="F",ee[ee.G=71]="G",ee[ee.H=72]="H",ee[ee.I=73]="I",ee[ee.J=74]="J",ee[ee.K=75]="K",ee[ee.L=76]="L",ee[ee.M=77]="M",ee[ee.N=78]="N",ee[ee.O=79]="O",ee[ee.P=80]="P",ee[ee.Q=81]="Q",ee[ee.R=82]="R",ee[ee.S=83]="S",ee[ee.T=84]="T",ee[ee.U=85]="U",ee[ee.V=86]="V",ee[ee.W=87]="W",ee[ee.X=88]="X",ee[ee.Y=89]="Y",ee[ee.Z=90]="Z",ee[ee.META=91]="META",ee[ee.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",ee[ee.CONTEXT_MENU=93]="CONTEXT_MENU",ee[ee.NUM_ZERO=96]="NUM_ZERO",ee[ee.NUM_ONE=97]="NUM_ONE",ee[ee.NUM_TWO=98]="NUM_TWO",ee[ee.NUM_THREE=99]="NUM_THREE",ee[ee.NUM_FOUR=100]="NUM_FOUR",ee[ee.NUM_FIVE=101]="NUM_FIVE",ee[ee.NUM_SIX=102]="NUM_SIX",ee[ee.NUM_SEVEN=103]="NUM_SEVEN",ee[ee.NUM_EIGHT=104]="NUM_EIGHT",ee[ee.NUM_NINE=105]="NUM_NINE",ee[ee.NUM_MULTIPLY=106]="NUM_MULTIPLY",ee[ee.NUM_PLUS=107]="NUM_PLUS",ee[ee.NUM_MINUS=109]="NUM_MINUS",ee[ee.NUM_PERIOD=110]="NUM_PERIOD",ee[ee.NUM_DIVISION=111]="NUM_DIVISION",ee[ee.F1=112]="F1",ee[ee.F2=113]="F2",ee[ee.F3=114]="F3",ee[ee.F4=115]="F4",ee[ee.F5=116]="F5",ee[ee.F6=117]="F6",ee[ee.F7=118]="F7",ee[ee.F8=119]="F8",ee[ee.F9=120]="F9",ee[ee.F10=121]="F10",ee[ee.F11=122]="F11",ee[ee.F12=123]="F12",ee[ee.NUMLOCK=144]="NUMLOCK",ee[ee.SCROLL_LOCK=145]="SCROLL_LOCK",ee[ee.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",ee[ee.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",ee[ee.SEMICOLON=186]="SEMICOLON",ee[ee.DASH=189]="DASH",ee[ee.EQUALS=187]="EQUALS",ee[ee.COMMA=188]="COMMA",ee[ee.PERIOD=190]="PERIOD",ee[ee.SLASH=191]="SLASH",ee[ee.APOSTROPHE=192]="APOSTROPHE",ee[ee.TILDE=192]="TILDE",ee[ee.SINGLE_QUOTE=222]="SINGLE_QUOTE",ee[ee.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",ee[ee.BACKSLASH=220]="BACKSLASH",ee[ee.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",ee[ee.WIN_KEY=224]="WIN_KEY",ee[ee.MAC_FF_META=224]="MAC_FF_META",ee[ee.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",ee[ee.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",ee[ee.WIN_IME=229]="WIN_IME",ee[ee.VK_NONAME=252]="VK_NONAME",ee[ee.PHANTOM=255]="PHANTOM"})(Vt||(Vt={}));var hs={};hs.arc=Ei,hs.curve=nn,hs.line=kr,hs.lineOnAxis=wt,hs.lineTo=Wn,hs.moveBy=ci,hs.moveTo=Ni,hs.point=Mt;var di={};di.Coordinate=yt,di.KeyCodes=Vt,di.Rect=ri,di.Size=Xt,di.Svg=Ye,di.aria=bo,di.array=Up,di.browserEvents=rs,di.colour=En,di.deprecation=Tp,di.dom=Bi,di.extensions=Dn,di.idGenerator=vu,di.math=Zl,di.object=Sg,di.parsing=wo,di.string=xr,di.style=Ss,di.svgMath=Ks,di.svgPaths=hs,di.toolbox=Cs,di.userAgent=um,di.xml=Or;var vg=class extends ni{constructor(ee,se,ce){super(ee,se,ce),this.workspace=ee,this.anchor=se,this.ownerRect=ce,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.textChangeListeners=[],this.sizeChangeListeners=[],this.text="",this.DEFAULT_SIZE=new Xt(160+ni.DOUBLE_BORDER,80+ni.DOUBLE_BORDER),this.MIN_SIZE=new Xt(45+ni.DOUBLE_BORDER,20+ni.DOUBLE_BORDER),this.editable=!0,Ct(this.svgRoot,"blocklyTextInputBubble"),{inputRoot:this.inputRoot,textArea:this.textArea}=this.createEditor(this.contentContainer),this.resizeGroup=this.createResizeHandle(this.svgRoot,ee),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.text}setText(ee){this.text=ee,this.textArea.value=ee,this.onTextChange()}setEditable(ee){(this.editable=ee)?this.textArea.removeAttribute("readonly"):this.textArea.setAttribute("readonly","")}isEditable(){return this.editable}addTextChangeListener(ee){this.textChangeListeners.push(ee)}addSizeChangeListener(ee){this.sizeChangeListeners.push(ee)}createEditor(ee){ee=lt(Ye.FOREIGNOBJECT,{x:ni.BORDER_WIDTH,y:ni.BORDER_WIDTH},ee);const se=document.createElementNS(zn,"body");se.setAttribute("xmlns",zn),se.className="blocklyMinimalBody";const ce=document.createElementNS(zn,"textarea");return ce.className="blocklyTextarea blocklyText",ce.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),se.appendChild(ce),ee.appendChild(se),this.bindTextAreaEvents(ce),setTimeout(()=>{ce.focus()},0),{inputRoot:ee,textArea:ce}}bindTextAreaEvents(ee){Nt(ee,"wheel",this,se=>{se.stopPropagation()}),Nt(ee,"focus",this,this.onStartEdit,!0),Nt(ee,"change",this,this.onTextChange)}createResizeHandle(ee,se){return ee=lt(Ye.IMAGE,{class:"blocklyResizeHandle",href:`${se.options.pathToMedia}resize-handle.svg`},ee),Nt(ee,"pointerdown",this,this.onResizePointerDown),ee}setSize(ee,se=!1){ee.width=Math.max(ee.width,this.MIN_SIZE.width),ee.height=Math.max(ee.height,this.MIN_SIZE.height);const ce=ee.width-ni.DOUBLE_BORDER,_e=ee.height-ni.DOUBLE_BORDER;this.inputRoot.setAttribute("width",`${ce}`),this.inputRoot.setAttribute("height",`${_e}`),this.resizeGroup.setAttribute("y",`${_e}`),this.workspace.RTL?this.resizeGroup.setAttribute("x",`${-ni.DOUBLE_BORDER}`):this.resizeGroup.setAttribute("x",`${ce}`),super.setSize(ee,se),this.onSizeChange()}getSize(){return super.getSize()}onResizePointerDown(ee){this.bringToFront(),_i(ee)||(Sl(this.workspace,ee,new yt(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=Nt(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=Nt(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),ee.stopPropagation()}onResizePointerUp(ee){$i(),this.resizePointerUpListener&&(Yt(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(Yt(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(ee){ee=Cl(this.workspace,ee),this.setSize(new Xt(this.workspace.RTL?-ee.x:ee.x,ee.y),!1),this.onSizeChange()}onStartEdit(){this.bringToFront()&&this.textArea.focus()}onTextChange(){this.text=this.textArea.value;for(const ee of this.textChangeListeners)ee()}onSizeChange(){for(const ee of this.sizeChangeListeners)ee()}};si(`
.blocklyTextInputBubble .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 0;
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}
`);var gh={};gh.register=Pc,gh.unregister=D_;var fh=17,Ig=160,Og=80,ds=class extends da{constructor(ee){super(ee),this.sourceBlock=ee,this.textInputBubble=null,this.text="",this.bubbleSize=new Xt(Ig,Og),this.bubbleVisiblity=!1}getType(){return ds.TYPE}initView(ee){this.svgRoot||(super.initView(ee),lt(Ye.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),lt(Ye.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),lt(Ye.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),Ct(this.svgRoot,"blockly-icon-comment"))}dispose(){super.dispose();let ee;(ee=this.textInputBubble)==null||ee.dispose()}getWeight(){return ds.WEIGHT}getSize(){return new Xt(fh,fh)}applyColour(){super.applyColour();const ee=this.sourceBlock.style.colourPrimary;let se;(se=this.textInputBubble)==null||se.setColour(ee)}updateEditable(){const ee=this,se=()=>super.updateEditable;return mt.asyncExecutePromiseGeneratorFunction(function*(){se().call(ee),ee.bubbleIsVisible()&&(yield ee.setBubbleVisible(!1),yield ee.setBubbleVisible(!0))})}onLocationChange(ee){super.onLocationChange(ee),ee=this.getAnchorLocation();let se;(se=this.textInputBubble)==null||se.setAnchorLocation(ee)}setText(ee){const se=this.text;Ae(new(Le(it.BLOCK_CHANGE))(this.sourceBlock,"comment",null,se,ee)),this.text=ee;let ce;(ce=this.textInputBubble)==null||ce.setText(this.text)}getText(){return this.text}setBubbleSize(ee){this.bubbleSize=ee;let se;(se=this.textInputBubble)==null||se.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}saveState(){return this.text?{text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width}:null}loadState(ee){let se;this.text=(se=ee.text)!=null?se:"";let ce,_e;this.bubbleSize=new Xt((ce=ee.width)!=null?ce:Ig,(_e=ee.height)!=null?_e:Og);let me;this.bubbleVisiblity=(me=ee.pinned)!=null?me:!1,this.setBubbleVisible(this.bubbleVisiblity)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var ee=this.textInputBubble.getText();this.text!==ee&&(Ae(new(Le(it.BLOCK_CHANGE))(this.sourceBlock,"comment",null,this.text,ee)),this.text=ee)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(ee){const se=this;return mt.asyncExecutePromiseGeneratorFunction(function*(){se.bubbleVisiblity!==ee&&(se.bubbleVisiblity=ee,yield cn(),!se.sourceBlock.rendered||se.sourceBlock.isInFlyout||se.sourceBlock.isInsertionMarker()||(ee?(se.sourceBlock.isEditable()?se.showEditableBubble():se.showNonEditableBubble(),se.applyColour()):se.hideBubble(),Ae(new(Le(it.BUBBLE_OPEN))(se.sourceBlock,ee,"comment"))))})}showEditableBubble(){this.createBubble();let ee;(ee=this.textInputBubble)==null||ee.addTextChangeListener(()=>this.onTextChange());let se;(se=this.textInputBubble)==null||se.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.createBubble();let ee;(ee=this.textInputBubble)==null||ee.setEditable(!1)}createBubble(){this.textInputBubble=new vg(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0)}hideBubble(){let ee;(ee=this.textInputBubble)==null||ee.dispose(),this.textInputBubble=null}getAnchorLocation(){const ee=fh/2;return yt.sum(this.workspaceLocation,new yt(ee,ee))}getBubbleOwnerRect(){return this.sourceBlock.getBoundingRectangleWithoutChildren()}};ds.TYPE=wi.COMMENT,ds.WEIGHT=3,Pc(ds.TYPE,ds);var Rg=class extends Error{constructor(ee){super(`Tried to append an icon of type ${ee.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=ee}},wg={};wg.DuplicateIconType=Rg;var Ag=class extends ni{constructor(ee,se,ce,_e){super(se,ce,_e),this.text=ee,this.workspace=se,this.anchor=ce,this.ownerRect=_e,this.paragraph=this.stringToSvg(ee,this.contentContainer),this.updateBubbleSize()}getText(){return this.text}setText(ee){this.text=ee,We(this.paragraph),this.paragraph=this.stringToSvg(ee,this.contentContainer),this.updateBubbleSize()}stringToSvg(ee,se){return se=this.createParagraph(se),ee=this.createSpans(se,ee),this.workspace.RTL&&this.rightAlignSpans(se.getBBox().width,ee),se}createParagraph(ee){return lt(Ye.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:ni.BORDER_WIDTH},ee)}createSpans(ee,se){return se.split(`
`).map(ce=>{const _e=lt(Ye.TSPAN,{dy:"1em",x:ni.BORDER_WIDTH},ee);return ce=document.createTextNode(ce),_e.appendChild(ce),_e})}rightAlignSpans(ee,se){for(const ce of se)ce.setAttribute("text-anchor","end"),ce.setAttribute("x",`${ee+ni.BORDER_WIDTH}`)}updateBubbleSize(){const ee=this.paragraph.getBBox();this.setSize(new Xt(ee.width+2*ni.BORDER_WIDTH,ee.height+2*ni.BORDER_WIDTH),!0)}},mh=17,_s=class extends da{constructor(ee){super(ee),this.sourceBlock=ee,this.textMap=new Map,this.textBubble=null}getType(){return _s.TYPE}initView(ee){this.svgRoot||(super.initView(ee),lt(Ye.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),lt(Ye.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),lt(Ye.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),Ct(this.svgRoot,"blockly-icon-warning"))}dispose(){super.dispose();let ee;(ee=this.textBubble)==null||ee.dispose()}getWeight(){return _s.WEIGHT}getSize(){return new Xt(mh,mh)}applyColour(){super.applyColour();let ee;(ee=this.textBubble)==null||ee.setColour(this.sourceBlock.style.colourPrimary)}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(ee){super.onLocationChange(ee);let se;(se=this.textBubble)==null||se.setAnchorLocation(this.getAnchorLocation())}addMessage(ee,se){if(this.textMap.get(se)===ee)return this;ee?this.textMap.set(se,ee):this.textMap.delete(se);let ce;return(ce=this.textBubble)==null||ce.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(ee){const se=this;return mt.asyncExecutePromiseGeneratorFunction(function*(){if(se.bubbleIsVisible()!==ee){if(yield cn(),ee)se.textBubble=new Ag(se.getText(),se.sourceBlock.workspace,se.getAnchorLocation(),se.getBubbleOwnerRect()),se.applyColour();else{let ce;(ce=se.textBubble)==null||ce.dispose(),se.textBubble=null}Ae(new(Le(it.BUBBLE_OPEN))(se.sourceBlock,ee,"warning"))}})}getAnchorLocation(){const ee=mh/2;return yt.sum(this.workspaceLocation,new yt(ee,ee))}getBubbleOwnerRect(){const ee=this.sourceBlock.getSvgRoot().getBBox();return new ri(ee.y,ee.y+ee.height,ee.x,ee.x+ee.width)}};_s.TYPE=wi.WARNING,_s.WEIGHT=2;var Os={};Os.CommentIcon=ds,Os.Icon=da,Os.IconType=wi,Os.MutatorIcon=ne.MutatorIcon$$module$build$src$core$icons$mutator_icon,Os.WarningIcon=_s,Os.exceptions=wg,Os.registry=gh,ne.Names$$module$build$src$core$names=class{constructor(ee,se){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=se||"",this.reservedWords=new Set(ee?ee.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(ee){this.variableMap=ee}getNameForUserVariable(ee){return this.variableMap?(ee=this.variableMap.getVariableById(ee))?ee.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(ee){ee=ne.allUsedVarModels$$module$build$src$core$variables(ee);for(let se=0;se<ee.length;se++)this.getName(ee[se].getId(),ne.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(ee){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(ee,se){let ce=ee;se===ne.NameType$$module$build$src$core$names.VARIABLE&&(ee=this.getNameForUserVariable(ee))&&(ce=ee),ee=ce.toLowerCase();const _e=se===ne.NameType$$module$build$src$core$names.VARIABLE||se===ne.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(se)||this.db.set(se,new Map);const me=this.db.get(se);return me.has(ee)?_e+me.get(ee):(se=this.getDistinctName(ce,se),me.set(ee,se.substr(_e.length)),se)}getUserNames(ee){let se;return(ee=(se=this.db.get(ee))==null?void 0:se.keys())?Array.from(ee):[]}getDistinctName(ee,se){ee=this.safeName(ee);let ce=null,_e,me;for(;this.dbReverse.has(ee+((_e=ce)!=null?_e:""))||this.reservedWords.has(ee+((me=ce)!=null?me:""));)ce=ce?ce+1:2;let be;return ee+=(be=ce)!=null?be:"",this.dbReverse.add(ee),(se===ne.NameType$$module$build$src$core$names.VARIABLE||se===ne.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+ee}safeName(ee){return ee?(ee=encodeURI(ee.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".includes(ee[0])&&(ee="my_"+ee)):ee=ne.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",ee}static equals(ee,se){return ee.toLowerCase()===se.toLowerCase()}},function(ee){ee=ee.NameType||(ee.NameType={}),ee.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",ee.VARIABLE="VARIABLE",ee.PROCEDURE="PROCEDURE"}(ne.Names$$module$build$src$core$names||(ne.Names$$module$build$src$core$names={})),ne.NameType$$module$build$src$core$names=ne.Names$$module$build$src$core$names.NameType,ne.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=ne.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,ne.NameType$$module$build$src$core$names,ne.Names$$module$build$src$core$names;var Lg=class extends Map{constructor(){super()}set(ee,se){return this.get(ee)===se?this:(super.set(ee,se),Al(se)&&se.startPublishing(),this)}delete(ee){const se=this.get(ee);return ee=super.delete(ee),ee&&(Al(se)&&se.stopPublishing(),ee)}clear(){if(this.size)for(const ee of this.keys())this.delete(ee)}add(ee){return this.set(ee.getId(),ee)}getProcedures(){return[...this.values()]}},ga,Zi;ga="PROCEDURE",ne.DEFAULT_ARG$$module$build$src$core$procedures="x",Zi={CATEGORY_NAME:ga,DEFAULT_ARG:ne.DEFAULT_ARG$$module$build$src$core$procedures},Zi.ObservableProcedureMap=Lg,Zi.allProcedures=Ll,Zi.findLegalName=ne.findLegalName$$module$build$src$core$procedures,Zi.flyoutCategory=Nl,Zi.getCallers=Gc,Zi.getDefinition=ne.getDefinition$$module$build$src$core$procedures,Zi.isNameUsed=Fc,Zi.isProcedureBlock=bs,Zi.mutateCallers=ne.mutateCallers$$module$build$src$core$procedures,Zi.mutatorOpenListener=Hc,Zi.rename=ne.rename$$module$build$src$core$procedures;var km=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(ee){return Object.prototype.hasOwnProperty.call(this,ee)||(this[ee]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[ee]}isField(ee){return ee.type&this.FIELD}isHat(ee){return ee.type&this.HAT}isIcon(ee){return ee.type&this.ICON}isSpacer(ee){return ee.type&this.SPACER}isInRowSpacer(ee){return ee.type&this.IN_ROW_SPACER}isInput(ee){return ee.type&this.INPUT}isExternalInput(ee){return ee.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(ee){return ee.type&this.INLINE_INPUT}isStatementInput(ee){return ee.type&this.STATEMENT_INPUT}isPreviousConnection(ee){return ee.type&this.PREVIOUS_CONNECTION}isNextConnection(ee){return ee.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(ee){return ee.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(ee){return ee.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(ee){return ee.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(ee){return ee.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(ee){return ee.type&this.RIGHT_SQUARE_CORNER}isCorner(ee){return ee.type&this.CORNER}isJaggedEdge(ee){return ee.type&this.JAGGED_EDGE}isRow(ee){return ee.type&this.ROW}isBetweenRowSpacer(ee){return ee.type&this.BETWEEN_ROW_SPACER}isTopRow(ee){return ee.type&this.TOP_ROW}isBottomRow(ee){return ee.type&this.BOTTOM_ROW}isTopOrBottomRow(ee){return ee.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(ee){return ee.type&this.INPUT_ROW}},He=new km,Xn=class{constructor(ee){this.centerline=this.xPos=this.height=this.width=0,this.constants_=ee,this.type=He.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},No=class{constructor(ee){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=ee,this.type=He.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let ee=this.elements.length-1;0<=ee;ee--){const se=this.elements[ee];if(He.isInput(se))return se}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let ee=0;ee<this.elements.length;ee++){const se=this.elements[ee];if(He.isSpacer(se))return se}return null}getLastSpacer(){for(let ee=this.elements.length-1;0<=ee;ee--){const se=this.elements[ee];if(He.isSpacer(se))return se}return null}},$h=class extends No{constructor(ee){super(ee),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=He.BOTTOM_ROW}hasLeftSquareCorner(ee){return!!ee.outputConnection||!!ee.getNextBlock()}hasRightSquareCorner(ee){return!0}measure(){let ee=0,se=0,ce=0;for(let _e=0;_e<this.elements.length;_e++){const me=this.elements[_e];se+=me.width,He.isSpacer(me)||(He.isNextConnection(me)?ce=Math.max(ce,me.height):ee=Math.max(ee,me.height))}this.width=Math.max(this.minWidth,se),this.height=Math.max(this.minHeight,ee)+ce,this.descenderHeight=ce,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},ps=class extends Xn{constructor(ee,se){super(ee),this.connectionModel=se,this.type|=He.CONNECTION,this.shape=this.constants_.shapeFor(se),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=se.isHighlighted()}},Rs=class extends ps{constructor(ee,se){super(ee,se.connection),this.input=se,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=He.INPUT,this.align=se.align,(this.connectedBlock=se.connection&&se.connection.targetBlock()?se.connection.targetBlock():null)?(ee=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=ee.width,this.connectedBlockHeight=ee.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},fa=class extends Rs{constructor(ee,se){super(ee,se),this.height=0,this.type|=He.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},Gr=class extends Xn{constructor(ee,se,ce){super(ee),this.field=se,this.parentInput=ce,this.isEditable=se.EDITABLE,this.flipRtl=se.getFlipRtl(),this.type|=He.FIELD,ee=this.field.getSize(),this.height=ee.height,this.width=ee.width}},Th=class extends Xn{constructor(ee){super(ee),this.type|=He.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},Ng=class extends Xn{constructor(ee,se){super(ee),this.icon=se,this.flipRtl=!1,this.type|=He.ICON,ee=se.getSize(),this.height=ee.height,this.width=ee.width}},pn=class extends Xn{constructor(ee,se){super(ee),this.type=this.type|He.SPACER|He.IN_ROW_SPACER,this.width=se,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},bh=class extends Rs{constructor(ee,se){super(ee,se),this.type|=He.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},Mo=class extends Rs{constructor(ee,se){super(ee,se),this.type|=He.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},Eh=class extends No{constructor(ee){super(ee),this.connectedBlockWidths=0,this.type|=He.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let ee=0;for(let se=0;se<this.elements.length;se++){const ce=this.elements[se];this.width+=ce.width,He.isInput(ce)&&ce instanceof Rs&&(He.isStatementInput(ce)&&ce instanceof Mo?ee+=ce.connectedBlockWidth:He.isExternalInput(ce)&&ce instanceof fa&&ce.connectedBlockWidth!==0&&(ee+=ce.connectedBlockWidth-ce.connectionWidth)),He.isSpacer(ce)||(this.height=Math.max(this.height,ce.height))}this.connectedBlockWidths=ee,this.widthWithConnectedBlocks=this.width+ee}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},Mg=class extends Xn{constructor(ee){super(ee),this.type|=He.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},xg=class extends ps{constructor(ee,se){super(ee,se),this.type|=He.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Dg=class extends ps{constructor(ee,se){super(ee,se),this.connectionOffsetX=0,this.type|=He.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},Pg=class extends ps{constructor(ee,se){super(ee,se),this.type|=He.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},xo=class extends Xn{constructor(ee,se){super(ee),this.type=(se&&se!=="left"?He.RIGHT_ROUND_CORNER:He.LEFT_ROUND_CORNER)|He.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},yh=class extends No{constructor(ee,se,ce){super(ee),this.height=se,this.width=ce,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|He.SPACER|He.BETWEEN_ROW_SPACER,this.elements=[new pn(this.constants_,ce)]}measure(){}},Do=class extends Xn{constructor(ee,se){super(ee),this.type=(se&&se!=="left"?He.RIGHT_SQUARE_CORNER:He.LEFT_SQUARE_CORNER)|He.CORNER,this.width=this.height=this.constants_.NO_PADDING}},Sh=class extends No{constructor(ee){super(ee),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=He.TOP_ROW}hasLeftSquareCorner(ee){const se=(ee.hat?ee.hat==="cap":this.constants_.ADD_START_HATS)&&!ee.outputConnection&&!ee.previousConnection,ce=ee.getPreviousBlock();return!!ee.outputConnection||se||(ce?ce.getNextBlock()===ee:!1)}hasRightSquareCorner(ee){return!0}measure(){let ee=0,se=0,ce=0;for(let _e=0;_e<this.elements.length;_e++){const me=this.elements[_e];se+=me.width,He.isSpacer(me)||(He.isHat(me)&&me instanceof Th?ce=Math.max(ce,me.ascenderHeight):ee=Math.max(ee,me.height))}this.width=Math.max(this.minWidth,se),this.height=Math.max(this.minHeight,ee)+ce,this.capline=this.ascenderHeight=ce,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},ma=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=ci(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(ee){this.blockStyles=Object.create(null);const se=ee.blockStyles;for(const ce in se)this.blockStyles[ce]=this.validatedBlockStyle_(se[ce]);this.setDynamicProperties_(ee)}setDynamicProperties_(ee){this.setFontConstants_(ee),this.setComponentConstants_(ee),this.ADD_START_HATS=ee.startHats!==void 0?ee.startHats:this.ADD_START_HATS}setFontConstants_(ee){ee.fontStyle&&ee.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=ee.fontStyle.family),ee.fontStyle&&ee.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=ee.fontStyle.weight),ee.fontStyle&&ee.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=ee.fontStyle.size),ee=we("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=ee.height,this.FIELD_TEXT_BASELINE=ee.baseline}setComponentConstants_(ee){this.CURSOR_COLOUR=ee.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=ee.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=ee.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(ee.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(ee){const se="auto_"+ee;return this.blockStyles[se]||(this.blockStyles[se]=this.createBlockStyle_(ee)),{style:this.blockStyles[se],name:se}}getBlockStyle(ee){return this.blockStyles[ee||""]||(ee&&ee.startsWith("auto_")?this.getBlockStyleForColour(ee.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(ee){return this.validatedBlockStyle_({colourPrimary:ee})}validatedBlockStyle_(ee){const se={};return ee&&Object.assign(se,ee),ee=Er(se.colourPrimary||"#000"),se.colourPrimary=ee.hex,se.colourSecondary=se.colourSecondary?Er(se.colourSecondary).hex:this.generateSecondaryColour_(se.colourPrimary),se.colourTertiary=se.colourTertiary?Er(se.colourTertiary).hex:this.generateTertiaryColour_(se.colourPrimary),se.hat=se.hat||"",se}generateSecondaryColour_(ee){return Gs("#fff",ee,.6)||ee}generateTertiaryColour_(ee){return Gs("#fff",ee,.3)||ee}dispose(){this.embossFilter&&We(this.embossFilter),this.disabledPattern&&We(this.disabledPattern),this.debugFilter&&We(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const ee=this.JAGGED_TEETH_HEIGHT,se=this.JAGGED_TEETH_WIDTH,ce=kr([Mt(se,ee/4),Mt(2*-se,ee/2),Mt(se,ee/4)]);return{height:ee,width:se,path:ce}}makeStartHat(){const ee=this.START_HAT_HEIGHT,se=this.START_HAT_WIDTH,ce=nn("c",[Mt(30,-ee),Mt(70,-ee),Mt(se,0)]);return{height:ee,width:se,path:ce}}makePuzzleTab(){function ee(be){be=be?-1:1;const Ie=-be;var De=ce/2;const dt=De+2.5,vt=De+.5,ai=Mt(-se,be*De);return De=Mt(se,be*De),nn("c",[Mt(0,be*dt),Mt(-se,Ie*vt),ai])+nn("s",[Mt(se,2.5*Ie),De])}const se=this.TAB_WIDTH,ce=this.TAB_HEIGHT,_e=ee(!0),me=ee(!1);return{type:this.SHAPES.PUZZLE,width:se,height:ce,pathDown:me,pathUp:_e}}makeNotch(){function ee(Ie){return kr([Mt(Ie*_e,ce),Mt(3*Ie,0),Mt(Ie*_e,-ce)])}const se=this.NOTCH_WIDTH,ce=this.NOTCH_HEIGHT,_e=(se-3)/2,me=ee(1),be=ee(-1);return{type:this.SHAPES.NOTCH,width:se,height:ce,pathLeft:me,pathRight:be}}makeInsideCorners(){const ee=this.CORNER_RADIUS,se=Ei("a","0 0,0",ee,Mt(-ee,ee)),ce=Ei("a","0 0,0",ee,Mt(ee,ee));return{width:ee,height:ee,pathTop:se,pathBottom:ce}}makeOutsideCorners(){const ee=this.CORNER_RADIUS,se=ci(0,ee)+Ei("a","0 0,1",ee,Mt(ee,-ee)),ce=Ei("a","0 0,1",ee,Mt(ee,ee)),_e=Ei("a","0 0,1",ee,Mt(-ee,-ee)),me=Ei("a","0 0,1",ee,Mt(-ee,ee));return{topLeft:se,topRight:ce,bottomRight:me,bottomLeft:_e,rightHeight:ee}}shapeFor(ee){switch(ee.type){case Rt.INPUT_VALUE:case Rt.OUTPUT_VALUE:return this.PUZZLE_TAB;case Rt.PREVIOUS_STATEMENT:case Rt.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(ee,se,ce){this.injectCSS_(se,ce),this.defs=lt(Ye.DEFS,{},ee),ee=lt(Ye.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),lt(Ye.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},ee),se=lt(Ye.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},ee),lt(Ye.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},se),lt(Ye.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},ee),lt(Ye.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},ee),this.embossFilterId=ee.id,this.embossFilter=ee,ee=lt(Ye.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),lt(Ye.RECT,{width:10,height:10,fill:"#aaa"},ee),lt(Ye.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},ee),this.disabledPatternId=ee.id,this.disabledPattern=ee,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter){const ee=lt(Ye.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),se=lt(Ye.FECOMPONENTTRANSFER,{result:"outBlur"},ee);lt(Ye.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},se),lt(Ye.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},ee),lt(Ye.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},ee),this.debugFilterId=ee.id,this.debugFilter=ee}}injectCSS_(ee,se){se=this.getCSS_(se),ee="blockly-renderer-style-"+ee,this.cssNode=document.getElementById(ee);const ce=se.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=ce:(se=document.createElement("style"),se.id=ee,ee=document.createTextNode(ce),se.appendChild(ee),document.head.insertBefore(se,document.head.firstChild),this.cssNode=se)}getCSS_(ee){return[`${ee} .blocklyText, `,`${ee} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${ee} .blocklyText {`,"fill: #fff;","}",`${ee} .blocklyNonEditableText>rect,`,`${ee} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${ee} .blocklyNonEditableText>text,`,`${ee} .blocklyEditableText>text {`,"fill: #000;","}",`${ee} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${ee} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${ee} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${ee} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${ee} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${ee} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${ee} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${ee} .blocklyReplaceable .blocklyPathLight,`,`${ee} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${ee} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},$a=class{constructor(ee,se){this.inlinePath_=this.outlinePath_="",this.block_=ee,this.info_=se,this.topLeft_=ee.getRelativeToSurfaceXY(),this.constants_=se.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren,this.block_.childlessWidth=this.info_.width}drawOutline_(){this.drawTop_();for(let ee=1;ee<this.info_.rows.length-1;ee++){const se=this.info_.rows[ee];se.hasJaggedEdge?this.drawJaggedEdge_(se):se.hasStatement?this.drawStatementInput_(se):se.hasExternalInput?this.drawValueInput_(se):this.drawRightSideRow_(se)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const ee=this.info_.topRow,se=ee.elements;this.positionPreviousConnection_(),this.outlinePath_+=ci(ee.xPos,this.info_.startY);for(let ce=0,_e;_e=se[ce];ce++)He.isLeftRoundedCorner(_e)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:He.isRightRoundedCorner(_e)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:He.isPreviousConnection(_e)&&_e instanceof ps?this.outlinePath_+=_e.shape.pathLeft:He.isHat(_e)?this.outlinePath_+=this.constants_.START_HAT.path:He.isSpacer(_e)&&(this.outlinePath_+=wt("h",_e.width));this.outlinePath_+=wt("v",ee.height)}drawJaggedEdge_(ee){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+wt("v",ee.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(ee){const se=ee.getLastInput();this.positionExternalValueConnection_(ee);const ce=Ml(se.shape)?se.shape.pathDown(se.height):se.shape.pathDown;this.outlinePath_+=wt("H",se.xPos+se.width)+ce+wt("v",ee.height-se.connectionHeight)}drawStatementInput_(ee){var se=ee.getLastInput();if(se){var ce=se.xPos+se.notchOffset+se.shape.width;se=se.shape.pathRight+wt("h",-(se.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var _e=ee.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=wt("H",ce)+se+wt("v",_e)+this.constants_.INSIDE_CORNERS.pathBottom+wt("H",ee.xPos+ee.width),this.positionStatementInputConnection_(ee)}}drawRightSideRow_(ee){this.outlinePath_+=wt("V",ee.yPos+ee.height)}drawBottom_(){const ee=this.info_.bottomRow,se=ee.elements;this.positionNextConnection_();let ce=0,_e="";for(let me=se.length-1,be;be=se[me];me--)He.isNextConnection(be)&&be instanceof ps?_e+=be.shape.pathRight:He.isLeftSquareCorner(be)?_e+=wt("H",ee.xPos):He.isLeftRoundedCorner(be)?_e+=this.constants_.OUTSIDE_CORNERS.bottomLeft:He.isRightRoundedCorner(be)?(_e+=this.constants_.OUTSIDE_CORNERS.bottomRight,ce=this.constants_.OUTSIDE_CORNERS.rightHeight):He.isSpacer(be)&&(_e+=wt("h",-1*be.width));this.outlinePath_+=wt("V",ee.baseline-ce),this.outlinePath_+=_e}drawLeft_(){var ee=this.info_.outputConnection;if(this.positionOutputConnection_(),ee){const se=ee.connectionOffsetY+ee.height;ee=Ml(ee.shape)?ee.shape.pathUp(ee.height):ee.shape.pathUp,this.outlinePath_+=wt("V",se)+ee}this.outlinePath_+="z"}drawInternals_(){for(let ee=0,se;se=this.info_.rows[ee];ee++)for(let ce=0,_e;_e=se.elements[ce];ce++)He.isInlineInput(_e)?this.drawInlineInput_(_e):(He.isIcon(_e)||He.isField(_e))&&this.layoutField_(_e)}layoutField_(ee){const se=ee.centerline-ee.height/2;let ce=ee.xPos;var _e="";this.info_.RTL&&(ce=-(ce+ee.width),ee.flipRtl&&(ce+=ee.width,_e="scale(-1 1)")),He.isIcon(ee)?(_e=ee.icon,_e.setOffsetInBlock(new yt(ce,se)),this.info_.isInsertionMarker&&_e.hideForInsertionMarker()):(ee=ee.field.getSvgRoot(),ee.setAttribute("transform","translate("+ce+","+se+")"+_e),this.info_.isInsertionMarker&&ee.setAttribute("display","none"))}drawInlineInput_(ee){const se=ee.width,ce=ee.height,_e=ee.connectionOffsetY,me=ee.connectionHeight+_e;this.inlinePath_+=Ni(ee.xPos+ee.connectionWidth,ee.centerline-ce/2)+wt("v",_e)+ee.shape.pathDown+wt("v",ce-me)+wt("h",se-ee.connectionWidth)+wt("v",-ce)+"z",this.positionInlineInputConnection_(ee)}positionInlineInputConnection_(ee){const se=ee.centerline-ee.height/2;if(ee.connectionModel){let ce=ee.xPos+ee.connectionWidth+ee.connectionOffsetX;this.info_.RTL&&(ce*=-1),ee.connectionModel.setOffsetInBlock(ce,se+ee.connectionOffsetY)}}positionStatementInputConnection_(ee){const se=ee.getLastInput();if(se!=null&&se.connectionModel){let ce=ee.xPos+ee.statementEdge+se.notchOffset;this.info_.RTL&&(ce*=-1),se.connectionModel.setOffsetInBlock(ce,ee.yPos)}}positionExternalValueConnection_(ee){const se=ee.getLastInput();if(se&&se.connectionModel){let ce=ee.xPos+ee.width;this.info_.RTL&&(ce*=-1),se.connectionModel.setOffsetInBlock(ce,ee.yPos)}}positionPreviousConnection_(){const ee=this.info_.topRow;if(ee.connection){const se=ee.xPos+ee.notchOffset;ee.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-se:se,0)}}positionNextConnection_(){const ee=this.info_.bottomRow;if(ee.connection){const se=ee.connection,ce=se.xPos;se.connectionModel.setOffsetInBlock(this.info_.RTL?-ce:ce,ee.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const ee=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-ee:ee,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const ee of this.info_.rows)for(const se of ee.elements)if(se instanceof ps)if(se.highlighted)this.drawConnectionHighlightPath(se);else{let ce,_e;(_e=(ce=this.block_.pathObject).removeConnectionHighlight)==null||_e.call(ce,se.connectionModel)}}drawConnectionHighlightPath(ee){const se=ee.connectionModel;ee=se.type===Rt.INPUT_VALUE||se.type===Rt.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(ee):this.getStatementConnectionHighlightPath(ee);const ce=se.getSourceBlock();let _e,me;(me=(_e=ce.pathObject).addConnectionHighlight)==null||me.call(_e,se,ee,se.getOffsetInBlock(),ce.RTL)}getExpressionConnectionHighlightPath(ee){let se="";return Ml(ee.shape)?se=ee.shape.pathDown(ee.height):U_(ee.shape)&&(se=ee.shape.pathDown),ee=this.constants_.TAB_OFFSET_FROM_TOP,ci(0,-ee)+wt("v",ee)+se+wt("v",ee)}getStatementConnectionHighlightPath(ee){if(!H_(ee.shape))throw Error("Statement connections should have notch shapes");const se=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return ci(-se,0)+wt("h",se)+ee.shape.pathLeft+wt("h",se)}};(function(ee){ee[ee.LEFT=-1]="LEFT",ee[ee.CENTRE=0]="CENTRE",ee[ee.RIGHT=1]="RIGHT"})(ne.Align$$module$build$src$core$inputs$align||(ne.Align$$module$build$src$core$inputs$align={})),ne.Align$$module$build$src$core$inputs$align;var or=class extends oi{constructor(ee,se,ce){super(oi.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,ee!==oi.SKIP_SETUP&&(ce?this.configure_(ce):this.class=se||null,this.setValue(ee))}configure_(ee){super.configure_(ee),ee.class&&(this.class=ee.class)}initView(){this.createTextElement_(),this.class&&Ct(this.getTextElement(),this.class)}doClassValidation_(ee){return ee==null?null:`${ee}`}setClass(ee){this.textElement_&&(this.class&&Oe(this.textElement_,this.class),ee&&Ct(this.textElement_,ee)),this.class=ee}static fromJson(ee){return new this(bi(ee.text),void 0,ee)}};Gn("field_label",or),or.prototype.DEFAULT_VALUE="";var Wr=class{constructor(ee,se){this.name=ee,this.sourceBlock=se,this.fieldRow=[],this.align=ne.Align$$module$build$src$core$inputs$align.LEFT,this.visible=!0,this.type=ne.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(ee,se){return this.insertFieldAt(this.fieldRow.length,ee,se),this}insertFieldAt(ee,se,ce){if(0>ee||ee>this.fieldRow.length)throw Error("index "+ee+" out of bounds.");return(se||se===""&&ce)&&(typeof se=="string"&&(se=ne.fromJson$$module$build$src$core$field_registry({type:"field_label",text:se})),se.setSourceBlock(this.sourceBlock),this.sourceBlock.initialized&&this.initField(se),se.name=ce,se.setVisible(this.isVisible()),se.prefixField&&(ee=this.insertFieldAt(ee,se.prefixField)),this.fieldRow.splice(ee,0,se),ee++,se.suffixField&&(ee=this.insertFieldAt(ee,se.suffixField)),this.sourceBlock.rendered&&this.sourceBlock.queueRender()),ee}removeField(ee,se){for(let ce=0,_e;_e=this.fieldRow[ce];ce++)if(_e.name===ee)return _e.dispose(),this.fieldRow.splice(ce,1),this.sourceBlock.rendered&&this.sourceBlock.queueRender(),!0;if(se)return!1;throw Error('Field "'+ee+'" not found.')}isVisible(){return this.visible}setVisible(ee){let se=[];if(this.visible===ee)return se;this.visible=ee;for(let _e=0,me;me=this.fieldRow[_e];_e++)me.setVisible(ee);if(this.connection){var ce=this.connection;ee?se=ce.startTrackingAll():ce.stopTrackingAll(),(ce=ce.targetBlock())&&(ce.getSvgRoot().style.display=ee?"block":"none")}return se}markDirty(){for(let ee=0,se;se=this.fieldRow[ee];ee++)se.markDirty()}setCheck(ee){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(ee),this}setAlign(ee){return this.align=ee,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(ee){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(ee),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){for(const ee of this.fieldRow)ee.init()}initModel(){for(const ee of this.fieldRow)ee.initModel()}initField(ee){this.sourceBlock.rendered?ee.init():ee.initModel()}dispose(){for(let ee=0,se;se=this.fieldRow[ee];ee++)se.dispose();this.connection&&this.connection.dispose()}makeConnection(ee){return this.sourceBlock.makeConnection_(ee)}},jn=class extends Wr{constructor(ee,se){super(ee,se),this.name=ee,this.type=ne.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},gs=class extends Wr{constructor(ee,se){super(ee,se),this.name=ee,this.type=ne.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},gn=class extends Wr{constructor(ee,se){if(!ee)throw Error("Statement inputs must have a non-empty name");super(ee,se),this.name=ee,this.type=ne.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(Rt.NEXT_STATEMENT)}},Bg;ne.ValueInput$$module$build$src$core$inputs$value_input=class extends Wr{constructor(ee,se){if(!ee)throw Error("Value inputs must have a non-empty name");super(ee,se),this.name=ee,this.type=ne.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(Rt.INPUT_VALUE)}},Bg={},Bg.ValueInput=ne.ValueInput$$module$build$src$core$inputs$value_input;var Po=class{constructor(ee,se){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=ee,this.block_=se,this.constants_=this.renderer_.getConstants(),this.outputConnection=se.outputConnection?new Dg(this.constants_,se.outputConnection):null,this.isInline=se.getInputsInline()&&!se.isCollapsed(),this.isCollapsed=se.isCollapsed(),this.isInsertionMarker=se.isInsertionMarker(),this.RTL=se.RTL,this.topRow=new Sh(this.constants_),this.bottomRow=new $h(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let ee=new Eh(this.constants_);this.inputRows.push(ee);var se=this.block_.getIcons();for(let ce=0,_e;_e=se[ce];ce++){const me=new Ng(this.constants_,_e);this.isCollapsed&&!_e.isShownWhenCollapsed()||ee.elements.push(me)}se=void 0;for(let ce=0,_e;_e=this.block_.inputList[ce];ce++)if(_e.isVisible()){this.shouldStartNewRow_(_e,se)&&(this.rows.push(ee),ee=new Eh(this.constants_),this.inputRows.push(ee));for(let me=0,be;be=_e.fieldRow[me];me++)ee.elements.push(new Gr(this.constants_,be,_e));this.addInput_(_e,ee),se=_e}this.isCollapsed&&(ee.hasJaggedEdge=!0,ee.elements.push(new Mg(this.constants_))),(ee.elements.length||ee.hasDummyInput)&&this.rows.push(ee),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var ee=!!this.block_.previousConnection;const se=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!ee;let ce=this.topRow.hasLeftSquareCorner(this.block_)?Do:xo;this.topRow.elements.push(new ce(this.constants_)),se?(ee=new Th(this.constants_),this.topRow.elements.push(ee),this.topRow.capline=ee.ascenderHeight):ee&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new Pg(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof gn&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,ce=this.topRow.hasRightSquareCorner(this.block_)?Do:xo,this.topRow.elements.push(new ce(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof gn?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new Do(this.constants_)):this.bottomRow.elements.push(new xo(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new xg(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new Do(this.constants_,"right")):this.bottomRow.elements.push(new xo(this.constants_,"right"))}addInput_(ee,se){this.isInline&&ee instanceof ne.ValueInput$$module$build$src$core$inputs$value_input?(se.elements.push(new bh(this.constants_,ee)),se.hasInlineInput=!0):ee instanceof gn?(se.elements.push(new Mo(this.constants_,ee)),se.hasStatement=!0):ee instanceof ne.ValueInput$$module$build$src$core$inputs$value_input?(se.elements.push(new fa(this.constants_,ee)),se.hasExternalInput=!0):(ee instanceof jn||ee instanceof gs)&&(se.minHeight=Math.max(se.minHeight,ee.getSourceBlock()&&ee.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),se.hasDummyInput=!0),se.align===null&&(se.align=ee.align)}shouldStartNewRow_(ee,se){return se?se instanceof gs||ee instanceof gn||se instanceof gn?!0:ee instanceof ne.ValueInput$$module$build$src$core$inputs$value_input||ee instanceof jn||se instanceof ne.ValueInput$$module$build$src$core$inputs$value_input?!this.isInline:!1:!1}addElemSpacing_(){for(let ee=0,se;se=this.rows[ee];ee++){const ce=se.elements;if(se.elements=[],se.startsWithElemSpacer()&&se.elements.push(new pn(this.constants_,this.getInRowSpacing_(null,ce[0]))),ce.length){for(let _e=0;_e<ce.length-1;_e++){se.elements.push(ce[_e]);const me=this.getInRowSpacing_(ce[_e],ce[_e+1]);se.elements.push(new pn(this.constants_,me))}se.elements.push(ce[ce.length-1]),se.endsWithElemSpacer()&&se.elements.push(new pn(this.constants_,this.getInRowSpacing_(ce[ce.length-1],null)))}}}getInRowSpacing_(ee,se){if(!ee&&se&&He.isStatementInput(se))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(ee&&He.isInput(ee)&&!se){if(He.isExternalInput(ee))return this.constants_.NO_PADDING;if(He.isInlineInput(ee))return this.constants_.LARGE_PADDING;if(He.isStatementInput(ee))return this.constants_.NO_PADDING}return ee&&He.isLeftSquareCorner(ee)&&se&&(He.isPreviousConnection(se)||He.isNextConnection(se))?se.notchOffset:ee&&He.isLeftRoundedCorner(ee)&&se&&(He.isPreviousConnection(se)||He.isNextConnection(se))?se.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let ee=0,se=0,ce=0;for(let me=0,be;be=this.rows[me];me++){if(be.measure(),se=Math.max(se,be.width),be.hasStatement){var _e=be.getLastInput();let Ie,De;_e=be.width-((De=(Ie=_e)==null?void 0:Ie.width)!=null?De:0),ee=Math.max(ee,_e)}ce=Math.max(ce,be.widthWithConnectedBlocks)}this.statementEdge=ee,this.width=se;for(let me=0,be;be=this.rows[me];me++)be.hasStatement&&(be.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(se,ce),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let se=0,ce;ce=this.rows[se];se++)if(ce.hasStatement)this.alignStatementRow_(ce);else{var ee=ce.width;ee=this.getDesiredRowWidth_(ce)-ee,0<ee&&this.addAlignmentPadding_(ce,ee),He.isTopOrBottomRow(ce)&&(ce.widthWithConnectedBlocks=ce.width)}}getDesiredRowWidth_(ee){return this.width-this.startX}addAlignmentPadding_(ee,se){const ce=ee.getFirstSpacer(),_e=ee.getLastSpacer();if((ee.hasExternalInput||ee.hasStatement)&&(ee.widthWithConnectedBlocks+=se),ee.align===ne.Align$$module$build$src$core$inputs$align.LEFT&&_e)_e.width+=se;else if(ee.align===ne.Align$$module$build$src$core$inputs$align.CENTRE&&ce&&_e)ce.width+=se/2,_e.width+=se/2;else if(ee.align===ne.Align$$module$build$src$core$inputs$align.RIGHT&&ce)ce.width+=se;else if(_e)_e.width+=se;else return;ee.width+=se}alignStatementRow_(ee){const se=ee.getLastInput();if(se){var ce=ee.width-se.width,_e=this.statementEdge;ce=_e-ce,0<ce&&this.addAlignmentPadding_(ee,ce),ce=ee.width,_e=this.getDesiredRowWidth_(ee),se.width+=_e-ce,se.height=Math.max(se.height,ee.height),ee.width+=_e-ce,ee.widthWithConnectedBlocks=Math.max(ee.width,this.statementEdge+ee.connectedBlockWidths)}}addRowSpacing_(){const ee=this.rows;this.rows=[];for(let se=0;se<ee.length;se++)this.rows.push(ee[se]),se!==ee.length-1&&this.rows.push(this.makeSpacerRow_(ee[se],ee[se+1]))}makeSpacerRow_(ee,se){var ce=this.getSpacerRowHeight_(ee,se);const _e=this.getSpacerRowWidth_(ee,se);return ce=new yh(this.constants_,ce,_e),ee.hasStatement&&(ce.followsStatement=!0),se.hasStatement&&(ce.precedesStatement=!0),ce}getSpacerRowWidth_(ee,se){return this.width-this.startX}getSpacerRowHeight_(ee,se){return this.constants_.MEDIUM_PADDING}getElemCenterline_(ee,se){return He.isSpacer(se)?ee.yPos+se.height/2:He.isBottomRow(ee)?(ee=ee.yPos+ee.height-ee.descenderHeight,He.isNextConnection(se)?ee+se.height/2:ee-se.height/2):He.isTopRow(ee)?He.isHat(se)?ee.capline-se.height/2:ee.capline+se.height/2:ee.yPos+ee.height/2}recordElemPositions_(ee){let se=ee.xPos;for(let ce=0,_e;_e=ee.elements[ce];ce++)He.isSpacer(_e)&&(_e.height=ee.height),_e.xPos=se,_e.centerline=this.getElemCenterline_(ee,_e),se+=_e.width}finalize_(){let ee=0,se=0;for(let ce=0,_e;_e=this.rows[ce];ce++)_e.yPos=se,_e.xPos=this.startX,se+=_e.height,ee=Math.max(ee,_e.widthWithConnectedBlocks),this.recordElemPositions_(_e);if(this.outputConnection&&this.block_.nextConnection){const ce=this.block_.nextConnection.targetBlock();ce&&(ee=Math.max(ee,ce.getHeightWidth().width))}this.widthWithChildren=ee+this.startX,this.height=se,this.startY=this.topRow.capline,this.bottomRow.baseline=se-this.bottomRow.descenderHeight}getMeasureableForConnection(ee){let se;if(((se=this.outputConnection)==null?void 0:se.connectionModel)===ee)return this.outputConnection;for(const ce of this.rows)for(const _e of ce.elements)if(_e instanceof ps&&_e.connectionModel===ee)return _e;return null}},Ch=class extends Qs{constructor(ee){if(super(ee),this.type=it.BLOCK_DELETE,ee){if(ee.getParent())throw Error("Connected blocks cannot be deleted.");ee.isShadow()&&(this.recordUndo=!1),this.oldXml=ao(ee),this.ids=qe(ee),this.wasShadow=ee.isShadow(),this.oldJson=un(ee,{addCoordinates:!0})}}toJson(){const ee=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return ee.oldXml=Hn(this.oldXml),ee.ids=this.ids,ee.wasShadow=this.wasShadow,ee.oldJson=this.oldJson,this.recordUndo||(ee.recordUndo=this.recordUndo),ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new Ch),se.oldXml=ne.textToDom$$module$build$src$core$utils$xml(ee.oldXml),se.ids=ee.ids,se.wasShadow=ee.wasShadow||se.oldXml.tagName.toLowerCase()==="shadow",se.oldJson=ee.oldJson,ee.recordUndo!==void 0&&(se.recordUndo=ee.recordUndo),se}run(ee){const se=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(ee)for(ee=0;ee<this.ids.length;ee++){const ce=this.ids[ee],_e=se.getBlockById(ce);_e?_e.dispose(!1):ce===this.blockId&&console.warn("Can't delete non-existent block: "+ce)}else es(this.oldJson,se)}};re($t.EVENT,it.BLOCK_DELETE,Ch);var qt=class{constructor(ee,se){this.type=se,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=ee}connect_(ee){const se=Rt.INPUT_VALUE,ce=this.getSourceBlock();var _e=ee.getSourceBlock();ee.isConnected()&&ee.disconnectInternal(!1);let me;if(this.isConnected()){const Ie=this.stashShadowState(),De=this.targetBlock();De.isShadow()?De.dispose(!1):(this.disconnectInternal(),me=De),this.applyShadowState(Ie)}let be;Ke()&&(be=new(Le(it.BLOCK_MOVE))(_e),be.setReason(["connect"])),G_(this,ee),_e.setParent(ce),be&&(be.recordNew(),Ae(be)),me&&(ee=this.type===se?me.outputConnection:me.previousConnection)&&((_e=qt.getConnectionForOrphanedConnection(_e,ee))?ee.connect(_e):ee.onFailedConnect(this))}dispose(){if(this.isConnected()){this.isSuperior()&&this.setShadowStateInternal();const ee=this.targetBlock();ee&&!ee.isDeadOrDying()&&ee.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===Rt.INPUT_VALUE||this.type===Rt.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(ee){}connect(ee){if(this.targetConnection===ee)return!0;if(this.getConnectionChecker().canConnect(this,ee,!1)){const se=ne.getGroup$$module$build$src$core$events$utils();se||ne.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(ee):ee.connect_(this),ne.setGroup$$module$build$src$core$events$utils(se)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(ee=!0){const{parentConnection:se,childConnection:ce}=this.getParentAndChildConnections();if(!se||!ce)throw Error("Source connection not connected.");const _e=ne.getGroup$$module$build$src$core$events$utils();_e||ne.setGroup$$module$build$src$core$events$utils(!0);let me;Ke()&&(me=new(Le(it.BLOCK_MOVE))(ce.getSourceBlock()),me.setReason(["disconnect"]));const be=this.targetConnection;be&&(be.targetConnection=null),this.targetConnection=null,ee&&ce.getSourceBlock().setParent(null),me&&(me.recordNew(),Ae(me)),ce.getSourceBlock().isShadow()||se.respawnShadow_(),ne.setGroup$$module$build$src$core$events$utils(_e)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(ee,se){if(this.getSourceBlock().isDeadOrDying())return!1;var ce;return se=(ce=ee.getInput(se))==null?void 0:ce.connection,ce=this.targetBlock(),ce&&ce!==ee||!se||se.targetConnection===this?!1:(se.isConnected()&&se.disconnect(),se.connect(this),!0)}targetBlock(){if(this.isConnected()){let ee,se;return(se=(ee=this.targetConnection)==null?void 0:ee.getSourceBlock())!=null?se:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(ee){return ee?(Array.isArray(ee)||(ee=[ee]),this.check=ee,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(ee){this.setShadowStateInternal({shadowDom:ee})}getShadowDom(ee){return ee&&this.targetBlock().isShadow()?Ts(this.targetBlock()):this.shadowDom}setShadowState(ee){this.setShadowStateInternal({shadowState:ee})}getShadowState(ee){return ee&&this.targetBlock()&&this.targetBlock().isShadow()?un(this.targetBlock()):this.shadowState}neighbours(ee){return[]}getParentInput(){let ee=null;const se=this.sourceBlock_.inputList;for(let ce=0;ce<se.length;ce++)if(se[ce].connection===this){ee=se[ce];break}return ee}toString(){const ee=this.sourceBlock_;if(!ee)return"Orphan Connection";if(ee.outputConnection===this)var se="Output Connection of ";else if(ee.previousConnection===this)se="Previous Connection of ";else if(ee.nextConnection===this)se="Next Connection of ";else{se=null;for(let ce=0,_e;_e=ee.inputList[ce];ce++)if(_e.connection===this){se=_e;break}if(se)se='Input "'+se.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return se+ee.toDevString()}stashShadowState(){const ee=this.getShadowDom(!0),se=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:ee,shadowState:se}}applyShadowState({shadowDom:ee,shadowState:se}){this.shadowDom=ee,this.shadowState=se}setShadowStateInternal({shadowDom:ee=null,shadowState:se=null}={}){this.shadowDom=ee,this.shadowState=se,this.getSourceBlock().isDeadOrDying()||((ee=this.targetBlock())?ee.isShadow()?(ee.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())):(ee=this.createShadowBlock(!1),this.serializeShadow(ee),ee&&ee.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())))}createShadowBlock(ee){var se=this.getSourceBlock();const ce=this.getShadowState(),_e=this.getShadowDom();if(se.isDeadOrDying()||!ce&&!_e)return null;if(ce)return se=gr(ce,se.workspace,{parentConnection:ee?this:void 0,isShadow:!0,recordUndo:!1});if(_e){if(se=Vs(_e,se.workspace),ee)if(this.type===Rt.INPUT_VALUE){if(!se.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(se.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===Rt.NEXT_STATEMENT){if(!se.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(se.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return se}return null}serializeShadow(ee){ee&&(this.shadowDom=Ts(ee),this.shadowState=un(ee))}static getConnectionForOrphanedConnection(ee,se){if(se.type===Rt.OUTPUT_VALUE)return V_(ee,se.getSourceBlock());ee=ee.lastConnectionInStack(!0);const ce=se.getConnectionChecker();return ee&&ce.canConnect(se,ee,!1)?ee:null}};qt.CAN_CONNECT=0,qt.REASON_SELF_CONNECTION=1,qt.REASON_WRONG_TYPE=2,qt.REASON_TARGET_NULL=3,qt.REASON_CHECKS_FAILED=4,qt.REASON_DIFFERENT_WORKSPACES=5,qt.REASON_SHADOW_PARENT=6,qt.REASON_DRAG_CHECKS_FAILED=7,qt.REASON_PREVIOUS_AND_OUTPUT=8;var ws=class{constructor(ee,se,ce){if(this.data=null,this.disposed=!1,this.hue=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabledReasons=new Set,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable=this.movable=this.deletable=!0,this.collapsed_=this.shadow=!1,this.outputShape_=null,this.rendered=this.isInsertionMarker_=this.initialized=this.disposing=!1,this.onchangeWrapper=this.helpUrl=null,this.statementInputCount=0,this.workspace=ee,this.id=ce&&!ee.getBlockById(ce)?ce:Te(),ee.setBlockById(this.id,this),this.xy=new yt(0,0),this.isInFlyout=ee.isFlyout,this.isInMutator=ee.isMutator,this.RTL=ee.RTL,se){if(this.type=se,ce=sn[se],!ce||typeof ce!="object")throw TypeError("Invalid block definition for type: "+se);Object.assign(this,ce)}ee.addTopBlock(this),ee.addTypedBlock(this),new.target===ws&&this.doInit_()}doInit_(){const ee=ne.getGroup$$module$build$src$core$events$utils();ee||ne.setGroup$$module$build$src$core$events$utils(!0);const se=Me();try{typeof this.init=="function"&&(ne.setRecordUndo$$module$build$src$core$events$utils(!1),this.init(),ne.setRecordUndo$$module$build$src$core$events$utils(se)),Ke()&&Ae(new(Le(it.BLOCK_CREATE))(this))}finally{ne.setGroup$$module$build$src$core$events$utils(ee),ne.setRecordUndo$$module$build$src$core$events$utils(se)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(ee=!1){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.unplug(ee),Ke()&&Ae(new(Le(it.BLOCK_DELETE))(this)),this.workspace.removeTopBlock(this),this.disposeInternal()}disposeInternal(){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(ee=>ee.disposeInternal()),this.inputList.forEach(ee=>ee.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(ee=>ee.dispose()),this.disposed=!0}isDeadOrDying(){return this.disposing||this.disposed}initModel(){if(!this.initialized){for(const ee of this.inputList)ee.initModel();this.initialized=!0}}unplug(ee){this.outputConnection&&this.unplugFromRow(ee),this.previousConnection&&this.unplugFromStack(ee)}unplugFromRow(ee){let se=null,ce;(ce=this.outputConnection)!=null&&ce.isConnected()&&(se=this.outputConnection.targetConnection,this.outputConnection.disconnect()),se&&ee&&(ee=this.getOnlyValueConnection())&&ee.isConnected()&&!ee.targetBlock().isShadow()&&(ee=ee.targetConnection,ee==null||ee.disconnect(),this.workspace.connectionChecker.canConnect(ee,se,!1)?se.connect(ee):ee==null||ee.onFailedConnect(se))}getOnlyValueConnection(){let ee=null;for(let se=0;se<this.inputList.length;se++){const ce=this.inputList[se].connection;if(ce&&ce.type===Rt.INPUT_VALUE&&ce.targetConnection){if(ee)return null;ee=ce}}return ee}unplugFromStack(ee){let se=null;var ce;if((ce=this.previousConnection)!=null&&ce.isConnected()&&(se=this.previousConnection.targetConnection,this.previousConnection.disconnect()),ce=this.getNextBlock(),ee&&ce&&!ce.isShadow()){let _e,me;ee=(me=(_e=this.nextConnection)==null?void 0:_e.targetConnection)!=null?me:null,ee==null||ee.disconnect(),se&&this.workspace.connectionChecker.canConnect(se,ee,!1)&&se.connect(ee)}}getConnections_(ee){ee=[],this.outputConnection&&ee.push(this.outputConnection),this.previousConnection&&ee.push(this.previousConnection),this.nextConnection&&ee.push(this.nextConnection);for(let se=0,ce;ce=this.inputList[se];se++)ce.connection&&ee.push(ce.connection);return ee}lastConnectionInStack(ee){let se=this.nextConnection;for(;se;){const ce=se.targetBlock();if(!ce||ee&&ce.isShadow())return se;se=ce.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(ee){for(let se=0,ce;ce=this.inputList[se];se++)if(ce.connection&&ce.connection.targetBlock()===ee)return ce;return null}getSurroundParent(){let ee=this,se;do if(se=ee,ee=ee.getParent(),!ee)return null;while(ee.getNextBlock()===se);return ee}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let ee,se=this;do ee=se,se=ee.parentBlock_;while(se);return ee}getTopStackBlock(){let ee=this,se;do se=ee.getPreviousBlock();while(se&&se.getNextBlock()===ee&&(ee=se));return ee}getChildren(ee){if(!ee)return this.childBlocks_;ee=[];for(let ce=0,_e;_e=this.inputList[ce];ce++)if(_e.connection){var se=_e.connection.targetBlock();se&&ee.push(se)}return(se=this.getNextBlock())&&ee.push(se),ee}setParent(ee){if(ee!==this.parentBlock_){var se=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),ce=!!se;if(ce&&ee&&se!==ee)throw Error("Block connected to superior one that is not new parent.");if(!ce&&ee)throw Error("Block not connected to new parent.");if(ce&&!ee)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?hi(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=ee)?ee.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(ee){const se=[this],ce=this.getChildren(ee);for(let _e,me=0;_e=ce[me];me++)se.push(..._e.getDescendants(ee));return se}isDeletable(){return this.deletable&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable}setDeletable(ee){this.deletable=ee}isMovable(){return this.movable&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable}setMovable(ee){this.movable=ee}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(Ft(this,!0)):!0}isShadow(){return this.shadow}setShadow(ee){this.shadow=ee}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(ee){this.isInsertionMarker_=ee}isEditable(){return this.editable&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable}setEditable(ee){this.editable=ee;for(let se=0,ce;ce=this.inputList[se];se++)for(let _e=0,me;me=ce.fieldRow[_e];_e++)me.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const ee of this.inputList)if(ee.connection||1<ee.fieldRow.length)return!1;return!0}getMatchingConnection(ee,se){const ce=this.getConnections_(!0);if(ee=ee.getConnections_(!0),ce.length!==ee.length)throw Error("Connection lists did not match in length.");for(let _e=0;_e<ee.length;_e++)if(ee[_e]===se)return ce[_e];return null}setHelpUrl(ee){this.helpUrl=ee}setTooltip(ee){this.tooltip=ee}getTooltip(){return $r(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue}setColour(ee){ee=Er(ee),this.hue=ee.hue,this.colour_=ee.hex}setStyle(ee){this.styleName_=ee}setOnChange(ee){if(ee&&typeof ee!="function")throw Error("onchange must be a function.");this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.onchange=ee,this.onchangeWrapper=ee.bind(this),this.workspace.addChangeListener(this.onchangeWrapper)}getField(ee){if(typeof ee!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(ee===void 0?"nothing":ee+" of type "+typeof ee)+" instead");for(let se=0,ce;ce=this.inputList[se];se++)for(let _e=0,me;me=ce.fieldRow[_e];_e++)if(me.name===ee)return me;return null}getVars(){const ee=[];for(let se=0,ce;ce=this.inputList[se];se++)for(let _e=0,me;me=ce.fieldRow[_e];_e++)me.referencesVariables()&&ee.push(me.getValue());return ee}getVarModels(){const ee=[];for(let se=0,ce;ce=this.inputList[se];se++)for(let _e=0,me;me=ce.fieldRow[_e];_e++)if(me.referencesVariables()){const be=this.workspace.getVariableById(me.getValue());be&&ee.push(be)}return ee}updateVarName(ee){for(let se=0,ce;ce=this.inputList[se];se++)for(let _e=0,me;me=ce.fieldRow[_e];_e++)me.referencesVariables()&&ee.getId()===me.getValue()&&me.refreshVariableName()}renameVarById(ee,se){for(let ce=0,_e;_e=this.inputList[ce];ce++)for(let me=0,be;be=_e.fieldRow[me];me++)be.referencesVariables()&&ee===be.getValue()&&be.setValue(se)}getFieldValue(ee){return(ee=this.getField(ee))?ee.getValue():null}setFieldValue(ee,se){const ce=this.getField(se);if(!ce)throw Error('Field "'+se+'" not found.');ce.setValue(ee)}setPreviousStatement(ee,se){if(ee)se===void 0&&(se=null),this.previousConnection||(this.previousConnection=this.makeConnection_(Rt.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(se);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(ee,se){if(ee)se===void 0&&(se=null),this.nextConnection||(this.nextConnection=this.makeConnection_(Rt.NEXT_STATEMENT)),this.nextConnection.setCheck(se);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(ee,se){if(ee)se===void 0&&(se=null),this.outputConnection||(this.outputConnection=this.makeConnection_(Rt.OUTPUT_VALUE)),this.outputConnection.setCheck(se);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(ee){this.inputsInline!==ee&&(Ae(new(Le(it.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,ee)),this.inputsInline=ee)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var ee=1;ee<this.inputList.length;ee++)if(this.inputList[ee-1]instanceof jn&&this.inputList[ee]instanceof jn)return!1;for(ee=1;ee<this.inputList.length;ee++)if(this.inputList[ee-1]instanceof ne.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[ee]instanceof jn)return!0;for(ee=0;ee<this.inputList.length;ee++)if(this.inputList[ee]instanceof gs)return!0;return!1}setOutputShape(ee){this.outputShape_=ee}getOutputShape(){return this.outputShape_}isEnabled(){return this.disabledReasons.size===0}get disabled(){return ge("disabled","v11","v12","the isEnabled or hasDisabledReason methods of Block"),this.hasDisabledReason(Ji)}set disabled(ee){ge("disabled","v11","v12","the setDisabledReason method of Block"),this.setDisabledReason(ee,Ji)}setEnabled(ee){ge("setEnabled","v11","v12","the setDisabledReason method of Block"),this.setDisabledReason(!ee,Ji)}setDisabledReason(ee,se){ee||this.workspace.options.disable||!this.hasDisabledReason(Ji)||se==Ji||this.setDisabledReason(!1,Ji),this.disabledReasons.has(se)!==ee&&(ee?this.disabledReasons.add(se):this.disabledReasons.delete(se),ee=new(Le(it.BLOCK_CHANGE))(this,"disabled",null,!ee,ee),ee.setDisabledReason(se),Ae(ee))}getInheritedDisabled(){let ee=this.getSurroundParent();for(;ee;){if(!ee.isEnabled())return!0;ee=ee.getSurroundParent()}return!1}hasDisabledReason(ee){return this.disabledReasons.has(ee)}getDisabledReasons(){return this.disabledReasons}isCollapsed(){return this.collapsed_}setCollapsed(ee){this.collapsed_!==ee&&(Ae(new(Le(it.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,ee)),this.collapsed_=ee)}toString(ee,se){se=this.toTokens(se);for(let _e=2;_e<se.length;_e++)se[_e-2]==="("&&se[_e]===")"&&(se[_e-2]=se[_e-1],se.splice(_e-1,2));let ce="";return se=se.reduce((_e,me)=>(_e=_e+(ce==="("||me===")"?"":" ")+me,ce=me[me.length-1],_e),""),se=se.trim()||"???",ee&&se.length>ee&&(se=se.substring(0,ee-3)+"..."),se}toTokens(ee="?"){const se=[];for(const _e of this.inputList)if(_e.name!=Eo){for(const me of _e.fieldRow)se.push(me.getText());if(_e.connection){const me=_e.connection.targetBlock();if(me){var ce=_e.connection;let be=ce.getCheck();!be&&ce.targetConnection&&(be=ce.targetConnection.getCheck()),(ce=!!be&&(be.includes("Boolean")||be.includes("Number")))&&se.push("("),se.push(...me.toTokens(ee)),ce&&se.push(")")}else se.push(ee)}}return se}appendValueInput(ee){return this.appendInput(new ne.ValueInput$$module$build$src$core$inputs$value_input(ee,this))}appendStatementInput(ee){return this.statementInputCount++,this.appendInput(new gn(ee,this))}appendDummyInput(ee=""){return this.appendInput(new jn(ee,this))}appendEndRowInput(ee=""){return this.appendInput(new gs(ee,this))}appendInput(ee){return this.inputList.push(ee),ee}appendInputFromRegistry(ee,se){return(ee=de($t.INPUT,ee,!1))?this.appendInput(new ee(se,this)):null}jsonInit(ee){var se=ee.type?'Block "'+ee.type+'": ':"";if(ee.output&&ee.previousStatement)throw Error(se+"Must not have both an output and a previousStatement.");for(var ce=0;ee["args"+ce];){if(ee["message"+ce]===void 0)throw Error(se+`args${ce} must have a corresponding message (message${ce}).`);ce++}if(ee.style&&ee.style.hat&&(this.hat=ee.style.hat,ee.style=null),ee.style&&ee.colour)throw Error(se+"Must not have both a colour and a style.");for(ee.style?this.jsonInitStyle(ee,se):this.jsonInitColour(ee,se),ce=0;ee["message"+ce]!==void 0;)this.interpolate(ee["message"+ce],ee["args"+ce]||[],ee["implicitAlign"+ce]||ee["lastDummyAlign"+ce],se),ce++;if(ee.inputsInline!==void 0&&(ne.disable$$module$build$src$core$events$utils(),this.setInputsInline(ee.inputsInline),ne.enable$$module$build$src$core$events$utils()),ee.output!==void 0&&this.setOutput(!0,ee.output),ee.outputShape!==void 0&&this.setOutputShape(ee.outputShape),ee.previousStatement!==void 0&&this.setPreviousStatement(!0,ee.previousStatement),ee.nextStatement!==void 0&&this.setNextStatement(!0,ee.nextStatement),ee.tooltip!==void 0&&(ce=bi(ee.tooltip),this.setTooltip(ce)),ee.enableContextMenu!==void 0&&(this.contextMenu=!!ee.enableContextMenu),ee.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!ee.suppressPrefixSuffix),ee.helpUrl!==void 0&&(ce=bi(ee.helpUrl),this.setHelpUrl(ce)),typeof ee.extensions=="string"&&(console.warn(se+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+ee.type+"' block."),ee.extensions=[ee.extensions]),ee.mutator!==void 0&&Ol(ee.mutator,this,!0),ee=ee.extensions,Array.isArray(ee))for(se=0;se<ee.length;se++)Ol(ee[se],this,!1)}jsonInitColour(ee,se){if("colour"in ee)if(ee.colour===void 0)console.warn(se+"Undefined colour value.");else{ee=ee.colour;try{this.setColour(ee)}catch{console.warn(se+"Illegal colour value: ",ee)}}}jsonInitStyle(ee,se){ee=ee.style;try{this.setStyle(ee)}catch{console.warn(se+"Style does not exist: ",ee)}}mixin(ee,se){if(se!==void 0&&typeof se!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!se){se=[];for(const ce in ee)this[ce]!==void 0&&se.push(ce);if(se.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(se))}Object.assign(this,ee)}interpolate(ee,se,ce,_e){ee=fc(ee),this.validateTokens(ee,se.length),se=this.interpolateArguments(ee,se,ce),ce=[];for(let me=0,be;be=se[me];me++)if(this.isInputKeyword(be.type)){if(ee=this.inputFromJson(be,_e)){for(let Ie=0,De;De=ce[Ie];Ie++)ee.appendField(De[0],De[1]);ce.length=0}}else(ee=this.fieldFromJson(be))&&ce.push([ee,be.name])}validateTokens(ee,se){const ce=[];let _e=0;for(let me=0;me<ee.length;me++){const be=ee[me];if(typeof be=="number"){if(1>be||be>se)throw Error('Block "'+this.type+'": Message index %'+be+" out of range.");if(ce[be])throw Error('Block "'+this.type+'": Message index %'+be+" duplicated.");ce[be]=!0,_e++}}if(_e!==se)throw Error('Block "'+this.type+'": Message does not reference all '+se+" arg(s).")}interpolateArguments(ee,se,ce){const _e=[];for(let be=0;be<ee.length;be++){var me=ee[be];if(typeof me=="number"&&(me=se[me-1]),typeof me=="string"){if(me===`
`)me={type:"input_end_row"},ce&&(me.align=ce);else if(me=this.stringToFieldJson(me),!me)continue}_e.push(me)}return(ee=_e.length)&&!this.isInputKeyword(_e[ee-1].type)&&(ee={type:"input_dummy"},ce&&(ee.align=ce),_e.push(ee)),_e}fieldFromJson(ee){const se=ne.fromJson$$module$build$src$core$field_registry(ee);return!se&&ee.alt?typeof ee.alt=="string"?(ee=this.stringToFieldJson(ee.alt))?this.fieldFromJson(ee):null:this.fieldFromJson(ee.alt):se}inputFromJson(ee,se){var ce={LEFT:ne.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:ne.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:ne.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:ne.Align$$module$build$src$core$inputs$align.CENTRE};let _e;switch(ee.type){case"input_value":_e=this.appendValueInput(ee.name);break;case"input_statement":_e=this.appendStatementInput(ee.name);break;case"input_dummy":_e=this.appendDummyInput(ee.name);break;case"input_end_row":_e=this.appendEndRowInput(ee.name);break;default:_e=this.appendInputFromRegistry(ee.type,ee.name)}return _e?(ee.check&&_e.setCheck(ee.check),ee.align&&(ce=ce[ee.align.toUpperCase()],ce===void 0?console.warn(se+"Illegal align value: ",ee.align):_e.setAlign(ce)),_e):null}isInputKeyword(ee){return ee==="input_value"||ee==="input_statement"||ee==="input_dummy"||ee==="input_end_row"||he($t.INPUT,ee)}stringToFieldJson(ee){return(ee=ee.trim())?{type:"field_label",text:ee}:null}moveInputBefore(ee,se){if(ee!==se){var ce=-1,_e=se?-1:this.inputList.length;for(let me=0,be;be=this.inputList[me];me++)if(be.name===ee){if(ce=me,_e!==-1)break}else if(se&&be.name===se&&(_e=me,ce!==-1))break;if(ce===-1)throw Error('Named input "'+ee+'" not found.');if(_e===-1)throw Error('Reference input "'+se+'" not found.');this.moveNumberedInputBefore(ce,_e)}}moveNumberedInputBefore(ee,se){if(ee===se)throw Error("Can't move input to itself.");if(ee>=this.inputList.length)throw RangeError("Input index "+ee+" out of bounds.");if(se>this.inputList.length)throw RangeError("Reference input "+se+" out of bounds.");const ce=this.inputList[ee];this.inputList.splice(ee,1),ee<se&&se--,this.inputList.splice(se,0,ce)}removeInput(ee,se){for(let ce=0,_e;_e=this.inputList[ce];ce++)if(_e.name===ee)return _e instanceof gn&&this.statementInputCount--,_e.dispose(),this.inputList.splice(ce,1),!0;if(se)return!1;throw Error("Input not found: "+ee)}getInput(ee){for(let se=0,ce;ce=this.inputList[se];se++)if(ce.name===ee)return ce;return null}getInputTargetBlock(ee){return(ee=this.getInput(ee))&&ee.connection&&ee.connection.targetBlock()}getCommentText(){let ee,se;return(se=(ee=this.getIcon(wi.COMMENT))==null?void 0:ee.getText())!=null?se:null}setCommentText(ee){var se;let ce;const _e=(ce=(se=this.getIcon(wi.COMMENT))==null?void 0:se.getText())!=null?ce:null;if(_e!==ee){if(ee!==null){if(se=this.getIcon(wi.COMMENT),!se){if(se=de($t.ICON,wi.COMMENT.toString(),!1),!se)throw Error("No comment icon class is registered, so a comment cannot be set");if(se=new se(this),!z_(se))throw Error("The class registered as a comment icon does not conform to the ICommentIcon interface");se=this.addIcon(se)}ne.disable$$module$build$src$core$events$utils(),se.setText(ee),ne.enable$$module$build$src$core$events$utils()}else this.removeIcon(wi.COMMENT);Ae(new(Le(it.BLOCK_CHANGE))(this,"comment",null,_e,ee))}}setWarningText(ee,se){}setMutator(ee){}addIcon(ee){if(this.hasIcon(ee.getType()))throw new Rg(ee);return this.icons.push(ee),this.icons.sort((se,ce)=>se.getWeight()-ce.getWeight()),ee}removeIcon(ee){if(!this.hasIcon(ee))return!1;let se;return(se=this.getIcon(ee))==null||se.dispose(),this.icons=this.icons.filter(ce=>!ce.getType().equals(ee)),!0}hasIcon(ee){return this.icons.some(se=>se.getType().equals(ee))}getIcon(ee){return ee instanceof wi?this.icons.find(se=>se.getType().equals(ee)):this.icons.find(se=>se.getType().toString()===ee)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy}moveBy(ee,se,ce){if(this.parentBlock_)throw Error("Block has parent");const _e=new(Le(it.BLOCK_MOVE))(this);ce&&_e.setReason(ce),this.xy.translate(ee,se),_e.recordNew(),Ae(_e)}makeConnection_(ee){return new qt(this,ee)}allInputsFilled(ee){if(ee===void 0&&(ee=!0),!ee&&this.isShadow())return!1;for(let ce=0,_e;_e=this.inputList[ce];ce++)if(_e.connection){var se=_e.connection.targetBlock();if(!se||!se.allInputsFilled(ee))return!1}return(se=this.getNextBlock())?se.allInputsFilled(ee):!0}toDevString(){let ee=this.type?'"'+this.type+'" block':"Block";return this.id&&(ee+=' (id="'+this.id+'")'),ee}};ws.COLLAPSED_INPUT_NAME=Eo,ws.COLLAPSED_FIELD_NAME=Kl;var Sn=class{constructor(ee,se,ce,_e){this.workspace=ee,this.targetWorkspace=se,this.isFlyoutLabel=_e,this.onMouseUpWrapper=null,this.height=this.width=0,this.cursorSvg=this.svgText=this.svgGroup=null,this.text=ce.text,this.position=new yt(0,0),this.callbackKey=ce.callbackKey||ce.callbackkey,this.cssClass=ce["web-class"]||null,this.info=ce}createDom(){var ee=this.isFlyoutLabel?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass&&(ee+=" "+this.cssClass),this.svgGroup=lt(Ye.G,{class:ee},this.workspace.getCanvas());let se;this.isFlyoutLabel||(se=lt(Ye.RECT,{class:"blocklyFlyoutButtonShadow",rx:Sn.BORDER_RADIUS,ry:Sn.BORDER_RADIUS,x:1,y:1},this.svgGroup)),ee=lt(Ye.RECT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:Sn.BORDER_RADIUS,ry:Sn.BORDER_RADIUS},this.svgGroup);const ce=lt(Ye.TEXT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup);var _e=bi(this.text);this.workspace.RTL&&(_e+="‏"),ce.textContent=_e,this.isFlyoutLabel&&(this.svgText=ce,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill"));const me=It(ce,"fontSize"),be=It(ce,"fontWeight"),Ie=It(ce,"fontFamily");if(this.width=ye(ce,me,be,Ie),_e=we(_e,me,be,Ie),this.height=_e.height,!this.isFlyoutLabel){this.width+=2*Sn.TEXT_MARGIN_X,this.height+=2*Sn.TEXT_MARGIN_Y;let De;(De=se)==null||De.setAttribute("width",String(this.width));let dt;(dt=se)==null||dt.setAttribute("height",String(this.height))}return ee.setAttribute("width",String(this.width)),ee.setAttribute("height",String(this.height)),ce.setAttribute("x",String(this.width/2)),ce.setAttribute("y",String(this.height/2-_e.height/2+_e.baseline)),this.updateTransform(),this.onMouseUpWrapper=Nt(this.svgGroup,"pointerup",this,this.onMouseUp),this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(ee,se){this.position.x=ee,this.position.y=se,this.updateTransform()}isLabel(){return this.isFlyoutLabel}getPosition(){return this.position}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}getWorkspace(){return this.workspace}dispose(){this.onMouseUpWrapper&&Yt(this.onMouseUpWrapper),this.svgGroup&&We(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}setCursorSvg(ee){ee?this.svgGroup&&(this.svgGroup.appendChild(ee),this.cursorSvg=ee):this.cursorSvg=null}setMarkerSvg(){throw Error("Attempted to set a marker on a button.")}onMouseUp(ee){(ee=this.targetWorkspace.getGesture(ee))&&ee.cancel(),this.isFlyoutLabel&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isFlyoutLabel||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isFlyoutLabel||(ee=this.targetWorkspace.getButtonCallback(this.callbackKey))&&ee(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}};Sn.TEXT_MARGIN_X=5,Sn.TEXT_MARGIN_Y=2,Sn.BORDER_RADIUS=4,si(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var gt=class{constructor(ee,se,ce){if(this.wsCoordinate=null,!se)throw Error("Cannot create a node without a location.");this.type=ee,this.isConnectionLocation=gt.isConnectionType(ee),this.location=se,this.processParams(ce||null)}processParams(ee){ee&&ee.wsCoordinate&&(this.wsCoordinate=ee.wsCoordinate)}getLocation(){return this.location}getType(){return this.type}getWsCoordinate(){return this.wsCoordinate}isConnection(){return this.isConnectionLocation}findNextForInput(){var ee=this.location.getParentInput();const se=ee.getSourceBlock();for(ee=se.inputList.indexOf(ee),ee+=1;ee<se.inputList.length;ee++){const ce=se.inputList[ee],_e=ce.fieldRow;for(let me=0;me<_e.length;me++){const be=_e[me];if(be.isClickable()||gt.NAVIGATE_ALL_FIELDS)return gt.createFieldNode(be)}if(ce.connection)return gt.createInputNode(ce)}return null}findNextForField(){var ee=this.location,se=ee.getParentInput();const ce=ee.getSourceBlock();if(!ce)throw Error("The current AST location is not associated with a block");var _e=ce.inputList.indexOf(se);for(ee=se.fieldRow.indexOf(ee)+1;_e<ce.inputList.length;_e++){se=ce.inputList[_e];const me=se.fieldRow;for(;ee<me.length;){if(me[ee].isClickable()||gt.NAVIGATE_ALL_FIELDS)return gt.createFieldNode(me[ee]);ee++}if(ee=0,se.connection)return gt.createInputNode(se)}return null}findPrevForInput(){const ee=this.location.getParentInput(),se=ee.getSourceBlock();for(var ce=se.inputList.indexOf(ee);0<=ce;ce--){var _e=se.inputList[ce];if(_e.connection&&_e!==ee)return gt.createInputNode(_e);_e=_e.fieldRow;for(let me=_e.length-1;0<=me;me--){const be=_e[me];if(be.isClickable()||gt.NAVIGATE_ALL_FIELDS)return gt.createFieldNode(be)}}return null}findPrevForField(){var ee=this.location;const se=ee.getParentInput(),ce=ee.getSourceBlock();if(!ce)throw Error("The current AST location is not associated with a block");var _e=ce.inputList.indexOf(se);for(ee=se.fieldRow.indexOf(ee)-1;0<=_e;_e--){var me=ce.inputList[_e];if(me.connection&&me!==se)return gt.createInputNode(me);for(me=me.fieldRow;-1<ee;){if(me[ee].isClickable()||gt.NAVIGATE_ALL_FIELDS)return gt.createFieldNode(me[ee]);ee--}0<=_e-1&&(ee=ce.inputList[_e-1].fieldRow.length-1)}return null}navigateBetweenStacks(ee){var se=this.getLocation();if(se.getSourceBlock){var ce=se.getSourceBlock();ce&&(se=ce)}if(!se||se.isDeadOrDying())return null;if(se.workspace.isFlyout)return this.navigateFlyoutContents(ee);ce=se.getRootBlock(),se=ce.workspace.getTopBlocks(!0);for(let _e=0;_e<se.length;_e++)if(ce.id===se[_e].id)return ee=_e+(ee?1:-1),ee===-1||ee===se.length?null:gt.createStackNode(se[ee]);throw Error("Couldn't find "+(ee?"next":"previous")+" stack?!")}navigateFlyoutContents(ee){let se;switch(this.getType()){case gt.types.STACK:se=this.getLocation();var ce=se.workspace.targetWorkspace;break;case gt.types.BUTTON:se=this.getLocation(),ce=se.getTargetWorkspace();break;default:return null}return ce=ce.getFlyout(),ce&&(ee=this.findNextLocationInFlyout(ce.getContents(),se,ee))?ee.type==="button"&&ee.button?gt.createButtonNode(ee.button):ee.type==="block"&&ee.block?gt.createStackNode(ee.block):null:null}findNextLocationInFlyout(ee,se,ce){const _e=ee.findIndex(me=>se instanceof ws&&me.block===se||se instanceof Sn&&me.button===se);return 0>_e?null:(ce=ce?_e+1:_e-1,ce===-1||ce===ee.length?null:ee[ce])}findTopASTNodeForBlock(ee){const se=co(ee);return se?gt.createConnectionNode(se):gt.createBlockNode(ee)}getOutAstNodeForBlock(ee){if(!ee)return null;ee=ee.getTopStackBlock();const se=co(ee);return se&&se.targetConnection&&se.targetConnection.getParentInput()?gt.createInputNode(se.targetConnection.getParentInput()):gt.createStackNode(ee)}findFirstFieldOrInput(ee){ee=ee.inputList;for(let se=0;se<ee.length;se++){const ce=ee[se],_e=ce.fieldRow;for(let me=0;me<_e.length;me++){const be=_e[me];if(be.isClickable()||gt.NAVIGATE_ALL_FIELDS)return gt.createFieldNode(be)}if(ce.connection)return gt.createInputNode(ce)}return null}getSourceBlock(){return this.getType()===gt.types.BLOCK?this.getLocation():this.getType()===gt.types.STACK?this.getLocation():this.getType()===gt.types.WORKSPACE||this.getType()===gt.types.BUTTON?null:this.getLocation().getSourceBlock()}next(){switch(this.type){case gt.types.STACK:return this.navigateBetweenStacks(!0);case gt.types.OUTPUT:return gt.createBlockNode(this.location.getSourceBlock());case gt.types.FIELD:return this.findNextForField();case gt.types.INPUT:return this.findNextForInput();case gt.types.BLOCK:const ee=this.location.nextConnection;if(!ee)break;return gt.createConnectionNode(ee);case gt.types.PREVIOUS:return gt.createBlockNode(this.location.getSourceBlock());case gt.types.NEXT:return gt.createConnectionNode(this.location.targetConnection);case gt.types.BUTTON:return this.navigateFlyoutContents(!0)}return null}in(){switch(this.type){case gt.types.WORKSPACE:const ee=this.location.getTopBlocks(!0);if(0<ee.length)return gt.createStackNode(ee[0]);break;case gt.types.STACK:return this.findTopASTNodeForBlock(this.location);case gt.types.BLOCK:return this.findFirstFieldOrInput(this.location);case gt.types.INPUT:return gt.createConnectionNode(this.location.targetConnection)}return null}prev(){switch(this.type){case gt.types.STACK:return this.navigateBetweenStacks(!1);case gt.types.FIELD:return this.findPrevForField();case gt.types.INPUT:return this.findPrevForInput();case gt.types.BLOCK:var ee=co(this.location);if(!ee)break;return gt.createConnectionNode(ee);case gt.types.PREVIOUS:if((ee=this.location.targetConnection)&&!ee.getParentInput())return gt.createConnectionNode(ee);break;case gt.types.NEXT:return gt.createBlockNode(this.location.getSourceBlock());case gt.types.BUTTON:return this.navigateFlyoutContents(!1)}return null}out(){switch(this.type){case gt.types.STACK:var ee=this.location,se=ee.getRelativeToSurfaceXY();return se=new yt(se.x,se.y+gt.DEFAULT_OFFSET_Y),gt.createWorkspaceNode(ee.workspace,se);case gt.types.OUTPUT:return ee=this.location,(se=ee.targetConnection)?gt.createConnectionNode(se):gt.createStackNode(ee.getSourceBlock());case gt.types.FIELD:if(ee=this.location.getSourceBlock(),!ee)throw Error("The current AST location is not associated with a block");return gt.createBlockNode(ee);case gt.types.INPUT:return gt.createBlockNode(this.location.getSourceBlock());case gt.types.BLOCK:return this.getOutAstNodeForBlock(this.location);case gt.types.PREVIOUS:return this.getOutAstNodeForBlock(this.location.getSourceBlock());case gt.types.NEXT:return this.getOutAstNodeForBlock(this.location.getSourceBlock())}return null}static isConnectionType(ee){switch(ee){case gt.types.PREVIOUS:case gt.types.NEXT:case gt.types.INPUT:case gt.types.OUTPUT:return!0}return!1}static createFieldNode(ee){return ee?new gt(gt.types.FIELD,ee):null}static createConnectionNode(ee){if(!ee)return null;const se=ee.type;return se===Rt.INPUT_VALUE||se===Rt.NEXT_STATEMENT&&ee.getParentInput()?gt.createInputNode(ee.getParentInput()):se===Rt.NEXT_STATEMENT?new gt(gt.types.NEXT,ee):se===Rt.OUTPUT_VALUE?new gt(gt.types.OUTPUT,ee):se===Rt.PREVIOUS_STATEMENT?new gt(gt.types.PREVIOUS,ee):null}static createInputNode(ee){return ee&&ee.connection?new gt(gt.types.INPUT,ee.connection):null}static createBlockNode(ee){return ee?new gt(gt.types.BLOCK,ee):null}static createStackNode(ee){return ee?new gt(gt.types.STACK,ee):null}static createButtonNode(ee){return ee?new gt(gt.types.BUTTON,ee):null}static createWorkspaceNode(ee,se){return se&&ee?new gt(gt.types.WORKSPACE,ee,{wsCoordinate:se}):null}static createTopNode(ee){const se=co(ee);return se?gt.createConnectionNode(se):gt.createBlockNode(ee)}};gt.NAVIGATE_ALL_FIELDS=!1,gt.DEFAULT_OFFSET_Y=-20,function(ee){ee=ee.types||(ee.types={}),ee.FIELD="field",ee.BLOCK="block",ee.INPUT="input",ee.OUTPUT="output",ee.NEXT="next",ee.PREVIOUS="previous",ee.STACK="stack",ee.WORKSPACE="workspace",ee.BUTTON="button"}(gt||(gt={}));var kh=class extends An{constructor(ee,se,ce,_e){let me=ee?ee.workspace.id:void 0;_e&&_e.getType()===gt.types.WORKSPACE&&(me=_e.getLocation().id),super(me),this.type=it.MARKER_MOVE,this.blockId=ee==null?void 0:ee.id,this.oldNode=ce||void 0,this.newNode=_e,this.isCursor=se}toJson(){const ee=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return ee.isCursor=this.isCursor,ee.blockId=this.blockId,ee.oldNode=this.oldNode,ee.newNode=this.newNode,ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new kh),se.isCursor=ee.isCursor,se.blockId=ee.blockId,se.oldNode=ee.oldNode,se.newNode=ee.newNode,se}};re($t.EVENT,it.MARKER_MOVE,kh);var vm="blocklyCursor",Im="blocklyMarker",Om=.75,vh=class{constructor(ee,se,ce){this.workspace=ee,this.marker=ce,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent=null,this.constants_=se,ee=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=ce.colour||ee}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const ee=this.isCursor()?vm:Im;return this.svgGroup_=lt(Ye.G,{class:ee}),this.createDomInternal_(),this.svgGroup_}setParent_(ee){this.isCursor()?(this.parent&&this.parent.setCursorSvg(null),ee.setCursorSvg(this.getSvgRoot())):(this.parent&&this.parent.setMarkerSvg(null),ee.setMarkerSvg(this.getSvgRoot())),this.parent=ee}draw(ee,se){if(se){this.constants_=this.workspace.getRenderer().getConstants();var ce=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||ce,this.applyColour_(se),this.showAtLocation_(se),this.fireMarkerEvent(ee,se),ee=this.currentMarkerSvg.childNodes[0],ee!==void 0&&ee.beginElement&&ee.beginElement()}else this.hide()}showAtLocation_(ee){const se=ee.getLocation().type;ee.getType()===gt.types.BLOCK?this.showWithBlock_(ee):ee.getType()===gt.types.OUTPUT?this.showWithOutput_(ee):se===Rt.INPUT_VALUE?this.showWithInput_(ee):se===Rt.NEXT_STATEMENT?this.showWithNext_(ee):ee.getType()===gt.types.PREVIOUS?this.showWithPrevious_(ee):ee.getType()===gt.types.FIELD?this.showWithField_(ee):ee.getType()===gt.types.WORKSPACE?this.showWithCoordinates_(ee):ee.getType()===gt.types.STACK?this.showWithStack_(ee):ee.getType()===gt.types.BUTTON&&this.showWithButton_(ee)}showWithBlockPrevOutput(ee){ee=ee.getSourceBlock();const se=ee.width;var ce=ee.height,_e=ce*Om;const me=this.constants_.CURSOR_BLOCK_PADDING;ee.previousConnection?(ce=this.constants_.shapeFor(ee.previousConnection),this.positionPrevious_(se,me,_e,ce)):ee.outputConnection?(_e=this.constants_.shapeFor(ee.outputConnection),this.positionOutput_(se,ce,_e)):this.positionBlock_(se,me,_e),this.setParent_(ee),this.showCurrent_()}showWithBlock_(ee){this.showWithBlockPrevOutput(ee)}showWithPrevious_(ee){this.showWithBlockPrevOutput(ee)}showWithOutput_(ee){this.showWithBlockPrevOutput(ee)}showWithCoordinates_(ee){var se=ee.getWsCoordinate();ee=se.x,se=se.y,this.workspace.RTL&&(ee-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(ee,se,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(ee){ee=ee.getLocation();const se=ee.getSize().width,ce=ee.getSize().height;this.positionRect_(0,0,se,ce),this.setParent_(ee),this.showCurrent_()}showWithInput_(ee){ee=ee.getLocation();const se=ee.getSourceBlock();this.positionInput_(ee),this.setParent_(se),this.showCurrent_()}showWithNext_(ee){var se=ee.getLocation();ee=se.getSourceBlock();let ce=0;se=se.getOffsetInBlock().y;const _e=ee.getHeightWidth().width;this.workspace.RTL&&(ce=-_e),this.positionLine_(ce,se,_e),this.setParent_(ee),this.showCurrent_()}showWithStack_(ee){ee=ee.getLocation();var se=ee.getHeightWidth();const ce=se.width+this.constants_.CURSOR_STACK_PADDING;se=se.height+this.constants_.CURSOR_STACK_PADDING;const _e=-this.constants_.CURSOR_STACK_PADDING/2,me=-this.constants_.CURSOR_STACK_PADDING/2;let be=_e;this.workspace.RTL&&(be=-(ce+_e)),this.positionRect_(be,me,ce,se),this.setParent_(ee),this.showCurrent_()}showWithButton_(ee){ee=ee.getLocation();const se=ee.width+this.constants_.CURSOR_STACK_PADDING,ce=ee.height+this.constants_.CURSOR_STACK_PADDING,_e=-this.constants_.CURSOR_STACK_PADDING/2,me=-this.constants_.CURSOR_STACK_PADDING/2;let be=_e;this.workspace.RTL&&(be=-(se+_e)),this.positionRect_(be,me,se,ce),this.setParent_(ee),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(ee,se,ce){if(ee=ci(-se,ce)+wt("V",-se)+wt("H",ee+2*se)+wt("V",ce),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",ee),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(ee){const se=ee.getOffsetInBlock().x,ce=ee.getOffsetInBlock().y;ee=Ni(0,0)+this.constants_.shapeFor(ee).pathDown,this.markerInput_.setAttribute("d",ee),this.markerInput_.setAttribute("transform","translate("+se+","+ce+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(ee,se,ce){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${ee}`),this.markerSvgLine_.setAttribute("y",`${se}`),this.markerSvgLine_.setAttribute("width",`${ce}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(ee,se,ce){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");ee=ci(ee,0)+wt("h",-(ee-ce.width))+wt("v",this.constants_.TAB_OFFSET_FROM_TOP)+ce.pathDown+wt("V",se)+wt("H",ee),this.markerBlock_.setAttribute("d",ee),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(ee,se,ce,_e){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");ee=ci(-se,ce)+wt("V",-se)+wt("H",this.constants_.NOTCH_OFFSET_LEFT)+_e.pathLeft+wt("H",ee+2*se)+wt("V",ce),this.markerBlock_.setAttribute("d",ee),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(ee,se,ce,_e){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${ee}`),this.markerSvgRect_.setAttribute("y",`${se}`),this.markerSvgRect_.setAttribute("width",`${ce}`),this.markerSvgRect_.setAttribute("height",`${_e}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl(ee){ee.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent(ee,se){const ce=se.getSourceBlock();ee=new(Le(it.MARKER_MOVE))(ce,this.isCursor(),ee,se),Ae(ee)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=lt(Ye.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=lt(Ye.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.markerSvg_),this.markerSvgRect_=lt(Ye.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10},this.markerSvg_),this.markerInput_=lt(Ye.PATH,{transform:""},this.markerSvg_),this.markerBlock_=lt(Ye.PATH,{transform:"",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const ee=this.getBlinkProperties_();lt(Ye.ANIMATE,ee,this.markerSvgLine_),lt(Ye.ANIMATE,ee,this.markerInput_),lt(Ye.ANIMATE,Object.assign({},ee,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(ee){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(ee=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",ee),this.markerInput_.firstElementChild.setAttribute("values",ee),this.markerBlock_.firstElementChild.setAttribute("values",ee))}dispose(){this.svgGroup_&&We(this.svgGroup_)}},Ta=class{constructor(ee,se,ce){this.markerSvg=this.cursorSvg=null,this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=ce,this.style=se,this.svgRoot=ee,this.svgPath=lt(Ye.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(ee){this.svgPath.setAttribute("d",ee)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(ee){ee?(this.svgRoot.appendChild(ee),this.cursorSvg=ee):this.cursorSvg=null}setMarkerSvg(ee){ee?(this.cursorSvg?this.svgRoot.insertBefore(ee,this.cursorSvg):this.svgRoot.appendChild(ee),this.markerSvg=ee):this.markerSvg=null}applyColour(ee){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(ee.isShadow()),this.updateDisabled_(!ee.isEnabled()||ee.getInheritedDisabled())}setStyle(ee){this.style=ee}setClass_(ee,se){ee&&(se?Ct(this.svgRoot,ee):Oe(this.svgRoot,ee))}updateHighlighted(ee){ee?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(ee){ee&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(ee){this.setClass_("blocklyDisabled",ee),ee&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(ee){this.setClass_("blocklySelected",ee)}updateDraggingDelete(ee){this.setClass_("blocklyDraggingDelete",ee)}updateInsertionMarker(ee){this.setClass_("blocklyInsertionMarker",ee)}updateMovable(ee){this.setClass_("blocklyDraggable",ee)}updateReplacementFade(ee){this.setClass_("blocklyReplaceable",ee)}updateShapeForInputHighlight(ee,se){}addConnectionHighlight(ee,se,ce,_e){if(this.connectionHighlights.has(ee)){if(this.currentHighlightMatchesNew(ee,se,ce))return;this.removeConnectionHighlight(ee)}se=lt(Ye.PATH,{class:"blocklyHighlightedConnectionPath",d:se,transform:`translate(${ce.x}, ${ce.y})`+(_e?" scale(-1 1)":"")},this.svgRoot),this.connectionHighlights.set(ee,se)}currentHighlightMatchesNew(ee,se,ce){let _e;const me=(_e=this.connectionHighlights.get(ee))==null?void 0:_e.getAttribute("d");return ee=this.highlightOffsets.get(ee),me===se&&yt.equals(ee,ce)}removeConnectionHighlight(ee){const se=this.connectionHighlights.get(ee);se&&(We(se),this.connectionHighlights.delete(ee))}},Cn=class{constructor(ee){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,ne.setSelected$$module$build$src$core$common(ee),this.topBlock=ee,this.workspace=ee.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections(),this.lastOnStack&&(this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock()))}dispose(){this.availableConnections.length=0,this.disposeInsertionMarker(this.firstMarker),this.disposeInsertionMarker(this.lastMarker)}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){ne.disable$$module$build$src$core$events$utils(),this.hidePreview(),ne.enable$$module$build$src$core$events$utils();var{local:ee,closest:se}=this.activeCandidate;ee.connect(se);var ce=ee.isSuperior()?se:ee,_e=this.topBlock.getRootBlock();cn().then(()=>{Il(ce.getSourceBlock()),setTimeout(()=>{_e.bringToFront()},0)})}}update(ee,se){const ce=this.getCandidate(ee);((this.wouldDeleteBlock=this.shouldDelete(!!ce,se))||this.shouldUpdatePreviews(ce,ee))&&(ne.disable$$module$build$src$core$events$utils(),this.maybeHidePreview(ce),this.maybeShowPreview(ce),ne.enable$$module$build$src$core$events$utils())}createMarkerBlock(ee){ne.disable$$module$build$src$core$events$utils();let se;try{const ce=un(ee,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!ce)throw Error(`Failed to serialize source block. ${ee.toDevString()}`);se=es(ce,this.workspace);for(const _e of se.getDescendants(!1))_e.setInsertionMarker(!0);se.initSvg(),se.getSvgRoot().setAttribute("visibility","hidden")}finally{ne.enable$$module$build$src$core$events$utils()}return se}initAvailableConnections(){const ee=this.topBlock.getConnections_(!1),se=this.topBlock.lastConnectionInStack(!0);return se&&se!==this.topBlock.nextConnection&&(ee.push(se),this.lastOnStack=se),ee}shouldUpdatePreviews(ee,se){if(!ee)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:ce,closest:_e}=this.activeCandidate;if(_e===ee.closest&&ce===ee.local)return!1;const me=ce.x+se.x-_e.x;return se=ce.y+se.y-_e.y,ee.radius<Math.sqrt(me*me+se*se)-ne.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(ee){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let se=this.getStartRadius(),ce=null;for(let _e=0;_e<this.availableConnections.length;_e++){const me=this.availableConnections[_e],be=me.closest(se,ee);be.connection&&(ce={closest:be.connection,local:me,radius:be.radius},se=be.radius)}return ce}getStartRadius(){return this.activeCandidate?ne.config$$module$build$src$core$config.connectingSnapRadius:ne.config$$module$build$src$core$config.snapRadius}shouldDelete(ee,se){return se&&this.workspace.getComponentManager().hasCapability(se.id,ui.Capability.DELETE_AREA)?se.wouldDelete(this.topBlock):!1}maybeShowPreview(ee){if(!this.wouldDeleteBlock&&ee){var se=ee.closest,ce;se===((ce=this.activeCandidate)==null?void 0:ce.closest)||se.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=ee,this.showPreview(this.activeCandidate))}}showPreview(ee){const se=this.workspace.getRenderer();switch(se.getConnectionPreviewMethod(ee.closest,ee.local,this.topBlock)){case Cn.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(ee);break;case Cn.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(ee);break;case Cn.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(ee)}se.shouldHighlightConnection(ee.closest)&&ee.closest.highlight()}maybeHidePreview(ee){if(!ee)this.hidePreview();else if(this.activeCandidate){const se=this.activeCandidate.local!==ee.local;(this.activeCandidate.closest!==ee.closest||se||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let ee;const se=(ee=this.activeCandidate)==null?void 0:ee.closest;se&&se.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(se)&&se.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(ee){const{local:se,closest:ce}=ee;let _e=(ee=this.lastOnStack&&se===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!_e)throw Error("Cannot show the insertion marker because there is no insertion marker block");let me;try{me=_e.getMatchingConnection(se.getSourceBlock(),se)}catch{if(ee&&this.lastOnStack?(this.disposeInsertionMarker(this.lastMarker),_e=this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock())):(this.disposeInsertionMarker(this.firstMarker),_e=this.firstMarker=this.createMarkerBlock(this.topBlock)),!_e)throw Error("Cannot show the insertion marker because there is no insertion marker block");me=_e.getMatchingConnection(se.getSourceBlock(),se)}if(!me)throw Error("Cannot show the insertion marker because there is no associated connection");if(me===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");_e.queueRender(),wn(),me.connect(ce);const be={x:ce.x-me.x,y:ce.y-me.y},Ie=me.getOffsetInBlock().clone(),De=me;cn().then(()=>{let dt;(dt=_e)==null||dt.positionNearConnection(De,be,Ie);let vt;(vt=_e)==null||vt.getSvgRoot().setAttribute("visibility","visible")}),this.markerConnection=me}hideInsertionMarker(){if(this.markerConnection){var ee=this.markerConnection,se=ee.getSourceBlock(),ce=se.outputConnection,_e;if((_e=se.previousConnection)!=null&&_e.targetConnection||ce!=null&&ce.targetConnection)se.unplug(!0);else{let me;(me=ee.targetBlock())==null||me.unplug(!1)}if(ee.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(ee=se.getSvgRoot())&&ee.setAttribute("visibility","hidden")}}showInsertionInputOutline(ee){ee=ee.closest,this.highlightedBlock=ee.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(ee,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(ee){if(this.fadedBlock=ee.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const ee=[];return this.firstMarker&&ee.push(this.firstMarker),this.lastMarker&&ee.push(this.lastMarker),ee}disposeInsertionMarker(ee){if(ee){ne.disable$$module$build$src$core$events$utils();try{ee.dispose()}finally{ne.enable$$module$build$src$core$events$utils()}}}};(function(ee){ee=ee.PREVIEW_TYPE||(ee.PREVIEW_TYPE={}),ee[ee.INSERTION_MARKER=0]="INSERTION_MARKER",ee[ee.INPUT_OUTLINE=1]="INPUT_OUTLINE",ee[ee.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(Cn||(Cn={})),Cn.PREVIEW_TYPE;var ba=class{constructor(ee){this.overrides=null,this.name=ee}getClassName(){return this.name+"-renderer"}init(ee,se){this.constants_=this.makeConstants_(),se&&(this.overrides=se,Object.assign(this.constants_,se)),this.constants_.setTheme(ee),this.constants_.init()}createDom(ee,se){this.constants_.createDom(ee,this.name+"-"+se.name,"."+this.getClassName()+"."+se.getClassName())}refreshDom(ee,se){const ce=this.getConstants();ce.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=ce.randomIdentifier,this.constants_.setTheme(se),this.constants_.init(),this.createDom(ee,se)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new ma}makeRenderInfo_(ee){return new Po(this,ee)}makeDrawer_(ee,se){return new $a(ee,se)}makeMarkerDrawer(ee,se){return new vh(ee,this.getConstants(),se)}makePathObject(ee,se){return new Ta(ee,se,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(ee){return!0}orphanCanConnectAtEnd(ee,se,ce){return!!qt.getConnectionForOrphanedConnection(ee,ce===Rt.OUTPUT_VALUE?se.outputConnection:se.previousConnection)}getConnectionPreviewMethod(ee,se,ce){return ge("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),se.type===Rt.OUTPUT_VALUE||se.type===Rt.PREVIOUS_STATEMENT?!ee.isConnected()||this.orphanCanConnectAtEnd(ce,ee.targetBlock(),se.type)?Cn.PREVIEW_TYPE.INSERTION_MARKER:Cn.PREVIEW_TYPE.REPLACEMENT_FADE:Cn.PREVIEW_TYPE.INSERTION_MARKER}render(ee){const se=this.makeRenderInfo_(ee);se.measure(),this.makeDrawer_(ee,se).draw()}},ti={};ti.BottomRow=$h,ti.Connection=ps,ti.ConstantProvider=ma,ti.Drawer=$a,ti.ExternalValueInput=fa,ti.Field=Gr,ti.Hat=Th,ti.Icon=Ng,ti.InRowSpacer=pn,ti.InlineInput=bh,ti.InputConnection=Rs,ti.InputRow=Eh,ti.JaggedEdge=Mg,ti.MarkerSvg=vh,ti.Measurable=Xn,ti.NextConnection=xg,ti.OutputConnection=Dg,ti.PathObject=Ta,ti.PreviousConnection=Pg,ti.RenderInfo=Po,ti.Renderer=ba,ti.RoundCorner=xo,ti.Row=No,ti.SpacerRow=yh,ti.SquareCorner=Do,ti.StatementInput=Mo,ti.TopRow=Sh,ti.Types=He,ti.init=Vc,ti.register=uo,ti.unregister=X_;var Fg=class{constructor(ee,se){this.workspace=ee,this.theme=se,this.subscribedWorkspaces=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(ee){var se=this.theme;this.theme=ee,(ee=this.workspace.getInjectionDiv())&&(se&&(se=se.getClassName())&&Oe(ee,se),(se=this.theme.getClassName())&&Ct(ee,se));for(let ce=0,_e;_e=this.subscribedWorkspaces[ce];ce++)_e.refreshTheme();for(const[ce,_e]of this.componentDB)for(const me of _e){ee=me.element,se=me.propertyName;const be=this.theme&&this.theme.getComponentStyle(ce);ee.style.setProperty(se,be||"")}for(const ce of this.subscribedWorkspaces)ce.hideChaff()}subscribeWorkspace(ee){this.subscribedWorkspaces.push(ee)}unsubscribeWorkspace(ee){if(!hi(this.subscribedWorkspaces,ee))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(ee,se,ce){this.componentDB.has(se)||this.componentDB.set(se,[]),this.componentDB.get(se).push({element:ee,propertyName:ce}),se=this.theme&&this.theme.getComponentStyle(se),ee.style.setProperty(ce,se||"")}unsubscribe(ee){if(ee)for(const[se,ce]of this.componentDB){for(let _e=ce.length-1;0<=_e;_e--)ce[_e].element===ee&&ce.splice(_e,1);ce.length||this.componentDB.delete(se)}}dispose(){this.subscribedWorkspaces.length=0,this.componentDB.clear()}},Ih="VARIABLE_DYNAMIC",lr={CATEGORY_NAME:Ih};lr.flyoutCategory=xl,lr.flyoutCategoryBlocks=Yc,lr.onCreateVariableButtonClick_Colour=jc,lr.onCreateVariableButtonClick_Number=Xc,lr.onCreateVariableButtonClick_String=zc;var Ug=30,ar=[];ar[Rt.INPUT_VALUE]=Rt.OUTPUT_VALUE,ar[Rt.OUTPUT_VALUE]=Rt.INPUT_VALUE,ar[Rt.NEXT_STATEMENT]=Rt.PREVIOUS_STATEMENT,ar[Rt.PREVIOUS_STATEMENT]=Rt.NEXT_STATEMENT;var Oh="RENAME_VARIABLE_ID",Rh="DELETE_VARIABLE_ID",Hg=class{canConnect(ee,se,ce,_e){return this.canConnectWithReason(ee,se,ce,_e)===qt.CAN_CONNECT}canConnectWithReason(ee,se,ce,_e){const me=this.doSafetyChecks(ee,se);return me!==qt.CAN_CONNECT?me:this.doTypeChecks(ee,se)?ce&&!this.doDragChecks(ee,se,_e||0)?qt.REASON_DRAG_CHECKS_FAILED:qt.CAN_CONNECT:qt.REASON_CHECKS_FAILED}getErrorMessage(ee,se,ce){switch(ee){case qt.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case qt.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case qt.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case qt.REASON_TARGET_NULL:return"Target connection is null.";case qt.REASON_CHECKS_FAILED:return"Connection checks failed. "+(se+" expected "+se.getCheck()+", found "+ce.getCheck());case qt.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case qt.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case qt.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(ee,se){if(!ee||!se)return qt.REASON_TARGET_NULL;let ce,_e,me;return ee.isSuperior()?(ce=ee.getSourceBlock(),_e=se.getSourceBlock(),me=se):(_e=ee.getSourceBlock(),ce=se.getSourceBlock(),me=ee,ee=se),ce===_e?qt.REASON_SELF_CONNECTION:me.type!==ar[ee.type]?qt.REASON_WRONG_TYPE:ce.workspace!==_e.workspace?qt.REASON_DIFFERENT_WORKSPACES:ce.isShadow()&&!_e.isShadow()?qt.REASON_SHADOW_PARENT:me.type===Rt.OUTPUT_VALUE&&_e.previousConnection&&_e.previousConnection.isConnected()||me.type===Rt.PREVIOUS_STATEMENT&&_e.outputConnection&&_e.outputConnection.isConnected()?qt.REASON_PREVIOUS_AND_OUTPUT:qt.CAN_CONNECT}doTypeChecks(ee,se){if(ee=ee.getCheck(),se=se.getCheck(),!ee||!se)return!0;for(let ce=0;ce<ee.length;ce++)if(se.includes(ee[ce]))return!0;return!1}doDragChecks(ee,se,ce){if(ee.distanceFrom(se)>ce||se.getSourceBlock().isInsertionMarker())return!1;switch(se.type){case Rt.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(ee,se);case Rt.OUTPUT_VALUE:if(se.isConnected()&&!se.targetBlock().isInsertionMarker()||ee.isConnected())return!1;break;case Rt.INPUT_VALUE:if(se.isConnected()&&!se.targetBlock().isMovable()&&!se.targetBlock().isShadow())return!1;break;case Rt.NEXT_STATEMENT:if(se.isConnected()&&!ee.getSourceBlock().nextConnection&&!se.targetBlock().isShadow()&&se.targetBlock().nextConnection||se.targetBlock()&&!se.targetBlock().isMovable()&&!se.targetBlock().isShadow())return!1;break;default:return!1}return!fo.includes(se)}canConnectToPrevious_(ee,se){return ee.targetConnection||fo.includes(se)?!1:se.targetConnection?(ee=se.targetBlock(),ee.isInsertionMarker()?!ee.getPreviousBlock():!1):!0}};re($t.CONNECTION_CHECKER,Vn,Hg);var wh=class extends yo{constructor(ee){super(ee),this.type=it.VAR_DELETE,ee&&(this.varType=ee.type,this.varName=ee.name)}toJson(){const ee=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return ee.varType=this.varType,ee.varName=this.varName,ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new wh),se.varType=ee.varType,se.varName=ee.varName,se}run(ee){const se=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");ee?se.deleteVariableById(this.varId):se.createVariable(this.varName,this.varType,this.varId)}};re($t.EVENT,it.VAR_DELETE,wh);var Ah=class extends yo{constructor(ee,se){super(ee),this.type=it.VAR_RENAME,ee&&(this.oldName=ee.name,this.newName=typeof se>"u"?"":se)}toJson(){const ee=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return ee.oldName=this.oldName,ee.newName=this.newName,ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new Ah),se.oldName=ee.oldName,se.newName=ee.newName,se}run(ee){const se=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");ee?se.renameVariableById(this.varId,this.newName):se.renameVariableById(this.varId,this.oldName)}};re($t.EVENT,it.VAR_RENAME,Ah);var Lh=class{constructor(ee){this.workspace=ee,this.variableMap=new Map}clear(){for(const ee of this.variableMap.values())for(;0<ee.length;)this.deleteVariable(ee[0]);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(ee,se){if(ee.name!==se){var ce=this.getVariable(se,ee.type),_e=this.workspace.getAllBlocks(!1),me=ne.getGroup$$module$build$src$core$events$utils();me||ne.setGroup$$module$build$src$core$events$utils(!0);try{ce&&ce.getId()!==ee.getId()?this.renameVariableWithConflict(ee,se,ce,_e):this.renameVariableAndUses(ee,se,_e)}finally{ne.setGroup$$module$build$src$core$events$utils(me)}}}renameVariableById(ee,se){const ce=this.getVariableById(ee);if(!ce)throw Error("Tried to rename a variable that didn't exist. ID: "+ee);this.renameVariable(ce,se)}renameVariableAndUses(ee,se,ce){for(Ae(new(Le(it.VAR_RENAME))(ee,se)),ee.name=se,se=0;se<ce.length;se++)ce[se].updateVarName(ee)}renameVariableWithConflict(ee,se,ce,_e){const me=ee.type;for(se!==ce.name&&this.renameVariableAndUses(ce,se,_e),se=0;se<_e.length;se++)_e[se].renameVarById(ee.getId(),ce.getId());Ae(new(Le(it.VAR_DELETE))(ee)),hi(this.variableMap.get(me),ee)}createVariable(ee,se,ce){var _e=this.getVariable(ee,se);if(_e){if(ce&&_e.getId()!==ce)throw Error('Variable "'+ee+'" is already in use and its id is "'+_e.getId()+'" which conflicts with the passed in id, "'+ce+'".');return _e}if(ce&&this.getVariableById(ce))throw Error('Variable id, "'+ce+'", is already in use.');return _e=ce||Te(),se=se||"",_e=new So(this.workspace,ee,se,_e),ee=this.variableMap.get(se)||[],ee.push(_e),this.variableMap.delete(se),this.variableMap.set(se,ee),Ae(new(Le(it.VAR_CREATE))(_e)),_e}deleteVariable(ee){const se=ee.getId(),ce=this.variableMap.get(ee.type);if(ce){for(let _e=0;_e<ce.length;_e++)if(ce[_e].getId()===se){ce.splice(_e,1),Ae(new(Le(it.VAR_DELETE))(ee)),ce.length===0&&this.variableMap.delete(ee.type);break}}}deleteVariableById(ee){const se=this.getVariableById(ee);if(se){var ce=se.name;const _e=this.getVariableUsesById(ee);for(let me=0,be;be=_e[me];me++)if(be.type==="procedures_defnoreturn"||be.type==="procedures_defreturn"){ee=String(be.getFieldValue("NAME")),ce=ne.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",ce).replace("%2",ee),Qr(ce);return}1<_e.length?(ce=ne.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(_e.length)).replace("%2",ce),ll(ce,me=>{me&&se&&this.deleteVariableInternal(se,_e)})):this.deleteVariableInternal(se,_e)}else console.warn("Can't delete non-existent variable: "+ee)}deleteVariableInternal(ee,se){const ce=ne.getGroup$$module$build$src$core$events$utils();ce||ne.setGroup$$module$build$src$core$events$utils(!0);try{for(let _e=0;_e<se.length;_e++)se[_e].dispose(!0);this.deleteVariable(ee)}finally{ne.setGroup$$module$build$src$core$events$utils(ce)}}getVariable(ee,se){if(se=this.variableMap.get(se||"")){for(let ce=0,_e;_e=se[ce];ce++)if(ne.Names$$module$build$src$core$names.equals(_e.name,ee))return _e}return null}getVariableById(ee){for(const se of this.variableMap.values())for(const ce of se)if(ce.getId()===ee)return ce;return null}getVariablesOfType(ee){return(ee=this.variableMap.get(ee||""))?ee.slice():[]}getVariableTypes(ee){const se=new Set(this.variableMap.keys());if(ee&&ee.getPotentialVariableMap())for(const ce of ee.getPotentialVariableMap().variableMap.keys())se.add(ce);return se.has("")||se.add(""),Array.from(se.values())}getAllVariables(){let ee=[];for(const se of this.variableMap.values())ee=ee.concat(se);return ee}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(ee=>ee.name)}getVariableUsesById(ee){const se=[],ce=this.workspace.getAllBlocks(!1);for(let _e=0;_e<ce.length;_e++){const me=ce[_e].getVarModels();if(me)for(let be=0;be<me.length;be++)me[be].getId()===ee&&se.push(ce[_e])}return se}},Vr=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(ee){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new Lg,this.potentialVariableMap=null,this.id=Te(),Ht(this),this.options=ee||new yn({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(fe($t.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new Lh(this)}dispose(){this.listeners.length=0,this.clear(),Ze(this)}sortObjects(ee,se){const ce=Math.sin(dl(Vr.SCAN_ANGLE))*(this.RTL?-1:1);return ee=ee.getRelativeToSurfaceXY(),se=se.getRelativeToSurfaceXY(),ee.y+ce*ee.x-(se.y+ce*se.x)}addTopBlock(ee){this.topBlocks.push(ee)}removeTopBlock(ee){if(!hi(this.topBlocks,ee))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(ee=!1){const se=[].concat(this.topBlocks);return ee&&1<se.length&&se.sort(this.sortObjects.bind(this)),se}addTypedBlock(ee){this.typedBlocksDB.has(ee.type)||this.typedBlocksDB.set(ee.type,[]),this.typedBlocksDB.get(ee.type).push(ee)}removeTypedBlock(ee){hi(this.typedBlocksDB.get(ee.type),ee),this.typedBlocksDB.get(ee.type).length||this.typedBlocksDB.delete(ee.type)}getBlocksByType(ee,se=!1){return this.typedBlocksDB.has(ee)?(ee=this.typedBlocksDB.get(ee).slice(0),se&&ee&&1<ee.length&&ee.sort(this.sortObjects.bind(this)),ee.filter(ce=>!ce.isInsertionMarker())):[]}addTopComment(ee){this.topComments.push(ee),this.commentDB.has(ee.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+ee.id+'"'),this.commentDB.set(ee.id,ee)}removeTopComment(ee){if(!hi(this.topComments,ee))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(ee.id)}getTopComments(ee=!1){const se=[].concat(this.topComments);return ee&&1<se.length&&se.sort(this.sortObjects.bind(this)),se}getAllBlocks(ee=!1){if(ee){var se=this.getTopBlocks(!0);ee=[];for(let ce=0;ce<se.length;ce++)ee.push(...se[ce].getDescendants(!0))}else for(ee=this.getTopBlocks(!1),se=0;se<ee.length;se++)ee.push(...ee[se].getChildren(!1));return ee.filter(ce=>!ce.isInsertionMarker())}clear(){this.isClearing=!0;try{const ee=ne.getGroup$$module$build$src$core$events$utils();for(ee||ne.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();ne.setGroup$$module$build$src$core$events$utils(ee),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(ee,se){this.variableMap.renameVariableById(ee,se)}createVariable(ee,se,ce){return this.variableMap.createVariable(ee,se,ce)}getVariableUsesById(ee){return this.variableMap.getVariableUsesById(ee)}deleteVariableById(ee){this.variableMap.deleteVariableById(ee)}getVariable(ee,se){return this.variableMap.getVariable(ee,se)}getVariableById(ee){return this.variableMap.getVariableById(ee)}getVariablesOfType(ee){return this.variableMap.getVariablesOfType(ee)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(ee,se){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(ee){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(ee){return this.options.maxInstances?(this.options.maxInstances[ee]!==void 0?this.options.maxInstances[ee]:1/0)-this.getBlocksByType(ee,!1).length:1/0}isCapacityAvailable(ee){if(!this.hasBlockLimits())return!0;let se=0;for(const ce in ee){if(ee[ce]>this.remainingCapacityOfType(ce))return!1;se+=ee[ce]}return!(se>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(ee){var se=ee?this.redoStack_:this.undoStack_,ce=ee?this.undoStack_:this.redoStack_;const _e=se.pop();if(_e){for(var me=[_e];se.length&&_e.group&&_e.group===se[se.length-1].group;){const be=se.pop();be&&me.push(be)}for(se=0;se<me.length;se++)ce.push(me[se]);ne.setRecordUndo$$module$build$src$core$events$utils(!1);try{for(ce=0;ce<me.length;ce++)me[ce].run(ee)}finally{ne.setRecordUndo$$module$build$src$core$events$utils(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,rt()}addChangeListener(ee){return this.listeners.push(ee),ee}removeChangeListener(ee){hi(this.listeners,ee)}fireChangeListener(ee){if(ee.recordUndo)for(this.undoStack_.push(ee),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let se=0;se<this.listeners.length;se++)(0,this.listeners[se])(ee)}getBlockById(ee){return this.blockDB.get(ee)||null}setBlockById(ee,se){this.blockDB.set(ee,se)}removeBlockById(ee){this.blockDB.delete(ee)}getCommentById(ee){let se;return(se=this.commentDB.get(ee))!=null?se:null}allInputsFilled(ee){const se=this.getTopBlocks(!1);for(let ce=0;ce<se.length;ce++)if(!se[ce].allInputsFilled(ee))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new Lh(this)}getVariableMap(){return this.variableMap}setVariableMap(ee){this.variableMap=ee}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let ee=null;const se=this.options.parentWorkspace;return this.isFlyout?se&&se.options&&(ee=se.options.parentWorkspace):se&&(ee=se),ee}static getById(ee){return pt(ee)}static getAll(){return Ot()}};Vr.SCAN_ANGLE=3;var Rm=100,Gg=class{constructor(ee){this.parentWorkspace=ee,this.sounds=new Map,this.lastSound=null,this.muted=!1}dispose(){this.sounds.clear()}load(ee,se){if(ee.length){try{var ce=new globalThis.Audio}catch{return}for(let me=0;me<ee.length;me++){const be=ee[me],Ie=be.match(/\.(\w+)$/);if(Ie&&ce.canPlayType("audio/"+Ie[1])){var _e=new globalThis.Audio(be);break}}_e&&this.sounds.set(se,_e)}}preload(){for(const ee of this.sounds.values()){ee.volume=.01;const se=ee.play();if(se!==void 0?se.then(ee.pause).catch(function(){}):ee.pause(),Wl||Dp)break}}play(ee,se){if(!this.muted){var ce=this.sounds.get(ee);ce?(ee=new Date,this.lastSound!==null&&ee.getTime()-this.lastSound.getTime()<Rm||(this.lastSound=ee,ce=Wl||Nu?ce:ce.cloneNode(),ce.volume=se===void 0?1:se,ce.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(ee,se)}}setMuted(ee){this.muted=ee}getMuted(){return this.muted}},wm=20,kn=class extends Vr{constructor(ee){super(ee),this.resizeHandlerWrapper=null,this.resizesEnabled=this.visible=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.metricsManager=new(fe($t.METRICS_MANAGER,ee,!0))(this),this.getMetrics=ee.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=ee.setMetrics||kn.setTopLevelWorkspaceMetrics,this.componentManager=new ui,this.connectionDBList=Ur.init(this.connectionChecker),this.audioManager=new Gg(ee.parentWorkspace),this.grid=this.options.gridPattern?new ph(this.options.gridPattern,ee.gridOptions):null,this.markerManager=new Io(this),Vi&&cl&&this.registerToolboxCategoryCallback(Ju,cl),lr&&xl&&this.registerToolboxCategoryCallback(Ih,xl),Zi&&Nl&&(this.registerToolboxCategoryCallback(ga,Nl),this.addChangeListener(Hc)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new Fg(this,this.options.theme||ua),this.themeManager_.subscribeWorkspace(this);let se;this.renderer=Vc(this.options.renderer||"geras",this.getTheme(),(se=this.options.rendererOverrides)!=null?se:void 0),this.cachedParentSvgSize=new Xt(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(ee){this.metricsManager=ee,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(ee){this.markerManager.setCursorSvg(ee)}setMarkerSvg(ee){this.markerManager.setMarkerSvg(ee)}getMarker(ee){return this.markerManager?this.markerManager.getMarker(ee):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(ee){ee||(ee=ua),this.themeManager_.setTheme(ee)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles(this.getAllBlocks(!1).filter(se=>!!se.getStyleName())),this.refreshToolboxSelection(),this.toolbox&&this.toolbox.refreshTheme(),this.isVisible()&&this.setVisible(!0);const ee=new(Le(it.THEME_CHANGE))(this.getTheme().name,this.id);Ae(ee)}updateBlockStyles(ee){for(let se=0,ce;ce=ee[se];se++){const _e=ce.getStyleName();_e&&ce.setStyle(_e)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const ee=this.getParentSvg().getScreenCTM();ee&&(this.inverseScreenCTM=ee.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.visible}getSvgXY(ee){let se=0,ce=0,_e=1;(this.getCanvas().contains(ee)||this.getBubbleCanvas().contains(ee))&&(_e=this.scale);do{const me=Pi(ee);(ee===this.getCanvas()||ee===this.getBubbleCanvas())&&(_e=1),se+=me.x*_e,ce+=me.y*_e,ee=ee.parentNode}while(ee&&ee!==this.getParentSvg()&&ee!==this.getInjectionDiv());return new yt(se,ce)}getCachedParentSvgSize(){const ee=this.cachedParentSvgSize;return new Xt(ee.width,ee.height)}getOriginOffsetInPixels(){return In(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let ee=this.svgGroup_;for(;ee;){if((" "+(ee.getAttribute("class")||"")+" ").includes(" injectionDiv ")){this.injectionDiv=ee;break}ee=ee.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(ee){this.resizeHandlerWrapper=ee}createDom(ee,se){return this.injectionDiv||(this.injectionDiv=se??null),this.svgGroup_=lt(Ye.G,{class:"blocklyWorkspace"}),ee&&(this.svgBackground_=lt(Ye.RECT,{height:"100%",width:"100%",class:ee},this.svgGroup_),ee==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new Em(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(Nt(this.svgGroup_,"pointerdown",this,this.onMouseDown,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),Nt(this.svgGroup_,"wheel",this,this.onMouseWheel)),this.options.hasCategories&&(this.toolbox=new(fe($t.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(ee=fe($t.CURSOR,this.options))&&this.markerManager.setCursor(new ee),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&We(this.svgGroup_),this.toolbox&&(this.toolbox.dispose(),this.toolbox=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const ee=this.getParentSvg();ee&&ee.parentNode&&We(ee.parentNode)}this.resizeHandlerWrapper&&(Yt(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null)}addTrashcan(){this.trashcan=kn.newTrashcan(this);const ee=this.trashcan.createDom();this.svgGroup_.insertBefore(ee,this.getCanvas())}static newTrashcan(ee){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new jp(this);const ee=this.zoomControls_.createDom();this.svgGroup_.appendChild(ee)}addFlyout(ee){const se=new yn({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return se.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(fe($t.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(se):new(fe($t.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(se),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(ee)}getFlyout(ee){return this.flyout||ee?this.flyout:this.toolbox?this.toolbox.getFlyout():null}getToolbox(){return this.toolbox}updateScreenCalculations(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox&&this.toolbox.position(),this.flyout&&this.flyout.position();const ee=this.componentManager.getComponents(ui.Capability.POSITIONABLE,!0),se=this.getMetricsManager().getUiMetrics(),ce=[];for(let _e=0,me;me=ee[_e];_e++){me.position(se,ce);const be=me.getBoundingRectangle();be&&ce.push(be)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations()}updateScreenCalculationsIfScrolled(){const ee=ms();yt.equals(this.lastRecordedPageScroll,ee)||(this.lastRecordedPageScroll=ee,this.updateScreenCalculations())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(ee,se){const ce=this.getParentSvg();ee!=null&&(this.cachedParentSvgSize.width=ee,ce.setAttribute("data-cached-width",`${ee}`)),se!=null&&(this.cachedParentSvgSize.height=se,ce.setAttribute("data-cached-height",`${se}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let ee=this.svgGroup_;for(;ee;){if(ee.tagName==="svg"){this.cachedParentSvg=ee;break}ee=ee.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(Ke()){var ee=this.scale,se=-this.scrollY,ce=-this.scrollX;if(!(ee===this.oldScale&&1>Math.abs(se-this.oldTop)&&1>Math.abs(ce-this.oldLeft))){var _e=new(Le(it.VIEWPORT_CHANGE))(se,ce,ee,this.id,this.oldScale);this.oldScale=ee,this.oldTop=se,this.oldLeft=ce,Ae(_e)}}}translate(ee,se){let ce;(ce=this.layerManager)==null||ce.translateLayers(new yt(ee,se),this.scale);let _e;(_e=this.grid)==null||_e.moveTo(ee,se),this.maybeFireViewportChangeEvent()}getWidth(){const ee=this.getMetrics();return ee?ee.viewWidth/this.scale:0}setVisible(ee){this.visible=ee,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(ee),this.getFlyout()&&this.getFlyout().setContainerVisible(ee),this.getParentSvg().style.display=ee?"block":"none",this.toolbox&&this.toolbox.setVisible(ee),ee||this.hideChaff(!0))}render(){const ee=this.getAllBlocks(!1);for(let se=ee.length-1;0<=se;se--)ee[se].queueRender();this.getTopBlocks().flatMap(se=>se.getDescendants(!1)).filter(se=>se.isInsertionMarker()).forEach(se=>se.queueRender()),cn().then(()=>void this.markerManager.updateMarkers())}highlightBlock(ee,se){if(se===void 0){for(let ce=0,_e;_e=this.highlightedBlocks[ce];ce++)_e.setHighlighted(!1);this.highlightedBlocks.length=0}(ee=ee?this.getBlockById(ee):null)&&((se=se===void 0||se)?this.highlightedBlocks.includes(ee)||this.highlightedBlocks.push(ee):hi(this.highlightedBlocks,ee),ee.setHighlighted(se))}refreshToolboxSelection(){const ee=this.isFlyout?this.targetWorkspace:this;ee&&!ee.currentGesture_&&ee.toolbox&&ee.toolbox.getFlyout()&&ee.toolbox.refreshSelection()}renameVariableById(ee,se){super.renameVariableById(ee,se),this.refreshToolboxSelection()}deleteVariableById(ee){super.deleteVariableById(ee),this.refreshToolboxSelection()}createVariable(ee,se,ce){return ee=super.createVariable(ee,se,ce),this.refreshToolboxSelection(),ee}recordDragTargets(){const ee=this.componentManager.getComponents(ui.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let se=0,ce;ce=ee[se];se++){const _e=ce.getClientRect();_e&&this.dragTargetAreas.push({component:ce,clientRect:_e})}}newBlock(ee,se){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(ee){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}getDragTarget(ee){for(let se=0,ce;ce=this.dragTargetAreas[se];se++)if(ce.clientRect.contains(ee.clientX,ee.clientY))return ce.component;return null}onMouseDown(ee){const se=this.getGesture(ee);se&&se.handleWsStart(ee,this)}startDrag(ee,se){Sl(this,ee,se)}moveDrag(ee){return Cl(this,ee)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const ee=!!this.scrollbar;return this.isMovable()&&(!ee||ee&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const ee=!!this.scrollbar;return this.isMovable()&&(!ee||ee&&this.scrollbar.canScrollVertically())}onMouseWheel(ee){if(cs.inProgress())ee.preventDefault(),ee.stopPropagation();else{var se=this.options.zoomOptions&&this.options.zoomOptions.wheel,ce=this.options.moveOptions&&this.options.moveOptions.wheel;if(se||ce){var _e=Li(ee);if(Mu)var me=ee.metaKey;se&&(ee.ctrlKey||me||!ce)?(_e=-_e.y/50,se=Fe(ee,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(se.x,se.y,_e)):(se=this.scrollX-_e.x,ce=this.scrollY-_e.y,ee.shiftKey&&!_e.x&&(se=this.scrollX-_e.y,ce=this.scrollY),this.scroll(se,ce)),ee.preventDefault()}}}getBlocksBoundingBox(){const ee=this.getTopBoundedElements();if(!ee.length)return new ri(0,0,0,0);const se=ee[0].getBoundingRectangle();for(let _e=1;_e<ee.length;_e++){var ce=ee[_e];ce.isInsertionMarker&&ce.isInsertionMarker()||(ce=ce.getBoundingRectangle(),ce.top<se.top&&(se.top=ce.top),ce.bottom>se.bottom&&(se.bottom=ce.bottom),ce.left<se.left&&(se.left=ce.left),ce.right>se.right&&(se.right=ce.right))}return se}cleanUp(){this.setResizesEnabled(!1),ne.setGroup$$module$build$src$core$events$utils(!0);var ee=this.getTopBlocks(!0),se=ee.filter(be=>be.isMovable());const ce=ee.filter(be=>!be.isMovable()).map(be=>be.getBoundingRectangle());ee=function(be){for(const Ie of ce)if(be.intersects(Ie))return Ie;return null};var _e=0;const me=this.renderer.getConstants().MIN_BLOCK_HEIGHT;for(const be of se){for(se=be.getBoundingRectangle(),be.moveBy(-se.left,_e-se.top,["cleanup"]),be.snapToGrid(),se=be.getBoundingRectangle(),_e=ee(se);_e!=null;)_e=_e.top+_e.getHeight()+me,be.moveBy(0,_e-se.top,["cleanup"]),be.snapToGrid(),se=be.getBoundingRectangle(),_e=ee(se);_e=be.getRelativeToSurfaceXY().y+be.getHeightWidth().height+me}ne.setGroup$$module$build$src$core$events$utils(!1),this.setResizesEnabled(!0)}showContextMenu(ee){if(!this.options.readOnly&&!this.isFlyout){var se=Wt.registry.getContextMenuOptions(Wt.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(se,ee),ro(ee,se,this.RTL,this)}}updateToolbox(ee){if(ee=Zn(ee)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(xt(ee)){if(!this.toolbox)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=ee,this.toolbox.render(ee)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=ee,this.flyout.show(ee)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(Pt(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(ee,se,ce){ce=Math.pow(this.options.zoomOptions.scaleSpeed,ce);const _e=this.scale*ce;if(this.scale!==_e){_e>this.options.zoomOptions.maxScale?ce=this.options.zoomOptions.maxScale/this.scale:_e<this.options.zoomOptions.minScale&&(ce=this.options.zoomOptions.minScale/this.scale);var me=this.getCanvas().getCTM(),be=this.getParentSvg().createSVGPoint();be.x=ee,be.y=se,be=be.matrixTransform(me.inverse()),ee=be.x,se=be.y,me=me.translate(ee*(1-ce),se*(1-ce)).scale(ce),this.scrollX=me.e,this.scrollY=me.f,this.setScale(_e)}}zoomCenter(ee){var se=this.getMetrics();let ce;this.flyout?(ce=se.svgWidth?se.svgWidth/2:0,se=se.svgHeight?se.svgHeight/2:0):(ce=se.viewWidth/2+se.absoluteLeft,se=se.viewHeight/2+se.absoluteTop),this.zoom(ce,se,ee)}zoomToFit(){if(this.isMovable()){var ee=this.getMetrics(),se=ee.viewWidth;ee=ee.viewHeight;var ce=this.getBlocksBoundingBox(),_e=2*wm,me=ce.right-ce.left+_e;if(ce=ce.bottom-ce.top+_e,me){this.flyout&&(this.horizontalLayout?(ee+=this.flyout.getHeight(),ce+=this.flyout.getHeight()/this.scale):(se+=this.flyout.getWidth(),me+=this.flyout.getWidth()/this.scale)),se/=me,ee/=ce,ne.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(se,ee)),this.scrollCenter()}finally{ne.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){Ct(this.getCanvas(),"blocklyCanvasTransitioning"),Ct(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){Oe(this.getCanvas(),"blocklyCanvasTransitioning"),Oe(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var ee=this.getMetrics(),se=(ee.scrollWidth-ee.viewWidth)/2,ce=(ee.scrollHeight-ee.viewHeight)/2;se=-se-ee.scrollLeft,ce=-ce-ee.scrollTop,this.scroll(se,ce)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(ee,se){if(this.isMovable()){var ce=ee?this.getBlockById(ee):null;if(ce){ee=ce.getRelativeToSurfaceXY(),ce=se?{height:ce.height,width:ce.width}:ce.getHeightWidth();var _e=this.scale;se=(ee.x+(this.RTL?-1:1)*ce.width/2)*_e,ee=(ee.y+ce.height/2)*_e,ce=this.getMetrics(),this.scroll(-(se-ce.viewWidth/2),-(ee-ce.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(ee){this.options.zoomOptions.maxScale&&ee>this.options.zoomOptions.maxScale?ee=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&ee<this.options.zoomOptions.minScale&&(ee=this.options.zoomOptions.minScale),this.scale=ee,this.hideChaff(!1),(ee=this.getFlyout(!1))&&ee.isVisible()&&(ee.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),ee=this.getMetrics(),this.scrollX-=ee.absoluteLeft,this.scrollY-=ee.absoluteTop,ee.viewLeft+=ee.absoluteLeft,ee.viewTop+=ee.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(ee):this.scrollbar.resizeContent(ee))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(ee,se){this.hideChaff(!0);const ce=this.getMetrics();ee=Math.min(ee,-ce.scrollLeft),se=Math.min(se,-ce.scrollTop);const _e=ce.scrollTop+Math.max(0,ce.scrollHeight-ce.viewHeight);ee=Math.max(ee,-(ce.scrollLeft+Math.max(0,ce.scrollWidth-ce.viewWidth))),se=Math.max(se,-_e),this.scrollX=ee,this.scrollY=se,this.scrollbar&&this.scrollbar.set(-(ee+ce.scrollLeft),-(se+ce.scrollTop),!1),ee+=ce.absoluteLeft,se+=ce.absoluteTop,this.translate(ee,se)}getBlockById(ee){return super.getBlockById(ee)}getAllBlocks(ee=!1){return super.getAllBlocks(ee)}getTopBlocks(ee=!1){return super.getTopBlocks(ee)}addTopBlock(ee){this.addTopBoundedElement(ee),super.addTopBlock(ee)}removeTopBlock(ee){this.removeTopBoundedElement(ee),super.removeTopBlock(ee)}addTopComment(ee){this.addTopBoundedElement(ee),super.addTopComment(ee)}removeTopComment(ee){this.removeTopBoundedElement(ee),super.removeTopComment(ee)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(ee){this.topBoundedElements.push(ee)}removeTopBoundedElement(ee){hi(this.topBoundedElements,ee)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(ee){const se=!this.resizesEnabled&&ee;this.resizesEnabled=ee,se&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(ee,se){if(typeof se!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(ee,se)}getButtonCallback(ee){let se;return(se=this.flyoutButtonCallbacks.get(ee))!=null?se:null}removeButtonCallback(ee){this.flyoutButtonCallbacks.delete(ee)}registerToolboxCategoryCallback(ee,se){if(typeof se!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(ee,se)}getToolboxCategoryCallback(ee){return this.toolboxCategoryCallbacks.get(ee)||null}removeToolboxCategoryCallback(ee){this.toolboxCategoryCallbacks.delete(ee)}getGesture(ee){const se=ee.type==="pointerdown",ce=this.currentGesture_;return ce?se&&ce.hasStarted()?(console.warn("Tried to start the same gesture twice."),ce.cancel(),null):ce:se?this.currentGesture_=new cs(ee,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(ee=!1){ts(),so(this),Un(),this.hideComponents(ee)}hideComponents(ee=!1){this.getComponentManager().getComponents(ui.Capability.AUTOHIDEABLE,!0).forEach(se=>se.autoHide(ee))}static setTopLevelWorkspaceMetrics(ee){const se=this.getMetrics();typeof ee.x=="number"&&(this.scrollX=-(se.scrollLeft+(se.scrollWidth-se.viewWidth)*ee.x)),typeof ee.y=="number"&&(this.scrollY=-(se.scrollTop+(se.scrollHeight-se.viewHeight)*ee.y)),this.translate(this.scrollX+se.absoluteLeft,this.scrollY+se.absoluteTop)}},Nh=class extends An{constructor(ee,se,ce){super(ce),this.type=it.SELECTED,this.oldElementId=ee??void 0,this.newElementId=se??void 0}toJson(){const ee=super.toJson();return ee.oldElementId=this.oldElementId,ee.newElementId=this.newElementId,ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new Nh),se.oldElementId=ee.oldElementId,se.newElementId=ee.newElementId,se}};re($t.EVENT,it.SELECTED,Nh);var Bo=class{paste(ee,se,ce){if(!se.isCapacityAvailable(ee.typeCounts))return null;ce&&(ee.blockState.x=ce.x,ee.blockState.y=ce.y),ce=ce||new yt(ee.blockState.x||0,ee.blockState.y||0),ne.disable$$module$build$src$core$events$utils();let _e;try{_e=es(ee.blockState,se),j_(_e,ce)}finally{ne.enable$$module$build$src$core$events$utils()}return _e&&(Ke()&&!_e.isShadow()&&Ae(new(Le(it.BLOCK_CREATE))(_e)),ne.setSelected$$module$build$src$core$common(_e),_e)}};Bo.TYPE="block",dr(Bo.TYPE,new Bo);var Ea={};Ea.bumpIntoBounds=vr,Ea.bumpIntoBoundsHandler=Kc,Ea.bumpTopObjectsIntoBounds=Dl;var Wg=class{constructor(ee){this.block=ee,this.connectionPreviewer=this.connectionCandidate=this.startLoc=this.startChildConn=this.startParentConn=null,this.dragging=!1,this.dragOffset=new yt(0,0),this.inGroup=!1,this.workspace=ee.workspace}isMovable(){if(this.block.isShadow()){let ee,se;return(se=(ee=this.block.getParent())==null?void 0:ee.isMovable())!=null?se:!1}return this.block.isOwnMovable()&&!this.block.isDeadOrDying()&&!this.workspace.options.readOnly&&!this.block.isInFlyout}startDrag(ee){if(this.block.isShadow())this.startDraggingShadow(ee);else{this.dragging=!0,(this.inGroup=!!ne.getGroup$$module$build$src$core$events$utils())||ne.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent(),this.startLoc=this.block.getRelativeToSurfaceXY(),this.connectionCandidate=null,this.connectionPreviewer=new(fe($t.CONNECTION_PREVIEWER,this.workspace.options))(this.block),Ii(),this.workspace.setResizesEnabled(!1),Cr(),ee=!!ee&&(ee.altKey||ee.ctrlKey||ee.metaKey),this.shouldDisconnect(ee)&&this.disconnectBlock(ee),this.block.setDragging(!0);var se;(se=this.workspace.getLayerManager())==null||se.moveToDragLayer(this.block)}}startDraggingShadow(ee){const se=this.block.getParent();if(!se)throw Error("Tried to drag a shadow block with no parent. Shadow blocks should always have parents.");this.dragOffset=yt.difference(se.getRelativeToSurfaceXY(),this.block.getRelativeToSurfaceXY()),se.startDrag(ee)}shouldDisconnect(ee){return!!(this.block.getParent()||ee&&this.block.nextConnection&&this.block.nextConnection.targetBlock())}disconnectBlock(ee){let se,ce,_e;if(this.startParentConn=(_e=(se=this.block.outputConnection)==null?void 0:se.targetConnection)!=null?_e:(ce=this.block.previousConnection)==null?void 0:ce.targetConnection,ee){let me;this.startChildConn=(me=this.block.nextConnection)==null?void 0:me.targetConnection}this.block.unplug(ee),Lc(this.block)}fireDragStartEvent(){const ee=new(Le(it.BLOCK_DRAG))(this.block,!0,this.block.getDescendants(!1));Ae(ee)}fireDragEndEvent(){const ee=new(Le(it.BLOCK_DRAG))(this.block,!1,this.block.getDescendants(!1));Ae(ee)}fireMoveEvent(){if(!this.block.isDeadOrDying()){var ee=new(Le(it.BLOCK_MOVE))(this.block);ee.setReason(["drag"]),ee.oldCoordinate=this.startLoc,ee.recordNew(),Ae(ee)}}drag(ee){if(this.block.isShadow()){let se;(se=this.block.getParent())==null||se.drag(yt.sum(ee,this.dragOffset))}else this.block.moveDuringDrag(ee),this.updateConnectionPreview(this.block,yt.difference(ee,this.startLoc))}updateConnectionPreview(ee,se){var ce=this.connectionCandidate;const _e=this.getConnectionCandidate(ee,se);if(_e){this.connectionCandidate=se=ce&&this.currCandidateIsBetter(ce,se,_e)?ce:_e;var{local:me,neighbour:be}=se;se=me.type===Rt.OUTPUT_VALUE||me.type===Rt.PREVIOUS_STATEMENT,ce=be.isConnected()&&!be.targetBlock().isInsertionMarker(),se&&ce&&!this.orphanCanConnectAtEnd(ee,be.targetBlock(),me.type)?this.connectionPreviewer.previewReplacement(me,be,be.targetBlock()):this.connectionPreviewer.previewConnection(me,be)}else this.connectionPreviewer.hidePreview(),this.connectionCandidate=null}orphanCanConnectAtEnd(ee,se,ce){return!!qt.getConnectionForOrphanedConnection(ee,ce===Rt.OUTPUT_VALUE?se.outputConnection:se.previousConnection)}currCandidateIsBetter(ee,se,ce){const{local:_e,neighbour:me}=ee;ee=new yt(_e.x,_e.y);const be=new yt(me.x,me.y);return se=yt.distance(yt.sum(ee,se),be),ce.distance>se-ne.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(ee,se){ee=this.getLocalConnections(ee);let ce=this.connectionCandidate?ne.config$$module$build$src$core$config.connectingSnapRadius:ne.config$$module$build$src$core$config.snapRadius,_e=null;for(const me of ee){const{connection:be,radius:Ie}=me.closest(ce,se);be&&(_e={local:me,neighbour:be,distance:Ie},ce=Ie)}return _e}getLocalConnections(ee){const se=ee.getConnections_(!1),ce=ee.lastConnectionInStack(!0);return ce&&ce!==ee.nextConnection&&se.push(ce),se}endDrag(ee){if(this.block.isShadow()){let se;(se=this.block.getParent())==null||se.endDrag(ee)}else{if(this.fireDragEndEvent(),this.fireMoveEvent(),Hi(),Cr(),this.connectionPreviewer.hidePreview(),!this.block.isDeadOrDying()&&this.dragging){let se;(se=this.workspace.getLayerManager())==null||se.moveOffDragLayer(this.block,Is),this.block.setDragging(!1)}this.connectionCandidate?(this.applyConnections(this.connectionCandidate),this.disposeStep()):this.block.queueRender().then(()=>this.disposeStep()),this.inGroup||ne.setGroup$$module$build$src$core$events$utils(!1)}}disposeStep(){this.block.snapToGrid(),this.connectionPreviewer.dispose(),this.workspace.setResizesEnabled(!0)}applyConnections(ee){const{local:se,neighbour:ce}=ee;se.connect(ce);const _e=se.isSuperior()?ce:se,me=this.block.getRootBlock();cn().then(()=>{Il(_e.getSourceBlock()),setTimeout(()=>{me.bringToFront()},0)})}revertDrag(){if(this.block.isShadow()){let se;(se=this.block.getParent())==null||se.revertDrag()}else{var ee;if((ee=this.startChildConn)==null||ee.connect(this.block.nextConnection),this.startParentConn)switch(this.startParentConn.type){case Rt.INPUT_VALUE:this.startParentConn.connect(this.block.outputConnection);break;case Rt.NEXT_STATEMENT:this.startParentConn.connect(this.block.previousConnection)}else{this.block.moveTo(this.startLoc,["drag"]);let se;(se=this.workspace.getLayerManager())==null||se.moveOffDragLayer(this.block,Is),vr(this.workspace,this.workspace.getMetricsManager().getScrollMetrics(!0),this.block)}this.startParentConn=this.startChildConn=null,this.connectionPreviewer.hidePreview(),this.connectionCandidate=null,this.block.setDragging(!1),this.dragging=!1}}},Vg=class{constructor(){this.drawer=this.curNode=this.colour=null,this.type="marker"}setDrawer(ee){this.drawer=ee}getDrawer(){return this.drawer}getCurNode(){return this.curNode}setCurNode(ee){const se=this.curNode;this.curNode=ee,this.drawer&&this.drawer.draw(se,this.curNode)}draw(){this.drawer&&this.drawer.draw(this.curNode,this.curNode)}hide(){this.drawer&&this.drawer.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},Mh=class extends Vg{constructor(){super(),this.type="cursor"}next(){var ee=this.getCurNode();if(!ee)return null;for(ee=ee.next();ee&&ee.next()&&(ee.getType()===gt.types.NEXT||ee.getType()===gt.types.BLOCK);)ee=ee.next();return ee&&this.setCurNode(ee),ee}in(){var ee=this.getCurNode();if(!ee)return null;(ee.getType()===gt.types.PREVIOUS||ee.getType()===gt.types.OUTPUT)&&(ee=ee.next());let se,ce;return(ee=(ce=(se=ee)==null?void 0:se.in())!=null?ce:null)&&this.setCurNode(ee),ee}prev(){var ee=this.getCurNode();if(!ee)return null;for(ee=ee.prev();ee&&ee.prev()&&(ee.getType()===gt.types.NEXT||ee.getType()===gt.types.BLOCK);)ee=ee.prev();return ee&&this.setCurNode(ee),ee}out(){var ee=this.getCurNode();return ee?((ee=ee.out())&&ee.getType()===gt.types.BLOCK&&(ee=ee.prev()||ee),ee&&this.setCurNode(ee),ee):null}};re($t.CURSOR,Vn,Mh);var Fo=class extends Mh{constructor(){super()}next(){var ee=this.getCurNode();return ee?((ee=this.getNextNode_(ee,this.validNode_))&&this.setCurNode(ee),ee):null}in(){return this.next()}prev(){var ee=this.getCurNode();return ee?((ee=this.getPreviousNode_(ee,this.validNode_))&&this.setCurNode(ee),ee):null}out(){return this.prev()}getNextNode_(ee,se){if(!ee)return null;const ce=ee.in()||ee.next();return se(ce)?ce:ce?this.getNextNode_(ce,se):(ee=this.findSiblingOrParent(ee.out()),se(ee)?ee:ee?this.getNextNode_(ee,se):null)}getPreviousNode_(ee,se){if(!ee)return null;let ce=ee.prev();return ce=ce?this.getRightMostChild(ce):ee.out(),se(ce)?ce:ce?this.getPreviousNode_(ce,se):null}validNode_(ee){let se=!1;return ee=ee&&ee.getType(),(ee===gt.types.OUTPUT||ee===gt.types.INPUT||ee===gt.types.FIELD||ee===gt.types.NEXT||ee===gt.types.PREVIOUS||ee===gt.types.WORKSPACE)&&(se=!0),se}findSiblingOrParent(ee){if(!ee)return null;const se=ee.next();return se||this.findSiblingOrParent(ee.out())}getRightMostChild(ee){if(!ee.in())return ee;for(ee=ee.in();ee&&ee.next();)ee=ee.next();return this.getRightMostChild(ee)}};Fo.registrationName="basicCursor",re($t.CURSOR,Fo.registrationName,Fo);var zg=class extends Fo{validNode_(ee){let se=!1;const ce=ee&&ee.getType();return ee&&(ee=ee.getLocation(),ce===gt.types.FIELD&&ee&&ee.isTabNavigable()&&ee.isClickable()&&(se=!0)),se}},Xg=10,Qi=class extends qt{constructor(ee,se){super(ee,se),this.highlighted=!1,this.targetConnection=null,this.db=ee.workspace.connectionDBList[se],this.dbOpposite=ee.workspace.connectionDBList[ar[se]],this.offsetInBlock=new yt(0,0),this.trackedState=Qi.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===Qi.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let ee,se;(se=(ee=this.sourceBlock_.pathObject).removeConnectionHighlight)==null||se.call(ee,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(ee){const se=this.x-ee.x;return ee=this.y-ee.y,Math.sqrt(se*se+ee*ee)}bumpAwayFrom(ee,se=!1){if(!this.sourceBlock_.workspace.isDragging()){var ce=ne.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Xg),_e=ne.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Xg),me=ee.sourceBlock_.getRootBlock(),be=this.sourceBlock_.getRootBlock();if(!me.isInFlyout&&!be.isInFlyout){var Ie=!0;if(be.isMovable())me.isMovable()&&se&&(_e=-_e);else if(me.isMovable())Ie=!1,ce=-ce,_e=-_e;else return;se=Ie?ee:this,ee=Ie?this:ee,me=Ie?be:me,(be=Et()===me)||me.addSelect(),me.RTL&&(ce=-ce),me.moveBy(se.x+ce-ee.x,se.y+_e-ee.y,["bump"]),be||me.removeSelect()}}}moveTo(ee,se){let ce=!1;return this.trackedState===Qi.TrackedState.WILL_TRACK?(this.db.addConnection(this,se),this.trackedState=Qi.TrackedState.TRACKED,ce=!0):this.trackedState===Qi.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,se),ce=!0),this.x=ee,this.y=se,ce}moveBy(ee,se){return this.moveTo(this.x+ee,this.y+se)}moveToOffset(ee){return this.moveTo(ee.x+this.offsetInBlock.x,ee.y+this.offsetInBlock.y)}setOffsetInBlock(ee,se){this.offsetInBlock.x=ee,this.offsetInBlock.y=se}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var ee=this.targetConnection;const se=this.targetBlock();ee&&se&&(ee=yt.difference(this.offsetInBlock,ee.offsetInBlock),se.translate(ee.x,ee.y))}closest(ee,se){return this.dbOpposite.searchForClosest(this,ee,se)}highlight(){this.highlighted=!0,this.getSourceBlock().queueRender()}unhighlight(){this.highlighted=!1,this.getSourceBlock().queueRender()}isHighlighted(){return this.highlighted}setTracking(ee){ee&&this.trackedState===Qi.TrackedState.TRACKED||!ee&&this.trackedState===Qi.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(ee?(this.db.addConnection(this,this.y),this.trackedState=Qi.TrackedState.TRACKED):(this.trackedState===Qi.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=Qi.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const ee=this.targetBlock().getDescendants(!1);for(let se=0;se<ee.length;se++){const ce=ee[se],_e=ce.getConnections_(!0);for(let me=0;me<_e.length;me++)_e[me].setTracking(!1);for(const me of ce.getIcons())fr(me)&&me.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let ee=[];if(this.type!==Rt.INPUT_VALUE&&this.type!==Rt.NEXT_STATEMENT)return ee;const se=this.targetBlock();if(se){let ce;se.isCollapsed()?(ce=[],se.outputConnection&&ce.push(se.outputConnection),se.nextConnection&&ce.push(se.nextConnection),se.previousConnection&&ce.push(se.previousConnection)):ce=se.getConnections_(!0);for(let _e=0;_e<ce.length;_e++)ee.push(...ce[_e].startTrackingAll());ee.length||(ee=[se])}return ee}onFailedConnect(ee){const se=this.getSourceBlock();if(Me()){const ce=ne.getGroup$$module$build$src$core$events$utils();setTimeout((function(){se.isDisposed()||se.getParent()||(ne.setGroup$$module$build$src$core$events$utils(ce),this.bumpAwayFrom(ee),ne.setGroup$$module$build$src$core$events$utils(!1))}).bind(this),ne.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(ee=!0){const{parentConnection:se,childConnection:ce}=this.getParentAndChildConnections();if(se&&ce){var _e=ne.getGroup$$module$build$src$core$events$utils();_e||ne.setGroup$$module$build$src$core$events$utils(!0);var me=se.getSourceBlock(),be=ce.getSourceBlock();super.disconnectInternal(ee),me.queueRender(),be.updateDisabled(),be.queueRender(),be.getSvgRoot().style.display="block",ne.setGroup$$module$build$src$core$events$utils(_e)}}respawnShadow_(){super.respawnShadow_();const ee=this.targetBlock();ee&&(ee.initSvg(),ee.queueRender())}neighbours(ee){return this.dbOpposite.getNeighbours(this,ee)}connect_(ee){super.connect_(ee);var se=this.getSourceBlock();ee=ee.getSourceBlock(),se.updateDisabled(),ee.updateDisabled(),ee.queueRender(),(se=se.getInputWithBlock(ee))&&(se=se.isVisible(),ee.getSvgRoot().style.display=se?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(ee){return super.setCheck(ee),this.sourceBlock_.queueRender(),this}};(function(ee){ee=ee.TrackedState||(ee.TrackedState={}),ee[ee.WILL_TRACK=-1]="WILL_TRACK",ee[ee.UNTRACKED=0]="UNTRACKED",ee[ee.TRACKED=1]="TRACKED"})(Qi||(Qi={})),Qi.TrackedState;var vn=class extends ws{constructor(ee,se,ce){if(super(ee,se,ce),this.childlessWidth=this.width=this.height=0,this.warningTextDb=new Map,this.mutator=null,this.rendered=!0,this.visuallyDisabled=!1,this.translation="",this.dragging=!1,this.relativeCoords=new yt(0,0),this.dragStrategy=new Wg(this),!ee.rendered)throw TypeError("Cannot create a rendered block in a headless workspace");this.workspace=ee,this.svgGroup=lt(Ye.G,{}),this.style=ee.getRenderer().getConstants().getBlockStyle(null),this.pathObject=ee.getRenderer().makePathObject(this.svgGroup,this.style),ee=this.pathObject.svgPath,ee.tooltip=this,Tr(ee),this.svgGroup.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.initialized){for(var ee of this.inputList)ee.init();for(const se of this.getIcons())se.initView(this.createIconPointerDownListener(se)),se.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()||this.isInFlyout),ee=this.getSvgRoot(),!this.workspace.options.readOnly&&ee&&Nt(ee,"pointerdown",this,this.onMouseDown),ee.parentNode||this.workspace.getCanvas().appendChild(ee),this.initialized=!0}}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()){let ee;(ee=this.getParent())==null||ee.select()}else this.addSelect()}unselect(){if(this.isShadow()){let ee;(ee=this.getParent())==null||ee.unselect()}else this.removeSelect()}setParent(ee){const se=this.parentBlock_;if(ee!==se){Ii(),super.setParent(ee),Hi();var ce=this.getSvgRoot();if(!this.workspace.isClearing&&ce){var _e=this.getRelativeToSurfaceXY();ee?ee.getSvgRoot().appendChild(ce):se&&((ee=this.workspace.getCanvas().querySelector(".blocklyDragging"))?this.workspace.getCanvas().insertBefore(ce,ee):this.workspace.getCanvas().appendChild(ce),this.translate(_e.x,_e.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const ee=this.workspace.getLayerManager();if(!ee)throw Error("Cannot calculate position because the workspace has not been appended");let se=0,ce=0,_e=this.getSvgRoot();if(_e)do{const me=Pi(_e);se+=me.x,ce+=me.y,_e=_e.parentNode}while(_e&&!ee.hasLayer(_e));return new yt(se,ce)}moveBy(ee,se,ce){if(this.parentBlock_)throw Error("Block has parent");const _e=Ke();let me=null;_e&&(me=new(Le(it.BLOCK_MOVE))(this),ce&&me.setReason(ce)),ee=new yt(ee,se),se=this.getRelativeToSurfaceXY(),ee=yt.sum(se,ee),this.translate(ee.x,ee.y),this.updateComponentLocations(ee),_e&&me&&(me.recordNew(),Ae(me)),this.workspace.resizeContents()}translate(ee,se){this.translation=`translate(${ee}, ${se})`,this.relativeCoords=new yt(ee,se),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(ee,se){const ce=this.getRelativeToSurfaceXY();this.moveBy(ee.x-ce.x,ee.y-ce.y,se)}moveDuringDrag(ee){this.translate(ee.x,ee.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(ee)}snapToGrid(){if(!this.isDeadOrDying()&&!this.getParent()&&!this.isInFlyout){var ee=this.workspace.getGrid();if(ee!=null&&ee.shouldSnap()){var se=this.getRelativeToSurfaceXY();ee=ee.alignXY(se),ee!==se&&this.moveTo(ee,["snap"])}}}getBoundingRectangle(){return this.getBoundingRectangleWithDimensions(this.getHeightWidth())}getBoundingRectangleWithoutChildren(){return this.getBoundingRectangleWithDimensions({height:this.height,width:this.childlessWidth})}getBoundingRectangleWithDimensions(ee){const se=this.getRelativeToSurfaceXY();let ce,_e;return this.RTL?(ce=se.x-ee.width,_e=se.x):(ce=se.x,_e=se.x+ee.width),new ri(se.y,se.y+ee.height,ce,_e)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let ee=0,se;se=this.inputList[ee];ee++)se.markDirty()}setCollapsed(ee){this.collapsed_!==ee&&(super.setCollapsed(ee),this.updateCollapsed())}updateCollapsed(){var ee=this.isCollapsed();const se=Eo,ce=Kl;for(let me=0,be;be=this.inputList[me];me++)be.name!==se&&be.setVisible(!ee);for(var _e of this.getIcons())_e.updateCollapsed();ee?(ee=this.toString(Ug),(_e=this.getField(ce))?_e.setValue(ee):(this.getInput(se)||this.appendDummyInput(se)).appendField(new or(ee),ce)):(this.updateDisabled(),this.removeInput(se))}tab(ee,se){const ce=new zg;ce.setCurNode(gt.createFieldNode(ee)),ee=ce.getCurNode(),se?ce.next():ce.prev(),(se=ce.getCurNode())&&se!==ee&&(se.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(se))}onMouseDown(ee){const se=this.workspace.getGesture(ee);se&&se.handleBlockStart(ee,this)}showHelp(){const ee=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;ee&&window.open(ee)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const ee=Wt.registry.getContextMenuOptions(Wt.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(ee),ee}showContextMenu(ee){const se=this.generateContextMenu();se&&se.length&&(ro(ee,se,this.RTL,this.workspace),yc(this))}updateComponentLocations(ee){this.dragging||this.updateConnectionLocations(ee),this.updateIconLocations(ee),this.updateFieldLocations(ee);for(const se of this.getChildren(!1))se.updateComponentLocations(yt.sum(ee,se.relativeCoords))}updateConnectionLocations(ee){for(const se of this.getConnections_(!1))se.moveToOffset(ee)}updateIconLocations(ee){for(const se of this.getIcons())se.onLocationChange(ee)}updateFieldLocations(ee){for(const se of this.inputList)for(const ce of se.fieldRow)ce.onLocationChange(ee)}setDragging(ee){(this.dragging=ee)?(this.translation="",fo.push(...this.getConnections_(!0)),Ct(this.svgGroup,"blocklyDragging")):(fo.length=0,Oe(this.svgGroup,"blocklyDragging"));for(let se=0;se<this.childBlocks_.length;se++)this.childBlocks_[se].setDragging(ee)}setMovable(ee){super.setMovable(ee),this.pathObject.updateMovable(ee)}setEditable(ee){super.setEditable(ee),ee=this.getIcons();for(let se=0;se<ee.length;se++)ee[se].updateEditable()}setShadow(ee){super.setShadow(ee),this.applyColour()}setInsertionMarker(ee){this.isInsertionMarker_!==ee&&(this.isInsertionMarker_=ee)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup}dispose(ee,se){if(this.disposing=!0,uc(),oo(),se&&(this.unplug(ee),vl(this)),se=Et(),se instanceof ws){let ce=se;for(;ce!==null;)ce===this&&se.unselect(),ce=ce.getParent()}super.dispose(!!ee),We(this.svgGroup)}disposeInternal(){this.disposing=!0,super.disposeInternal(),Et()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),[...this.warningTextDb.values()].forEach(ee=>clearTimeout(ee)),this.warningTextDb.clear(),this.getIcons().forEach(ee=>ee.dispose())}checkAndDelete(){this.workspace.isFlyout||(ne.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),ne.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(){return this.isInsertionMarker_?null:{paster:Bo.TYPE,blockState:un(this,{addCoordinates:!0,addNextBlocks:!1}),typeCounts:Ft(this,!0)}}applyColour(){this.pathObject.applyColour(this);const ee=this.getIcons();for(let se=0;se<ee.length;se++)ee[se].applyColour();for(let se=0,ce;ce=this.inputList[se];se++)for(let _e=0,me;me=ce.fieldRow[_e];_e++)me.applyColour()}updateDisabled(){const ee=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===ee){let se;(se=this.getNextBlock())==null||se.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=ee;for(const se of this.getChildren(!1))se.updateDisabled()}}setWarningText(ee,se=""){if(se)this.warningTextDb.has(se)&&(clearTimeout(this.warningTextDb.get(se)),this.warningTextDb.delete(se));else{for(var ce of this.warningTextDb.values())clearTimeout(ce);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(se,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(se),this.setWarningText(ee,se))},100));else if(this.isInFlyout&&(ee=null),ce=this.getIcon(_s.TYPE),ee){let _e=this.getSurroundParent(),me=null;for(;_e;)_e.isCollapsed()&&(me=_e),_e=_e.getSurroundParent();me&&me.setWarningText(ne.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,vn.COLLAPSED_WARNING_ID),ce?ce.addMessage(ee,se):this.addIcon(new _s(this).addMessage(ee,se))}else ce&&(se?(ce.addMessage("",se),ce.getText()||this.removeIcon(_s.TYPE)):this.removeIcon(_s.TYPE))}setMutator(ee){this.removeIcon(ne.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),ee&&this.addIcon(ee)}addIcon(ee){return super.addIcon(ee),ee instanceof ne.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=ee),ee.initView(this.createIconPointerDownListener(ee)),ee.applyColour(),ee.updateEditable(),this.queueRender(),ee}createIconPointerDownListener(ee){return se=>{this.isDeadOrDying()||(se=this.workspace.getGesture(se))&&se.setStartIcon(ee)}}removeIcon(ee){const se=super.removeIcon(ee);return ee.equals(ne.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.queueRender(),se}setEnabled(ee){ge("setEnabled","v11","v12","the setDisabledReason method of BlockSvg");const se=this.isEnabled();super.setEnabled(ee),this.isEnabled()===se||this.getInheritedDisabled()||this.updateDisabled()}setDisabledReason(ee,se){const ce=this.isEnabled();super.setDisabledReason(ee,se),this.isEnabled()===ce||this.getInheritedDisabled()||this.updateDisabled()}setHighlighted(ee){this.pathObject.updateHighlighted(ee)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(ee){this.pathObject.updateDraggingDelete(ee)}getColour(){return this.style.colourPrimary}setColour(ee){super.setColour(ee),ee=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(ee.style),this.style=ee.style,this.styleName_=ee.name,this.applyColour()}setStyle(ee){const se=this.workspace.getRenderer().getConstants().getBlockStyle(ee);if(this.styleName_=ee,se)this.hat=se.hat,this.pathObject.setStyle(se),this.colour_=se.colourPrimary,this.style=se,this.applyColour();else throw Error("Invalid style name: "+ee)}bringToFront(ee=!1){let se=this;if(!se.isDeadOrDying())do{const ce=se.getSvgRoot(),_e=ce.parentNode,me=_e.childNodes;if(me[me.length-1]!==ce&&_e.appendChild(ce),ee)break;se=se.getParent()}while(se)}setPreviousStatement(ee,se){super.setPreviousStatement(ee,se),this.queueRender()}setNextStatement(ee,se){super.setNextStatement(ee,se),this.queueRender()}setOutput(ee,se){super.setOutput(ee,se),this.queueRender()}setInputsInline(ee){super.setInputsInline(ee),this.queueRender()}removeInput(ee,se){return ee=super.removeInput(ee,se),this.queueRender(),ee}moveNumberedInputBefore(ee,se){super.moveNumberedInputBefore(ee,se),this.queueRender()}appendInput(ee){return super.appendInput(ee),this.queueRender(),ee}setConnectionTracking(ee){if(this.previousConnection&&this.previousConnection.setTracking(ee),this.outputConnection&&this.outputConnection.setTracking(ee),this.nextConnection){this.nextConnection.setTracking(ee);var se=this.nextConnection.targetBlock();se&&se.setConnectionTracking(ee)}if(!this.collapsed_)for(se=0;se<this.inputList.length;se++){var ce=this.inputList[se].connection;ce&&(ce.setTracking(ee),(ce=ce.targetBlock())&&ce.setConnectionTracking(ee))}}getConnections_(ee){const se=[];if(this.outputConnection&&se.push(this.outputConnection),this.previousConnection&&se.push(this.previousConnection),this.nextConnection&&se.push(this.nextConnection),ee||!this.collapsed_)for(let ce=0,_e;_e=this.inputList[ce];ce++)_e.connection&&se.push(_e.connection);return se}lastConnectionInStack(ee){return super.lastConnectionInStack(ee)}getMatchingConnection(ee,se){return super.getMatchingConnection(ee,se)}makeConnection_(ee){return new Qi(this,ee)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){const ee=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||ee.isInFlyout))for(const se of this.getConnections_(!1)){if(se.isSuperior()){let ce;(ce=se.targetBlock())==null||ce.bumpNeighbours()}for(const ce of se.neighbours(ne.config$$module$build$src$core$config.snapRadius))ce.getSourceBlock().getRootBlock()!==ee&&(se.isConnected()&&ce.isConnected()||(se.isSuperior()?ce.bumpAwayFrom(se,!1):se.bumpAwayFrom(ce,!0)))}}scheduleSnapAndBump(){this.snapToGrid(),this.bumpNeighbours()}positionNearConnection(ee,se,ce){if(ee.type===Rt.NEXT_STATEMENT||ee.type===Rt.INPUT_VALUE){let _e=se.x;se=se.y,_e+=ce.x-ee.getOffsetInBlock().x,se+=ce.y-ee.getOffsetInBlock().y,this.moveBy(_e,se)}}getChildren(ee){return super.getChildren(ee)}queueRender(){return Zr(this)}render(){this.queueRender(),wn()}renderEfficiently(){Ii(),this.isCollapsed()&&this.updateCollapsed(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),Hi(),this.updateMarkers_()}tightenChildrenEfficiently(){for(const ee of this.inputList){const se=ee.connection;se&&se.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(Io.LOCAL_MARKER).draw();for(const ee of this.inputList)for(const se of ee.fieldRow)se.updateMarkers_()}setCursorSvg(ee){this.pathObject.setCursorSvg(ee)}setMarkerSvg(ee){this.pathObject.setMarkerSvg(ee)}getHeightWidth(){let ee=this.height,se=this.width;var ce=this.getNextBlock();if(ce){ce=ce.getHeightWidth();const _e=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;ee+=ce.height-_e,se=Math.max(se,ce.width)}return{height:ee,width:se}}fadeForReplacement(ee){this.pathObject.updateReplacementFade(ee)}highlightShapeForInput(ee,se){this.pathObject.updateShapeForInputHighlight(ee,se)}setDragStrategy(ee){this.dragStrategy=ee}isMovable(){return this.dragStrategy.isMovable()}startDrag(ee){this.dragStrategy.startDrag(ee)}drag(ee,se){this.dragStrategy.drag(ee,se)}endDrag(ee){this.dragStrategy.endDrag(ee)}revertDrag(){this.dragStrategy.revertDrag()}toFlyoutInfo(){const ee=Object.assign({},{kind:"BLOCK"},un(this)),se=new Set(["id","height","width","pinned","enabled"]),ce=function(_e){for(const me in _e)se.has(me)?delete _e[me]:typeof _e[me]=="object"&&ce(_e[me])};return ce(ee),[ee]}};vn.INLINE=-1,vn.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var jg=class{constructor(){}onDragEnter(ee){}onDragOver(ee){}onDragExit(ee){}onDrop(ee){}getClientRect(){return null}shouldPreventMove(ee){return!1}},ya=class extends jg{constructor(){super(),this.wouldDelete_=!1}wouldDelete(ee){return ee instanceof vn?(ee=!ee.getParent()&&ee.isDeletable(),this.updateWouldDelete_(ee)):this.updateWouldDelete_(Tn(ee)&&ee.isDeletable()),this.wouldDelete_}updateWouldDelete_(ee){this.wouldDelete_=ee}},xh=class extends An{constructor(ee,se){super(se),this.type=it.TRASHCAN_OPEN,this.isOpen=ee}toJson(){const ee=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return ee.isOpen=this.isOpen,ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new xh),se.isOpen=ee.isOpen,se}};re($t.EVENT,it.TRASHCAN_OPEN,xh);var Yg=class extends ya{constructor(ee){super(),this.workspace=ee,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,0>=this.workspace.options.maxTrashcanContents||(ee=new yn({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(ee.toolboxPosition=this.workspace.toolboxPosition===Gt.TOP?Gt.BOTTOM:Gt.TOP,this.flyout=new(fe($t.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(ee)):(ee.toolboxPosition=this.workspace.toolboxPosition===Gt.RIGHT?Gt.LEFT:Gt.RIGHT,this.flyout=new(fe($t.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(ee)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=lt(Ye.G,{class:"blocklyTrash"});let ee;const se=String(Math.random()).substring(2);ee=lt(Ye.CLIPPATH,{id:"blocklyTrashBodyClipPath"+se},this.svgGroup),lt(Ye.RECT,{width:zr,height:Sa,y:Xr},ee);const ce=lt(Ye.IMAGE,{width:qi.width,x:-Dh,height:qi.height,y:-Ph,"clip-path":"url(#blocklyTrashBodyClipPath"+se+")"},this.svgGroup);return ce.setAttributeNS(hn,"xlink:href",this.workspace.options.pathToMedia+qi.url),ee=lt(Ye.CLIPPATH,{id:"blocklyTrashLidClipPath"+se},this.svgGroup),lt(Ye.RECT,{width:zr,height:Xr},ee),this.svgLid=lt(Ye.IMAGE,{width:qi.width,x:-Dh,height:qi.height,y:-Ph,"clip-path":"url(#blocklyTrashLidClipPath"+se+")"},this.svgGroup),this.svgLid.setAttributeNS(hn,"xlink:href",this.workspace.options.pathToMedia+qi.url),Jt(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),Jt(this.svgGroup,"pointerup",this,this.click),Jt(ce,"pointerover",this,this.mouseOver),Jt(ce,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){0<this.workspace.options.maxTrashcanContents&&(Tt(this.flyout.createDom(Ye.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:ui.ComponentWeight.TRASHCAN_WEIGHT,capabilities:[ui.Capability.AUTOHIDEABLE,ui.Capability.DELETE_AREA,ui.Capability.DRAG_TARGET,ui.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&We(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var ee=this.contents.map(function(ce){return JSON.parse(ce)}),se=this.workspace.getParentSvg().style;se.cursor="wait",setTimeout(()=>{let ce;(ce=this.flyout)==null||ce.show(ee),se.cursor="";let _e;(_e=this.workspace.scrollbar)==null||_e.setVisible(!1)},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var ee;(ee=this.flyout)==null||ee.hide();var se;(se=this.workspace.scrollbar)==null||se.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(ee){!ee&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(ee,se){if(this.initialized){var ce=Gi(this.workspace,ee);ee=Ci(ce,new Xt(zr,Sa+Xr),Am,Kg,ee,this.workspace),se=$n(ee,Kg,ce.vertical===as.TOP?ks.DOWN:ks.UP,se),this.top=se.top,this.left=se.left;var _e;(_e=this.svgGroup)==null||_e.setAttribute("transform","translate("+this.left+","+this.top+")")}}getBoundingRectangle(){return new ri(this.top,this.top+Sa+Xr,this.left,this.left+zr)}getClientRect(){if(!this.svgGroup)return null;var ee=this.svgGroup.getBoundingClientRect();const se=ee.top+Ph-Ca;return ee=ee.left+Dh-Ca,new ri(se,se+Xr+Sa+2*Ca,ee,ee+zr+2*Ca)}onDragOver(ee){this.setLidOpen(this.wouldDelete_)}onDragExit(ee){this.setLidOpen(!1)}onDrop(ee){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(ee){this.isLidOpen!==ee&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=ee,this.animateLid())}animateLid(){const ee=Mm;var se=1/(ee+1);this.lidOpen+=this.isLidOpen?se:-se,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*Jg),se=qg+this.lidOpen*(xm-qg),this.svgGroup&&(this.svgGroup.style.opacity=`${se}`),this.lidOpen>this.minOpenness&&1>this.lidOpen&&(this.lidTask=setTimeout(this.animateLid.bind(this),Nm/ee))}setLidAngle(ee){const se=this.workspace.toolboxPosition===Gt.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let ce;(ce=this.svgLid)==null||ce.setAttribute("transform","rotate("+(se?-ee:ee)+","+(se?4:zr-4)+","+(Xr-2)+")")}setMinOpenness(ee){this.minOpenness=ee,this.isLidOpen||this.setLidAngle(ee*Jg)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(ee){ee=new(Le(it.TRASHCAN_OPEN))(ee,this.workspace.id),Ae(ee)}blockMouseDownWhenOpenable(ee){!this.contentsIsOpen()&&this.hasContents()&&ee.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(ee){if(!(0>=this.workspace.options.maxTrashcanContents||!Se(ee)||ee.wasShadow)){if(!ee.oldJson)throw Error("Encountered a delete event without proper oldJson");if(ee=JSON.stringify(this.cleanBlockJson(ee.oldJson)),!this.contents.includes(ee)){for(this.contents.unshift(ee);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(Lm)}}}cleanBlockJson(ee){function se(ce){if(ce){if(delete ce.id,delete ce.x,delete ce.y,delete ce.enabled,delete ce.disabledReasons,ce.icons&&ce.icons.comment){var _e=ce.icons.comment;delete _e.height,delete _e.width,delete _e.pinned}_e=ce.inputs;for(var me in _e){var be=_e[me];const Ie=be.block;be=be.shadow,Ie&&se(Ie),be&&se(be)}ce.next&&(me=ce.next,ce=me.block,me=me.shadow,ce&&se(ce),me&&se(me))}}return ee=JSON.parse(JSON.stringify(ee)),se(ee),Object.assign({},{kind:"BLOCK"},ee)}},zr=47,Sa=44,Xr=16,Kg=20,Am=20,Ca=10,Dh=0,Ph=32,Lm=.1,Nm=80,Mm=4,qg=.4,xm=.8,Jg=45,Qt=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(ee,se){if(this.shortcuts.get(ee.name)&&!se)throw Error(`Shortcut named "${ee.name}" already exists.`);if(this.shortcuts.set(ee.name,ee),se=ee.keyCodes,se!=null&&se.length)for(const ce of se)this.addKeyMapping(ce,ee.name,!!ee.allowCollision)}unregister(ee){return this.shortcuts.get(ee)?(this.removeAllKeyMappings(ee),this.shortcuts.delete(ee),!0):(console.warn(`Keyboard shortcut named "${ee}" not found.`),!1)}addKeyMapping(ee,se,ce){ee=`${ee}`;const _e=this.keyMap.get(ee);if(_e&&!ce)throw Error(`Shortcut named "${se}" collides with shortcuts "${_e}"`);_e&&ce?_e.unshift(se):this.keyMap.set(ee,[se])}removeKeyMapping(ee,se,ce){const _e=this.keyMap.get(ee);if(!_e)return ce||console.warn(`No keyboard shortcut named "${se}" registered with key code "${ee}"`),!1;const me=_e.indexOf(se);return-1<me?(_e.splice(me,1),_e.length===0&&this.keyMap.delete(ee),!0):(ce||console.warn(`No keyboard shortcut named "${se}" registered with key code "${ee}"`),!1)}removeAllKeyMappings(ee){for(const se of this.keyMap.keys())this.removeKeyMapping(se,ee,!0)}setKeyMap(ee){this.keyMap.clear();for(const se in ee)this.keyMap.set(se,ee[se])}getKeyMap(){const ee=Object.create(null);for(const[se,ce]of this.keyMap)ee[se]=ce;return ee}getRegistry(){const ee=Object.create(null);for(const[se,ce]of this.shortcuts)ee[se]=ce;return is(Object.create(null),ee)}onKeyDown(ee,se){var ce=this.serializeKeyEvent(se);if(ce=this.getShortcutNamesByKeyCode(ce),!ce)return!1;for(const _e of ce){if(ce=this.shortcuts.get(_e),!ce||ce.preconditionFn&&!ce.preconditionFn(ee))continue;let me,be;if((be=(me=ce).callback)!=null&&be.call(me,ee,se,ce))return!0}return!1}getShortcutNamesByKeyCode(ee){return this.keyMap.get(ee)||[]}getKeyCodesByShortcutName(ee){const se=[];for(const[ce,_e]of this.keyMap)-1<_e.indexOf(ee)&&se.push(ce);return se}serializeKeyEvent(ee){let se="";for(const ce in Qt.modifierKeys)ee.getModifierState(ce)&&(se!==""&&(se+="+"),se+=ce);return se!==""&&ee.keyCode?se+="+"+ee.keyCode:ee.keyCode&&(se=String(ee.keyCode)),se}checkModifiers(ee){for(const se of ee)if(!(se in Qt.modifierKeys))throw Error(se+" is not a valid modifier key.")}createSerializedKey(ee,se){let ce="";if(se){this.checkModifiers(se);for(const _e in Qt.modifierKeys)se.includes(Qt.modifierKeys[_e])&&(ce!==""&&(ce+="+"),ce+=_e)}return ce!==""&&ee?ce+="+"+ee:ee&&(ce=`${ee}`),ce}};Qt.registry=new Qt,function(ee){ee=ee.modifierKeys||(ee.modifierKeys={}),ee[ee.Shift=16]="Shift",ee[ee.Control=17]="Control",ee[ee.Alt=18]="Alt",ee[ee.Meta=91]="Meta"}(Qt||(Qt={}));var Bh=null,Fh=null,Dm={duplicateInternal:Z_,copyInternal:J_},Uo={};Uo.BlockPaster=Bo,Uo.TEST_ONLY=Dm,Uo.paste=Es,Uo.registry=Gu;var Yn;(function(ee){ee.ESCAPE="escape",ee.DELETE="delete",ee.COPY="copy",ee.CUT="cut",ee.PASTE="paste",ee.UNDO="undo",ee.REDO="redo"})(Yn||(Yn={}));var As=null,Ls=null,jr=null;su();var Kn={};Kn.names=Yn,Kn.registerCopy=Qc,Kn.registerCut=eu,Kn.registerDefaultShortcuts=su,Kn.registerDelete=Zc,Kn.registerEscape=Jc,Kn.registerPaste=tu,Kn.registerRedo=nu,Kn.registerUndo=iu;var Pm=class{constructor(ee,se){this.procedureModelClass=ee,this.parameterModelClass=se,this.priority=Kp}save(ee){return ee=ee.getProcedureMap().getProcedures().map(se=>ru(se)),ee.length?ee:null}load(ee,se){const ce=se.getProcedureMap();for(const _e of ee)ce.add(ou(this.procedureModelClass,this.parameterModelClass,_e,se))}clear(ee){ee.getProcedureMap().clear()}},ka={};ka.ProcedureSerializer=Pm,ka.loadProcedure=ou,ka.saveProcedure=ru;var Zg=class{constructor(){this.priority=Yp}save(ee){const se=[];for(const ce of ee.getAllVariables())ee={name:ce.name,id:ce.getId()},ce.type&&(ee.type=ce.type),se.push(ee);return se.length?se:null}load(ee,se){for(const ce of ee)se.createVariable(ce.name,ce.type,ce.id)}clear(ee){ee.getVariableMap().clear()}};fi("variables",new Zg);var Qg={};Qg.VariableSerializer=Zg;var Uh={};Uh.load=ep,Uh.save=Q_;var Bm={blocks:ko,exceptions:Zs,priorities:_m,procedures:ka,registry:Hu,variables:Qg,workspaceComments:jl,workspaces:Uh},Hh=class{constructor(ee,se,ce,_e,me){this.workspace=ee,this.oldHostMetrics=this.corner_=this.vScroll=this.hScroll=null,se=se===void 0?!0:se,ce=ce===void 0?!0:ce;const be=se&&ce;se&&(this.hScroll=new yi(ee,!0,be,_e,me)),ce&&(this.vScroll=new yi(ee,!1,be,_e,me)),be&&(this.corner_=lt(Ye.RECT,{height:yi.scrollbarThickness,width:yi.scrollbarThickness,class:"blocklyScrollbarBackground"}),Tt(this.corner_,ee.getBubbleCanvas()))}dispose(){We(this.corner_),this.oldHostMetrics=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const ee=this.workspace.getMetrics();if(ee){var se=!1,ce=!1;if(this.oldHostMetrics&&this.oldHostMetrics.viewWidth===ee.viewWidth&&this.oldHostMetrics.viewHeight===ee.viewHeight&&this.oldHostMetrics.absoluteTop===ee.absoluteTop&&this.oldHostMetrics.absoluteLeft===ee.absoluteLeft?(this.oldHostMetrics&&this.oldHostMetrics.scrollWidth===ee.scrollWidth&&this.oldHostMetrics.viewLeft===ee.viewLeft&&this.oldHostMetrics.scrollLeft===ee.scrollLeft||(se=!0),this.oldHostMetrics&&this.oldHostMetrics.scrollHeight===ee.scrollHeight&&this.oldHostMetrics.viewTop===ee.viewTop&&this.oldHostMetrics.scrollTop===ee.scrollTop||(ce=!0)):ce=se=!0,se||ce){try{ne.disable$$module$build$src$core$events$utils(),this.hScroll&&se&&this.hScroll.resize(ee),this.vScroll&&ce&&this.vScroll.resize(ee)}finally{ne.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics||this.oldHostMetrics.viewWidth!==ee.viewWidth||this.oldHostMetrics.absoluteLeft!==ee.absoluteLeft){let _e;(_e=this.corner_)==null||_e.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics||this.oldHostMetrics.viewHeight!==ee.viewHeight||this.oldHostMetrics.absoluteTop!==ee.absoluteTop){let _e;(_e=this.corner_)==null||_e.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics=ee}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(ee,se){this.hScroll&&this.hScroll.setOrigin(ee,se),this.vScroll&&this.vScroll.setOrigin(ee,se)}set(ee,se,ce){this.hScroll&&this.hScroll.set(ee,!1),this.vScroll&&this.vScroll.set(se,!1),(ce||ce===void 0)&&(ee={},this.hScroll&&(ee.x=this.hScroll.getRatio_()),this.vScroll&&(ee.y=this.vScroll.getRatio_()),this.workspace.setMetrics(ee))}setX(ee){this.hScroll&&this.hScroll.set(ee,!0)}setY(ee){this.vScroll&&this.vScroll.set(ee,!0)}setContainerVisible(ee){this.hScroll&&this.hScroll.setContainerVisible(ee),this.vScroll&&this.vScroll.setContainerVisible(ee)}isVisible(){let ee=!1;return this.hScroll&&(ee=this.hScroll.isVisible()),this.vScroll&&(ee=ee||this.vScroll.isVisible()),ee}setVisible(ee){this.hScroll&&this.hScroll.setVisibleInternal(ee),this.vScroll&&this.vScroll.setVisibleInternal(ee)}resizeContent(ee){this.hScroll&&this.hScroll.resizeContentHorizontal(ee),this.vScroll&&this.vScroll.resizeContentVertical(ee)}resizeView(ee){this.hScroll&&this.hScroll.resizeViewHorizontal(ee),this.vScroll&&this.vScroll.resizeViewVertical(ee)}},Gh=class{constructor(ee){this.workspace_=ee}getDimensionsPx_(ee){let se=0,ce=0;return ee&&(se=ee.getWidth(),ce=ee.getHeight()),new Xt(se,ce)}getFlyoutMetrics(ee){return ee=this.getDimensionsPx_(this.workspace_.getFlyout(ee)),{width:ee.width,height:ee.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const ee=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:ee.width,height:ee.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let ee=0,se=0;const ce=this.getToolboxMetrics(),_e=this.getFlyoutMetrics(),me=!!this.workspace_.getToolbox();var be;const Ie=!((be=this.workspace_.getFlyout())!=null&&be.autoClose);be=me?ce.position:_e.position;const De=be===Gt.TOP;return be===Gt.LEFT&&(me&&(ee+=ce.width),Ie&&(ee+=_e.width)),De&&(me&&(se+=ce.height),Ie&&(se+=_e.height)),{top:se,left:ee}}getViewMetrics(ee){ee=ee?this.workspace_.scale:1;const se=this.getSvgMetrics(),ce=this.getToolboxMetrics(),_e=this.getFlyoutMetrics(),me=!!this.workspace_.getToolbox();var be;const Ie=!((be=this.workspace_.getFlyout())!=null&&be.autoClose);be=me?ce.position:_e.position;const De=be===Gt.LEFT||be===Gt.RIGHT;return(be===Gt.TOP||be===Gt.BOTTOM)&&(me&&(se.height-=ce.height),Ie&&(se.height-=_e.height)),De&&(me&&(se.width-=ce.width),Ie&&(se.width-=_e.width)),{height:se.height/ee,width:se.width/ee,top:-this.workspace_.scrollY/ee,left:-this.workspace_.scrollX/ee}}getContentMetrics(ee){ee=ee?1:this.workspace_.scale;const se=this.workspace_.getBlocksBoundingBox();return{height:(se.bottom-se.top)*ee,width:(se.right-se.left)*ee,top:se.top*ee,left:se.left*ee}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(ee){if(!this.hasFixedEdges())return{};const se=this.workspace_.isMovableHorizontally(),ce=this.workspace_.isMovableVertically();ee=ee||this.getViewMetrics(!1);const _e={};return ce||(_e.top=ee.top,_e.bottom=ee.top+ee.height),se||(_e.left=ee.left,_e.right=ee.left+ee.width),_e}getPaddedContent_(ee,se){const ce=se.top+se.height,_e=se.left+se.width,me=ee.width;ee=ee.height;const be=me/2,Ie=ee/2;return{top:Math.min(se.top-Ie,ce-ee),bottom:Math.max(ce+Ie,se.top+ee),left:Math.min(se.left-be,_e-me),right:Math.max(_e+be,se.left+me)}}getScrollMetrics(ee,se,ce){ee=ee?this.workspace_.scale:1,se=se||this.getViewMetrics(!1);var _e=ce||this.getContentMetrics();ce=this.getComputedFixedEdges_(se),se=this.getPaddedContent_(se,_e),_e=ce.top!==void 0?ce.top:se.top;const me=ce.left!==void 0?ce.left:se.left;return{top:_e/ee,left:me/ee,width:((ce.right!==void 0?ce.right:se.right)-me)/ee,height:((ce.bottom!==void 0?ce.bottom:se.bottom)-_e)/ee}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const ee=this.getToolboxMetrics(),se=this.getFlyoutMetrics(!0),ce=this.getSvgMetrics(),_e=this.getAbsoluteMetrics(),me=this.getViewMetrics(),be=this.getContentMetrics(),Ie=this.getScrollMetrics(!1,me,be);return{contentHeight:be.height,contentWidth:be.width,contentTop:be.top,contentLeft:be.left,scrollHeight:Ie.height,scrollWidth:Ie.width,scrollTop:Ie.top,scrollLeft:Ie.left,viewHeight:me.height,viewWidth:me.width,viewTop:me.top,viewLeft:me.left,absoluteTop:_e.top,absoluteLeft:_e.left,svgHeight:ce.height,svgWidth:ce.width,toolboxWidth:ee.width,toolboxHeight:ee.height,toolboxPosition:ee.position,flyoutWidth:se.width,flyoutHeight:se.height}}};re($t.METRICS_MANAGER,Vn,Gh),"Blockly"in globalThis||(globalThis.Blockly={Msg:sg});var ef=class extends ma{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(ee){super.setFontConstants_(ee),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(ee){super.setDynamicProperties_(ee),this.SELECTED_GLOW_COLOUR=ee.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const se=Number(ee.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=se&&!isNaN(se)?se:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=ee.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(ee=Number(ee.getComponentStyle("replacementGlowSize")))&&!isNaN(ee)?ee:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&We(this.selectedGlowFilter),this.replacementGlowFilter&&We(this.replacementGlowFilter)}makeStartHat(){const ee=this.START_HAT_HEIGHT,se=this.START_HAT_WIDTH,ce=nn("c",[Mt(25,-ee),Mt(71,-ee),Mt(se,0)]);return{height:ee,width:se,path:ce}}makeHexagonal(){function ee(ce,_e,me){var be=ce/2;return be=be>se?se:be,me=me?-1:1,ce=(_e?-1:1)*ce/2,Wn(-me*be,ce)+Wn(me*be,ce)}const se=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(ce){return ce/=2,ce>se?se:ce},height(ce){return ce},connectionOffsetY(ce){return ce/2},connectionOffsetX(ce){return-ce},pathDown(ce){return ee(ce,!1,!1)},pathUp(ce){return ee(ce,!0,!1)},pathRightDown(ce){return ee(ce,!1,!0)},pathRightUp(ce){return ee(ce,!1,!0)}}}makeRounded(){function ee(_e,me,be){const Ie=_e>ce?_e-ce:0;_e=(_e>ce?ce:_e)/2;const De=be===me?"0":"1";return Ei("a","0 0,"+De,_e,Mt((be?1:-1)*_e,(me?-1:1)*_e))+wt("v",(me?-1:1)*Ie)+Ei("a","0 0,"+De,_e,Mt((be?-1:1)*_e,(me?-1:1)*_e))}const se=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,ce=2*se;return{type:this.SHAPES.ROUND,isDynamic:!0,width(_e){return _e/=2,_e>se?se:_e},height(_e){return _e},connectionOffsetY(_e){return _e/2},connectionOffsetX(_e){return-_e},pathDown(_e){return ee(_e,!1,!1)},pathUp(_e){return ee(_e,!0,!1)},pathRightDown(_e){return ee(_e,!1,!0)},pathRightUp(_e){return ee(_e,!1,!0)}}}makeSquared(){function ee(ce,_e,me){ce-=2*se;const be=me===_e?"0":"1";return Ei("a","0 0,"+be,se,Mt((me?1:-1)*se,(_e?-1:1)*se))+wt("v",(_e?-1:1)*ce)+Ei("a","0 0,"+be,se,Mt((me?-1:1)*se,(_e?-1:1)*se))}const se=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(ce){return se},height(ce){return ce},connectionOffsetY(ce){return ce/2},connectionOffsetX(ce){return-ce},pathDown(ce){return ee(ce,!1,!1)},pathUp(ce){return ee(ce,!0,!1)},pathRightDown(ce){return ee(ce,!1,!0)},pathRightUp(ce){return ee(ce,!1,!0)}}}shapeFor(ee){let se=ee.getCheck();switch(!se&&ee.targetConnection&&(se=ee.targetConnection.getCheck()),ee.type){case Rt.INPUT_VALUE:case Rt.OUTPUT_VALUE:if(ee=ee.getSourceBlock().getOutputShape(),ee!==null)switch(ee){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return se&&se.includes("Boolean")?this.HEXAGONAL:se&&se.includes("Number")?this.ROUNDED:(se&&se.includes("String"),this.ROUNDED);case Rt.PREVIOUS_STATEMENT:case Rt.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function ee(vt){return nn("c",[Mt(vt*me/2,0),Mt(vt*me*3/4,Ie/2),Mt(vt*me,Ie)])+kr([Mt(vt*me,be)])+nn("c",[Mt(vt*me/4,Ie/2),Mt(vt*me/2,Ie),Mt(vt*me,Ie)])+wt("h",vt*_e)+nn("c",[Mt(vt*me/2,0),Mt(vt*me*3/4,-(Ie/2)),Mt(vt*me,-Ie)])+kr([Mt(vt*me,-be)])+nn("c",[Mt(vt*me/4,-(Ie/2)),Mt(vt*me/2,-Ie),Mt(vt*me,-Ie)])}const se=this.NOTCH_WIDTH,ce=this.NOTCH_HEIGHT,_e=se/3,me=_e/3,be=ce/2,Ie=be/2,De=ee(1),dt=ee(-1);return{type:this.SHAPES.NOTCH,width:se,height:ce,pathLeft:De,pathRight:dt}}makeInsideCorners(){const ee=this.CORNER_RADIUS,se=Ei("a","0 0,0",ee,Mt(-ee,ee)),ce=Ei("a","0 0,1",ee,Mt(-ee,ee)),_e=Ei("a","0 0,0",ee,Mt(ee,ee)),me=Ei("a","0 0,1",ee,Mt(ee,ee));return{width:ee,height:ee,pathTop:se,pathBottom:_e,rightWidth:ee,rightHeight:ee,pathTopRight:ce,pathBottomRight:me}}generateSecondaryColour_(ee){return Gs("#000",ee,.15)||ee}generateTertiaryColour_(ee){return Gs("#000",ee,.25)||ee}createDom(ee,se,ce){super.createDom(ee,se,ce),ee=lt(Ye.DEFS,{},ee),se=lt(Ye.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},ee),lt(Ye.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},se),ce=lt(Ye.FECOMPONENTTRANSFER,{result:"outBlur"},se),lt(Ye.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},ce),lt(Ye.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},se),lt(Ye.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},se),this.selectedGlowFilterId=se.id,this.selectedGlowFilter=se,ee=lt(Ye.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},ee),lt(Ye.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},ee),se=lt(Ye.FECOMPONENTTRANSFER,{result:"outBlur"},ee),lt(Ye.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},se),lt(Ye.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},ee),lt(Ye.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},ee),lt(Ye.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},ee),this.replacementGlowFilterId=ee.id,this.replacementGlowFilter=ee}getCSS_(ee){return[`${ee} .blocklyText,`,`${ee} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${ee} .blocklyTextInputBubble textarea {`,"font-weight: normal;","}",`${ee} .blocklyText {`,"fill: #fff;","}",`${ee} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${ee} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${ee} .blocklyNonEditableText>text,`,`${ee} .blocklyEditableText>text,`,`${ee} .blocklyNonEditableText>g>text,`,`${ee} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${ee} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${ee} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${ee} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${ee} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${ee} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${ee} .blocklyDropdownText {`,"fill: #fff !important;","}",`${ee}.blocklyWidgetDiv .goog-menuitem,`,`${ee}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${ee}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${ee} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${ee} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${ee} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},tf=class extends $a{constructor(ee,se){super(ee,se)}draw(){const ee=this.block_.pathObject;ee.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),ee.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&ee.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(ee.outputShapeType=this.info_.outputConnection.shape.type),ee.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(ee){if(!(0>=ee.height)){if(He.isSpacer(ee)){const _e=ee.precedesStatement;var se=ee.followsStatement;if(_e||se){const me=this.constants_.INSIDE_CORNERS;var ce=me.rightHeight;ce=ee.height-(_e?ce:0),se=se?me.pathBottomRight:"",ee=0<ce?wt("V",ee.yPos+ce):"",this.outlinePath_+=se+ee+(_e?me.pathTopRight:"");return}}this.outlinePath_+=wt("V",ee.yPos+ee.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const ee=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=ci(ee.xPos,this.info_.startY),this.outlinePath_+=wt("h",ee.width)}drawFlatBottom_(){const ee=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=wt("V",ee.baseline),this.outlinePath_+=wt("h",-ee.width)}drawInlineInput_(ee){this.positionInlineInputConnection_(ee);const se=ee.input.name;ee.connectedBlock||this.info_.isInsertionMarker||(ee=Ni(ee.xPos+ee.connectionWidth,ee.centerline-ee.height/2)+this.getInlineInputPath(ee),this.block_.pathObject.setOutlinePath(se,ee))}getInlineInputPath(ee){const se=ee.width-2*ee.connectionWidth,ce=ee.height;return wt("h",se)+ee.shape.pathRightDown(ce)+wt("h",-se)+ee.shape.pathUp(ce)+"z"}drawStatementInput_(ee){var se=ee.getLastInput();const ce=se.xPos+se.notchOffset+se.shape.width,_e=this.constants_.INSIDE_CORNERS,me=se.shape.pathRight+wt("h",-(se.notchOffset-_e.width))+_e.pathTop,be=ee.height-2*_e.height;se=_e.pathBottom+wt("h",se.notchOffset-_e.width)+(se.connectedBottomNextConnection?"":se.shape.pathLeft),this.outlinePath_+=wt("H",ce)+me+wt("v",be)+se+wt("H",ee.xPos+ee.width),this.positionStatementInputConnection_(ee)}drawConnectionHighlightPath(ee){const se=ee.connectionModel;if(se.type===Rt.NEXT_STATEMENT||se.type===Rt.PREVIOUS_STATEMENT||se.type===Rt.OUTPUT_VALUE&&!ee.isDynamicShape)super.drawConnectionHighlightPath(ee);else{ee=se.type===Rt.INPUT_VALUE?Ni(ee.connectionWidth,-ee.height/2)+this.getInlineInputPath(ee):Ni(ee.width,-ee.height/2)+ee.shape.pathDown(ee.height);var ce=se.getSourceBlock(),_e,me;(me=(_e=ce.pathObject).addConnectionHighlight)==null||me.call(_e,se,ee,se.getOffsetInBlock(),ce.RTL)}}},cr=class extends oi{constructor(ee,se,ce,_e,me,be,Ie){if(super(oi.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",ce=Number(bi(ce)),se=Number(bi(se)),isNaN(ce)||isNaN(se))throw Error("Height and width values of an image field must cast to numbers.");if(0>=ce||0>=se)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new Xt(se,ce+cr.Y_PADDING),this.imageHeight=ce,typeof me=="function"&&(this.clickHandler=me),ee!==oi.SKIP_SETUP&&(Ie?this.configure_(Ie):(this.flipRtl=!!be,this.altText=bi(_e)||""),this.setValue(bi(ee)))}configure_(ee){super.configure_(ee),ee.flipRtl&&(this.flipRtl=ee.flipRtl),ee.alt&&(this.altText=bi(ee.alt))}initView(){this.imageElement=lt(Ye.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(hn,"xlink:href",this.value_),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(ee){return typeof ee!="string"?null:ee}doValueUpdate_(ee){this.value_=ee,this.imageElement&&this.imageElement.setAttributeNS(hn,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(ee){ee!==this.altText&&(this.altText=ee||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(ee){this.clickHandler=ee}getText_(){return this.altText}static fromJson(ee){if(!ee.src||!ee.width||!ee.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(ee.src,ee.width,ee.height,void 0,void 0,void 0,ee)}};cr.Y_PADDING=1,Gn("field_image",cr),cr.prototype.DEFAULT_VALUE="";var va=class extends oi{constructor(ee,se,ce){super(oi.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper=this.onKeyDownWrapper=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",ee!==oi.SKIP_SETUP&&(ce&&this.configure_(ce),this.setValue(ee),se&&this.setValidator(se))}configure_(ee){super.configure_(ee),ee.spellcheck!==void 0&&(this.spellcheck_=ee.spellcheck)}initView(){if(!this.getSourceBlock())throw new Si;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const ee=this.getSourceBlock();if(!ee)throw new Si;let se;return this.fullBlockClickTarget_=!((se=this.getConstants())==null||!se.FULL_BLOCK_FIELDS)&&ee.isSimpleReporter()}doValueInvalid_(ee,se=!0){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,ee=this.value_,this.value_=this.valueWhenEditorWasOpened_,this.sourceBlock_&&Ke()&&this.value_!==ee&&se&&Ae(new(Le(it.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,ee,this.value_)))}doValueUpdate_(ee){this.isTextValid_=this.isDirty_=!0,this.value_=ee}applyColour(){const ee=this.getSourceBlock();if(!ee)throw new Si;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",ee.style.colourTertiary)):(this.borderRect_.style.display="none",ee.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let ee;return(ee=this.getConstants())!=null&&ee.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var ee=this.htmlInput_;this.isTextValid_?(Oe(ee,"blocklyInvalidInput"),Ri(ee,Mi.INVALID,!1)):(Ct(ee,"blocklyInvalidInput"),Ri(ee,Mi.INVALID,!0))}if(ee=this.getSourceBlock(),!ee)throw new Si;this.getConstants().FULL_BLOCK_FIELDS&&ee.applyColour()}setSpellcheck(ee){ee!==this.spellcheck_&&(this.spellcheck_=ee,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(ee,se=!1){this.workspace_=this.sourceBlock_.workspace,!se&&this.workspace_.options.modalInputs&&(Pp||Nu||Wl)?this.showPromptEditor():this.showInlineEditor(se)}showPromptEditor(){al(ne.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),ee=>{ee!==null&&this.setValue(this.getValueFromEditorText_(ee)),this.onFinishEditing_(this.value_)})}showInlineEditor(ee){const se=this.getSourceBlock();if(!se)throw new Si;yl(this,se.RTL,this.widgetDispose_.bind(this),this.workspace_),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,ee||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var ee=this.getSourceBlock();if(!ee)throw new Si;ne.setGroup$$module$build$src$core$events$utils(!0);const se=yr();var ce=this.getClickTarget_();if(!ce)throw Error("A click target has not been set.");Ct(ce,"editing"),ce=document.createElement("input"),ce.className="blocklyHtmlInput",ce.setAttribute("spellcheck",this.spellcheck_);const _e=this.workspace_.getScale();var me=this.getConstants().FIELD_TEXT_FONTSIZE*_e+"pt";return se.style.fontSize=me,ce.style.fontSize=me,me=va.BORDERRADIUS*_e+"px",this.isFullBlockField()&&(me=this.getScaledBBox(),me=(me.bottom-me.top)/2+"px",ee=ee.getParent()?ee.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,ce.style.border=1*_e+"px solid "+ee,se.style.borderRadius=me,se.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(se.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*_e+"px")),ce.style.borderRadius=me,se.appendChild(ce),ce.value=ce.defaultValue=this.getEditorText_(this.value_),ce.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(ce),ce}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&Ke()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(Ae(new(Le(it.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),ne.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var ee=yr().style;if(ee.width="auto",ee.height="auto",ee.fontSize="",ee.transition="",ee.boxShadow="",this.htmlInput_=null,ee=this.getClickTarget_(),!ee)throw Error("A click target has not been set.");Oe(ee,"editing")}onFinishEditing_(ee){}bindInputEvents_(ee){this.onKeyDownWrapper=Nt(ee,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper=Nt(ee,"input",this,this.onHtmlInputChange)}unbindInputEvents_(){this.onKeyDownWrapper&&(Yt(this.onKeyDownWrapper),this.onKeyDownWrapper=null),this.onKeyInputWrapper&&(Yt(this.onKeyInputWrapper),this.onKeyInputWrapper=null)}onHtmlInputKeyDown_(ee){ee.key==="Enter"?(Ws(this),Un()):ee.key==="Escape"?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),Ws(this),Un()):ee.key==="Tab"&&(Ws(this),Un(),this.sourceBlock_.tab(this,!ee.shiftKey),ee.preventDefault())}onHtmlInputChange(ee){ee=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&Ke()&&this.value_!==ee&&Ae(new(Le(it.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,ee,this.value_))}setEditorValue_(ee,se=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(ee)),this.setValue(ee,se)}resizeEditor_(){cn().then(()=>{const ee=this.getSourceBlock();if(!ee)throw new Si;const se=yr(),ce=this.getScaledBBox();se.style.width=ce.right-ce.left+"px",se.style.height=ce.bottom-ce.top+"px";const _e=ce.top;se.style.left=`${ee.RTL?ce.right-se.offsetWidth:ce.left}px`,se.style.top=`${_e}px`})}repositionForWindowResize(){let ee;const se=(ee=this.getSourceBlock())==null?void 0:ee.getRootBlock();return se instanceof vn?(vr(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),se)||this.resizeEditor_(),!0):!1}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(ee){return`${ee}`}getValueFromEditorText_(ee){return ee}};va.BORDERRADIUS=4;var Ia=class extends va{constructor(ee,se,ce){super(ee,se,ce)}doClassValidation_(ee){return ee===void 0?null:`${ee}`}static fromJson(ee){return new this(bi(ee.text),void 0,ee)}};Gn("field_input",Ia),Ia.prototype.DEFAULT_VALUE="";var nf=class extends $h{constructor(ee){super(ee)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(ee){return!!ee.outputConnection}hasRightSquareCorner(ee){return!!ee.outputConnection&&!ee.statementInputCount&&!ee.nextConnection}},Oa=class extends Mo{constructor(ee,se){if(super(ee,se),this.connectedBottomNextConnection=!1,this.connectedBlock){for(ee=this.connectedBlock;se=ee.getNextBlock();)ee=se;ee.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},sf=class extends Xn{constructor(ee){super(ee),this.width=this.height=0,this.type|=He.getType("RIGHT_CONNECTION")}},rf=class extends Sh{constructor(ee){super(ee)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(ee){const se=(ee.hat?ee.hat==="cap":this.constants_.ADD_START_HATS)&&!ee.outputConnection&&!ee.previousConnection;return!!ee.outputConnection||se}hasRightSquareCorner(ee){return!!ee.outputConnection&&!ee.statementInputCount&&!ee.nextConnection}},of=class extends Po{constructor(ee,se){super(ee,se),this.isInline=!0,this.renderer_=ee,this.constants_=this.renderer_.getConstants(),this.topRow=new rf(this.constants_),this.bottomRow=new nf(this.constants_),this.isMultiRow=!se.getInputsInline()||se.isCollapsed(),this.hasStatementInput=0<se.statementInputCount,this.rightSide=this.outputConnection?new sf(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(ee,se){return se?se instanceof gs||ee instanceof gn||se instanceof gn?!0:ee instanceof ne.ValueInput$$module$build$src$core$inputs$value_input||ee instanceof jn||ee instanceof gs?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(ee){return ee.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(ee)}getInRowSpacing_(ee,se){return ee&&se||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!ee&&se&&He.isStatementInput(se)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:ee&&He.isLeftRoundedCorner(ee)&&se&&(He.isPreviousConnection(se)||He.isNextConnection(se))?se.notchOffset-this.constants_.CORNER_RADIUS:ee&&He.isLeftSquareCorner(ee)&&se&&He.isHat(se)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(ee,se){if(He.isTopRow(ee)&&He.isBottomRow(se))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const ce=He.isInputRow(ee)&&ee.hasStatement,_e=He.isInputRow(se)&&se.hasStatement;return _e||ce?(ee=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),_e&&ce?Math.max(ee,this.constants_.DUMMY_INPUT_MIN_HEIGHT):ee):He.isTopRow(ee)?ee.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):He.isBottomRow(se)?this.outputConnection?!se.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(ee,se){const ce=this.width-this.startX;return He.isInputRow(ee)&&ee.hasStatement||He.isInputRow(se)&&se.hasStatement?Math.max(ce,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):ce}getElemCenterline_(ee,se){if(ee.hasStatement&&!He.isSpacer(se)&&!He.isStatementInput(se))return ee.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(He.isInlineInput(se)&&se instanceof Rs){const ce=se.connectedBlock;if(ce&&ce.outputConnection&&ce.nextConnection)return ee.yPos+ce.height/2}return super.getElemCenterline_(ee,se)}addInput_(ee,se){if((ee instanceof jn||ee instanceof gs)&&se.hasDummyInput&&se.align===ne.Align$$module$build$src$core$inputs$align.LEFT&&ee.align===ne.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(se,ee);else if(ee instanceof gn){se.elements.push(new Oa(this.constants_,ee)),se.hasStatement=!0,se.align===null&&(se.align=ee.align);return}super.addInput_(ee,se)}addAlignmentPadding_(ee,se){if(this.rightAlignedDummyInputs.get(ee)){let ce;for(let _e=0;_e<ee.elements.length;_e++){const me=ee.elements[_e];if(He.isSpacer(me)&&(ce=me),He.isField(me)&&me instanceof Gr&&me.parentInput===this.rightAlignedDummyInputs.get(ee))break}if(ce){ce.width+=se,ee.width+=se;return}}super.addAlignmentPadding_(ee,se)}adjustXPosition_(){const ee=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let se=ee;for(let me=2;me<this.rows.length-1;me+=2){var ce=this.rows[me-1];const be=this.rows[me];var _e=this.rows[me+1];if(ce=me===2?!!this.topRow.hasPreviousConnection:!!ce.followsStatement,_e=me+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!_e.precedesStatement,He.isInputRow(be)&&be.hasStatement){be.measure();let Ie,De;se=be.width-((De=(Ie=be.getLastInput())==null?void 0:Ie.width)!=null?De:0)+ee}else if(ce&&(me===2||_e)&&He.isInputRow(be)&&!be.hasStatement){_e=be.xPos,ce=null;for(let Ie=0;Ie<be.elements.length;Ie++){const De=be.elements[Ie];He.isSpacer(De)&&(ce=De),ce&&(He.isField(De)||He.isInput(De))&&_e<se&&!(He.isField(De)&&De instanceof Gr&&(De.field instanceof or||De.field instanceof cr))&&(ce.width+=se-_e),_e+=De.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var ee=this.outputConnection.shape;if("isDynamic"in ee&&ee.isDynamic){for(var se=0,ce=0;ce<this.rows.length;ce++){const _e=this.rows[ce];_e.yPos=se,se+=_e.height}this.height=se,ce=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,se=ee.height(ce),ce=ee.width(ce),this.outputConnection.height=se,this.outputConnection.width=ce,this.outputConnection.startX=ce,this.outputConnection.connectionOffsetY=ee.connectionOffsetY(se),this.outputConnection.connectionOffsetX=ee.connectionOffsetX(ce),ee=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(ee=ce,this.rightSide.height=se,this.rightSide.width=ee,this.rightSide.centerline=se/2,this.rightSide.xPos=this.width+ee),this.startX=ce,this.width+=ce+ee,this.widthWithChildren+=ce+ee}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var ee=0,se=0;se<this.rows.length;se++){var ce=this.rows[se];if(!He.isInputRow(ce))continue;ee=ce.elements[ce.elements.length-2];let _e=this.getNegativeSpacing_(ce.elements[1]),me=this.getNegativeSpacing_(ee);ee=_e+me;const be=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-ee<be&&(ee=this.width-be,_e=ee/2,me=ee/2),ce.elements.unshift(new pn(this.constants_,-_e)),ce.elements.push(new pn(this.constants_,-me))}if(ee)for(this.width-=ee,this.widthWithChildren-=ee,this.rightSide.xPos-=ee,se=0;se<this.rows.length;se++)ce=this.rows[se],He.isTopOrBottomRow(ce)&&(ce.elements[1].width-=ee),ce.width-=ee,ce.widthWithConnectedBlocks-=ee}}getNegativeSpacing_(ee){if(!ee||!this.outputConnection)return 0;const se=this.outputConnection.width;var ce=this.outputConnection.shape.type;const _e=this.constants_;if(1<this.inputRows.length)switch(ce){case _e.SHAPES.ROUND:return ce=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,ce=this.height/2>ce?ce:this.height/2,se-ce*(1-Math.sin(Math.acos((ce-this.constants_.SMALL_PADDING)/ce)));default:return 0}if(He.isInlineInput(ee)&&ee instanceof Rs){const me=ee.connectedBlock;return ee=me?me.pathObject.outputShapeType:ee.shape.type,ee==null||me&&me.outputConnection&&(me.statementInputCount||me.nextConnection)||ce===_e.SHAPES.HEXAGONAL&&ce!==ee?0:se-this.constants_.SHAPE_IN_SHAPE_PADDING[ce][ee]}return He.isField(ee)&&ee instanceof Gr?ce===_e.SHAPES.ROUND&&ee.field instanceof Ia?se-2.75*_e.GRID_UNIT:se-this.constants_.SHAPE_IN_SHAPE_PADDING[ce][0]:He.isIcon(ee)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let _e=2;_e<this.rows.length-1;_e+=2){const me=this.rows[_e-1],be=this.rows[_e],Ie=this.rows[_e+1];var ee=_e===2,se=_e+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!Ie.precedesStatement;if(ee?this.topRow.hasPreviousConnection:me.followsStatement){var ce=be.elements[1];if(ce=be.elements.length===3&&ce instanceof Gr&&(ce.field instanceof or||ce.field instanceof cr),!ee&&ce)me.height-=this.constants_.SMALL_PADDING,Ie.height-=this.constants_.SMALL_PADDING,be.height-=this.constants_.MEDIUM_PADDING;else if(!ee&&!se)me.height+=this.constants_.SMALL_PADDING;else if(se){for(ee=!1,se=0;se<be.elements.length;se++)if(ce=be.elements[se],ce instanceof Rs&&He.isInlineInput(ce)&&ce.connectedBlock&&!ce.connectedBlock.isShadow()&&40<=ce.connectedBlock.getHeightWidth().height){ee=!0;break}ee&&(me.height-=this.constants_.SMALL_PADDING,Ie.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},lf=class extends vh{constructor(ee,se,ce){super(ee,se,ce),this.markerCircle=null}showWithInputOutput(ee){const se=ee.getSourceBlock();ee=ee.getLocation().getOffsetInBlock(),this.positionCircle(ee.x,ee.y),this.setParent_(se),this.showCurrent_()}showWithOutput_(ee){this.showWithInputOutput(ee)}showWithInput_(ee){this.showWithInputOutput(ee)}showWithBlock_(ee){ee=ee.getLocation();const se=ee.getHeightWidth();this.positionRect_(0,0,se.width,se.height),this.setParent_(ee),this.showCurrent_()}positionCircle(ee,se){let ce;(ce=this.markerCircle)==null||ce.setAttribute("cx",`${ee}`);let _e;(_e=this.markerCircle)==null||_e.setAttribute("cy",`${se}`),this.currentMarkerSvg=this.markerCircle}hide(){super.hide(),this.markerCircle&&(this.markerCircle.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle=lt(Ye.CIRCLE,{r:this.constants_.CURSOR_RADIUS,"stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const ee=this.getBlinkProperties_();lt(Ye.ANIMATE,ee,this.markerCircle)}return this.markerSvg_}applyColour_(ee){super.applyColour_(ee);let se;(se=this.markerCircle)==null||se.setAttribute("fill",this.colour_);let ce;if((ce=this.markerCircle)==null||ce.setAttribute("stroke",this.colour_),this.isCursor()){ee=this.colour_+";transparent;transparent;";let _e;(_e=this.markerCircle)==null||_e.firstElementChild.setAttribute("values",ee)}}},af=class extends Ta{constructor(ee,se,ce){super(ee,se,ce),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=ce}setPath(ee){super.setPath(ee),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",ee)}applyColour(ee){super.applyColour(ee);const se=ee.getParent();ee.isShadow()&&se&&this.svgPath.setAttribute("stroke",se.style.colourTertiary);for(const ce of this.outlines.values())ce.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const ee of this.outlines.values())ee.setAttribute("transform","scale(-1 1)")}updateSelected(ee){this.setClass_("blocklySelected",ee),ee?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.setAttribute("fill","none"),this.svgPathSelected.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(ee){this.setClass_("blocklyReplaceable",ee),ee?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(ee,se){ee=ee.getParentInput().name,(ee=this.getOutlinePath(ee))&&(se?ee.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):ee.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const ee of this.outlines.keys())this.remainingOutlines.add(ee)}endDrawing(){if(this.remainingOutlines.size)for(const ee of this.remainingOutlines)this.removeOutlinePath(ee);this.remainingOutlines.clear()}setOutlinePath(ee,se){ee=this.getOutlinePath(ee),ee.setAttribute("d",se),ee.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(ee){return this.outlines.has(ee)||this.outlines.set(ee,lt(Ye.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(ee),this.outlines.get(ee)}removeOutlinePath(ee){let se,ce;(se=this.outlines.get(ee))==null||(ce=se.parentNode)==null||ce.removeChild(this.outlines.get(ee)),this.outlines.delete(ee)}},Wh=class extends ba{constructor(ee){super(ee)}makeConstants_(){return new ef}makeRenderInfo_(ee){return new of(this,ee)}makeDrawer_(ee,se){return new tf(ee,se)}makeMarkerDrawer(ee,se){return new lf(ee,this.getConstants(),se)}makePathObject(ee,se){return new af(ee,se,this.getConstants())}getConstants(){return this.constants_}getConnectionPreviewMethod(ee,se,ce){return ge("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),se.type===Rt.OUTPUT_VALUE?ee.isConnected()?Cn.PREVIEW_TYPE.REPLACEMENT_FADE:Cn.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(ee,se,ce)}};uo("zelos",Wh);var cf=class{constructor(ee){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=ee.workspace}previewReplacement(ee,se,ce){ne.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=ce,ce.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(se)&&(se.highlight(),this.staticConn=se)}finally{ne.enable$$module$build$src$core$events$utils()}}previewConnection(ee,se){if(ee!==this.draggedConn||se!==this.staticConn){ne.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(ee,se)&&(this.markerConn=this.previewMarker(ee,se)),this.workspace.getRenderer().shouldHighlightConnection(se)&&se.highlight(),this.draggedConn=ee,this.staticConn=se}finally{ne.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(ee,se){return se.type===Rt.PREVIOUS_STATEMENT||se.type===Rt.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof Wh)}previewMarker(ee,se){const ce=ee.getSourceBlock(),_e=this.createInsertionMarker(ce),me=this.getMatchingConnection(ce,_e,ee);if(!me)return null;_e.queueRender(),wn(),me.connect(se);const be={x:se.x-me.x,y:se.y-me.y},Ie=me.getOffsetInBlock().clone();return cn().then(()=>{if(!_e.isDeadOrDying()){ne.disable$$module$build$src$core$events$utils();try{_e==null||_e.positionNearConnection(me,be,Ie),_e==null||_e.getSvgRoot().setAttribute("visibility","visible")}finally{ne.enable$$module$build$src$core$events$utils()}}}),me}createInsertionMarker(ee){const se=un(ee,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!se)throw Error(`Failed to serialize source block. ${ee.toDevString()}`);ee=es(se,this.workspace);for(const ce of ee.getDescendants(!1))ce.setInsertionMarker(!0);return ee.initSvg(),ee.getSvgRoot().setAttribute("visibility","hidden"),ee}getMatchingConnection(ee,se,ce){if(ee=ee.getConnections_(!0),se=se.getConnections_(!0),ee.length!==se.length)return null;for(let _e=0;_e<ee.length;_e++)if(ee[_e]===ce)return se[_e];return null}hidePreview(){ne.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{ne.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(ee){const se=ee.getSourceBlock(),ce=se.outputConnection;let _e;if((_e=se.previousConnection)!=null&&_e.targetConnection||ce!=null&&ce.targetConnection)se.unplug(!0);else{let me;(me=ee.targetBlock())==null||me.unplug(!1)}se.dispose()}dispose(){this.hidePreview()}};re($t.CONNECTION_PREVIEWER,Vn,cf);var Ns={};Ns.Align=ne.Align$$module$build$src$core$inputs$align,Ns.DummyInput=jn,Ns.EndRowInput=gs,Ns.Input=Wr,Ns.StatementInput=gn,Ns.ValueInput=ne.ValueInput$$module$build$src$core$inputs$value_input,Ns.inputTypes=ne.inputTypes$$module$build$src$core$inputs$input_types;var uf=!1,hf;ne.CodeGenerator$$module$build$src$core$generator=class{constructor(ee){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=ee,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(ee){ee||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),ee=bt());var se=[];this.init(ee),ee=ee.getTopBlocks(!0);for(let ce=0,_e;_e=ee[ce];ce++){let me=this.blockToCode(_e);Array.isArray(me)&&(me=me[0]),me&&(_e.outputConnection&&(me=this.scrubNakedValue(me),this.STATEMENT_PREFIX&&!_e.suppressPrefixSuffix&&(me=this.injectId(this.STATEMENT_PREFIX,_e)+me),this.STATEMENT_SUFFIX&&!_e.suppressPrefixSuffix&&(me+=this.injectId(this.STATEMENT_SUFFIX,_e))),se.push(me))}return se=se.join(`
`),se=this.finish(se),se=se.replace(/^\s+\n/,""),se=se.replace(/\n\s+$/,`
`),se=se.replace(/[ \t]+\n/g,`
`)}prefixLines(ee,se){return se+ee.replace(/(?!\n$)\n/g,`
`+se)}allNestedComments(ee){const se=[];ee=ee.getDescendants(!0);for(let ce=0;ce<ee.length;ce++){const _e=ee[ce].getCommentText();_e&&se.push(_e)}return se.length&&se.push(""),se.join(`
`)}blockToCode(ee,se){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!ee)return"";if(!ee.isEnabled())return se?"":this.blockToCode(ee.getNextBlock());if(ee.isInsertionMarker())return se?"":this.blockToCode(ee.getChildren(!1)[0]);var ce=this.forBlock[ee.type];if(typeof ce!="function")throw Error(`${this.name_} generator does not know how to generate code for block type "${ee.type}".`);if(ce=ce.call(ee,ee,this),Array.isArray(ce)){if(!ee.outputConnection)throw TypeError("Expecting string from statement block: "+ee.type);return[this.scrub_(ee,ce[0],se),ce[1]]}if(typeof ce=="string")return this.STATEMENT_PREFIX&&!ee.suppressPrefixSuffix&&(ce=this.injectId(this.STATEMENT_PREFIX,ee)+ce),this.STATEMENT_SUFFIX&&!ee.suppressPrefixSuffix&&(ce+=this.injectId(this.STATEMENT_SUFFIX,ee)),this.scrub_(ee,ce,se);if(ce===null)return"";throw SyntaxError("Invalid code generated: "+ce)}valueToCode(ee,se,ce){if(isNaN(ce))throw TypeError("Expecting valid order from block: "+ee.type);var _e=ee.getInputTargetBlock(se);if(!_e&&!ee.getInput(se))throw ReferenceError(`Input "${se}" doesn't exist on "${ee.type}"`);if(!_e||(se=this.blockToCode(_e),se===""))return"";if(!Array.isArray(se))throw TypeError(`Expecting tuple from value block: ${_e.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(ee=se[0],se=se[1],isNaN(se))throw TypeError("Expecting valid order from value block: "+_e.type);if(!ee)return"";_e=!1;var me=Math.floor(ce);const be=Math.floor(se);if(me<=be&&(me!==be||me!==0&&me!==99)){for(_e=!0,me=0;me<this.ORDER_OVERRIDES.length;me++)if(this.ORDER_OVERRIDES[me][0]===ce&&this.ORDER_OVERRIDES[me][1]===se){_e=!1;break}}return _e&&(ee="("+ee+")"),ee}statementToCode(ee,se){const ce=ee.getInputTargetBlock(se);if(!ce&&!ee.getInput(se))throw ReferenceError(`Input "${se}" doesn't exist on "${ee.type}"`);if(ee=this.blockToCode(ce),typeof ee!="string")throw TypeError("Expecting code from statement block: "+(ce&&ce.type));return ee&&(ee=this.prefixLines(ee,this.INDENT)),ee}addLoopTrap(ee,se){return this.INFINITE_LOOP_TRAP&&(ee=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,se),this.INDENT)+ee),this.STATEMENT_SUFFIX&&!se.suppressPrefixSuffix&&(ee=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,se),this.INDENT)+ee),this.STATEMENT_PREFIX&&!se.suppressPrefixSuffix&&(ee+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,se),this.INDENT)),ee}injectId(ee,se){return se=se.id.replace(/\$/g,"$$$$"),ee.replace(/%1/g,"'"+se+"'")}addReservedWords(ee){this.RESERVED_WORDS_+=ee+","}provideFunction_(ee,se){if(!this.definitions_[ee]){const ce=this.nameDB_.getDistinctName(ee,ne.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[ee]=ce,Array.isArray(se)&&(se=se.join(`
`)),se=se.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,ce);let _e;for(;_e!==se;)_e=se,se=se.replace(/^(( {2})*) {2}/gm,"$1\0");se=se.replace(/\0/g,this.INDENT),this.definitions_[ee]=se}return this.functionNames_[ee]}getVariableName(ee){return this.getName(ee,ne.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(ee){return this.getName(ee,ne.NameType$$module$build$src$core$names.PROCEDURE)}getName(ee,se){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(ee,se)}init(ee){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(ee,se,ce){return se}finish(ee){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),ee}scrubNakedValue(ee){return ee}},hf={},hf.CodeGenerator=ne.CodeGenerator$$module$build$src$core$generator;var df=class extends Gh{constructor(ee,se){super(ee),this.flyout_=se}getBoundingBox(){let ee;try{ee=this.workspace_.getCanvas().getBBox()}catch{ee={height:0,y:0,width:0,x:0}}return ee}getContentMetrics(ee){const se=this.getBoundingBox();return ee=ee?1:this.workspace_.scale,{height:se.height*ee,width:se.width*ee,top:se.y*ee,left:se.x*ee}}getScrollMetrics(ee,se,ce){return se=ce||this.getContentMetrics(),ce=this.flyout_.MARGIN*this.workspace_.scale,ee=ee?this.workspace_.scale:1,{height:(se.height+2*ce)/ee,width:(se.width+se.left+ce)/ee,top:0,left:0}}},Yr;(function(ee){ee.BLOCK="block",ee.BUTTON="button"})(Yr||(Yr={}));var Fm="WORKSPACE_AT_BLOCK_CAPACITY",Ra=class extends ya{constructor(ee){super(),this.horizontalLayout=!1,this.boundEvents=[],this.filterWrapper=this.reflowWrapper=null,this.mats=[],this.buttons_=[],this.contents=[],this.listeners=[],this.permanentlyDisabled=[],this.recycledBlocks=[],this.autoClose=!0,this.visible=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,ee.setMetrics=this.setMetrics_.bind(this),this.workspace_=new kn(ee),this.workspace_.setMetricsManager(new df(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.visible),this.id=Te(),this.RTL=!!ee.RTL,this.toolboxPosition_=ee.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(ee){return this.svgGroup_=lt(ee,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=lt(Ye.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(ee){this.targetWorkspace=ee,this.workspace_.targetWorkspace=ee,this.workspace_.scrollbar=new Hh(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(Nt(this.svgGroup_,"wheel",this,this.wheel_)),this.filterWrapper=this.filterForCapacity.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper),this.boundEvents.push(Nt(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),ee.getComponentManager().addComponent({component:this,weight:ui.ComponentWeight.FLYOUT_WEIGHT,capabilities:[ui.Capability.AUTOHIDEABLE,ui.Capability.DELETE_AREA,ui.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const ee of this.boundEvents)Yt(ee);this.boundEvents.length=0,this.filterWrapper&&this.targetWorkspace.removeChangeListener(this.filterWrapper),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&We(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(ee){this.autoClose=ee,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(ee){!ee&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}getTargetWorkspace(){return this.targetWorkspace}isVisible(){return this.visible}setVisible(ee){const se=ee!==this.isVisible();this.visible=ee,se&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(ee){const se=ee!==this.containerVisible;this.containerVisible=ee,se&&this.updateDisplay()}getContents(){return this.contents}setContents(ee){this.contents=ee}updateDisplay(){let ee;ee=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=ee?"block":"none");let se;(se=this.workspace_.scrollbar)==null||se.setContainerVisible(ee)}positionAt_(ee,se,ce,_e){let me;(me=this.svgGroup_)==null||me.setAttribute("width",`${ee}`);let be;(be=this.svgGroup_)==null||be.setAttribute("height",`${se}`),this.workspace_.setCachedParentSvgSize(ee,se),this.svgGroup_&&Kt(this.svgGroup_,"translate("+ce+"px,"+_e+"px)"),(ee=this.workspace_.scrollbar)&&(ee.setOrigin(ce,_e),ee.resize(),ee.hScroll&&ee.hScroll.setPosition(ee.hScroll.position.x,ee.hScroll.position.y),ee.vScroll&&ee.vScroll.setPosition(ee.vScroll.position.x,ee.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(const ee of this.listeners)Yt(ee);this.listeners.length=0,this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null)}}show(ee){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof ee=="string"&&(ee=this.getDynamicCategoryContents(ee)),this.setVisible(!0),ee=Qn(ee),ee=this.createFlyoutInfo(ee),wn(this.workspace_),this.setContents(ee.contents),this.layout_(ee.contents,ee.gaps),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity(),this.position(),this.reflowWrapper=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper),this.emptyRecycledBlocks()}createFlyoutInfo(ee){const se=[],ce=[];this.permanentlyDisabled.length=0;const _e=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const me of ee){if("custom"in me){ee=this.getDynamicCategoryContents(me.custom),ee=Qn(ee);const{contents:be,gaps:Ie}=this.createFlyoutInfo(ee);se.push(...be),ce.push(...Ie)}switch(me.kind.toUpperCase()){case"BLOCK":ee=me;const be=this.createFlyoutBlock(ee);se.push({type:Yr.BLOCK,block:be}),this.addBlockGap(ee,ce,_e);break;case"SEP":this.addSeparatorGap(me,ce,_e);break;case"LABEL":ee=this.createButton(me,!0),se.push({type:Yr.BUTTON,button:ee}),ce.push(_e);break;case"BUTTON":ee=this.createButton(me,!1),se.push({type:Yr.BUTTON,button:ee}),ce.push(_e)}}return{contents:se,gaps:ce}}getDynamicCategoryContents(ee){if(ee=this.workspace_.targetWorkspace.getToolboxCategoryCallback(ee),typeof ee!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return ee(this.workspace_.targetWorkspace)}createButton(ee,se){return new Sn(this.workspace_,this.targetWorkspace,ee,se)}createFlyoutBlock(ee){let se;return ee.blockxml?(ee=typeof ee.blockxml=="string"?ne.textToDom$$module$build$src$core$utils$xml(ee.blockxml):ee.blockxml,(se=this.getRecycledBlock(ee.getAttribute("type")))||(se=Vs(ee,this.workspace_))):(se=this.getRecycledBlock(ee.type),se||(ee.enabled===void 0&&(ee.enabled=ee.disabled!=="true"&&ee.disabled!==!0),ee.disabledReasons===void 0&&ee.enabled===!1&&(ee.disabledReasons=[Ji]),se=gr(ee,this.workspace_))),se.isEnabled()||this.permanentlyDisabled.push(se),se}getRecycledBlock(ee){let se=-1;for(let ce=0;ce<this.recycledBlocks.length;ce++)if(this.recycledBlocks[ce].type===ee){se=ce;break}return se===-1?void 0:this.recycledBlocks.splice(se,1)[0]}addBlockGap(ee,se,ce){let _e;ee.gap?_e=parseInt(String(ee.gap)):ee.blockxml&&(ee=typeof ee.blockxml=="string"?ne.textToDom$$module$build$src$core$utils$xml(ee.blockxml):ee.blockxml,_e=parseInt(ee.getAttribute("gap"))),se.push(!_e||isNaN(_e)?ce:_e)}addSeparatorGap(ee,se,ce){ee=parseInt(String(ee.gap)),!isNaN(ee)&&0<se.length?se[se.length-1]=ee:se.push(ce)}clearOldBlocks(){var ee=this.workspace_.getTopBlocks(!1);for(let ce=0,_e;_e=ee[ce];ce++)this.blockIsRecyclable_(_e)?this.recycleBlock(_e):_e.dispose(!1,!1);for(ee=0;ee<this.mats.length;ee++){const ce=this.mats[ee];ce&&($l(ce),We(ce))}this.mats.length=0;for(let ce=0,_e;_e=this.buttons_[ce];ce++)_e.dispose();this.buttons_.length=0;let se;(se=this.workspace_.getPotentialVariableMap())==null||se.clear()}emptyRecycledBlocks(){for(let ee=0;ee<this.recycledBlocks.length;ee++)this.recycledBlocks[ee].dispose();this.recycledBlocks=[]}blockIsRecyclable_(ee){return!1}recycleBlock(ee){const se=ee.getRelativeToSurfaceXY();ee.moveBy(-se.x,-se.y),this.recycledBlocks.push(ee)}addBlockListeners_(ee,se,ce){this.listeners.push(Nt(ee,"pointerdown",null,this.blockMouseDown(se))),this.listeners.push(Nt(ce,"pointerdown",null,this.blockMouseDown(se))),this.listeners.push(Jt(ee,"pointerenter",se,()=>{this.targetWorkspace.isDragging()||se.addSelect()})),this.listeners.push(Jt(ee,"pointerleave",se,()=>{this.targetWorkspace.isDragging()||se.removeSelect()})),this.listeners.push(Jt(ce,"pointerenter",se,()=>{this.targetWorkspace.isDragging()||se.addSelect()})),this.listeners.push(Jt(ce,"pointerleave",se,()=>{this.targetWorkspace.isDragging()||se.removeSelect()}))}blockMouseDown(ee){return se=>{const ce=this.targetWorkspace.getGesture(se);ce&&(ce.setStartBlock(ee),ce.handleFlyoutStart(se,this))}}onMouseDown(ee){const se=this.targetWorkspace.getGesture(ee);se&&se.handleFlyoutStart(ee,this)}isBlockCreatable(ee){return ee.isEnabled()}createBlock(ee){let se=null;ne.disable$$module$build$src$core$events$utils();var ce=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{se=this.placeNewBlock(ee)}finally{ne.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),ee=eo(this.targetWorkspace,ce),Ke()){for(ne.setGroup$$module$build$src$core$events$utils(!0),ce=0;ce<ee.length;ce++){const _e=ee[ce];Ae(new(Le(it.VAR_CREATE))(_e))}Ae(new(Le(it.BLOCK_CREATE))(se))}return this.autoClose?this.hide():this.filterForCapacity(),se}initFlyoutButton_(ee,se,ce){const _e=ee.createDom();ee.moveTo(se,ce),ee.show(),this.listeners.push(Nt(_e,"pointerdown",this,this.onMouseDown)),this.buttons_.push(ee)}createRect_(ee,se,ce,_e,me){return se=lt(Ye.RECT,{"fill-opacity":0,x:se,y:ce,height:_e.height,width:_e.width}),se.tooltip=ee,Tr(se),this.workspace_.getCanvas().insertBefore(se,ee.getSvgRoot()),this.rectMap_.set(ee,se),this.mats[me]=se}moveRectToBlock_(ee,se){const ce=se.getHeightWidth();ee.setAttribute("width",String(ce.width)),ee.setAttribute("height",String(ce.height)),se=se.getRelativeToSurfaceXY(),ee.setAttribute("y",String(se.y)),ee.setAttribute("x",String(this.RTL?se.x-ce.width:se.x))}filterForCapacity(){const ee=this.workspace_.getTopBlocks(!1);for(let se=0,ce;ce=ee[se];se++)if(!this.permanentlyDisabled.includes(ce)){const _e=this.targetWorkspace.isCapacityAvailable(Ft(ce));for(;ce;)ce.setDisabledReason(!_e,Fm),ce=ce.getNextBlock()}}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(ee){var se=this.targetWorkspace;if(!ee.getSvgRoot())throw Error("oldBlock is not rendered");const ce=this.serializeBlock(ee);return se.setResizesEnabled(!1),se=es(ce,se),this.positionNewBlock(ee,se),se}serializeBlock(ee){return un(ee)}positionNewBlock(ee,se){const ce=this.targetWorkspace;var _e=ce.getOriginOffsetInPixels(),me=this.workspace_.getOriginOffsetInPixels();ee=ee.getRelativeToSurfaceXY(),ee.scale(this.workspace_.scale),me=yt.sum(me,ee),_e=yt.difference(me,_e),_e.scale(1/ce.scale),se.moveTo(new yt(_e.x,_e.y))}};Ra.FlyoutItemType=Yr;var Vh=class extends Ra{constructor(ee){super(ee)}setMetrics_(ee){if(this.isVisible()){var se=this.workspace_.getMetricsManager(),ce=se.getScrollMetrics(),_e=se.getViewMetrics();se=se.getAbsoluteMetrics(),typeof ee.y=="number"&&(this.workspace_.scrollY=-(ce.top+(ce.height-_e.height)*ee.y)),this.workspace_.translate(this.workspace_.scrollX+se.left,this.workspace_.scrollY+se.top)}}getX(){if(!this.isVisible())return 0;var ee=this.targetWorkspace.getMetricsManager();const se=ee.getAbsoluteMetrics(),ce=ee.getViewMetrics();return ee=ee.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===Gt.LEFT?ee.width:ce.width-this.width_:this.toolboxPosition_===Gt.LEFT?0:ce.width:this.toolboxPosition_===Gt.LEFT?0:ce.width+se.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var ee=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=ee.height,this.setBackgroundPath(this.width_-this.CORNER_RADIUS,ee.height-2*this.CORNER_RADIUS),ee=this.getX();var se=this.getY();this.positionAt_(this.width_,this.height_,ee,se)}}setBackgroundPath(ee,se){const ce=this.toolboxPosition_===Gt.RIGHT;var _e=ee+this.CORNER_RADIUS;_e=["M "+(ce?_e:0)+",0"],_e.push("h",ce?-ee:ee),_e.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,ce?0:1,ce?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),_e.push("v",Math.max(0,se)),_e.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,ce?0:1,ce?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),_e.push("h",ce?ee:-ee),_e.push("z"),this.svgBackground_.setAttribute("d",_e.join(" "))}scrollToStart(){let ee;(ee=this.workspace_.scrollbar)==null||ee.setY(0)}wheel_(ee){var se=Li(ee);if(se.y){const ce=this.workspace_.getMetricsManager(),_e=ce.getScrollMetrics();se=ce.getViewMetrics().top-_e.top+se.y;let me;(me=this.workspace_.scrollbar)==null||me.setY(se),so(this.workspace_),Un()}ee.preventDefault(),ee.stopPropagation()}layout_(ee,se){this.workspace_.scale=this.targetWorkspace.scale;var ce=this.MARGIN;const _e=this.RTL?ce:ce+this.tabWidth_;for(let De=0,dt;dt=ee[De];De++)if(dt.type==="block"){var me=dt.block;if(!me)continue;var be=me.getDescendants(!1);for(let ai=0,li;li=be[ai];ai++)li.isInFlyout=!0;be=me.getSvgRoot();const vt=me.getHeightWidth();var Ie=me.outputConnection?_e-this.tabWidth_:_e;me.moveBy(Ie,ce),Ie=this.createRect_(me,this.RTL?Ie-vt.width:Ie,ce,vt,De),this.addBlockListeners_(be,me,Ie),ce+=vt.height+se[De]}else dt.type==="button"&&(me=dt.button,this.initFlyoutButton_(me,_e,ce),ce+=me.height+se[De])}isDragTowardWorkspace(ee){ee=Math.atan2(ee.y,ee.x)/Math.PI*180;const se=this.dragAngleRange_;return ee<se&&ee>-se||ee<-180+se||ee>180-se}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const ee=this.svgGroup_.getBoundingClientRect(),se=ee.left;return this.toolboxPosition_===Gt.LEFT?new ri(-1e9,1e9,-1e9,se+ee.width):new ri(-1e9,1e9,se,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let ee=0;var se=this.workspace_.getTopBlocks(!1);for(let _e=0,me;me=se[_e];_e++){var ce=me.getHeightWidth().width;me.outputConnection&&(ce-=this.tabWidth_),ee=Math.max(ee,ce)}for(let _e=0,me;me=this.buttons_[_e];_e++)ee=Math.max(ee,me.width);if(ee+=1.5*this.MARGIN+this.tabWidth_,ee*=this.workspace_.scale,ee+=yi.scrollbarThickness,this.width_!==ee){for(let _e=0,me;me=se[_e];_e++){if(this.RTL){ce=me.getRelativeToSurfaceXY().x;let be=ee/this.workspace_.scale-this.MARGIN;me.outputConnection||(be-=this.tabWidth_),me.moveBy(be-ce,0)}this.rectMap_.has(me)&&this.moveRectToBlock_(this.rectMap_.get(me),me)}if(this.RTL)for(let _e=0,me;me=this.buttons_[_e];_e++)se=me.getPosition().y,me.moveTo(ee/this.workspace_.scale-me.width-this.MARGIN-this.tabWidth_,se);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Gt.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+ee,this.targetWorkspace.scrollY),this.width_=ee,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};Vh.registryName="verticalFlyout",re($t.FLYOUTS_VERTICAL_TOOLBOX,Vn,Vh);var _f=class extends Ra{constructor(ee){super(ee),this.horizontalLayout=!0}setMetrics_(ee){if(this.isVisible()){var se=this.workspace_.getMetricsManager(),ce=se.getScrollMetrics(),_e=se.getViewMetrics();se=se.getAbsoluteMetrics(),typeof ee.x=="number"&&(this.workspace_.scrollX=-(ce.left+(ce.width-_e.width)*ee.x)),this.workspace_.translate(this.workspace_.scrollX+se.left,this.workspace_.scrollY+se.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var ee=this.targetWorkspace.getMetricsManager();const se=ee.getAbsoluteMetrics(),ce=ee.getViewMetrics();ee=ee.getToolboxMetrics();const _e=this.toolboxPosition_===Gt.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?_e?ee.height:ce.height-this.height_:_e?0:ce.height:_e?0:ce.height+se.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var ee=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=ee.width,this.setBackgroundPath(ee.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),ee=this.getX();var se=this.getY();this.positionAt_(this.width_,this.height_,ee,se)}}setBackgroundPath(ee,se){const ce=this.toolboxPosition_===Gt.TOP,_e=["M 0,"+(ce?0:this.CORNER_RADIUS)];ce?(_e.push("h",ee+2*this.CORNER_RADIUS),_e.push("v",se),_e.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),_e.push("h",-ee),_e.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(_e.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),_e.push("h",ee),_e.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),_e.push("v",se),_e.push("h",-ee-2*this.CORNER_RADIUS)),_e.push("z"),this.svgBackground_.setAttribute("d",_e.join(" "))}scrollToStart(){let ee;(ee=this.workspace_.scrollbar)==null||ee.setX(this.RTL?1/0:0)}wheel_(ee){var se=Li(ee);if(se=se.x||se.y){const ce=this.workspace_.getMetricsManager(),_e=ce.getScrollMetrics();se=ce.getViewMetrics().left-_e.left+se;let me;(me=this.workspace_.scrollbar)==null||me.setX(se),so(this.workspace_),Un()}ee.preventDefault(),ee.stopPropagation()}layout_(ee,se){this.workspace_.scale=this.targetWorkspace.scale;const ce=this.MARGIN;let _e=ce+this.tabWidth_;this.RTL&&(ee=ee.reverse());for(let De=0,dt;dt=ee[De];De++)if(dt.type==="block"){var me=dt.block;if(me==null)continue;var be=me.getDescendants(!1);for(let ai=0,li;li=be[ai];ai++)li.isInFlyout=!0;be=me.getSvgRoot();const vt=me.getHeightWidth();var Ie=me.outputConnection?this.tabWidth_:0;Ie=this.RTL?_e+vt.width:_e-Ie,me.moveBy(Ie,ce),Ie=this.createRect_(me,Ie,ce,vt,De),_e+=vt.width+se[De],this.addBlockListeners_(be,me,Ie)}else dt.type==="button"&&(me=dt.button,this.initFlyoutButton_(me,_e,ce),_e+=me.width+se[De])}isDragTowardWorkspace(ee){ee=Math.atan2(ee.y,ee.x)/Math.PI*180;const se=this.dragAngleRange_;return ee<90+se&&ee>90-se||ee>-90-se&&ee<-90+se}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const ee=this.svgGroup_.getBoundingClientRect(),se=ee.top;return this.toolboxPosition_===Gt.TOP?new ri(-1e9,se+ee.height,-1e9,1e9):new ri(se,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let ee=0;const se=this.workspace_.getTopBlocks(!1);for(let _e=0,me;me=se[_e];_e++)ee=Math.max(ee,me.getHeightWidth().height);const ce=this.buttons_;for(let _e=0,me;me=ce[_e];_e++)ee=Math.max(ee,me.height);if(ee+=1.5*this.MARGIN,ee*=this.workspace_.scale,ee+=yi.scrollbarThickness,this.height_!==ee){for(let _e=0,me;me=se[_e];_e++)this.rectMap_.has(me)&&this.moveRectToBlock_(this.rectMap_.get(me),me);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Gt.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+ee),this.height_=ee,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};re($t.FLYOUTS_HORIZONTAL_TOOLBOX,Vn,_f);var Ho=class extends rn{constructor(ee,se,ce,_e,me){super(oi.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=Ho.dropdownCreate,this.defaultVariableName=typeof ee=="string"?ee:"",this.size_=new Xt(0,0),ee!==oi.SKIP_SETUP&&(me?this.configure_(me):this.setTypes(ce,_e),se&&this.setValidator(se))}configure_(ee){super.configure_(ee),this.setTypes(ee.variableTypes,ee.defaultType)}initModel(){var ee=this.getSourceBlock();if(!ee)throw new Si;this.variable||(ee=ne.getOrCreateVariablePackage$$module$build$src$core$variables(ee.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(ee.getId()))}shouldAddBorderRect_(){const ee=this.getSourceBlock();if(!ee)throw new Si;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||ee.type!=="variables_get")}fromXml(ee){var se=this.getSourceBlock();if(!se)throw new Si;const ce=ee.getAttribute("id"),_e=ee.textContent,me=ee.getAttribute("variabletype")||ee.getAttribute("variableType")||"";if(se=ne.getOrCreateVariablePackage$$module$build$src$core$variables(se.workspace,ce,_e,me),me!==null&&me!==se.type)throw Error("Serialized variable type with id '"+se.getId()+"' had type "+se.type+", and does not match variable field that references it: "+Hn(ee)+".");this.setValue(se.getId())}toXml(ee){return this.initModel(),ee.id=this.variable.getId(),ee.textContent=this.variable.name,this.variable.type&&ee.setAttribute("variabletype",this.variable.type),ee}saveState(ee){var se=this.saveLegacyState(Ho);return se!==null||(this.initModel(),se={id:this.variable.getId()},ee&&(se.name=this.variable.name,se.type=this.variable.type)),se}loadState(ee){const se=this.getSourceBlock();if(!se)throw new Si;this.loadLegacyState(Ho,ee)||(ee=ne.getOrCreateVariablePackage$$module$build$src$core$variables(se.workspace,ee.id||null,ee.name,ee.type||""),this.setValue(ee.getId()))}setSourceBlock(ee){if(ee.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(ee)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.name:""}getVariable(){return this.variable}getValidator(){return this.variable?this.validator_:null}doClassValidation_(ee){if(ee===null)return null;var se=this.getSourceBlock();if(!se)throw new Si;return se=ne.getVariable$$module$build$src$core$variables(se.workspace,ee),se?(se=se.type,this.typeIsAllowed(se)?ee:(console.warn("Variable type doesn't match this field!  Type was "+se),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+ee),null)}doValueUpdate_(ee){const se=this.getSourceBlock();if(!se)throw new Si;this.variable=ne.getVariable$$module$build$src$core$variables(se.workspace,ee),super.doValueUpdate_(ee)}typeIsAllowed(ee){const se=this.getVariableTypes();if(!se)return!0;for(let ce=0;ce<se.length;ce++)if(ee===se[ce])return!0;return!1}getVariableTypes(){var ee=this.variableTypes;if(ee===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(ee=ee||[""],ee.length===0)throw ee=this.getText(),Error("'variableTypes' of field variable "+ee+" was an empty list");return ee}setTypes(ee=null,se=""){if(Array.isArray(ee)){let ce=!1;for(let _e=0;_e<ee.length;_e++)ee[_e]===se&&(ce=!0);if(!ce)throw Error("Invalid default type '"+se+"' in the definition of a FieldVariable")}else if(ee!==null)throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType=se,this.variableTypes=ee}refreshVariableName(){this.forceRerender()}onItemSelected_(ee,se){if(ee=se.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(ee===Oh){ne.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(ee===Rh){this.sourceBlock_.workspace.deleteVariableById(this.variable.getId());return}}this.setValue(ee)}referencesVariables(){return!0}static fromJson(ee){return new this(bi(ee.variable),void 0,void 0,void 0,ee)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const ee=this.getText();let se=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var ce=this.getVariableTypes(),_e=0;_e<ce.length;_e++){const me=this.sourceBlock_.workspace.getVariablesOfType(ce[_e]);se=se.concat(me)}for(se.sort(So.compareByName),ce=[],_e=0;_e<se.length;_e++)ce[_e]=[se[_e].name,se[_e].getId()];return ce.push([ne.Msg$$module$build$src$core$msg.RENAME_VARIABLE,Oh]),ne.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&ce.push([ne.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",ee),Rh]),ce}};Gn("field_variable",Ho);var zh=class extends va{constructor(ee,se,ce,_e,me,be){super(oi.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,ee!==oi.SKIP_SETUP&&(be?this.configure_(be):this.setConstraints(se,ce,_e),this.setValue(ee),me&&this.setValidator(me))}configure_(ee){super.configure_(ee),this.setMinInternal(ee.min),this.setMaxInternal(ee.max),this.setPrecisionInternal(ee.precision)}setConstraints(ee,se,ce){this.setMinInternal(ee),this.setMaxInternal(se),this.setPrecisionInternal(ce),this.setValue(this.getValue())}setMin(ee){this.setMinInternal(ee),this.setValue(this.getValue())}setMinInternal(ee){ee==null?this.min_=-1/0:(ee=Number(ee),isNaN(ee)||(this.min_=ee))}getMin(){return this.min_}setMax(ee){this.setMaxInternal(ee),this.setValue(this.getValue())}setMaxInternal(ee){ee==null?this.max_=1/0:(ee=Number(ee),isNaN(ee)||(this.max_=ee))}getMax(){return this.max_}setPrecision(ee){this.setPrecisionInternal(ee),this.setValue(this.getValue())}setPrecisionInternal(ee){this.precision_=Number(ee)||0;let se=String(this.precision_);se.includes("e")&&(se=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const ce=se.indexOf(".");this.decimalPlaces=ce===-1?ee?0:null:se.length-ce-1}getPrecision(){return this.precision_}doClassValidation_(ee){return ee===null||(ee=`${ee}`.replace(/O/gi,"0"),ee=ee.replace(/,/g,""),ee=ee.replace(/infinity/i,"Infinity"),ee=Number(ee||0),isNaN(ee))?null:(ee=Math.min(Math.max(ee,this.min_),this.max_),this.precision_&&isFinite(ee)&&(ee=Math.round(ee/this.precision_)*this.precision_),this.decimalPlaces!==null&&(ee=Number(ee.toFixed(this.decimalPlaces))),ee)}widgetCreate_(){const ee=super.widgetCreate_();return-1/0<this.min_&&(ee.min=`${this.min_}`,Ri(ee,Mi.VALUEMIN,this.min_)),1/0>this.max_&&(ee.max=`${this.max_}`,Ri(ee,Mi.VALUEMAX,this.max_)),ee}static fromJson(ee){return new this(ee.value,void 0,void 0,void 0,void 0,ee)}};Gn("field_number",zh),zh.prototype.DEFAULT_VALUE=0;var pf=class extends or{constructor(ee,se,ce){super(String(ee??""),se,ce),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(ee){return new this(bi(ee.text),void 0,ee)}};Gn("field_label_serializable",pf);var ur=class extends oi{constructor(ee,se,ce){super(oi.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.value_=this.value_,this.checkChar=ur.CHECK_CHAR,ee!==oi.SKIP_SETUP&&(ce&&this.configure_(ce),this.setValue(ee),se&&this.setValidator(se))}configure_(ee){super.configure_(ee),ee.checkCharacter&&(this.checkChar=ee.checkCharacter)}saveState(){const ee=this.saveLegacyState(ur);return ee!==null?ee:this.getValueBoolean()}initView(){super.initView();const ee=this.getTextElement();Ct(ee,"blocklyCheckbox"),ee.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(ee){this.checkChar=ee||ur.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(ee){return ee===!0||ee==="TRUE"?"TRUE":ee===!1||ee==="FALSE"?"FALSE":null}doValueUpdate_(ee){this.value_=this.convertValueToBool(ee),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool(this.value_))}convertValueToBool(ee){return typeof ee=="string"?ee==="TRUE":!!ee}static fromJson(ee){return new this(ee.checked,void 0,ee)}};ur.CHECK_CHAR="✓",Gn("field_checkbox",ur),ur.prototype.DEFAULT_VALUE=!1;var gf=class{constructor(ee,se){this.draggable=ee,this.workspace=se,this.dragTarget=null,this.startLoc=ee.getRelativeToSurfaceXY()}onDragStart(ee){this.draggable.startDrag(ee)}onDrag(ee,se){this.moveDraggable(ee,se),se=this.getRoot(this.draggable),Tn(se)&&se.setDeleteStyle(this.wouldDeleteDraggable(ee,se)),this.updateDragTarget(ee)}updateDragTarget(ee){ee=this.workspace.getDragTarget(ee);const se=this.getRoot(this.draggable);if(this.dragTarget!==ee){let ce;(ce=this.dragTarget)==null||ce.onDragExit(se),ee==null||ee.onDragEnter(se)}ee==null||ee.onDragOver(se),this.dragTarget=ee}moveDraggable(ee,se){se=this.pixelsToWorkspaceUnits(se),se=yt.sum(this.startLoc,se),this.draggable.drag(se,ee)}wouldDeleteDraggable(ee,se){return(ee=this.workspace.getDragTarget(ee))&&this.workspace.getComponentManager().hasCapability(ee.id,ui.Capability.DELETE_AREA)?ee.wouldDelete(se):!1}onDragEnd(ee){const se=ne.getGroup$$module$build$src$core$events$utils();var ce=this.workspace.getDragTarget(ee);const _e=this.getRoot(this.draggable);if(ce){let me;(me=this.dragTarget)==null||me.onDrop(_e)}this.shouldReturnToStart(ee,_e)&&this.draggable.revertDrag(),(ce=Tn(_e)&&this.wouldDeleteDraggable(ee,_e))&&this.draggable instanceof vn&&vl(this.draggable.getRootBlock()),this.draggable.endDrag(ee),ce&&Tn(_e)&&(ee=ne.getGroup$$module$build$src$core$events$utils(),ne.setGroup$$module$build$src$core$events$utils(se),_e.dispose(),ne.setGroup$$module$build$src$core$events$utils(ee))}getRoot(ee){return ee instanceof vn?ee.getRootBlock():ee}shouldReturnToStart(ee,se){return(ee=this.workspace.getDragTarget(ee))?ee.shouldPreventMove(se):!1}pixelsToWorkspaceUnits(ee){return ee=new yt(ee.x/this.workspace.scale,ee.y/this.workspace.scale),this.workspace.isMutator&&ee.scale(1/this.workspace.options.parentWorkspace.scale),ee}};re($t.BLOCK_DRAGGER,Vn,gf);var Go={};Go.BlockDragStrategy=Wg,Go.BubbleDragStrategy=kg,Go.CommentDragStrategy=Tg,Go.Dragger=gf;var Xh=class extends An{constructor(ee,se,ce){super(ee?ee.workspace.id:void 0),this.type=it.BLOCK_DRAG,ee&&(this.blockId=ee.id,this.isStart=se,this.blocks=ce)}toJson(){const ee=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return ee.isStart=this.isStart,ee.blockId=this.blockId,ee.blocks=this.blocks,ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new Xh),se.isStart=ee.isStart,se.blockId=ee.blockId,se.blocks=ee.blocks,se}};re($t.EVENT,it.BLOCK_DRAG,Xh);var jh=class extends Qs{constructor(ee,se,ce,_e){super(ee),this.type=it.BLOCK_FIELD_INTERMEDIATE_CHANGE,this.recordUndo=!1,ee&&(this.name=se,this.oldValue=ce,this.newValue=_e)}toJson(){const ee=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return ee.name=this.name,ee.oldValue=this.oldValue,ee.newValue=this.newValue,ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new jh),se.name=ee.name,se.oldValue=ee.oldValue,se.newValue=ee.newValue,se}isNull(){return this.oldValue===this.newValue}run(ee){var se=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(se=se.getBlockById(this.blockId),!se)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");ee=ee?this.newValue:this.oldValue,(se=se.getField(this.name))?se.setValue(ee):console.warn("Can't set non-existent field: "+this.name)}};re($t.EVENT,it.BLOCK_FIELD_INTERMEDIATE_CHANGE,jh);var Yh=class extends Qs{constructor(ee){super(ee),this.type=it.BLOCK_MOVE,ee&&(ee.isShadow()&&(this.recordUndo=!1),ee=this.currentLocation(),this.oldParentId=ee.parentId,this.oldInputName=ee.inputName,this.oldCoordinate=ee.coordinate)}toJson(){const ee=super.toJson();return ee.oldParentId=this.oldParentId,ee.oldInputName=this.oldInputName,this.oldCoordinate&&(ee.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),ee.newParentId=this.newParentId,ee.newInputName=this.newInputName,this.newCoordinate&&(ee.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(ee.reason=this.reason),this.recordUndo||(ee.recordUndo=this.recordUndo),ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new Yh),se.oldParentId=ee.oldParentId,se.oldInputName=ee.oldInputName,ee.oldCoordinate&&(ce=ee.oldCoordinate.split(","),se.oldCoordinate=new yt(Number(ce[0]),Number(ce[1]))),se.newParentId=ee.newParentId,se.newInputName=ee.newInputName,ee.newCoordinate&&(ce=ee.newCoordinate.split(","),se.newCoordinate=new yt(Number(ce[0]),Number(ce[1]))),ee.reason!==void 0&&(se.reason=ee.reason),ee.recordUndo!==void 0&&(se.recordUndo=ee.recordUndo),se}recordNew(){const ee=this.currentLocation();this.newParentId=ee.parentId,this.newInputName=ee.inputName,this.newCoordinate=ee.coordinate}setReason(ee){this.reason=ee}currentLocation(){var ee=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var se=ee.getBlockById(this.blockId);if(!se)throw Error("The block associated with the block move event could not be found");ee={};const ce=se.getParent();return ce?(ee.parentId=ce.id,(se=ce.getInputWithBlock(se))&&(ee.inputName=se.name)):ee.coordinate=se.getRelativeToSurfaceXY(),ee}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&yt.equals(this.oldCoordinate,this.newCoordinate)}run(ee){var se=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var ce=se.getBlockById(this.blockId);if(ce){var _e=ee?this.newParentId:this.oldParentId,me=ee?this.newInputName:this.oldInputName;if(ee=ee?this.newCoordinate:this.oldCoordinate,_e){var be=se.getBlockById(_e);if(!be){console.warn("Can't connect to non-existent block: "+_e);return}}if(ce.getParent()&&ce.unplug(),ee)me=ce.getRelativeToSurfaceXY(),ce.moveBy(ee.x-me.x,ee.y-me.y,this.reason);else{se=ce.outputConnection,(!se||ce.previousConnection&&ce.previousConnection.isConnected())&&(se=ce.previousConnection);let Ie,De;ce=(De=se)==null?void 0:De.type,me?(ce=be.getInput(me))&&(Ie=ce.connection):ce===Rt.PREVIOUS_STATEMENT&&(Ie=be.nextConnection),Ie&&se?se.connect(Ie):console.warn("Can't connect to non-existent input: "+me)}}else console.warn("Can't move non-existent block: "+this.blockId)}};re($t.EVENT,it.BLOCK_MOVE,Yh);var Kh=class extends An{constructor(ee,se,ce){super(ee?ee.workspace.id:void 0),this.type=it.BUBBLE_OPEN,ee&&(this.blockId=ee.id,this.isOpen=se,this.bubbleType=ce)}toJson(){const ee=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return ee.isOpen=this.isOpen,ee.bubbleType=this.bubbleType,ee.blockId=this.blockId||"",ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new Kh),se.isOpen=ee.isOpen,se.bubbleType=ee.bubbleType,se.blockId=ee.blockId,se}},qh;(function(ee){ee.MUTATOR="mutator",ee.COMMENT="comment",ee.WARNING="warning"})(qh||(qh={})),re($t.EVENT,it.BUBBLE_OPEN,Kh);var qn=class extends Ir{constructor(ee){super(),this.isBlank=!ee,ee&&(this.commentId=ee.id,this.workspaceId=ee.workspace.id,this.group=ne.getGroup$$module$build$src$core$events$utils(),this.recordUndo=Me())}toJson(){const ee=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return ee.commentId=this.commentId,ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new qn),se.commentId=ee.commentId,se}static CommentCreateDeleteHelper(ee,se){const ce=ee.getEventWorkspace_();if(se){if(!ee.json)throw Error("Encountered a comment event without proper json");Bs(ee.json,ce)}else{if(!ee.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(se=ce.getCommentById(ee.commentId))?se.dispose():console.warn("Can't delete non-existent comment: "+ee.commentId)}}},Jh=class extends qn{constructor(ee,se,ce){super(ee),this.type=it.COMMENT_CHANGE,ee&&(this.oldContents_=typeof se>"u"?"":se,this.newContents_=typeof ce>"u"?"":ce)}toJson(){const ee=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return ee.oldContents=this.oldContents_,ee.newContents=this.newContents_,ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new Jh),se.oldContents_=ee.oldContents,se.newContents_=ee.newContents,se}isNull(){return this.oldContents_===this.newContents_}run(ee){var se=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(se=se.getCommentById(this.commentId)){var ce=ee?this.newContents_:this.oldContents_;if(ce===void 0)throw Error(ee?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");se.setText(ce)}else console.warn("Can't change non-existent comment: "+this.commentId)}};re($t.EVENT,it.COMMENT_CHANGE,Jh);var Zh=class extends qn{constructor(ee,se){super(ee),this.newCollapsed=se,this.type=it.COMMENT_COLLAPSE}toJson(){const ee=super.toJson();if(this.newCollapsed===void 0)throw Error("The new collapse value undefined. Either call recordNew, or call fromJson");return ee.newCollapsed=this.newCollapsed,ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new Zh),se.newCollapsed=ee.newCollapsed,se}run(ee){var se=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(se=se.getCommentById(this.commentId))?se.setCollapsed(ee?!!this.newCollapsed:!this.newCollapsed):console.warn("Can't collapse or uncollapse non-existent comment: "+this.commentId)}};re($t.EVENT,it.COMMENT_COLLAPSE,Zh);var Qh=class extends qn{constructor(ee){super(ee),this.type=it.COMMENT_CREATE,ee&&(this.xml=lo(ee),this.json=Rn(ee,{addCoordinates:!0}))}toJson(){const ee=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return ee.xml=Hn(this.xml),ee.json=this.json,ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new Qh),se.xml=ne.textToDom$$module$build$src$core$utils$xml(ee.xml),se.json=ee.json,se}run(ee){qn.CommentCreateDeleteHelper(this,ee)}};re($t.EVENT,it.COMMENT_CREATE,Qh);var ed=class extends qn{constructor(ee){super(ee),this.type=it.COMMENT_DELETE,ee&&(this.xml=lo(ee),this.json=Rn(ee,{addCoordinates:!0}))}run(ee){qn.CommentCreateDeleteHelper(this,!ee)}toJson(){const ee=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return ee.xml=Hn(this.xml),ee.json=this.json,ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new ed),se.xml=ne.textToDom$$module$build$src$core$utils$xml(ee.xml),se.json=ee.json,se}};re($t.EVENT,it.COMMENT_DELETE,ed);var td=class extends An{constructor(ee,se){super(ee?ee.workspace.id:void 0),this.type=it.COMMENT_DRAG,ee&&(this.commentId=ee.id,this.isStart=se)}toJson(){const ee=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.commentId===void 0)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return ee.isStart=this.isStart,ee.commentId=this.commentId,ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new td),se.isStart=ee.isStart,se.commentId=ee.commentId,se}};re($t.EVENT,it.COMMENT_DRAG,td);var nd=class extends qn{constructor(ee){super(ee),this.type=it.COMMENT_MOVE,ee&&(this.comment_=ee,this.oldCoordinate_=ee.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setReason(ee){this.reason=ee}setOldCoordinate(ee){this.oldCoordinate_=ee}toJson(){const ee=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return ee.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,ee.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new nd),ce=ee.oldCoordinate.split(","),se.oldCoordinate_=new yt(Number(ce[0]),Number(ce[1])),ce=ee.newCoordinate.split(","),se.newCoordinate_=new yt(Number(ce[0]),Number(ce[1])),se}isNull(){return yt.equals(this.oldCoordinate_,this.newCoordinate_)}run(ee){var se=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(se=se.getCommentById(this.commentId)){if(ee=ee?this.newCoordinate_:this.oldCoordinate_,!ee)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");se.moveTo(ee)}else console.warn("Can't move non-existent comment: "+this.commentId)}};re($t.EVENT,it.COMMENT_MOVE,nd);var sd=class extends qn{constructor(ee){super(ee),this.type=it.COMMENT_RESIZE,ee&&(this.oldSize=ee.getSize())}recordCurrentSizeAsNewSize(){if(this.newSize)throw Error("Tried to record the new size of a comment on the same event twice.");var ee=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(ee=ee.getCommentById(this.commentId),!ee)throw Error("The comment associated with the comment resize event could not be found");this.newSize=ee.getSize()}toJson(){const ee=super.toJson();if(!this.oldSize)throw Error("The old comment size is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newSize)throw Error("The new comment size is undefined. Either call recordCurrentSizeAsNewSize, or call fromJson");return ee.oldWidth=Math.round(this.oldSize.width),ee.oldHeight=Math.round(this.oldSize.height),ee.newWidth=Math.round(this.newSize.width),ee.newHeight=Math.round(this.newSize.height),ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new sd),se.oldSize=new Xt(ee.oldWidth,ee.oldHeight),se.newSize=new Xt(ee.newWidth,ee.newHeight),se}isNull(){return Xt.equals(this.oldSize,this.newSize)}run(ee){var se=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(se=se.getCommentById(this.commentId)){if(ee=ee?this.newSize:this.oldSize,!ee)throw Error("Either oldSize or newSize is undefined. Either pass a comment to the constructor and call recordCurrentSizeAsNewSize, or call fromJson");se.setSize(ee)}else console.warn("Can't resize non-existent comment: "+this.commentId)}};re($t.EVENT,it.COMMENT_RESIZE,sd);var rd=class extends An{constructor(ee,se,ce){super(ce),this.type=it.TOOLBOX_ITEM_SELECT,this.oldItem=ee??void 0,this.newItem=se??void 0}toJson(){const ee=super.toJson();return ee.oldItem=this.oldItem,ee.newItem=this.newItem,ee}static fromJson(ee,se,ce){return se=super.fromJson(ee,se,ce??new rd),se.oldItem=ee.oldItem,se.newItem=ee.newItem,se}};re($t.EVENT,it.TOOLBOX_ITEM_SELECT,rd);var ff=class extends Ir{constructor(ee){super(),this.isBlank=!0,this.recordUndo=!1,this.type=it.FINISHED_LOADING,this.isBlank=!!ee,ee&&(this.workspaceId=ee.id)}};re($t.EVENT,it.FINISHED_LOADING,ff);var mf,$f,Tf,bf,Ef,yf,Sf,Cf,kf,vf,If,Of,Rf,wf,Af,Lf,Nf,Mf,xf,Df,Pf,Bf,Ff,Uf,Hf,kt;ne.BLOCK_CHANGE$$module$build$src$core$events$events=it.BLOCK_CHANGE,ne.BLOCK_CREATE$$module$build$src$core$events$events=it.BLOCK_CREATE,ne.BLOCK_DELETE$$module$build$src$core$events$events=it.BLOCK_DELETE,mf=it.BLOCK_DRAG,ne.BLOCK_MOVE$$module$build$src$core$events$events=it.BLOCK_MOVE,$f=it.BLOCK_FIELD_INTERMEDIATE_CHANGE,Tf=it.BUBBLE_OPEN,bf=it.BLOCK_CHANGE,Ef=it.CLICK,yf=it.COMMENT_CHANGE,Sf=it.COMMENT_CREATE,Cf=it.COMMENT_DELETE,kf=it.COMMENT_MOVE,vf=it.COMMENT_RESIZE,If=it.COMMENT_DRAG,Of=it.BLOCK_CREATE,Rf=it.BLOCK_DELETE,wf=it.FINISHED_LOADING,Af=it.MARKER_MOVE,Lf=it.BLOCK_MOVE,Nf=it.SELECTED,Mf=it.THEME_CHANGE,xf=it.TOOLBOX_ITEM_SELECT,Df=it.TRASHCAN_OPEN,Pf=it.UI,Bf=it.VAR_CREATE,Ff=it.VAR_DELETE,Uf=it.VAR_RENAME,Hf=it.VIEWPORT_CHANGE,kt={},kt.Abstract=Ir,kt.BLOCK_CHANGE=ne.BLOCK_CHANGE$$module$build$src$core$events$events,kt.BLOCK_CREATE=ne.BLOCK_CREATE$$module$build$src$core$events$events,kt.BLOCK_DELETE=ne.BLOCK_DELETE$$module$build$src$core$events$events,kt.BLOCK_DRAG=mf,kt.BLOCK_FIELD_INTERMEDIATE_CHANGE=$f,kt.BLOCK_MOVE=ne.BLOCK_MOVE$$module$build$src$core$events$events,kt.BUBBLE_OPEN=Tf,kt.BUMP_EVENTS=mp,kt.BlockBase=Qs,kt.BlockChange=er,kt.BlockCreate=hh,kt.BlockDelete=Ch,kt.BlockDrag=Xh,kt.BlockFieldIntermediateChange=jh,kt.BlockMove=Yh,kt.BubbleOpen=Kh,kt.BubbleType=qh,kt.CHANGE=bf,kt.CLICK=Ef,kt.COMMENT_CHANGE=yf,kt.COMMENT_CREATE=Sf,kt.COMMENT_DELETE=Cf,kt.COMMENT_DRAG=If,kt.COMMENT_MOVE=kf,kt.COMMENT_RESIZE=vf,kt.CREATE=Of,kt.Click=Ru,kt.ClickTarget=wu,kt.CommentBase=qn,kt.CommentChange=Jh,kt.CommentCollapse=Zh,kt.CommentCreate=Qh,kt.CommentDelete=ed,kt.CommentDrag=td,kt.CommentMove=nd,kt.CommentResize=sd,kt.DELETE=Rf,kt.FINISHED_LOADING=wf,kt.FinishedLoading=ff,kt.MARKER_MOVE=Af,kt.MOVE=Lf,kt.MarkerMove=kh,kt.SELECTED=Nf,kt.Selected=Nh,kt.THEME_CHANGE=Mf,kt.TOOLBOX_ITEM_SELECT=xf,kt.TRASHCAN_OPEN=Df,kt.ThemeChange=dh,kt.ToolboxItemSelect=rd,kt.TrashcanOpen=xh,kt.UI=Pf,kt.UiBase=An,kt.VAR_CREATE=Bf,kt.VAR_DELETE=Ff,kt.VAR_RENAME=Uf,kt.VIEWPORT_CHANGE=Hf,kt.VarBase=yo,kt.VarCreate=qu,kt.VarDelete=wh,kt.VarRename=Ah,kt.ViewportChange=_h,kt.clearPendingUndo=rt,kt.disable=ne.disable$$module$build$src$core$events$utils,kt.disableOrphans=je,kt.enable=ne.enable$$module$build$src$core$events$utils,kt.filter=_t,kt.fire=Ae,kt.fromJson=ct,kt.get=Le,kt.getDescendantIds=qe,kt.getGroup=ne.getGroup$$module$build$src$core$events$utils,kt.getRecordUndo=Me,kt.isEnabled=Ke,kt.setGroup=ne.setGroup$$module$build$src$core$events$utils,kt.setRecordUndo=ne.setRecordUndo$$module$build$src$core$events$utils;var Pn={};Pn.BottomRow=nf,Pn.ConstantProvider=ef,Pn.Drawer=tf,Pn.MarkerSvg=lf,Pn.PathObject=af,Pn.RenderInfo=of,Pn.Renderer=Wh,Pn.RightConnectionShape=sf,Pn.StatementInput=Oa,Pn.TopRow=rf,ku();var xi={};xi.registerCleanup=cu,xi.registerCollapse=hu,xi.registerCollapseExpandBlock=$u,xi.registerComment=fu,xi.registerCommentCreate=Cu,xi.registerCommentDelete=yu,xi.registerCommentDuplicate=Su,xi.registerCommentOptions=hp,xi.registerDefaultOptions=ku,xi.registerDelete=bu,xi.registerDeleteAll=pu,xi.registerDisable=Tu,xi.registerDuplicate=gu,xi.registerExpand=du,xi.registerHelp=Eu,xi.registerInline=mu,xi.registerRedo=au,xi.registerUndo=lu;var wa={};wa.CommentView=Eg,wa.RenderedWorkspaceComment=aa,wa.WorkspaceComment=la;var Wo={};Wo.Bubble=ni,Wo.MiniWorkspaceBubble=us,Wo.TextBubble=Ag,Wo.TextInputBubble=vg;var Gf=class extends ma{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(ee){return super.getCSS_(ee).concat([`${ee} .blocklyInsertionMarker>.blocklyPathLight,`,`${ee} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},Wf=class{constructor(ee){this.inlineSteps_=this.steps_="",this.info_=ee,this.RTL_=this.info_.RTL,ee=ee.getRenderer(),this.constants_=ee.getConstants(),this.highlightConstants_=ee.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(ee){this.steps_+=ci(ee.xPos,this.info_.startY);for(let se=0,ce;ce=ee.elements[se];se++)He.isLeftSquareCorner(ce)?this.steps_+=this.highlightConstants_.START_POINT:He.isLeftRoundedCorner(ce)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):He.isPreviousConnection(ce)?this.steps_+=this.notchPaths_.pathLeft:He.isHat(ce)?this.steps_+=this.startPaths_.path(this.RTL_):He.isSpacer(ce)&&ce.width!==0&&(this.steps_+=wt("H",ce.xPos+ce.width-this.highlightOffset));this.steps_+=wt("H",ee.xPos+ee.width-this.highlightOffset)}drawJaggedEdge_(ee){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+wt("v",ee.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(ee){const se=ee.getLastInput();if(this.RTL_){const ce=ee.height-se.connectionHeight;this.steps_+=Ni(se.xPos+se.width-this.highlightOffset,ee.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+wt("v",ce)}else this.steps_+=Ni(se.xPos+se.width,ee.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(ee){const se=ee.getLastInput();if(se)if(this.RTL_){const ce=ee.height-2*this.insideCornerPaths_.height;this.steps_+=Ni(se.xPos,ee.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+wt("v",ce)+this.insideCornerPaths_.pathBottom(this.RTL_)+Wn(ee.width-se.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=Ni(se.xPos,ee.yPos+ee.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+Wn(ee.width-se.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(ee){const se=ee.xPos+ee.width-this.highlightOffset;ee instanceof yh&&ee.followsStatement&&(this.steps_+=wt("H",se)),this.RTL_&&(this.steps_+=wt("H",se),ee.height>this.highlightOffset&&(this.steps_+=wt("V",ee.yPos+ee.height-this.highlightOffset)))}drawBottomRow(ee){if(this.RTL_)this.steps_+=wt("V",ee.baseline-this.highlightOffset);else{const se=this.info_.bottomRow.elements[0];He.isLeftSquareCorner(se)?this.steps_+=Ni(ee.xPos+this.highlightOffset,ee.baseline-this.highlightOffset):He.isLeftRoundedCorner(se)&&(this.steps_+=Ni(ee.xPos,ee.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var ee=this.info_.outputConnection;ee&&(ee=ee.connectionOffsetY+ee.height,this.RTL_?this.steps_+=Ni(this.info_.startX,ee):(this.steps_+=Ni(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=wt("V",ee)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(ee=this.info_.topRow,He.isLeftRoundedCorner(ee.elements[0])?this.steps_+=wt("V",this.outsideCornerPaths_.height):this.steps_+=wt("V",ee.capline+this.highlightOffset))}drawInlineInput(ee){const se=this.highlightOffset,ce=ee.xPos+ee.connectionWidth;var _e=ee.centerline-ee.height/2;const me=ee.width-ee.connectionWidth,be=_e+se;this.RTL_?(_e=ee.connectionOffsetY-se,ee=ee.height-(ee.connectionOffsetY+ee.connectionHeight)+se,this.inlineSteps_+=Ni(ce-se,be)+wt("v",_e)+this.puzzleTabPaths_.pathDown(this.RTL_)+wt("v",ee)+wt("h",me)):this.inlineSteps_+=Ni(ee.xPos+ee.width+se,be)+wt("v",ee.height)+wt("h",-me)+Ni(ce,_e+ee.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},Vf=class extends $a{constructor(ee,se){super(ee,se),this.highlighter_=new Wf(se)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const ee=this.block_.pathObject;ee.setPath(this.outlinePath_+`
`+this.inlinePath_),ee.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&ee.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(ee){this.highlighter_.drawJaggedEdge_(ee),super.drawJaggedEdge_(ee)}drawValueInput_(ee){this.highlighter_.drawValueInput(ee),super.drawValueInput_(ee)}drawStatementInput_(ee){this.highlighter_.drawStatementInput(ee),super.drawStatementInput_(ee)}drawRightSideRow_(ee){this.highlighter_.drawRightSideRow(ee),this.outlinePath_+=wt("H",ee.xPos+ee.width)+wt("V",ee.yPos+ee.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(ee){this.highlighter_.drawInlineInput(ee),super.drawInlineInput_(ee)}positionInlineInputConnection_(ee){const se=ee.centerline-ee.height/2;if(ee.connectionModel){let ce=ee.xPos+ee.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(ce*=-1),ee.connectionModel.setOffsetInBlock(ce,se+ee.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(ee){const se=ee.getLastInput();if(se!=null&&se.connectionModel){let ce=ee.xPos+ee.statementEdge+se.notchOffset;ce=this.info_.RTL?-1*ce:ce+this.constants_.DARK_PATH_OFFSET,se.connectionModel.setOffsetInBlock(ce,ee.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(ee){const se=ee.getLastInput();if(se&&se.connectionModel){let ce=ee.xPos+ee.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(ce*=-1),se.connectionModel.setOffsetInBlock(ce,ee.yPos)}}positionNextConnection_(){const ee=this.info_.bottomRow;if(ee.connection){const se=ee.connection,ce=se.xPos;se.connectionModel.setOffsetInBlock((this.info_.RTL?-ce:ce)+this.constants_.DARK_PATH_OFFSET/2,ee.baseline+this.constants_.DARK_PATH_OFFSET)}}},zf=class{constructor(ee){this.OFFSET=.5,this.constantProvider=ee,this.START_POINT=ci(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const ee=this.constantProvider.CORNER_RADIUS,se=this.OFFSET,ce=(1-Math.SQRT1_2)*(ee+se)-se,_e=ci(ce,ce)+Ei("a","0 0,0",ee,Mt(-ce-se,ee-ce)),me=Ei("a","0 0,0",ee+se,Mt(ee+se,ee+se)),be=ci(ce,-ce)+Ei("a","0 0,0",ee+se,Mt(ee-ce,ce+se));return{width:ee+se,height:ee,pathTop(Ie){return Ie?_e:""},pathBottom(Ie){return Ie?me:be}}}makeOutsideCorner(){const ee=this.constantProvider.CORNER_RADIUS,se=this.OFFSET,ce=(1-Math.SQRT1_2)*(ee-se)+se,_e=ci(ce,ce)+Ei("a","0 0,1",ee-se,Mt(ee-ce,-ce+se)),me=ci(se,ee)+Ei("a","0 0,1",ee-se,Mt(ee,-ee+se)),be=-ce,Ie=ci(ce,be)+Ei("a","0 0,1",ee-se,Mt(-ce+se,-be-ee));return{height:ee,topLeft(De){return De?_e:me},bottomLeft(){return Ie}}}makePuzzleTab(){const ee=this.constantProvider.TAB_WIDTH,se=this.constantProvider.TAB_HEIGHT,ce=ci(-2,-se+3.4)+Wn(-.45*ee,-2.1),_e=wt("v",2.5)+ci(.97*-ee,2.5)+nn("q",[Mt(.05*-ee,10),Mt(.3*ee,9.5)])+ci(.67*ee,-1.9)+wt("v",2.5),me=wt("v",-1.5)+ci(-.92*ee,-.5)+nn("q",[Mt(-.19*ee,-5.5),Mt(0,-11)])+ci(.92*ee,1),be=ci(-5,se-.7)+Wn(.46*ee,-2.1);return{width:ee,height:se,pathUp(Ie){return Ie?ce:me},pathDown(Ie){return Ie?_e:be}}}makeNotch(){return{pathLeft:wt("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:Wn(5.1,2.6)+ci(-10.2,6.8)+Wn(5.1,2.6),height:12,width:10.2}}makeStartHat(){const ee=this.constantProvider.START_HAT.height,se=ci(25,-8.7)+nn("c",[Mt(29.7,-6.2),Mt(57.2,-.5),Mt(75,8.7)]),ce=nn("c",[Mt(17.8,-9.2),Mt(45.3,-14.9),Mt(75,-8.7)])+Ni(100.5,ee+.5);return{path(_e){return _e?se:ce}}}},Xf=class extends bh{constructor(ee,se){super(ee,se),this.constants_=ee,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},jf=class extends Mo{constructor(ee,se){super(ee,se),this.constants_=ee,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},Yf=class extends Po{constructor(ee,se){super(ee,se),this.renderer_=ee}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof gn||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(ee,se){this.isInline&&ee instanceof ne.ValueInput$$module$build$src$core$inputs$value_input?(se.elements.push(new Xf(this.constants_,ee)),se.hasInlineInput=!0):ee instanceof gn?(se.elements.push(new jf(this.constants_,ee)),se.hasStatement=!0):ee instanceof ne.ValueInput$$module$build$src$core$inputs$value_input?(se.elements.push(new fa(this.constants_,ee)),se.hasExternalInput=!0):(ee instanceof jn||ee instanceof gs)&&(se.minHeight=Math.max(se.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),se.hasDummyInput=!0),this.isInline||se.align!==null||(se.align=ee.align)}addElemSpacing_(){let ee=!1;for(let ce=0,_e;_e=this.rows[ce];ce++)_e.hasExternalInput&&(ee=!0);for(let ce=0,_e;_e=this.rows[ce];ce++){var se=_e.elements;if(_e.elements=[],_e.startsWithElemSpacer()&&_e.elements.push(new pn(this.constants_,this.getInRowSpacing_(null,se[0]))),se.length){for(let me=0;me<se.length-1;me++){_e.elements.push(se[me]);const be=this.getInRowSpacing_(se[me],se[me+1]);_e.elements.push(new pn(this.constants_,be))}_e.elements.push(se[se.length-1]),_e.endsWithElemSpacer()&&(se=this.getInRowSpacing_(se[se.length-1],null),ee&&_e.hasDummyInput&&(se+=this.constants_.TAB_WIDTH),_e.elements.push(new pn(this.constants_,se)))}}}getInRowSpacing_(ee,se){if(!ee)return se&&He.isField(se)&&se.isEditable?this.constants_.MEDIUM_PADDING:se&&He.isInlineInput(se)?this.constants_.MEDIUM_LARGE_PADDING:se&&He.isStatementInput(se)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!He.isInput(ee)&&(!se||He.isStatementInput(se)))return He.isField(ee)&&ee.isEditable?this.constants_.MEDIUM_PADDING:He.isIcon(ee)?2*this.constants_.LARGE_PADDING+1:He.isHat(ee)?this.constants_.NO_PADDING:He.isPreviousOrNextConnection(ee)?this.constants_.LARGE_PADDING:He.isLeftRoundedCorner(ee)?this.constants_.MIN_BLOCK_WIDTH:He.isJaggedEdge(ee)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(He.isInput(ee)&&!se){if(He.isExternalInput(ee))return this.constants_.NO_PADDING;if(He.isInlineInput(ee))return this.constants_.LARGE_PADDING;if(He.isStatementInput(ee))return this.constants_.NO_PADDING}if(!He.isInput(ee)&&se&&He.isInput(se)){if(He.isField(ee)&&ee.isEditable){if(He.isInlineInput(se)||He.isExternalInput(se))return this.constants_.SMALL_PADDING}else{if(He.isInlineInput(se)||He.isExternalInput(se))return this.constants_.MEDIUM_LARGE_PADDING;if(He.isStatementInput(se))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(He.isIcon(ee)&&se&&!He.isInput(se))return this.constants_.LARGE_PADDING;if(He.isInlineInput(ee)&&se&&He.isField(se))return se.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(He.isLeftSquareCorner(ee)&&se){if(He.isHat(se))return this.constants_.NO_PADDING;if(He.isPreviousConnection(se))return se.notchOffset;if(He.isNextConnection(se))return se.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(He.isLeftRoundedCorner(ee)&&se){if(He.isPreviousConnection(se))return se.notchOffset-this.constants_.CORNER_RADIUS;if(He.isNextConnection(se))return se.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return He.isField(ee)&&se&&He.isField(se)&&ee.isEditable===se.isEditable||se&&He.isJaggedEdge(se)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(ee,se){return He.isTopRow(ee)&&He.isBottomRow(se)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:He.isTopRow(ee)||He.isBottomRow(se)?this.constants_.NO_PADDING:ee.hasExternalInput&&se.hasExternalInput?this.constants_.LARGE_PADDING:!ee.hasStatement&&se.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:ee.hasStatement&&se.hasStatement||!ee.hasStatement&&se.hasDummyInput||ee.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(ee,se){if(He.isSpacer(se))return ee.yPos+se.height/2;if(He.isBottomRow(ee))return ee=ee.yPos+ee.height-ee.descenderHeight,He.isNextConnection(se)?ee+se.height/2:ee-se.height/2;if(He.isTopRow(ee))return He.isHat(se)?ee.capline-se.height/2:ee.capline+se.height/2;let ce=ee.yPos;return He.isField(se)||He.isIcon(se)?(ce+=se.height/2,(ee.hasInlineInput||ee.hasStatement)&&se.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=ee.height&&(ce+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):ce=He.isInlineInput(se)?ce+se.height/2:ce+ee.height/2,ce}alignRowElements_(){if(this.isInline){var ee=0,se=new WeakMap,ce=null;for(let _e=this.rows.length-1,me;me=this.rows[_e];_e--)se.set(me,ee),He.isInputRow(me)&&(me.hasStatement&&this.alignStatementRow_(me),ce&&ce.hasStatement&&me.width<ce.width?se.set(me,ce.width):ee=me.hasStatement?me.width:Math.max(ee,me.width),ce=me);ee=0;for(let _e=0,me;me=this.rows[_e];_e++)me.hasStatement?ee=this.getDesiredRowWidth_(me):He.isSpacer(me)?me.width=Math.max(ee,se.get(me)):(ce=me.width,ee=Math.max(ee,se.get(me))-ce,0<ee&&this.addAlignmentPadding_(me,ee),ee=me.width)}else super.alignRowElements_()}getDesiredRowWidth_(ee){return this.isInline&&ee.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(ee)}finalize_(){let ee=0,se=0;for(let _e=0,me;me=this.rows[_e];_e++){me.yPos=se,me.xPos=this.startX,se+=me.height,ee=Math.max(ee,me.widthWithConnectedBlocks);var ce=se-this.topRow.ascenderHeight;me===this.bottomRow&&ce<this.constants_.MIN_BLOCK_HEIGHT&&(ce=this.constants_.MIN_BLOCK_HEIGHT-ce,this.bottomRow.height+=ce,se+=ce),this.recordElemPositions_(me)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(ce=this.block_.nextConnection.targetBlock())&&(ee=Math.max(ee,ce.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=se-this.bottomRow.descenderHeight,this.widthWithChildren=ee+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=se+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},Kf=class extends Ta{constructor(ee,se,ce){super(ee,se,ce),this.constants=ce,this.colourDark="#000000",this.svgPathDark=lt(Ye.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=lt(Ye.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(ee){this.svgPath.setAttribute("d",ee),this.svgPathDark.setAttribute("d",ee)}setHighlightPath(ee){this.svgPathLight.setAttribute("d",ee)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(ee){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(ee),this.svgPath.setAttribute("stroke","none")}setStyle(ee){this.style=ee,this.colourDark=Gs("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(ee){ee?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(ee){if(ee){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(ee){super.updateDisabled_(ee),ee&&this.svgPath.setAttribute("stroke","none")}},qf=class extends ba{constructor(ee){super(ee),this.highlightConstants=null}init(ee,se){super.init(ee,se),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(ee,se){super.refreshDom(ee,se),this.getHighlightConstants().init()}makeConstants_(){return new Gf}makeRenderInfo_(ee){return new Yf(this,ee)}makeDrawer_(ee,se){return new Vf(ee,se)}makePathObject(ee,se){return new Kf(ee,se,this.getConstants())}makeHighlightConstants_(){return new zf(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};uo("geras",qf);var Jn={};Jn.ConstantProvider=Gf,Jn.Drawer=Vf,Jn.HighlightConstantProvider=zf,Jn.Highlighter=Wf,Jn.InlineInput=Xf,Jn.PathObject=Kf,Jn.RenderInfo=Yf,Jn.Renderer=qf,Jn.StatementInput=jf;var Jf=class extends Po{constructor(ee,se){super(ee,se)}getRenderer(){return this.renderer_}addElemSpacing_(){let ee=!1;for(var se=0;se<this.rows.length;se++)if(this.rows[se].hasExternalInput){ee=!0;break}for(se=0;se<this.rows.length;se++){const _e=this.rows[se];var ce=_e.elements;if(_e.elements=[],_e.startsWithElemSpacer()&&_e.elements.push(new pn(this.constants_,this.getInRowSpacing_(null,ce[0]))),ce.length){for(let me=0;me<ce.length-1;me++){_e.elements.push(ce[me]);const be=this.getInRowSpacing_(ce[me],ce[me+1]);_e.elements.push(new pn(this.constants_,be))}_e.elements.push(ce[ce.length-1]),_e.endsWithElemSpacer()&&(ce=this.getInRowSpacing_(ce[ce.length-1],null),ee&&_e.hasDummyInput&&(ce+=this.constants_.TAB_WIDTH),_e.elements.push(new pn(this.constants_,ce)))}}}getInRowSpacing_(ee,se){if(!ee)return se&&He.isField(se)&&se.isEditable?this.constants_.MEDIUM_PADDING:se&&He.isInlineInput(se)?this.constants_.MEDIUM_LARGE_PADDING:se&&He.isStatementInput(se)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!He.isInput(ee)&&!se)return He.isField(ee)&&ee.isEditable?this.constants_.MEDIUM_PADDING:He.isIcon(ee)?2*this.constants_.LARGE_PADDING+1:He.isHat(ee)?this.constants_.NO_PADDING:He.isPreviousOrNextConnection(ee)?this.constants_.LARGE_PADDING:He.isLeftRoundedCorner(ee)?this.constants_.MIN_BLOCK_WIDTH:He.isJaggedEdge(ee)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(He.isInput(ee)&&!se){if(He.isExternalInput(ee))return this.constants_.NO_PADDING;if(He.isInlineInput(ee))return this.constants_.LARGE_PADDING;if(He.isStatementInput(ee))return this.constants_.NO_PADDING}if(!He.isInput(ee)&&se&&He.isInput(se)){if(He.isField(ee)&&ee.isEditable){if(He.isInlineInput(se)||He.isExternalInput(se))return this.constants_.SMALL_PADDING}else{if(He.isInlineInput(se)||He.isExternalInput(se))return this.constants_.MEDIUM_LARGE_PADDING;if(He.isStatementInput(se))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(He.isIcon(ee)&&se&&!He.isInput(se))return this.constants_.LARGE_PADDING;if(He.isInlineInput(ee)&&se&&He.isField(se))return se.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(He.isLeftSquareCorner(ee)&&se){if(He.isHat(se))return this.constants_.NO_PADDING;if(He.isPreviousConnection(se)||He.isNextConnection(se))return se.notchOffset}return He.isLeftRoundedCorner(ee)&&se?se.notchOffset-this.constants_.CORNER_RADIUS:He.isField(ee)&&se&&He.isField(se)&&ee.isEditable===se.isEditable||se&&He.isJaggedEdge(se)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(ee,se){return He.isTopRow(ee)&&He.isBottomRow(se)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:He.isTopRow(ee)||He.isBottomRow(se)?this.constants_.NO_PADDING:ee.hasExternalInput&&se.hasExternalInput?this.constants_.LARGE_PADDING:!ee.hasStatement&&se.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:ee.hasStatement&&se.hasStatement||ee.hasDummyInput||se.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(ee,se){if(He.isSpacer(se))return ee.yPos+se.height/2;if(He.isBottomRow(ee))return ee=ee.yPos+ee.height-ee.descenderHeight,He.isNextConnection(se)?ee+se.height/2:ee-se.height/2;if(He.isTopRow(ee))return He.isHat(se)?ee.capline-se.height/2:ee.capline+se.height/2;let ce=ee.yPos;return ce=He.isField(se)&&ee.hasStatement?ce+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+se.height/2):ce+ee.height/2}finalize_(){let ee=0,se=0;for(var ce=0;ce<this.rows.length;ce++){const me=this.rows[ce];me.yPos=se,me.xPos=this.startX,se+=me.height,ee=Math.max(ee,me.widthWithConnectedBlocks);var _e=se-this.topRow.ascenderHeight;me===this.bottomRow&&_e<this.constants_.MIN_BLOCK_HEIGHT&&(_e=this.constants_.MIN_BLOCK_HEIGHT-_e,this.bottomRow.height+=_e,se+=_e),this.recordElemPositions_(me)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(ce=this.block_.nextConnection.targetBlock())&&(ee=Math.max(ee,ce.getHeightWidth().width)),this.bottomRow.baseline=se-this.bottomRow.descenderHeight,this.widthWithChildren=ee+this.startX,this.height=se,this.startY=this.topRow.capline}},Zf=class extends ba{constructor(ee){super(ee)}makeRenderInfo_(ee){return new Jf(this,ee)}};uo("thrasos",Zf);var od={};od.RenderInfo=Jf,od.Renderer=Zf;var Um={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},Hm={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},Gm=new rr("zelos",Um,Hm),Wm={Classic:ua,Zelos:Gm},ld=class{constructor(ee,se,ce){this.id_=ee.toolboxitemid||$e(),this.level_=(this.parent_=ce||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=ee,this.parentToolbox_=se,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(ee){}},Bn=class extends ld{constructor(ee,se,ce){super(ee,se,ce),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(ee){if("custom"in ee)this.flyoutItems_=ee.custom;else if(ee=ee.contents)for(let se=0;se<ee.length;se++){const ce=ee[se];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(ce)}}parseCategoryDef_(ee){this.name_="name"in ee?bi(ee.name):"",this.colour_=this.getColour_(ee),Object.assign(this.cssConfig_,ee.cssconfig||ee.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),Fn(this.htmlDiv_,Nn.TREEITEM),Ri(this.htmlDiv_,Mi.SELECTED,!1),Ri(this.htmlDiv_,Mi.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),Fn(this.iconDom_,Nn.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const ee=this.labelDom_.getAttribute("id");return ee&&Ri(this.htmlDiv_,Mi.LABELLEDBY,ee),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const ee=document.createElement("div"),se=this.cssConfig_.container;return se&&Ct(ee,se),ee}createRowContainer_(){const ee=document.createElement("div");var se=this.cssConfig_.row;return se&&Ct(ee,se),se=`${Bn.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?ee.style.paddingRight=se:ee.style.paddingLeft=se,ee}createRowContentsContainer_(){const ee=document.createElement("div"),se=this.cssConfig_.rowcontentcontainer;return se&&Ct(ee,se),ee}createIconDom_(){const ee=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const se=this.cssConfig_.icon;se&&Ct(ee,se)}return ee.style.display="inline-block",ee}createLabelDom_(ee){const se=document.createElement("span");return se.setAttribute("id",this.getId()+".label"),se.textContent=ee,(ee=this.cssConfig_.label)&&Ct(se,ee),se}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(ee){ee&&(ee=Bn.borderWidth+"px solid "+(ee||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=ee:this.rowDiv_.style.borderLeft=ee)}getColour_(ee){const se=ee.categorystyle||ee.categoryStyle;if((ee=ee.colour)&&se)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(se)return this.getColourfromStyle(se);if(ee)return this.parseColour(ee)}return""}getColourfromStyle(ee){var se=this.workspace_.getTheme();if(ee&&se){if((se=se.categoryStyles[ee])&&se.colour)return this.parseColour(se.colour);console.warn('Style "'+ee+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour(ee){if(ee=bi(ee),ee==null||ee==="")return"";var se=Number(ee);return isNaN(se)?(se=Hs(ee))?se:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+ee),""):gc(se)}openIcon_(ee){if(ee){var se=this.cssConfig_.closedicon;se&&Ce(ee,se),(se=this.cssConfig_.openicon)&&Ct(ee,se)}}closeIcon_(ee){if(ee){var se=this.cssConfig_.openicon;se&&Ce(ee,se),(se=this.cssConfig_.closedicon)&&Ct(ee,se)}}setVisible_(ee){this.htmlDiv_.style.display=ee?"block":"none",this.isHidden_=!ee,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let ee=this;for(;ee.getParent();)if(ee=ee.getParent(),!ee.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(ee){}setSelected(ee){if(this.rowDiv_){var se=this.cssConfig_.selected;if(ee){const ce=this.parseColour(Bn.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||ce,se&&Ct(this.rowDiv_,se)}else this.rowDiv_.style.backgroundColor="",se&&Oe(this.rowDiv_,se);Ri(this.htmlDiv_,Mi.SELECTED,ee)}}setDisabled(ee){this.isDisabled_=ee,this.getDiv().setAttribute("disabled",`${ee}`),ee?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(ee){this.flyoutItems_=[],this.toolboxItemDef_=typeof ee=="string"?{kind:this.toolboxItemDef_.kind,custom:ee,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:Qn(ee),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){We(this.htmlDiv_)}};Bn.registrationName="category",Bn.nestedPadding=19,Bn.borderWidth=8,Bn.defaultBackgroundColour="#57e",si(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),re($t.TOOLBOX_ITEM,Bn.registrationName,Bn);var Vo=class extends ld{constructor(ee,se){super(ee,se),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv=null,Object.assign(this.cssConfig_,ee.cssconfig||ee.cssConfig)}init(){this.createDom_()}createDom_(){const ee=document.createElement("div"),se=this.cssConfig_.container;return se&&Ct(ee,se),this.htmlDiv=ee}getDiv(){return this.htmlDiv}dispose(){We(this.htmlDiv)}};Vo.registrationName="sep",si(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),re($t.TOOLBOX_ITEM,Vo.registrationName,Vo);var Kr=class extends Bn{constructor(ee,se,ce){super(ee,se,ce),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const ee=super.makeDefaultCssConfig_();return ee.contents="blocklyToolboxContents",ee}parseContents_(ee){if("custom"in ee)this.flyoutItems_=ee.custom;else{const se=ee.contents;if(se){this.flyoutItems_=[],ee=!0;for(let ce=0;ce<se.length;ce++){const _e=se[ce];!he($t.TOOLBOX_ITEM,_e.kind)||_e.kind.toLowerCase()===Vo.registrationName&&ee?(this.flyoutItems_.push(_e),ee=!0):(this.createToolboxItem(_e),ee=!1)}}}}createToolboxItem(ee){let se=ee.kind;se.toUpperCase()==="CATEGORY"&&St(ee)&&(se=Kr.registrationName),ee=new(de($t.TOOLBOX_ITEM,se))(ee,this.parentToolbox_,this),this.toolboxItems_.push(ee)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const ee=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(ee),Fn(this.subcategoriesDiv_,Nn.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),Ri(this.htmlDiv_,Mi.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const ee=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const se=this.cssConfig_.icon;se&&Ct(ee,se),ee.style.visibility="visible"}return ee.style.display="inline-block",ee}createSubCategoriesDom_(ee){const se=document.createElement("div");se.style.display="none";var ce=this.cssConfig_.contents;for(ce&&Ct(se,ce),ce=0;ce<ee.length;ce++){const _e=ee[ce];_e.init();const me=_e.getDiv();if(se.appendChild(me),_e.getClickTarget){let be;(be=_e.getClickTarget())==null||be.setAttribute("id",_e.getId())}}return se}setExpanded(ee){if(this.expanded_!==ee){if(this.expanded_=ee)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let se;(se=this.parentToolbox_.getFlyout())==null||se.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}Ri(this.htmlDiv_,Mi.EXPANDED,ee),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(ee){this.htmlDiv_.style.display=ee?"block":"none";const se=this.getChildToolboxItems();for(let ce=0;ce<se.length;ce++)se[ce].setVisible_(ee);this.isHidden_=!ee,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(ee){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};Kr.registrationName="collapsibleCategory",re($t.TOOLBOX_ITEM,Kr.registrationName,Kr);var Qf=class extends ya{constructor(ee){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout=null,this.boundEvents_=[],this.workspace_=ee,this.toolboxDef_=ee.options.languageTree||{contents:[]},this.horizontalLayout=ee.options.horizontalLayout,this.RTL=ee.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=ee.options.toolboxPosition}onShortcut(ee){return!1}init(){var ee=this.workspace_;const se=ee.getParentSvg();this.flyout=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),Tt(this.flyout.createDom("svg"),se),this.setVisible(!0),this.flyout.init(ee),this.render(this.toolboxDef_),ee=ee.getThemeManager(),ee.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),ee.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:ui.ComponentWeight.TOOLBOX_WEIGHT,capabilities:[ui.Capability.AUTOHIDEABLE,ui.Capability.DELETE_AREA,ui.Capability.DRAG_TARGET]})}createDom_(ee){ee=ee.getParentSvg();const se=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,Fn(this.contentsDiv_,Nn.TREE),se.appendChild(this.contentsDiv_),ee.parentNode.insertBefore(se,ee),this.attachEvents_(se,this.contentsDiv_),se}createContainer_(){const ee=document.createElement("div");return ee.setAttribute("layout",this.isHorizontal()?"h":"v"),Ct(ee,"blocklyToolboxDiv"),ee.setAttribute("dir",this.RTL?"RTL":"LTR"),ee}createContentsContainer_(){const ee=document.createElement("div");return Ct(ee,"blocklyToolboxContents"),this.isHorizontal()&&(ee.style.flexDirection="row"),ee}attachEvents_(ee,se){ee=Nt(ee,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(ee),se=Nt(se,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(se)}onClick_(ee){if(_i(ee)||ee.target===this.HtmlDiv)bt().hideChaff(!1);else{var se=ee.target.getAttribute("id");se&&(se=this.getToolboxItemById(se),se.isSelectable()&&(this.setSelectedItem(se),se.onClick(ee))),bt().hideChaff(!0)}$i()}onKeyDown_(ee){let se=!1;switch(ee.key){case"ArrowDown":se=this.selectNext();break;case"ArrowUp":se=this.selectPrevious();break;case"ArrowLeft":se=this.selectParent();break;case"ArrowRight":se=this.selectChild();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),se=!0);break;default:se=!1}!se&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(se=this.selectedItem_.onKeyDown(ee)),se&&ee.preventDefault()}createFlyout_(){const ee=this.workspace_,se=new yn({parentWorkspace:ee,rtl:ee.RTL,oneBasedIndex:ee.options.oneBasedIndex,horizontalLayout:ee.horizontalLayout,renderer:ee.options.renderer,rendererOverrides:ee.options.rendererOverrides,move:{scrollbars:!0}});return se.toolboxPosition=ee.options.toolboxPosition,new(ee.horizontalLayout?fe($t.FLYOUTS_HORIZONTAL_TOOLBOX,ee.options,!0):fe($t.FLYOUTS_VERTICAL_TOOLBOX,ee.options,!0))(se)}render(ee){this.toolboxDef_=ee;for(let se=0;se<this.contents_.length;se++){const ce=this.contents_[se];ce&&ce.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(ee.contents),this.position(),this.handleToolboxItemResize()}renderContents_(ee){const se=document.createDocumentFragment();for(let ce=0;ce<ee.length;ce++)this.createToolboxItem(ee[ce],se);this.contentsDiv_.appendChild(se)}createToolboxItem(ee,se){var ce=ee.kind;ce.toUpperCase()==="CATEGORY"&&St(ee)&&(ce=Kr.registrationName),(ce=de($t.TOOLBOX_ITEM,ce.toLowerCase()))&&(ee=new ce(ee,this),ee.init(),this.addToolboxItem_(ee),(ce=ee.getDiv())&&se.appendChild(ce),ee.getClickTarget()&&ee.getClickTarget().setAttribute("id",ee.getId()))}addToolboxItem_(ee){if(this.contents_.push(ee),this.contentMap_[ee.getId()]=ee,ee.isCollapsible()){ee=ee.getChildToolboxItems();for(let se=0;se<ee.length;se++)this.addToolboxItem_(ee[se])}}getToolboxItems(){return this.contents_}addStyle(ee){ee&&this.HtmlDiv&&Ct(this.HtmlDiv,ee)}removeStyle(ee){ee&&this.HtmlDiv&&Oe(this.HtmlDiv,ee)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var ee=this.HtmlDiv.getBoundingClientRect();const se=ee.top,ce=se+ee.height,_e=ee.left;return ee=_e+ee.width,this.toolboxPosition===Gt.TOP?new ri(-1e7,ce,-1e7,1e7):this.toolboxPosition===Gt.BOTTOM?new ri(se,1e7,-1e7,1e7):this.toolboxPosition===Gt.LEFT?new ri(-1e7,1e7,-1e7,ee):new ri(-1e7,1e7,_e,1e7)}wouldDelete(ee){return ee instanceof vn?this.updateWouldDelete_(!ee.getParent()&&ee.isDeletable()):this.updateWouldDelete_(Tn(ee)&&ee.isDeletable()),this.wouldDelete_}onDragEnter(ee){this.updateCursorDeleteStyle_(!0)}onDragExit(ee){this.updateCursorDeleteStyle_(!1)}onDrop(ee){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(ee){ee!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=ee,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(ee){const se=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";ee?this.addStyle(se):this.removeStyle(se)}getToolboxItemById(ee){return this.contentMap_[ee]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout}position(){const ee=this.workspace_.getMetrics(),se=this.HtmlDiv;se&&(this.horizontalLayout?(se.style.left="0",se.style.height="auto",se.style.width="100%",this.height_=se.offsetHeight,this.width_=ee.viewWidth,this.toolboxPosition===Gt.TOP?se.style.top="0":se.style.bottom="0"):(this.toolboxPosition===Gt.RIGHT?se.style.right="0":se.style.left="0",se.style.height="100%",this.width_=se.offsetWidth,this.height_=ee.viewHeight),this.flyout.position())}handleToolboxItemResize(){const ee=this.workspace_,se=this.HtmlDiv.getBoundingClientRect();ee.translate(this.toolboxPosition===Gt.LEFT?ee.scrollX+se.width:ee.scrollX,this.toolboxPosition===Gt.TOP?ee.scrollY+se.height:ee.scrollY),Bt(ee)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let ee=0;ee<this.contents_.length;ee++){const se=this.contents_[ee];se.refreshTheme&&se.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout.show(this.selectedItem_.getContents())}setVisible(ee){this.isVisible_!==ee&&(this.HtmlDiv.style.display=ee?"block":"none",this.isVisible_=ee,this.workspace_.recordDragTargets())}autoHide(ee){!ee&&this.flyout&&this.flyout.autoClose&&this.clearSelection()}setSelectedItem(ee){const se=this.selectedItem_;!ee&&!se||ee&&!gp(ee)||(this.shouldDeselectItem_(se,ee)&&se!==null&&this.deselectItem_(se),this.shouldSelectItem_(se,ee)&&ee!==null&&this.selectItem_(se,ee),this.updateFlyout_(se,ee),this.fireSelectEvent(se,ee))}shouldDeselectItem_(ee,se){return ee!==null&&(!ee.isCollapsible()||ee!==se)}shouldSelectItem_(ee,se){return se!==null&&se!==ee}deselectItem_(ee){this.selectedItem_=null,this.previouslySelectedItem_=ee,ee.setSelected(!1),Ri(this.contentsDiv_,Mi.ACTIVEDESCENDANT,"")}selectItem_(ee,se){this.selectedItem_=se,this.previouslySelectedItem_=ee,se.setSelected(!0),Ri(this.contentsDiv_,Mi.ACTIVEDESCENDANT,se.getId())}selectItemByPosition(ee){-1<ee&&ee<this.contents_.length&&(ee=this.contents_[ee],ee.isSelectable()&&this.setSelectedItem(ee))}updateFlyout_(ee,se){se&&(ee!==se||se.isCollapsible())&&se.getContents().length?(this.flyout.show(se.getContents()),this.flyout.scrollToStart()):this.flyout.hide()}fireSelectEvent(ee,se){const ce=ee&&ee.getName();let _e=se&&se.getName();ee===se&&(_e=null),ee=new(Le(it.TOOLBOX_ITEM_SELECT))(ce,_e,this.workspace_.id),Ae(ee)}selectParent(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const ee=this.selectedItem_;return ee.isExpanded()?this.selectNext():ee.toggleExpanded(),!0}selectNext(){if(!this.selectedItem_)return!1;let ee=this.contents_.indexOf(this.selectedItem_)+1;if(-1<ee&&ee<this.contents_.length){let se=this.contents_[ee];for(;se&&!se.isSelectable();)se=this.contents_[++ee];if(se&&se.isSelectable())return this.setSelectedItem(se),!0}return!1}selectPrevious(){if(!this.selectedItem_)return!1;let ee=this.contents_.indexOf(this.selectedItem_)-1;if(-1<ee&&ee<this.contents_.length){let se=this.contents_[ee];for(;se&&!se.isSelectable();)se=this.contents_[--ee];if(se&&se.isSelectable())return this.setSelectedItem(se),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout.dispose();for(var ee=0;ee<this.contents_.length;ee++)this.contents_[ee].dispose();for(ee=0;ee<this.boundEvents_.length;ee++)Yt(this.boundEvents_[ee]);this.boundEvents_=[],this.contents_=[],this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),We(this.HtmlDiv))}};si(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),re($t.TOOLBOX,Vn,Qf);var Vm="11.2.0",zm=Rt.INPUT_VALUE,Xm=Rt.OUTPUT_VALUE,jm=Rt.NEXT_STATEMENT,Ym=Rt.PREVIOUS_STATEMENT,Km=Gt.TOP,qm=Gt.BOTTOM,Jm=Gt.LEFT,Zm=Gt.RIGHT;Vr.prototype.newBlock=function(ee,se){return new ws(this,ee,se)},kn.prototype.newBlock=function(ee,se){return new vn(this,ee,se)},Vr.prototype.newComment=function(ee){return new la(this,ee)},kn.prototype.newComment=function(ee){return new aa(this,ee)},kn.newTrashcan=function(ee){return new Yg(ee)},us.prototype.newWorkspaceSvg=function(ee){return new kn(ee)},ne.Names$$module$build$src$core$names.prototype.populateProcedures=function(ee){ee=Ll(ee),ee=ee[0].concat(ee[1]);for(let se=0;se<ee.length;se++)this.getName(ee[se][0],ne.Names$$module$build$src$core$names.NameType.PROCEDURE)};var ut={};return ut.ASTNode=gt,ut.BasicCursor=Fo,ut.Block=ws,ut.BlockSvg=vn,ut.Blocks=sn,ut.COLLAPSED_FIELD_NAME=Kl,ut.COLLAPSED_INPUT_NAME=Eo,ut.COLLAPSE_CHARS=Ug,ut.CodeGenerator=ne.CodeGenerator$$module$build$src$core$generator,ut.CollapsibleToolboxCategory=Kr,ut.ComponentManager=ui,ut.Connection=qt,ut.ConnectionChecker=Hg,ut.ConnectionDB=Ur,ut.ConnectionType=Rt,ut.ContextMenu=sr,ut.ContextMenuItems=xi,ut.ContextMenuRegistry=Wt,ut.Css=Pu,ut.Cursor=Mh,ut.DELETE_VARIABLE_ID=Rh,ut.DeleteArea=ya,ut.DragTarget=jg,ut.DropDownDiv=Xi,ut.Events=kt,ut.Extensions=Dn,ut.Field=oi,ut.FieldCheckbox=ur,ut.FieldDropdown=rn,ut.FieldImage=cr,ut.FieldLabel=or,ut.FieldLabelSerializable=pf,ut.FieldNumber=zh,ut.FieldTextInput=Ia,ut.FieldVariable=Ho,ut.Flyout=Ra,ut.FlyoutButton=Sn,ut.FlyoutMetricsManager=df,ut.Generator=ne.CodeGenerator$$module$build$src$core$generator,ut.Gesture=cs,ut.Grid=ph,ut.HorizontalFlyout=_f,ut.INPUT_VALUE=zm,ut.Input=Wr,ut.InsertionMarkerManager=Cn,ut.InsertionMarkerPreviewer=cf,ut.Marker=Vg,ut.MarkerManager=Io,ut.Menu=Vu,ut.MenuItem=zu,ut.MetricsManager=Gh,ut.Msg=ne.Msg$$module$build$src$core$msg,ut.NEXT_STATEMENT=jm,ut.Names=ne.Names$$module$build$src$core$names,ut.OPPOSITE_TYPE=ar,ut.OUTPUT_VALUE=Xm,ut.Options=yn,ut.PREVIOUS_STATEMENT=Ym,ut.PROCEDURE_CATEGORY_NAME=ga,ut.Procedures=Zi,ut.RENAME_VARIABLE_ID=Oh,ut.RenderedConnection=Qi,ut.Scrollbar=yi,ut.ScrollbarPair=Hh,ut.ShortcutItems=Kn,ut.ShortcutRegistry=Qt,ut.TOOLBOX_AT_BOTTOM=qm,ut.TOOLBOX_AT_LEFT=Jm,ut.TOOLBOX_AT_RIGHT=Zm,ut.TOOLBOX_AT_TOP=Km,ut.TabNavigateCursor=zg,ut.Theme=rr,ut.ThemeManager=Fg,ut.Themes=Wm,ut.Toolbox=Qf,ut.ToolboxCategory=Bn,ut.ToolboxItem=ld,ut.ToolboxSeparator=Vo,ut.Tooltip=dn,ut.Touch=Ys,ut.Trashcan=Yg,ut.UnattachedFieldError=Si,ut.VARIABLE_CATEGORY_NAME=Ju,ut.VARIABLE_DYNAMIC_CATEGORY_NAME=Ih,ut.VERSION=Vm,ut.VariableMap=Lh,ut.VariableModel=So,ut.Variables=Vi,ut.VariablesDynamic=lr,ut.VerticalFlyout=Vh,ut.WidgetDiv=xn,ut.Workspace=Vr,ut.WorkspaceAudio=Gg,ut.WorkspaceDragger=yg,ut.WorkspaceSvg=kn,ut.Xml=ji,ut.ZoomControls=jp,ut.blockAnimations=Lo,ut.blockRendering=ti,ut.browserEvents=rs,ut.bubbles=Wo,ut.bumpObjects=Ea,ut.clipboard=Uo,ut.comments=wa,ut.common=Wi,ut.config=ne.config$$module$build$src$core$config,ut.constants=fm,ut.defineBlocksWithJsonArray=zt,ut.dialog=Js,ut.dragging=Go,ut.fieldRegistry=ha,ut.geras=Jn,ut.getMainWorkspace=bt,ut.getSelected=Et,ut.hasBubble=fr,ut.hideChaff=fp,ut.icons=Os,ut.inject=tp,ut.inputs=Ns,ut.isCopyable=ho,ut.isDeletable=Tn,ut.isDraggable=zs,ut.isIcon=Wc,ut.isObservable=Al,ut.isPaster=dp,ut.isRenderedElement=_p,ut.isSelectable=pp,ut.isSerializable=Fs,ut.isVariableBackedParameterModel=Da,ut.layers=mm,ut.procedures=Zi,ut.registry=ns,ut.renderManagement=Jl,ut.serialization=Bm,ut.setLocale=Ku,ut.setParentContainer=Ut,ut.svgResize=Bt,ut.thrasos=od,ut.uiPosition=qs,ut.utils=di,ut.zelos=Pn,ut.__namespace__=ne,ut})}(blockly_compressed)),blockly_compressed.exports}var blockly_compressedExports=requireBlockly_compressed();const Blockly$1=getDefaultExportFromCjs(blockly_compressedExports),{ASTNode:ASTNode$1,BasicCursor:BasicCursor$1,Block:Block$1,BlockSvg:BlockSvg$1,Blocks:Blocks$1,COLLAPSED_FIELD_NAME:COLLAPSED_FIELD_NAME$1,COLLAPSED_INPUT_NAME:COLLAPSED_INPUT_NAME$1,COLLAPSE_CHARS:COLLAPSE_CHARS$1,CodeGenerator:CodeGenerator$1,CollapsibleToolboxCategory:CollapsibleToolboxCategory$1,ComponentManager:ComponentManager$1,Connection:Connection$1,ConnectionChecker:ConnectionChecker$1,ConnectionDB:ConnectionDB$1,ConnectionType:ConnectionType$1,ContextMenu:ContextMenu$1,ContextMenuItems:ContextMenuItems$1,ContextMenuRegistry:ContextMenuRegistry$1,Css:Css$1,Cursor:Cursor$1,DELETE_VARIABLE_ID:DELETE_VARIABLE_ID$1,DeleteArea:DeleteArea$1,DragTarget:DragTarget$1,DropDownDiv:DropDownDiv$1,Events:Events$1,Extensions:Extensions$1,Field:Field$1,FieldCheckbox:FieldCheckbox$1,FieldDropdown:FieldDropdown$1,FieldImage:FieldImage$1,FieldLabel:FieldLabel$1,FieldLabelSerializable:FieldLabelSerializable$1,FieldNumber:FieldNumber$1,FieldTextInput:FieldTextInput$1,FieldVariable:FieldVariable$1,Flyout:Flyout$1,FlyoutButton:FlyoutButton$1,FlyoutMetricsManager:FlyoutMetricsManager$1,Generator:Generator$1,Gesture:Gesture$1,Grid:Grid$1,HorizontalFlyout:HorizontalFlyout$1,INPUT_VALUE:INPUT_VALUE$1,Input:Input$1,InsertionMarkerManager:InsertionMarkerManager$1,InsertionMarkerPreviewer:InsertionMarkerPreviewer$1,Marker:Marker$1,MarkerManager:MarkerManager$1,Menu:Menu$1,MenuItem:MenuItem$1,MetricsManager:MetricsManager$1,Msg:Msg$1,NEXT_STATEMENT:NEXT_STATEMENT$1,Names:Names$1,OPPOSITE_TYPE:OPPOSITE_TYPE$1,OUTPUT_VALUE:OUTPUT_VALUE$1,Options:Options$1,PREVIOUS_STATEMENT:PREVIOUS_STATEMENT$1,PROCEDURE_CATEGORY_NAME:PROCEDURE_CATEGORY_NAME$1,Procedures:Procedures$1,RENAME_VARIABLE_ID:RENAME_VARIABLE_ID$1,RenderedConnection:RenderedConnection$1,Scrollbar:Scrollbar$1,ScrollbarPair:ScrollbarPair$1,ShortcutItems:ShortcutItems$1,ShortcutRegistry:ShortcutRegistry$1,TOOLBOX_AT_BOTTOM:TOOLBOX_AT_BOTTOM$1,TOOLBOX_AT_LEFT:TOOLBOX_AT_LEFT$1,TOOLBOX_AT_RIGHT:TOOLBOX_AT_RIGHT$1,TOOLBOX_AT_TOP:TOOLBOX_AT_TOP$1,TabNavigateCursor:TabNavigateCursor$1,Theme:Theme$3,ThemeManager:ThemeManager$1,Themes:Themes$1,Toolbox:Toolbox$1,ToolboxCategory:ToolboxCategory$1,ToolboxItem:ToolboxItem$1,ToolboxSeparator:ToolboxSeparator$1,Tooltip:Tooltip$1,Touch:Touch$1,Trashcan:Trashcan$1,UnattachedFieldError:UnattachedFieldError$1,VARIABLE_CATEGORY_NAME:VARIABLE_CATEGORY_NAME$1,VARIABLE_DYNAMIC_CATEGORY_NAME:VARIABLE_DYNAMIC_CATEGORY_NAME$1,VERSION:VERSION$1,VariableMap:VariableMap$1,VariableModel:VariableModel$1,Variables:Variables$1,VariablesDynamic:VariablesDynamic$1,VerticalFlyout:VerticalFlyout$1,WidgetDiv:WidgetDiv$1,Workspace:Workspace$1,WorkspaceAudio:WorkspaceAudio$1,WorkspaceDragger:WorkspaceDragger$1,WorkspaceSvg:WorkspaceSvg$1,Xml:Xml$1,ZoomControls:ZoomControls$1,blockAnimations:blockAnimations$1,blockRendering:blockRendering$1,browserEvents:browserEvents$1,bubbles:bubbles$1,bumpObjects:bumpObjects$1,clipboard:clipboard$1,comments:comments$1,common:common$3,config:config$2,constants:constants$2,defineBlocksWithJsonArray:defineBlocksWithJsonArray$1,dialog:dialog$1,dragging:dragging$1,fieldRegistry:fieldRegistry$1,geras:geras$1,getMainWorkspace:getMainWorkspace$1,getSelected:getSelected$1,hasBubble:hasBubble$1,hideChaff:hideChaff$1,icons:icons$1,inject:inject$1,inputs:inputs$1,isCopyable:isCopyable$1,isDeletable:isDeletable$1,isDraggable:isDraggable$1,isIcon:isIcon$1,isObservable:isObservable$1,isPaster:isPaster$1,isRenderedElement:isRenderedElement$1,isSelectable:isSelectable$1,isSerializable:isSerializable$1,isVariableBackedParameterModel:isVariableBackedParameterModel$1,layers:layers$1,procedures:procedures$2,registry:registry$1,renderManagement:renderManagement$1,serialization:serialization$1,setLocale:setLocale$1,setParentContainer:setParentContainer$1,svgResize:svgResize$1,thrasos:thrasos$1,uiPosition:uiPosition$1,utils:utils$1,zelos:zelos$1}=Blockly$1,blockly=Object.freeze(Object.defineProperty({__proto__:null,ASTNode:ASTNode$1,BasicCursor:BasicCursor$1,Block:Block$1,BlockSvg:BlockSvg$1,Blocks:Blocks$1,COLLAPSED_FIELD_NAME:COLLAPSED_FIELD_NAME$1,COLLAPSED_INPUT_NAME:COLLAPSED_INPUT_NAME$1,COLLAPSE_CHARS:COLLAPSE_CHARS$1,CodeGenerator:CodeGenerator$1,CollapsibleToolboxCategory:CollapsibleToolboxCategory$1,ComponentManager:ComponentManager$1,Connection:Connection$1,ConnectionChecker:ConnectionChecker$1,ConnectionDB:ConnectionDB$1,ConnectionType:ConnectionType$1,ContextMenu:ContextMenu$1,ContextMenuItems:ContextMenuItems$1,ContextMenuRegistry:ContextMenuRegistry$1,Css:Css$1,Cursor:Cursor$1,DELETE_VARIABLE_ID:DELETE_VARIABLE_ID$1,DeleteArea:DeleteArea$1,DragTarget:DragTarget$1,DropDownDiv:DropDownDiv$1,Events:Events$1,Extensions:Extensions$1,Field:Field$1,FieldCheckbox:FieldCheckbox$1,FieldDropdown:FieldDropdown$1,FieldImage:FieldImage$1,FieldLabel:FieldLabel$1,FieldLabelSerializable:FieldLabelSerializable$1,FieldNumber:FieldNumber$1,FieldTextInput:FieldTextInput$1,FieldVariable:FieldVariable$1,Flyout:Flyout$1,FlyoutButton:FlyoutButton$1,FlyoutMetricsManager:FlyoutMetricsManager$1,Generator:Generator$1,Gesture:Gesture$1,Grid:Grid$1,HorizontalFlyout:HorizontalFlyout$1,INPUT_VALUE:INPUT_VALUE$1,Input:Input$1,InsertionMarkerManager:InsertionMarkerManager$1,InsertionMarkerPreviewer:InsertionMarkerPreviewer$1,Marker:Marker$1,MarkerManager:MarkerManager$1,Menu:Menu$1,MenuItem:MenuItem$1,MetricsManager:MetricsManager$1,Msg:Msg$1,NEXT_STATEMENT:NEXT_STATEMENT$1,Names:Names$1,OPPOSITE_TYPE:OPPOSITE_TYPE$1,OUTPUT_VALUE:OUTPUT_VALUE$1,Options:Options$1,PREVIOUS_STATEMENT:PREVIOUS_STATEMENT$1,PROCEDURE_CATEGORY_NAME:PROCEDURE_CATEGORY_NAME$1,Procedures:Procedures$1,RENAME_VARIABLE_ID:RENAME_VARIABLE_ID$1,RenderedConnection:RenderedConnection$1,Scrollbar:Scrollbar$1,ScrollbarPair:ScrollbarPair$1,ShortcutItems:ShortcutItems$1,ShortcutRegistry:ShortcutRegistry$1,TOOLBOX_AT_BOTTOM:TOOLBOX_AT_BOTTOM$1,TOOLBOX_AT_LEFT:TOOLBOX_AT_LEFT$1,TOOLBOX_AT_RIGHT:TOOLBOX_AT_RIGHT$1,TOOLBOX_AT_TOP:TOOLBOX_AT_TOP$1,TabNavigateCursor:TabNavigateCursor$1,Theme:Theme$3,ThemeManager:ThemeManager$1,Themes:Themes$1,Toolbox:Toolbox$1,ToolboxCategory:ToolboxCategory$1,ToolboxItem:ToolboxItem$1,ToolboxSeparator:ToolboxSeparator$1,Tooltip:Tooltip$1,Touch:Touch$1,Trashcan:Trashcan$1,UnattachedFieldError:UnattachedFieldError$1,VARIABLE_CATEGORY_NAME:VARIABLE_CATEGORY_NAME$1,VARIABLE_DYNAMIC_CATEGORY_NAME:VARIABLE_DYNAMIC_CATEGORY_NAME$1,VERSION:VERSION$1,VariableMap:VariableMap$1,VariableModel:VariableModel$1,Variables:Variables$1,VariablesDynamic:VariablesDynamic$1,VerticalFlyout:VerticalFlyout$1,WidgetDiv:WidgetDiv$1,Workspace:Workspace$1,WorkspaceAudio:WorkspaceAudio$1,WorkspaceDragger:WorkspaceDragger$1,WorkspaceSvg:WorkspaceSvg$1,Xml:Xml$1,ZoomControls:ZoomControls$1,blockAnimations:blockAnimations$1,blockRendering:blockRendering$1,browserEvents:browserEvents$1,bubbles:bubbles$1,bumpObjects:bumpObjects$1,clipboard:clipboard$1,comments:comments$1,common:common$3,config:config$2,constants:constants$2,defineBlocksWithJsonArray:defineBlocksWithJsonArray$1,dialog:dialog$1,dragging:dragging$1,fieldRegistry:fieldRegistry$1,geras:geras$1,getMainWorkspace:getMainWorkspace$1,getSelected:getSelected$1,hasBubble:hasBubble$1,hideChaff:hideChaff$1,icons:icons$1,inject:inject$1,inputs:inputs$1,isCopyable:isCopyable$1,isDeletable:isDeletable$1,isDraggable:isDraggable$1,isIcon:isIcon$1,isObservable:isObservable$1,isPaster:isPaster$1,isRenderedElement:isRenderedElement$1,isSelectable:isSelectable$1,isSerializable:isSerializable$1,isVariableBackedParameterModel:isVariableBackedParameterModel$1,layers:layers$1,procedures:procedures$2,registry:registry$1,renderManagement:renderManagement$1,serialization:serialization$1,setLocale:setLocale$1,setParentContainer:setParentContainer$1,svgResize:svgResize$1,thrasos:thrasos$1,uiPosition:uiPosition$1,utils:utils$1,zelos:zelos$1},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(blockly);var en$2={exports:{}};(function(ie,te){(function(ne,re){ie.exports=re()})(commonjsGlobal,function(){var ne=ne||{Msg:Object.create(null)};return ne.Msg.ADD_COMMENT="Add Comment",ne.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",ne.Msg.CHANGE_VALUE_TITLE="Change value:",ne.Msg.CLEAN_UP="Clean up Blocks",ne.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",ne.Msg.COLLAPSE_ALL="Collapse Blocks",ne.Msg.COLLAPSE_BLOCK="Collapse Block",ne.Msg.COLOUR_BLEND_COLOUR1="colour 1",ne.Msg.COLOUR_BLEND_COLOUR2="colour 2",ne.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",ne.Msg.COLOUR_BLEND_RATIO="ratio",ne.Msg.COLOUR_BLEND_TITLE="blend",ne.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",ne.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",ne.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",ne.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",ne.Msg.COLOUR_RANDOM_TITLE="random colour",ne.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",ne.Msg.COLOUR_RGB_BLUE="blue",ne.Msg.COLOUR_RGB_GREEN="green",ne.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",ne.Msg.COLOUR_RGB_RED="red",ne.Msg.COLOUR_RGB_TITLE="colour with",ne.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",ne.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",ne.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",ne.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",ne.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",ne.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",ne.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",ne.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",ne.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",ne.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",ne.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",ne.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",ne.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",ne.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",ne.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",ne.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",ne.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",ne.Msg.CONTROLS_IF_MSG_ELSE="else",ne.Msg.CONTROLS_IF_MSG_ELSEIF="else if",ne.Msg.CONTROLS_IF_MSG_IF="if",ne.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",ne.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",ne.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",ne.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",ne.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",ne.Msg.CONTROLS_REPEAT_INPUT_DO="do",ne.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",ne.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",ne.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",ne.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",ne.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",ne.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",ne.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",ne.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",ne.Msg.DELETE_BLOCK="Delete Block",ne.Msg.DELETE_VARIABLE="Delete the '%1' variable",ne.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",ne.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",ne.Msg.DIALOG_CANCEL="Cancel",ne.Msg.DIALOG_OK="OK",ne.Msg.DISABLE_BLOCK="Disable Block",ne.Msg.DUPLICATE_BLOCK="Duplicate",ne.Msg.DUPLICATE_COMMENT="Duplicate Comment",ne.Msg.ENABLE_BLOCK="Enable Block",ne.Msg.EXPAND_ALL="Expand Blocks",ne.Msg.EXPAND_BLOCK="Expand Block",ne.Msg.EXTERNAL_INPUTS="External Inputs",ne.Msg.HELP="Help",ne.Msg.INLINE_INPUTS="Inline Inputs",ne.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",ne.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",ne.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",ne.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",ne.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",ne.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",ne.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",ne.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",ne.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",ne.Msg.LISTS_GET_INDEX_FIRST="first",ne.Msg.LISTS_GET_INDEX_FROM_END="# from end",ne.Msg.LISTS_GET_INDEX_FROM_START="#",ne.Msg.LISTS_GET_INDEX_GET="get",ne.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",ne.Msg.LISTS_GET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",ne.Msg.LISTS_GET_INDEX_LAST="last",ne.Msg.LISTS_GET_INDEX_RANDOM="random",ne.Msg.LISTS_GET_INDEX_REMOVE="remove",ne.Msg.LISTS_GET_INDEX_TAIL="",ne.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",ne.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",ne.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",ne.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",ne.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",ne.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",ne.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",ne.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",ne.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",ne.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",ne.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",ne.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",ne.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",ne.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",ne.Msg.LISTS_GET_SUBLIST_END_LAST="to last",ne.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",ne.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",ne.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",ne.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",ne.Msg.LISTS_GET_SUBLIST_TAIL="",ne.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",ne.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",ne.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",ne.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",ne.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#finding-items-in-a-list",ne.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",ne.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",ne.Msg.LISTS_INLIST="in list",ne.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",ne.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",ne.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",ne.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",ne.Msg.LISTS_LENGTH_TITLE="length of %1",ne.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",ne.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",ne.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",ne.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",ne.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",ne.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",ne.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",ne.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",ne.Msg.LISTS_SET_INDEX_INPUT_TO="as",ne.Msg.LISTS_SET_INDEX_INSERT="insert at",ne.Msg.LISTS_SET_INDEX_SET="set",ne.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",ne.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",ne.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",ne.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",ne.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",ne.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",ne.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",ne.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",ne.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",ne.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",ne.Msg.LISTS_SORT_ORDER_DESCENDING="descending",ne.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",ne.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",ne.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",ne.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",ne.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",ne.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",ne.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",ne.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",ne.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",ne.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",ne.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",ne.Msg.LOGIC_BOOLEAN_FALSE="false",ne.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",ne.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",ne.Msg.LOGIC_BOOLEAN_TRUE="true",ne.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",ne.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",ne.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",ne.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",ne.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",ne.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",ne.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",ne.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",ne.Msg.LOGIC_NEGATE_TITLE="not %1",ne.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",ne.Msg.LOGIC_NULL="null",ne.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",ne.Msg.LOGIC_NULL_TOOLTIP="Returns null.",ne.Msg.LOGIC_OPERATION_AND="and",ne.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",ne.Msg.LOGIC_OPERATION_OR="or",ne.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",ne.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",ne.Msg.LOGIC_TERNARY_CONDITION="test",ne.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",ne.Msg.LOGIC_TERNARY_IF_FALSE="if false",ne.Msg.LOGIC_TERNARY_IF_TRUE="if true",ne.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",ne.Msg.MATH_ADDITION_SYMBOL="+",ne.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",ne.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",ne.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",ne.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",ne.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",ne.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",ne.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",ne.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",ne.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",ne.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",ne.Msg.MATH_CHANGE_TITLE="change %1 by %2",ne.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",ne.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",ne.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: π (3.141…), e (2.718…), φ (1.618…), sqrt(2) (1.414…), sqrt(½) (0.707…), or ∞ (infinity).",ne.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",ne.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",ne.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",ne.Msg.MATH_DIVISION_SYMBOL="÷",ne.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",ne.Msg.MATH_IS_EVEN="is even",ne.Msg.MATH_IS_NEGATIVE="is negative",ne.Msg.MATH_IS_ODD="is odd",ne.Msg.MATH_IS_POSITIVE="is positive",ne.Msg.MATH_IS_PRIME="is prime",ne.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",ne.Msg.MATH_IS_WHOLE="is whole",ne.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",ne.Msg.MATH_MODULO_TITLE="remainder of %1 ÷ %2",ne.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",ne.Msg.MATH_MULTIPLICATION_SYMBOL="×",ne.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",ne.Msg.MATH_NUMBER_TOOLTIP="A number.",ne.Msg.MATH_ONLIST_HELPURL="",ne.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",ne.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",ne.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",ne.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",ne.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",ne.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",ne.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",ne.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",ne.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",ne.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",ne.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",ne.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",ne.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",ne.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",ne.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",ne.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",ne.Msg.MATH_POWER_SYMBOL="^",ne.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",ne.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",ne.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",ne.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",ne.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",ne.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",ne.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",ne.Msg.MATH_ROUND_OPERATOR_ROUND="round",ne.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",ne.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",ne.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",ne.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",ne.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",ne.Msg.MATH_SINGLE_OP_ROOT="square root",ne.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",ne.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",ne.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",ne.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",ne.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",ne.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",ne.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",ne.Msg.MATH_SUBTRACTION_SYMBOL="-",ne.Msg.MATH_TRIG_ACOS="acos",ne.Msg.MATH_TRIG_ASIN="asin",ne.Msg.MATH_TRIG_ATAN="atan",ne.Msg.MATH_TRIG_COS="cos",ne.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",ne.Msg.MATH_TRIG_SIN="sin",ne.Msg.MATH_TRIG_TAN="tan",ne.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",ne.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",ne.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",ne.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",ne.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",ne.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",ne.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",ne.Msg.NEW_NUMBER_VARIABLE="Create number variable...",ne.Msg.NEW_STRING_VARIABLE="Create string variable...",ne.Msg.NEW_VARIABLE="Create variable...",ne.Msg.NEW_VARIABLE_TITLE="New variable name:",ne.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",ne.Msg.ORDINAL_NUMBER_SUFFIX="",ne.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",ne.Msg.PROCEDURES_BEFORE_PARAMS="with:",ne.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",ne.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",ne.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",ne.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",ne.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",ne.Msg.PROCEDURES_CALL_DISABLED_DEF_WARNING="Can't run the user-defined function '%1' because the definition block is disabled.",ne.Msg.PROCEDURES_CREATE_DO="Create '%1'",ne.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",ne.Msg.PROCEDURES_DEFNORETURN_DO="",ne.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",ne.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",ne.Msg.PROCEDURES_DEFNORETURN_TITLE="to",ne.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",ne.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",ne.Msg.PROCEDURES_DEFRETURN_RETURN="return",ne.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",ne.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",ne.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",ne.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",ne.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",ne.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",ne.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",ne.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",ne.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",ne.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",ne.Msg.REDO="Redo",ne.Msg.REMOVE_COMMENT="Remove Comment",ne.Msg.RENAME_VARIABLE="Rename variable...",ne.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",ne.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",ne.Msg.TEXT_APPEND_TITLE="to %1 append text %2",ne.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",ne.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",ne.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",ne.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",ne.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",ne.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",ne.Msg.TEXT_CHARAT_FIRST="get first letter",ne.Msg.TEXT_CHARAT_FROM_END="get letter # from end",ne.Msg.TEXT_CHARAT_FROM_START="get letter #",ne.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",ne.Msg.TEXT_CHARAT_LAST="get last letter",ne.Msg.TEXT_CHARAT_RANDOM="get random letter",ne.Msg.TEXT_CHARAT_TAIL="",ne.Msg.TEXT_CHARAT_TITLE="in text %1 %2",ne.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",ne.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",ne.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",ne.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",ne.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",ne.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",ne.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",ne.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",ne.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",ne.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",ne.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",ne.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",ne.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",ne.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",ne.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",ne.Msg.TEXT_GET_SUBSTRING_TAIL="",ne.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",ne.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",ne.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",ne.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",ne.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",ne.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",ne.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",ne.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",ne.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",ne.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",ne.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",ne.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",ne.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",ne.Msg.TEXT_LENGTH_TITLE="length of %1",ne.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",ne.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",ne.Msg.TEXT_PRINT_TITLE="print %1",ne.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",ne.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",ne.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",ne.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",ne.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",ne.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",ne.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",ne.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",ne.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",ne.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",ne.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",ne.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",ne.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",ne.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",ne.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",ne.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",ne.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",ne.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",ne.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",ne.Msg.TODAY="Today",ne.Msg.UNDO="Undo",ne.Msg.UNNAMED_KEY="unnamed",ne.Msg.VARIABLES_DEFAULT_NAME="item",ne.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",ne.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",ne.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",ne.Msg.VARIABLES_SET="set %1 to %2",ne.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",ne.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",ne.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",ne.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",ne.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",ne.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",ne.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",ne.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",ne.Msg.CONTROLS_FOREACH_INPUT_DO=ne.Msg.CONTROLS_REPEAT_INPUT_DO,ne.Msg.CONTROLS_FOR_INPUT_DO=ne.Msg.CONTROLS_REPEAT_INPUT_DO,ne.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=ne.Msg.CONTROLS_IF_MSG_ELSEIF,ne.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=ne.Msg.CONTROLS_IF_MSG_ELSE,ne.Msg.CONTROLS_IF_IF_TITLE_IF=ne.Msg.CONTROLS_IF_MSG_IF,ne.Msg.CONTROLS_IF_MSG_THEN=ne.Msg.CONTROLS_REPEAT_INPUT_DO,ne.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=ne.Msg.CONTROLS_REPEAT_INPUT_DO,ne.Msg.LISTS_CREATE_WITH_ITEM_TITLE=ne.Msg.VARIABLES_DEFAULT_NAME,ne.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=ne.Msg.LISTS_INLIST,ne.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=ne.Msg.LISTS_INLIST,ne.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=ne.Msg.LISTS_INLIST,ne.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=ne.Msg.LISTS_INLIST,ne.Msg.MATH_CHANGE_TITLE_ITEM=ne.Msg.VARIABLES_DEFAULT_NAME,ne.Msg.PROCEDURES_DEFRETURN_COMMENT=ne.Msg.PROCEDURES_DEFNORETURN_COMMENT,ne.Msg.PROCEDURES_DEFRETURN_DO=ne.Msg.PROCEDURES_DEFNORETURN_DO,ne.Msg.PROCEDURES_DEFRETURN_PROCEDURE=ne.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,ne.Msg.PROCEDURES_DEFRETURN_TITLE=ne.Msg.PROCEDURES_DEFNORETURN_TITLE,ne.Msg.TEXT_APPEND_VARIABLE=ne.Msg.VARIABLES_DEFAULT_NAME,ne.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=ne.Msg.VARIABLES_DEFAULT_NAME,ne.Msg.COLOUR_HUE="20",ne.Msg.LISTS_HUE="260",ne.Msg.LOGIC_HUE="210",ne.Msg.LOOPS_HUE="120",ne.Msg.MATH_HUE="230",ne.Msg.PROCEDURES_HUE="290",ne.Msg.TEXTS_HUE="160",ne.Msg.VARIABLES_DYNAMIC_HUE="310",ne.Msg.VARIABLES_HUE="330",ne.Msg})})(en$2);var enExports=en$2.exports;const en$1=getDefaultExportFromCjs(enExports),{LOGIC_HUE,LOOPS_HUE,MATH_HUE,TEXTS_HUE,LISTS_HUE,COLOUR_HUE,VARIABLES_HUE,VARIABLES_DYNAMIC_HUE,PROCEDURES_HUE,VARIABLES_DEFAULT_NAME,UNNAMED_KEY,TODAY,DUPLICATE_BLOCK,ADD_COMMENT,REMOVE_COMMENT,DUPLICATE_COMMENT,EXTERNAL_INPUTS,INLINE_INPUTS,DELETE_BLOCK,DELETE_X_BLOCKS,DELETE_ALL_BLOCKS,CLEAN_UP,COLLAPSE_BLOCK,COLLAPSE_ALL,EXPAND_BLOCK,EXPAND_ALL,DISABLE_BLOCK,ENABLE_BLOCK,HELP,UNDO,REDO,CHANGE_VALUE_TITLE,RENAME_VARIABLE,RENAME_VARIABLE_TITLE,NEW_VARIABLE,NEW_STRING_VARIABLE,NEW_NUMBER_VARIABLE,NEW_COLOUR_VARIABLE,NEW_VARIABLE_TYPE_TITLE,NEW_VARIABLE_TITLE,VARIABLE_ALREADY_EXISTS,VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER,DELETE_VARIABLE_CONFIRMATION,CANNOT_DELETE_VARIABLE_PROCEDURE,DELETE_VARIABLE,COLOUR_PICKER_HELPURL,COLOUR_PICKER_TOOLTIP,COLOUR_RANDOM_HELPURL,COLOUR_RANDOM_TITLE,COLOUR_RANDOM_TOOLTIP,COLOUR_RGB_HELPURL,COLOUR_RGB_TITLE,COLOUR_RGB_RED,COLOUR_RGB_GREEN,COLOUR_RGB_BLUE,COLOUR_RGB_TOOLTIP,COLOUR_BLEND_HELPURL,COLOUR_BLEND_TITLE,COLOUR_BLEND_COLOUR1,COLOUR_BLEND_COLOUR2,COLOUR_BLEND_RATIO,COLOUR_BLEND_TOOLTIP,CONTROLS_REPEAT_HELPURL,CONTROLS_REPEAT_TITLE,CONTROLS_REPEAT_INPUT_DO,CONTROLS_REPEAT_TOOLTIP,CONTROLS_WHILEUNTIL_HELPURL,CONTROLS_WHILEUNTIL_INPUT_DO,CONTROLS_WHILEUNTIL_OPERATOR_WHILE,CONTROLS_WHILEUNTIL_OPERATOR_UNTIL,CONTROLS_WHILEUNTIL_TOOLTIP_WHILE,CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL,CONTROLS_FOR_HELPURL,CONTROLS_FOR_TOOLTIP,CONTROLS_FOR_TITLE,CONTROLS_FOR_INPUT_DO,CONTROLS_FOREACH_HELPURL,CONTROLS_FOREACH_TITLE,CONTROLS_FOREACH_INPUT_DO,CONTROLS_FOREACH_TOOLTIP,CONTROLS_FLOW_STATEMENTS_HELPURL,CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK,CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE,CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK,CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE,CONTROLS_FLOW_STATEMENTS_WARNING,CONTROLS_IF_HELPURL,CONTROLS_IF_TOOLTIP_1,CONTROLS_IF_TOOLTIP_2,CONTROLS_IF_TOOLTIP_3,CONTROLS_IF_TOOLTIP_4,CONTROLS_IF_MSG_IF,CONTROLS_IF_MSG_ELSEIF,CONTROLS_IF_MSG_ELSE,CONTROLS_IF_MSG_THEN,CONTROLS_IF_IF_TITLE_IF,CONTROLS_IF_IF_TOOLTIP,CONTROLS_IF_ELSEIF_TITLE_ELSEIF,CONTROLS_IF_ELSEIF_TOOLTIP,CONTROLS_IF_ELSE_TITLE_ELSE,CONTROLS_IF_ELSE_TOOLTIP,LOGIC_COMPARE_HELPURL,LOGIC_COMPARE_TOOLTIP_EQ,LOGIC_COMPARE_TOOLTIP_NEQ,LOGIC_COMPARE_TOOLTIP_LT,LOGIC_COMPARE_TOOLTIP_LTE,LOGIC_COMPARE_TOOLTIP_GT,LOGIC_COMPARE_TOOLTIP_GTE,LOGIC_OPERATION_HELPURL,LOGIC_OPERATION_TOOLTIP_AND,LOGIC_OPERATION_AND,LOGIC_OPERATION_TOOLTIP_OR,LOGIC_OPERATION_OR,LOGIC_NEGATE_HELPURL,LOGIC_NEGATE_TITLE,LOGIC_NEGATE_TOOLTIP,LOGIC_BOOLEAN_HELPURL,LOGIC_BOOLEAN_TRUE,LOGIC_BOOLEAN_FALSE,LOGIC_BOOLEAN_TOOLTIP,LOGIC_NULL_HELPURL,LOGIC_NULL,LOGIC_NULL_TOOLTIP,LOGIC_TERNARY_HELPURL,LOGIC_TERNARY_CONDITION,LOGIC_TERNARY_IF_TRUE,LOGIC_TERNARY_IF_FALSE,LOGIC_TERNARY_TOOLTIP,MATH_NUMBER_HELPURL,MATH_NUMBER_TOOLTIP,MATH_ADDITION_SYMBOL,MATH_SUBTRACTION_SYMBOL,MATH_DIVISION_SYMBOL,MATH_MULTIPLICATION_SYMBOL,MATH_POWER_SYMBOL,MATH_TRIG_SIN,MATH_TRIG_COS,MATH_TRIG_TAN,MATH_TRIG_ASIN,MATH_TRIG_ACOS,MATH_TRIG_ATAN,MATH_ARITHMETIC_HELPURL,MATH_ARITHMETIC_TOOLTIP_ADD,MATH_ARITHMETIC_TOOLTIP_MINUS,MATH_ARITHMETIC_TOOLTIP_MULTIPLY,MATH_ARITHMETIC_TOOLTIP_DIVIDE,MATH_ARITHMETIC_TOOLTIP_POWER,MATH_SINGLE_HELPURL,MATH_SINGLE_OP_ROOT,MATH_SINGLE_TOOLTIP_ROOT,MATH_SINGLE_OP_ABSOLUTE,MATH_SINGLE_TOOLTIP_ABS,MATH_SINGLE_TOOLTIP_NEG,MATH_SINGLE_TOOLTIP_LN,MATH_SINGLE_TOOLTIP_LOG10,MATH_SINGLE_TOOLTIP_EXP,MATH_SINGLE_TOOLTIP_POW10,MATH_TRIG_HELPURL,MATH_TRIG_TOOLTIP_SIN,MATH_TRIG_TOOLTIP_COS,MATH_TRIG_TOOLTIP_TAN,MATH_TRIG_TOOLTIP_ASIN,MATH_TRIG_TOOLTIP_ACOS,MATH_TRIG_TOOLTIP_ATAN,MATH_CONSTANT_HELPURL,MATH_CONSTANT_TOOLTIP,MATH_IS_EVEN,MATH_IS_ODD,MATH_IS_PRIME,MATH_IS_WHOLE,MATH_IS_POSITIVE,MATH_IS_NEGATIVE,MATH_IS_DIVISIBLE_BY,MATH_IS_TOOLTIP,MATH_CHANGE_HELPURL,MATH_CHANGE_TITLE,MATH_CHANGE_TITLE_ITEM,MATH_CHANGE_TOOLTIP,MATH_ROUND_HELPURL,MATH_ROUND_TOOLTIP,MATH_ROUND_OPERATOR_ROUND,MATH_ROUND_OPERATOR_ROUNDUP,MATH_ROUND_OPERATOR_ROUNDDOWN,MATH_ONLIST_HELPURL,MATH_ONLIST_OPERATOR_SUM,MATH_ONLIST_TOOLTIP_SUM,MATH_ONLIST_OPERATOR_MIN,MATH_ONLIST_TOOLTIP_MIN,MATH_ONLIST_OPERATOR_MAX,MATH_ONLIST_TOOLTIP_MAX,MATH_ONLIST_OPERATOR_AVERAGE,MATH_ONLIST_TOOLTIP_AVERAGE,MATH_ONLIST_OPERATOR_MEDIAN,MATH_ONLIST_TOOLTIP_MEDIAN,MATH_ONLIST_OPERATOR_MODE,MATH_ONLIST_TOOLTIP_MODE,MATH_ONLIST_OPERATOR_STD_DEV,MATH_ONLIST_TOOLTIP_STD_DEV,MATH_ONLIST_OPERATOR_RANDOM,MATH_ONLIST_TOOLTIP_RANDOM,MATH_MODULO_HELPURL,MATH_MODULO_TITLE,MATH_MODULO_TOOLTIP,MATH_CONSTRAIN_HELPURL,MATH_CONSTRAIN_TITLE,MATH_CONSTRAIN_TOOLTIP,MATH_RANDOM_INT_HELPURL,MATH_RANDOM_INT_TITLE,MATH_RANDOM_INT_TOOLTIP,MATH_RANDOM_FLOAT_HELPURL,MATH_RANDOM_FLOAT_TITLE_RANDOM,MATH_RANDOM_FLOAT_TOOLTIP,MATH_ATAN2_HELPURL,MATH_ATAN2_TITLE,MATH_ATAN2_TOOLTIP,TEXT_TEXT_HELPURL,TEXT_TEXT_TOOLTIP,TEXT_JOIN_HELPURL,TEXT_JOIN_TITLE_CREATEWITH,TEXT_JOIN_TOOLTIP,TEXT_CREATE_JOIN_TITLE_JOIN,TEXT_CREATE_JOIN_TOOLTIP,TEXT_CREATE_JOIN_ITEM_TITLE_ITEM,TEXT_CREATE_JOIN_ITEM_TOOLTIP,TEXT_APPEND_HELPURL,TEXT_APPEND_TITLE,TEXT_APPEND_VARIABLE,TEXT_APPEND_TOOLTIP,TEXT_LENGTH_HELPURL,TEXT_LENGTH_TITLE,TEXT_LENGTH_TOOLTIP,TEXT_ISEMPTY_HELPURL,TEXT_ISEMPTY_TITLE,TEXT_ISEMPTY_TOOLTIP,TEXT_INDEXOF_HELPURL,TEXT_INDEXOF_TOOLTIP,TEXT_INDEXOF_TITLE,TEXT_INDEXOF_OPERATOR_FIRST,TEXT_INDEXOF_OPERATOR_LAST,TEXT_CHARAT_HELPURL,TEXT_CHARAT_TITLE,TEXT_CHARAT_FROM_START,TEXT_CHARAT_FROM_END,TEXT_CHARAT_FIRST,TEXT_CHARAT_LAST,TEXT_CHARAT_RANDOM,TEXT_CHARAT_TAIL,TEXT_CHARAT_TOOLTIP,TEXT_GET_SUBSTRING_TOOLTIP,TEXT_GET_SUBSTRING_HELPURL,TEXT_GET_SUBSTRING_INPUT_IN_TEXT,TEXT_GET_SUBSTRING_START_FROM_START,TEXT_GET_SUBSTRING_START_FROM_END,TEXT_GET_SUBSTRING_START_FIRST,TEXT_GET_SUBSTRING_END_FROM_START,TEXT_GET_SUBSTRING_END_FROM_END,TEXT_GET_SUBSTRING_END_LAST,TEXT_GET_SUBSTRING_TAIL,TEXT_CHANGECASE_HELPURL,TEXT_CHANGECASE_TOOLTIP,TEXT_CHANGECASE_OPERATOR_UPPERCASE,TEXT_CHANGECASE_OPERATOR_LOWERCASE,TEXT_CHANGECASE_OPERATOR_TITLECASE,TEXT_TRIM_HELPURL,TEXT_TRIM_TOOLTIP,TEXT_TRIM_OPERATOR_BOTH,TEXT_TRIM_OPERATOR_LEFT,TEXT_TRIM_OPERATOR_RIGHT,TEXT_PRINT_HELPURL,TEXT_PRINT_TITLE,TEXT_PRINT_TOOLTIP,TEXT_PROMPT_HELPURL,TEXT_PROMPT_TYPE_TEXT,TEXT_PROMPT_TYPE_NUMBER,TEXT_PROMPT_TOOLTIP_NUMBER,TEXT_PROMPT_TOOLTIP_TEXT,TEXT_COUNT_MESSAGE0,TEXT_COUNT_HELPURL,TEXT_COUNT_TOOLTIP,TEXT_REPLACE_MESSAGE0,TEXT_REPLACE_HELPURL,TEXT_REPLACE_TOOLTIP,TEXT_REVERSE_MESSAGE0,TEXT_REVERSE_HELPURL,TEXT_REVERSE_TOOLTIP,LISTS_CREATE_EMPTY_HELPURL,LISTS_CREATE_EMPTY_TITLE,LISTS_CREATE_EMPTY_TOOLTIP,LISTS_CREATE_WITH_HELPURL,LISTS_CREATE_WITH_TOOLTIP,LISTS_CREATE_WITH_INPUT_WITH,LISTS_CREATE_WITH_CONTAINER_TITLE_ADD,LISTS_CREATE_WITH_CONTAINER_TOOLTIP,LISTS_CREATE_WITH_ITEM_TITLE,LISTS_CREATE_WITH_ITEM_TOOLTIP,LISTS_REPEAT_HELPURL,LISTS_REPEAT_TOOLTIP,LISTS_REPEAT_TITLE,LISTS_LENGTH_HELPURL,LISTS_LENGTH_TITLE,LISTS_LENGTH_TOOLTIP,LISTS_ISEMPTY_HELPURL,LISTS_ISEMPTY_TITLE,LISTS_ISEMPTY_TOOLTIP,LISTS_INLIST,LISTS_INDEX_OF_HELPURL,LISTS_INDEX_OF_INPUT_IN_LIST,LISTS_INDEX_OF_FIRST,LISTS_INDEX_OF_LAST,LISTS_INDEX_OF_TOOLTIP,LISTS_GET_INDEX_HELPURL,LISTS_GET_INDEX_GET,LISTS_GET_INDEX_GET_REMOVE,LISTS_GET_INDEX_REMOVE,LISTS_GET_INDEX_FROM_START,LISTS_GET_INDEX_FROM_END,LISTS_GET_INDEX_FIRST,LISTS_GET_INDEX_LAST,LISTS_GET_INDEX_RANDOM,LISTS_GET_INDEX_TAIL,LISTS_GET_INDEX_INPUT_IN_LIST,LISTS_INDEX_FROM_START_TOOLTIP,LISTS_INDEX_FROM_END_TOOLTIP,LISTS_GET_INDEX_TOOLTIP_GET_FROM,LISTS_GET_INDEX_TOOLTIP_GET_FIRST,LISTS_GET_INDEX_TOOLTIP_GET_LAST,LISTS_GET_INDEX_TOOLTIP_GET_RANDOM,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM,LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM,LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST,LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST,LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM,LISTS_SET_INDEX_HELPURL,LISTS_SET_INDEX_INPUT_IN_LIST,LISTS_SET_INDEX_SET,LISTS_SET_INDEX_INSERT,LISTS_SET_INDEX_INPUT_TO,LISTS_SET_INDEX_TOOLTIP_SET_FROM,LISTS_SET_INDEX_TOOLTIP_SET_FIRST,LISTS_SET_INDEX_TOOLTIP_SET_LAST,LISTS_SET_INDEX_TOOLTIP_SET_RANDOM,LISTS_SET_INDEX_TOOLTIP_INSERT_FROM,LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST,LISTS_SET_INDEX_TOOLTIP_INSERT_LAST,LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM,LISTS_GET_SUBLIST_HELPURL,LISTS_GET_SUBLIST_INPUT_IN_LIST,LISTS_GET_SUBLIST_START_FROM_START,LISTS_GET_SUBLIST_START_FROM_END,LISTS_GET_SUBLIST_START_FIRST,LISTS_GET_SUBLIST_END_FROM_START,LISTS_GET_SUBLIST_END_FROM_END,LISTS_GET_SUBLIST_END_LAST,LISTS_GET_SUBLIST_TAIL,LISTS_GET_SUBLIST_TOOLTIP,LISTS_SORT_HELPURL,LISTS_SORT_TITLE,LISTS_SORT_TOOLTIP,LISTS_SORT_ORDER_ASCENDING,LISTS_SORT_ORDER_DESCENDING,LISTS_SORT_TYPE_NUMERIC,LISTS_SORT_TYPE_TEXT,LISTS_SORT_TYPE_IGNORECASE,LISTS_SPLIT_HELPURL,LISTS_SPLIT_LIST_FROM_TEXT,LISTS_SPLIT_TEXT_FROM_LIST,LISTS_SPLIT_WITH_DELIMITER,LISTS_SPLIT_TOOLTIP_SPLIT,LISTS_SPLIT_TOOLTIP_JOIN,LISTS_REVERSE_HELPURL,LISTS_REVERSE_MESSAGE0,LISTS_REVERSE_TOOLTIP,ORDINAL_NUMBER_SUFFIX,VARIABLES_GET_HELPURL,VARIABLES_GET_TOOLTIP,VARIABLES_GET_CREATE_SET,VARIABLES_SET_HELPURL,VARIABLES_SET,VARIABLES_SET_TOOLTIP,VARIABLES_SET_CREATE_GET,PROCEDURES_DEFNORETURN_HELPURL,PROCEDURES_DEFNORETURN_TITLE,PROCEDURES_DEFNORETURN_PROCEDURE,PROCEDURES_BEFORE_PARAMS,PROCEDURES_CALL_BEFORE_PARAMS,PROCEDURES_CALL_DISABLED_DEF_WARNING,PROCEDURES_DEFNORETURN_DO,PROCEDURES_DEFNORETURN_TOOLTIP,PROCEDURES_DEFNORETURN_COMMENT,PROCEDURES_DEFRETURN_HELPURL,PROCEDURES_DEFRETURN_TITLE,PROCEDURES_DEFRETURN_PROCEDURE,PROCEDURES_DEFRETURN_DO,PROCEDURES_DEFRETURN_COMMENT,PROCEDURES_DEFRETURN_RETURN,PROCEDURES_DEFRETURN_TOOLTIP,PROCEDURES_ALLOW_STATEMENTS,PROCEDURES_DEF_DUPLICATE_WARNING,PROCEDURES_CALLNORETURN_HELPURL,PROCEDURES_CALLNORETURN_TOOLTIP,PROCEDURES_CALLRETURN_HELPURL,PROCEDURES_CALLRETURN_TOOLTIP,PROCEDURES_MUTATORCONTAINER_TITLE,PROCEDURES_MUTATORCONTAINER_TOOLTIP,PROCEDURES_MUTATORARG_TITLE,PROCEDURES_MUTATORARG_TOOLTIP,PROCEDURES_HIGHLIGHT_DEF,PROCEDURES_CREATE_DO,PROCEDURES_IFRETURN_TOOLTIP,PROCEDURES_IFRETURN_HELPURL,PROCEDURES_IFRETURN_WARNING,WORKSPACE_COMMENT_DEFAULT_TEXT,WORKSPACE_ARIA_LABEL,COLLAPSED_WARNINGS_WARNING,DIALOG_OK,DIALOG_CANCEL}=en$1,en=Object.freeze(Object.defineProperty({__proto__:null,ADD_COMMENT,CANNOT_DELETE_VARIABLE_PROCEDURE,CHANGE_VALUE_TITLE,CLEAN_UP,COLLAPSED_WARNINGS_WARNING,COLLAPSE_ALL,COLLAPSE_BLOCK,COLOUR_BLEND_COLOUR1,COLOUR_BLEND_COLOUR2,COLOUR_BLEND_HELPURL,COLOUR_BLEND_RATIO,COLOUR_BLEND_TITLE,COLOUR_BLEND_TOOLTIP,COLOUR_HUE,COLOUR_PICKER_HELPURL,COLOUR_PICKER_TOOLTIP,COLOUR_RANDOM_HELPURL,COLOUR_RANDOM_TITLE,COLOUR_RANDOM_TOOLTIP,COLOUR_RGB_BLUE,COLOUR_RGB_GREEN,COLOUR_RGB_HELPURL,COLOUR_RGB_RED,COLOUR_RGB_TITLE,COLOUR_RGB_TOOLTIP,CONTROLS_FLOW_STATEMENTS_HELPURL,CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK,CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE,CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK,CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE,CONTROLS_FLOW_STATEMENTS_WARNING,CONTROLS_FOREACH_HELPURL,CONTROLS_FOREACH_INPUT_DO,CONTROLS_FOREACH_TITLE,CONTROLS_FOREACH_TOOLTIP,CONTROLS_FOR_HELPURL,CONTROLS_FOR_INPUT_DO,CONTROLS_FOR_TITLE,CONTROLS_FOR_TOOLTIP,CONTROLS_IF_ELSEIF_TITLE_ELSEIF,CONTROLS_IF_ELSEIF_TOOLTIP,CONTROLS_IF_ELSE_TITLE_ELSE,CONTROLS_IF_ELSE_TOOLTIP,CONTROLS_IF_HELPURL,CONTROLS_IF_IF_TITLE_IF,CONTROLS_IF_IF_TOOLTIP,CONTROLS_IF_MSG_ELSE,CONTROLS_IF_MSG_ELSEIF,CONTROLS_IF_MSG_IF,CONTROLS_IF_MSG_THEN,CONTROLS_IF_TOOLTIP_1,CONTROLS_IF_TOOLTIP_2,CONTROLS_IF_TOOLTIP_3,CONTROLS_IF_TOOLTIP_4,CONTROLS_REPEAT_HELPURL,CONTROLS_REPEAT_INPUT_DO,CONTROLS_REPEAT_TITLE,CONTROLS_REPEAT_TOOLTIP,CONTROLS_WHILEUNTIL_HELPURL,CONTROLS_WHILEUNTIL_INPUT_DO,CONTROLS_WHILEUNTIL_OPERATOR_UNTIL,CONTROLS_WHILEUNTIL_OPERATOR_WHILE,CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL,CONTROLS_WHILEUNTIL_TOOLTIP_WHILE,DELETE_ALL_BLOCKS,DELETE_BLOCK,DELETE_VARIABLE,DELETE_VARIABLE_CONFIRMATION,DELETE_X_BLOCKS,DIALOG_CANCEL,DIALOG_OK,DISABLE_BLOCK,DUPLICATE_BLOCK,DUPLICATE_COMMENT,ENABLE_BLOCK,EXPAND_ALL,EXPAND_BLOCK,EXTERNAL_INPUTS,HELP,INLINE_INPUTS,LISTS_CREATE_EMPTY_HELPURL,LISTS_CREATE_EMPTY_TITLE,LISTS_CREATE_EMPTY_TOOLTIP,LISTS_CREATE_WITH_CONTAINER_TITLE_ADD,LISTS_CREATE_WITH_CONTAINER_TOOLTIP,LISTS_CREATE_WITH_HELPURL,LISTS_CREATE_WITH_INPUT_WITH,LISTS_CREATE_WITH_ITEM_TITLE,LISTS_CREATE_WITH_ITEM_TOOLTIP,LISTS_CREATE_WITH_TOOLTIP,LISTS_GET_INDEX_FIRST,LISTS_GET_INDEX_FROM_END,LISTS_GET_INDEX_FROM_START,LISTS_GET_INDEX_GET,LISTS_GET_INDEX_GET_REMOVE,LISTS_GET_INDEX_HELPURL,LISTS_GET_INDEX_INPUT_IN_LIST,LISTS_GET_INDEX_LAST,LISTS_GET_INDEX_RANDOM,LISTS_GET_INDEX_REMOVE,LISTS_GET_INDEX_TAIL,LISTS_GET_INDEX_TOOLTIP_GET_FIRST,LISTS_GET_INDEX_TOOLTIP_GET_FROM,LISTS_GET_INDEX_TOOLTIP_GET_LAST,LISTS_GET_INDEX_TOOLTIP_GET_RANDOM,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM,LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST,LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM,LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST,LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM,LISTS_GET_SUBLIST_END_FROM_END,LISTS_GET_SUBLIST_END_FROM_START,LISTS_GET_SUBLIST_END_LAST,LISTS_GET_SUBLIST_HELPURL,LISTS_GET_SUBLIST_INPUT_IN_LIST,LISTS_GET_SUBLIST_START_FIRST,LISTS_GET_SUBLIST_START_FROM_END,LISTS_GET_SUBLIST_START_FROM_START,LISTS_GET_SUBLIST_TAIL,LISTS_GET_SUBLIST_TOOLTIP,LISTS_HUE,LISTS_INDEX_FROM_END_TOOLTIP,LISTS_INDEX_FROM_START_TOOLTIP,LISTS_INDEX_OF_FIRST,LISTS_INDEX_OF_HELPURL,LISTS_INDEX_OF_INPUT_IN_LIST,LISTS_INDEX_OF_LAST,LISTS_INDEX_OF_TOOLTIP,LISTS_INLIST,LISTS_ISEMPTY_HELPURL,LISTS_ISEMPTY_TITLE,LISTS_ISEMPTY_TOOLTIP,LISTS_LENGTH_HELPURL,LISTS_LENGTH_TITLE,LISTS_LENGTH_TOOLTIP,LISTS_REPEAT_HELPURL,LISTS_REPEAT_TITLE,LISTS_REPEAT_TOOLTIP,LISTS_REVERSE_HELPURL,LISTS_REVERSE_MESSAGE0,LISTS_REVERSE_TOOLTIP,LISTS_SET_INDEX_HELPURL,LISTS_SET_INDEX_INPUT_IN_LIST,LISTS_SET_INDEX_INPUT_TO,LISTS_SET_INDEX_INSERT,LISTS_SET_INDEX_SET,LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST,LISTS_SET_INDEX_TOOLTIP_INSERT_FROM,LISTS_SET_INDEX_TOOLTIP_INSERT_LAST,LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM,LISTS_SET_INDEX_TOOLTIP_SET_FIRST,LISTS_SET_INDEX_TOOLTIP_SET_FROM,LISTS_SET_INDEX_TOOLTIP_SET_LAST,LISTS_SET_INDEX_TOOLTIP_SET_RANDOM,LISTS_SORT_HELPURL,LISTS_SORT_ORDER_ASCENDING,LISTS_SORT_ORDER_DESCENDING,LISTS_SORT_TITLE,LISTS_SORT_TOOLTIP,LISTS_SORT_TYPE_IGNORECASE,LISTS_SORT_TYPE_NUMERIC,LISTS_SORT_TYPE_TEXT,LISTS_SPLIT_HELPURL,LISTS_SPLIT_LIST_FROM_TEXT,LISTS_SPLIT_TEXT_FROM_LIST,LISTS_SPLIT_TOOLTIP_JOIN,LISTS_SPLIT_TOOLTIP_SPLIT,LISTS_SPLIT_WITH_DELIMITER,LOGIC_BOOLEAN_FALSE,LOGIC_BOOLEAN_HELPURL,LOGIC_BOOLEAN_TOOLTIP,LOGIC_BOOLEAN_TRUE,LOGIC_COMPARE_HELPURL,LOGIC_COMPARE_TOOLTIP_EQ,LOGIC_COMPARE_TOOLTIP_GT,LOGIC_COMPARE_TOOLTIP_GTE,LOGIC_COMPARE_TOOLTIP_LT,LOGIC_COMPARE_TOOLTIP_LTE,LOGIC_COMPARE_TOOLTIP_NEQ,LOGIC_HUE,LOGIC_NEGATE_HELPURL,LOGIC_NEGATE_TITLE,LOGIC_NEGATE_TOOLTIP,LOGIC_NULL,LOGIC_NULL_HELPURL,LOGIC_NULL_TOOLTIP,LOGIC_OPERATION_AND,LOGIC_OPERATION_HELPURL,LOGIC_OPERATION_OR,LOGIC_OPERATION_TOOLTIP_AND,LOGIC_OPERATION_TOOLTIP_OR,LOGIC_TERNARY_CONDITION,LOGIC_TERNARY_HELPURL,LOGIC_TERNARY_IF_FALSE,LOGIC_TERNARY_IF_TRUE,LOGIC_TERNARY_TOOLTIP,LOOPS_HUE,MATH_ADDITION_SYMBOL,MATH_ARITHMETIC_HELPURL,MATH_ARITHMETIC_TOOLTIP_ADD,MATH_ARITHMETIC_TOOLTIP_DIVIDE,MATH_ARITHMETIC_TOOLTIP_MINUS,MATH_ARITHMETIC_TOOLTIP_MULTIPLY,MATH_ARITHMETIC_TOOLTIP_POWER,MATH_ATAN2_HELPURL,MATH_ATAN2_TITLE,MATH_ATAN2_TOOLTIP,MATH_CHANGE_HELPURL,MATH_CHANGE_TITLE,MATH_CHANGE_TITLE_ITEM,MATH_CHANGE_TOOLTIP,MATH_CONSTANT_HELPURL,MATH_CONSTANT_TOOLTIP,MATH_CONSTRAIN_HELPURL,MATH_CONSTRAIN_TITLE,MATH_CONSTRAIN_TOOLTIP,MATH_DIVISION_SYMBOL,MATH_HUE,MATH_IS_DIVISIBLE_BY,MATH_IS_EVEN,MATH_IS_NEGATIVE,MATH_IS_ODD,MATH_IS_POSITIVE,MATH_IS_PRIME,MATH_IS_TOOLTIP,MATH_IS_WHOLE,MATH_MODULO_HELPURL,MATH_MODULO_TITLE,MATH_MODULO_TOOLTIP,MATH_MULTIPLICATION_SYMBOL,MATH_NUMBER_HELPURL,MATH_NUMBER_TOOLTIP,MATH_ONLIST_HELPURL,MATH_ONLIST_OPERATOR_AVERAGE,MATH_ONLIST_OPERATOR_MAX,MATH_ONLIST_OPERATOR_MEDIAN,MATH_ONLIST_OPERATOR_MIN,MATH_ONLIST_OPERATOR_MODE,MATH_ONLIST_OPERATOR_RANDOM,MATH_ONLIST_OPERATOR_STD_DEV,MATH_ONLIST_OPERATOR_SUM,MATH_ONLIST_TOOLTIP_AVERAGE,MATH_ONLIST_TOOLTIP_MAX,MATH_ONLIST_TOOLTIP_MEDIAN,MATH_ONLIST_TOOLTIP_MIN,MATH_ONLIST_TOOLTIP_MODE,MATH_ONLIST_TOOLTIP_RANDOM,MATH_ONLIST_TOOLTIP_STD_DEV,MATH_ONLIST_TOOLTIP_SUM,MATH_POWER_SYMBOL,MATH_RANDOM_FLOAT_HELPURL,MATH_RANDOM_FLOAT_TITLE_RANDOM,MATH_RANDOM_FLOAT_TOOLTIP,MATH_RANDOM_INT_HELPURL,MATH_RANDOM_INT_TITLE,MATH_RANDOM_INT_TOOLTIP,MATH_ROUND_HELPURL,MATH_ROUND_OPERATOR_ROUND,MATH_ROUND_OPERATOR_ROUNDDOWN,MATH_ROUND_OPERATOR_ROUNDUP,MATH_ROUND_TOOLTIP,MATH_SINGLE_HELPURL,MATH_SINGLE_OP_ABSOLUTE,MATH_SINGLE_OP_ROOT,MATH_SINGLE_TOOLTIP_ABS,MATH_SINGLE_TOOLTIP_EXP,MATH_SINGLE_TOOLTIP_LN,MATH_SINGLE_TOOLTIP_LOG10,MATH_SINGLE_TOOLTIP_NEG,MATH_SINGLE_TOOLTIP_POW10,MATH_SINGLE_TOOLTIP_ROOT,MATH_SUBTRACTION_SYMBOL,MATH_TRIG_ACOS,MATH_TRIG_ASIN,MATH_TRIG_ATAN,MATH_TRIG_COS,MATH_TRIG_HELPURL,MATH_TRIG_SIN,MATH_TRIG_TAN,MATH_TRIG_TOOLTIP_ACOS,MATH_TRIG_TOOLTIP_ASIN,MATH_TRIG_TOOLTIP_ATAN,MATH_TRIG_TOOLTIP_COS,MATH_TRIG_TOOLTIP_SIN,MATH_TRIG_TOOLTIP_TAN,NEW_COLOUR_VARIABLE,NEW_NUMBER_VARIABLE,NEW_STRING_VARIABLE,NEW_VARIABLE,NEW_VARIABLE_TITLE,NEW_VARIABLE_TYPE_TITLE,ORDINAL_NUMBER_SUFFIX,PROCEDURES_ALLOW_STATEMENTS,PROCEDURES_BEFORE_PARAMS,PROCEDURES_CALLNORETURN_HELPURL,PROCEDURES_CALLNORETURN_TOOLTIP,PROCEDURES_CALLRETURN_HELPURL,PROCEDURES_CALLRETURN_TOOLTIP,PROCEDURES_CALL_BEFORE_PARAMS,PROCEDURES_CALL_DISABLED_DEF_WARNING,PROCEDURES_CREATE_DO,PROCEDURES_DEFNORETURN_COMMENT,PROCEDURES_DEFNORETURN_DO,PROCEDURES_DEFNORETURN_HELPURL,PROCEDURES_DEFNORETURN_PROCEDURE,PROCEDURES_DEFNORETURN_TITLE,PROCEDURES_DEFNORETURN_TOOLTIP,PROCEDURES_DEFRETURN_COMMENT,PROCEDURES_DEFRETURN_DO,PROCEDURES_DEFRETURN_HELPURL,PROCEDURES_DEFRETURN_PROCEDURE,PROCEDURES_DEFRETURN_RETURN,PROCEDURES_DEFRETURN_TITLE,PROCEDURES_DEFRETURN_TOOLTIP,PROCEDURES_DEF_DUPLICATE_WARNING,PROCEDURES_HIGHLIGHT_DEF,PROCEDURES_HUE,PROCEDURES_IFRETURN_HELPURL,PROCEDURES_IFRETURN_TOOLTIP,PROCEDURES_IFRETURN_WARNING,PROCEDURES_MUTATORARG_TITLE,PROCEDURES_MUTATORARG_TOOLTIP,PROCEDURES_MUTATORCONTAINER_TITLE,PROCEDURES_MUTATORCONTAINER_TOOLTIP,REDO,REMOVE_COMMENT,RENAME_VARIABLE,RENAME_VARIABLE_TITLE,TEXTS_HUE,TEXT_APPEND_HELPURL,TEXT_APPEND_TITLE,TEXT_APPEND_TOOLTIP,TEXT_APPEND_VARIABLE,TEXT_CHANGECASE_HELPURL,TEXT_CHANGECASE_OPERATOR_LOWERCASE,TEXT_CHANGECASE_OPERATOR_TITLECASE,TEXT_CHANGECASE_OPERATOR_UPPERCASE,TEXT_CHANGECASE_TOOLTIP,TEXT_CHARAT_FIRST,TEXT_CHARAT_FROM_END,TEXT_CHARAT_FROM_START,TEXT_CHARAT_HELPURL,TEXT_CHARAT_LAST,TEXT_CHARAT_RANDOM,TEXT_CHARAT_TAIL,TEXT_CHARAT_TITLE,TEXT_CHARAT_TOOLTIP,TEXT_COUNT_HELPURL,TEXT_COUNT_MESSAGE0,TEXT_COUNT_TOOLTIP,TEXT_CREATE_JOIN_ITEM_TITLE_ITEM,TEXT_CREATE_JOIN_ITEM_TOOLTIP,TEXT_CREATE_JOIN_TITLE_JOIN,TEXT_CREATE_JOIN_TOOLTIP,TEXT_GET_SUBSTRING_END_FROM_END,TEXT_GET_SUBSTRING_END_FROM_START,TEXT_GET_SUBSTRING_END_LAST,TEXT_GET_SUBSTRING_HELPURL,TEXT_GET_SUBSTRING_INPUT_IN_TEXT,TEXT_GET_SUBSTRING_START_FIRST,TEXT_GET_SUBSTRING_START_FROM_END,TEXT_GET_SUBSTRING_START_FROM_START,TEXT_GET_SUBSTRING_TAIL,TEXT_GET_SUBSTRING_TOOLTIP,TEXT_INDEXOF_HELPURL,TEXT_INDEXOF_OPERATOR_FIRST,TEXT_INDEXOF_OPERATOR_LAST,TEXT_INDEXOF_TITLE,TEXT_INDEXOF_TOOLTIP,TEXT_ISEMPTY_HELPURL,TEXT_ISEMPTY_TITLE,TEXT_ISEMPTY_TOOLTIP,TEXT_JOIN_HELPURL,TEXT_JOIN_TITLE_CREATEWITH,TEXT_JOIN_TOOLTIP,TEXT_LENGTH_HELPURL,TEXT_LENGTH_TITLE,TEXT_LENGTH_TOOLTIP,TEXT_PRINT_HELPURL,TEXT_PRINT_TITLE,TEXT_PRINT_TOOLTIP,TEXT_PROMPT_HELPURL,TEXT_PROMPT_TOOLTIP_NUMBER,TEXT_PROMPT_TOOLTIP_TEXT,TEXT_PROMPT_TYPE_NUMBER,TEXT_PROMPT_TYPE_TEXT,TEXT_REPLACE_HELPURL,TEXT_REPLACE_MESSAGE0,TEXT_REPLACE_TOOLTIP,TEXT_REVERSE_HELPURL,TEXT_REVERSE_MESSAGE0,TEXT_REVERSE_TOOLTIP,TEXT_TEXT_HELPURL,TEXT_TEXT_TOOLTIP,TEXT_TRIM_HELPURL,TEXT_TRIM_OPERATOR_BOTH,TEXT_TRIM_OPERATOR_LEFT,TEXT_TRIM_OPERATOR_RIGHT,TEXT_TRIM_TOOLTIP,TODAY,UNDO,UNNAMED_KEY,VARIABLES_DEFAULT_NAME,VARIABLES_DYNAMIC_HUE,VARIABLES_GET_CREATE_SET,VARIABLES_GET_HELPURL,VARIABLES_GET_TOOLTIP,VARIABLES_HUE,VARIABLES_SET,VARIABLES_SET_CREATE_GET,VARIABLES_SET_HELPURL,VARIABLES_SET_TOOLTIP,VARIABLE_ALREADY_EXISTS,VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER,WORKSPACE_ARIA_LABEL,WORKSPACE_COMMENT_DEFAULT_TEXT},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(en);var blocks_compressed={exports:{}};(function(ie,te){(function(ne,re){ie.exports=re(requireBlockly_compressed())})(commonjsGlobal,function(ne){var re=ne.__namespace__,oe=re.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),le={customContextMenu:function(Ce){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(Ue={text:re.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:ae(this)},We=this.getField("VAR").getText(),We={text:re.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",We),enabled:!0,callback:he(this)},Ce.unshift(Ue),Ce.unshift(We));else{if(this.type==="variables_get_dynamic")var Oe="variables_set_dynamic",Ue=re.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else Oe="variables_get_dynamic",Ue=re.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var We=this.getField("VAR");Oe={type:Oe,fields:{VAR:We.saveState(!0)}},Ce.push({enabled:0<this.workspace.remainingCapacity(),text:Ue.replace("%1",We.getText()),callback:re.callbackFactory$$module$build$src$core$contextmenu(this,Oe)})}},onchange:function(Ce){Ce=this.getFieldValue("VAR"),Ce=re.getVariable$$module$build$src$core$variables(this.workspace,Ce),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(Ce.type):this.getInput("VALUE").connection.setCheck(Ce.type)}},ae=function(Ce){return function(){const Oe=Ce.workspace,Ue=Ce.getField("VAR").getVariable();re.renameVariable$$module$build$src$core$variables(Oe,Ue)}},he=function(Ce){return function(){const Oe=Ce.workspace,Ue=Ce.getField("VAR").getVariable();Oe.deleteVariableById(Ue.getId()),Oe.refreshToolboxSelection()}};re.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",le),re.defineBlocks$$module$build$src$core$common(oe);var de={blocks:oe},ue=re.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),pe={customContextMenu:function(Ce){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(Ue={text:re.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:fe(this)},We=this.getField("VAR").getText(),We={text:re.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",We),enabled:!0,callback:ge(this)},Ce.unshift(Ue),Ce.unshift(We));else{if(this.type==="variables_get")var Oe="variables_set",Ue=re.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else Oe="variables_get",Ue=re.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var We=this.getField("VAR");Oe={type:Oe,fields:{VAR:We.saveState(!0)}},Ce.push({enabled:0<this.workspace.remainingCapacity(),text:Ue.replace("%1",We.getText()),callback:re.callbackFactory$$module$build$src$core$contextmenu(this,Oe)})}}},fe=function(Ce){return function(){const Oe=Ce.workspace,Ue=Ce.getField("VAR").getVariable();re.renameVariable$$module$build$src$core$variables(Oe,Ue)}},ge=function(Ce){return function(){const Oe=Ce.workspace,Ue=Ce.getField("VAR").getVariable();Oe.deleteVariableById(Ue.getId()),Oe.refreshToolboxSelection()}};re.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",pe),re.defineBlocks$$module$build$src$core$common(ue);var $e={blocks:ue},Te=re.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),Ee={init:function(){this.WHERE_OPTIONS_1=[[re.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[re.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[re.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[re.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[re.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[re.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(re.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(re.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);const Ce=Oe=>{const Ue=re.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+Oe]});return Ue.setValidator(function(We){const Tt=this.getValue();We=We==="FROM_START"||We==="FROM_END",We!==(Tt==="FROM_START"||Tt==="FROM_END")&&this.getSourceBlock().updateAt_(Oe,We)}),Ue};this.appendDummyInput("WHERE1_INPUT").appendField(Ce(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(Ce(2),"WHERE2"),this.appendDummyInput("AT2"),re.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(re.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(re.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const Ce=re.createElement$$module$build$src$core$utils$xml("mutation");var Oe=this.getInput("AT1")instanceof re.ValueInput$$module$build$src$core$inputs$value_input;return Ce.setAttribute("at1",`${Oe}`),Oe=this.getInput("AT2")instanceof re.ValueInput$$module$build$src$core$inputs$value_input,Ce.setAttribute("at2",`${Oe}`),Ce},domToMutation:function(Ce){const Oe=Ce.getAttribute("at1")==="true";Ce=Ce.getAttribute("at2")==="true",this.updateAt_(1,Oe),this.updateAt_(2,Ce)},updateAt_:function(Ce,Oe){this.removeInput("AT"+Ce),this.removeInput("ORDINAL"+Ce,!0),Oe?(this.appendValueInput("AT"+Ce).setCheck("Number"),re.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+Ce).appendField(re.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+Ce),Ce===2&&re.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(re.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL)),Ce===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT"))}};Te.text_getSubstring=Ee,Te.text_changeCase={init:function(){const Ce=[[re.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[re.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[re.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(re.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(re.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Ce}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(re.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},Te.text_trim={init:function(){const Ce=[[re.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[re.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[re.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(re.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(re.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Ce}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(re.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},Te.text_print={init:function(){this.jsonInit({message0:re.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:re.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:re.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var Se={updateType_:function(Ce){this.outputConnection.setCheck(Ce==="NUMBER"?"Number":"String")},mutationToDom:function(){const Ce=re.createElement$$module$build$src$core$utils$xml("mutation");return Ce.setAttribute("type",this.getFieldValue("TYPE")),Ce},domToMutation:function(Ce){this.updateType_(Ce.getAttribute("type"))}};Te.text_prompt_ext=Object.assign({},Se,{init:function(){var Ce=[[re.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[re.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(re.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),Ce=re.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Ce}),Ce.setValidator(Oe=>{this.updateType_(Oe)}),this.appendValueInput("TEXT").appendField(Ce,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?re.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:re.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),Te.text_prompt=Object.assign({},Se,{init:function(){this.mixin(ve);var Ce=[[re.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[re.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(re.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),Ce=re.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Ce}),Ce.setValidator(Oe=>{this.updateType_(Oe)}),this.appendDummyInput().appendField(Ce,"TYPE").appendField(this.newQuote_(!0)).appendField(re.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?re.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:re.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),Te.text_count={init:function(){this.jsonInit({message0:re.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:re.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:re.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},Te.text_replace={init:function(){this.jsonInit({message0:re.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:re.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:re.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},Te.text_reverse={init:function(){this.jsonInit({message0:re.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:re.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:re.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var ve={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(Ce){for(let Oe=0,Ue;Ue=this.inputList[Oe];Oe++)for(let We=0,Tt;Tt=Ue.fieldRow[We];We++)if(Ce===Tt.name){Ue.insertFieldAt(We,this.newQuote_(!0)),Ue.insertFieldAt(We+2,this.newQuote_(!1));return}console.warn('field named "'+Ce+'" not found in '+this.toDevString())},newQuote_:function(Ce){return Ce=this.RTL?!Ce:Ce,re.fromJson$$module$build$src$core$field_registry({type:"field_image",src:Ce?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:Ce?"“":"”"})}},ke=function(){this.mixin(ve),this.quoteField_("TEXT")},Re={itemCount_:0,mutationToDom:function(){const Ce=re.createElement$$module$build$src$core$utils$xml("mutation");return Ce.setAttribute("items",`${this.itemCount_}`),Ce},domToMutation:function(Ce){this.itemCount_=parseInt(Ce.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(Ce){this.itemCount_=Ce.itemCount,this.updateShape_()},decompose:function(Ce){const Oe=Ce.newBlock("text_create_join_container");Oe.initSvg();let Ue=Oe.getInput("STACK").connection;for(let We=0;We<this.itemCount_;We++){const Tt=Ce.newBlock("text_create_join_item");Tt.initSvg(),Ue.connect(Tt.previousConnection),Ue=Tt.nextConnection}return Oe},compose:function(Ce){var Oe=Ce.getInputTargetBlock("STACK");for(Ce=[];Oe;)Oe.isInsertionMarker()||Ce.push(Oe.valueConnection_),Oe=Oe.getNextBlock();for(Oe=0;Oe<this.itemCount_;Oe++){const Ue=this.getInput("ADD"+Oe).connection.targetConnection;Ue&&!Ce.includes(Ue)&&Ue.disconnect()}for(this.itemCount_=Ce.length,this.updateShape_(),Oe=0;Oe<this.itemCount_;Oe++){let Ue;(Ue=Ce[Oe])==null||Ue.reconnect(this,"ADD"+Oe)}},saveConnections:function(Ce){Ce=Ce.getInputTargetBlock("STACK");let Oe=0;for(;Ce;){if(Ce.isInsertionMarker()){Ce=Ce.getNextBlock();continue}const Ue=this.getInput("ADD"+Oe);Ce.valueConnection_=Ue&&Ue.connection.targetConnection,Ce=Ce.getNextBlock(),Oe++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var Ce=0;Ce<this.itemCount_;Ce++)if(!this.getInput("ADD"+Ce)){const Oe=this.appendValueInput("ADD"+Ce).setAlign(re.Align$$module$build$src$core$inputs$align.RIGHT);Ce===0&&Oe.appendField(re.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(Ce=this.itemCount_;this.getInput("ADD"+Ce);Ce++)this.removeInput("ADD"+Ce)}},Ne=function(){this.mixin(ve),this.itemCount_=2,this.updateShape_(),this.setMutator(new re.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};re.register$$module$build$src$core$extensions("text_append_tooltip",re.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var xe=function(){this.setTooltip(()=>re.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},ze={isAt_:!1,mutationToDom:function(){const Ce=re.createElement$$module$build$src$core$utils$xml("mutation");return Ce.setAttribute("at",`${this.isAt_}`),Ce},domToMutation:function(Ce){Ce=Ce.getAttribute("at")!=="false",this.updateAt_(Ce)},updateAt_:function(Ce){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),Ce&&(this.appendValueInput("AT").setCheck("Number"),re.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(re.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),re.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(re.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=Ce}},Me=function(){this.getField("WHERE").setValidator(function(Ce){Ce=Ce==="FROM_START"||Ce==="FROM_END";const Oe=this.getSourceBlock();Ce!==Oe.isAt_&&Oe.updateAt_(Ce)}),this.updateAt_(!0),this.setTooltip(()=>{var Ce=this.getFieldValue("WHERE");let Oe=re.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return(Ce==="FROM_START"||Ce==="FROM_END")&&(Ce=Ce==="FROM_START"?re.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:re.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(Oe+="  "+Ce.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),Oe})};re.register$$module$build$src$core$extensions("text_indexOf_tooltip",xe),re.register$$module$build$src$core$extensions("text_quotes",ke),re.registerMixin$$module$build$src$core$extensions("quote_image_mixin",ve),re.registerMutator$$module$build$src$core$extensions("text_join_mutator",Re,Ne),re.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",ze,Me),re.defineBlocks$$module$build$src$core$common(Te);var Ae={blocks:Te},Qe={},ht={setStatements_:function(Ce){this.hasStatements_!==Ce&&(Ce?(this.appendStatementInput("STACK").appendField(re.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=Ce)},updateParams_:function(){let Ce="";this.arguments_.length&&(Ce=re.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),re.disable$$module$build$src$core$events$utils();try{this.setFieldValue(Ce,"PARAMS")}finally{re.enable$$module$build$src$core$events$utils()}},mutationToDom:function(Ce){const Oe=re.createElement$$module$build$src$core$utils$xml("mutation");Ce&&Oe.setAttribute("name",this.getFieldValue("NAME"));for(let Ue=0;Ue<this.argumentVarModels_.length;Ue++){const We=re.createElement$$module$build$src$core$utils$xml("arg"),Tt=this.argumentVarModels_[Ue];We.setAttribute("name",Tt.name),We.setAttribute("varid",Tt.getId()),Ce&&this.paramIds_&&We.setAttribute("paramId",this.paramIds_[Ue]),Oe.appendChild(We)}return this.hasStatements_||Oe.setAttribute("statements","false"),Oe},domToMutation:function(Ce){this.arguments_=[],this.argumentVarModels_=[];for(let Ue=0,We;We=Ce.childNodes[Ue];Ue++)if(We.nodeName.toLowerCase()==="arg"){var Oe=We;const Tt=Oe.getAttribute("name");Oe=Oe.getAttribute("varid")||Oe.getAttribute("varId"),this.arguments_.push(Tt),Oe=re.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,Oe,Tt,""),Oe!==null?this.argumentVarModels_.push(Oe):console.log(`Failed to create a variable named "${Tt}", ignoring.`)}this.updateParams_(),re.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(Ce.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const Ce=Object.create(null);if(this.argumentVarModels_.length){Ce.params=[];for(let Oe=0;Oe<this.argumentVarModels_.length;Oe++)Ce.params.push({name:this.argumentVarModels_[Oe].name,id:this.argumentVarModels_[Oe].getId()})}return this.hasStatements_||(Ce.hasStatements=!1),Ce},loadExtraState:function(Ce){if(this.arguments_=[],this.argumentVarModels_=[],Ce.params)for(let Ue=0;Ue<Ce.params.length;Ue++){var Oe=Ce.params[Ue];Oe=re.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,Oe.id,Oe.name,""),this.arguments_.push(Oe.name),this.argumentVarModels_.push(Oe)}this.updateParams_(),re.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(Ce.hasStatements!==!1)},decompose:function(Ce){const Oe=re.createElement$$module$build$src$core$utils$xml("block");Oe.setAttribute("type","procedures_mutatorcontainer");var Ue=re.createElement$$module$build$src$core$utils$xml("statement");Ue.setAttribute("name","STACK"),Oe.appendChild(Ue);for(let Tt=0;Tt<this.arguments_.length;Tt++){const Kt=re.createElement$$module$build$src$core$utils$xml("block");Kt.setAttribute("type","procedures_mutatorarg");var We=re.createElement$$module$build$src$core$utils$xml("field");We.setAttribute("name","NAME");const Ii=re.createTextNode$$module$build$src$core$utils$xml(this.arguments_[Tt]);We.appendChild(Ii),Kt.appendChild(We),We=re.createElement$$module$build$src$core$utils$xml("next"),Kt.appendChild(We),Ue.appendChild(Kt),Ue=We}return Ce=re.domToBlock$$module$build$src$core$xml(Oe,Ce),this.type==="procedures_defreturn"?Ce.setFieldValue(this.hasStatements_,"STATEMENTS"):Ce.removeInput("STATEMENT_INPUT"),re.mutateCallers$$module$build$src$core$procedures(this),Ce},compose:function(Ce){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let Oe=Ce.getInputTargetBlock("STACK");for(;Oe&&!Oe.isInsertionMarker();){var Ue=Oe.getFieldValue("NAME");this.arguments_.push(Ue),Ue=this.workspace.getVariable(Ue,""),this.argumentVarModels_.push(Ue),this.paramIds_.push(Oe.id),Oe=Oe.nextConnection&&Oe.nextConnection.targetBlock()}if(this.updateParams_(),re.mutateCallers$$module$build$src$core$procedures(this),Ce=Ce.getFieldValue("STATEMENTS"),Ce!==null&&(Ce=Ce==="TRUE",this.hasStatements_!==Ce))if(Ce){this.setStatements_(!0);var We;(We=this.statementConnection_)==null||We.reconnect(this,"STACK"),this.statementConnection_=null}else We=this.getInput("STACK").connection,(this.statementConnection_=We.targetConnection)&&(We=We.targetBlock(),We.unplug(),We.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(Ce,Oe){var Ue=this.workspace.getVariableById(Ce);if(Ue.type===""){Ue=Ue.name,Oe=this.workspace.getVariableById(Oe);var We=!1;for(let Tt=0;Tt<this.argumentVarModels_.length;Tt++)this.argumentVarModels_[Tt].getId()===Ce&&(this.arguments_[Tt]=Oe.name,this.argumentVarModels_[Tt]=Oe,We=!0);We&&(this.displayRenamedVar_(Ue,Oe.name),re.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(Ce){const Oe=Ce.name;let Ue=!1,We;for(let Tt=0;Tt<this.argumentVarModels_.length;Tt++)this.argumentVarModels_[Tt].getId()===Ce.getId()&&(We=this.arguments_[Tt],this.arguments_[Tt]=Oe,Ue=!0);Ue&&(this.displayRenamedVar_(We,Oe),re.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(Ce,Oe){this.updateParams_();var Ue=this.getIcon(re.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(Ue&&Ue.bubbleIsVisible()){Ue=Ue.getWorkspace().getAllBlocks(!1);for(let We=0,Tt;Tt=Ue[We];We++)Tt.type==="procedures_mutatorarg"&&re.Names$$module$build$src$core$names.equals(Ce,Tt.getFieldValue("NAME"))&&Tt.setFieldValue(Oe,"NAME")}},customContextMenu:function(Ce){if(!this.isInFlyout){var Oe=this.getFieldValue("NAME"),Ue={type:this.callType_,extraState:{name:Oe,params:this.arguments_}};if(Ce.push({enabled:!0,text:re.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",Oe),callback:re.callbackFactory$$module$build$src$core$contextmenu(this,Ue)}),!this.isCollapsed())for(Oe=0;Oe<this.argumentVarModels_.length;Oe++){Ue=this.argumentVarModels_[Oe];const We={type:"variables_get",fields:{VAR:{name:Ue.name,id:Ue.getId(),type:Ue.type}}};Ce.push({enabled:!0,text:re.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",Ue.name),callback:re.callbackFactory$$module$build$src$core$contextmenu(this,We)})}}}};Qe.procedures_defnoreturn=Object.assign({},ht,{init:function(){var Ce=re.findLegalName$$module$build$src$core$procedures("",this);Ce=re.fromJson$$module$build$src$core$field_registry({type:"field_input",text:Ce}),Ce.setValidator(re.rename$$module$build$src$core$procedures),Ce.setSpellcheck(!1),this.appendDummyInput().appendField(re.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(Ce,"NAME").appendField("","PARAMS"),this.setMutator(new re.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&re.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(re.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(re.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(re.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),Qe.procedures_defreturn=Object.assign({},ht,{init:function(){var Ce=re.findLegalName$$module$build$src$core$procedures("",this);Ce=re.fromJson$$module$build$src$core$field_registry({type:"field_input",text:Ce}),Ce.setValidator(re.rename$$module$build$src$core$procedures),Ce.setSpellcheck(!1),this.appendDummyInput().appendField(re.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(Ce,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(re.Align$$module$build$src$core$inputs$align.RIGHT).appendField(re.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new re.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&re.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(re.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(re.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(re.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var Pe={init:function(){this.appendDummyInput().appendField(re.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(re.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(re.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(re.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};Qe.procedures_mutatorcontainer=Pe;var _t={init:function(){const Ce=re.fromJson$$module$build$src$core$field_registry({type:"field_input",text:re.DEFAULT_ARG$$module$build$src$core$procedures});Ce.setValidator(this.validator_),Ce.oldShowEditorFn_=Ce.showEditor_,Ce.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(re.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(Ce,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(re.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,Ce.onFinishEditing_=this.deleteIntermediateVars_,Ce.createdVariables_=[],Ce.onFinishEditing_("x")},validator_:function(Ce){var Oe=this.getSourceBlock();const Ue=Oe.workspace.getRootWorkspace();if(Ce=Ce.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!Ce)return null;const We=(Oe.workspace.targetWorkspace||Oe.workspace).getAllBlocks(!1),Tt=Ce.toLowerCase();for(let Kt=0;Kt<We.length;Kt++){if(We[Kt].id===this.getSourceBlock().id)continue;const Ii=We[Kt].getFieldValue("NAME");if(Ii&&Ii.toLowerCase()===Tt)return null}return Oe.isInFlyout||((Oe=Ue.getVariable(Ce,""))&&Oe.name!==Ce&&Ue.renameVariableById(Oe.getId(),Ce),Oe||(Oe=Ue.createVariable(Ce,""))&&this.createdVariables_&&this.createdVariables_.push(Oe)),Ce},deleteIntermediateVars_:function(Ce){const Oe=this.getSourceBlock().workspace.getRootWorkspace();if(Oe)for(let Ue=0;Ue<this.createdVariables_.length;Ue++){const We=this.createdVariables_[Ue];We.name!==Ce&&Oe.deleteVariableById(We.getId())}}};Qe.procedures_mutatorarg=_t;var rt="DISABLED_PROCEDURE_DEFINITION",Ke={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(Ce,Oe){re.Names$$module$build$src$core$names.equals(Ce,this.getProcedureCall())&&(this.setFieldValue(Oe,"NAME"),this.setTooltip((this.outputConnection?re.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:re.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",Oe)))},setProcedureParameters_:function(Ce,Oe){var Ue=re.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((Ue=(Ue=Ue&&Ue.getIcon(re.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&Ue.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),Ce.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=Oe;else{if(Oe.length!==Ce.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let Tt=0;Tt<this.arguments_.length;Tt++){var We=this.getInput("ARG"+Tt);We&&(We=We.connection.targetConnection,this.quarkConnections_[this.quarkIds_[Tt]]=We,Ue&&We&&!Oe.includes(this.quarkIds_[Tt])&&(We.disconnect(),We.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(Ce),this.argumentVarModels_=[],Ce=0;Ce<this.arguments_.length;Ce++)Ue=re.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[Ce],""),this.argumentVarModels_.push(Ue);if(this.updateShape_(),this.quarkIds_=Oe){for(Oe=0;Oe<this.arguments_.length;Oe++)if(Ce=this.quarkIds_[Oe],Ce in this.quarkConnections_){let Tt;(Tt=this.quarkConnections_[Ce])!=null&&Tt.reconnect(this,"ARG"+Oe)||delete this.quarkConnections_[Ce]}}}},updateShape_:function(){for(var Ce=0;Ce<this.arguments_.length;Ce++){var Oe=this.getField("ARGNAME"+Ce);if(Oe){re.disable$$module$build$src$core$events$utils();try{Oe.setValue(this.arguments_[Ce])}finally{re.enable$$module$build$src$core$events$utils()}}else Oe=re.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[Ce]}),this.appendValueInput("ARG"+Ce).setAlign(re.Align$$module$build$src$core$inputs$align.RIGHT).appendField(Oe,"ARGNAME"+Ce)}for(Ce=this.arguments_.length;this.getInput("ARG"+Ce);Ce++)this.removeInput("ARG"+Ce);(Ce=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||Ce.appendField(re.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"):this.getField("WITH")&&Ce.removeField("WITH"))},mutationToDom:function(){const Ce=re.createElement$$module$build$src$core$utils$xml("mutation");Ce.setAttribute("name",this.getProcedureCall());for(let Oe=0;Oe<this.arguments_.length;Oe++){const Ue=re.createElement$$module$build$src$core$utils$xml("arg");Ue.setAttribute("name",this.arguments_[Oe]),Ce.appendChild(Ue)}return Ce},domToMutation:function(Ce){var Oe=Ce.getAttribute("name");this.renameProcedure(this.getProcedureCall(),Oe),Oe=[];const Ue=[];for(let We=0,Tt;Tt=Ce.childNodes[We];We++)Tt.nodeName.toLowerCase()==="arg"&&(Oe.push(Tt.getAttribute("name")),Ue.push(Tt.getAttribute("paramId")));this.setProcedureParameters_(Oe,Ue)},saveExtraState:function(){const Ce=Object.create(null);return Ce.name=this.getProcedureCall(),this.arguments_.length&&(Ce.params=this.arguments_),Ce},loadExtraState:function(Ce){if(this.renameProcedure(this.getProcedureCall(),Ce.name),Ce=Ce.params){const Oe=[];Oe.length=Ce.length,Oe.fill(null),this.setProcedureParameters_(Ce,Oe)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(Ce){if(this.workspace&&!this.workspace.isFlyout&&Ce.recordUndo)if(Ce.type===re.BLOCK_CREATE$$module$build$src$core$events$events&&Ce.ids.includes(this.id)){var Oe=this.getProcedureCall(),Ue=re.getDefinition$$module$build$src$core$procedures(Oe,this.workspace);if(!Ue||Ue.type===this.defType_&&JSON.stringify(Ue.getVars())===JSON.stringify(this.arguments_)||(Ue=null),Ue)Ue.isEnabled()||(this.setDisabledReason(!0,rt),this.setWarningText(re.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",Oe)));else{re.setGroup$$module$build$src$core$events$utils(Ce.group),Ce=re.createElement$$module$build$src$core$utils$xml("xml"),Oe=re.createElement$$module$build$src$core$utils$xml("block"),Oe.setAttribute("type",this.defType_),Ue=this.getRelativeToSurfaceXY();var We=Ue.y+2*re.config$$module$build$src$core$config.snapRadius;Oe.setAttribute("x",`${Ue.x+re.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),Oe.setAttribute("y",`${We}`),Ue=this.mutationToDom(),Oe.appendChild(Ue),Ue=re.createElement$$module$build$src$core$utils$xml("field"),Ue.setAttribute("name","NAME"),We=this.getProcedureCall();const Tt=re.findLegalName$$module$build$src$core$procedures(We,this);We!==Tt&&this.renameProcedure(We,Tt),Ue.appendChild(re.createTextNode$$module$build$src$core$utils$xml(We)),Oe.appendChild(Ue),Ce.appendChild(Oe),re.domToWorkspace$$module$build$src$core$xml(Ce,this.workspace),re.setGroup$$module$build$src$core$events$utils(!1)}}else Ce.type===re.BLOCK_DELETE$$module$build$src$core$events$events?(Oe=this.getProcedureCall(),re.getDefinition$$module$build$src$core$procedures(Oe,this.workspace)||(re.setGroup$$module$build$src$core$events$utils(Ce.group),this.dispose(!0),re.setGroup$$module$build$src$core$events$utils(!1))):Ce.type===re.BLOCK_CHANGE$$module$build$src$core$events$events&&Ce.element==="disabled"&&(Oe=this.getProcedureCall(),(We=re.getDefinition$$module$build$src$core$procedures(Oe,this.workspace))&&We.id===Ce.blockId&&((Ue=re.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),re.setGroup$$module$build$src$core$events$utils(Ce.group),Ce=We.isEnabled(),this.setDisabledReason(!Ce,rt),this.setWarningText(Ce?null:re.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",Oe)),re.setGroup$$module$build$src$core$events$utils(Ue)))},customContextMenu:function(Ce){if(this.workspace.isMovable()){var Oe=this.getProcedureCall(),Ue=this.workspace;Ce.push({enabled:!0,text:re.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const We=re.getDefinition$$module$build$src$core$procedures(Oe,Ue);We&&(Ue.centerOnBlock(We.id),re.setSelected$$module$build$src$core$common(We))}})}}};Qe.procedures_callnoreturn=Object.assign({},Ke,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(re.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defnoreturn"}),Qe.procedures_callreturn=Object.assign({},Ke,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(re.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defreturn"});var Je="UNPARENTED_IFRETURN",qe={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(re.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(re.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(re.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(re.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const Ce=re.createElement$$module$build$src$core$utils$xml("mutation");return Ce.setAttribute("value",String(Number(this.hasReturnValue_))),Ce},domToMutation:function(Ce){this.hasReturnValue_=Ce.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(re.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(Ce){if(!(this.workspace.isDragging&&this.workspace.isDragging()||Ce.type!==re.BLOCK_MOVE$$module$build$src$core$events$events&&Ce.type!==re.BLOCK_CREATE$$module$build$src$core$events$events)){Ce=!1;var Oe=this;do{if(this.FUNCTION_TYPES.includes(Oe.type)){Ce=!0;break}Oe=Oe.getSurroundParent()}while(Oe);if(Ce?(Oe.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(re.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):Oe.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(re.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(re.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),!this.isInFlyout)try{re.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!Ce,Je)}finally{re.setRecordUndo$$module$build$src$core$events$utils(!0)}}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};Qe.procedures_ifreturn=qe,re.defineBlocks$$module$build$src$core$common(Qe);var ct={blocks:Qe},Le=re.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["π","PI"],["e","E"],["φ","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(½)","SQRT1_2"],["∞","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),je={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};re.register$$module$build$src$core$extensions("math_op_tooltip",re.buildTooltipForDropdown$$module$build$src$core$extensions("OP",je));var pt={mutationToDom:function(){const Ce=re.createElement$$module$build$src$core$utils$xml("mutation"),Oe=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return Ce.setAttribute("divisor_input",String(Oe)),Ce},domToMutation:function(Ce){Ce=Ce.getAttribute("divisor_input")==="true",this.updateShape_(Ce)},updateShape_:function(Ce){const Oe=this.getInput("DIVISOR");Ce?Oe||this.appendValueInput("DIVISOR").setCheck("Number"):Oe&&this.removeInput("DIVISOR")}},Ot=function(){this.getField("PROPERTY").setValidator(function(Ce){Ce=Ce==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(Ce)})};re.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",pt,Ot),re.register$$module$build$src$core$extensions("math_change_tooltip",re.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var Ht={updateType_:function(Ce){Ce==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const Ce=re.createElement$$module$build$src$core$utils$xml("mutation");return Ce.setAttribute("op",this.getFieldValue("OP")),Ce},domToMutation:function(Ce){if(Ce=Ce.getAttribute("op"),Ce===null)throw new TypeError("xmlElement had no op attribute");this.updateType_(Ce)}},Ze=function(){this.getField("OP").setValidator((function(Ce){this.updateType_(Ce)}).bind(this))};re.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",Ht,Ze),re.defineBlocks$$module$build$src$core$common(Le);var bt={blocks:Le},Pt=re.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),Et={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};re.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",re.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",Et));var Lt={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};re.register$$module$build$src$core$extensions("controls_flow_tooltip",re.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",Lt));var Ut={customContextMenu:function(Ce){if(!this.isInFlyout){var Oe=this.getField("VAR"),Ue=Oe.getVariable().name;this.isCollapsed()||Ue===null||(Oe={type:"variables_get",fields:{VAR:Oe.saveState(!0)}},Ce.push({enabled:!0,text:re.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",Ue),callback:re.callbackFactory$$module$build$src$core$contextmenu(this,Oe)}))}}};re.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",Ut),re.register$$module$build$src$core$extensions("controls_for_tooltip",re.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),re.register$$module$build$src$core$extensions("controls_forEach_tooltip",re.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var Bt=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),Ft="CONTROL_FLOW_NOT_IN_LOOP",jt={getSurroundLoop:function(){let Ce=this;do{if(Bt.has(Ce.type))return Ce;Ce=Ce.getSurroundParent()}while(Ce);return null},onchange:function(Ce){const Oe=this.workspace;if(Oe.isDragging&&!Oe.isDragging()&&(Ce.type===re.BLOCK_MOVE$$module$build$src$core$events$events||Ce.type===re.BLOCK_CREATE$$module$build$src$core$events$events)&&(Ce=!!this.getSurroundLoop(),this.setWarningText(Ce?null:re.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout))try{re.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!Ce,Ft)}finally{re.setRecordUndo$$module$build$src$core$events$utils(!0)}}};re.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",jt),re.defineBlocks$$module$build$src$core$common(Pt);var zt={blocks:Pt,loopTypes:Bt},mi=re.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),Fi={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};re.register$$module$build$src$core$extensions("logic_op_tooltip",re.buildTooltipForDropdown$$module$build$src$core$extensions("OP",Fi));var ki={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const Ce=re.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&Ce.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&Ce.setAttribute("else","1"),Ce},domToMutation:function(Ce){this.elseifCount_=parseInt(Ce.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(Ce.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const Ce=Object.create(null);return this.elseifCount_&&(Ce.elseIfCount=this.elseifCount_),this.elseCount_&&(Ce.hasElse=!0),Ce},loadExtraState:function(Ce){this.elseifCount_=Ce.elseIfCount||0,this.elseCount_=Ce.hasElse?1:0,this.updateShape_()},decompose:function(Ce){const Oe=Ce.newBlock("controls_if_if");Oe.initSvg();let Ue=Oe.nextConnection;for(let We=1;We<=this.elseifCount_;We++){const Tt=Ce.newBlock("controls_if_elseif");Tt.initSvg(),Ue.connect(Tt.previousConnection),Ue=Tt.nextConnection}return this.elseCount_&&(Ce=Ce.newBlock("controls_if_else"),Ce.initSvg(),Ue.connect(Ce.previousConnection)),Oe},compose:function(Ce){Ce=Ce.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const Oe=[null],Ue=[null];let We=null;for(;Ce;){if(!Ce.isInsertionMarker())switch(Ce.type){case"controls_if_elseif":this.elseifCount_++,Oe.push(Ce.valueConnection_),Ue.push(Ce.statementConnection_);break;case"controls_if_else":this.elseCount_++,We=Ce.statementConnection_;break;default:throw TypeError("Unknown block type: "+Ce.type)}Ce=Ce.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(Oe,Ue,We)},saveConnections:function(Ce){Ce=Ce.nextConnection.targetBlock();let Oe=1;for(;Ce;){if(!Ce.isInsertionMarker())switch(Ce.type){case"controls_if_elseif":var Ue=this.getInput("IF"+Oe);const We=this.getInput("DO"+Oe);Ce.valueConnection_=Ue&&Ue.connection.targetConnection,Ce.statementConnection_=We&&We.connection.targetConnection,Oe++;break;case"controls_if_else":Ue=this.getInput("ELSE"),Ce.statementConnection_=Ue&&Ue.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+Ce.type)}Ce=Ce.getNextBlock()}},rebuildShape_:function(){const Ce=[null],Oe=[null];let Ue=null;this.getInput("ELSE")&&(Ue=this.getInput("ELSE").connection.targetConnection);for(let We=1;this.getInput("IF"+We);We++){const Tt=this.getInput("IF"+We),Kt=this.getInput("DO"+We);Ce.push(Tt.connection.targetConnection),Oe.push(Kt.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(Ce,Oe,Ue)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var Ce=1;this.getInput("IF"+Ce);Ce++)this.removeInput("IF"+Ce),this.removeInput("DO"+Ce);for(Ce=1;Ce<=this.elseifCount_;Ce++)this.appendValueInput("IF"+Ce).setCheck("Boolean").appendField(re.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+Ce).appendField(re.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(re.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(Ce,Oe,Ue){for(let We=1;We<=this.elseifCount_;We++){let Tt;(Tt=Ce[We])==null||Tt.reconnect(this,"IF"+We);let Kt;(Kt=Oe[We])==null||Kt.reconnect(this,"DO"+We)}Ue==null||Ue.reconnect(this,"ELSE")}};re.registerMutator$$module$build$src$core$extensions("controls_if_mutator",ki,null,["controls_if_elseif","controls_if_else"]);var $i=function(){this.setTooltip((function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return re.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return re.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return re.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return re.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}).bind(this))};re.register$$module$build$src$core$extensions("controls_if_tooltip",$i);var Di={onchange:function(Ce){this.prevBlocks_||(this.prevBlocks_=[null,null]);var Oe=this.getInputTargetBlock("A");const Ue=this.getInputTargetBlock("B");Oe&&Ue&&!this.workspace.connectionChecker.doTypeChecks(Oe.outputConnection,Ue.outputConnection)&&(re.setGroup$$module$build$src$core$events$utils(Ce.group),Ce=this.prevBlocks_[0],Ce!==Oe&&(Oe.unplug(),!Ce||Ce.isDisposed()||Ce.isShadow()||this.getInput("A").connection.connect(Ce.outputConnection)),Oe=this.prevBlocks_[1],Oe!==Ue&&(Ue.unplug(),!Oe||Oe.isDisposed()||Oe.isShadow()||this.getInput("B").connection.connect(Oe.outputConnection)),this.bumpNeighbours(),re.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},Ui=function(){this.mixin(Di)};re.register$$module$build$src$core$extensions("logic_compare",Ui);var Yi={prevParentConnection_:null,onchange:function(Ce){const Oe=this.getInputTargetBlock("THEN"),Ue=this.getInputTargetBlock("ELSE"),We=this.outputConnection.targetConnection;if((Oe||Ue)&&We)for(let Tt=0;2>Tt;Tt++){const Kt=Tt===1?Oe:Ue;Kt&&!Kt.workspace.connectionChecker.doTypeChecks(Kt.outputConnection,We)&&(re.setGroup$$module$build$src$core$events$utils(Ce.group),We===this.prevParentConnection_?(this.unplug(),We.getSourceBlock().bumpNeighbours()):(Kt.unplug(),Kt.bumpNeighbours()),re.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=We}};re.registerMixin$$module$build$src$core$extensions("logic_ternary",Yi),re.defineBlocks$$module$build$src$core$common(mi);var Nt={blocks:mi},Jt=re.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),Yt={init:function(){this.setHelpUrl(re.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new re.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(re.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const Ce=re.createElement$$module$build$src$core$utils$xml("mutation");return Ce.setAttribute("items",String(this.itemCount_)),Ce},domToMutation:function(Ce){if(Ce=Ce.getAttribute("items"),!Ce)throw new TypeError("element did not have items");this.itemCount_=parseInt(Ce,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(Ce){this.itemCount_=Ce.itemCount,this.updateShape_()},decompose:function(Ce){const Oe=Ce.newBlock("lists_create_with_container");Oe.initSvg();let Ue=Oe.getInput("STACK").connection;for(let We=0;We<this.itemCount_;We++){const Tt=Ce.newBlock("lists_create_with_item");if(Tt.initSvg(),!Tt.previousConnection)throw Error("itemBlock has no previousConnection");Ue.connect(Tt.previousConnection),Ue=Tt.nextConnection}return Oe},compose:function(Ce){var Oe=Ce.getInputTargetBlock("STACK");for(Ce=[];Oe;)Oe.isInsertionMarker()||Ce.push(Oe.valueConnection_),Oe=Oe.getNextBlock();for(Oe=0;Oe<this.itemCount_;Oe++){const Ue=this.getInput("ADD"+Oe).connection.targetConnection;Ue&&!Ce.includes(Ue)&&Ue.disconnect()}for(this.itemCount_=Ce.length,this.updateShape_(),Oe=0;Oe<this.itemCount_;Oe++){let Ue;(Ue=Ce[Oe])==null||Ue.reconnect(this,"ADD"+Oe)}},saveConnections:function(Ce){Ce=Ce.getInputTargetBlock("STACK");let Oe=0;for(;Ce;){if(Ce.isInsertionMarker()){Ce=Ce.getNextBlock();continue}const Ue=this.getInput("ADD"+Oe);let We;Ce.valueConnection_=(We=Ue)==null?void 0:We.connection.targetConnection,Ce=Ce.getNextBlock(),Oe++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(re.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var Ce=0;Ce<this.itemCount_;Ce++)if(!this.getInput("ADD"+Ce)){const Oe=this.appendValueInput("ADD"+Ce).setAlign(re.Align$$module$build$src$core$inputs$align.RIGHT);Ce===0&&Oe.appendField(re.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(Ce=this.itemCount_;this.getInput("ADD"+Ce);Ce++)this.removeInput("ADD"+Ce)}};Jt.lists_create_with=Yt;var zi={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(re.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(re.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};Jt.lists_create_with_container=zi;var _i={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(re.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(re.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};Jt.lists_create_with_item=_i;var Fe={init:function(){var Ce=[[re.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[re.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(re.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(re.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),Ce=re.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Ce}),!Ce)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(Ce,"END"),this.setInputsInline(!0),this.setTooltip(()=>re.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};Jt.lists_indexOf=Fe;var Li={init:function(){var Ce=[[re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),Ce=re.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Ce}),Ce.setValidator(function(Oe){Oe=Oe==="REMOVE",this.getSourceBlock().updateStatement_(Oe)}),this.appendValueInput("VALUE").setCheck("Array").appendField(re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(Ce,"MODE").appendField("","SPACE"),Ce=re.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),Ce.setValidator(function(Oe){const Ue=this.getValue();Oe=Oe==="FROM_START"||Oe==="FROM_END",Oe!==(Ue==="FROM_START"||Ue==="FROM_END")&&this.getSourceBlock().updateAt_(Oe)}),this.appendDummyInput().appendField(Ce,"WHERE"),this.appendDummyInput("AT"),re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const Oe=this.getFieldValue("MODE"),Ue=this.getFieldValue("WHERE");let We="";switch(Oe+" "+Ue){case"GET FROM_START":case"GET FROM_END":We=re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":We=re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":We=re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":We=re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":We=re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":We=re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":We=re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":We=re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":We=re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":We=re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":We=re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":We=re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(Ue==="FROM_START"||Ue==="FROM_END")&&(We+="  "+(Ue==="FROM_START"?re.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:re.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),We})},mutationToDom:function(){const Ce=re.createElement$$module$build$src$core$utils$xml("mutation");Ce.setAttribute("statement",String(!this.outputConnection));const Oe=this.getInput("AT")instanceof re.ValueInput$$module$build$src$core$inputs$value_input;return Ce.setAttribute("at",String(Oe)),Ce},domToMutation:function(Ce){const Oe=Ce.getAttribute("statement")==="true";this.updateStatement_(Oe),Ce=Ce.getAttribute("at")!=="false",this.updateAt_(Ce)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(Ce){Ce.isStatement?this.updateStatement_(!0):typeof Ce=="string"&&this.domToMutation(re.textToDom$$module$build$src$core$utils$xml(Ce))},updateStatement_:function(Ce){Ce!==!this.outputConnection&&(this.unplug(!0,!0),Ce?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(Ce){this.removeInput("AT"),this.removeInput("ORDINAL",!0),Ce?(this.appendValueInput("AT").setCheck("Number"),re.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(re.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};Jt.lists_getIndex=Li;var hi={init:function(){var Ce=[[re.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[re.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[re.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(re.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(re.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),Ce=re.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Ce}),this.appendDummyInput().appendField(Ce,"MODE").appendField("","SPACE"),Ce=re.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),Ce.setValidator(function(Oe){const Ue=this.getValue();Oe=Oe==="FROM_START"||Oe==="FROM_END",Oe!==(Ue==="FROM_START"||Ue==="FROM_END")&&this.getSourceBlock().updateAt_(Oe)}),this.appendDummyInput().appendField(Ce,"WHERE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(re.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(re.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const Oe=this.getFieldValue("MODE"),Ue=this.getFieldValue("WHERE");let We="";switch(Oe+" "+Ue){case"SET FROM_START":case"SET FROM_END":We=re.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":We=re.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":We=re.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":We=re.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":We=re.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":We=re.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":We=re.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":We=re.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(Ue==="FROM_START"||Ue==="FROM_END")&&(We+="  "+re.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),We})},mutationToDom:function(){const Ce=re.createElement$$module$build$src$core$utils$xml("mutation"),Oe=this.getInput("AT")instanceof re.ValueInput$$module$build$src$core$inputs$value_input;return Ce.setAttribute("at",String(Oe)),Ce},domToMutation:function(Ce){Ce=Ce.getAttribute("at")!=="false",this.updateAt_(Ce)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(Ce){this.removeInput("AT"),this.removeInput("ORDINAL",!0),Ce?(this.appendValueInput("AT").setCheck("Number"),re.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(re.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO")}};Jt.lists_setIndex=hi;var si={init:function(){this.WHERE_OPTIONS_1=[[re.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[re.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[re.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[re.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[re.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[re.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(re.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(re.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);const Ce=Oe=>{const Ue=re.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+Oe]});return Ue.setValidator(function(We){const Tt=this.getValue();We=We==="FROM_START"||We==="FROM_END",We!==(Tt==="FROM_START"||Tt==="FROM_END")&&this.getSourceBlock().updateAt_(Oe,We)}),Ue};this.appendDummyInput("WHERE1_INPUT").appendField(Ce(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(Ce(2),"WHERE2"),this.appendDummyInput("AT2"),re.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(re.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(re.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const Ce=re.createElement$$module$build$src$core$utils$xml("mutation");var Oe=this.getInput("AT1")instanceof re.ValueInput$$module$build$src$core$inputs$value_input;return Ce.setAttribute("at1",String(Oe)),Oe=this.getInput("AT2")instanceof re.ValueInput$$module$build$src$core$inputs$value_input,Ce.setAttribute("at2",String(Oe)),Ce},domToMutation:function(Ce){const Oe=Ce.getAttribute("at1")==="true";Ce=Ce.getAttribute("at2")==="true",this.updateAt_(1,Oe),this.updateAt_(2,Ce)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(Ce,Oe){this.removeInput("AT"+Ce),this.removeInput("ORDINAL"+Ce,!0),Oe?(this.appendValueInput("AT"+Ce).setCheck("Number"),re.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+Ce).appendField(re.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+Ce),Ce===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT")),re.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};Jt.lists_getSublist=si,Jt.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},Jt.lists_split={init:function(){const Ce=re.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[re.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[re.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!Ce)throw Error("field_dropdown not found");Ce.setValidator(Oe=>{this.updateType_(Oe)}),this.setHelpUrl(re.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(Ce,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(re.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const Oe=this.getFieldValue("MODE");if(Oe==="SPLIT")return re.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(Oe==="JOIN")return re.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+Oe)})},updateType_:function(Ce){if(this.getFieldValue("MODE")!==Ce){const Oe=this.getInput("INPUT").connection;Oe.setShadowDom(null);const Ue=Oe.targetBlock();Ue&&(Oe.disconnect(),Ue.isShadow()?Ue.dispose(!1):this.bumpNeighbours())}Ce==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const Ce=re.createElement$$module$build$src$core$utils$xml("mutation");return Ce.setAttribute("mode",this.getFieldValue("MODE")),Ce},domToMutation:function(Ce){this.updateType_(Ce.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},re.defineBlocks$$module$build$src$core$common(Jt);var vi={blocks:Jt},lt=Object.assign({},Jt,mi,Pt,Le,Qe,Te,ue,oe),Ct={blocks:lt,lists:vi,logic:Nt,loops:zt,math:bt,procedures:ct,texts:Ae,variables:$e,variablesDynamic:de};return Ct.__namespace__=re,Ct})})(blocks_compressed);var blocks_compressedExports=blocks_compressed.exports;const libraryBlocks=getDefaultExportFromCjs(blocks_compressedExports),{blocks,lists,logic,loops,math,procedures:procedures$1,texts,variables,variablesDynamic}=libraryBlocks,blocks$1=Object.freeze(Object.defineProperty({__proto__:null,blocks,lists,logic,loops,math,procedures:procedures$1,texts,variables,variablesDynamic},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(blocks$1);(function(ie,te){(function(ne,re){ie.exports=re(require$$0,require$$1,require$$2)})(commonjsGlobal,function(ne,re,oe){return ne.setLocale(re),ne})})(blockly$1);var blocklyExports=blockly$1.exports;const Blockly=getDefaultExportFromCjs(blocklyExports),{ASTNode,BasicCursor,Block,BlockSvg,Blocks,COLLAPSED_FIELD_NAME,COLLAPSED_INPUT_NAME,COLLAPSE_CHARS,CodeGenerator,CollapsibleToolboxCategory,ComponentManager,Connection,ConnectionChecker,ConnectionDB,ConnectionType,ContextMenu,ContextMenuItems,ContextMenuRegistry,Css,Cursor,DELETE_VARIABLE_ID,DeleteArea,DragTarget,DropDownDiv,Events,Extensions,Field,FieldCheckbox,FieldDropdown,FieldImage,FieldLabel,FieldLabelSerializable,FieldNumber,FieldTextInput,FieldVariable,Flyout,FlyoutButton,FlyoutMetricsManager,Generator,Gesture,Grid,HorizontalFlyout,INPUT_VALUE,Input,InsertionMarkerManager,InsertionMarkerPreviewer,Marker,MarkerManager,Menu,MenuItem,MetricsManager,Msg,NEXT_STATEMENT,Names,OPPOSITE_TYPE,OUTPUT_VALUE,Options,PREVIOUS_STATEMENT,PROCEDURE_CATEGORY_NAME,Procedures,RENAME_VARIABLE_ID,RenderedConnection,Scrollbar,ScrollbarPair,ShortcutItems,ShortcutRegistry,TOOLBOX_AT_BOTTOM,TOOLBOX_AT_LEFT,TOOLBOX_AT_RIGHT,TOOLBOX_AT_TOP,TabNavigateCursor,Theme:Theme$2,ThemeManager,Themes,Toolbox,ToolboxCategory,ToolboxItem,ToolboxSeparator,Tooltip,Touch,Trashcan,UnattachedFieldError,VARIABLE_CATEGORY_NAME,VARIABLE_DYNAMIC_CATEGORY_NAME,VERSION,VariableMap,VariableModel,Variables,VariablesDynamic,VerticalFlyout,WidgetDiv,Workspace,WorkspaceAudio,WorkspaceDragger,WorkspaceSvg,Xml,ZoomControls,blockAnimations,blockRendering,browserEvents,bubbles,bumpObjects,clipboard,comments,common:common$2,config:config$1,constants:constants$1,defineBlocksWithJsonArray,dialog,dragging,fieldRegistry,geras,getMainWorkspace,getSelected,hasBubble,hideChaff,icons,inject,inputs,isCopyable,isDeletable,isDraggable,isIcon,isObservable,isPaster,isRenderedElement,isSelectable,isSerializable,isVariableBackedParameterModel,layers,procedures,registry,renderManagement,serialization,setLocale,setParentContainer,svgResize,thrasos,uiPosition,utils,zelos}=Blockly;var javascript_compressed={exports:{}};(function(ie,te){(function(ne,re){ie.exports=re(requireBlockly_compressed())})(commonjsGlobal,function(ne){var re=ne.__namespace__,oe=function(ye,we){return["[]",Fe.ATOMIC]},le=function(ye,we){const Be=Array(ye.itemCount_);for(let Ve=0;Ve<ye.itemCount_;Ve++)Be[Ve]=we.valueToCode(ye,"ADD"+Ve,Fe.NONE)||"null";return["["+Be.join(", ")+"]",Fe.ATOMIC]},ae=function(ye,we){const Be=we.provideFunction_("listsRepeat",`
function ${we.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),Ve=we.valueToCode(ye,"ITEM",Fe.NONE)||"null";return ye=we.valueToCode(ye,"NUM",Fe.NONE)||"0",[Be+"("+Ve+", "+ye+")",Fe.FUNCTION_CALL]},he=function(ye,we){return[(we.valueToCode(ye,"VALUE",Fe.MEMBER)||"[]")+".length",Fe.MEMBER]},de=function(ye,we){return["!"+(we.valueToCode(ye,"VALUE",Fe.MEMBER)||"[]")+".length",Fe.LOGICAL_NOT]},ue=function(ye,we){const Be=ye.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",Ve=we.valueToCode(ye,"FIND",Fe.NONE)||"''";return we=(we.valueToCode(ye,"VALUE",Fe.MEMBER)||"[]")+"."+Be+"("+Ve+")",ye.workspace.options.oneBasedIndex?[we+" + 1",Fe.ADDITION]:[we,Fe.FUNCTION_CALL]},pe=function(ye,we){const Be=ye.getFieldValue("MODE")||"GET",Ve=ye.getFieldValue("WHERE")||"FROM_START";var ft=we.valueToCode(ye,"VALUE",Ve==="RANDOM"?Fe.NONE:Fe.MEMBER)||"[]";switch(Ve){case"FIRST":if(Be==="GET")return[ft+"[0]",Fe.MEMBER];if(Be==="GET_REMOVE")return[ft+".shift()",Fe.MEMBER];if(Be==="REMOVE")return ft+`.shift();
`;break;case"LAST":if(Be==="GET")return[ft+".slice(-1)[0]",Fe.MEMBER];if(Be==="GET_REMOVE")return[ft+".pop()",Fe.MEMBER];if(Be==="REMOVE")return ft+`.pop();
`;break;case"FROM_START":if(ye=we.getAdjusted(ye,"AT"),Be==="GET")return[ft+"["+ye+"]",Fe.MEMBER];if(Be==="GET_REMOVE")return[ft+".splice("+ye+", 1)[0]",Fe.FUNCTION_CALL];if(Be==="REMOVE")return ft+".splice("+ye+`, 1);
`;break;case"FROM_END":if(ye=we.getAdjusted(ye,"AT",1,!0),Be==="GET")return[ft+".slice("+ye+")[0]",Fe.FUNCTION_CALL];if(Be==="GET_REMOVE")return[ft+".splice("+ye+", 1)[0]",Fe.FUNCTION_CALL];if(Be==="REMOVE")return ft+".splice("+ye+", 1);";break;case"RANDOM":if(ft=we.provideFunction_("listsGetRandomItem",`
function ${we.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+ft+", "+(Be!=="GET")+")",Be==="GET"||Be==="GET_REMOVE")return[ft,Fe.FUNCTION_CALL];if(Be==="REMOVE")return ft+`;
`}throw Error("Unhandled combination (lists_getIndex).")},fe=function(ye,we){function Be(){if(Ve.match(/^\w+$/))return"";const Oi=we.nameDB_.getDistinctName("tmpList",re.NameType$$module$build$src$core$names.VARIABLE),an="var "+Oi+" = "+Ve+`;
`;return Ve=Oi,an}let Ve=we.valueToCode(ye,"LIST",Fe.MEMBER)||"[]";const ft=ye.getFieldValue("MODE")||"GET";var It=ye.getFieldValue("WHERE")||"FROM_START";const Dt=we.valueToCode(ye,"TO",Fe.ASSIGNMENT)||"null";switch(It){case"FIRST":if(ft==="SET")return Ve+"[0] = "+Dt+`;
`;if(ft==="INSERT")return Ve+".unshift("+Dt+`);
`;break;case"LAST":if(ft==="SET")return Be()+(Ve+"["+Ve+".length - 1] = "+Dt+`;
`);if(ft==="INSERT")return Ve+".push("+Dt+`);
`;break;case"FROM_START":if(ye=we.getAdjusted(ye,"AT"),ft==="SET")return Ve+"["+ye+"] = "+Dt+`;
`;if(ft==="INSERT")return Ve+".splice("+ye+", 0, "+Dt+`);
`;break;case"FROM_END":if(ye=we.getAdjusted(ye,"AT",1,!1,Fe.SUBTRACTION),It=Be(),ft==="SET")return It+(Ve+"["+Ve+".length - "+ye+"] = "+Dt+`;
`);if(ft==="INSERT")return It+(Ve+".splice("+Ve+".length - "+ye+", 0, "+Dt+`);
`);break;case"RANDOM":if(ye=Be(),It=we.nameDB_.getDistinctName("tmpX",re.NameType$$module$build$src$core$names.VARIABLE),ye+="var "+It+" = Math.floor(Math.random() * "+Ve+`.length);
`,ft==="SET")return ye+(Ve+"["+It+"] = "+Dt+`;
`);if(ft==="INSERT")return ye+(Ve+".splice("+It+", 0, "+Dt+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},ge=function(ye,we){var Be={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},Ve=we.valueToCode(ye,"LIST",Fe.MEMBER)||"[]";const ft=ye.getFieldValue("WHERE1"),It=ye.getFieldValue("WHERE2");if(ft==="FIRST"&&It==="LAST")Ve+=".slice(0)";else if(Ve.match(/^\w+$/)||ft!=="FROM_END"&&It==="FROM_START"){switch(ft){case"FROM_START":Be=we.getAdjusted(ye,"AT1");break;case"FROM_END":Be=we.getAdjusted(ye,"AT1",1,!1,Fe.SUBTRACTION),Be=Ve+".length - "+Be;break;case"FIRST":Be="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(It){case"FROM_START":we=we.getAdjusted(ye,"AT2",1);break;case"FROM_END":we=we.getAdjusted(ye,"AT2",0,!1,Fe.SUBTRACTION),we=Ve+".length - "+we;break;case"LAST":we=Ve+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}Ve=Ve+".slice("+Be+", "+we+")"}else{const Dt=we.getAdjusted(ye,"AT1");ye=we.getAdjusted(ye,"AT2"),Ve=we.provideFunction_("subsequence"+Be[ft]+Be[It],`
function ${we.FUNCTION_NAME_PLACEHOLDER_}(sequence${ft==="FROM_END"||ft==="FROM_START"?", at1":""}${It==="FROM_END"||It==="FROM_START"?", at2":""}) {
  var start = ${hi("sequence",ft,"at1")};
  var end = ${hi("sequence",It,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+Ve+(ft==="FROM_END"||ft==="FROM_START"?", "+Dt:"")+(It==="FROM_END"||It==="FROM_START"?", "+ye:"")+")"}return[Ve,Fe.FUNCTION_CALL]},$e=function(ye,we){const Be=we.valueToCode(ye,"LIST",Fe.FUNCTION_CALL)||"[]",Ve=ye.getFieldValue("DIRECTION")==="1"?1:-1;return ye=ye.getFieldValue("TYPE"),we=we.provideFunction_("listsGetSortCompare",`
function ${we.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return String(a) > String(b) ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return String(a).toLowerCase() > String(b).toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `),[Be+".slice().sort("+we+'("'+ye+'", '+Ve+"))",Fe.FUNCTION_CALL]},Te=function(ye,we){let Be=we.valueToCode(ye,"INPUT",Fe.MEMBER);if(we=we.valueToCode(ye,"DELIM",Fe.NONE)||"''",ye=ye.getFieldValue("MODE"),ye==="SPLIT")Be||(Be="''"),ye="split";else if(ye==="JOIN")Be||(Be="[]"),ye="join";else throw Error("Unknown mode: "+ye);return[Be+"."+ye+"("+we+")",Fe.FUNCTION_CALL]},Ee=function(ye,we){return[(we.valueToCode(ye,"LIST",Fe.FUNCTION_CALL)||"[]")+".slice().reverse()",Fe.FUNCTION_CALL]},Se=function(ye,we){var Be=0;let Ve="";we.STATEMENT_PREFIX&&(Ve+=we.injectId(we.STATEMENT_PREFIX,ye));do{const ft=we.valueToCode(ye,"IF"+Be,Fe.NONE)||"false";let It=we.statementToCode(ye,"DO"+Be);we.STATEMENT_SUFFIX&&(It=we.prefixLines(we.injectId(we.STATEMENT_SUFFIX,ye),we.INDENT)+It),Ve+=(0<Be?" else ":"")+"if ("+ft+`) {
`+It+"}",Be++}while(ye.getInput("IF"+Be));return(ye.getInput("ELSE")||we.STATEMENT_SUFFIX)&&(Be=we.statementToCode(ye,"ELSE"),we.STATEMENT_SUFFIX&&(Be=we.prefixLines(we.injectId(we.STATEMENT_SUFFIX,ye),we.INDENT)+Be),Ve+=` else {
`+Be+"}"),Ve+`
`},ve=function(ye,we){const Be={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[ye.getFieldValue("OP")],Ve=Be==="=="||Be==="!="?Fe.EQUALITY:Fe.RELATIONAL,ft=we.valueToCode(ye,"A",Ve)||"0";return ye=we.valueToCode(ye,"B",Ve)||"0",[ft+" "+Be+" "+ye,Ve]},ke=function(ye,we){const Be=ye.getFieldValue("OP")==="AND"?"&&":"||",Ve=Be==="&&"?Fe.LOGICAL_AND:Fe.LOGICAL_OR;let ft=we.valueToCode(ye,"A",Ve);return ye=we.valueToCode(ye,"B",Ve),ft||ye?(we=Be==="&&"?"true":"false",ft||(ft=we),ye||(ye=we)):ye=ft="false",[ft+" "+Be+" "+ye,Ve]},Re=function(ye,we){const Be=Fe.LOGICAL_NOT;return["!"+(we.valueToCode(ye,"BOOL",Be)||"true"),Be]},Ne=function(ye,we){return[ye.getFieldValue("BOOL")==="TRUE"?"true":"false",Fe.ATOMIC]},xe=function(ye,we){return["null",Fe.ATOMIC]},ze=function(ye,we){const Be=we.valueToCode(ye,"IF",Fe.CONDITIONAL)||"false",Ve=we.valueToCode(ye,"THEN",Fe.CONDITIONAL)||"null";return ye=we.valueToCode(ye,"ELSE",Fe.CONDITIONAL)||"null",[Be+" ? "+Ve+" : "+ye,Fe.CONDITIONAL]},Me=function(ye,we){let Be;Be=ye.getField("TIMES")?String(Number(ye.getFieldValue("TIMES"))):we.valueToCode(ye,"TIMES",Fe.ASSIGNMENT)||"0";let Ve=we.statementToCode(ye,"DO");Ve=we.addLoopTrap(Ve,ye),ye="";const ft=we.nameDB_.getDistinctName("count",re.NameType$$module$build$src$core$names.VARIABLE);let It=Be;return Be.match(/^\w+$/)||re.isNumber$$module$build$src$core$utils$string(Be)||(It=we.nameDB_.getDistinctName("repeat_end",re.NameType$$module$build$src$core$names.VARIABLE),ye+="var "+It+" = "+Be+`;
`),ye+("for (var "+ft+" = 0; "+ft+" < "+It+"; "+ft+`++) {
`+Ve+`}
`)},Ae=function(ye,we){const Be=ye.getFieldValue("MODE")==="UNTIL";let Ve=we.valueToCode(ye,"BOOL",Be?Fe.LOGICAL_NOT:Fe.NONE)||"false",ft=we.statementToCode(ye,"DO");return ft=we.addLoopTrap(ft,ye),Be&&(Ve="!"+Ve),"while ("+Ve+`) {
`+ft+`}
`},Qe=function(ye,we){var Be=we.getVariableName(ye.getFieldValue("VAR")),Ve=we.valueToCode(ye,"FROM",Fe.ASSIGNMENT)||"0",ft=we.valueToCode(ye,"TO",Fe.ASSIGNMENT)||"0";const It=we.valueToCode(ye,"BY",Fe.ASSIGNMENT)||"1";let Dt=we.statementToCode(ye,"DO");if(Dt=we.addLoopTrap(Dt,ye),re.isNumber$$module$build$src$core$utils$string(Ve)&&re.isNumber$$module$build$src$core$utils$string(ft)&&re.isNumber$$module$build$src$core$utils$string(It))we=Number(Ve)<=Number(ft),ye="for ("+Be+" = "+Ve+"; "+Be+(we?" <= ":" >= ")+ft+"; "+Be,Be=Math.abs(Number(It)),ye=Be===1?ye+(we?"++":"--"):ye+((we?" += ":" -= ")+Be),ye+=`) {
`+Dt+`}
`;else{ye="";let Oi=Ve;Ve.match(/^\w+$/)||re.isNumber$$module$build$src$core$utils$string(Ve)||(Oi=we.nameDB_.getDistinctName(Be+"_start",re.NameType$$module$build$src$core$names.VARIABLE),ye+="var "+Oi+" = "+Ve+`;
`),Ve=ft,ft.match(/^\w+$/)||re.isNumber$$module$build$src$core$utils$string(ft)||(Ve=we.nameDB_.getDistinctName(Be+"_end",re.NameType$$module$build$src$core$names.VARIABLE),ye+="var "+Ve+" = "+ft+`;
`),ft=we.nameDB_.getDistinctName(Be+"_inc",re.NameType$$module$build$src$core$names.VARIABLE),ye+="var "+ft+" = ",ye=re.isNumber$$module$build$src$core$utils$string(It)?ye+(Math.abs(Number(It))+`;
`):ye+("Math.abs("+It+`);
`),ye+="if ("+Oi+" > "+Ve+`) {
`,ye+=we.INDENT+ft+" = -"+ft+`;
`,ye=ye+`}
for (`+(Be+" = "+Oi+"; "+ft+" >= 0 ? "+Be+" <= "+Ve+" : "+Be+" >= "+Ve+"; "+Be+" += "+ft+`) {
`+Dt+`}
`)}return ye},ht=function(ye,we){const Be=we.getVariableName(ye.getFieldValue("VAR"));var Ve=we.valueToCode(ye,"LIST",Fe.ASSIGNMENT)||"[]";let ft=we.statementToCode(ye,"DO");ft=we.addLoopTrap(ft,ye),ye="";let It=Ve;return Ve.match(/^\w+$/)||(It=we.nameDB_.getDistinctName(Be+"_list",re.NameType$$module$build$src$core$names.VARIABLE),ye+="var "+It+" = "+Ve+`;
`),Ve=we.nameDB_.getDistinctName(Be+"_index",re.NameType$$module$build$src$core$names.VARIABLE),ft=we.INDENT+Be+" = "+It+"["+Ve+`];
`+ft,ye+("for (var "+Ve+" in "+It+`) {
`+ft+`}
`)},Pe=function(ye,we){let Be="";if(we.STATEMENT_PREFIX&&(Be+=we.injectId(we.STATEMENT_PREFIX,ye)),we.STATEMENT_SUFFIX&&(Be+=we.injectId(we.STATEMENT_SUFFIX,ye)),we.STATEMENT_PREFIX){const Ve=ye.getSurroundLoop();Ve&&!Ve.suppressPrefixSuffix&&(Be+=we.injectId(we.STATEMENT_PREFIX,Ve))}switch(ye.getFieldValue("FLOW")){case"BREAK":return Be+`break;
`;case"CONTINUE":return Be+`continue;
`}throw Error("Unknown flow statement.")},_t=function(ye,we){return ye=Number(ye.getFieldValue("NUM")),[String(ye),0<=ye?Fe.ATOMIC:Fe.UNARY_NEGATION]},rt=function(ye,we){var Be={ADD:[" + ",Fe.ADDITION],MINUS:[" - ",Fe.SUBTRACTION],MULTIPLY:[" * ",Fe.MULTIPLICATION],DIVIDE:[" / ",Fe.DIVISION],POWER:[null,Fe.NONE]}[ye.getFieldValue("OP")];const Ve=Be[0];Be=Be[1];const ft=we.valueToCode(ye,"A",Be)||"0";return ye=we.valueToCode(ye,"B",Be)||"0",Ve?[ft+Ve+ye,Be]:["Math.pow("+ft+", "+ye+")",Fe.FUNCTION_CALL]},Ke=function(ye,we){const Be=ye.getFieldValue("OP");let Ve;if(Be==="NEG")return ye=we.valueToCode(ye,"NUM",Fe.UNARY_NEGATION)||"0",ye[0]==="-"&&(ye=" "+ye),["-"+ye,Fe.UNARY_NEGATION];switch(ye=Be==="SIN"||Be==="COS"||Be==="TAN"?we.valueToCode(ye,"NUM",Fe.DIVISION)||"0":we.valueToCode(ye,"NUM",Fe.NONE)||"0",Be){case"ABS":Ve="Math.abs("+ye+")";break;case"ROOT":Ve="Math.sqrt("+ye+")";break;case"LN":Ve="Math.log("+ye+")";break;case"EXP":Ve="Math.exp("+ye+")";break;case"POW10":Ve="Math.pow(10,"+ye+")";break;case"ROUND":Ve="Math.round("+ye+")";break;case"ROUNDUP":Ve="Math.ceil("+ye+")";break;case"ROUNDDOWN":Ve="Math.floor("+ye+")";break;case"SIN":Ve="Math.sin("+ye+" / 180 * Math.PI)";break;case"COS":Ve="Math.cos("+ye+" / 180 * Math.PI)";break;case"TAN":Ve="Math.tan("+ye+" / 180 * Math.PI)"}if(Ve)return[Ve,Fe.FUNCTION_CALL];switch(Be){case"LOG10":Ve="Math.log("+ye+") / Math.log(10)";break;case"ASIN":Ve="Math.asin("+ye+") / Math.PI * 180";break;case"ACOS":Ve="Math.acos("+ye+") / Math.PI * 180";break;case"ATAN":Ve="Math.atan("+ye+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+Be)}return[Ve,Fe.DIVISION]},Je=function(ye,we){return{PI:["Math.PI",Fe.MEMBER],E:["Math.E",Fe.MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",Fe.DIVISION],SQRT2:["Math.SQRT2",Fe.MEMBER],SQRT1_2:["Math.SQRT1_2",Fe.MEMBER],INFINITY:["Infinity",Fe.ATOMIC]}[ye.getFieldValue("CONSTANT")]},qe=function(ye,we){var Be={EVEN:[" % 2 === 0",Fe.MODULUS,Fe.EQUALITY],ODD:[" % 2 === 1",Fe.MODULUS,Fe.EQUALITY],WHOLE:[" % 1 === 0",Fe.MODULUS,Fe.EQUALITY],POSITIVE:[" > 0",Fe.RELATIONAL,Fe.RELATIONAL],NEGATIVE:[" < 0",Fe.RELATIONAL,Fe.RELATIONAL],DIVISIBLE_BY:[null,Fe.MODULUS,Fe.EQUALITY],PRIME:[null,Fe.NONE,Fe.FUNCTION_CALL]};const Ve=ye.getFieldValue("PROPERTY"),[ft,It,Dt]=Be[Ve];return Be=we.valueToCode(ye,"NUMBER_TO_CHECK",It)||"0",Ve==="PRIME"?ye=we.provideFunction_("mathIsPrime",`
function ${we.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+Be+")":Ve==="DIVISIBLE_BY"?(ye=we.valueToCode(ye,"DIVISOR",Fe.MODULUS)||"0",ye=Be+" % "+ye+" === 0"):ye=Be+ft,[ye,Dt]},ct=function(ye,we){const Be=we.valueToCode(ye,"DELTA",Fe.ADDITION)||"0";return ye=we.getVariableName(ye.getFieldValue("VAR")),ye+" = (typeof "+ye+" === 'number' ? "+ye+" : 0) + "+Be+`;
`},Le=function(ye,we){var Be=ye.getFieldValue("OP");switch(Be){case"SUM":ye=we.valueToCode(ye,"LIST",Fe.MEMBER)||"[]",ye+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":ye=we.valueToCode(ye,"LIST",Fe.NONE)||"[]",ye="Math.min.apply(null, "+ye+")";break;case"MAX":ye=we.valueToCode(ye,"LIST",Fe.NONE)||"[]",ye="Math.max.apply(null, "+ye+")";break;case"AVERAGE":Be=we.provideFunction_("mathMean",`
function ${we.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),ye=we.valueToCode(ye,"LIST",Fe.NONE)||"[]",ye=Be+"("+ye+")";break;case"MEDIAN":Be=we.provideFunction_("mathMedian",`
function ${we.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),ye=we.valueToCode(ye,"LIST",Fe.NONE)||"[]",ye=Be+"("+ye+")";break;case"MODE":Be=we.provideFunction_("mathModes",`
function ${we.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
      modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),ye=we.valueToCode(ye,"LIST",Fe.NONE)||"[]",ye=Be+"("+ye+")";break;case"STD_DEV":Be=we.provideFunction_("mathStandardDeviation",`
function ${we.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance /= n;
  return Math.sqrt(variance);
}
`),ye=we.valueToCode(ye,"LIST",Fe.NONE)||"[]",ye=Be+"("+ye+")";break;case"RANDOM":Be=we.provideFunction_("mathRandomList",`
function ${we.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),ye=we.valueToCode(ye,"LIST",Fe.NONE)||"[]",ye=Be+"("+ye+")";break;default:throw Error("Unknown operator: "+Be)}return[ye,Fe.FUNCTION_CALL]},je=function(ye,we){const Be=we.valueToCode(ye,"DIVIDEND",Fe.MODULUS)||"0";return ye=we.valueToCode(ye,"DIVISOR",Fe.MODULUS)||"0",[Be+" % "+ye,Fe.MODULUS]},pt=function(ye,we){const Be=we.valueToCode(ye,"VALUE",Fe.NONE)||"0",Ve=we.valueToCode(ye,"LOW",Fe.NONE)||"0";return ye=we.valueToCode(ye,"HIGH",Fe.NONE)||"Infinity",["Math.min(Math.max("+Be+", "+Ve+"), "+ye+")",Fe.FUNCTION_CALL]},Ot=function(ye,we){const Be=we.valueToCode(ye,"FROM",Fe.NONE)||"0";return ye=we.valueToCode(ye,"TO",Fe.NONE)||"0",[we.provideFunction_("mathRandomInt",`
function ${we.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+Be+", "+ye+")",Fe.FUNCTION_CALL]},Ht=function(ye,we){return["Math.random()",Fe.FUNCTION_CALL]},Ze=function(ye,we){const Be=we.valueToCode(ye,"X",Fe.NONE)||"0";return["Math.atan2("+(we.valueToCode(ye,"Y",Fe.NONE)||"0")+", "+Be+") / Math.PI * 180",Fe.DIVISION]},bt=function(ye,we){const Be=we.getProcedureName(ye.getFieldValue("NAME"));var Ve="";we.STATEMENT_PREFIX&&(Ve+=we.injectId(we.STATEMENT_PREFIX,ye)),we.STATEMENT_SUFFIX&&(Ve+=we.injectId(we.STATEMENT_SUFFIX,ye)),Ve&&(Ve=we.prefixLines(Ve,we.INDENT));let ft="";we.INFINITE_LOOP_TRAP&&(ft=we.prefixLines(we.injectId(we.INFINITE_LOOP_TRAP,ye),we.INDENT));let It="";ye.getInput("STACK")&&(It=we.statementToCode(ye,"STACK"));let Dt="";ye.getInput("RETURN")&&(Dt=we.valueToCode(ye,"RETURN",Fe.NONE)||"");let Oi="";It&&Dt&&(Oi=Ve),Dt&&(Dt=we.INDENT+"return "+Dt+`;
`);const an=[],fn=ye.getVars();for(let mn=0;mn<fn.length;mn++)an[mn]=we.getVariableName(fn[mn]);return Ve="function "+Be+"("+an.join(", ")+`) {
`+Ve+ft+It+Oi+Dt+"}",Ve=we.scrub_(ye,Ve),we.definitions_["%"+Be]=Ve,null},Pt=function(ye,we){const Be=we.getProcedureName(ye.getFieldValue("NAME")),Ve=[],ft=ye.getVars();for(let It=0;It<ft.length;It++)Ve[It]=we.valueToCode(ye,"ARG"+It,Fe.NONE)||"null";return[Be+"("+Ve.join(", ")+")",Fe.FUNCTION_CALL]},Et=function(ye,we){return we.forBlock.procedures_callreturn(ye,we)[0]+`;
`},Lt=function(ye,we){let Be="if ("+(we.valueToCode(ye,"CONDITION",Fe.NONE)||"false")+`) {
`;return we.STATEMENT_SUFFIX&&(Be+=we.prefixLines(we.injectId(we.STATEMENT_SUFFIX,ye),we.INDENT)),ye.hasReturnValue_?(ye=we.valueToCode(ye,"VALUE",Fe.NONE)||"null",Be+=we.INDENT+"return "+ye+`;
`):Be+=we.INDENT+`return;
`,Be+`}
`},Ut=function(ye,we){return[we.quote_(ye.getFieldValue("TEXT")),Fe.ATOMIC]},Bt=function(ye,we){switch(ye.itemCount_){case 0:return["''",Fe.ATOMIC];case 1:return ye=we.valueToCode(ye,"ADD0",Fe.NONE)||"''",Ue(ye);case 2:var Be=we.valueToCode(ye,"ADD0",Fe.NONE)||"''";return ye=we.valueToCode(ye,"ADD1",Fe.NONE)||"''",[Ue(Be)[0]+" + "+Ue(ye)[0],Fe.ADDITION];default:Be=Array(ye.itemCount_);for(let Ve=0;Ve<ye.itemCount_;Ve++)Be[Ve]=we.valueToCode(ye,"ADD"+Ve,Fe.NONE)||"''";return["["+Be.join(",")+"].join('')",Fe.FUNCTION_CALL]}},Ft=function(ye,we){const Be=we.getVariableName(ye.getFieldValue("VAR"));return ye=we.valueToCode(ye,"TEXT",Fe.NONE)||"''",Be+" += "+Ue(ye)[0]+`;
`},jt=function(ye,we){return[(we.valueToCode(ye,"VALUE",Fe.MEMBER)||"''")+".length",Fe.MEMBER]},zt=function(ye,we){return["!"+(we.valueToCode(ye,"VALUE",Fe.MEMBER)||"''")+".length",Fe.LOGICAL_NOT]},mi=function(ye,we){const Be=ye.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",Ve=we.valueToCode(ye,"FIND",Fe.NONE)||"''";return we=(we.valueToCode(ye,"VALUE",Fe.MEMBER)||"''")+"."+Be+"("+Ve+")",ye.workspace.options.oneBasedIndex?[we+" + 1",Fe.ADDITION]:[we,Fe.FUNCTION_CALL]},Fi=function(ye,we){const Be=ye.getFieldValue("WHERE")||"FROM_START",Ve=we.valueToCode(ye,"VALUE",Be==="RANDOM"?Fe.NONE:Fe.MEMBER)||"''";switch(Be){case"FIRST":return[Ve+".charAt(0)",Fe.FUNCTION_CALL];case"LAST":return[Ve+".slice(-1)",Fe.FUNCTION_CALL];case"FROM_START":return ye=we.getAdjusted(ye,"AT"),[Ve+".charAt("+ye+")",Fe.FUNCTION_CALL];case"FROM_END":return ye=we.getAdjusted(ye,"AT",1,!0),[Ve+".slice("+ye+").charAt(0)",Fe.FUNCTION_CALL];case"RANDOM":return[we.provideFunction_("textRandomLetter",`
function ${we.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+Ve+")",Fe.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},ki=function(ye,we){var Be={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};const Ve=ye.getFieldValue("WHERE1"),ft=ye.getFieldValue("WHERE2");var It=Ve!=="FROM_END"&&Ve!=="LAST"&&ft!=="FROM_END"&&ft!=="LAST",Dt=we.valueToCode(ye,"STRING",It?Fe.MEMBER:Fe.NONE)||"''";if(Ve==="FIRST"&&ft==="LAST")return[Dt,Fe.NONE];if(Dt.match(/^'?\w+'?$/)||It){switch(Ve){case"FROM_START":Be=we.getAdjusted(ye,"AT1");break;case"FROM_END":Be=we.getAdjusted(ye,"AT1",1,!1,Fe.SUBTRACTION),Be=Dt+".length - "+Be;break;case"FIRST":Be="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(ft){case"FROM_START":we=we.getAdjusted(ye,"AT2",1);break;case"FROM_END":we=we.getAdjusted(ye,"AT2",0,!1,Fe.SUBTRACTION),we=Dt+".length - "+we;break;case"LAST":we=Dt+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}Dt=Dt+".slice("+Be+", "+we+")"}else It=we.getAdjusted(ye,"AT1"),ye=we.getAdjusted(ye,"AT2"),Dt=we.provideFunction_("subsequence"+Be[Ve]+Be[ft],`
function ${we.FUNCTION_NAME_PLACEHOLDER_}(sequence${Ve==="FROM_END"||Ve==="FROM_START"?", at1":""}${ft==="FROM_END"||ft==="FROM_START"?", at2":""}) {
  var start = ${We("sequence",Ve,"at1")};
  var end = ${We("sequence",ft,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+Dt+(Ve==="FROM_END"||Ve==="FROM_START"?", "+It:"")+(ft==="FROM_END"||ft==="FROM_START"?", "+ye:"")+")";return[Dt,Fe.FUNCTION_CALL]},$i=function(ye,we){const Be={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[ye.getFieldValue("CASE")];return ye=we.valueToCode(ye,"TEXT",Be?Fe.MEMBER:Fe.NONE)||"''",[Be?ye+Be:we.provideFunction_("textToTitleCase",`
function ${we.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+ye+")",Fe.FUNCTION_CALL]},Di=function(ye,we){const Be={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[ye.getFieldValue("MODE")];return[(we.valueToCode(ye,"TEXT",Fe.MEMBER)||"''")+Be,Fe.FUNCTION_CALL]},Ui=function(ye,we){return"window.alert("+(we.valueToCode(ye,"TEXT",Fe.NONE)||"''")+`);
`},Yi=function(ye,we){return we="window.prompt("+(ye.getField("TEXT")?we.quote_(ye.getFieldValue("TEXT")):we.valueToCode(ye,"TEXT",Fe.NONE)||"''")+")",ye.getFieldValue("TYPE")==="NUMBER"&&(we="Number("+we+")"),[we,Fe.FUNCTION_CALL]},Nt=function(ye,we){const Be=we.valueToCode(ye,"TEXT",Fe.NONE)||"''";return ye=we.valueToCode(ye,"SUB",Fe.NONE)||"''",[we.provideFunction_("textCount",`
function ${we.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+Be+", "+ye+")",Fe.FUNCTION_CALL]},Jt=function(ye,we){const Be=we.valueToCode(ye,"TEXT",Fe.NONE)||"''",Ve=we.valueToCode(ye,"FROM",Fe.NONE)||"''";return ye=we.valueToCode(ye,"TO",Fe.NONE)||"''",[we.provideFunction_("textReplace",`
function ${we.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+Be+", "+Ve+", "+ye+")",Fe.FUNCTION_CALL]},Yt=function(ye,we){return[(we.valueToCode(ye,"TEXT",Fe.MEMBER)||"''")+".split('').reverse().join('')",Fe.FUNCTION_CALL]},zi=function(ye,we){return[we.getVariableName(ye.getFieldValue("VAR")),Fe.ATOMIC]},_i=function(ye,we){const Be=we.valueToCode(ye,"VALUE",Fe.ASSIGNMENT)||"0";return we.getVariableName(ye.getFieldValue("VAR"))+" = "+Be+`;
`},Fe;(function(ye){ye[ye.ATOMIC=0]="ATOMIC",ye[ye.NEW=1.1]="NEW",ye[ye.MEMBER=1.2]="MEMBER",ye[ye.FUNCTION_CALL=2]="FUNCTION_CALL",ye[ye.INCREMENT=3]="INCREMENT",ye[ye.DECREMENT=3]="DECREMENT",ye[ye.BITWISE_NOT=4.1]="BITWISE_NOT",ye[ye.UNARY_PLUS=4.2]="UNARY_PLUS",ye[ye.UNARY_NEGATION=4.3]="UNARY_NEGATION",ye[ye.LOGICAL_NOT=4.4]="LOGICAL_NOT",ye[ye.TYPEOF=4.5]="TYPEOF",ye[ye.VOID=4.6]="VOID",ye[ye.DELETE=4.7]="DELETE",ye[ye.AWAIT=4.8]="AWAIT",ye[ye.EXPONENTIATION=5]="EXPONENTIATION",ye[ye.MULTIPLICATION=5.1]="MULTIPLICATION",ye[ye.DIVISION=5.2]="DIVISION",ye[ye.MODULUS=5.3]="MODULUS",ye[ye.SUBTRACTION=6.1]="SUBTRACTION",ye[ye.ADDITION=6.2]="ADDITION",ye[ye.BITWISE_SHIFT=7]="BITWISE_SHIFT",ye[ye.RELATIONAL=8]="RELATIONAL",ye[ye.IN=8]="IN",ye[ye.INSTANCEOF=8]="INSTANCEOF",ye[ye.EQUALITY=9]="EQUALITY",ye[ye.BITWISE_AND=10]="BITWISE_AND",ye[ye.BITWISE_XOR=11]="BITWISE_XOR",ye[ye.BITWISE_OR=12]="BITWISE_OR",ye[ye.LOGICAL_AND=13]="LOGICAL_AND",ye[ye.LOGICAL_OR=14]="LOGICAL_OR",ye[ye.CONDITIONAL=15]="CONDITIONAL",ye[ye.ASSIGNMENT=16]="ASSIGNMENT",ye[ye.YIELD=17]="YIELD",ye[ye.COMMA=18]="COMMA",ye[ye.NONE=99]="NONE"})(Fe||(Fe={}));var Li=class extends re.CodeGenerator$$module$build$src$core$generator{constructor(ye="JavaScript"){super(ye),this.ORDER_OVERRIDES=[[Fe.FUNCTION_CALL,Fe.MEMBER],[Fe.FUNCTION_CALL,Fe.FUNCTION_CALL],[Fe.MEMBER,Fe.MEMBER],[Fe.MEMBER,Fe.FUNCTION_CALL],[Fe.LOGICAL_NOT,Fe.LOGICAL_NOT],[Fe.MULTIPLICATION,Fe.MULTIPLICATION],[Fe.ADDITION,Fe.ADDITION],[Fe.LOGICAL_AND,Fe.LOGICAL_AND],[Fe.LOGICAL_OR,Fe.LOGICAL_OR]],this.isInitialized=!1;for(const we in Fe)ye=Fe[we],typeof ye!="string"&&(this["ORDER_"+we]=ye);this.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(","))}init(ye){super.init(ye),this.nameDB_?this.nameDB_.reset():this.nameDB_=new re.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(ye.getVariableMap()),this.nameDB_.populateVariables(ye),this.nameDB_.populateProcedures(ye);const we=[];var Be=re.allDeveloperVariables$$module$build$src$core$variables(ye);for(let Ve=0;Ve<Be.length;Ve++)we.push(this.nameDB_.getName(Be[Ve],re.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(ye=re.allUsedVarModels$$module$build$src$core$variables(ye),Be=0;Be<ye.length;Be++)we.push(this.nameDB_.getName(ye[Be].getId(),re.NameType$$module$build$src$core$names.VARIABLE));we.length&&(this.definitions_.variables="var "+we.join(", ")+";"),this.isInitialized=!0}finish(ye){const we=Object.values(this.definitions_);return super.finish(ye),this.isInitialized=!1,this.nameDB_.reset(),we.join(`

`)+`


`+ye}scrubNakedValue(ye){return ye+`;
`}quote_(ye){return ye=ye.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+ye+"'"}multiline_quote_(ye){return ye.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)}scrub_(ye,we,Be=!1){let Ve="";if(!ye.outputConnection||!ye.outputConnection.targetConnection){var ft=ye.getCommentText();ft&&(ft=re.wrap$$module$build$src$core$utils$string(ft,this.COMMENT_WRAP-3),Ve+=this.prefixLines(ft+`
`,"// "));for(let It=0;It<ye.inputList.length;It++)ye.inputList[It].type===re.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(ft=ye.inputList[It].connection.targetBlock())&&(ft=this.allNestedComments(ft))&&(Ve+=this.prefixLines(ft,"// "))}return ye=ye.nextConnection&&ye.nextConnection.targetBlock(),Be=Be?"":this.blockToCode(ye),Ve+we+Be}getAdjusted(ye,we,Be=0,Ve=!1,ft=Fe.NONE){ye.workspace.options.oneBasedIndex&&Be--;const It=ye.workspace.options.oneBasedIndex?"1":"0";let Dt=ft;return 0<Be?Dt=Fe.ADDITION:0>Be?Dt=Fe.SUBTRACTION:Ve&&(Dt=Fe.UNARY_NEGATION),ye=this.valueToCode(ye,we,Dt)||It,Be===0&&!Ve?ye:re.isNumber$$module$build$src$core$utils$string(ye)?(ye=String(Number(ye)+Be),Ve&&(ye=String(-Number(ye))),ye):(0<Be?ye=`${ye} + ${Be}`:0>Be&&(ye=`${ye} - ${-Be}`),Ve&&(ye=Be?`-(${ye})`:`-${ye}`),Math.floor(ft)>=Math.floor(Dt)&&(ye=`(${ye})`),ye)}},hi=function(ye,we,Be){return we==="FIRST"?"0":we==="FROM_END"?ye+".length - 1 - "+Be:we==="LAST"?ye+".length - 1":Be},si={};si.lists_create_empty=oe,si.lists_create_with=le,si.lists_getIndex=pe,si.lists_getSublist=ge,si.lists_indexOf=ue,si.lists_isEmpty=de,si.lists_length=he,si.lists_repeat=ae,si.lists_reverse=Ee,si.lists_setIndex=fe,si.lists_sort=$e,si.lists_split=Te;var vi={};vi.controls_if=Se,vi.controls_ifelse=Se,vi.logic_boolean=Ne,vi.logic_compare=ve,vi.logic_negate=Re,vi.logic_null=xe,vi.logic_operation=ke,vi.logic_ternary=ze;var lt={};lt.controls_flow_statements=Pe,lt.controls_for=Qe,lt.controls_forEach=ht,lt.controls_repeat=Me,lt.controls_repeat_ext=Me,lt.controls_whileUntil=Ae;var Ct={};Ct.math_arithmetic=rt,Ct.math_atan2=Ze,Ct.math_change=ct,Ct.math_constant=Je,Ct.math_constrain=pt,Ct.math_modulo=je,Ct.math_number=_t,Ct.math_number_property=qe,Ct.math_on_list=Le,Ct.math_random_float=Ht,Ct.math_random_int=Ot,Ct.math_round=Ke,Ct.math_single=Ke,Ct.math_trig=Ke;var Ce={};Ce.procedures_callnoreturn=Et,Ce.procedures_callreturn=Pt,Ce.procedures_defnoreturn=bt,Ce.procedures_defreturn=bt,Ce.procedures_ifreturn=Lt;var Oe=/^\s*'([^']|\\')*'\s*$/,Ue=function(ye){return Oe.test(ye)?[ye,Fe.ATOMIC]:["String("+ye+")",Fe.FUNCTION_CALL]},We=function(ye,we,Be){return we==="FIRST"?"0":we==="FROM_END"?ye+".length - 1 - "+Be:we==="LAST"?ye+".length - 1":Be},Tt={};Tt.text=Ut,Tt.text_append=Ft,Tt.text_changeCase=$i,Tt.text_charAt=Fi,Tt.text_count=Nt,Tt.text_getSubstring=ki,Tt.text_indexOf=mi,Tt.text_isEmpty=zt,Tt.text_join=Bt,Tt.text_length=jt,Tt.text_print=Ui,Tt.text_prompt=Yi,Tt.text_prompt_ext=Yi,Tt.text_replace=Jt,Tt.text_reverse=Yt,Tt.text_trim=Di;var Kt={};Kt.variables_get=zi,Kt.variables_set=_i;var Ii={};Ii.variables_get_dynamic=zi,Ii.variables_set_dynamic=_i;var Hi=new Li,ln=Object.assign({},si,vi,lt,Ct,Ce,Tt,Kt,Ii);for(const ye in ln)Hi.forBlock[ye]=ln[ye];var Ki={};return Ki.JavascriptGenerator=Li,Ki.Order=Fe,Ki.javascriptGenerator=Hi,Ki.__namespace__=re,Ki})})(javascript_compressed);var javascript_compressedExports=javascript_compressed.exports;const javascript=getDefaultExportFromCjs(javascript_compressedExports),{JavascriptGenerator,Order,javascriptGenerator}=javascript;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Theme$1=Theme$3.defineTheme("dark",{base:Themes$1.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}});/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function isNothing$1(ie){return typeof ie>"u"||ie===null}function isObject$2(ie){return typeof ie=="object"&&ie!==null}function toArray$1(ie){return Array.isArray(ie)?ie:isNothing$1(ie)?[]:[ie]}function extend$2(ie,te){var ne,re,oe,le;if(te)for(le=Object.keys(te),ne=0,re=le.length;ne<re;ne+=1)oe=le[ne],ie[oe]=te[oe];return ie}function repeat$1(ie,te){var ne="",re;for(re=0;re<te;re+=1)ne+=ie;return ne}function isNegativeZero$1(ie){return ie===0&&Number.NEGATIVE_INFINITY===1/ie}var isNothing_1$1=isNothing$1,isObject_1$1=isObject$2,toArray_1$1=toArray$1,repeat_1$1=repeat$1,isNegativeZero_1$1=isNegativeZero$1,extend_1$1=extend$2,common$1={isNothing:isNothing_1$1,isObject:isObject_1$1,toArray:toArray_1$1,repeat:repeat_1$1,isNegativeZero:isNegativeZero_1$1,extend:extend_1$1};function formatError$1(ie,te){var ne="",re=ie.reason||"(unknown reason)";return ie.mark?(ie.mark.name&&(ne+='in "'+ie.mark.name+'" '),ne+="("+(ie.mark.line+1)+":"+(ie.mark.column+1)+")",!te&&ie.mark.snippet&&(ne+=`

`+ie.mark.snippet),re+" "+ne):re}function YAMLException$1$1(ie,te){Error.call(this),this.name="YAMLException",this.reason=ie,this.mark=te,this.message=formatError$1(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}YAMLException$1$1.prototype=Object.create(Error.prototype);YAMLException$1$1.prototype.constructor=YAMLException$1$1;YAMLException$1$1.prototype.toString=function ie(te){return this.name+": "+formatError$1(this,te)};var exception$1=YAMLException$1$1;function getLine$1(ie,te,ne,re,oe){var le="",ae="",he=Math.floor(oe/2)-1;return re-te>he&&(le=" ... ",te=re-he+le.length),ne-re>he&&(ae=" ...",ne=re+he-ae.length),{str:le+ie.slice(te,ne).replace(/\t/g,"→")+ae,pos:re-te+le.length}}function padStart$1(ie,te){return common$1.repeat(" ",te-ie.length)+ie}function makeSnippet$1(ie,te){if(te=Object.create(te||null),!ie.buffer)return null;te.maxLength||(te.maxLength=79),typeof te.indent!="number"&&(te.indent=1),typeof te.linesBefore!="number"&&(te.linesBefore=3),typeof te.linesAfter!="number"&&(te.linesAfter=2);for(var ne=/\r?\n|\r|\0/g,re=[0],oe=[],le,ae=-1;le=ne.exec(ie.buffer);)oe.push(le.index),re.push(le.index+le[0].length),ie.position<=le.index&&ae<0&&(ae=re.length-2);ae<0&&(ae=re.length-1);var he="",de,ue,pe=Math.min(ie.line+te.linesAfter,oe.length).toString().length,fe=te.maxLength-(te.indent+pe+3);for(de=1;de<=te.linesBefore&&!(ae-de<0);de++)ue=getLine$1(ie.buffer,re[ae-de],oe[ae-de],ie.position-(re[ae]-re[ae-de]),fe),he=common$1.repeat(" ",te.indent)+padStart$1((ie.line-de+1).toString(),pe)+" | "+ue.str+`
`+he;for(ue=getLine$1(ie.buffer,re[ae],oe[ae],ie.position,fe),he+=common$1.repeat(" ",te.indent)+padStart$1((ie.line+1).toString(),pe)+" | "+ue.str+`
`,he+=common$1.repeat("-",te.indent+pe+3+ue.pos)+`^
`,de=1;de<=te.linesAfter&&!(ae+de>=oe.length);de++)ue=getLine$1(ie.buffer,re[ae+de],oe[ae+de],ie.position-(re[ae]-re[ae+de]),fe),he+=common$1.repeat(" ",te.indent)+padStart$1((ie.line+de+1).toString(),pe)+" | "+ue.str+`
`;return he.replace(/\n$/,"")}var snippet$1=makeSnippet$1,TYPE_CONSTRUCTOR_OPTIONS$1=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],YAML_NODE_KINDS$1=["scalar","sequence","mapping"];function compileStyleAliases$1(ie){var te={};return ie!==null&&Object.keys(ie).forEach(function(ne){ie[ne].forEach(function(re){te[String(re)]=ne})}),te}function Type$1$1(ie,te){if(te=te||{},Object.keys(te).forEach(function(ne){if(TYPE_CONSTRUCTOR_OPTIONS$1.indexOf(ne)===-1)throw new exception$1('Unknown option "'+ne+'" is met in definition of "'+ie+'" YAML type.')}),this.options=te,this.tag=ie,this.kind=te.kind||null,this.resolve=te.resolve||function(){return!0},this.construct=te.construct||function(ne){return ne},this.instanceOf=te.instanceOf||null,this.predicate=te.predicate||null,this.represent=te.represent||null,this.representName=te.representName||null,this.defaultStyle=te.defaultStyle||null,this.multi=te.multi||!1,this.styleAliases=compileStyleAliases$1(te.styleAliases||null),YAML_NODE_KINDS$1.indexOf(this.kind)===-1)throw new exception$1('Unknown kind "'+this.kind+'" is specified for "'+ie+'" YAML type.')}var type$1=Type$1$1;function compileList$1(ie,te){var ne=[];return ie[te].forEach(function(re){var oe=ne.length;ne.forEach(function(le,ae){le.tag===re.tag&&le.kind===re.kind&&le.multi===re.multi&&(oe=ae)}),ne[oe]=re}),ne}function compileMap$1(){var ie={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},te,ne;function re(oe){oe.multi?(ie.multi[oe.kind].push(oe),ie.multi.fallback.push(oe)):ie[oe.kind][oe.tag]=ie.fallback[oe.tag]=oe}for(te=0,ne=arguments.length;te<ne;te+=1)arguments[te].forEach(re);return ie}function Schema$1$1(ie){return this.extend(ie)}Schema$1$1.prototype.extend=function ie(te){var ne=[],re=[];if(te instanceof type$1)re.push(te);else if(Array.isArray(te))re=re.concat(te);else if(te&&(Array.isArray(te.implicit)||Array.isArray(te.explicit)))te.implicit&&(ne=ne.concat(te.implicit)),te.explicit&&(re=re.concat(te.explicit));else throw new exception$1("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");ne.forEach(function(le){if(!(le instanceof type$1))throw new exception$1("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(le.loadKind&&le.loadKind!=="scalar")throw new exception$1("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(le.multi)throw new exception$1("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),re.forEach(function(le){if(!(le instanceof type$1))throw new exception$1("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var oe=Object.create(Schema$1$1.prototype);return oe.implicit=(this.implicit||[]).concat(ne),oe.explicit=(this.explicit||[]).concat(re),oe.compiledImplicit=compileList$1(oe,"implicit"),oe.compiledExplicit=compileList$1(oe,"explicit"),oe.compiledTypeMap=compileMap$1(oe.compiledImplicit,oe.compiledExplicit),oe};var schema$1=Schema$1$1,str$1=new type$1("tag:yaml.org,2002:str",{kind:"scalar",construct:function(ie){return ie!==null?ie:""}}),seq$1=new type$1("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(ie){return ie!==null?ie:[]}}),map$1=new type$1("tag:yaml.org,2002:map",{kind:"mapping",construct:function(ie){return ie!==null?ie:{}}}),failsafe$1=new schema$1({explicit:[str$1,seq$1,map$1]});function resolveYamlNull$1(ie){if(ie===null)return!0;var te=ie.length;return te===1&&ie==="~"||te===4&&(ie==="null"||ie==="Null"||ie==="NULL")}function constructYamlNull$1(){return null}function isNull$1(ie){return ie===null}var _null$1=new type$1("tag:yaml.org,2002:null",{kind:"scalar",resolve:resolveYamlNull$1,construct:constructYamlNull$1,predicate:isNull$1,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function resolveYamlBoolean$1(ie){if(ie===null)return!1;var te=ie.length;return te===4&&(ie==="true"||ie==="True"||ie==="TRUE")||te===5&&(ie==="false"||ie==="False"||ie==="FALSE")}function constructYamlBoolean$1(ie){return ie==="true"||ie==="True"||ie==="TRUE"}function isBoolean$1(ie){return Object.prototype.toString.call(ie)==="[object Boolean]"}var bool$1=new type$1("tag:yaml.org,2002:bool",{kind:"scalar",resolve:resolveYamlBoolean$1,construct:constructYamlBoolean$1,predicate:isBoolean$1,represent:{lowercase:function(ie){return ie?"true":"false"},uppercase:function(ie){return ie?"TRUE":"FALSE"},camelcase:function(ie){return ie?"True":"False"}},defaultStyle:"lowercase"});function isHexCode$1(ie){return 48<=ie&&ie<=57||65<=ie&&ie<=70||97<=ie&&ie<=102}function isOctCode$1(ie){return 48<=ie&&ie<=55}function isDecCode$1(ie){return 48<=ie&&ie<=57}function resolveYamlInteger$1(ie){if(ie===null)return!1;var te=ie.length,ne=0,re=!1,oe;if(!te)return!1;if(oe=ie[ne],(oe==="-"||oe==="+")&&(oe=ie[++ne]),oe==="0"){if(ne+1===te)return!0;if(oe=ie[++ne],oe==="b"){for(ne++;ne<te;ne++)if(oe=ie[ne],oe!=="_"){if(oe!=="0"&&oe!=="1")return!1;re=!0}return re&&oe!=="_"}if(oe==="x"){for(ne++;ne<te;ne++)if(oe=ie[ne],oe!=="_"){if(!isHexCode$1(ie.charCodeAt(ne)))return!1;re=!0}return re&&oe!=="_"}if(oe==="o"){for(ne++;ne<te;ne++)if(oe=ie[ne],oe!=="_"){if(!isOctCode$1(ie.charCodeAt(ne)))return!1;re=!0}return re&&oe!=="_"}}if(oe==="_")return!1;for(;ne<te;ne++)if(oe=ie[ne],oe!=="_"){if(!isDecCode$1(ie.charCodeAt(ne)))return!1;re=!0}return!(!re||oe==="_")}function constructYamlInteger$1(ie){var te=ie,ne=1,re;if(te.indexOf("_")!==-1&&(te=te.replace(/_/g,"")),re=te[0],(re==="-"||re==="+")&&(re==="-"&&(ne=-1),te=te.slice(1),re=te[0]),te==="0")return 0;if(re==="0"){if(te[1]==="b")return ne*parseInt(te.slice(2),2);if(te[1]==="x")return ne*parseInt(te.slice(2),16);if(te[1]==="o")return ne*parseInt(te.slice(2),8)}return ne*parseInt(te,10)}function isInteger$1(ie){return Object.prototype.toString.call(ie)==="[object Number]"&&ie%1===0&&!common$1.isNegativeZero(ie)}var int$1=new type$1("tag:yaml.org,2002:int",{kind:"scalar",resolve:resolveYamlInteger$1,construct:constructYamlInteger$1,predicate:isInteger$1,represent:{binary:function(ie){return ie>=0?"0b"+ie.toString(2):"-0b"+ie.toString(2).slice(1)},octal:function(ie){return ie>=0?"0o"+ie.toString(8):"-0o"+ie.toString(8).slice(1)},decimal:function(ie){return ie.toString(10)},hexadecimal:function(ie){return ie>=0?"0x"+ie.toString(16).toUpperCase():"-0x"+ie.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YAML_FLOAT_PATTERN$1=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function resolveYamlFloat$1(ie){return!(ie===null||!YAML_FLOAT_PATTERN$1.test(ie)||ie[ie.length-1]==="_")}function constructYamlFloat$1(ie){var te,ne;return te=ie.replace(/_/g,"").toLowerCase(),ne=te[0]==="-"?-1:1,"+-".indexOf(te[0])>=0&&(te=te.slice(1)),te===".inf"?ne===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:te===".nan"?NaN:ne*parseFloat(te,10)}var SCIENTIFIC_WITHOUT_DOT$1=/^[-+]?[0-9]+e/;function representYamlFloat$1(ie,te){var ne;if(isNaN(ie))switch(te){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===ie)switch(te){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===ie)switch(te){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(common$1.isNegativeZero(ie))return"-0.0";return ne=ie.toString(10),SCIENTIFIC_WITHOUT_DOT$1.test(ne)?ne.replace("e",".e"):ne}function isFloat$1(ie){return Object.prototype.toString.call(ie)==="[object Number]"&&(ie%1!==0||common$1.isNegativeZero(ie))}var float$1=new type$1("tag:yaml.org,2002:float",{kind:"scalar",resolve:resolveYamlFloat$1,construct:constructYamlFloat$1,predicate:isFloat$1,represent:representYamlFloat$1,defaultStyle:"lowercase"}),json$1=failsafe$1.extend({implicit:[_null$1,bool$1,int$1,float$1]}),core$1=json$1,YAML_DATE_REGEXP$1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),YAML_TIMESTAMP_REGEXP$1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function resolveYamlTimestamp$1(ie){return ie===null?!1:YAML_DATE_REGEXP$1.exec(ie)!==null||YAML_TIMESTAMP_REGEXP$1.exec(ie)!==null}function constructYamlTimestamp$1(ie){var te,ne,re,oe,le,ae,he,de=0,ue=null,pe,fe,ge;if(te=YAML_DATE_REGEXP$1.exec(ie),te===null&&(te=YAML_TIMESTAMP_REGEXP$1.exec(ie)),te===null)throw new Error("Date resolve error");if(ne=+te[1],re=+te[2]-1,oe=+te[3],!te[4])return new Date(Date.UTC(ne,re,oe));if(le=+te[4],ae=+te[5],he=+te[6],te[7]){for(de=te[7].slice(0,3);de.length<3;)de+="0";de=+de}return te[9]&&(pe=+te[10],fe=+(te[11]||0),ue=(pe*60+fe)*6e4,te[9]==="-"&&(ue=-ue)),ge=new Date(Date.UTC(ne,re,oe,le,ae,he,de)),ue&&ge.setTime(ge.getTime()-ue),ge}function representYamlTimestamp$1(ie){return ie.toISOString()}var timestamp$1=new type$1("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:resolveYamlTimestamp$1,construct:constructYamlTimestamp$1,instanceOf:Date,represent:representYamlTimestamp$1});function resolveYamlMerge$1(ie){return ie==="<<"||ie===null}var merge$3=new type$1("tag:yaml.org,2002:merge",{kind:"scalar",resolve:resolveYamlMerge$1}),BASE64_MAP$1=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function resolveYamlBinary$1(ie){if(ie===null)return!1;var te,ne,re=0,oe=ie.length,le=BASE64_MAP$1;for(ne=0;ne<oe;ne++)if(te=le.indexOf(ie.charAt(ne)),!(te>64)){if(te<0)return!1;re+=6}return re%8===0}function constructYamlBinary$1(ie){var te,ne,re=ie.replace(/[\r\n=]/g,""),oe=re.length,le=BASE64_MAP$1,ae=0,he=[];for(te=0;te<oe;te++)te%4===0&&te&&(he.push(ae>>16&255),he.push(ae>>8&255),he.push(ae&255)),ae=ae<<6|le.indexOf(re.charAt(te));return ne=oe%4*6,ne===0?(he.push(ae>>16&255),he.push(ae>>8&255),he.push(ae&255)):ne===18?(he.push(ae>>10&255),he.push(ae>>2&255)):ne===12&&he.push(ae>>4&255),new Uint8Array(he)}function representYamlBinary$1(ie){var te="",ne=0,re,oe,le=ie.length,ae=BASE64_MAP$1;for(re=0;re<le;re++)re%3===0&&re&&(te+=ae[ne>>18&63],te+=ae[ne>>12&63],te+=ae[ne>>6&63],te+=ae[ne&63]),ne=(ne<<8)+ie[re];return oe=le%3,oe===0?(te+=ae[ne>>18&63],te+=ae[ne>>12&63],te+=ae[ne>>6&63],te+=ae[ne&63]):oe===2?(te+=ae[ne>>10&63],te+=ae[ne>>4&63],te+=ae[ne<<2&63],te+=ae[64]):oe===1&&(te+=ae[ne>>2&63],te+=ae[ne<<4&63],te+=ae[64],te+=ae[64]),te}function isBinary$1(ie){return Object.prototype.toString.call(ie)==="[object Uint8Array]"}var binary$1=new type$1("tag:yaml.org,2002:binary",{kind:"scalar",resolve:resolveYamlBinary$1,construct:constructYamlBinary$1,predicate:isBinary$1,represent:representYamlBinary$1}),_hasOwnProperty$3$1=Object.prototype.hasOwnProperty,_toString$2$1=Object.prototype.toString;function resolveYamlOmap$1(ie){if(ie===null)return!0;var te=[],ne,re,oe,le,ae,he=ie;for(ne=0,re=he.length;ne<re;ne+=1){if(oe=he[ne],ae=!1,_toString$2$1.call(oe)!=="[object Object]")return!1;for(le in oe)if(_hasOwnProperty$3$1.call(oe,le))if(!ae)ae=!0;else return!1;if(!ae)return!1;if(te.indexOf(le)===-1)te.push(le);else return!1}return!0}function constructYamlOmap$1(ie){return ie!==null?ie:[]}var omap$1=new type$1("tag:yaml.org,2002:omap",{kind:"sequence",resolve:resolveYamlOmap$1,construct:constructYamlOmap$1}),_toString$1$1=Object.prototype.toString;function resolveYamlPairs$1(ie){if(ie===null)return!0;var te,ne,re,oe,le,ae=ie;for(le=new Array(ae.length),te=0,ne=ae.length;te<ne;te+=1){if(re=ae[te],_toString$1$1.call(re)!=="[object Object]"||(oe=Object.keys(re),oe.length!==1))return!1;le[te]=[oe[0],re[oe[0]]]}return!0}function constructYamlPairs$1(ie){if(ie===null)return[];var te,ne,re,oe,le,ae=ie;for(le=new Array(ae.length),te=0,ne=ae.length;te<ne;te+=1)re=ae[te],oe=Object.keys(re),le[te]=[oe[0],re[oe[0]]];return le}var pairs$1=new type$1("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:resolveYamlPairs$1,construct:constructYamlPairs$1}),_hasOwnProperty$2$1=Object.prototype.hasOwnProperty;function resolveYamlSet$1(ie){if(ie===null)return!0;var te,ne=ie;for(te in ne)if(_hasOwnProperty$2$1.call(ne,te)&&ne[te]!==null)return!1;return!0}function constructYamlSet$1(ie){return ie!==null?ie:{}}var set$3=new type$1("tag:yaml.org,2002:set",{kind:"mapping",resolve:resolveYamlSet$1,construct:constructYamlSet$1}),_default$1=core$1.extend({implicit:[timestamp$1,merge$3],explicit:[binary$1,omap$1,pairs$1,set$3]}),_hasOwnProperty$1$1=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN$1=1,CONTEXT_FLOW_OUT$1=2,CONTEXT_BLOCK_IN$1=3,CONTEXT_BLOCK_OUT$1=4,CHOMPING_CLIP$1=1,CHOMPING_STRIP$1=2,CHOMPING_KEEP$1=3,PATTERN_NON_PRINTABLE$1=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS$1=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS$1=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE$1=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI$1=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _class$1(ie){return Object.prototype.toString.call(ie)}function is_EOL$1(ie){return ie===10||ie===13}function is_WHITE_SPACE$1(ie){return ie===9||ie===32}function is_WS_OR_EOL$1(ie){return ie===9||ie===32||ie===10||ie===13}function is_FLOW_INDICATOR$1(ie){return ie===44||ie===91||ie===93||ie===123||ie===125}function fromHexCode$1(ie){var te;return 48<=ie&&ie<=57?ie-48:(te=ie|32,97<=te&&te<=102?te-97+10:-1)}function escapedHexLen$1(ie){return ie===120?2:ie===117?4:ie===85?8:0}function fromDecimalCode$1(ie){return 48<=ie&&ie<=57?ie-48:-1}function simpleEscapeSequence$1(ie){return ie===48?"\0":ie===97?"\x07":ie===98?"\b":ie===116||ie===9?"	":ie===110?`
`:ie===118?"\v":ie===102?"\f":ie===114?"\r":ie===101?"\x1B":ie===32?" ":ie===34?'"':ie===47?"/":ie===92?"\\":ie===78?"":ie===95?" ":ie===76?"\u2028":ie===80?"\u2029":""}function charFromCodepoint$1(ie){return ie<=65535?String.fromCharCode(ie):String.fromCharCode((ie-65536>>10)+55296,(ie-65536&1023)+56320)}var simpleEscapeCheck$1=new Array(256),simpleEscapeMap$1=new Array(256);for(var i$2=0;i$2<256;i$2++)simpleEscapeCheck$1[i$2]=simpleEscapeSequence$1(i$2)?1:0,simpleEscapeMap$1[i$2]=simpleEscapeSequence$1(i$2);function State$1$1(ie,te){this.input=ie,this.filename=te.filename||null,this.schema=te.schema||_default$1,this.onWarning=te.onWarning||null,this.legacy=te.legacy||!1,this.json=te.json||!1,this.listener=te.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=ie.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function generateError$1(ie,te){var ne={name:ie.filename,buffer:ie.input.slice(0,-1),position:ie.position,line:ie.line,column:ie.position-ie.lineStart};return ne.snippet=snippet$1(ne),new exception$1(te,ne)}function throwError$1(ie,te){throw generateError$1(ie,te)}function throwWarning$1(ie,te){ie.onWarning&&ie.onWarning.call(null,generateError$1(ie,te))}var directiveHandlers$1={YAML:function ie(te,ne,re){var oe,le,ae;te.version!==null&&throwError$1(te,"duplication of %YAML directive"),re.length!==1&&throwError$1(te,"YAML directive accepts exactly one argument"),oe=/^([0-9]+)\.([0-9]+)$/.exec(re[0]),oe===null&&throwError$1(te,"ill-formed argument of the YAML directive"),le=parseInt(oe[1],10),ae=parseInt(oe[2],10),le!==1&&throwError$1(te,"unacceptable YAML version of the document"),te.version=re[0],te.checkLineBreaks=ae<2,ae!==1&&ae!==2&&throwWarning$1(te,"unsupported YAML version of the document")},TAG:function ie(te,ne,re){var oe,le;re.length!==2&&throwError$1(te,"TAG directive accepts exactly two arguments"),oe=re[0],le=re[1],PATTERN_TAG_HANDLE$1.test(oe)||throwError$1(te,"ill-formed tag handle (first argument) of the TAG directive"),_hasOwnProperty$1$1.call(te.tagMap,oe)&&throwError$1(te,'there is a previously declared suffix for "'+oe+'" tag handle'),PATTERN_TAG_URI$1.test(le)||throwError$1(te,"ill-formed tag prefix (second argument) of the TAG directive");try{le=decodeURIComponent(le)}catch{throwError$1(te,"tag prefix is malformed: "+le)}te.tagMap[oe]=le}};function captureSegment$1(ie,te,ne,re){var oe,le,ae,he;if(te<ne){if(he=ie.input.slice(te,ne),re)for(oe=0,le=he.length;oe<le;oe+=1)ae=he.charCodeAt(oe),ae===9||32<=ae&&ae<=1114111||throwError$1(ie,"expected valid JSON character");else PATTERN_NON_PRINTABLE$1.test(he)&&throwError$1(ie,"the stream contains non-printable characters");ie.result+=he}}function mergeMappings$1(ie,te,ne,re){var oe,le,ae,he;for(common$1.isObject(ne)||throwError$1(ie,"cannot merge mappings; the provided source object is unacceptable"),oe=Object.keys(ne),ae=0,he=oe.length;ae<he;ae+=1)le=oe[ae],_hasOwnProperty$1$1.call(te,le)||(te[le]=ne[le],re[le]=!0)}function storeMappingPair$1(ie,te,ne,re,oe,le,ae,he,de){var ue,pe;if(Array.isArray(oe))for(oe=Array.prototype.slice.call(oe),ue=0,pe=oe.length;ue<pe;ue+=1)Array.isArray(oe[ue])&&throwError$1(ie,"nested arrays are not supported inside keys"),typeof oe=="object"&&_class$1(oe[ue])==="[object Object]"&&(oe[ue]="[object Object]");if(typeof oe=="object"&&_class$1(oe)==="[object Object]"&&(oe="[object Object]"),oe=String(oe),te===null&&(te={}),re==="tag:yaml.org,2002:merge")if(Array.isArray(le))for(ue=0,pe=le.length;ue<pe;ue+=1)mergeMappings$1(ie,te,le[ue],ne);else mergeMappings$1(ie,te,le,ne);else!ie.json&&!_hasOwnProperty$1$1.call(ne,oe)&&_hasOwnProperty$1$1.call(te,oe)&&(ie.line=ae||ie.line,ie.lineStart=he||ie.lineStart,ie.position=de||ie.position,throwError$1(ie,"duplicated mapping key")),oe==="__proto__"?Object.defineProperty(te,oe,{configurable:!0,enumerable:!0,writable:!0,value:le}):te[oe]=le,delete ne[oe];return te}function readLineBreak$1(ie){var te;te=ie.input.charCodeAt(ie.position),te===10?ie.position++:te===13?(ie.position++,ie.input.charCodeAt(ie.position)===10&&ie.position++):throwError$1(ie,"a line break is expected"),ie.line+=1,ie.lineStart=ie.position,ie.firstTabInLine=-1}function skipSeparationSpace$1(ie,te,ne){for(var re=0,oe=ie.input.charCodeAt(ie.position);oe!==0;){for(;is_WHITE_SPACE$1(oe);)oe===9&&ie.firstTabInLine===-1&&(ie.firstTabInLine=ie.position),oe=ie.input.charCodeAt(++ie.position);if(te&&oe===35)do oe=ie.input.charCodeAt(++ie.position);while(oe!==10&&oe!==13&&oe!==0);if(is_EOL$1(oe))for(readLineBreak$1(ie),oe=ie.input.charCodeAt(ie.position),re++,ie.lineIndent=0;oe===32;)ie.lineIndent++,oe=ie.input.charCodeAt(++ie.position);else break}return ne!==-1&&re!==0&&ie.lineIndent<ne&&throwWarning$1(ie,"deficient indentation"),re}function testDocumentSeparator$1(ie){var te=ie.position,ne;return ne=ie.input.charCodeAt(te),!!((ne===45||ne===46)&&ne===ie.input.charCodeAt(te+1)&&ne===ie.input.charCodeAt(te+2)&&(te+=3,ne=ie.input.charCodeAt(te),ne===0||is_WS_OR_EOL$1(ne)))}function writeFoldedLines$1(ie,te){te===1?ie.result+=" ":te>1&&(ie.result+=common$1.repeat(`
`,te-1))}function readPlainScalar$1(ie,te,ne){var re,oe,le,ae,he,de,ue,pe,fe=ie.kind,ge=ie.result,$e;if($e=ie.input.charCodeAt(ie.position),is_WS_OR_EOL$1($e)||is_FLOW_INDICATOR$1($e)||$e===35||$e===38||$e===42||$e===33||$e===124||$e===62||$e===39||$e===34||$e===37||$e===64||$e===96||($e===63||$e===45)&&(oe=ie.input.charCodeAt(ie.position+1),is_WS_OR_EOL$1(oe)||ne&&is_FLOW_INDICATOR$1(oe)))return!1;for(ie.kind="scalar",ie.result="",le=ae=ie.position,he=!1;$e!==0;){if($e===58){if(oe=ie.input.charCodeAt(ie.position+1),is_WS_OR_EOL$1(oe)||ne&&is_FLOW_INDICATOR$1(oe))break}else if($e===35){if(re=ie.input.charCodeAt(ie.position-1),is_WS_OR_EOL$1(re))break}else{if(ie.position===ie.lineStart&&testDocumentSeparator$1(ie)||ne&&is_FLOW_INDICATOR$1($e))break;if(is_EOL$1($e))if(de=ie.line,ue=ie.lineStart,pe=ie.lineIndent,skipSeparationSpace$1(ie,!1,-1),ie.lineIndent>=te){he=!0,$e=ie.input.charCodeAt(ie.position);continue}else{ie.position=ae,ie.line=de,ie.lineStart=ue,ie.lineIndent=pe;break}}he&&(captureSegment$1(ie,le,ae,!1),writeFoldedLines$1(ie,ie.line-de),le=ae=ie.position,he=!1),is_WHITE_SPACE$1($e)||(ae=ie.position+1),$e=ie.input.charCodeAt(++ie.position)}return captureSegment$1(ie,le,ae,!1),ie.result?!0:(ie.kind=fe,ie.result=ge,!1)}function readSingleQuotedScalar$1(ie,te){var ne,re,oe;if(ne=ie.input.charCodeAt(ie.position),ne!==39)return!1;for(ie.kind="scalar",ie.result="",ie.position++,re=oe=ie.position;(ne=ie.input.charCodeAt(ie.position))!==0;)if(ne===39)if(captureSegment$1(ie,re,ie.position,!0),ne=ie.input.charCodeAt(++ie.position),ne===39)re=ie.position,ie.position++,oe=ie.position;else return!0;else is_EOL$1(ne)?(captureSegment$1(ie,re,oe,!0),writeFoldedLines$1(ie,skipSeparationSpace$1(ie,!1,te)),re=oe=ie.position):ie.position===ie.lineStart&&testDocumentSeparator$1(ie)?throwError$1(ie,"unexpected end of the document within a single quoted scalar"):(ie.position++,oe=ie.position);throwError$1(ie,"unexpected end of the stream within a single quoted scalar")}function readDoubleQuotedScalar$1(ie,te){var ne,re,oe,le,ae,he;if(he=ie.input.charCodeAt(ie.position),he!==34)return!1;for(ie.kind="scalar",ie.result="",ie.position++,ne=re=ie.position;(he=ie.input.charCodeAt(ie.position))!==0;){if(he===34)return captureSegment$1(ie,ne,ie.position,!0),ie.position++,!0;if(he===92){if(captureSegment$1(ie,ne,ie.position,!0),he=ie.input.charCodeAt(++ie.position),is_EOL$1(he))skipSeparationSpace$1(ie,!1,te);else if(he<256&&simpleEscapeCheck$1[he])ie.result+=simpleEscapeMap$1[he],ie.position++;else if((ae=escapedHexLen$1(he))>0){for(oe=ae,le=0;oe>0;oe--)he=ie.input.charCodeAt(++ie.position),(ae=fromHexCode$1(he))>=0?le=(le<<4)+ae:throwError$1(ie,"expected hexadecimal character");ie.result+=charFromCodepoint$1(le),ie.position++}else throwError$1(ie,"unknown escape sequence");ne=re=ie.position}else is_EOL$1(he)?(captureSegment$1(ie,ne,re,!0),writeFoldedLines$1(ie,skipSeparationSpace$1(ie,!1,te)),ne=re=ie.position):ie.position===ie.lineStart&&testDocumentSeparator$1(ie)?throwError$1(ie,"unexpected end of the document within a double quoted scalar"):(ie.position++,re=ie.position)}throwError$1(ie,"unexpected end of the stream within a double quoted scalar")}function readFlowCollection$1(ie,te){var ne=!0,re,oe,le,ae=ie.tag,he,de=ie.anchor,ue,pe,fe,ge,$e,Te=Object.create(null),Ee,Se,ve,ke;if(ke=ie.input.charCodeAt(ie.position),ke===91)pe=93,$e=!1,he=[];else if(ke===123)pe=125,$e=!0,he={};else return!1;for(ie.anchor!==null&&(ie.anchorMap[ie.anchor]=he),ke=ie.input.charCodeAt(++ie.position);ke!==0;){if(skipSeparationSpace$1(ie,!0,te),ke=ie.input.charCodeAt(ie.position),ke===pe)return ie.position++,ie.tag=ae,ie.anchor=de,ie.kind=$e?"mapping":"sequence",ie.result=he,!0;ne?ke===44&&throwError$1(ie,"expected the node content, but found ','"):throwError$1(ie,"missed comma between flow collection entries"),Se=Ee=ve=null,fe=ge=!1,ke===63&&(ue=ie.input.charCodeAt(ie.position+1),is_WS_OR_EOL$1(ue)&&(fe=ge=!0,ie.position++,skipSeparationSpace$1(ie,!0,te))),re=ie.line,oe=ie.lineStart,le=ie.position,composeNode$1(ie,te,CONTEXT_FLOW_IN$1,!1,!0),Se=ie.tag,Ee=ie.result,skipSeparationSpace$1(ie,!0,te),ke=ie.input.charCodeAt(ie.position),(ge||ie.line===re)&&ke===58&&(fe=!0,ke=ie.input.charCodeAt(++ie.position),skipSeparationSpace$1(ie,!0,te),composeNode$1(ie,te,CONTEXT_FLOW_IN$1,!1,!0),ve=ie.result),$e?storeMappingPair$1(ie,he,Te,Se,Ee,ve,re,oe,le):fe?he.push(storeMappingPair$1(ie,null,Te,Se,Ee,ve,re,oe,le)):he.push(Ee),skipSeparationSpace$1(ie,!0,te),ke=ie.input.charCodeAt(ie.position),ke===44?(ne=!0,ke=ie.input.charCodeAt(++ie.position)):ne=!1}throwError$1(ie,"unexpected end of the stream within a flow collection")}function readBlockScalar$1(ie,te){var ne,re,oe=CHOMPING_CLIP$1,le=!1,ae=!1,he=te,de=0,ue=!1,pe,fe;if(fe=ie.input.charCodeAt(ie.position),fe===124)re=!1;else if(fe===62)re=!0;else return!1;for(ie.kind="scalar",ie.result="";fe!==0;)if(fe=ie.input.charCodeAt(++ie.position),fe===43||fe===45)CHOMPING_CLIP$1===oe?oe=fe===43?CHOMPING_KEEP$1:CHOMPING_STRIP$1:throwError$1(ie,"repeat of a chomping mode identifier");else if((pe=fromDecimalCode$1(fe))>=0)pe===0?throwError$1(ie,"bad explicit indentation width of a block scalar; it cannot be less than one"):ae?throwError$1(ie,"repeat of an indentation width identifier"):(he=te+pe-1,ae=!0);else break;if(is_WHITE_SPACE$1(fe)){do fe=ie.input.charCodeAt(++ie.position);while(is_WHITE_SPACE$1(fe));if(fe===35)do fe=ie.input.charCodeAt(++ie.position);while(!is_EOL$1(fe)&&fe!==0)}for(;fe!==0;){for(readLineBreak$1(ie),ie.lineIndent=0,fe=ie.input.charCodeAt(ie.position);(!ae||ie.lineIndent<he)&&fe===32;)ie.lineIndent++,fe=ie.input.charCodeAt(++ie.position);if(!ae&&ie.lineIndent>he&&(he=ie.lineIndent),is_EOL$1(fe)){de++;continue}if(ie.lineIndent<he){oe===CHOMPING_KEEP$1?ie.result+=common$1.repeat(`
`,le?1+de:de):oe===CHOMPING_CLIP$1&&le&&(ie.result+=`
`);break}for(re?is_WHITE_SPACE$1(fe)?(ue=!0,ie.result+=common$1.repeat(`
`,le?1+de:de)):ue?(ue=!1,ie.result+=common$1.repeat(`
`,de+1)):de===0?le&&(ie.result+=" "):ie.result+=common$1.repeat(`
`,de):ie.result+=common$1.repeat(`
`,le?1+de:de),le=!0,ae=!0,de=0,ne=ie.position;!is_EOL$1(fe)&&fe!==0;)fe=ie.input.charCodeAt(++ie.position);captureSegment$1(ie,ne,ie.position,!1)}return!0}function readBlockSequence$1(ie,te){var ne,re=ie.tag,oe=ie.anchor,le=[],ae,he=!1,de;if(ie.firstTabInLine!==-1)return!1;for(ie.anchor!==null&&(ie.anchorMap[ie.anchor]=le),de=ie.input.charCodeAt(ie.position);de!==0&&(ie.firstTabInLine!==-1&&(ie.position=ie.firstTabInLine,throwError$1(ie,"tab characters must not be used in indentation")),!(de!==45||(ae=ie.input.charCodeAt(ie.position+1),!is_WS_OR_EOL$1(ae))));){if(he=!0,ie.position++,skipSeparationSpace$1(ie,!0,-1)&&ie.lineIndent<=te){le.push(null),de=ie.input.charCodeAt(ie.position);continue}if(ne=ie.line,composeNode$1(ie,te,CONTEXT_BLOCK_IN$1,!1,!0),le.push(ie.result),skipSeparationSpace$1(ie,!0,-1),de=ie.input.charCodeAt(ie.position),(ie.line===ne||ie.lineIndent>te)&&de!==0)throwError$1(ie,"bad indentation of a sequence entry");else if(ie.lineIndent<te)break}return he?(ie.tag=re,ie.anchor=oe,ie.kind="sequence",ie.result=le,!0):!1}function readBlockMapping$1(ie,te,ne){var re,oe,le,ae,he,de,ue=ie.tag,pe=ie.anchor,fe={},ge=Object.create(null),$e=null,Te=null,Ee=null,Se=!1,ve=!1,ke;if(ie.firstTabInLine!==-1)return!1;for(ie.anchor!==null&&(ie.anchorMap[ie.anchor]=fe),ke=ie.input.charCodeAt(ie.position);ke!==0;){if(!Se&&ie.firstTabInLine!==-1&&(ie.position=ie.firstTabInLine,throwError$1(ie,"tab characters must not be used in indentation")),re=ie.input.charCodeAt(ie.position+1),le=ie.line,(ke===63||ke===58)&&is_WS_OR_EOL$1(re))ke===63?(Se&&(storeMappingPair$1(ie,fe,ge,$e,Te,null,ae,he,de),$e=Te=Ee=null),ve=!0,Se=!0,oe=!0):Se?(Se=!1,oe=!0):throwError$1(ie,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),ie.position+=1,ke=re;else{if(ae=ie.line,he=ie.lineStart,de=ie.position,!composeNode$1(ie,ne,CONTEXT_FLOW_OUT$1,!1,!0))break;if(ie.line===le){for(ke=ie.input.charCodeAt(ie.position);is_WHITE_SPACE$1(ke);)ke=ie.input.charCodeAt(++ie.position);if(ke===58)ke=ie.input.charCodeAt(++ie.position),is_WS_OR_EOL$1(ke)||throwError$1(ie,"a whitespace character is expected after the key-value separator within a block mapping"),Se&&(storeMappingPair$1(ie,fe,ge,$e,Te,null,ae,he,de),$e=Te=Ee=null),ve=!0,Se=!1,oe=!1,$e=ie.tag,Te=ie.result;else if(ve)throwError$1(ie,"can not read an implicit mapping pair; a colon is missed");else return ie.tag=ue,ie.anchor=pe,!0}else if(ve)throwError$1(ie,"can not read a block mapping entry; a multiline key may not be an implicit key");else return ie.tag=ue,ie.anchor=pe,!0}if((ie.line===le||ie.lineIndent>te)&&(Se&&(ae=ie.line,he=ie.lineStart,de=ie.position),composeNode$1(ie,te,CONTEXT_BLOCK_OUT$1,!0,oe)&&(Se?Te=ie.result:Ee=ie.result),Se||(storeMappingPair$1(ie,fe,ge,$e,Te,Ee,ae,he,de),$e=Te=Ee=null),skipSeparationSpace$1(ie,!0,-1),ke=ie.input.charCodeAt(ie.position)),(ie.line===le||ie.lineIndent>te)&&ke!==0)throwError$1(ie,"bad indentation of a mapping entry");else if(ie.lineIndent<te)break}return Se&&storeMappingPair$1(ie,fe,ge,$e,Te,null,ae,he,de),ve&&(ie.tag=ue,ie.anchor=pe,ie.kind="mapping",ie.result=fe),ve}function readTagProperty$1(ie){var te,ne=!1,re=!1,oe,le,ae;if(ae=ie.input.charCodeAt(ie.position),ae!==33)return!1;if(ie.tag!==null&&throwError$1(ie,"duplication of a tag property"),ae=ie.input.charCodeAt(++ie.position),ae===60?(ne=!0,ae=ie.input.charCodeAt(++ie.position)):ae===33?(re=!0,oe="!!",ae=ie.input.charCodeAt(++ie.position)):oe="!",te=ie.position,ne){do ae=ie.input.charCodeAt(++ie.position);while(ae!==0&&ae!==62);ie.position<ie.length?(le=ie.input.slice(te,ie.position),ae=ie.input.charCodeAt(++ie.position)):throwError$1(ie,"unexpected end of the stream within a verbatim tag")}else{for(;ae!==0&&!is_WS_OR_EOL$1(ae);)ae===33&&(re?throwError$1(ie,"tag suffix cannot contain exclamation marks"):(oe=ie.input.slice(te-1,ie.position+1),PATTERN_TAG_HANDLE$1.test(oe)||throwError$1(ie,"named tag handle cannot contain such characters"),re=!0,te=ie.position+1)),ae=ie.input.charCodeAt(++ie.position);le=ie.input.slice(te,ie.position),PATTERN_FLOW_INDICATORS$1.test(le)&&throwError$1(ie,"tag suffix cannot contain flow indicator characters")}le&&!PATTERN_TAG_URI$1.test(le)&&throwError$1(ie,"tag name cannot contain such characters: "+le);try{le=decodeURIComponent(le)}catch{throwError$1(ie,"tag name is malformed: "+le)}return ne?ie.tag=le:_hasOwnProperty$1$1.call(ie.tagMap,oe)?ie.tag=ie.tagMap[oe]+le:oe==="!"?ie.tag="!"+le:oe==="!!"?ie.tag="tag:yaml.org,2002:"+le:throwError$1(ie,'undeclared tag handle "'+oe+'"'),!0}function readAnchorProperty$1(ie){var te,ne;if(ne=ie.input.charCodeAt(ie.position),ne!==38)return!1;for(ie.anchor!==null&&throwError$1(ie,"duplication of an anchor property"),ne=ie.input.charCodeAt(++ie.position),te=ie.position;ne!==0&&!is_WS_OR_EOL$1(ne)&&!is_FLOW_INDICATOR$1(ne);)ne=ie.input.charCodeAt(++ie.position);return ie.position===te&&throwError$1(ie,"name of an anchor node must contain at least one character"),ie.anchor=ie.input.slice(te,ie.position),!0}function readAlias$1(ie){var te,ne,re;if(re=ie.input.charCodeAt(ie.position),re!==42)return!1;for(re=ie.input.charCodeAt(++ie.position),te=ie.position;re!==0&&!is_WS_OR_EOL$1(re)&&!is_FLOW_INDICATOR$1(re);)re=ie.input.charCodeAt(++ie.position);return ie.position===te&&throwError$1(ie,"name of an alias node must contain at least one character"),ne=ie.input.slice(te,ie.position),_hasOwnProperty$1$1.call(ie.anchorMap,ne)||throwError$1(ie,'unidentified alias "'+ne+'"'),ie.result=ie.anchorMap[ne],skipSeparationSpace$1(ie,!0,-1),!0}function composeNode$1(ie,te,ne,re,oe){var le,ae,he,de=1,ue=!1,pe=!1,fe,ge,$e,Te,Ee,Se;if(ie.listener!==null&&ie.listener("open",ie),ie.tag=null,ie.anchor=null,ie.kind=null,ie.result=null,le=ae=he=CONTEXT_BLOCK_OUT$1===ne||CONTEXT_BLOCK_IN$1===ne,re&&skipSeparationSpace$1(ie,!0,-1)&&(ue=!0,ie.lineIndent>te?de=1:ie.lineIndent===te?de=0:ie.lineIndent<te&&(de=-1)),de===1)for(;readTagProperty$1(ie)||readAnchorProperty$1(ie);)skipSeparationSpace$1(ie,!0,-1)?(ue=!0,he=le,ie.lineIndent>te?de=1:ie.lineIndent===te?de=0:ie.lineIndent<te&&(de=-1)):he=!1;if(he&&(he=ue||oe),(de===1||CONTEXT_BLOCK_OUT$1===ne)&&(CONTEXT_FLOW_IN$1===ne||CONTEXT_FLOW_OUT$1===ne?Ee=te:Ee=te+1,Se=ie.position-ie.lineStart,de===1?he&&(readBlockSequence$1(ie,Se)||readBlockMapping$1(ie,Se,Ee))||readFlowCollection$1(ie,Ee)?pe=!0:(ae&&readBlockScalar$1(ie,Ee)||readSingleQuotedScalar$1(ie,Ee)||readDoubleQuotedScalar$1(ie,Ee)?pe=!0:readAlias$1(ie)?(pe=!0,(ie.tag!==null||ie.anchor!==null)&&throwError$1(ie,"alias node should not have any properties")):readPlainScalar$1(ie,Ee,CONTEXT_FLOW_IN$1===ne)&&(pe=!0,ie.tag===null&&(ie.tag="?")),ie.anchor!==null&&(ie.anchorMap[ie.anchor]=ie.result)):de===0&&(pe=he&&readBlockSequence$1(ie,Se))),ie.tag===null)ie.anchor!==null&&(ie.anchorMap[ie.anchor]=ie.result);else if(ie.tag==="?"){for(ie.result!==null&&ie.kind!=="scalar"&&throwError$1(ie,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+ie.kind+'"'),fe=0,ge=ie.implicitTypes.length;fe<ge;fe+=1)if(Te=ie.implicitTypes[fe],Te.resolve(ie.result)){ie.result=Te.construct(ie.result),ie.tag=Te.tag,ie.anchor!==null&&(ie.anchorMap[ie.anchor]=ie.result);break}}else if(ie.tag!=="!"){if(_hasOwnProperty$1$1.call(ie.typeMap[ie.kind||"fallback"],ie.tag))Te=ie.typeMap[ie.kind||"fallback"][ie.tag];else for(Te=null,$e=ie.typeMap.multi[ie.kind||"fallback"],fe=0,ge=$e.length;fe<ge;fe+=1)if(ie.tag.slice(0,$e[fe].tag.length)===$e[fe].tag){Te=$e[fe];break}Te||throwError$1(ie,"unknown tag !<"+ie.tag+">"),ie.result!==null&&Te.kind!==ie.kind&&throwError$1(ie,"unacceptable node kind for !<"+ie.tag+'> tag; it should be "'+Te.kind+'", not "'+ie.kind+'"'),Te.resolve(ie.result,ie.tag)?(ie.result=Te.construct(ie.result,ie.tag),ie.anchor!==null&&(ie.anchorMap[ie.anchor]=ie.result)):throwError$1(ie,"cannot resolve a node with !<"+ie.tag+"> explicit tag")}return ie.listener!==null&&ie.listener("close",ie),ie.tag!==null||ie.anchor!==null||pe}function readDocument$1(ie){var te=ie.position,ne,re,oe,le=!1,ae;for(ie.version=null,ie.checkLineBreaks=ie.legacy,ie.tagMap=Object.create(null),ie.anchorMap=Object.create(null);(ae=ie.input.charCodeAt(ie.position))!==0&&(skipSeparationSpace$1(ie,!0,-1),ae=ie.input.charCodeAt(ie.position),!(ie.lineIndent>0||ae!==37));){for(le=!0,ae=ie.input.charCodeAt(++ie.position),ne=ie.position;ae!==0&&!is_WS_OR_EOL$1(ae);)ae=ie.input.charCodeAt(++ie.position);for(re=ie.input.slice(ne,ie.position),oe=[],re.length<1&&throwError$1(ie,"directive name must not be less than one character in length");ae!==0;){for(;is_WHITE_SPACE$1(ae);)ae=ie.input.charCodeAt(++ie.position);if(ae===35){do ae=ie.input.charCodeAt(++ie.position);while(ae!==0&&!is_EOL$1(ae));break}if(is_EOL$1(ae))break;for(ne=ie.position;ae!==0&&!is_WS_OR_EOL$1(ae);)ae=ie.input.charCodeAt(++ie.position);oe.push(ie.input.slice(ne,ie.position))}ae!==0&&readLineBreak$1(ie),_hasOwnProperty$1$1.call(directiveHandlers$1,re)?directiveHandlers$1[re](ie,re,oe):throwWarning$1(ie,'unknown document directive "'+re+'"')}if(skipSeparationSpace$1(ie,!0,-1),ie.lineIndent===0&&ie.input.charCodeAt(ie.position)===45&&ie.input.charCodeAt(ie.position+1)===45&&ie.input.charCodeAt(ie.position+2)===45?(ie.position+=3,skipSeparationSpace$1(ie,!0,-1)):le&&throwError$1(ie,"directives end mark is expected"),composeNode$1(ie,ie.lineIndent-1,CONTEXT_BLOCK_OUT$1,!1,!0),skipSeparationSpace$1(ie,!0,-1),ie.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS$1.test(ie.input.slice(te,ie.position))&&throwWarning$1(ie,"non-ASCII line breaks are interpreted as content"),ie.documents.push(ie.result),ie.position===ie.lineStart&&testDocumentSeparator$1(ie)){ie.input.charCodeAt(ie.position)===46&&(ie.position+=3,skipSeparationSpace$1(ie,!0,-1));return}if(ie.position<ie.length-1)throwError$1(ie,"end of the stream or a document separator is expected");else return}function loadDocuments$1(ie,te){ie=String(ie),te=te||{},ie.length!==0&&(ie.charCodeAt(ie.length-1)!==10&&ie.charCodeAt(ie.length-1)!==13&&(ie+=`
`),ie.charCodeAt(0)===65279&&(ie=ie.slice(1)));var ne=new State$1$1(ie,te),re=ie.indexOf("\0");for(re!==-1&&(ne.position=re,throwError$1(ne,"null byte is not allowed in input")),ne.input+="\0";ne.input.charCodeAt(ne.position)===32;)ne.lineIndent+=1,ne.position+=1;for(;ne.position<ne.length-1;)readDocument$1(ne);return ne.documents}function loadAll$1$1(ie,te,ne){te!==null&&typeof te=="object"&&typeof ne>"u"&&(ne=te,te=null);var re=loadDocuments$1(ie,ne);if(typeof te!="function")return re;for(var oe=0,le=re.length;oe<le;oe+=1)te(re[oe])}function load$1$1(ie,te){var ne=loadDocuments$1(ie,te);if(ne.length!==0){if(ne.length===1)return ne[0];throw new exception$1("expected a single document in the stream, but found more")}}var loadAll_1$1=loadAll$1$1,load_1$1=load$1$1,loader$2={loadAll:loadAll_1$1,load:load_1$1},_toString$3=Object.prototype.toString,_hasOwnProperty$4=Object.prototype.hasOwnProperty,CHAR_BOM$1=65279,CHAR_TAB$1=9,CHAR_LINE_FEED$1=10,CHAR_CARRIAGE_RETURN$1=13,CHAR_SPACE$1=32,CHAR_EXCLAMATION$1=33,CHAR_DOUBLE_QUOTE$1=34,CHAR_SHARP$1=35,CHAR_PERCENT$1=37,CHAR_AMPERSAND$1=38,CHAR_SINGLE_QUOTE$1=39,CHAR_ASTERISK$1=42,CHAR_COMMA$1=44,CHAR_MINUS$1=45,CHAR_COLON$1=58,CHAR_EQUALS$1=61,CHAR_GREATER_THAN$1=62,CHAR_QUESTION$1=63,CHAR_COMMERCIAL_AT$1=64,CHAR_LEFT_SQUARE_BRACKET$1=91,CHAR_RIGHT_SQUARE_BRACKET$1=93,CHAR_GRAVE_ACCENT$1=96,CHAR_LEFT_CURLY_BRACKET$1=123,CHAR_VERTICAL_LINE$1=124,CHAR_RIGHT_CURLY_BRACKET$1=125,ESCAPE_SEQUENCES$1={};ESCAPE_SEQUENCES$1[0]="\\0";ESCAPE_SEQUENCES$1[7]="\\a";ESCAPE_SEQUENCES$1[8]="\\b";ESCAPE_SEQUENCES$1[9]="\\t";ESCAPE_SEQUENCES$1[10]="\\n";ESCAPE_SEQUENCES$1[11]="\\v";ESCAPE_SEQUENCES$1[12]="\\f";ESCAPE_SEQUENCES$1[13]="\\r";ESCAPE_SEQUENCES$1[27]="\\e";ESCAPE_SEQUENCES$1[34]='\\"';ESCAPE_SEQUENCES$1[92]="\\\\";ESCAPE_SEQUENCES$1[133]="\\N";ESCAPE_SEQUENCES$1[160]="\\_";ESCAPE_SEQUENCES$1[8232]="\\L";ESCAPE_SEQUENCES$1[8233]="\\P";var DEPRECATED_BOOLEANS_SYNTAX$1=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],DEPRECATED_BASE60_SYNTAX$1=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function compileStyleMap$1(ie,te){var ne,re,oe,le,ae,he,de;if(te===null)return{};for(ne={},re=Object.keys(te),oe=0,le=re.length;oe<le;oe+=1)ae=re[oe],he=String(te[ae]),ae.slice(0,2)==="!!"&&(ae="tag:yaml.org,2002:"+ae.slice(2)),de=ie.compiledTypeMap.fallback[ae],de&&_hasOwnProperty$4.call(de.styleAliases,he)&&(he=de.styleAliases[he]),ne[ae]=he;return ne}function encodeHex$1(ie){var te,ne,re;if(te=ie.toString(16).toUpperCase(),ie<=255)ne="x",re=2;else if(ie<=65535)ne="u",re=4;else if(ie<=4294967295)ne="U",re=8;else throw new exception$1("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+ne+common$1.repeat("0",re-te.length)+te}var QUOTING_TYPE_SINGLE$1=1,QUOTING_TYPE_DOUBLE$1=2;function State$2(ie){this.schema=ie.schema||_default$1,this.indent=Math.max(1,ie.indent||2),this.noArrayIndent=ie.noArrayIndent||!1,this.skipInvalid=ie.skipInvalid||!1,this.flowLevel=common$1.isNothing(ie.flowLevel)?-1:ie.flowLevel,this.styleMap=compileStyleMap$1(this.schema,ie.styles||null),this.sortKeys=ie.sortKeys||!1,this.lineWidth=ie.lineWidth||80,this.noRefs=ie.noRefs||!1,this.noCompatMode=ie.noCompatMode||!1,this.condenseFlow=ie.condenseFlow||!1,this.quotingType=ie.quotingType==='"'?QUOTING_TYPE_DOUBLE$1:QUOTING_TYPE_SINGLE$1,this.forceQuotes=ie.forceQuotes||!1,this.replacer=typeof ie.replacer=="function"?ie.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function indentString$1(ie,te){for(var ne=common$1.repeat(" ",te),re=0,oe=-1,le="",ae,he=ie.length;re<he;)oe=ie.indexOf(`
`,re),oe===-1?(ae=ie.slice(re),re=he):(ae=ie.slice(re,oe+1),re=oe+1),ae.length&&ae!==`
`&&(le+=ne),le+=ae;return le}function generateNextLine$1(ie,te){return`
`+common$1.repeat(" ",ie.indent*te)}function testImplicitResolving$1(ie,te){var ne,re,oe;for(ne=0,re=ie.implicitTypes.length;ne<re;ne+=1)if(oe=ie.implicitTypes[ne],oe.resolve(te))return!0;return!1}function isWhitespace$1(ie){return ie===CHAR_SPACE$1||ie===CHAR_TAB$1}function isPrintable$1(ie){return 32<=ie&&ie<=126||161<=ie&&ie<=55295&&ie!==8232&&ie!==8233||57344<=ie&&ie<=65533&&ie!==CHAR_BOM$1||65536<=ie&&ie<=1114111}function isNsCharOrWhitespace$1(ie){return isPrintable$1(ie)&&ie!==CHAR_BOM$1&&ie!==CHAR_CARRIAGE_RETURN$1&&ie!==CHAR_LINE_FEED$1}function isPlainSafe$1(ie,te,ne){var re=isNsCharOrWhitespace$1(ie),oe=re&&!isWhitespace$1(ie);return(ne?re:re&&ie!==CHAR_COMMA$1&&ie!==CHAR_LEFT_SQUARE_BRACKET$1&&ie!==CHAR_RIGHT_SQUARE_BRACKET$1&&ie!==CHAR_LEFT_CURLY_BRACKET$1&&ie!==CHAR_RIGHT_CURLY_BRACKET$1)&&ie!==CHAR_SHARP$1&&!(te===CHAR_COLON$1&&!oe)||isNsCharOrWhitespace$1(te)&&!isWhitespace$1(te)&&ie===CHAR_SHARP$1||te===CHAR_COLON$1&&oe}function isPlainSafeFirst$1(ie){return isPrintable$1(ie)&&ie!==CHAR_BOM$1&&!isWhitespace$1(ie)&&ie!==CHAR_MINUS$1&&ie!==CHAR_QUESTION$1&&ie!==CHAR_COLON$1&&ie!==CHAR_COMMA$1&&ie!==CHAR_LEFT_SQUARE_BRACKET$1&&ie!==CHAR_RIGHT_SQUARE_BRACKET$1&&ie!==CHAR_LEFT_CURLY_BRACKET$1&&ie!==CHAR_RIGHT_CURLY_BRACKET$1&&ie!==CHAR_SHARP$1&&ie!==CHAR_AMPERSAND$1&&ie!==CHAR_ASTERISK$1&&ie!==CHAR_EXCLAMATION$1&&ie!==CHAR_VERTICAL_LINE$1&&ie!==CHAR_EQUALS$1&&ie!==CHAR_GREATER_THAN$1&&ie!==CHAR_SINGLE_QUOTE$1&&ie!==CHAR_DOUBLE_QUOTE$1&&ie!==CHAR_PERCENT$1&&ie!==CHAR_COMMERCIAL_AT$1&&ie!==CHAR_GRAVE_ACCENT$1}function isPlainSafeLast$1(ie){return!isWhitespace$1(ie)&&ie!==CHAR_COLON$1}function codePointAt$1(ie,te){var ne=ie.charCodeAt(te),re;return ne>=55296&&ne<=56319&&te+1<ie.length&&(re=ie.charCodeAt(te+1),re>=56320&&re<=57343)?(ne-55296)*1024+re-56320+65536:ne}function needIndentIndicator$1(ie){var te=/^\n* /;return te.test(ie)}var STYLE_PLAIN$1=1,STYLE_SINGLE$1=2,STYLE_LITERAL$1=3,STYLE_FOLDED$1=4,STYLE_DOUBLE$1=5;function chooseScalarStyle$1(ie,te,ne,re,oe,le,ae,he){var de,ue=0,pe=null,fe=!1,ge=!1,$e=re!==-1,Te=-1,Ee=isPlainSafeFirst$1(codePointAt$1(ie,0))&&isPlainSafeLast$1(codePointAt$1(ie,ie.length-1));if(te||ae)for(de=0;de<ie.length;ue>=65536?de+=2:de++){if(ue=codePointAt$1(ie,de),!isPrintable$1(ue))return STYLE_DOUBLE$1;Ee=Ee&&isPlainSafe$1(ue,pe,he),pe=ue}else{for(de=0;de<ie.length;ue>=65536?de+=2:de++){if(ue=codePointAt$1(ie,de),ue===CHAR_LINE_FEED$1)fe=!0,$e&&(ge=ge||de-Te-1>re&&ie[Te+1]!==" ",Te=de);else if(!isPrintable$1(ue))return STYLE_DOUBLE$1;Ee=Ee&&isPlainSafe$1(ue,pe,he),pe=ue}ge=ge||$e&&de-Te-1>re&&ie[Te+1]!==" "}return!fe&&!ge?Ee&&!ae&&!oe(ie)?STYLE_PLAIN$1:le===QUOTING_TYPE_DOUBLE$1?STYLE_DOUBLE$1:STYLE_SINGLE$1:ne>9&&needIndentIndicator$1(ie)?STYLE_DOUBLE$1:ae?le===QUOTING_TYPE_DOUBLE$1?STYLE_DOUBLE$1:STYLE_SINGLE$1:ge?STYLE_FOLDED$1:STYLE_LITERAL$1}function writeScalar$1(ie,te,ne,re,oe){ie.dump=function(){if(te.length===0)return ie.quotingType===QUOTING_TYPE_DOUBLE$1?'""':"''";if(!ie.noCompatMode&&(DEPRECATED_BOOLEANS_SYNTAX$1.indexOf(te)!==-1||DEPRECATED_BASE60_SYNTAX$1.test(te)))return ie.quotingType===QUOTING_TYPE_DOUBLE$1?'"'+te+'"':"'"+te+"'";var le=ie.indent*Math.max(1,ne),ae=ie.lineWidth===-1?-1:Math.max(Math.min(ie.lineWidth,40),ie.lineWidth-le),he=re||ie.flowLevel>-1&&ne>=ie.flowLevel;function de(ue){return testImplicitResolving$1(ie,ue)}switch(chooseScalarStyle$1(te,he,ie.indent,ae,de,ie.quotingType,ie.forceQuotes&&!re,oe)){case STYLE_PLAIN$1:return te;case STYLE_SINGLE$1:return"'"+te.replace(/'/g,"''")+"'";case STYLE_LITERAL$1:return"|"+blockHeader$1(te,ie.indent)+dropEndingNewline$1(indentString$1(te,le));case STYLE_FOLDED$1:return">"+blockHeader$1(te,ie.indent)+dropEndingNewline$1(indentString$1(foldString$1(te,ae),le));case STYLE_DOUBLE$1:return'"'+escapeString$1(te)+'"';default:throw new exception$1("impossible error: invalid scalar style")}}()}function blockHeader$1(ie,te){var ne=needIndentIndicator$1(ie)?String(te):"",re=ie[ie.length-1]===`
`,oe=re&&(ie[ie.length-2]===`
`||ie===`
`),le=oe?"+":re?"":"-";return ne+le+`
`}function dropEndingNewline$1(ie){return ie[ie.length-1]===`
`?ie.slice(0,-1):ie}function foldString$1(ie,te){for(var ne=/(\n+)([^\n]*)/g,re=function(){var ue=ie.indexOf(`
`);return ue=ue!==-1?ue:ie.length,ne.lastIndex=ue,foldLine$1(ie.slice(0,ue),te)}(),oe=ie[0]===`
`||ie[0]===" ",le,ae;ae=ne.exec(ie);){var he=ae[1],de=ae[2];le=de[0]===" ",re+=he+(!oe&&!le&&de!==""?`
`:"")+foldLine$1(de,te),oe=le}return re}function foldLine$1(ie,te){if(ie===""||ie[0]===" ")return ie;for(var ne=/ [^ ]/g,re,oe=0,le,ae=0,he=0,de="";re=ne.exec(ie);)he=re.index,he-oe>te&&(le=ae>oe?ae:he,de+=`
`+ie.slice(oe,le),oe=le+1),ae=he;return de+=`
`,ie.length-oe>te&&ae>oe?de+=ie.slice(oe,ae)+`
`+ie.slice(ae+1):de+=ie.slice(oe),de.slice(1)}function escapeString$1(ie){for(var te="",ne=0,re,oe=0;oe<ie.length;ne>=65536?oe+=2:oe++)ne=codePointAt$1(ie,oe),re=ESCAPE_SEQUENCES$1[ne],!re&&isPrintable$1(ne)?(te+=ie[oe],ne>=65536&&(te+=ie[oe+1])):te+=re||encodeHex$1(ne);return te}function writeFlowSequence$1(ie,te,ne){var re="",oe=ie.tag,le,ae,he;for(le=0,ae=ne.length;le<ae;le+=1)he=ne[le],ie.replacer&&(he=ie.replacer.call(ne,String(le),he)),(writeNode$1(ie,te,he,!1,!1)||typeof he>"u"&&writeNode$1(ie,te,null,!1,!1))&&(re!==""&&(re+=","+(ie.condenseFlow?"":" ")),re+=ie.dump);ie.tag=oe,ie.dump="["+re+"]"}function writeBlockSequence$1(ie,te,ne,re){var oe="",le=ie.tag,ae,he,de;for(ae=0,he=ne.length;ae<he;ae+=1)de=ne[ae],ie.replacer&&(de=ie.replacer.call(ne,String(ae),de)),(writeNode$1(ie,te+1,de,!0,!0,!1,!0)||typeof de>"u"&&writeNode$1(ie,te+1,null,!0,!0,!1,!0))&&((!re||oe!=="")&&(oe+=generateNextLine$1(ie,te)),ie.dump&&CHAR_LINE_FEED$1===ie.dump.charCodeAt(0)?oe+="-":oe+="- ",oe+=ie.dump);ie.tag=le,ie.dump=oe||"[]"}function writeFlowMapping$1(ie,te,ne){var re="",oe=ie.tag,le=Object.keys(ne),ae,he,de,ue,pe;for(ae=0,he=le.length;ae<he;ae+=1)pe="",re!==""&&(pe+=", "),ie.condenseFlow&&(pe+='"'),de=le[ae],ue=ne[de],ie.replacer&&(ue=ie.replacer.call(ne,de,ue)),writeNode$1(ie,te,de,!1,!1)&&(ie.dump.length>1024&&(pe+="? "),pe+=ie.dump+(ie.condenseFlow?'"':"")+":"+(ie.condenseFlow?"":" "),writeNode$1(ie,te,ue,!1,!1)&&(pe+=ie.dump,re+=pe));ie.tag=oe,ie.dump="{"+re+"}"}function writeBlockMapping$1(ie,te,ne,re){var oe="",le=ie.tag,ae=Object.keys(ne),he,de,ue,pe,fe,ge;if(ie.sortKeys===!0)ae.sort();else if(typeof ie.sortKeys=="function")ae.sort(ie.sortKeys);else if(ie.sortKeys)throw new exception$1("sortKeys must be a boolean or a function");for(he=0,de=ae.length;he<de;he+=1)ge="",(!re||oe!=="")&&(ge+=generateNextLine$1(ie,te)),ue=ae[he],pe=ne[ue],ie.replacer&&(pe=ie.replacer.call(ne,ue,pe)),writeNode$1(ie,te+1,ue,!0,!0,!0)&&(fe=ie.tag!==null&&ie.tag!=="?"||ie.dump&&ie.dump.length>1024,fe&&(ie.dump&&CHAR_LINE_FEED$1===ie.dump.charCodeAt(0)?ge+="?":ge+="? "),ge+=ie.dump,fe&&(ge+=generateNextLine$1(ie,te)),writeNode$1(ie,te+1,pe,!0,fe)&&(ie.dump&&CHAR_LINE_FEED$1===ie.dump.charCodeAt(0)?ge+=":":ge+=": ",ge+=ie.dump,oe+=ge));ie.tag=le,ie.dump=oe||"{}"}function detectType$2(ie,te,ne){var re,oe,le,ae,he,de;for(oe=ne?ie.explicitTypes:ie.implicitTypes,le=0,ae=oe.length;le<ae;le+=1)if(he=oe[le],(he.instanceOf||he.predicate)&&(!he.instanceOf||typeof te=="object"&&te instanceof he.instanceOf)&&(!he.predicate||he.predicate(te))){if(ne?he.multi&&he.representName?ie.tag=he.representName(te):ie.tag=he.tag:ie.tag="?",he.represent){if(de=ie.styleMap[he.tag]||he.defaultStyle,_toString$3.call(he.represent)==="[object Function]")re=he.represent(te,de);else if(_hasOwnProperty$4.call(he.represent,de))re=he.represent[de](te,de);else throw new exception$1("!<"+he.tag+'> tag resolver accepts not "'+de+'" style');ie.dump=re}return!0}return!1}function writeNode$1(ie,te,ne,re,oe,le,ae){ie.tag=null,ie.dump=ne,detectType$2(ie,ne,!1)||detectType$2(ie,ne,!0);var he=_toString$3.call(ie.dump),de=re,ue;re&&(re=ie.flowLevel<0||ie.flowLevel>te);var pe=he==="[object Object]"||he==="[object Array]",fe,ge;if(pe&&(fe=ie.duplicates.indexOf(ne),ge=fe!==-1),(ie.tag!==null&&ie.tag!=="?"||ge||ie.indent!==2&&te>0)&&(oe=!1),ge&&ie.usedDuplicates[fe])ie.dump="*ref_"+fe;else{if(pe&&ge&&!ie.usedDuplicates[fe]&&(ie.usedDuplicates[fe]=!0),he==="[object Object]")re&&Object.keys(ie.dump).length!==0?(writeBlockMapping$1(ie,te,ie.dump,oe),ge&&(ie.dump="&ref_"+fe+ie.dump)):(writeFlowMapping$1(ie,te,ie.dump),ge&&(ie.dump="&ref_"+fe+" "+ie.dump));else if(he==="[object Array]")re&&ie.dump.length!==0?(ie.noArrayIndent&&!ae&&te>0?writeBlockSequence$1(ie,te-1,ie.dump,oe):writeBlockSequence$1(ie,te,ie.dump,oe),ge&&(ie.dump="&ref_"+fe+ie.dump)):(writeFlowSequence$1(ie,te,ie.dump),ge&&(ie.dump="&ref_"+fe+" "+ie.dump));else if(he==="[object String]")ie.tag!=="?"&&writeScalar$1(ie,ie.dump,te,le,de);else{if(he==="[object Undefined]")return!1;if(ie.skipInvalid)return!1;throw new exception$1("unacceptable kind of an object to dump "+he)}ie.tag!==null&&ie.tag!=="?"&&(ue=encodeURI(ie.tag[0]==="!"?ie.tag.slice(1):ie.tag).replace(/!/g,"%21"),ie.tag[0]==="!"?ue="!"+ue:ue.slice(0,18)==="tag:yaml.org,2002:"?ue="!!"+ue.slice(18):ue="!<"+ue+">",ie.dump=ue+" "+ie.dump)}return!0}function getDuplicateReferences$1(ie,te){var ne=[],re=[],oe,le;for(inspectNode$1(ie,ne,re),oe=0,le=re.length;oe<le;oe+=1)te.duplicates.push(ne[re[oe]]);te.usedDuplicates=new Array(le)}function inspectNode$1(ie,te,ne){var re,oe,le;if(ie!==null&&typeof ie=="object")if(oe=te.indexOf(ie),oe!==-1)ne.indexOf(oe)===-1&&ne.push(oe);else if(te.push(ie),Array.isArray(ie))for(oe=0,le=ie.length;oe<le;oe+=1)inspectNode$1(ie[oe],te,ne);else for(re=Object.keys(ie),oe=0,le=re.length;oe<le;oe+=1)inspectNode$1(ie[re[oe]],te,ne)}function dump$1$1(ie,te){te=te||{};var ne=new State$2(te);ne.noRefs||getDuplicateReferences$1(ie,ne);var re=ie;return ne.replacer&&(re=ne.replacer.call({"":re},"",re)),writeNode$1(ne,0,re,!0,!0)?ne.dump+`
`:""}var dump_1=dump$1$1,dumper={dump:dump_1};function renamed$1(ie,te){return function(){throw new Error("Function yaml."+ie+" is removed in js-yaml 4. Use yaml."+te+" instead, which is now safe by default.")}}var Type$3=type$1,Schema=schema$1,FAILSAFE_SCHEMA=failsafe$1,JSON_SCHEMA$1=json$1,CORE_SCHEMA=core$1,DEFAULT_SCHEMA=_default$1,load$2=loader$2.load,loadAll=loader$2.loadAll,dump=dumper.dump,YAMLException=exception$1,types={binary:binary$1,float:float$1,map:map$1,null:_null$1,pairs:pairs$1,set:set$3,timestamp:timestamp$1,bool:bool$1,int:int$1,merge:merge$3,omap:omap$1,seq:seq$1,str:str$1},safeLoad=renamed$1("safeLoad","load"),safeLoadAll=renamed$1("safeLoadAll","loadAll"),safeDump=renamed$1("safeDump","dump"),jsYaml={Type:Type$3,Schema,FAILSAFE_SCHEMA,JSON_SCHEMA:JSON_SCHEMA$1,CORE_SCHEMA,DEFAULT_SCHEMA,load:load$2,loadAll,dump,YAMLException,types,safeLoad,safeLoadAll,safeDump},dist$1={exports:{}};/*! For license information please see index.js.LICENSE.txt */(function(ie,te){(function(ne,re){ie.exports=re(require$$0)})(commonjsGlobal,ne=>(()=>{var re={370:ve=>{ve.exports=ne}},oe={};function le(ve){var ke=oe[ve];if(ke!==void 0)return ke.exports;var Re=oe[ve]={exports:{}};return re[ve](Re,Re.exports,le),Re.exports}le.d=(ve,ke)=>{for(var Re in ke)le.o(ke,Re)&&!le.o(ve,Re)&&Object.defineProperty(ve,Re,{enumerable:!0,get:ke[Re]})},le.o=(ve,ke)=>Object.prototype.hasOwnProperty.call(ve,ke),le.r=ve=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ve,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ve,"__esModule",{value:!0})};var ae={};le.r(ae),le.d(ae,{Backpack:()=>$e,BackpackChange:()=>fe,BackpackOpen:()=>ue,backpackChange:()=>pe,backpackOpen:()=>de});var he=le(370);he.Msg.COPY_ALL_TO_BACKPACK="Copy All Blocks to Backpack",he.Msg.COPY_TO_BACKPACK="Copy to Backpack",he.Msg.EMPTY_BACKPACK="Empty",he.Msg.PASTE_ALL_FROM_BACKPACK="Paste All Blocks from Backpack",he.Msg.REMOVE_FROM_BACKPACK="Remove from Backpack";const de="backpack_open";class ue extends he.Events.UiBase{constructor(ke,Re){super(Re),this.isOpen=ke,this.type=de}toJson(){const ke=super.toJson();return ke.isOpen=this.isOpen,ke}static fromJson(ke,Re,Ne){const xe=super.fromJson(ke,Re,Ne);return xe.isOpen=ke.isOpen,xe}}he.registry.register(he.registry.Type.EVENT,de,ue);const pe="backpack_change";class fe extends he.Events.UiBase{constructor(){super(...arguments),this.type=pe}}function ge(ve){return ve.toFlyoutInfo!==void 0}he.registry.register(he.registry.Type.EVENT,pe,fe);class $e extends he.DragTarget{constructor(ke,Re){super(),this.workspace_=ke,this.id="backpack",this.flyout_=null,this.contents_=[],this.boundEvents=[],this.left_=0,this.top_=0,this.WIDTH_=40,this.HEIGHT_=60,this.MARGIN_VERTICAL_=20,this.MARGIN_HORIZONTAL_=20,this.HOTSPOT_MARGIN_=10,this.svgGroup_=null,this.svgImg_=null,this.spriteTop=10,this.spriteLeft=20,this.spriteSize=80,this.initialized_=!1,this.options=function(Ne){var xe,ze,Me;const Ae={allowEmptyBackpackOpen:!0,useFilledBackpackImage:!1,skipSerializerRegistration:!1,contextMenu:{emptyBackpack:!0,removeFromBackpack:!0,copyToBackpack:!0,copyAllToBackpack:!1,pasteAllToBackpack:!1,disablePreconditionChecks:!1}};return Ne?{allowEmptyBackpackOpen:(xe=Ne.allowEmptyBackpackOpen)!==null&&xe!==void 0?xe:Ae.allowEmptyBackpackOpen,useFilledBackpackImage:(ze=Ne.useFilledBackpackImage)!==null&&ze!==void 0?ze:Ae.useFilledBackpackImage,skipSerializerRegistration:(Me=Ne.skipSerializerRegistration)!==null&&Me!==void 0?Me:Ae.skipSerializerRegistration,contextMenu:Object.assign(Object.assign({},Ae.contextMenu),Ne.contextMenu)}:Ae}(Re),this.registerSerializer()}registerSerializer(){this.options.skipSerializerRegistration||he.registry.hasItem(he.registry.Type.SERIALIZER,"backpack")||he.serialization.registry.register("backpack",new Se)}init(){var ke,Re,Ne;this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[he.ComponentManager.Capability.AUTOHIDEABLE,he.ComponentManager.Capability.DRAG_TARGET,he.ComponentManager.Capability.POSITIONABLE]}),this.initFlyout(),this.createDom(),this.attachListeners(),this.options.contextMenu&&(ke=this.options.contextMenu,Re=this.workspace_,ke.emptyBackpack&&function(xe){const ze=xe.configureContextMenu;xe.configureContextMenu=(Me,Ae)=>{const Qe=xe.getComponentManager().getComponent("backpack"),ht=Qe&&Qe.getClientRect();if(Ae instanceof PointerEvent&&ht&&(!Qe||!ht.contains(Ae.clientX,Ae.clientY)))return void(ze&&ze.call(null,Me,Ae));Me.length=0;const Pe={text:he.Msg.EMPTY_BACKPACK,enabled:!!Qe.getCount(),callback:function(){Qe.empty()},scope:{workspace:xe},weight:0};Me.push(Pe)}}(Re),ke.removeFromBackpack&&function(){if(he.ContextMenuRegistry.registry.getItem("remove_from_backpack"))return;const xe={displayText:he.Msg.REMOVE_FROM_BACKPACK,preconditionFn:function(ze){if(!ze.block)return"hidden";const Me=ze.block.workspace;if(Me.isFlyout&&Me.targetWorkspace){const Ae=Me.targetWorkspace.getComponentManager().getComponent("backpack"),Qe=Ae&&Ae.getFlyout();if(Ae&&Qe&&Qe.getWorkspace().id===Me.id)return"enabled"}return"hidden"},callback:function(ze){ze.block&&ze.block.workspace.targetWorkspace&&ze.block.workspace.targetWorkspace.getComponentManager().getComponent("backpack").removeBlock(ze.block)},scopeType:he.ContextMenuRegistry.ScopeType.BLOCK,id:"remove_from_backpack",weight:200};he.ContextMenuRegistry.registry.register(xe)}(),ke.copyToBackpack&&function(xe){if(he.ContextMenuRegistry.registry.getItem("copy_to_backpack"))return;const ze={displayText:function(Me){if(!Me.block)return"";const Ae=Me.block.workspace.getComponentManager().getComponent("backpack").getCount();return`${he.Msg.COPY_TO_BACKPACK} (${Ae})`},preconditionFn:function(Me){if(!Me.block)return"hidden";const Ae=Me.block.workspace;if(!Ae.isFlyout){const Qe=Ae.getComponentManager().getComponent("backpack");if(Qe)return xe?"enabled":Qe.containsBlock(Me.block)?"disabled":"enabled"}return"hidden"},callback:function(Me){Me.block&&Me.block.workspace.getComponentManager().getComponent("backpack").addBlock(Me.block)},scopeType:he.ContextMenuRegistry.ScopeType.BLOCK,id:"copy_to_backpack",weight:200};he.ContextMenuRegistry.registry.register(ze)}((Ne=ke.disablePreconditionChecks)!==null&&Ne!==void 0&&Ne),ke.copyAllToBackpack&&function(){if(he.ContextMenuRegistry.registry.getItem("copy_all_to_backpack"))return;const xe={displayText:he.Msg.COPY_ALL_TO_BACKPACK,preconditionFn:function(ze){const Me=ze.workspace;return Me&&!Me.isFlyout&&Me.getComponentManager().getComponent("backpack")?"enabled":"hidden"},callback:function(ze){const Me=ze.workspace;Me&&Me.getComponentManager().getComponent("backpack").addBlocks(Me.getTopBlocks(!0))},scopeType:he.ContextMenuRegistry.ScopeType.WORKSPACE,id:"copy_all_to_backpack",weight:200};he.ContextMenuRegistry.registry.register(xe)}(),ke.pasteAllToBackpack&&function(){if(he.ContextMenuRegistry.registry.getItem("paste_all_from_backpack"))return;const xe={displayText:function(ze){if(!ze.workspace)return"";const Me=ze.workspace.getComponentManager().getComponent("backpack").getCount();return`${he.Msg.PASTE_ALL_FROM_BACKPACK} (${Me})`},preconditionFn:function(ze){const Me=ze.workspace;return Me&&!Me.isFlyout&&Me.getComponentManager().getComponent("backpack")?"enabled":"hidden"},callback:function(ze){const Me=ze.workspace;Me&&Me.getComponentManager().getComponent("backpack").getContents().forEach(Ae=>{he.serialization.blocks.append(JSON.parse(Ae),Me).scheduleSnapAndBump()})},scopeType:he.ContextMenuRegistry.ScopeType.WORKSPACE,id:"paste_all_from_backpack",weight:200};he.ContextMenuRegistry.registry.register(xe)}()),this.initialized_=!0,this.workspace_.resize()}dispose(){this.svgGroup_&&he.utils.dom.removeNode(this.svgGroup_);for(const ke of this.boundEvents)he.browserEvents.unbind(ke);this.boundEvents.length=0}initFlyout(){var ke;const Re=new he.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides||void 0,move:{scrollbars:!0}});if(this.workspace_.horizontalLayout){Re.toolboxPosition=this.workspace_.toolboxPosition===he.utils.toolbox.Position.TOP?he.utils.toolbox.Position.BOTTOM:he.utils.toolbox.Position.TOP;const xe=he.registry.getClassFromOptions(he.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0);if(!xe)throw new Error("HorizontalFlyout does not exist");this.flyout_=new xe(Re)}else{Re.toolboxPosition=this.workspace_.toolboxPosition===he.utils.toolbox.Position.RIGHT?he.utils.toolbox.Position.LEFT:he.utils.toolbox.Position.RIGHT;const xe=he.registry.getClassFromOptions(he.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0);if(!xe)throw new Error("VerticalFlyout does not exist");this.flyout_=new xe(Re)}const Ne=this.workspace_.getParentSvg().parentNode;Ne==null||Ne.appendChild((ke=this.flyout_)===null||ke===void 0?void 0:ke.createDom(he.utils.Svg.SVG)),this.flyout_.init(this.workspace_)}createDom(){this.svgGroup_=he.utils.dom.createSvgElement(he.utils.Svg.G,{},null);const ke=he.utils.idGenerator.genUid(),Re=he.utils.dom.createSvgElement(he.utils.Svg.CLIPPATH,{id:"blocklyBackpackClipPath"+ke},this.svgGroup_);he.utils.dom.createSvgElement(he.utils.Svg.RECT,{width:this.WIDTH_,height:this.HEIGHT_},Re),this.svgImg_=he.utils.dom.createSvgElement(he.utils.Svg.IMAGE,{class:"blocklyBackpack","clip-path":"url(#blocklyBackpackClipPath"+ke+")",width:this.spriteSize+"px",x:-this.spriteLeft,height:this.spriteSize+"px",y:-this.spriteTop},this.svgGroup_),this.svgImg_.setAttributeNS(he.utils.dom.XLINK_NS,"xlink:href",Te),he.utils.dom.insertAfter(this.svgGroup_,this.workspace_.getBubbleCanvas())}attachListeners(){this.svgGroup_&&(this.addEvent(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable),this.addEvent(this.svgGroup_,"mouseup",this,this.onClick),this.addEvent(this.svgGroup_,"mouseover",this,this.onMouseOver),this.addEvent(this.svgGroup_,"mouseout",this,this.onMouseOut))}addEvent(ke,Re,Ne,xe){const ze=he.browserEvents.bind(ke,Re,Ne,xe);this.boundEvents.push(ze)}getFlyout(){return this.flyout_}getClientRect(){if(!this.svgGroup_)return null;const ke=this.svgGroup_.getBoundingClientRect(),Re=ke.top+this.spriteTop-this.HOTSPOT_MARGIN_,Ne=Re+this.HEIGHT_+2*this.HOTSPOT_MARGIN_,xe=ke.left+this.spriteLeft-this.HOTSPOT_MARGIN_,ze=xe+this.WIDTH_+2*this.HOTSPOT_MARGIN_;return new he.utils.Rect(Re,Ne,xe,ze)}getBoundingRectangle(){return new he.utils.Rect(this.top_,this.top_+this.HEIGHT_,this.left_,this.left_+this.WIDTH_)}position(ke,Re){if(!this.initialized_)return;const Ne=this.workspace_.scrollbar,xe=Ne&&Ne.isVisible()&&Ne.canScrollVertically(),ze=Ne&&Ne.isVisible()&&Ne.canScrollHorizontally();ke.toolboxMetrics.position===he.TOOLBOX_AT_LEFT||this.workspace_.horizontalLayout&&!this.workspace_.RTL?(this.left_=ke.absoluteMetrics.left+ke.viewMetrics.width-this.WIDTH_-this.MARGIN_HORIZONTAL_,xe&&!this.workspace_.RTL&&(this.left_-=he.Scrollbar.scrollbarThickness)):(this.left_=this.MARGIN_HORIZONTAL_,xe&&this.workspace_.RTL&&(this.left_+=he.Scrollbar.scrollbarThickness));const Me=ke.toolboxMetrics.position===he.TOOLBOX_AT_BOTTOM;Me?(this.top_=ke.absoluteMetrics.top+ke.viewMetrics.height-this.HEIGHT_-this.MARGIN_VERTICAL_,ze&&(this.top_-=he.Scrollbar.scrollbarThickness)):this.top_=ke.absoluteMetrics.top+this.MARGIN_VERTICAL_;let Ae=this.getBoundingRectangle();for(let Qe,ht=0;Qe=Re[ht];ht++)Ae.intersects(Qe)&&(this.top_=Me?Qe.top-this.HEIGHT_-this.MARGIN_VERTICAL_:Qe.bottom+this.MARGIN_VERTICAL_,Ae=this.getBoundingRectangle(),ht=-1);this.svgGroup_&&this.svgGroup_.setAttribute("transform",`translate(${this.left_},${this.top_})`)}getCount(){return this.contents_.length}getContents(){return[...this.contents_]}onDrop(ke){ge(ke)&&this.addBackpackable(ke)}blockToJsonString(ke){const Re=he.serialization.blocks.save(ke);Re.kind="BLOCK";const Ne=function(xe,ze){for(const Me in xe)Me&&(ze.indexOf(Me)!==-1&&delete xe[Me],xe[Me]&&typeof xe[Me]=="object"&&Ne(xe[Me],ze))};return Re&&Ne(Re,["id","height","width","pinned","enabled"]),JSON.stringify(Re)}blockXmlToJsonString(ke){if(!ke.startsWith("<block"))throw new Error("Unrecognized XML format");const Re=new he.Workspace;try{const Ne=he.Xml.domToBlock(he.utils.xml.textToDom(ke),Re);return this.blockToJsonString(Ne)}finally{Re.dispose()}}containsBlock(ke){return ge(ke)?this.containsBackpackable(ke):this.contents_.indexOf(this.blockToJsonString(ke))!==-1}addBlock(ke){ge(ke)?this.addBackpackable(ke):this.addItem(this.blockToJsonString(ke))}addBlocks(ke){for(const Re of ke)ge(Re)?this.addBackpackable(Re):this.addItem(this.blockToJsonString(Re))}removeBlock(ke){ge(ke)?this.removeBackpackable(ke):this.removeItem(this.blockToJsonString(ke))}containsBackpackable(ke){return ke.toFlyoutInfo().every(Re=>this.contents_.indexOf(JSON.stringify(Re))!==-1)}addBackpackable(ke){this.addBackpackables([ke])}addBackpackables(ke){this.addItems(ke.map(Re=>Re.toFlyoutInfo()).reduce((Re,Ne)=>[...Re,...Ne]).map(Re=>JSON.stringify(Re)))}removeBackpackable(ke){for(const Re of ke.toFlyoutInfo())this.removeItem(JSON.stringify(Re))}addItem(ke){this.addItems([ke])}addItems(ke){const Re=this.filterDuplicates(ke);Re.length&&(this.contents_.unshift(...Re),this.onContentChange())}removeItem(ke){const Re=this.contents_.indexOf(ke);Re!==-1&&(this.contents_.splice(Re,1),this.onContentChange())}setContents(ke){this.contents_=[],this.contents_=this.filterDuplicates(ke.map(Re=>Re.startsWith("<block")?this.blockXmlToJsonString(Re):Re)),this.onContentChange()}empty(){this.getCount()&&(this.contents_.length&&(this.contents_=[],this.onContentChange()),this.close())}onContentChange(){this.maybeRefreshFlyoutContents(),he.Events.fire(new fe(this.workspace_.id)),this.options.useFilledBackpackImage&&this.svgImg_&&(this.contents_.length>0?this.svgImg_.setAttributeNS(he.utils.dom.XLINK_NS,"xlink:href",Ee):this.svgImg_.setAttributeNS(he.utils.dom.XLINK_NS,"xlink:href",Te))}filterDuplicates(ke){return ke.filter((Re,Ne)=>ke.indexOf(Re)===Ne&&this.contents_.indexOf(Re)===-1)}isOpenable(){return!(this.isOpen()||!this.options.allowEmptyBackpackOpen)||this.getCount()>0}isOpen(){return!!this.flyout_&&this.flyout_.isVisible()}open(){var ke;if(!this.isOpenable())return;const Re=this.contents_.map(Ne=>JSON.parse(Ne));(ke=this.flyout_)===null||ke===void 0||ke.show(Re),this.workspace_.scrollbar&&this.workspace_.scrollbar.setVisible&&this.workspace_.scrollbar.setVisible(!1),he.Events.fire(new ue(!0,this.workspace_.id))}maybeRefreshFlyoutContents(){var ke;if(!this.isOpen())return;const Re=this.contents_.map(Ne=>JSON.parse(Ne));(ke=this.flyout_)===null||ke===void 0||ke.show(Re)}close(){var ke;this.isOpen()&&((ke=this.flyout_)===null||ke===void 0||ke.hide(),this.workspace_.scrollbar&&this.workspace_.scrollbar.setVisible&&this.workspace_.scrollbar.setVisible(!0),he.Events.fire(new ue(!1,this.workspace_.id)))}autoHide(ke){ke||this.close()}onClick(ke){if(ke instanceof MouseEvent&&he.browserEvents.isRightButton(ke))return;this.open();const Re=new(he.Events.get(he.Events.CLICK))(null,this.workspace_.id,"backpack");he.Events.fire(Re)}onDragEnter(ke){ge(ke)&&this.updateHoverStying(!0)}onDragExit(ke){this.updateHoverStying(!1)}onMouseOver(){this.isOpenable()&&this.updateHoverStying(!0)}onMouseOut(){this.updateHoverStying(!1)}updateHoverStying(ke){const Re="blocklyBackpackDarken";this.svgImg_&&(ke?he.utils.dom.addClass(this.svgImg_,Re):he.utils.dom.removeClass(this.svgImg_,Re))}shouldPreventMove(ke){return ke instanceof he.BlockSvg}blockMouseDownWhenOpenable(ke){ke instanceof MouseEvent&&!he.browserEvents.isRightButton(ke)&&this.isOpenable()&&ke.stopPropagation()}}const Te="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0cHgiIGZpbGw9IiM0NTVBNjQiPjxnPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMjQiIHdpZHRoPSIyNCIvPjwvZz48Zz48Zy8+PGc+PHBhdGggZD0iTTEzLjk3LDUuMzRDMTMuOTgsNS4yMywxNCw1LjEyLDE0LDVjMC0xLjEtMC45LTItMi0ycy0yLDAuOS0yLDJjMCwwLjEyLDAuMDIsMC4yMywwLjAzLDAuMzRDNy42OSw2LjE1LDYsOC4zOCw2LDExdjggYzAsMS4xLDAuOSwyLDIsMmg4YzEuMSwwLDItMC45LDItMnYtOEMxOCw4LjM4LDE2LjMxLDYuMTUsMTMuOTcsNS4zNHogTTExLDVjMC0wLjU1LDAuNDUtMSwxLTFzMSwwLjQ1LDEsMSBjMCwwLjAzLTAuMDEsMC4wNi0wLjAyLDAuMDlDMTIuNjYsNS4wMywxMi4zNCw1LDEyLDVzLTAuNjYsMC4wMy0wLjk4LDAuMDlDMTEuMDEsNS4wNiwxMSw1LjAzLDExLDV6IE0xNiwxM3YxdjAuNSBjMCwwLjI4LTAuMjIsMC41LTAuNSwwLjVTMTUsMTQuNzgsMTUsMTQuNVYxNHYtMUg4di0xaDdoMVYxM3oiLz48L2c+PC9nPjwvc3ZnPg==",Ee="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iMjQiCiAgIGhlaWdodD0iMjQiCiAgIHZpZXdCb3g9IjAgMCAyNCAyNCIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0ic3ZnNSIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzMiIgLz4KICA8ZwogICAgIGlkPSJsYXllcjEiPgogICAgPGcKICAgICAgIHN0eWxlPSJmaWxsOiM0NTVhNjQiCiAgICAgICBpZD0iZzg0OCIKICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KDAuMjY0NTgzMzMsMCwwLDAuMjY0NTgzMzMsOC44MjQ5OTk3LDguODI0OTk5NykiPgogICAgICA8ZwogICAgICAgICBpZD0iZzgyNiI+CiAgICAgICAgPHJlY3QKICAgICAgICAgICBmaWxsPSJub25lIgogICAgICAgICAgIGhlaWdodD0iMjQiCiAgICAgICAgICAgd2lkdGg9IjI0IgogICAgICAgICAgIGlkPSJyZWN0ODI0IgogICAgICAgICAgIHg9IjAiCiAgICAgICAgICAgeT0iMCIgLz4KICAgICAgPC9nPgogICAgICA8ZwogICAgICAgICBpZD0iZzgzNCI+CiAgICAgICAgPGcKICAgICAgICAgICBpZD0iZzgyOCIgLz4KICAgICAgICA8ZwogICAgICAgICAgIGlkPSJnMjIyMyI+CiAgICAgICAgICA8ZwogICAgICAgICAgICAgaWQ9ImcyMTAxNiI+CiAgICAgICAgICAgIDxnCiAgICAgICAgICAgICAgIHN0eWxlPSJmaWxsOiM0NTVhNjQiCiAgICAgICAgICAgICAgIGlkPSJnMTQ5MyIKICAgICAgICAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMy43Nzk1Mjc2LDAsMCwzLjc3OTUyNzYsLTMzLjM1NDMzLC0zMy4zNTQzMykiPgogICAgICAgICAgICAgIDxnCiAgICAgICAgICAgICAgICAgaWQ9ImcxNDcxIj4KICAgICAgICAgICAgICAgIDxwYXRoCiAgICAgICAgICAgICAgICAgICBpZD0icmVjdDE0NjkiCiAgICAgICAgICAgICAgICAgICBzdHlsZT0iZmlsbDpub25lIgogICAgICAgICAgICAgICAgICAgZD0iTSAwLDAgSCAyNCBWIDI0IEggMCBaIiAvPgogICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICA8ZwogICAgICAgICAgICAgICAgIGlkPSJnMTQ3OSI+CiAgICAgICAgICAgICAgICA8ZwogICAgICAgICAgICAgICAgICAgaWQ9ImcxNDczIiAvPgogICAgICAgICAgICAgICAgPGcKICAgICAgICAgICAgICAgICAgIGlkPSJnMTQ3NyI+CiAgICAgICAgICAgICAgICAgIDxwYXRoCiAgICAgICAgICAgICAgICAgICAgIGlkPSJwYXRoMTQ3NSIKICAgICAgICAgICAgICAgICAgICAgZD0ibSAxMiwzIGMgLTEuMSwwIC0yLDAuOSAtMiwyIDAsMC4xMiAwLjAxOTMsMC4yMjk4NDM4IDAuMDI5MywwLjMzOTg0MzggQyA3LjY4OTI5NjUsNi4xNDk4NDMzIDYsOC4zOCA2LDExIHYgOCBjIDAsMS4xIDAuOSwyIDIsMiBoIDggYyAxLjEsMCAyLC0wLjkgMiwtMiBWIDExIEMgMTgsOC4zOCAxNi4zMTA3MDMsNi4xNDk4NDMzIDEzLjk3MDcwMyw1LjMzOTg0MzggMTMuOTgwNzAzLDUuMjI5ODQzOCAxNCw1LjEyIDE0LDUgMTQsMy45IDEzLjEsMyAxMiwzIFogbSAwLDEgYyAwLjU1LDAgMSwwLjQ1IDEsMSAwLDAuMDMgLTAuMDA5NSwwLjA1OTg0NCAtMC4wMTk1MywwLjA4OTg0NCBDIDEyLjY2MDQ2OSw1LjAyOTg0MzggMTIuMzQsNSAxMiw1IDExLjY2LDUgMTEuMzM5NTMxLDUuMDI5ODQzOCAxMS4wMTk1MzEsNS4wODk4NDM4IDExLjAwOTUzMSw1LjA1OTg0MzggMTEsNS4wMyAxMSw1IDExLDQuNDUgMTEuNDUsNCAxMiw0IFogbSAtMy40NzI2NTYyLDYuMzk4NDM4IGggMS4xNTYyNSB2IDIuNjQwNjI0IGggMC4zMDkzMzU0IGwgLTIuMzdlLTUsLTEuMTcxMTQ2IDEuMDgyNzEwNSwtMTBlLTcgMC4wMTEsMS4xNzExNDYgaCAwLjMzMzMwNCBsIC0wLjAzNTA0LC0yLjU4NzMxNSBoIDAuNTc4MTI1IDAuNTc4MTI1IGwgMC4wMTEwNSwyLjU4NzMxNSBoIDAuMzU2MDI0IFYgMTIuMDYwNTQ3IEggMTQuMDYyNSB2IDAuOTc4NTE1IGggMC4zMzAwNzggdiAtMi41NTI3MzQgaCAxLjE1NjI1IHYgMi41NTI3MzQgaCAwLjk2Njc5NyB2IDAuMzU3NDIyIEggOS42ODM1OTM4IDguNTI3MzQzOCA3LjYwMzUxNTYgdiAtMC4zNTc0MjIgaCAwLjkyMzgyODIgeiIKICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICAgIDwvZz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo=";he.Css.register(`
.blocklyBackpack {
  opacity: 0.4;
}
.blocklyBackpackDarken {
  opacity: 0.6;
}
.blocklyBackpack:active {
  opacity: 0.8;
}
`);class Se{constructor(){this.priority=he.serialization.priorities.BLOCKS-10}save(ke){const Re=ke.getComponentManager().getComponent("backpack");return Re==null?void 0:Re.getContents().map(Ne=>JSON.parse(Ne))}load(ke,Re){const Ne=ke.map(ze=>JSON.stringify(ze)),xe=Re.getComponentManager().getComponent("backpack");xe==null||xe.setContents(Ne)}clear(ke){const Re=ke.getComponentManager().getComponent("backpack");Re==null||Re.empty()}}return ae})())})(dist$1);var distExports=dist$1.exports;class R2{constructor(te,ne,re=!0){ei(this,"_secure",!1);ei(this,"_graphql_http_url","https://localhost:4005/reality2");ei(this,"_graphql_webs_url","wss://localhost:4005/reality2/websocket");ei(this,"_sockets",{});this._secure=re,re?(this._graphql_http_url="https://"+te+":"+ne+"/reality2",this._graphql_webs_url="wss://"+te+":"+ne+"/reality2/websocket"):(this._graphql_http_url="http://"+te+":"+ne+"/reality2",this._graphql_webs_url="ws://"+te+":"+ne+"/reality2/websocket")}sentantAll(te={},ne="id name"){return new Promise((re,oe)=>{this._graphql_post(this._sentantAll(ne),{}).then(le=>{re({...te,...le})},le=>{oe(le)})})}sentantGet(te,ne={},re="id name"){return new Promise((oe,le)=>{this._graphql_post(this._sentantGet(re),{id:te}).then(ae=>{oe({...ne,...ae})},ae=>{le(ae)})})}sentantGetByName(te,ne={},re="id name"){return new Promise((oe,le)=>{this._graphql_post(this._sentantGetByName(re),{name:te}).then(ae=>{oe({...ne,...ae})},ae=>{le(ae)})})}sentantLoad(te,ne={},re="id name"){return new Promise((oe,le)=>{this._graphql_post(this._sentantLoad(re),{definition:te}).then(ae=>{oe({...ne,...ae})},ae=>{le(ae)})})}sentantUnload(te,ne={},re="id name"){return new Promise((oe,le)=>{this._graphql_post(this._sentantUnload(re),{id:te}).then(ae=>{oe({...ne,...ae})},ae=>{le(ae)})})}swarmLoad(te,ne={},re="id name"){return new Promise((oe,le)=>{this._graphql_post(this._swarmLoad(re),{definition:te}).then(ae=>{oe({...ne,...ae})},ae=>{le(ae)})})}sentantSend(te,ne,re,oe={},le="id name"){return this._graphql_post(this._sentandSend(le),{id:te,event:ne,parameters:JSON.stringify(re),passthrough:JSON.stringify(oe)})}awaitSignal(te,ne,re=()=>{}){this._subscribe(te,ne,re)}monitor(te=()=>{}){this._set_up_node_monitoring(te)}static JSONPath(te,ne){let re=ne.split("."),oe=te;for(let le=0;le<re.length;le++){let ae=parseInt(re[le]);if(isNaN(ae))if(oe.hasOwnProperty(re[le]))oe=oe[re[le]];else return null;else if(Array.isArray(oe))oe=oe[ae];else return null}return oe}static ToSimple(te){return this.convert(te,!0)}static ToJSON(te){return this.convert(te,!1)}static convert(te,ne=!0){if(te==null)return null;if(typeof te=="number"||typeof te=="boolean")return te;if(typeof te=="string"){if(te=te.replace(/^['"]+|['"]+$/g,""),te.toLowerCase()==="true")return!0;if(te.toLowerCase()==="false")return!1;const re=Number(te);if(!isNaN(re))return re;try{const oe=JSON.parse(te);if(typeof oe=="object"&&oe!==null)return ne?JSON.stringify(oe):oe}catch{}return te}return Array.isArray(te)||typeof te=="object"&&te!==null?ne?JSON.stringify(te):te:String(te)}_set_up_node_monitoring(te=()=>{}){let ne={sentant:{name:"monitor",automations:[{name:"Monitor",transitions:[{event:"__internal",actions:[{command:"signal",parameters:{public:!0,event:"internal"}}]}]}]}};this.sentantGetByName("monitor").then(re=>{re.data.sentantGet==null?this.sentantLoad(JSON.stringify(ne)).then(oe=>{this.awaitSignal(oe.data.sentantLoad.id,"internal",le=>{te(le)}),console.log("Monitor Sentant Loaded")}):(this.awaitSignal(re.data.sentantGet.id,"internal",oe=>{te(oe)}),console.log("Monitor Sentant Loaded"))})}_graphql_post(te,ne){let re={query:te,variables:JSON.stringify(ne)},oe={method:"POST",headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(re)};return fetch(this._graphql_http_url,oe).then(le=>le.json()).then(le=>le)}_subscribe(te,ne,re){let oe={topic:"__absinthe__:control",event:"phx_join",payload:{},ref:0},le={topic:"__absinthe__:control",event:"doc",payload:{query:this._awaitSignal("event parameters"),variables:{id:te,signal:ne}},ref:0},ae={topic:"phoenix",event:"heartbeat",payload:{},ref:0};this._sockets[te+"|"+ne]={ws:new WebSocket(this._graphql_webs_url),connected:!1,timer:null},this._sockets[te+"|"+ne].ws.onopen=()=>{setTimeout(()=>{this._sockets[te+"|"+ne].ws.send(JSON.stringify(oe))},100)},this._sockets[te+"|"+ne].ws.onmessage=he=>{let de=JSON.parse(he.data),ue=de.payload;if(this._sockets[te+"|"+ne].connected){if(ue.result){let pe=ue.result;if(pe.hasOwnProperty("data")){let fe=pe.data.awaitSignal;re(fe)}}}else de.event=="phx_reply"&&de.payload.status=="ok"&&(console.log("Websocket connected"),this._sockets[te+"|"+ne].ws.send(JSON.stringify(le)),this._sockets[te+"|"+ne].connected=!0,this._sockets[te+"|"+ne].timer=setInterval(()=>{console.log("heartbeat"),this._sockets[te+"|"+ne].ws.send(JSON.stringify(ae))},3e4),re({status:"connected"}))}}_sentantAll(te){return`{
            sentantAll {
                ${te}
            }
        }`}_sentantGet(te){return`query SentantGet($id: UUID4!) {
            sentantGet(id: $id) {
                ${te}
            }
        }`}_sentantGetByName(te){return`query SentantGet($name: String!) {
            sentantGet(name: $name) {
                ${te}
            }
        }`}_sentantLoad(te){return`mutation SentantLoad($definition: String!) {
            sentantLoad(definition: $definition) {
                ${te}
            }
        }`}_sentantUnload(te){return`mutation SentantUnload($id: UUID4!) {
            sentantUnload(id: $id) {
                ${te}
            }
        }`}_swarmLoad(te){return`mutation SwarmLoad($definition: String!) {
            swarmLoad(definition: $definition) {
                description
                name
                sentants {
                    ${te}
                }
            }
        }`}_sentandSend(te){return`mutation SentantSend($id: UUID4!, $event: String!, $parameters: Json, $passthrough: Json) {
            sentantSend(id: $id, event: $event, parameters: $parameters, passthrough: $passthrough) {
                ${te}
            }
        }`}_awaitSignal(te="id name"){return`subscription AwaitSignal($id: UUID4!, $signal: String!) {
            awaitSignal(id: $id, signal: $signal) {
                ${te}
            }
        }`}}const shape$T={type:"reality2_action_set_data",message0:"data %1",args0:[{type:"field_input",name:"value",check:"String",text:""}],colour:300,output:"Json",tooltip:"Set the variable as a copy of the Bee's data.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$T(ie,te){const ne=ie.getFieldValue("value"),oe={data:ne===""?null:R2.ToJSON(ne)};return[JSON.stringify(oe),99]}function construct$U(ie){return ie?{kind:"BLOCK",type:"reality2_action_set_data",fields:{value:R2.ToSimple(R2.JSONPath(ie,"data"))}}:null}const reality2_action_set_data={shape:shape$T,process:process$T,construct:construct$U},shape$S={type:"reality2_action_set_jsonpath",message0:"jsonpath %1",args0:[{type:"field_input",name:"value",check:"String",text:""}],colour:300,output:"Json",tooltip:"A JSON Path, which is a string used to pick data out of a JSON stucture.  For example 'information.[].name' returns and array of names from the information array, whilst 'information.0.name' returns the name of the first element of the information array.  If the JSON key doesn't exist, null is returned.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$S(ie,te){const ne=ie.getFieldValue("value"),oe={jsonpath:ne===""?null:R2.ToJSON(ne)};return[JSON.stringify(oe),99]}function construct$T(ie){return ie?{kind:"BLOCK",type:"reality2_action_set_jsonpath",fields:{value:R2.ToSimple(R2.JSONPath(ie,"jsonpath"))}}:null}const reality2_action_set_jsonpath={shape:shape$S,process:process$S,construct:construct$T},shape$R={type:"reality2_action_set_value",message0:"%1",args0:[{type:"field_input",name:"value",check:"String",text:""}],colour:300,output:"Json",tooltip:"A value, which can be a number, a string or JSON.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$R(ie,te){const ne=ie.getFieldValue("value"),oe=ne===""?null:R2.ToJSON(ne);return[JSON.stringify(oe),99]}function construct$S(ie){return ie!=null?{kind:"BLOCK",type:"reality2_action_set_value",fields:{value:R2.ToSimple(ie)}}:null}const reality2_action_set_value={shape:shape$R,process:process$R,construct:construct$S},shape$Q={type:"reality2_action_set_calc_binary",message0:"( %1 %2 %3 )",args0:[{type:"input_value",name:"value1"},{type:"field_dropdown",name:"operator",options:[["+","+"],["-","-"],["*","*"],["/","/"],["&&","&&"],["||","||"],["==","=="],["!=","!="],["<","<"],[">",">"],["<=","<="],[">=",">="],["pow","pow"],["fmod","fmod"],["atan2","atan2"],["geohash","geohash"]]},{type:"input_value",name:"value2"}],colour:300,output:"Json",tooltip:"An binary expression",helpUrl:"https://github.com/reality-two/reality2-documentation",inputsInline:!0};function process$Q(ie,te){const ne=te.valueToCode(ie,"value1",99),re=te.valueToCode(ie,"value2",99),oe=ie.getFieldValue("operator"),le=ne===""?null:R2.ToJSON(ne),ae=re===""?null:R2.ToJSON(re),he=R2.JSONPath(le,"expr")?R2.JSONPath(le,"expr"):le,de=R2.JSONPath(ae,"expr")?R2.JSONPath(ae,"expr"):ae;let ue={};return ue[oe]=[he,de],[JSON.stringify({expr:ue}),99]}function construct$R(ie){if(ie){const te=Object.keys(ie)[0],ne=ie[te];if(ne.length==1){let re={kind:"BLOCK",type:"reality2_action_set_calc_unary",fields:{operator:te},inputs:{value1:{}}};return typeof ne[0]=="object"?re.inputs.value1={block:construct$R(ne[0])}:re.inputs.value1={block:reality2_action_set_value.construct(ne[0])},re}else if(ne.length==2){let re={kind:"BLOCK",type:"reality2_action_set_calc_binary",fields:{operator:te},inputs:{value1:{},value2:{}}};return typeof ne[0]=="object"?re.inputs.value1={block:construct$R(ne[0])}:re.inputs.value1={block:reality2_action_set_value.construct(ne[0])},typeof ne[1]=="object"?re.inputs.value2={block:construct$R(ne[1])}:re.inputs.value2={block:reality2_action_set_value.construct(ne[1])},re}else return null}else return null}const reality2_action_set_calc_binary={shape:shape$Q,process:process$Q,construct:construct$R},shape$P={type:"reality2_action_set",message0:"set %1 to %2",args0:[{type:"field_input",name:"key",check:"String",text:""},{type:"input_value",name:"value",check:"Json",text:""}],previousStatement:null,nextStatement:null,colour:300,tooltip:"Set a variable in the data flow.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$P(ie,te){const ne=ie.getFieldValue("key"),re=te.valueToCode(ie,"value",99),oe=re===""?null:R2.ToJSON(re);return JSON.stringify({command:"set",parameters:{key:ne,value:oe}})}function construct$Q(ie){if(ie){let te={kind:"BLOCK",type:"reality2_action_set",fields:{key:R2.JSONPath(ie,"parameters.key")},inputs:{value:{}}};return R2.JSONPath(ie,"parameters.value.data")?te.inputs.value={block:reality2_action_set_data.construct(R2.JSONPath(ie,"parameters.value"))}:R2.JSONPath(ie,"parameters.value.jsonpath")?te.inputs.value={block:reality2_action_set_jsonpath.construct(R2.JSONPath(ie,"parameters.value"))}:R2.JSONPath(ie,"parameters.value.expr")?te.inputs.value={block:reality2_action_set_calc_binary.construct(R2.JSONPath(ie,"parameters.value.expr"))}:te.inputs.value={block:reality2_action_set_value.construct(R2.JSONPath(ie,"parameters.value"))},te}else return null}const reality2_action_set={shape:shape$P,process:process$P,construct:construct$Q},shape$O={type:"reality2_action_set_clear",message0:"clear %1",args0:[{type:"field_input",name:"key",check:"String",text:""}],previousStatement:null,nextStatement:null,colour:300,tooltip:"Remove a variable from the data flow.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$O(ie,te){const re={command:"set",parameters:{key:ie.getFieldValue("key")}};return JSON.stringify(re)}function construct$P(ie){return ie?{kind:"BLOCK",type:"reality2_action_set_clear",fields:{key:R2.JSONPath(ie,"parameters.key")}}:null}const reality2_action_set_clear={shape:shape$O,process:process$O,construct:construct$P},shape$N={type:"reality2_action_debug",message0:"debug",previousStatement:null,nextStatement:null,colour:300,tooltip:"A Debug Task that shows the current data flow.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$N(ie,te){return JSON.stringify({command:"debug"})}function construct$O(ie){return ie?{kind:"BLOCK",type:"reality2_action_debug"}:null}const reality2_action_debug={shape:shape$N,process:process$N,construct:construct$O},shape$M={type:"reality2_action_parameter",message0:"param %1 = %2",args0:[{type:"field_input",name:"key",check:"String",text:""},{type:"field_input",name:"value",check:"String",text:""}],previousStatement:null,nextStatement:null,colour:300,tooltip:"Additional information to add to the data flow.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$M(ie,te){const ne=ie.getFieldValue("key"),re=R2.ToJSON(ie.getFieldValue("value"));var oe={};return oe[ne]=re,JSON.stringify(oe)}function construct$N(ie){if(ie){let te=Object.keys(ie);if(te.length>0){let ne={kind:"BLOCK",type:"reality2_action_parameter",fields:{key:te[0],value:R2.ToSimple(R2.JSONPath(ie,te[0]))}};delete ie[te[0]];let re=construct$N(ie);return re&&(ne.next={block:re}),ne}else return null}else return null}const reality2_action_parameter={shape:shape$M,process:process$M,construct:construct$N},shape$L={type:"reality2_action_send",message0:"send %1 to %2 after %3 milliseconds",args0:[{type:"field_input",name:"event",check:"String",text:""},{type:"field_input",name:"to",check:"String",text:""},{type:"field_input",name:"delay",check:"Number",text:""}],message1:"with %1",args1:[{type:"input_statement",name:"parameters",check:"reality2_action_parameter"}],previousStatement:null,nextStatement:null,colour:300,tooltip:"Send an event after a delay with some additional information to add to the data flow.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$L(ie,te){var ne={};const re=ie.getFieldValue("event"),oe=ie.getFieldValue("to"),le=R2.ToSimple(ie.getFieldValue("delay")),ae=te.statementToCode(ie,"parameters");ae!==""&&(ne=splitConcatenatedJSON(ae));const he={command:"send",parameters:{event:re}};return oe!==""&&oe!=="me"&&(he.parameters.to=oe),Object.keys(ne).length!==0&&(he.parameters.parameters=ne),le&&le>0&&(he.parameters.delay=le),JSON.stringify(he)}function construct$M(ie){if(ie){let te=R2.ToSimple(R2.JSONPath(ie,"parameters.delay")),ne=R2.JSONPath(ie,"parameters.to"),re={kind:"BLOCK",type:"reality2_action_send",fields:{event:R2.JSONPath(ie,"parameters.event"),to:ne===""?"me":ne,delay:te!==null&&te>0?te:""},inputs:{parameters:{}}},oe=reality2_action_parameter.construct(R2.JSONPath(ie,"parameters.parameters"));return oe&&(re.inputs.parameters={block:oe}),re}else return null}const reality2_action_send={shape:shape$L,process:process$L,construct:construct$M},shape$K={type:"reality2_action_send_no_params",message0:"send %1 to %2 after %3 milliseconds",args0:[{type:"field_input",name:"event",check:"String",text:""},{type:"field_input",name:"to",check:"String",text:""},{type:"field_input",name:"delay",check:"Number",text:""}],previousStatement:null,nextStatement:null,colour:330,tooltip:"Send an event after a delay.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$K(ie,te){const ne=ie.getFieldValue("event"),re=ie.getFieldValue("to"),oe=R2.ToSimple(ie.getFieldValue("delay")),le={command:"send",parameters:{event:ne}};return re&&(le.parameters.to=re),oe&&oe>0&&(le.parameters.delay=oe),JSON.stringify(le)}function construct$L(ie){if(ie){let te=R2.ToSimple(R2.JSONPath(ie,"parameters.delay")),ne=R2.JSONPath(ie,"parameters.to");return{kind:"BLOCK",type:"reality2_action_send_no_params",fields:{event:R2.JSONPath(ie,"parameters.event"),to:ne,delay:te&&te>0?te:""}}}else return null}const reality2_action_send_no_params={shape:shape$K,process:process$K,construct:construct$L},shape$J={type:"reality2_action_send_now",message0:"send %1 to %2",args0:[{type:"field_input",name:"event",check:"String",text:""},{type:"field_input",name:"to",check:"String",text:""}],message1:"with %1",args1:[{type:"input_statement",name:"parameters",check:"reality2_action_parameter"}],previousStatement:null,nextStatement:null,colour:300,tooltip:"Send an event with some additional information to add to the data flow.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$J(ie,te){var ne={};const re=ie.getFieldValue("event"),oe=ie.getFieldValue("to"),le=te.statementToCode(ie,"parameters");le!==""&&(ne=splitConcatenatedJSON(le));const ae={command:"send",parameters:{event:re}};return oe&&(ae.parameters.to=oe),Object.keys(ne).length!==0&&(ae.parameters.parameters=ne),JSON.stringify(ae)}function construct$K(ie){if(ie){R2.ToSimple(R2.JSONPath(ie,"parameters.delay"));let te=R2.JSONPath(ie,"parameters.to"),ne={kind:"BLOCK",type:"reality2_action_send_now",fields:{event:R2.JSONPath(ie,"parameters.event"),to:te},inputs:{parameters:{}}},re=reality2_action_parameter.construct(R2.JSONPath(ie,"parameters.parameters"));return re&&(ne.inputs.parameters={block:re}),ne}else return null}const reality2_action_send_now={shape:shape$J,process:process$J,construct:construct$K},shape$I={type:"reality2_action_send_now_no_params",message0:"send %1 to %2",args0:[{type:"field_input",name:"event",check:"String",text:""},{type:"field_input",name:"to",check:"String",text:""}],previousStatement:null,nextStatement:null,colour:330,tooltip:"Send an event.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$I(ie,te){const ne=ie.getFieldValue("event"),re=ie.getFieldValue("to"),oe={command:"send",parameters:{event:ne}};return re&&(oe.parameters.to=re),JSON.stringify(oe)}function construct$J(ie){if(ie){R2.ToSimple(R2.JSONPath(ie,"parameters.delay"));let te=R2.JSONPath(ie,"parameters.to");return{kind:"BLOCK",type:"reality2_action_send_now_no_params",fields:{event:R2.JSONPath(ie,"parameters.event"),to:te}}}else return null}const reality2_action_send_now_no_params={shape:shape$I,process:process$I,construct:construct$J},shape$H={type:"reality2_action_send_plugin",message0:"send %1 to antenna %2",args0:[{type:"field_input",name:"command",check:"String",text:""},{type:"field_input",name:"plugin",check:"String",text:""}],message1:"with %1",args1:[{type:"input_statement",name:"parameters",check:"reality2_action_parameter"}],previousStatement:null,nextStatement:null,colour:300,tooltip:"Send an event to an antenna with some additional information to add to the data flow.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$H(ie,te){var ne={};const re=ie.getFieldValue("plugin"),oe=ie.getFieldValue("command"),le=te.statementToCode(ie,"parameters");le!==""&&(ne=splitConcatenatedJSON(le));const ae={command:oe,plugin:re};return Object.keys(ne).length!==0&&(ae.parameters=ne),JSON.stringify(ae)}function construct$I(ie){if(ie){let te={kind:"BLOCK",type:"reality2_action_send_plugin",fields:{plugin:R2.JSONPath(ie,"plugin"),command:R2.JSONPath(ie,"command")},inputs:{parameters:{}}},ne=reality2_action_parameter.construct(R2.JSONPath(ie,"parameters.parameters"));return ne&&(te.inputs.parameters={block:ne}),te}else return null}const reality2_action_send_plugin={shape:shape$H,process:process$H,construct:construct$I},shape$G={type:"reality2_action_send_plugin_no_params",message0:"send %1 to antenna %2",args0:[{type:"field_input",name:"command",check:"String",text:""},{type:"field_input",name:"plugin",check:"String",text:""}],previousStatement:null,nextStatement:null,colour:330,tooltip:"Send an event to an antenna.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$G(ie,te){const ne=ie.getFieldValue("plugin"),oe={command:ie.getFieldValue("command"),plugin:ne};return JSON.stringify(oe)}function construct$H(ie){return ie?{kind:"BLOCK",type:"reality2_action_send_plugin_no_params",fields:{plugin:R2.JSONPath(ie,"plugin"),command:R2.JSONPath(ie,"command")}}:null}const reality2_action_send_plugin_no_params={shape:shape$G,process:process$G,construct:construct$H},shape$F={type:"reality2_action_signal",message0:"signal %1",args0:[{type:"field_input",name:"event",check:"String",text:""}],message1:"with %1",args1:[{type:"input_statement",name:"parameters",check:"reality2_action_parameter"}],previousStatement:null,nextStatement:null,colour:300,tooltip:"Send a signal to any connected devices, with some additional information to add to the data flow.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$F(ie,te){var ne={};const re=ie.getFieldValue("event"),oe=te.statementToCode(ie,"parameters");oe!==""&&(ne=splitConcatenatedJSON(oe));const le={command:"signal",parameters:{event:re,public:!0}};return Object.keys(ne).length!==0&&(le.parameters.parameters=ne),JSON.stringify(le)}function construct$G(ie){if(R2.JSONPath(ie,"parameters.public")===!0||R2.JSONPath(ie,"public"),ie){let te={kind:"BLOCK",type:"reality2_action_signal",fields:{event:R2.JSONPath(ie,"parameters.event")},inputs:{parameters:{}}},ne=reality2_action_parameter.construct(R2.JSONPath(ie,"parameters.parameters"));return ne&&(te.inputs.parameters={block:ne}),te}else return null}const reality2_action_signal={shape:shape$F,process:process$F,construct:construct$G},shape$E={type:"reality2_action_signal_no_params",message0:"signal %1",args0:[{type:"field_input",name:"event",check:"String",text:""}],previousStatement:null,nextStatement:null,colour:330,tooltip:"Send a signal to any connected devices.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$E(ie,te){const re={command:"signal",parameters:{event:ie.getFieldValue("event"),public:!0}};return JSON.stringify(re)}function construct$F(ie){return R2.JSONPath(ie,"parameters.public")===!0||R2.JSONPath(ie,"public"),ie?{kind:"BLOCK",type:"reality2_action_signal_no_params",fields:{event:R2.JSONPath(ie,"parameters.event")}}:null}const reality2_action_signal_no_params={shape:shape$E,process:process$E,construct:construct$F},shape$D={type:"reality2_action_test",message0:"if %1",args0:[{type:"input_value",name:"if"}],message1:"send %1",args1:[{type:"field_input",name:"then",check:"String",text:""}],message2:"otherwise send %1",args2:[{type:"field_input",name:"else",check:"String",text:""}],message3:"to %1",args3:[{type:"field_input",name:"to",check:"String",text:""}],message4:"with %1",args4:[{type:"input_statement",name:"parameters",check:"reality2_action_parameter"}],previousStatement:null,nextStatement:null,colour:300,tooltip:"Test the condition, and if true, send one event or send the other.",helpUrl:"https://github.com/reality-two/reality2-documentation",inputsInline:!0};function process$D(ie,te){var ne={};const re=te.valueToCode(ie,"if",99),oe=re===""?null:R2.JSONPath(R2.ToJSON(re),"expr"),le=ie.getFieldValue("then"),ae=ie.getFieldValue("else"),he=ie.getFieldValue("to"),de=te.statementToCode(ie,"parameters");de!==""&&(ne=splitConcatenatedJSON(de));const ue={command:"test",parameters:{if:oe,then:le}};return ae!==""&&(ue.parameters.else=ae),he!==""&&he!=="me"&&(ue.parameters.to=he),Object.keys(ne).length!==0&&(ue.parameters.parameters=ne),JSON.stringify(ue)}function construct$E(ie){if(ie){let te=R2.JSONPath(ie,"parameters.to"),ne={kind:"BLOCK",type:"reality2_action_test",fields:{then:R2.JSONPath(ie,"parameters.then"),else:R2.JSONPath(ie,"parameters.else"),to:te===""?"me":te},inputs:{if:{block:reality2_action_set_calc_binary.construct(R2.JSONPath(ie,"parameters.if"))},parameters:{}}},re=reality2_action_parameter.construct(R2.JSONPath(ie,"parameters.parameters"));return re&&(ne.inputs.parameters={block:re}),ne}else return null}const reality2_action_test={shape:shape$D,process:process$D,construct:construct$E},shape$C={type:"reality2_action_test_no_params",message0:"if %1",args0:[{type:"input_value",name:"if"}],message1:"send %1",args1:[{type:"field_input",name:"then",check:"String",text:""}],message2:"otherwise send %1",args2:[{type:"field_input",name:"else",check:"String",text:""}],message3:"to %1",args3:[{type:"field_input",name:"to",check:"String",text:""}],previousStatement:null,nextStatement:null,colour:300,tooltip:"Test the condition, and if true, send one event or send the other.",helpUrl:"https://github.com/reality-two/reality2-documentation",inputsInline:!0};function process$C(ie,te){const ne=te.valueToCode(ie,"if",99),re=ne===""?null:R2.JSONPath(R2.ToJSON(ne),"expr"),oe=ie.getFieldValue("then"),le=ie.getFieldValue("else"),ae=ie.getFieldValue("to"),he={command:"test",parameters:{if:re,then:oe}};return le!==""&&(he.parameters.else=le),ae!==""&&ae!=="me"&&(he.parameters.to=ae),JSON.stringify(he)}function construct$D(ie){if(ie){let te=R2.JSONPath(ie,"parameters.to");return{kind:"BLOCK",type:"reality2_action_test_no_params",fields:{then:R2.JSONPath(ie,"parameters.then"),else:R2.JSONPath(ie,"parameters.else"),to:te===""?"me":te},inputs:{if:{block:reality2_action_set_calc_binary.construct(R2.JSONPath(ie,"parameters.if"))}}}}else return null}const reality2_action_test_no_params={shape:shape$C,process:process$C,construct:construct$D},shape$B={type:"reality2_action_test_simple",message0:"if %1 send %2",args0:[{type:"input_value",name:"if"},{type:"field_input",name:"then",check:"String",text:""}],previousStatement:null,nextStatement:null,colour:300,tooltip:"Test the condition, and if true, send one event or send the other.",helpUrl:"https://github.com/reality-two/reality2-documentation",inputsInline:!0};function process$B(ie,te){const ne=te.valueToCode(ie,"if",99),re=ne===""?null:R2.JSONPath(R2.ToJSON(ne),"expr"),oe=ie.getFieldValue("then");return JSON.stringify({command:"test",parameters:{if:re,then:oe}})}function construct$C(ie){if(ie){let te=R2.JSONPath(ie,"parameters.to");return{kind:"BLOCK",type:"reality2_action_test_simple",fields:{then:R2.JSONPath(ie,"parameters.then"),to:te===""?"me":te},inputs:{if:{block:reality2_action_set_calc_binary.construct(R2.JSONPath(ie,"parameters.if"))}}}}else return null}const reality2_action_test_simple={shape:shape$B,process:process$B,construct:construct$C},shape$A={type:"ai_reality2_vars_set",message0:"store %1 as %2",args0:[{type:"field_input",name:"key",check:"String",text:""},{type:"field_input",name:"value",check:"String",text:""}],previousStatement:null,nextStatement:null,colour:360,tooltip:"Store a persistent variable.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$A(ie,te){const ne=ie.getFieldValue("key"),re=R2.convert(ie.getFieldValue("value"));return JSON.stringify({plugin:"ai.reality2.vars",command:"set",parameters:{key:ne,value:re}})}function construct$B(ie){return ie?{kind:"BLOCK",type:"ai_reality2_vars_set",fields:{key:R2.JSONPath(ie,"parameters.key"),value:R2.JSONPath(ie,"parameters.value")}}:null}const ai_reality2_vars_set={shape:shape$A,process:process$A,construct:construct$B},shape$z={type:"ai_reality2_vars_set_no_value",message0:"store %1",args0:[{type:"field_input",name:"key",check:"String",text:""}],previousStatement:null,nextStatement:null,colour:360,tooltip:"Store a persistent variable from the data flow.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$z(ie,te){const ne=ie.getFieldValue("key"),re={plugin:"ai.reality2.vars",command:"set",parameters:{key:ne,value:"__"+ne+"__"}};return JSON.stringify(re)}function construct$A(ie){return ie?{kind:"BLOCK",type:"ai_reality2_vars_set_no_value",fields:{key:R2.JSONPath(ie,"parameters.key")}}:null}const ai_reality2_vars_set_no_value={shape:shape$z,process:process$z,construct:construct$A},shape$y={type:"ai_reality2_vars_get",message0:"fetch %1",args0:[{type:"field_input",name:"key",check:"String",text:""}],previousStatement:null,nextStatement:null,colour:360,tooltip:"Fetch a persistent variable.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$y(ie,te){const re={plugin:"ai.reality2.vars",command:"get",parameters:{key:ie.getFieldValue("key")}};return JSON.stringify(re)}function construct$z(ie){return ie?{kind:"BLOCK",type:"ai_reality2_vars_get",fields:{key:R2.JSONPath(ie,"parameters.key")}}:null}const ai_reality2_vars_get={shape:shape$y,process:process$y,construct:construct$z},shape$x={type:"ai_reality2_vars_all",message0:"fetch all",previousStatement:null,nextStatement:null,colour:360,tooltip:"Fetch a persistent variable.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$x(ie,te){return ie.getFieldValue("key"),JSON.stringify({plugin:"ai.reality2.vars",command:"all"})}function construct$y(ie){return ie?{kind:"BLOCK",type:"ai_reality2_vars_all"}:null}const ai_reality2_vars_all={shape:shape$x,process:process$x,construct:construct$y},shape$w={type:"ai_reality2_vars_clear",message0:"clear all",previousStatement:null,nextStatement:null,colour:360,tooltip:"Clears all the persistent variables for this Bee.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$w(ie,te){return ie.getFieldValue("key"),JSON.stringify({plugin:"ai.reality2.vars",command:"clear"})}function construct$x(ie){return ie?{kind:"BLOCK",type:"ai_reality2_vars_clear"}:null}const ai_reality2_vars_clear={shape:shape$w,process:process$w,construct:construct$x},shape$v={type:"ai_reality2_geospatial_set",message0:"set geospatial",message1:"latitude %1",args1:[{type:"field_input",name:"latitude",check:"String",text:""}],message2:"longitude %1",args2:[{type:"field_input",name:"longitude",check:"String",text:""}],message3:"OR geohash %1",args3:[{type:"field_input",name:"geohash",check:"String",text:""}],message4:"altitude %1",args4:[{type:"field_input",name:"altitude",check:"String",text:"0"}],message5:"radius %1",args5:[{type:"field_input",name:"radius",check:"String",text:"0"}],previousStatement:null,nextStatement:null,colour:360,tooltip:"Set geospatial parameters on a Bee.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$v(ie,te){const ne=R2.convert(ie.getFieldValue("latitude")),re=R2.convert(ie.getFieldValue("longitude")),oe=ie.getFieldValue("geohash"),le=R2.convert(ie.getFieldValue("altitude")),ae=R2.convert(ie.getFieldValue("radius"));return JSON.stringify({plugin:"ai.reality2.geospatial",command:"set",parameters:{latitude:ne,longitude:re,altitude:le,geohash:oe,radius:ae}})}function construct$w(ie){return ie?{kind:"BLOCK",type:"ai_reality2_geospatial_set",fields:{latitude:R2.JSONPath(ie,"parameters.latitude"),longitude:R2.JSONPath(ie,"parameters.longitude"),altitude:R2.JSONPath(ie,"parameters.altitude"),geohash:R2.JSONPath(ie,"parameters.geohash"),radius:R2.JSONPath(ie,"parameters.radius")}}:null}const ai_reality2_geospatial_set={shape:shape$v,process:process$v,construct:construct$w},shape$u={type:"ai_reality2_geospatial_set_simple",message0:"set location",previousStatement:null,nextStatement:null,colour:360,tooltip:"Set geospatial parameters on a Bee from the data flow.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$u(ie,te){return JSON.stringify({plugin:"ai.reality2.geospatial",command:"set"})}function construct$v(ie){return ie?{kind:"BLOCK",type:"ai_reality2_geospatial_set_simple"}:null}const ai_reality2_geospatial_set_simple={shape:shape$u,process:process$u,construct:construct$v},shape$t={type:"ai_reality2_geospatial_set_geohash",message0:"set geohash %1",args0:[{type:"field_input",name:"geohash",check:"String",text:""}],previousStatement:null,nextStatement:null,colour:360,tooltip:"Set a Geohash.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$t(ie,te){const re={command:"set",parameters:{key:"geohash",value:ie.getFieldValue("geohash")}};return JSON.stringify(re)}function construct$u(ie){return ie?{kind:"BLOCK",type:"ai_reality2_geospatial_set_geohash",fields:{geohash:R2.JSONPath(ie,"parameters.geohash")}}:null}const ai_reality2_geospatial_set_geohash={shape:shape$t,process:process$t,construct:construct$u},shape$s={type:"ai_reality2_geospatial_set_radius",message0:"set radius %1",args0:[{type:"field_input",name:"radius",check:"String",text:"0"}],previousStatement:null,nextStatement:null,colour:360,tooltip:"Set a radius of privacy for a location.  Seeker has to be within the radius in order to find this Bee.  A (default) value of zero (0) means no radius used.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$s(ie,te){const re={command:"set",parameters:{key:"radius",value:R2.convert(ie.getFieldValue("radius"))}};return JSON.stringify(re)}function construct$t(ie){return ie?{kind:"BLOCK",type:"ai_reality2_geospatial_set_radius",fields:{radius:R2.JSONPath(ie,"parameters.radius")}}:null}const ai_reality2_geospatial_set_radius={shape:shape$s,process:process$s,construct:construct$t},shape$r={type:"ai_reality2_geospatial_get",message0:"get location",previousStatement:null,nextStatement:null,colour:360,tooltip:"Get geospatial details from a Bee.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$r(ie,te){return ie.getFieldValue("key"),JSON.stringify({plugin:"ai.reality2.geospatial",command:"get"})}function construct$s(ie){return ie?{kind:"BLOCK",type:"ai_reality2_geospatial_get"}:null}const ai_reality2_geospatial_get={shape:shape$r,process:process$r,construct:construct$s},shape$q={type:"ai_reality2_geospatial_search",message0:"search within radius %1",args0:[{type:"field_input",name:"radius",check:"Number",text:""}],previousStatement:null,nextStatement:null,colour:360,tooltip:"Search for Bees within the given radius of this Bee (in meters) and return an array of those that are nearby in the 'to' variable.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$q(ie,te){const ne=R2.convert(ie.getFieldValue("radius")),re={plugin:"ai.reality2.geospatial",command:"search"};return ne&&(re.parameters={radius:ne}),JSON.stringify(re)}function construct$r(ie){return ie?{kind:"BLOCK",type:"ai_reality2_geospatial_search",fields:{radius:R2.JSONPath(ie,"parameters.radius")}}:null}const ai_reality2_geospatial_search={shape:shape$q,process:process$q,construct:construct$r},shape$p={type:"ai_reality2_geospatial_remove",message0:"remove location",previousStatement:null,nextStatement:null,colour:360,tooltip:"Remove geospatial parameters from a Bee.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$p(ie,te){return JSON.stringify({plugin:"ai.reality2.geospatial",command:"delete"})}function construct$q(ie){return ie?{kind:"BLOCK",type:"ai_reality2_geospatial_remove"}:null}const ai_reality2_geospatial_remove={shape:shape$p,process:process$p,construct:construct$q},shape$o={type:"ai_reality2_backup_save",message0:"save data flow",previousStatement:null,nextStatement:null,colour:360,tooltip:"Save data flow as encrypted blob to database on this node.  Remember to set the encryption and decryption keys in the Bee header.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$o(ie,te){return JSON.stringify({plugin:"ai.reality2.backup",command:"store"})}function construct$p(ie){return ie?{kind:"BLOCK",type:"ai_reality2_backup_save"}:null}const ai_reality2_backup_save={shape:shape$o,process:process$o,construct:construct$p},shape$n={type:"ai_reality2_backup_load",message0:"load into data flow",previousStatement:null,nextStatement:null,colour:360,tooltip:"Load from the encrypted blob on this node into the data flow.  Remember to set the encryption and decryption keys in the Bee header.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$n(ie,te){return JSON.stringify({plugin:"ai.reality2.backup",command:"retrieve"})}function construct$o(ie){return ie?{kind:"BLOCK",type:"ai_reality2_backup_load"}:null}const ai_reality2_backup_load={shape:shape$n,process:process$n,construct:construct$o},shape$m={type:"ai_reality2_backup_delete",message0:"delete saved data",previousStatement:null,nextStatement:null,colour:360,tooltip:"Delete encrypted blob from database on this node.  Remember to set the encryption and decryption keys in the Bee header.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$m(ie,te){return JSON.stringify({plugin:"ai.reality2.backup",command:"delete"})}function construct$n(ie){return ie?{kind:"BLOCK",type:"ai_reality2_backup_delete"}:null}const ai_reality2_backup_delete={shape:shape$m,process:process$m,construct:construct$n};function splitConcatenatedJSON(ie,te=!0){let ne=[],re=0,oe=0;for(let le=0;le<ie.length;le++){const ae=ie[le];if(ae==="{")re===0&&(oe=le),re++;else if(ae==="}"&&(re--,re===0))try{const he=JSON.parse(ie.slice(oe,le+1));ne.push(he)}catch(he){console.error("Invalid JSON object:",he)}}return te?ne.reduce((ae,he)=>({...ae,...he}),{}):ne}function interpret_actions(ie,te){let ne=R2.JSONPath(ie,"actions");if(ne){let re=ne.reduceRight((oe,le)=>{let ae,he=R2.JSONPath(le,"plugin");if(he=="ai.reality2.vars")switch(R2.JSONPath(le,"command")){case"set":let $e=R2.JSONPath(le,"parameters.key");R2.JSONPath(le,"parameters.value")==="__"+$e+"__"?(ae=ai_reality2_vars_set_no_value.construct(le),ae&&oe&&(ae.next={block:oe})):(ae=ai_reality2_vars_set.construct(le),ae&&oe&&(ae.next={block:oe}));break;case"get":ae=ai_reality2_vars_get.construct(le),ae&&oe&&(ae.next={block:oe});break;case"all":ae=ai_reality2_vars_all.construct(le),ae&&oe&&(ae.next={block:oe});break;case"delete":ae=ai_reality2_vars_all.construct(le),ae&&oe&&(ae.next={block:oe});break;case"clear":ae=ai_reality2_vars_clear.construct(le),ae&&oe&&(ae.next={block:oe});break}else if(he=="ai.reality2.geospatial")switch(R2.JSONPath(le,"command")){case"set":let $e=R2.JSONPath(le,"parameters.latitude"),Te=R2.JSONPath(le,"parameters.longitude"),Ee=R2.JSONPath(le,"parameters.geohash");!$e&&!Te&&!Ee?(ae=ai_reality2_geospatial_set_simple.construct(le),ae&&oe&&(ae.next={block:oe})):!($e||Te)&&Ee?(ae=ai_reality2_geospatial_set_geohash.construct(le),ae&&oe&&(ae.next={block:oe})):(ae=ai_reality2_geospatial_set.construct(le),ae&&oe&&(ae.next={block:oe}));break;case"get":ae=ai_reality2_geospatial_get.construct(le),ae&&oe&&(ae.next={block:oe});break;case"search":ae=ai_reality2_geospatial_search.construct(le),ae&&oe&&(ae.next={block:oe});break;case"remove":ae=ai_reality2_geospatial_remove.construct(le),ae&&oe&&(ae.next={block:oe});break}else if(he=="ai.reality2.backup")switch(R2.JSONPath(le,"command")){case"store":ae=ai_reality2_backup_save.construct(le),ae&&oe&&(ae.next={block:oe});break;case"retrieve":ae=ai_reality2_backup_load.construct(le),ae&&oe&&(ae.next={block:oe});break;case"delete":ae=ai_reality2_backup_delete.construct(le),ae&&oe&&(ae.next={block:oe});break}else if(R2.JSONPath(le,"plugin")){var de=R2.JSONPath(le,"parameters.parameters");de&&Object.keys(de).length>0?(ae=reality2_action_send_plugin.construct(le),ae&&oe&&(ae.next={block:oe})):(ae=reality2_action_send_plugin_no_params.construct(le),ae&&oe&&(ae.next={block:oe}))}else switch(R2.JSONPath(le,"command")){case"set":let ge=R2.JSONPath(le,"parameters.value");if(ge!=null){switch(ge){case"radius":ae=ai_reality2_geospatial_set_radius.construct(le);break;case"geohash":ae=ai_reality2_geospatial_set_geohash.construct(le);break;default:ae=reality2_action_set.construct(le);break}ae&&oe&&(ae.next={block:oe})}else ae=reality2_action_set_clear.construct(le),ae&&oe&&(ae.next={block:oe});break;case"send":var ue=R2.ToSimple(R2.JSONPath(le,"parameters.delay")),de=R2.JSONPath(le,"parameters.parameters");ue>0?de&&Object.keys(de).length>0?(ae=reality2_action_send.construct(le),ae&&oe&&(ae.next={block:oe})):(ae=reality2_action_send_no_params.construct(le),ae&&oe&&(ae.next={block:oe})):de&&Object.keys(de).length>0?(ae=reality2_action_send_now.construct(le),ae&&oe&&(ae.next={block:oe})):(ae=reality2_action_send_now_no_params.construct(le),ae&&oe&&(ae.next={block:oe}));break;case"signal":var de=R2.JSONPath(le,"parameters.parameters");de&&Object.keys(de).length>0?(ae=reality2_action_signal.construct(le),ae&&oe&&(ae.next={block:oe})):(ae=reality2_action_signal_no_params.construct(le),ae&&oe&&(ae.next={block:oe}));break;case"debug":ae=reality2_action_debug.construct(le),ae&&oe&&(ae.next={block:oe});break;case"test":var de=R2.JSONPath(le,"parameters.parameters"),pe=R2.JSONPath(le,"parameters.else"),fe=R2.JSONPath(le,"parameters.to");de&&Object.keys(de).length>0?(ae=reality2_action_test.construct(le),ae&&oe&&(ae.next={block:oe})):pe||fe?(ae=reality2_action_test_no_params.construct(le),ae&&oe&&(ae.next={block:oe})):(ae=reality2_action_test_simple.construct(le),ae&&oe&&(ae.next={block:oe}));break}return ae},null);te.inputs.actions={block:re}}return te}const shape$l={type:"reality2_key_value",message0:"key %1 = %2",args0:[{type:"field_input",name:"key",check:"String",text:""},{type:"field_input",name:"value",check:"String",text:""}],previousStatement:null,nextStatement:null,colour:50,tooltip:"Keys, which are a form of data, useful for storing secret data such as API keys.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$l(ie,te){const ne=ie.getFieldValue("key"),re=R2.convert(ie.getFieldValue("value"));var oe={};return oe[ne]=re,JSON.stringify(oe)}function construct$m(ie){if(ie){let te=Object.keys(ie);if(te.length>0){let ne={kind:"BLOCK",type:"reality2_key_value",fields:{key:te[0],value:R2.JSONPath(ie,te[0])}};if(delete ie[te[0]],Object.keys(ie).length>0){let re=construct$m(ie);re&&(ne.next={block:re})}return ne}else return null}else return null}const reality2_key_value={shape:shape$l,process:process$l,construct:construct$m},shape$k={type:"reality2_encrypt_decrypt_keys",message0:"encryption_key = %1",args0:[{type:"field_input",name:"encryption_key",check:"String",text:"__encryption_key__"}],message1:"decryption_key = %1",args1:[{type:"field_input",name:"decryption_key",check:"String",text:"__decryption_key__"}],previousStatement:null,nextStatement:null,colour:50,tooltip:"Keys, which are a form of data, used specifically for encrypting and decrypting information stored on the Node.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$k(ie,te){const ne=ie.getFieldValue("encryption_key"),re=ie.getFieldValue("decryption_key");return JSON.stringify({encryption_key:ne,decryption_key:re})}function construct$l(ie){if(ie){const te=R2.JSONPath(ie,"encryption_key");te&&delete ie.encryption_key;const ne=R2.JSONPath(ie,"decryption_key");ne&&delete ie.decryption_key;let re={kind:"BLOCK",type:"reality2_encrypt_decrypt_keys",fields:{encryption_key:te,decryption_key:ne}};if(Object.keys(ie).length>0){let oe=reality2_key_value.construct(ie);oe&&(re.next={block:oe})}return re}else return null}const reality2_encrypt_decrypt_keys={shape:shape$k,process:process$k,construct:construct$l},shape$j={type:"reality2_data",message0:"data %1 = %2",args0:[{type:"field_input",name:"key",check:"String",text:""},{type:"field_input",name:"value",check:"String",text:""}],previousStatement:null,nextStatement:null,colour:50,tooltip:"Data included with the Bee when set up.  This cannot be altered once the Bee is active, but can be used in the data flow.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$j(ie,te){const ne=ie.getFieldValue("key"),re=R2.ToJSON(ie.getFieldValue("value"));var oe={};return oe[ne]=re,JSON.stringify(oe)}function construct$k(ie){if(ie){let te=Object.keys(ie);if(te.length>0){let ne={kind:"BLOCK",type:"reality2_data",fields:{key:te[0],value:R2.ToSimple(R2.JSONPath(ie,te[0]))}};delete ie[te[0]];let re=construct$k(ie);return re&&(ne.next={block:re}),ne}else return null}else return null}const reality2_data={shape:shape$j,process:process$j,construct:construct$k},shape$i={type:"reality2_plugin_header",message0:"header %1 = %2",args0:[{type:"field_input",name:"header",check:"String",text:""},{type:"field_input",name:"data",check:"String",text:""}],previousStatement:null,nextStatement:null,colour:150,tooltip:"When defining an antenna, often there are data to be sent in the header of the API call.  Check with the API definition help pages.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$i(ie,te){const ne=ie.getFieldValue("header"),re=R2.ToJSON(ie.getFieldValue("data"));var oe={};return oe[ne]=re,JSON.stringify(oe)}function construct$j(ie){if(ie){let te=Object.keys(ie);if(te.length>0){let ne={kind:"BLOCK",type:"reality2_plugin_header",fields:{header:te[0],data:R2.ToSimple(R2.JSONPath(ie,te[0]))}};delete ie[te[0]];let re=construct$j(ie);return re&&(ne.next={block:re}),ne}else return null}else return null}const reality2_plugin_header={shape:shape$i,process:process$i,construct:construct$j},shape$h={type:"reality2_get_plugin",message0:"ANTENNA %1",args0:[{type:"field_input",name:"name",check:"String",text:"name",tooltip:"Link name in reverse DNS format eg: com.openai.api"}],message1:"%1",args1:[{type:"field_input",name:"description",check:"String",text:"description"}],message2:"GET from %1 with",args2:[{type:"field_input",name:"url",check:"String",text:"",tooltip:"The full URL of the API"}],message3:" - headers %1",args3:[{type:"input_statement",name:"headers"}],message4:"OUTPUT %1 = %2 with event %3",args4:[{type:"field_input",name:"output_key",check:"String",text:""},{type:"field_input",name:"output_value",check:"String",text:"",tooltip:"A JSONPath, for example choices.0.message.content"},{type:"field_input",name:"output_event",check:"String",text:""}],previousStatement:null,nextStatement:null,colour:150,tooltip:"An antenna to get information from an internet connected resource that uses a GET API.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$h(ie,te){var ne={};ne.name=ie.getFieldValue("name"),ie.getFieldValue("description")!==""&&(ne.description=ie.getFieldValue("description")),ne.url=ie.getFieldValue("url"),ne.method="GET";const re=te.statementToCode(ie,"headers");return re!=""&&(ne.headers=splitConcatenatedJSON(re)),ne.output={key:ie.getFieldValue("output_key"),value:ie.getFieldValue("output_value"),event:ie.getFieldValue("output_event")},JSON.stringify({plugin:ne})}function construct$i(ie){let te=R2.JSONPath(ie,"description")?R2.JSONPath(ie,"description"):"";if(ie){let ne={kind:"BLOCK",type:"reality2_get_plugin",fields:{name:R2.JSONPath(ie,"name"),description:te,url:R2.JSONPath(ie,"url"),method:"GET",output_key:R2.JSONPath(ie,"output.key"),output_value:R2.JSONPath(ie,"output.value"),output_event:R2.JSONPath(ie,"output.event")},inputs:{headers:{}}},re=reality2_plugin_header.construct(R2.JSONPath(ie,"headers"));return re&&(ne.inputs.headers={block:re}),ne}else return null}const reality2_get_plugin={shape:shape$h,process:process$h,construct:construct$i},shape$g={type:"reality2_plugin_body",message0:"body %1 = %2",args0:[{type:"field_input",name:"key",check:"String",text:""},{type:"field_input",name:"value",check:"String",text:""}],previousStatement:null,nextStatement:null,colour:150,tooltip:"When defining a POST antenna, often there are data to be sent as the body of the API call.  Check with the API definition help pages.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$g(ie,te){const ne=ie.getFieldValue("key"),re=R2.ToJSON(ie.getFieldValue("value"));var oe={};return oe[ne]=re,JSON.stringify(oe)}function construct$h(ie){if(ie){let te=Object.keys(ie);if(te.length>0){let ne={kind:"BLOCK",type:"reality2_plugin_body",fields:{key:te[0],value:R2.ToSimple(R2.JSONPath(ie,te[0]))}};delete ie[te[0]];let re=construct$h(ie);return re&&(ne.next={block:re}),ne}else return null}else return null}const reality2_plugin_body={shape:shape$g,process:process$g,construct:construct$h},shape$f={type:"reality2_post_plugin",message0:"ANTENNA %1",args0:[{type:"field_input",name:"name",check:"String",text:"name",tooltip:"Antenna name in reverse DNS format eg: com.openai.api"}],message1:"%1",args1:[{type:"field_input",name:"description",check:"String",text:"description"}],message2:"POST to %1 with",args2:[{type:"field_input",name:"url",check:"String",text:"",tooltip:"The full URL of the API"}],message3:" - headers %1",args3:[{type:"input_statement",name:"headers"}],message4:" - body %1",args4:[{type:"input_statement",name:"body"}],message5:"OUTPUT %1 = %2 with event %3",args5:[{type:"field_input",name:"output_key",check:"String",text:""},{type:"field_input",name:"output_value",check:"String",text:"",tooltip:"A JSONPath, for example choices.0.message.content"},{type:"field_input",name:"output_event",check:"String",text:""}],previousStatement:null,nextStatement:null,colour:150,tooltip:"An antenna to retrieve information from an internet connected resource that uses a POST API.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$f(ie,te){var ne={};ne.name=ie.getFieldValue("name"),ie.getFieldValue("description")!==""&&(ne.description=ie.getFieldValue("description")),ne.url=ie.getFieldValue("url"),ne.method="POST";const re=te.statementToCode(ie,"headers");re!=""&&(ne.headers=splitConcatenatedJSON(re));const oe=te.statementToCode(ie,"body");return oe!=""&&(ne.body=splitConcatenatedJSON(oe)),ne.output={key:ie.getFieldValue("output_key"),value:ie.getFieldValue("output_value"),event:ie.getFieldValue("output_event")},JSON.stringify({plugin:ne})}function construct$g(ie){let te=R2.JSONPath(ie,"description")?R2.JSONPath(ie,"description"):"";if(ie){let ne={kind:"BLOCK",type:"reality2_post_plugin",fields:{name:R2.JSONPath(ie,"name"),description:te,url:R2.JSONPath(ie,"url"),method:"POST",output_key:R2.JSONPath(ie,"output.key"),output_value:R2.JSONPath(ie,"output.value"),output_event:R2.JSONPath(ie,"output.event")},inputs:{headers:{},body:{}}},re=reality2_plugin_header.construct(R2.JSONPath(ie,"headers"));re&&(ne.inputs.headers={block:re});let oe=reality2_plugin_body.construct(R2.JSONPath(ie,"body"));return oe&&(ne.inputs.body={block:oe}),ne}else return null}const reality2_post_plugin={shape:shape$f,process:process$f,construct:construct$g},shape$e={type:"reality2_parameter",message0:"input %1 as %2",args0:[{type:"field_input",name:"parameter",check:"String",text:""},{type:"field_dropdown",name:"type",options:[["number","number"],["string","string"],["boolean","boolean"],["json","json"]],tooltip:"Various parameter types"}],previousStatement:null,nextStatement:null,colour:250,tooltip:"Additional information to add to the data flow.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$e(ie,te){const ne=ie.getFieldValue("parameter"),re=ie.getFieldValue("type");return'{"'+ne+'":"'+re+'"}'}function construct$f(ie){if(ie){let te=Object.keys(ie);if(te.length>0){let ne=te[0],re=R2.JSONPath(ie,ne),oe={kind:"BLOCK",type:"reality2_parameter",fields:{parameter:ne,type:re}};delete ie[te[0]];let le=construct$f(ie);return le&&(oe.next={block:le}),oe}else return null}else return null}const reality2_parameter={shape:shape$e,process:process$e,construct:construct$f},shape$d={type:"reality2_transition",message0:"in state %2 when %3 : %1 happens, go to %4",args0:[{type:"field_dropdown",name:"access",options:[["visible","visible"],["internal","internal"]],tooltip:"Only public events can be triggered by external Sentants."},{type:"field_input",name:"from",check:"String",text:"",tooltip:"from"},{type:"field_input",name:"event",check:"String",text:"",tooltip:"event"},{type:"field_input",name:"to",check:"String",text:"",tooltip:"to"}],message1:"with %1",args1:[{type:"input_statement",name:"parameters",check:"reality_parameter"}],message2:"TASKS",message3:"%1",args3:[{type:"input_statement",name:"actions",check:["reality2_action_debug","reality2_action_send","reality2_action_send_plugin","reality2_action_set","reality2_action_signal"]}],previousStatement:null,nextStatement:null,colour:250,tooltip:"When a Bee is in a particular state, and it receives notice that something has happened, it goes to a new state, and performs some tasks with additional information to add to the data flow.  For example, a switch may be off, then be told to 'turn on', whereupon it goes into the on state.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$d(ie,te){var ne={};ie.getFieldValue("access")==="visible"&&(ne.public=!0),ne.from=ie.getFieldValue("from"),ne.event=ie.getFieldValue("event"),ne.to=ie.getFieldValue("to");const re=te.statementToCode(ie,"parameters");re!=""&&(ne.parameters=splitConcatenatedJSON(re));const oe=te.statementToCode(ie,"actions");return oe!=""&&(ne.actions=splitConcatenatedJSON(oe,!1)),JSON.stringify(ne)}function construct$e(ie){if(ie){let te={kind:"BLOCK",type:"reality2_transition",fields:{access:R2.JSONPath(ie,"public")?"visible":"internal",from:R2.JSONPath(ie,"from"),event:R2.JSONPath(ie,"event"),to:R2.JSONPath(ie,"to")},inputs:{parameters:{},actions:{}}},ne=R2.JSONPath(ie,"parameters");if(ne&&Object.keys(ne).length>0){let re=reality2_parameter.construct(ne);te.inputs.parameters={block:re}}return interpret_actions(ie,te)}else return null}const reality2_transition={shape:shape$d,process:process$d,construct:construct$e},shape$c={type:"reality2_transition_no_params",message0:"in state %2 when %3 : %1 happens, go to %4",args0:[{type:"field_dropdown",name:"access",options:[["visible","visible"],["internal","internal"]],tooltip:"Only public events can be triggered by external Sentants."},{type:"field_input",name:"from",check:"String",text:"",tooltip:"from"},{type:"field_input",name:"event",check:"String",text:"",tooltip:"event"},{type:"field_input",name:"to",check:"String",text:"",tooltip:"to"}],message1:"TASKS",message2:"%1",args2:[{type:"input_statement",name:"actions",check:["reality2_action_debug","reality2_action_send","reality2_action_send_plugin","reality2_action_set","reality2_action_signal"]}],previousStatement:null,nextStatement:null,colour:270,tooltip:"When a Bee is in a particular state, and it receives notice that something has happened, it goes to a new state, and performs some tasks.  For example, a switch may be off, then be told to 'turn on', whereupon it goes into the on state.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$c(ie,te){var ne={};ie.getFieldValue("access")==="visible"&&(ne.public=!0),ne.from=ie.getFieldValue("from"),ne.event=ie.getFieldValue("event"),ne.to=ie.getFieldValue("to");const re=te.statementToCode(ie,"actions");return re!=""&&(ne.actions=splitConcatenatedJSON(re,!1)),JSON.stringify(ne)}function construct$d(ie){if(ie){let te={kind:"BLOCK",type:"reality2_transition_no_params",fields:{access:R2.JSONPath(ie,"public")?"visible":"internal",from:R2.JSONPath(ie,"from"),event:R2.JSONPath(ie,"event"),to:R2.JSONPath(ie,"to")},inputs:{actions:{}}};return interpret_actions(ie,te)}else return null}const reality2_transition_no_params={shape:shape$c,process:process$c,construct:construct$d},shape$b={type:"reality2_simple_transition",message0:"instruction %2 : %1",args0:[{type:"field_dropdown",name:"access",options:[["visible","visible"],["internal","internal"]],tooltip:"Only public events can be triggered by external Sentants."},{type:"field_input",name:"event",check:"String",text:""}],message1:"with %1",args1:[{type:"input_statement",name:"parameters",check:["reality2_parameter"]}],message2:"TASKS",message3:"%1",args3:[{type:"input_statement",name:"actions",check:["reality2_action_debug","reality2_action_send","reality2_action_send_plugin","reality2_action_set","reality2_action_signal"]}],previousStatement:null,nextStatement:null,colour:250,tooltip:"Receive an instruction, and subsequently perform some tasks with additional information to add to the data flow.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$b(ie,te){var ne={};ie.getFieldValue("access")==="visible"&&(ne.public=!0),ne.event=ie.getFieldValue("event");const re=te.statementToCode(ie,"parameters");re!=""&&(ne.parameters=splitConcatenatedJSON(re));const oe=te.statementToCode(ie,"actions");return oe!=""&&(ne.actions=splitConcatenatedJSON(oe,!1)),JSON.stringify(ne)}function construct$c(ie){if(ie){let te={kind:"BLOCK",type:"reality2_simple_transition",fields:{access:R2.JSONPath(ie,"public")?"visible":"internal",event:R2.JSONPath(ie,"event")},inputs:{parameters:{},actions:{}}},ne=R2.JSONPath(ie,"parameters");if(ne&&Object.keys(ne).length>0){let re=reality2_parameter.construct(ne);te.inputs.parameters={block:re}}return interpret_actions(ie,te)}else return null}const reality2_simple_transition={shape:shape$b,process:process$b,construct:construct$c},shape$a={type:"reality2_simple_transition_no_params",message0:"instruction %2 : %1",args0:[{type:"field_dropdown",name:"access",options:[["visible","visible"],["internal","internal"]],tooltip:"Only public events can be triggered by external Sentants."},{type:"field_input",name:"event",check:"String",text:""}],message1:"TASKS",message2:"%1",args2:[{type:"input_statement",name:"actions",check:["reality2_action_debug","reality2_action_send","reality2_action_send_plugin","reality2_action_set","reality2_action_signal"]}],previousStatement:null,nextStatement:null,colour:270,tooltip:"Receive an instruction, and subsequently perform some tasks.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$a(ie,te){var ne={};ie.getFieldValue("access")==="visible"&&(ne.public=!0),ne.event=ie.getFieldValue("event");const re=te.statementToCode(ie,"actions");return re!=""&&(ne.actions=splitConcatenatedJSON(re,!1)),JSON.stringify(ne)}function construct$b(ie){if(ie){let te={kind:"BLOCK",type:"reality2_simple_transition_no_params",fields:{access:R2.JSONPath(ie,"public")?"visible":"internal",event:R2.JSONPath(ie,"event")},inputs:{actions:{}}};return interpret_actions(ie,te)}else return null}const reality2_simple_transition_no_params={shape:shape$a,process:process$a,construct:construct$b},shape$9={type:"reality2_start_transition",message0:"start as %1",args0:[{type:"field_input",name:"to",check:"String",text:""}],message1:"with %1",args1:[{type:"input_statement",name:"parameters",check:["reality_parameter"]}],message2:"TASKS",message3:"%1",args3:[{type:"input_statement",name:"actions",check:["reality2_action_debug","reality2_action_send","reality2_action_send_plugin","reality2_action_set","reality2_action_signal"]}],previousStatement:null,nextStatement:null,colour:250,tooltip:"Perform specific tasks when the Behaviour starts for the first time, with some additional information to add to the data flow.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$9(ie,te){var ne={};ne.from="start",ne.event="init",ne.to=ie.getFieldValue("to");const re=te.statementToCode(ie,"parameters");re!=""&&(ne.parameters=splitConcatenatedJSON(re));const oe=te.statementToCode(ie,"actions");return oe!=""&&(ne.actions=splitConcatenatedJSON(oe,!1)),JSON.stringify(ne)}function construct$a(ie){if(ie){let te={kind:"BLOCK",type:"reality2_start_transition",fields:{to:R2.JSONPath(ie,"to")},inputs:{parameters:{},actions:{}}},ne=R2.JSONPath(ie,"parameters");if(ne&&Object.keys(ne).length>0){let re=reality2_parameter.construct(ne);te.inputs.parameters={block:re}}return interpret_actions(ie,te)}else return null}const reality2_start_transition={shape:shape$9,process:process$9,construct:construct$a},shape$8={type:"reality2_start_transition_no_params",message0:"start as %1",args0:[{type:"field_input",name:"to",check:"String",text:""}],message1:"TASKS",message2:"%1",args2:[{type:"input_statement",name:"actions",check:["reality2_action_debug","reality2_action_send","reality2_action_send_plugin","reality2_action_set","reality2_action_signal"]}],previousStatement:null,nextStatement:null,colour:270,tooltip:"Perform specific tasks when the Behaviour starts for the first time.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$8(ie,te){var ne={};ne.from="start",ne.event="init",ne.to=ie.getFieldValue("to");const re=te.statementToCode(ie,"actions");return re!=""&&(ne.actions=splitConcatenatedJSON(re,!1)),JSON.stringify(ne)}function construct$9(ie){if(ie){let te={kind:"BLOCK",type:"reality2_start_transition_no_params",fields:{to:R2.JSONPath(ie,"to")},inputs:{actions:{}}};return interpret_actions(ie,te)}else return null}const reality2_start_transition_no_params={shape:shape$8,process:process$8,construct:construct$9},shape$7={type:"reality2_start_transition_simple",message0:"at start, do",message1:"TASKS",message2:"%1",args2:[{type:"input_statement",name:"actions",check:["reality2_action_debug","reality2_action_send","reality2_action_send_plugin","reality2_action_set","reality2_action_signal"]}],previousStatement:null,nextStatement:null,colour:270,tooltip:"Perform specific tasks when the Behaviour starts for the first time.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$7(ie,te){var ne={};ne.from="start",ne.event="init";const re=te.statementToCode(ie,"actions");return re!=""&&(ne.actions=splitConcatenatedJSON(re,!1)),JSON.stringify(ne)}function construct$8(ie){return ie?interpret_actions(ie,{kind:"BLOCK",type:"reality2_start_transition_simple",inputs:{actions:{}}}):null}const reality2_start_transition_simple={shape:shape$7,process:process$7,construct:construct$8},shape$6={type:"reality2_monitor",message0:"monitor internal events",message1:"TASKS",message2:"%1",args2:[{type:"input_statement",name:"actions",check:["reality2_action_debug","reality2_action_send","reality2_action_send_plugin","reality2_action_set","reality2_action_signal"]}],previousStatement:null,nextStatement:null,colour:270,tooltip:"Receive events from inside the node such as when Bees are created and deleted and when networks are joined and left.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$6(ie,te){var ne={event:"__internal"};const re=te.statementToCode(ie,"actions");return re!=""&&(ne.actions=splitConcatenatedJSON(re,!1)),JSON.stringify(ne)}function construct$7(ie){return ie?interpret_actions(ie,{kind:"BLOCK",type:"reality2_monitor",inputs:{actions:{}}}):null}const reality2_monitor={shape:shape$6,process:process$6,construct:construct$7},shape$5={type:"reality2_automation",message0:"BEHAVIOUR %1",args0:[{type:"field_input",name:"name",check:"String",text:"name"}],message1:"%1",args1:[{type:"field_input",name:"description",check:"String",text:"description"}],message2:"DECISIONS",message3:"%1",args3:[{type:"input_statement",name:"transitions",check:"reality2_transition"}],previousStatement:null,nextStatement:null,colour:200,tooltip:"A behaviour, which defines what a Bee is able to do.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$5(ie,te){var ne={};ne.name=ie.getFieldValue("name"),ie.getFieldValue("description")!==""&&(ne.description=ie.getFieldValue("description"));const re=te.statementToCode(ie,"transitions");return re!=""&&(ne.transitions=splitConcatenatedJSON(re,!1)),JSON.stringify({automation:ne})}function construct$6(ie){if(ie){let te={kind:"BLOCK",type:"reality2_automation",fields:{name:R2.JSONPath(ie,"name"),description:R2.JSONPath(ie,"description")?R2.JSONPath(ie,"description"):""},inputs:{transitions:{}}},ne=R2.JSONPath(ie,"transitions");if(ne){let re=ne.reduceRight((oe,le)=>{let ae=le.event,he=le.to,de=le.from,ue;if(ae=="__internal")ue=reality2_monitor.construct(le),ue&&oe&&(ue.next={block:oe});else if(ae&&!he&&!de){let pe=R2.JSONPath(le,"parameters");pe&&Object.keys(pe).length>0?(ue=reality2_simple_transition.construct(le),ue&&oe&&(ue.next={block:oe})):(ue=reality2_simple_transition_no_params.construct(le),ue&&oe&&(ue.next={block:oe}))}else if(ae=="init"&&de=="start"){let pe=R2.JSONPath(le,"parameters");he?pe&&Object.keys(pe).length>0?(ue=reality2_start_transition.construct(le),ue&&oe&&(ue.next={block:oe})):(ue=reality2_start_transition_no_params.construct(le),ue&&oe&&(ue.next={block:oe})):(ue=reality2_start_transition_simple.construct(le),ue&&oe&&(ue.next={block:oe}))}else{let pe=R2.JSONPath(le,"parameters");pe&&Object.keys(pe).length>0?(ue=reality2_transition.construct(le),ue&&oe&&(ue.next={block:oe})):(ue=reality2_transition_no_params.construct(le),ue&&oe&&(ue.next={block:oe}))}return ue},null);te.inputs.transitions={block:re}}return te}else return null}const reality2_automation={shape:shape$5,process:process$5,construct:construct$6},shape$4={type:"reality2_sentant",message0:"BEE %1",args0:[{type:"field_input",name:"name",check:"String",text:"name",tooltip:"Name of Bee"}],message1:"%1",args1:[{type:"field_input",name:"description",check:"String",text:"description"}],message2:" - keys %1",args2:[{type:"input_statement",name:"keys",check:"reality2_encrypt_decrypt_keys"}],message3:" - data %1",args3:[{type:"input_statement",name:"data",check:"reality2_data"}],message4:"ANTENNAE",message5:"%1",args5:[{type:"input_statement",name:"plugins",check:["reality2_get_plugin","reality2_post_plugin"]}],message6:"BEHAVIOURS",message7:"%1",args7:[{type:"input_statement",name:"automations",check:"reality2_automation"}],previousStatement:null,nextStatement:null,colour:50,tooltip:"A Reality2 Sentient Digital Agent, otherwise known as a Bee, or a Sentant.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$4(ie,te){var ne={};ne.name=ie.getFieldValue("name"),ie.getFieldValue("description")!==""&&(ne.description=ie.getFieldValue("description"));let re=te.statementToCode(ie,"keys");re!=""&&(ne.keys=splitConcatenatedJSON(re));let oe=te.statementToCode(ie,"data");oe!=""&&(ne.data=splitConcatenatedJSON(oe));let le=te.statementToCode(ie,"plugins");le!=""&&(ne.plugins=splitConcatenatedJSON(le,!1).map(he=>he.plugin));let ae=te.statementToCode(ie,"automations");return ae!=""&&(ne.automations=splitConcatenatedJSON(ae,!1).map(he=>he.automation)),JSON.stringify({sentant:ne})}function construct$5(ie){let te=R2.JSONPath(ie,"description")?R2.JSONPath(ie,"description"):"";if(ie){let ne={kind:"BLOCK",type:"reality2_sentant",fields:{name:R2.JSONPath(ie,"name"),description:te},inputs:{keys:{},data:{},plugins:{},automations:{}}};if(R2.JSONPath(ie,"keys.encryption_key")||R2.JSONPath(ie,"keys.decryption_key")){let ae=reality2_encrypt_decrypt_keys.construct(R2.JSONPath(ie,"keys"));ae&&(ne.inputs.keys={block:ae})}else{let ae=reality2_key_value.construct(R2.JSONPath(ie,"keys"));ae&&(ne.inputs.keys={block:ae})}let re=reality2_data.construct(R2.JSONPath(ie,"data"));re&&(ne.inputs.data={block:re});let oe=R2.JSONPath(ie,"plugins");if(oe){let ae=oe.reduceRight((he,de)=>{let ue=R2.JSONPath(de,"method"),pe;switch(ue){case"GET":pe=reality2_get_plugin.construct(de),pe&&he&&(pe.next={block:he});break;case"POST":pe=reality2_post_plugin.construct(de),pe&&he&&(pe.next={block:he});break;default:pe=he;break}return pe},null);ne.inputs.plugins={block:ae}}let le=R2.JSONPath(ie,"automations");if(le){let ae=le.reduceRight((he,de)=>{let ue=reality2_automation.construct(de);return ue&&he&&(ue.next={block:he}),ue},null);ne.inputs.automations={block:ae}}return ne}else return null}const reality2_sentant={shape:shape$4,process:process$4,construct:construct$5},shape$3={type:"reality2_swarm",message0:"SWARM %1",args0:[{type:"field_input",name:"name",check:"String",text:"name",tooltip:"Name of Swarm"}],message1:"%1",args1:[{type:"field_input",name:"description",check:"String",text:"description",tooltip:"Swarm description"}],message2:"%1",args2:[{type:"input_statement",name:"sentants",check:["reality2_sentant"]}],colour:20,tooltip:"A swarm of Sentient Digital Agents, otherwise known as Sentants or Bees.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$3(ie,te){var ne={};ne.name=ie.getFieldValue("name"),ie.getFieldValue("description")!==""&&(ne.description=ie.getFieldValue("description"));const re=te.statementToCode(ie,"sentants");return re!=""&&(ne.sentants=splitConcatenatedJSON(re,!1).map(oe=>oe.sentant)),JSON.stringify({swarm:ne})}function construct$4(ie){let te={kind:"BLOCK",type:"reality2_swarm",fields:{name:R2.JSONPath(ie,"name"),description:R2.JSONPath(ie,"description")?R2.JSONPath(ie,"description"):""},inputs:{sentants:{}}},ne=R2.JSONPath(ie,"sentants");if(ne){let re=ne.reduceRight((oe,le)=>{let ae=reality2_sentant.construct(le);return ae&&oe&&(ae.next={block:oe}),ae},null);te.inputs.sentants={block:re}}return te}const reality2_swarm={shape:shape$3,process:process$3,construct:construct$4},shape$2={type:"reality2_action_set_calculation",message0:"calc %1",args0:[{type:"field_input",name:"value",check:"String",text:""}],colour:300,output:"Json",tooltip:"An expression in a string in reverse polish format.  So to add 1 and 2, for example, that would '1 2 +'.  To add 1 and 2, then multiply by 3 would be '1 2 + 3 *'.  Numbers from the data flow can be used by putting two underscores on either side, for example: '__answer__'.  Therefore, to add 2 to 'answer' would be 'answer 2 +'",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process$2(ie,te){const ne=ie.getFieldValue("value"),oe={expr:ne===""?null:R2.ToJSON(ne)};return[JSON.stringify(oe),99]}function construct$3(ie){return ie?{kind:"BLOCK",type:"reality2_action_set_calculation",fields:{value:R2.ToSimple(R2.JSONPath(ie,"expr"))}}:null}const reality2_action_set_calculation={shape:shape$2,process:process$2,construct:construct$3},shape$1={type:"reality2_action_set_calc_unary",message0:"%2 ( %1 )",args0:[{type:"input_value",name:"value1"},{type:"field_dropdown",name:"operator",options:[["-","-"],["!","!"],["acos","acos"],["acosh","acosh"],["asin","asin"],["asinh","asinh"],["atan","atan"],["atanh","atanh"],["ceil","ceil"],["cos","cos"],["cosh","cosh"],["exp","exp"],["floor","floor"],["log","log"],["log10","log10"],["log2","log2"],["sin","sin"],["sinh","sinh"],["sqrt","sqrt"],["tan","tan"],["tanh","tanh"],["latlong","latlong"]]}],colour:300,output:"Json",tooltip:"An unary expression",helpUrl:"https://github.com/reality-two/reality2-documentation",inputsInline:!0};function process$1(ie,te){const ne=te.valueToCode(ie,"value1",99),re=ie.getFieldValue("operator"),oe=ne===""?null:R2.ToJSON(ne),le=R2.JSONPath(oe,"expr")?R2.JSONPath(oe,"expr"):oe;let ae={};return ae[re]=[le],[JSON.stringify({expr:ae}),99]}function construct$2(ie){if(ie){const te=Object.keys(ie)[0],ne=ie[te];if(ne.length==1){let re={kind:"BLOCK",type:"reality2_action_set_calc_unary",fields:{operator:te},inputs:{value1:{}}};return typeof ne[0]=="object"?re.inputs.value1={block:construct$2(ne[0])}:re.inputs.value1={block:reality2_action_set_value.construct(ne[0])},re}else if(ne.length==2){let re={kind:"BLOCK",type:"reality2_action_set_calc_binary",fields:{operator:te},inputs:{value1:{},value2:{}}};return typeof ne[0]=="object"?re.inputs.value1={block:construct$2(ne[0])}:re.inputs.value1={block:reality2_action_set_value.construct(ne[0])},typeof ne[1]=="object"?re.inputs.value2={block:construct$2(ne[1])}:re.inputs.value2={block:reality2_action_set_value.construct(ne[1])},re}else return null}else return null}const reality2_action_set_calc_unary={shape:shape$1,process:process$1,construct:construct$2},shape={type:"ai_reality2_vars_delete",message0:"delete %1",args0:[{type:"field_input",name:"key",check:"String",text:""}],previousStatement:null,nextStatement:null,colour:360,tooltip:"Delete a persistent variable.",helpUrl:"https://github.com/reality-two/reality2-documentation"};function process(ie,te){const re={plugin:"ai.reality2.vars",command:"delete",parameters:{key:ie.getFieldValue("key")}};return JSON.stringify(re)}function construct$1(ie){return ie?{kind:"BLOCK",type:"ai_reality2_vars_delete",fields:{key:R2.JSONPath(ie,"parameters.key")}}:null}const ai_reality2_vars_delete={shape,process,construct:construct$1},kind="categoryToolbox",contents=[{kind:"category",colour:20,name:"Swarm",expanded:"true",contents:[{kind:"label",text:"A Swarm of Bees"},{kind:"block",type:"reality2_swarm"}]},{kind:"category",colour:50,name:"Bees",expanded:"true",contents:[{kind:"category",colour:50,name:"Bee",contents:[{kind:"label",text:"A Reality2 Bee"},{kind:"block",type:"reality2_sentant"}]},{kind:"category",colour:50,name:". . . Keys",contents:[{kind:"label",text:"Encryption and Decryption Keys"},{kind:"block",type:"reality2_encrypt_decrypt_keys"},{kind:"label",text:"An Antenna API Key"},{kind:"block",type:"reality2_key_value"}]},{kind:"category",colour:50,name:". . . Data",contents:[{kind:"label",text:"Number, Boolean, String or JSON Data"},{kind:"block",type:"reality2_data"}]}]},{kind:"category",colour:150,name:"Antennae",expanded:"true",contents:[{kind:"category",colour:150,name:"Antenna",contents:[{kind:"label",text:"Simple Antenna"},{kind:"block",type:"reality2_get_plugin"},{kind:"label",text:"Complex Antenna"},{kind:"block",type:"reality2_post_plugin"}]},{kind:"category",colour:150,name:". . . Header",contents:[{kind:"label",text:"Header Setting for use with Antenna"},{kind:"block",type:"reality2_plugin_header"}]},{kind:"category",colour:150,name:". . . Body",contents:[{kind:"label",text:"Body Setting for use with Antenna"},{kind:"block",type:"reality2_plugin_body"}]}]},{kind:"category",colour:200,name:"Behaviours",expanded:"true",contents:[{kind:"label",text:"A Bee Behaviour"},{kind:"block",type:"reality2_automation"}]},{kind:"sep",gap:"8"},{kind:"category",colour:250,name:"Decisions",expanded:"true",contents:[{kind:"category",colour:250,name:"Start",expanded:"true",contents:[{kind:"label",text:"Decision used once when Bee first starts"},{kind:"block",type:"reality2_start_transition_no_params"},{kind:"block",type:"reality2_start_transition_simple"}]},{kind:"category",colour:250,name:"Instruction",contents:[{kind:"label",text:"An Instruction, where state-of-mind is irrelevant"},{kind:"block",type:"reality2_simple_transition"},{kind:"block",type:"reality2_simple_transition_no_params"}]},{kind:"category",colour:250,name:"Event",contents:[{kind:"label",text:"State-of-mind + Event ==> new State-of-mind"},{kind:"block",type:"reality2_transition"},{kind:"block",type:"reality2_transition_no_params"}]},{kind:"category",colour:250,name:"Monitor",contents:[{kind:"label",text:"Monitor a Hive's internal activity"},{kind:"block",type:"reality2_monitor"}]},{kind:"category",colour:250,name:". . . Inputs",contents:[{kind:"label",text:"Additional Data to add to Flow with a Decision"},{kind:"block",type:"reality2_parameter"}]}]},{kind:"category",colour:300,name:"Tasks",expanded:"true",contents:[{kind:"category",colour:300,name:"Send",expanded:"true",contents:[{kind:"label",text:"Send Data Flow immediately"},{kind:"block",type:"reality2_action_send_now"},{kind:"block",type:"reality2_action_send_now_no_params"},{kind:"label",text:"Send Data Flow a bit later"},{kind:"block",type:"reality2_action_send"},{kind:"block",type:"reality2_action_send_no_params"},{kind:"label",text:"Send Data Flow to an Antenna"},{kind:"block",type:"reality2_action_send_plugin"},{kind:"block",type:"reality2_action_send_plugin_no_params"}]},{kind:"category",colour:300,name:"Set",expanded:"true",contents:[{kind:"label",text:"Clear Data Flow Variable"},{kind:"block",type:"reality2_action_set_clear"},{kind:"label",text:"Set Data Flow Variable"},{kind:"block",type:"reality2_action_set"},{kind:"label",text:"Pick Value from Sentant Data"},{kind:"block",type:"reality2_action_set_data"},{kind:"label",text:"Pick Value from within a JSON structure"},{kind:"block",type:"reality2_action_set_jsonpath"},{kind:"label",text:"Calculate"},{kind:"block",type:"reality2_action_set_calc_unary"},{kind:"block",type:"reality2_action_set_calc_binary"},{kind:"label",text:"A Number, Boolean, String or JSON"},{kind:"block",type:"reality2_action_set_value"},{kind:"label",text:"A Variable"},{kind:"block",type:"reality2_action_set_value"}]},{kind:"category",colour:300,name:"Signal",expanded:"true",contents:[{kind:"label",text:"Signal Data Flow to watching devices"},{kind:"block",type:"reality2_action_signal"},{kind:"block",type:"reality2_action_signal_no_params"}]},{kind:"category",colour:300,name:"Test",expanded:"true",contents:[{kind:"label",text:"Send event depending on result of Test"},{kind:"block",type:"reality2_action_test"},{kind:"block",type:"reality2_action_test_no_params"},{kind:"block",type:"reality2_action_test_simple"},{kind:"label",text:"Evaluate for Test"},{kind:"block",type:"reality2_action_set_calc_unary"},{kind:"block",type:"reality2_action_set_calc_binary"},{kind:"label",text:"A Number, Boolean, String or JSON"},{kind:"block",type:"reality2_action_set_value"},{kind:"label",text:"A Variable"},{kind:"block",type:"reality2_action_set_value"}]},{kind:"category",colour:300,name:"Debug",expanded:"true",contents:[{kind:"label",text:"Signal Data Flow with a debug event"},{kind:"block",type:"reality2_action_debug"}]},{kind:"category",colour:300,name:". . . Parameters",expanded:"true",contents:[{kind:"label",text:"Additional Data to add to Flow for Tasks"},{kind:"block",type:"reality2_action_parameter"}]},{kind:"sep",gap:"32"},{kind:"category",colour:360,name:"Variables",expanded:"true",contents:[{kind:"label",text:"Persistent Variables"},{kind:"block",type:"ai_reality2_vars_set"},{kind:"block",type:"ai_reality2_vars_set_no_value"},{kind:"block",type:"ai_reality2_vars_get"},{kind:"block",type:"ai_reality2_vars_all"},{kind:"block",type:"ai_reality2_vars_delete"},{kind:"block",type:"ai_reality2_vars_clear"}]},{kind:"category",colour:360,name:"Geospatial",expanded:"true",contents:[{kind:"label",text:"Geospatial Capabilities"},{kind:"block",type:"ai_reality2_geospatial_set"},{kind:"block",type:"ai_reality2_geospatial_set_geohash"},{kind:"block",type:"ai_reality2_geospatial_set_radius"},{kind:"block",type:"ai_reality2_geospatial_set_simple"},{kind:"block",type:"ai_reality2_geospatial_get"},{kind:"block",type:"ai_reality2_geospatial_search"},{kind:"block",type:"ai_reality2_geospatial_remove"}]},{kind:"category",colour:360,name:"Storage",expanded:"true",contents:[{kind:"label",text:"Data Flow Storage"},{kind:"block",type:"ai_reality2_backup_save"},{kind:"block",type:"ai_reality2_backup_load"},{kind:"block",type:"ai_reality2_backup_delete"}]}]}],toolbox={kind,contents};function get_each_context(ie,te,ne){const re=ie.slice();return re[40]=te[ne],re}function create_default_slot_34$1(ie){let te;return{c(){te=text$2("YAML  ")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_33$1(ie){let te;return{c(){te=text$2("JSON")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_32$1(ie){let te;return{c(){te=text$2("key")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_31$1(ie){let te;return{c(){te=text$2("value")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_30$1(ie){let te,ne,re,oe;return te=new Table_Col({props:{head:!0,$$slots:{default:[create_default_slot_32$1]},$$scope:{ctx:ie}}}),re=new Table_Col({props:{head:!0,$$slots:{default:[create_default_slot_31$1]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment)},m(le,ae){mount_component(te,le,ae),insert(le,ne,ae),mount_component(re,le,ae),oe=!0},p(le,ae){const he={};ae[1]&4096&&(he.$$scope={dirty:ae,ctx:le}),te.$set(he);const de={};ae[1]&4096&&(de.$$scope={dirty:ae,ctx:le}),re.$set(de)},i(le){oe||(transition_in(te.$$.fragment,le),transition_in(re.$$.fragment,le),oe=!0)},o(le){transition_out(te.$$.fragment,le),transition_out(re.$$.fragment,le),oe=!1},d(le){le&&detach(ne),destroy_component(te,le),destroy_component(re,le)}}}function create_default_slot_29$1(ie){let te,ne;return te=new Table_Row({props:{$$slots:{default:[create_default_slot_30$1]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe[1]&4096&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_28$1(ie){let te=ie[40]+"",ne;return{c(){ne=text$2(te)},m(re,oe){insert(re,ne,oe)},p(re,oe){oe[0]&1&&te!==(te=re[40]+"")&&set_data(ne,te)},d(re){re&&detach(ne)}}}function create_default_slot_27$1(ie){let te=ie[0][ie[40]]+"",ne;return{c(){ne=text$2(te)},m(re,oe){insert(re,ne,oe)},p(re,oe){oe[0]&1&&te!==(te=re[0][re[40]]+"")&&set_data(ne,te)},d(re){re&&detach(ne)}}}function create_default_slot_26$1(ie){let te,ne,re,oe,le;return te=new Table_Col({props:{$$slots:{default:[create_default_slot_28$1]},$$scope:{ctx:ie}}}),re=new Table_Col({props:{$$slots:{default:[create_default_slot_27$1]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment),oe=space()},m(ae,he){mount_component(te,ae,he),insert(ae,ne,he),mount_component(re,ae,he),insert(ae,oe,he),le=!0},p(ae,he){const de={};he[0]&1|he[1]&4096&&(de.$$scope={dirty:he,ctx:ae}),te.$set(de);const ue={};he[0]&1|he[1]&4096&&(ue.$$scope={dirty:he,ctx:ae}),re.$set(ue)},i(ae){le||(transition_in(te.$$.fragment,ae),transition_in(re.$$.fragment,ae),le=!0)},o(ae){transition_out(te.$$.fragment,ae),transition_out(re.$$.fragment,ae),le=!1},d(ae){ae&&(detach(ne),detach(oe)),destroy_component(te,ae),destroy_component(re,ae)}}}function create_each_block(ie){let te,ne;return te=new Table_Row({props:{$$slots:{default:[create_default_slot_26$1]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe[0]&1|oe[1]&4096&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_25$1(ie){let te,ne,re=ensure_array_like(Object.keys(ie[0])),oe=[];for(let ae=0;ae<re.length;ae+=1)oe[ae]=create_each_block(get_each_context(ie,re,ae));const le=ae=>transition_out(oe[ae],1,1,()=>{oe[ae]=null});return{c(){for(let ae=0;ae<oe.length;ae+=1)oe[ae].c();te=empty$1()},m(ae,he){for(let de=0;de<oe.length;de+=1)oe[de]&&oe[de].m(ae,he);insert(ae,te,he),ne=!0},p(ae,he){if(he[0]&1){re=ensure_array_like(Object.keys(ae[0]));let de;for(de=0;de<re.length;de+=1){const ue=get_each_context(ae,re,de);oe[de]?(oe[de].p(ue,he),transition_in(oe[de],1)):(oe[de]=create_each_block(ue),oe[de].c(),transition_in(oe[de],1),oe[de].m(te.parentNode,te))}for(group_outros(),de=re.length;de<oe.length;de+=1)le(de);check_outros()}},i(ae){if(!ne){for(let he=0;he<re.length;he+=1)transition_in(oe[he]);ne=!0}},o(ae){oe=oe.filter(Boolean);for(let he=0;he<oe.length;he+=1)transition_out(oe[he]);ne=!1},d(ae){ae&&detach(te),destroy_each(oe,ae)}}}function create_default_slot_24$1(ie){let te,ne,re,oe;return te=new Table_Head({props:{$$slots:{default:[create_default_slot_29$1]},$$scope:{ctx:ie}}}),re=new Table_Body({props:{$$slots:{default:[create_default_slot_25$1]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment)},m(le,ae){mount_component(te,le,ae),insert(le,ne,ae),mount_component(re,le,ae),oe=!0},p(le,ae){const he={};ae[1]&4096&&(he.$$scope={dirty:ae,ctx:le}),te.$set(he);const de={};ae[0]&1|ae[1]&4096&&(de.$$scope={dirty:ae,ctx:le}),re.$set(de)},i(le){oe||(transition_in(te.$$.fragment,le),transition_in(re.$$.fragment,le),oe=!0)},o(le){transition_out(te.$$.fragment,le),transition_out(re.$$.fragment,le),oe=!1},d(le){le&&detach(ne),destroy_component(te,le),destroy_component(re,le)}}}function create_default_slot_23$1(ie){let te;return{c(){te=text$2("generate encryption and decryption keys")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_22$1(ie){let te;return{c(){te=text$2("Save Variables")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_21$2(ie){let te,ne,re,oe;return te=new Button({props:{ui:!0,inverted:!0,blue:!0,"data-variation":"wide","data-tooltip":"Generate encryption keys.  Use the same keys between subsequent versions of a Bee to ensure access to saved data.",$$slots:{default:[create_default_slot_23$1]},$$scope:{ctx:ie}}}),te.$on("click",ie[9]),re=new Button({props:{ui:!0,inverted:!0,green:!0,$$slots:{default:[create_default_slot_22$1]},$$scope:{ctx:ie}}}),re.$on("click",ie[18]),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment)},m(le,ae){mount_component(te,le,ae),insert(le,ne,ae),mount_component(re,le,ae),oe=!0},p(le,ae){const he={};ae[1]&4096&&(he.$$scope={dirty:ae,ctx:le}),te.$set(he);const de={};ae[1]&4096&&(de.$$scope={dirty:ae,ctx:le}),re.$set(de)},i(le){oe||(transition_in(te.$$.fragment,le),transition_in(re.$$.fragment,le),oe=!0)},o(le){transition_out(te.$$.fragment,le),transition_out(re.$$.fragment,le),oe=!1},d(le){le&&detach(ne),destroy_component(te,le),destroy_component(re,le)}}}function create_if_block$2(ie){let te;function ne(le,ae){return le[6][0]==="json"?create_if_block_1$2:create_else_block}let re=ne(ie),oe=re(ie);return{c(){oe.c(),te=empty$1()},m(le,ae){oe.m(le,ae),insert(le,te,ae)},p(le,ae){re===(re=ne(le))&&oe?oe.p(le,ae):(oe.d(1),oe=re(le),oe&&(oe.c(),oe.m(te.parentNode,te)))},d(le){le&&detach(te),oe.d(le)}}}function create_else_block(ie){let te=`
`+jsYaml.dump(ie[5]),ne;return{c(){ne=text$2(te)},m(re,oe){insert(re,ne,oe)},p(re,oe){oe[0]&32&&te!==(te=`
`+jsYaml.dump(re[5]))&&set_data(ne,te)},d(re){re&&detach(ne)}}}function create_if_block_1$2(ie){let te=`
`+JSON.stringify(ie[5],null,2),ne;return{c(){ne=text$2(te)},m(re,oe){insert(re,ne,oe)},p(re,oe){oe[0]&32&&te!==(te=`
`+JSON.stringify(re[5],null,2))&&set_data(ne,te)},d(re){re&&detach(ne)}}}function create_default_slot_20$2(ie){let te,ne,re,oe,le,ae,he,de,ue,pe,fe,ge,$e,Te,Ee,Se,ve,ke=Object.keys(ie[5]).length!==0,Re,Ne;ne=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_34$1]},$$scope:{ctx:ie}}});function xe(Ae){ie[17](Ae)}let ze={ui:!0,toggle:!0,large:!0,inverted:!0,value:"json",label:" ",grey:!0};ie[6]!==void 0&&(ze.group=ie[6]),re=new Checkbox({props:ze}),binding_callbacks.push(()=>bind(re,"group",xe)),le=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_33$1]},$$scope:{ctx:ie}}}),he=new Divider({props:{ui:!0,inverted:!0}}),ue=new Table({props:{ui:!0,inverted:!0,$$slots:{default:[create_default_slot_24$1]},$$scope:{ctx:ie}}}),fe=new Buttons({props:{ui:!0,fluid:!0,horizontal:!0,$$slots:{default:[create_default_slot_21$2]},$$scope:{ctx:ie}}}),$e=new Divider({props:{ui:!0,inverted:!0}});let Me=ke&&create_if_block$2(ie);return{c(){te=element("div"),create_component(ne.$$.fragment),create_component(re.$$.fragment),create_component(le.$$.fragment),ae=space(),create_component(he.$$.fragment),de=space(),create_component(ue.$$.fragment),pe=space(),create_component(fe.$$.fragment),ge=space(),create_component($e.$$.fragment),Te=space(),Ee=element("div"),Se=element("pre"),ve=text$2("                "),Me&&Me.c(),Re=text$2(`
            `),set_style(te,"text-align","center"),set_style(Se,"text-align","left"),attr(Ee,"class","ui scrollable"),attr(Ee,"id","codeDiv"),set_style(Ee,"text-align","left"),set_style(Ee,"height",ie[8]),set_style(Ee,"overflow-y","auto"),set_style(Ee,"word-wrap","break-word")},m(Ae,Qe){insert(Ae,te,Qe),mount_component(ne,te,null),mount_component(re,te,null),mount_component(le,te,null),insert(Ae,ae,Qe),mount_component(he,Ae,Qe),insert(Ae,de,Qe),mount_component(ue,Ae,Qe),insert(Ae,pe,Qe),mount_component(fe,Ae,Qe),insert(Ae,ge,Qe),mount_component($e,Ae,Qe),insert(Ae,Te,Qe),insert(Ae,Ee,Qe),append$2(Ee,Se),append$2(Se,ve),Me&&Me.m(Se,null),append$2(Se,Re),Ne=!0},p(Ae,Qe){const ht={};Qe[1]&4096&&(ht.$$scope={dirty:Qe,ctx:Ae}),ne.$set(ht);const Pe={};!oe&&Qe[0]&64&&(oe=!0,Pe.group=Ae[6],add_flush_callback(()=>oe=!1)),re.$set(Pe);const _t={};Qe[1]&4096&&(_t.$$scope={dirty:Qe,ctx:Ae}),le.$set(_t);const rt={};Qe[0]&1|Qe[1]&4096&&(rt.$$scope={dirty:Qe,ctx:Ae}),ue.$set(rt);const Ke={};Qe[0]&1|Qe[1]&4096&&(Ke.$$scope={dirty:Qe,ctx:Ae}),fe.$set(Ke),Qe[0]&32&&(ke=Object.keys(Ae[5]).length!==0),ke?Me?Me.p(Ae,Qe):(Me=create_if_block$2(Ae),Me.c(),Me.m(Se,Re)):Me&&(Me.d(1),Me=null),(!Ne||Qe[0]&256)&&set_style(Ee,"height",Ae[8])},i(Ae){Ne||(transition_in(ne.$$.fragment,Ae),transition_in(re.$$.fragment,Ae),transition_in(le.$$.fragment,Ae),transition_in(he.$$.fragment,Ae),transition_in(ue.$$.fragment,Ae),transition_in(fe.$$.fragment,Ae),transition_in($e.$$.fragment,Ae),Ne=!0)},o(Ae){transition_out(ne.$$.fragment,Ae),transition_out(re.$$.fragment,Ae),transition_out(le.$$.fragment,Ae),transition_out(he.$$.fragment,Ae),transition_out(ue.$$.fragment,Ae),transition_out(fe.$$.fragment,Ae),transition_out($e.$$.fragment,Ae),Ne=!1},d(Ae){Ae&&(detach(te),detach(ae),detach(de),detach(pe),detach(ge),detach(Te),detach(Ee)),destroy_component(ne),destroy_component(re),destroy_component(le),destroy_component(he,Ae),destroy_component(ue,Ae),destroy_component(fe,Ae),destroy_component($e,Ae),Me&&Me.d()}}}function create_default_slot_19$2(ie){let te,ne;return te=new Segment({props:{ui:!0,attached:!0,inverted:!0,style:"text-align: left; background-color: #444444; height:100%",$$slots:{default:[create_default_slot_20$2]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe[0]&353|oe[1]&4096&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_18$2(ie){let te;return{c(){te=element("div"),attr(te,"id","blocklyDiv"),set_style(te,"height",ie[7]),set_style(te,"width","100%")},m(ne,re){insert(ne,te,re)},p(ne,re){re[0]&128&&set_style(te,"height",ne[7])},d(ne){ne&&detach(te)}}}function create_default_slot_17$2(ie){let te;return{c(){te=text$2("Name your Swarm")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_16$2(ie){let te,ne,re;function oe(ae){ie[19](ae)}let le={text:!0,placeholder:"Swarm name..."};return ie[3]!==void 0&&(le.value=ie[3]),te=new Input$2({props:le}),binding_callbacks.push(()=>bind(te,"value",oe)),{c(){create_component(te.$$.fragment)},m(ae,he){mount_component(te,ae,he),re=!0},p(ae,he){const de={};!ne&&he[0]&8&&(ne=!0,de.value=ae[3],add_flush_callback(()=>ne=!1)),te.$set(de)},i(ae){re||(transition_in(te.$$.fragment,ae),re=!0)},o(ae){transition_out(te.$$.fragment,ae),re=!1},d(ae){destroy_component(te,ae)}}}function create_default_slot_15$2(ie){let te,ne;return te=new Input$2({props:{ui:!0,fluid:!0,$$slots:{default:[create_default_slot_16$2]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe[0]&8|oe[1]&4096&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_14$2(ie){let te,ne;return te=new Table_Col({props:{$$slots:{default:[create_default_slot_15$2]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe[0]&8|oe[1]&4096&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_13$3(ie){let te,ne,re;function oe(ae){ie[20](ae)}let le={text:!0,placeholder:"Optional Description"};return ie[4]!==void 0&&(le.value=ie[4]),te=new Input$2({props:le}),binding_callbacks.push(()=>bind(te,"value",oe)),{c(){create_component(te.$$.fragment)},m(ae,he){mount_component(te,ae,he),re=!0},p(ae,he){const de={};!ne&&he[0]&16&&(ne=!0,de.value=ae[4],add_flush_callback(()=>ne=!1)),te.$set(de)},i(ae){re||(transition_in(te.$$.fragment,ae),re=!0)},o(ae){transition_out(te.$$.fragment,ae),re=!1},d(ae){destroy_component(te,ae)}}}function create_default_slot_12$4(ie){let te,ne;return te=new Input$2({props:{ui:!0,fluid:!0,$$slots:{default:[create_default_slot_13$3]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe[0]&16|oe[1]&4096&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_11$4(ie){let te,ne;return te=new Table_Col({props:{$$slots:{default:[create_default_slot_12$4]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe[0]&16|oe[1]&4096&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_10$4(ie){let te,ne,re,oe;return te=new Table_Row({props:{$$slots:{default:[create_default_slot_14$2]},$$scope:{ctx:ie}}}),re=new Table_Row({props:{$$slots:{default:[create_default_slot_11$4]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment)},m(le,ae){mount_component(te,le,ae),insert(le,ne,ae),mount_component(re,le,ae),oe=!0},p(le,ae){const he={};ae[0]&8|ae[1]&4096&&(he.$$scope={dirty:ae,ctx:le}),te.$set(he);const de={};ae[0]&16|ae[1]&4096&&(de.$$scope={dirty:ae,ctx:le}),re.$set(de)},i(le){oe||(transition_in(te.$$.fragment,le),transition_in(re.$$.fragment,le),oe=!0)},o(le){transition_out(te.$$.fragment,le),transition_out(re.$$.fragment,le),oe=!1},d(le){le&&detach(ne),destroy_component(te,le),destroy_component(re,le)}}}function create_default_slot_9$5(ie){let te,ne;return te=new Table_Body({props:{$$slots:{default:[create_default_slot_10$4]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe[0]&24|oe[1]&4096&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_8$5(ie){let te,ne;return te=new Table({props:{ui:!0,$$slots:{default:[create_default_slot_9$5]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe[0]&24|oe[1]&4096&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_7$5(ie){let te;return{c(){te=text$2("Cancel")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_6$5(ie){let te;return{c(){te=text$2("OK")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_5$5(ie){let te,ne,re,oe;return te=new Button({props:{ui:!0,red:!0,$$slots:{default:[create_default_slot_7$5]},$$scope:{ctx:ie}}}),te.$on("click",ie[21]),re=new Button({props:{ui:!0,green:!0,$$slots:{default:[create_default_slot_6$5]},$$scope:{ctx:ie}}}),re.$on("click",ie[22]),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment)},m(le,ae){mount_component(te,le,ae),insert(le,ne,ae),mount_component(re,le,ae),oe=!0},p(le,ae){const he={};ae[1]&4096&&(he.$$scope={dirty:ae,ctx:le}),te.$set(he);const de={};ae[1]&4096&&(de.$$scope={dirty:ae,ctx:le}),re.$set(de)},i(le){oe||(transition_in(te.$$.fragment,le),transition_in(re.$$.fragment,le),oe=!0)},o(le){transition_out(te.$$.fragment,le),transition_out(re.$$.fragment,le),oe=!1},d(le){le&&detach(ne),destroy_component(te,le),destroy_component(re,le)}}}function create_default_slot_4$5(ie){let te,ne,re,oe,le,ae,he,de;return te=new Icon({props:{close:!0}}),re=new Header({props:{$$slots:{default:[create_default_slot_17$2]},$$scope:{ctx:ie}}}),le=new Content({props:{$$slots:{default:[create_default_slot_8$5]},$$scope:{ctx:ie}}}),he=new Actions({props:{$$slots:{default:[create_default_slot_5$5]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment),oe=space(),create_component(le.$$.fragment),ae=space(),create_component(he.$$.fragment)},m(ue,pe){mount_component(te,ue,pe),insert(ue,ne,pe),mount_component(re,ue,pe),insert(ue,oe,pe),mount_component(le,ue,pe),insert(ue,ae,pe),mount_component(he,ue,pe),de=!0},p(ue,pe){const fe={};pe[1]&4096&&(fe.$$scope={dirty:pe,ctx:ue}),re.$set(fe);const ge={};pe[0]&24|pe[1]&4096&&(ge.$$scope={dirty:pe,ctx:ue}),le.$set(ge);const $e={};pe[1]&4096&&($e.$$scope={dirty:pe,ctx:ue}),he.$set($e)},i(ue){de||(transition_in(te.$$.fragment,ue),transition_in(re.$$.fragment,ue),transition_in(le.$$.fragment,ue),transition_in(he.$$.fragment,ue),de=!0)},o(ue){transition_out(te.$$.fragment,ue),transition_out(re.$$.fragment,ue),transition_out(le.$$.fragment,ue),transition_out(he.$$.fragment,ue),de=!1},d(ue){ue&&(detach(ne),detach(oe),detach(ae)),destroy_component(te,ue),destroy_component(re,ue),destroy_component(le,ue),destroy_component(he,ue)}}}function create_default_slot_3$5(ie){let te,ne;return te=new Icon({props:{table:!0}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p:noop$2,i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_2$5(ie){let te,ne;return te=new Icon({props:{folder:!0,open:!0,outline:!0}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p:noop$2,i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_1$5(ie){let te,ne;return te=new Icon({props:{share:!0,square:!0}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p:noop$2,i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot$6(ie){let te,ne;return te=new Icon({props:{code:!0}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p:noop$2,i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_fragment$6(ie){let te,ne,re,oe,le,ae,he,de,ue,pe,fe,ge,$e,Te;return te=new Flyout$2({props:{ui:!0,very:!0,wide:!0,id:"code_space",$$slots:{default:[create_default_slot_19$2]},$$scope:{ctx:ie}}}),re=new Pusher({props:{$$slots:{default:[create_default_slot_18$2]},$$scope:{ctx:ie}}}),le=new Modal({props:{ui:!0,small:!0,id:"swarm_name",$$slots:{default:[create_default_slot_4$5]},$$scope:{ctx:ie}}}),he=new Button({props:{ui:!0,icon:!0,popup:!0,large:!0,"data-tooltip":"Load keys to use with your Bees.","data-position":"top right",style:"position: absolute; top: 200px; right: 45px; background-color: #696969",$$slots:{default:[create_default_slot_3$5]},$$scope:{ctx:ie}}}),he.$on("click",ie[23]),ue=new Button({props:{ui:!0,icon:!0,large:!0,popup:!0,"data-tooltip":"Load Swarms, Bees, Antennae or Behaviours from a file.","data-position":"top right",style:"position: absolute; top: 260px; right: 45px; background-color: #696969",$$slots:{default:[create_default_slot_2$5]},$$scope:{ctx:ie}}}),ue.$on("click",ie[24]),fe=new Button({props:{ui:!0,icon:!0,large:!0,popup:!0,"data-tooltip":"Save Swarms, Bees, Antennae or Behaviours to a file.","data-position":"top right",style:"position: absolute; top: 320px; right: 45px; background-color: #696969",$$slots:{default:[create_default_slot_1$5]},$$scope:{ctx:ie}}}),fe.$on("click",ie[10]),$e=new Button({props:{ui:!0,icon:!0,large:!0,popup:!0,"data-tooltip":"Convert to JSON or YAML and show.","data-position":"top right",style:"position: absolute; top: 440px; right: 45px; background-color: #696969",$$slots:{default:[create_default_slot$6]},$$scope:{ctx:ie}}}),$e.$on("click",ie[25]),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment),oe=space(),create_component(le.$$.fragment),ae=space(),create_component(he.$$.fragment),de=space(),create_component(ue.$$.fragment),pe=space(),create_component(fe.$$.fragment),ge=space(),create_component($e.$$.fragment)},m(Ee,Se){mount_component(te,Ee,Se),insert(Ee,ne,Se),mount_component(re,Ee,Se),insert(Ee,oe,Se),mount_component(le,Ee,Se),insert(Ee,ae,Se),mount_component(he,Ee,Se),insert(Ee,de,Se),mount_component(ue,Ee,Se),insert(Ee,pe,Se),mount_component(fe,Ee,Se),insert(Ee,ge,Se),mount_component($e,Ee,Se),Te=!0},p(Ee,Se){const ve={};Se[0]&353|Se[1]&4096&&(ve.$$scope={dirty:Se,ctx:Ee}),te.$set(ve);const ke={};Se[0]&128|Se[1]&4096&&(ke.$$scope={dirty:Se,ctx:Ee}),re.$set(ke);const Re={};Se[0]&24|Se[1]&4096&&(Re.$$scope={dirty:Se,ctx:Ee}),le.$set(Re);const Ne={};Se[1]&4096&&(Ne.$$scope={dirty:Se,ctx:Ee}),he.$set(Ne);const xe={};Se[1]&4096&&(xe.$$scope={dirty:Se,ctx:Ee}),ue.$set(xe);const ze={};Se[1]&4096&&(ze.$$scope={dirty:Se,ctx:Ee}),fe.$set(ze);const Me={};Se[1]&4096&&(Me.$$scope={dirty:Se,ctx:Ee}),$e.$set(Me)},i(Ee){Te||(transition_in(te.$$.fragment,Ee),transition_in(re.$$.fragment,Ee),transition_in(le.$$.fragment,Ee),transition_in(he.$$.fragment,Ee),transition_in(ue.$$.fragment,Ee),transition_in(fe.$$.fragment,Ee),transition_in($e.$$.fragment,Ee),Te=!0)},o(Ee){transition_out(te.$$.fragment,Ee),transition_out(re.$$.fragment,Ee),transition_out(le.$$.fragment,Ee),transition_out(he.$$.fragment,Ee),transition_out(ue.$$.fragment,Ee),transition_out(fe.$$.fragment,Ee),transition_out($e.$$.fragment,Ee),Te=!1},d(Ee){Ee&&(detach(ne),detach(oe),detach(ae),detach(de),detach(pe),detach(ge)),destroy_component(te,Ee),destroy_component(re,Ee),destroy_component(le,Ee),destroy_component(he,Ee),destroy_component(ue,Ee),destroy_component(fe,Ee),destroy_component($e,Ee)}}}function instance$6(ie,te,ne){let re,oe,le,ae,{variables:he={}}=te,{savedState:de}=te,{construct_command:ue=""}=te,{incoming_data:pe=["json",""]}=te,fe,ge,$e,Te,Ee="",Se="",ve={callback:{},codeOnPage:{}},ke=[reality2_swarm.shape,reality2_sentant.shape,reality2_key_value.shape,reality2_data.shape,reality2_encrypt_decrypt_keys.shape,reality2_get_plugin.shape,reality2_post_plugin.shape,reality2_plugin_header.shape,reality2_plugin_body.shape,reality2_automation.shape,reality2_parameter.shape,reality2_transition.shape,reality2_transition_no_params.shape,reality2_start_transition.shape,reality2_start_transition_no_params.shape,reality2_start_transition_simple.shape,reality2_simple_transition.shape,reality2_simple_transition_no_params.shape,reality2_monitor.shape,reality2_action_set.shape,reality2_action_set_clear.shape,reality2_action_set_jsonpath.shape,reality2_action_set_data.shape,reality2_action_set_calculation.shape,reality2_action_set_calc_binary.shape,reality2_action_set_calc_unary.shape,reality2_action_set_value.shape,reality2_action_send.shape,reality2_action_send_no_params.shape,reality2_action_send_now.shape,reality2_action_send_now_no_params.shape,reality2_action_send_plugin.shape,reality2_action_send_plugin_no_params.shape,reality2_action_debug.shape,reality2_action_test.shape,reality2_action_test_no_params.shape,reality2_action_test_simple.shape,reality2_action_signal.shape,reality2_action_signal_no_params.shape,reality2_action_parameter.shape,ai_reality2_vars_set.shape,ai_reality2_vars_set_no_value.shape,ai_reality2_vars_get.shape,ai_reality2_vars_all.shape,ai_reality2_vars_delete.shape,ai_reality2_vars_clear.shape,ai_reality2_geospatial_set.shape,ai_reality2_geospatial_set_simple.shape,ai_reality2_geospatial_set_geohash.shape,ai_reality2_geospatial_set_radius.shape,ai_reality2_geospatial_get.shape,ai_reality2_geospatial_search.shape,ai_reality2_geospatial_remove.shape,ai_reality2_backup_save.shape,ai_reality2_backup_load.shape,ai_reality2_backup_delete.shape],Re={sentant:reality2_sentant.construct,swarm:reality2_swarm.construct,get_plugin:reality2_get_plugin.construct,post_plugin:reality2_post_plugin.construct,automation:reality2_automation.construct};function Ne(){const Et=window.innerHeight-90,Lt=document.getElementById("blocklyDiv"),Ut=document.getElementById("codeDiv");if(Lt&&Ut){const Bt=Ut.getBoundingClientRect().top,jt=Lt.getBoundingClientRect().top+Et;ne(8,oe=`${jt-Bt-30}px`)}ne(7,re=`${Et}px`)}onMount(()=>{if(defineBlocksWithJsonArray(ke),$e=inject("blocklyDiv",{toolbox,theme:Theme$1,renderer:"thrasos",zoom:{controls:!0,wheel:!1,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2,pinch:!0},grid:{spacing:20,length:3,colour:"#333",snap:!0},trashcan:!0}),Te=new distExports.Backpack($e,{allowEmptyBackpackOpen:!0,useFilledBackpackImage:!0,skipSerializerRegistration:!0,contextMenu:{emptyBackpack:!0,removeFromBackpack:!0,copyToBackpack:!0,copyAllToBackpack:!0,pasteAllToBackpack:!0,disablePreconditionChecks:!1}}),Te.init(),window.addEventListener("resize",Ne),Ne(),ne(1,fe=document.createElement("input")),ne(1,fe.type="file",fe),ne(1,fe.accept=".json, .yaml",fe),ne(1,fe.onchange=Lt=>{const Ut=Lt.target.files[0];var Bt=new FileReader;Bt.readAsText(Ut,"UTF-8"),Bt.onload=Ft=>{setTimeout(()=>{if(Ft!==null){var jt=Ft.target.result;if(jt!==null){if(Ut.type.includes("json")){var zt=JSON.parse(jt);Pe(zt)}else if(Ut.type.includes("yaml")){var zt=jsYaml.load(jt);Pe(zt)}}}},50)}},fe),ne(2,ge=document.createElement("input")),ne(2,ge.type="file",ge),ne(2,ge.onchange=Lt=>{var Ut=Lt.target.files[0],Bt=new FileReader;Bt.readAsText(Ut,"UTF-8"),Bt.onload=Ft=>{Ft!==null&&(ne(0,he=JSON.parse(Ft.target.result)),ht("Success","Variables loaded successfully","green"))}},ge),pe[1]!==""){if(pe[0]=="json"){var Et=JSON.parse(pe[1]);Pe(Et)}else if(pe[0]=="yaml"){var Et=jsYaml.load(pe[1]);Pe(Et)}ne(16,pe=["json",""])}setTimeout(()=>{svgResize($e)},0),javascriptGenerator.forBlock.reality2_swarm=reality2_swarm.process,javascriptGenerator.forBlock.reality2_sentant=reality2_sentant.process,javascriptGenerator.forBlock.reality2_encrypt_decrypt_keys=reality2_encrypt_decrypt_keys.process,javascriptGenerator.forBlock.reality2_get_plugin=reality2_get_plugin.process,javascriptGenerator.forBlock.reality2_post_plugin=reality2_post_plugin.process,javascriptGenerator.forBlock.reality2_plugin_header=reality2_plugin_header.process,javascriptGenerator.forBlock.reality2_plugin_body=reality2_plugin_body.process,javascriptGenerator.forBlock.reality2_key_value=reality2_key_value.process,javascriptGenerator.forBlock.reality2_data=reality2_data.process,javascriptGenerator.forBlock.reality2_automation=reality2_automation.process,javascriptGenerator.forBlock.reality2_parameter=reality2_parameter.process,javascriptGenerator.forBlock.reality2_transition=reality2_transition.process,javascriptGenerator.forBlock.reality2_transition_no_params=reality2_transition_no_params.process,javascriptGenerator.forBlock.reality2_start_transition=reality2_start_transition.process,javascriptGenerator.forBlock.reality2_start_transition_no_params=reality2_start_transition_no_params.process,javascriptGenerator.forBlock.reality2_start_transition_simple=reality2_start_transition_simple.process,javascriptGenerator.forBlock.reality2_simple_transition=reality2_simple_transition.process,javascriptGenerator.forBlock.reality2_simple_transition_no_params=reality2_simple_transition_no_params.process,javascriptGenerator.forBlock.reality2_monitor=reality2_monitor.process,javascriptGenerator.forBlock.reality2_action_set=reality2_action_set.process,javascriptGenerator.forBlock.reality2_action_set_clear=reality2_action_set_clear.process,javascriptGenerator.forBlock.reality2_action_set_jsonpath=reality2_action_set_jsonpath.process,javascriptGenerator.forBlock.reality2_action_set_data=reality2_action_set_data.process,javascriptGenerator.forBlock.reality2_action_set_calculation=reality2_action_set_calculation.process,javascriptGenerator.forBlock.reality2_action_set_calc_binary=reality2_action_set_calc_binary.process,javascriptGenerator.forBlock.reality2_action_set_calc_unary=reality2_action_set_calc_unary.process,javascriptGenerator.forBlock.reality2_action_set_value=reality2_action_set_value.process,javascriptGenerator.forBlock.reality2_action_send=reality2_action_send.process,javascriptGenerator.forBlock.reality2_action_send_no_params=reality2_action_send_no_params.process,javascriptGenerator.forBlock.reality2_action_send_now=reality2_action_send_now.process,javascriptGenerator.forBlock.reality2_action_send_now_no_params=reality2_action_send_now_no_params.process,javascriptGenerator.forBlock.reality2_action_send_plugin=reality2_action_send_plugin.process,javascriptGenerator.forBlock.reality2_action_send_plugin_no_params=reality2_action_send_plugin_no_params.process,javascriptGenerator.forBlock.reality2_action_debug=reality2_action_debug.process,javascriptGenerator.forBlock.reality2_action_test=reality2_action_test.process,javascriptGenerator.forBlock.reality2_action_test_no_params=reality2_action_test_no_params.process,javascriptGenerator.forBlock.reality2_action_test_simple=reality2_action_test_simple.process,javascriptGenerator.forBlock.reality2_action_signal=reality2_action_signal.process,javascriptGenerator.forBlock.reality2_action_signal_no_params=reality2_action_signal_no_params.process,javascriptGenerator.forBlock.reality2_action_parameter=reality2_action_parameter.process,javascriptGenerator.forBlock.ai_reality2_vars_set=ai_reality2_vars_set.process,javascriptGenerator.forBlock.ai_reality2_vars_set_no_value=ai_reality2_vars_set_no_value.process,javascriptGenerator.forBlock.ai_reality2_vars_get=ai_reality2_vars_get.process,javascriptGenerator.forBlock.ai_reality2_vars_all=ai_reality2_vars_all.process,javascriptGenerator.forBlock.ai_reality2_vars_delete=ai_reality2_vars_delete.process,javascriptGenerator.forBlock.ai_reality2_vars_clear=ai_reality2_vars_clear.process,javascriptGenerator.forBlock.ai_reality2_geospatial_set=ai_reality2_geospatial_set.process,javascriptGenerator.forBlock.ai_reality2_geospatial_set_simple=ai_reality2_geospatial_set_simple.process,javascriptGenerator.forBlock.ai_reality2_geospatial_set_geohash=ai_reality2_geospatial_set_geohash.process,javascriptGenerator.forBlock.ai_reality2_geospatial_set_radius=ai_reality2_geospatial_set_radius.process,javascriptGenerator.forBlock.ai_reality2_geospatial_get=ai_reality2_geospatial_get.process,javascriptGenerator.forBlock.ai_reality2_geospatial_search=ai_reality2_geospatial_search.process,javascriptGenerator.forBlock.ai_reality2_geospatial_remove=ai_reality2_geospatial_remove.process,javascriptGenerator.forBlock.ai_reality2_backup_save=ai_reality2_backup_save.process,javascriptGenerator.forBlock.ai_reality2_backup_load=ai_reality2_backup_load.process,javascriptGenerator.forBlock.ai_reality2_backup_delete=ai_reality2_backup_delete.process,setTimeout(()=>{typeof de=="object"&&(de.hasOwnProperty("backpack")&&Qe(de.backpack),de.hasOwnProperty("workspace")&&Me(de.workspace))},2)});function xe(){const Et=new Uint8Array(32);window.crypto.getRandomValues(Et);const Lt=btoa(String.fromCharCode(...Et));he&&(ne(0,he.__encryption_key__=Lt,he),ne(0,he.__decryption_key__=Lt,he))}function ze(){return serialization.workspaces.save($e)}function Me(Et){serialization.workspaces.load(Et,$e)}function Ae(){return Te.getContents()}function Qe(Et){Te.setContents(Et)}onDestroy(()=>{ne(15,de={workspace:ze(),backpack:Ae()}),window.removeEventListener("resize",Ne)});function ht(Et,Lt,Ut){behavior({type:"toast",settings:{title:Et,message:Lt,position:"top attached",class:"center aligned huge "+Ut,className:{toast:"ui message"}}})}function Pe(Et){if(R2.JSONPath(Et,"swarm"))Te.addItem(JSON.stringify(Re.swarm(R2.JSONPath(Et,"swarm")))),Te.open(),ht("Success","Swarm loaded into backpack","green");else if(R2.JSONPath(Et,"sentant"))Te.addItem(JSON.stringify(Re.sentant(R2.JSONPath(Et,"sentant")))),Te.open(),ht("Success","Bee loaded into backpack","green");else if(R2.JSONPath(Et,"plugin"))switch(R2.JSONPath(Et,"plugin.method")){case"GET":Te.addItem(JSON.stringify(Re.get_plugin(R2.JSONPath(Et,"plugin")))),Te.open(),ht("Success","Antenna loaded into backpack","green");break;case"POST":Te.addItem(JSON.stringify(Re.post_plugin(R2.JSONPath(Et,"plugin")))),Te.open(),ht("Success","Antenna loaded into backpack","green");break;default:ht("Problem","Incorrect format","red")}else R2.JSONPath(Et,"automation")?(Te.addItem(JSON.stringify(Re.automation(R2.JSONPath(Et,"automation")))),Te.open(),ht("Success","Behaviour loaded into backpack","green")):ht("Problem","Incorrect format","red")}function _t(){Ke(Et=>{if(Object.keys(Et).length!==0){ne(5,ae=Et);var Lt="definition";if(R2.JSONPath(ae,"swarm.name")?Lt=R2.JSONPath(ae,"swarm.name")+".swarm":R2.JSONPath(ae,"sentant.name")?Lt=R2.JSONPath(ae,"sentant.name")+".bee":R2.JSONPath(ae,"plugin.name")?Lt=R2.JSONPath(ae,"plugin.name")+".antenna":R2.JSONPath(ae,"automation.name")&&(Lt=R2.JSONPath(ae,"automation.name")+".behaviour"),le[0]==="json"){var Ut=JSON.stringify(ae);rt(Ut,Lt+".json")}else{var Bt=jsYaml.dump(ae);rt(Bt,Lt+".yaml")}}})}async function rt(Et,Lt){if(window.showSaveFilePicker)try{const Bt=await(await window.showSaveFilePicker({suggestedName:Lt,types:[{description:"Reality2 Files",accept:{"text/plain":[".json",".yaml",".toml"]}}]})).createWritable();await Bt.write(Et),await Bt.close(),ht("Success","Definition saved successfully","green")}catch(Ut){Ut.name==="AbortError"?ht("Status","Cancelled","blue"):ht("Problem","Could not save","red")}else{const Ut=new Blob([Et],{type:"text/plain"}),Bt=URL.createObjectURL(Ut),Ft=document.createElement("a");Ft.href=Bt,Ft.download=Lt,document.body.appendChild(Ft),Ft.click(),document.body.removeChild(Ft),URL.revokeObjectURL(Bt),ht("Success","Saved successfully","green")}}function Ke(Et){let Lt={},Ut={},Bt=!1,Ft=0,jt=splitConcatenatedJSON(javascriptGenerator.workspaceToCode($e),!1);if(jt.forEach(zt=>{zt.swarm?(Bt=!0,Lt=zt):zt.sentant&&Ft++}),!Bt&&Ft>1)ve.callback=Et,ve.codeOnPage=jt,behavior("swarm_name","show");else if(Bt&&Ft>0&&(Lt.swarm.sentants=[]),Bt)jt.forEach(zt=>{zt.sentant&&Lt.swarm.sentants.push(zt.sentant)}),Et(Lt);else if(jt.length>0){Lt=jt[0];const zt=Object.keys(Lt)[0];Ut[zt]=Lt[zt],Et(Ut)}else Et({})}function Je(Et){let Lt=ve.callback;if(Et){let Ut=ve.codeOnPage,Bt={swarm:{name:Ee,description:Se,sentants:[]}};Bt.swarm.sentants=[],Ut.forEach(Ft=>{Ft.sentant&&Bt.swarm.sentants.push(Ft.sentant)}),Lt(Bt)}else Lt({})}function qe(){Ke(Et=>ne(5,ae=Et))}function ct(Et){le=Et,ne(6,le)}const Le=()=>{rt(JSON.stringify(he),"variables.json")};function je(Et){Ee=Et,ne(3,Ee)}function pt(Et){Se=Et,ne(4,Se)}const Ot=()=>{behavior("swarm_name","hide"),Je(!1)},Ht=()=>{behavior({id:"swarm_name",commands:["hide"]}),Je(!0)},Ze=()=>{ge.click()},bt=()=>{fe.click()},Pt=()=>{qe(),behavior("code_space","toggle")};return ie.$$set=Et=>{"variables"in Et&&ne(0,he=Et.variables),"savedState"in Et&&ne(15,de=Et.savedState),"construct_command"in Et&&ne(14,ue=Et.construct_command),"incoming_data"in Et&&ne(16,pe=Et.incoming_data)},ie.$$.update=()=>{if(ie.$$.dirty[0]&16386&&ue){switch(ue){case"load":fe.click();break;case"save":_t();break;case"run":loadToNode();break;case"code":qe(),behavior("code_space","toggle");break;case"":break;default:ht("Problem","Unknown command","red")}ne(14,ue="")}},ne(7,re="800px"),ne(8,oe="300px"),ne(6,le=[]),ne(5,ae={}),[he,fe,ge,Ee,Se,ae,le,re,oe,xe,_t,rt,Je,qe,ue,de,pe,ct,Le,je,pt,Ot,Ht,Ze,bt,Pt]}class Construct extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$6,create_fragment$6,safe_not_equal,{variables:0,savedState:15,construct_command:14,incoming_data:16},null,[-1,-1])}}const scriptRel="modulepreload",assetsURL=function(ie){return"/"+ie},seen={},__vitePreload=function ie(te,ne,re){if(!ne||ne.length===0)return te();const oe=document.getElementsByTagName("link");return Promise.all(ne.map(le=>{if(le=assetsURL(le),le in seen)return;seen[le]=!0;const ae=le.endsWith(".css"),he=ae?'[rel="stylesheet"]':"";if(!!re)for(let pe=oe.length-1;pe>=0;pe--){const fe=oe[pe];if(fe.href===le&&(!ae||fe.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${le}"]${he}`))return;const ue=document.createElement("link");if(ue.rel=ae?"stylesheet":scriptRel,ae||(ue.as="script",ue.crossOrigin=""),ue.href=le,document.head.appendChild(ue),ae)return new Promise((pe,fe)=>{ue.addEventListener("load",pe),ue.addEventListener("error",()=>fe(new Error(`Unable to preload CSS for ${le}`)))})})).then(()=>te()).catch(le=>{const ae=new Event("vite:preloadError",{cancelable:!0});if(ae.payload=le,window.dispatchEvent(ae),!ae.defaultPrevented)throw le})};var dayjs_min={exports:{}};(function(ie,te){(function(ne,re){ie.exports=re()})(commonjsGlobal,function(){var ne=1e3,re=6e4,oe=36e5,le="millisecond",ae="second",he="minute",de="hour",ue="day",pe="week",fe="month",ge="quarter",$e="year",Te="date",Ee="Invalid Date",Se=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ve=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ke={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Ke){var Je=["th","st","nd","rd"],qe=Ke%100;return"["+Ke+(Je[(qe-20)%10]||Je[qe]||Je[0])+"]"}},Re=function(Ke,Je,qe){var ct=String(Ke);return!ct||ct.length>=Je?Ke:""+Array(Je+1-ct.length).join(qe)+Ke},Ne={s:Re,z:function(Ke){var Je=-Ke.utcOffset(),qe=Math.abs(Je),ct=Math.floor(qe/60),Le=qe%60;return(Je<=0?"+":"-")+Re(ct,2,"0")+":"+Re(Le,2,"0")},m:function Ke(Je,qe){if(Je.date()<qe.date())return-Ke(qe,Je);var ct=12*(qe.year()-Je.year())+(qe.month()-Je.month()),Le=Je.clone().add(ct,fe),je=qe-Le<0,pt=Je.clone().add(ct+(je?-1:1),fe);return+(-(ct+(qe-Le)/(je?Le-pt:pt-Le))||0)},a:function(Ke){return Ke<0?Math.ceil(Ke)||0:Math.floor(Ke)},p:function(Ke){return{M:fe,y:$e,w:pe,d:ue,D:Te,h:de,m:he,s:ae,ms:le,Q:ge}[Ke]||String(Ke||"").toLowerCase().replace(/s$/,"")},u:function(Ke){return Ke===void 0}},xe="en",ze={};ze[xe]=ke;var Me="$isDayjsObject",Ae=function(Ke){return Ke instanceof _t||!(!Ke||!Ke[Me])},Qe=function Ke(Je,qe,ct){var Le;if(!Je)return xe;if(typeof Je=="string"){var je=Je.toLowerCase();ze[je]&&(Le=je),qe&&(ze[je]=qe,Le=je);var pt=Je.split("-");if(!Le&&pt.length>1)return Ke(pt[0])}else{var Ot=Je.name;ze[Ot]=Je,Le=Ot}return!ct&&Le&&(xe=Le),Le||!ct&&xe},ht=function(Ke,Je){if(Ae(Ke))return Ke.clone();var qe=typeof Je=="object"?Je:{};return qe.date=Ke,qe.args=arguments,new _t(qe)},Pe=Ne;Pe.l=Qe,Pe.i=Ae,Pe.w=function(Ke,Je){return ht(Ke,{locale:Je.$L,utc:Je.$u,x:Je.$x,$offset:Je.$offset})};var _t=function(){function Ke(qe){this.$L=Qe(qe.locale,null,!0),this.parse(qe),this.$x=this.$x||qe.x||{},this[Me]=!0}var Je=Ke.prototype;return Je.parse=function(qe){this.$d=function(ct){var Le=ct.date,je=ct.utc;if(Le===null)return new Date(NaN);if(Pe.u(Le))return new Date;if(Le instanceof Date)return new Date(Le);if(typeof Le=="string"&&!/Z$/i.test(Le)){var pt=Le.match(Se);if(pt){var Ot=pt[2]-1||0,Ht=(pt[7]||"0").substring(0,3);return je?new Date(Date.UTC(pt[1],Ot,pt[3]||1,pt[4]||0,pt[5]||0,pt[6]||0,Ht)):new Date(pt[1],Ot,pt[3]||1,pt[4]||0,pt[5]||0,pt[6]||0,Ht)}}return new Date(Le)}(qe),this.init()},Je.init=function(){var qe=this.$d;this.$y=qe.getFullYear(),this.$M=qe.getMonth(),this.$D=qe.getDate(),this.$W=qe.getDay(),this.$H=qe.getHours(),this.$m=qe.getMinutes(),this.$s=qe.getSeconds(),this.$ms=qe.getMilliseconds()},Je.$utils=function(){return Pe},Je.isValid=function(){return this.$d.toString()!==Ee},Je.isSame=function(qe,ct){var Le=ht(qe);return this.startOf(ct)<=Le&&Le<=this.endOf(ct)},Je.isAfter=function(qe,ct){return ht(qe)<this.startOf(ct)},Je.isBefore=function(qe,ct){return this.endOf(ct)<ht(qe)},Je.$g=function(qe,ct,Le){return Pe.u(qe)?this[ct]:this.set(Le,qe)},Je.unix=function(){return Math.floor(this.valueOf()/1e3)},Je.valueOf=function(){return this.$d.getTime()},Je.startOf=function(qe,ct){var Le=this,je=!!Pe.u(ct)||ct,pt=Pe.p(qe),Ot=function(Bt,Ft){var jt=Pe.w(Le.$u?Date.UTC(Le.$y,Ft,Bt):new Date(Le.$y,Ft,Bt),Le);return je?jt:jt.endOf(ue)},Ht=function(Bt,Ft){return Pe.w(Le.toDate()[Bt].apply(Le.toDate("s"),(je?[0,0,0,0]:[23,59,59,999]).slice(Ft)),Le)},Ze=this.$W,bt=this.$M,Pt=this.$D,Et="set"+(this.$u?"UTC":"");switch(pt){case $e:return je?Ot(1,0):Ot(31,11);case fe:return je?Ot(1,bt):Ot(0,bt+1);case pe:var Lt=this.$locale().weekStart||0,Ut=(Ze<Lt?Ze+7:Ze)-Lt;return Ot(je?Pt-Ut:Pt+(6-Ut),bt);case ue:case Te:return Ht(Et+"Hours",0);case de:return Ht(Et+"Minutes",1);case he:return Ht(Et+"Seconds",2);case ae:return Ht(Et+"Milliseconds",3);default:return this.clone()}},Je.endOf=function(qe){return this.startOf(qe,!1)},Je.$set=function(qe,ct){var Le,je=Pe.p(qe),pt="set"+(this.$u?"UTC":""),Ot=(Le={},Le[ue]=pt+"Date",Le[Te]=pt+"Date",Le[fe]=pt+"Month",Le[$e]=pt+"FullYear",Le[de]=pt+"Hours",Le[he]=pt+"Minutes",Le[ae]=pt+"Seconds",Le[le]=pt+"Milliseconds",Le)[je],Ht=je===ue?this.$D+(ct-this.$W):ct;if(je===fe||je===$e){var Ze=this.clone().set(Te,1);Ze.$d[Ot](Ht),Ze.init(),this.$d=Ze.set(Te,Math.min(this.$D,Ze.daysInMonth())).$d}else Ot&&this.$d[Ot](Ht);return this.init(),this},Je.set=function(qe,ct){return this.clone().$set(qe,ct)},Je.get=function(qe){return this[Pe.p(qe)]()},Je.add=function(qe,ct){var Le,je=this;qe=Number(qe);var pt=Pe.p(ct),Ot=function(bt){var Pt=ht(je);return Pe.w(Pt.date(Pt.date()+Math.round(bt*qe)),je)};if(pt===fe)return this.set(fe,this.$M+qe);if(pt===$e)return this.set($e,this.$y+qe);if(pt===ue)return Ot(1);if(pt===pe)return Ot(7);var Ht=(Le={},Le[he]=re,Le[de]=oe,Le[ae]=ne,Le)[pt]||1,Ze=this.$d.getTime()+qe*Ht;return Pe.w(Ze,this)},Je.subtract=function(qe,ct){return this.add(-1*qe,ct)},Je.format=function(qe){var ct=this,Le=this.$locale();if(!this.isValid())return Le.invalidDate||Ee;var je=qe||"YYYY-MM-DDTHH:mm:ssZ",pt=Pe.z(this),Ot=this.$H,Ht=this.$m,Ze=this.$M,bt=Le.weekdays,Pt=Le.months,Et=Le.meridiem,Lt=function(Ft,jt,zt,mi){return Ft&&(Ft[jt]||Ft(ct,je))||zt[jt].slice(0,mi)},Ut=function(Ft){return Pe.s(Ot%12||12,Ft,"0")},Bt=Et||function(Ft,jt,zt){var mi=Ft<12?"AM":"PM";return zt?mi.toLowerCase():mi};return je.replace(ve,function(Ft,jt){return jt||function(zt){switch(zt){case"YY":return String(ct.$y).slice(-2);case"YYYY":return Pe.s(ct.$y,4,"0");case"M":return Ze+1;case"MM":return Pe.s(Ze+1,2,"0");case"MMM":return Lt(Le.monthsShort,Ze,Pt,3);case"MMMM":return Lt(Pt,Ze);case"D":return ct.$D;case"DD":return Pe.s(ct.$D,2,"0");case"d":return String(ct.$W);case"dd":return Lt(Le.weekdaysMin,ct.$W,bt,2);case"ddd":return Lt(Le.weekdaysShort,ct.$W,bt,3);case"dddd":return bt[ct.$W];case"H":return String(Ot);case"HH":return Pe.s(Ot,2,"0");case"h":return Ut(1);case"hh":return Ut(2);case"a":return Bt(Ot,Ht,!0);case"A":return Bt(Ot,Ht,!1);case"m":return String(Ht);case"mm":return Pe.s(Ht,2,"0");case"s":return String(ct.$s);case"ss":return Pe.s(ct.$s,2,"0");case"SSS":return Pe.s(ct.$ms,3,"0");case"Z":return pt}return null}(Ft)||pt.replace(":","")})},Je.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Je.diff=function(qe,ct,Le){var je,pt=this,Ot=Pe.p(ct),Ht=ht(qe),Ze=(Ht.utcOffset()-this.utcOffset())*re,bt=this-Ht,Pt=function(){return Pe.m(pt,Ht)};switch(Ot){case $e:je=Pt()/12;break;case fe:je=Pt();break;case ge:je=Pt()/3;break;case pe:je=(bt-Ze)/6048e5;break;case ue:je=(bt-Ze)/864e5;break;case de:je=bt/oe;break;case he:je=bt/re;break;case ae:je=bt/ne;break;default:je=bt}return Le?je:Pe.a(je)},Je.daysInMonth=function(){return this.endOf(fe).$D},Je.$locale=function(){return ze[this.$L]},Je.locale=function(qe,ct){if(!qe)return this.$L;var Le=this.clone(),je=Qe(qe,ct,!0);return je&&(Le.$L=je),Le},Je.clone=function(){return Pe.w(this.$d,this)},Je.toDate=function(){return new Date(this.valueOf())},Je.toJSON=function(){return this.isValid()?this.toISOString():null},Je.toISOString=function(){return this.$d.toISOString()},Je.toString=function(){return this.$d.toUTCString()},Ke}(),rt=_t.prototype;return ht.prototype=rt,[["$ms",le],["$s",ae],["$m",he],["$H",de],["$W",ue],["$M",fe],["$y",$e],["$D",Te]].forEach(function(Ke){rt[Ke[1]]=function(Je){return this.$g(Je,Ke[0],Ke[1])}}),ht.extend=function(Ke,Je){return Ke.$i||(Ke(Je,_t,ht),Ke.$i=!0),ht},ht.locale=Qe,ht.isDayjs=Ae,ht.unix=function(Ke){return ht(1e3*Ke)},ht.en=ze[xe],ht.Ls=ze,ht.p={},ht})})(dayjs_min);var dayjs_minExports=dayjs_min.exports;const dayjs2=getDefaultExportFromCjs(dayjs_minExports),Channel={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:ie=>ie>=255?255:ie<0?0:ie,g:ie=>ie>=255?255:ie<0?0:ie,b:ie=>ie>=255?255:ie<0?0:ie,h:ie=>ie%360,s:ie=>ie>=100?100:ie<0?0:ie,l:ie=>ie>=100?100:ie<0?0:ie,a:ie=>ie>=1?1:ie<0?0:ie},toLinear:ie=>{const te=ie/255;return ie>.03928?Math.pow((te+.055)/1.055,2.4):te/12.92},hue2rgb:(ie,te,ne)=>(ne<0&&(ne+=1),ne>1&&(ne-=1),ne<1/6?ie+(te-ie)*6*ne:ne<1/2?te:ne<2/3?ie+(te-ie)*(2/3-ne)*6:ie),hsl2rgb:({h:ie,s:te,l:ne},re)=>{if(!te)return ne*2.55;ie/=360,te/=100,ne/=100;const oe=ne<.5?ne*(1+te):ne+te-ne*te,le=2*ne-oe;switch(re){case"r":return Channel.hue2rgb(le,oe,ie+1/3)*255;case"g":return Channel.hue2rgb(le,oe,ie)*255;case"b":return Channel.hue2rgb(le,oe,ie-1/3)*255}},rgb2hsl:({r:ie,g:te,b:ne},re)=>{ie/=255,te/=255,ne/=255;const oe=Math.max(ie,te,ne),le=Math.min(ie,te,ne),ae=(oe+le)/2;if(re==="l")return ae*100;if(oe===le)return 0;const he=oe-le,de=ae>.5?he/(2-oe-le):he/(oe+le);if(re==="s")return de*100;switch(oe){case ie:return((te-ne)/he+(te<ne?6:0))*60;case te:return((ne-ie)/he+2)*60;case ne:return((ie-te)/he+4)*60;default:return-1}}},channel=Channel,Lang={clamp:(ie,te,ne)=>te>ne?Math.min(te,Math.max(ne,ie)):Math.min(ne,Math.max(te,ie)),round:ie=>Math.round(ie*1e10)/1e10},lang=Lang,Unit={dec2hex:ie=>{const te=Math.round(ie).toString(16);return te.length>1?te:`0${te}`}},unit=Unit,Utils={channel,lang,unit},_$1=Utils,DEC2HEX={};for(let ie=0;ie<=255;ie++)DEC2HEX[ie]=_$1.unit.dec2hex(ie);const TYPE={ALL:0,RGB:1,HSL:2};class Type{constructor(){this.type=TYPE.ALL}get(){return this.type}set(te){if(this.type&&this.type!==te)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=te}reset(){this.type=TYPE.ALL}is(te){return this.type===te}}const Type$2=Type;class Channels{constructor(te,ne){this.color=ne,this.changed=!1,this.data=te,this.type=new Type$2}set(te,ne){return this.color=ne,this.changed=!1,this.data=te,this.type.type=TYPE.ALL,this}_ensureHSL(){const te=this.data,{h:ne,s:re,l:oe}=te;ne===void 0&&(te.h=_$1.channel.rgb2hsl(te,"h")),re===void 0&&(te.s=_$1.channel.rgb2hsl(te,"s")),oe===void 0&&(te.l=_$1.channel.rgb2hsl(te,"l"))}_ensureRGB(){const te=this.data,{r:ne,g:re,b:oe}=te;ne===void 0&&(te.r=_$1.channel.hsl2rgb(te,"r")),re===void 0&&(te.g=_$1.channel.hsl2rgb(te,"g")),oe===void 0&&(te.b=_$1.channel.hsl2rgb(te,"b"))}get r(){const te=this.data,ne=te.r;return!this.type.is(TYPE.HSL)&&ne!==void 0?ne:(this._ensureHSL(),_$1.channel.hsl2rgb(te,"r"))}get g(){const te=this.data,ne=te.g;return!this.type.is(TYPE.HSL)&&ne!==void 0?ne:(this._ensureHSL(),_$1.channel.hsl2rgb(te,"g"))}get b(){const te=this.data,ne=te.b;return!this.type.is(TYPE.HSL)&&ne!==void 0?ne:(this._ensureHSL(),_$1.channel.hsl2rgb(te,"b"))}get h(){const te=this.data,ne=te.h;return!this.type.is(TYPE.RGB)&&ne!==void 0?ne:(this._ensureRGB(),_$1.channel.rgb2hsl(te,"h"))}get s(){const te=this.data,ne=te.s;return!this.type.is(TYPE.RGB)&&ne!==void 0?ne:(this._ensureRGB(),_$1.channel.rgb2hsl(te,"s"))}get l(){const te=this.data,ne=te.l;return!this.type.is(TYPE.RGB)&&ne!==void 0?ne:(this._ensureRGB(),_$1.channel.rgb2hsl(te,"l"))}get a(){return this.data.a}set r(te){this.type.set(TYPE.RGB),this.changed=!0,this.data.r=te}set g(te){this.type.set(TYPE.RGB),this.changed=!0,this.data.g=te}set b(te){this.type.set(TYPE.RGB),this.changed=!0,this.data.b=te}set h(te){this.type.set(TYPE.HSL),this.changed=!0,this.data.h=te}set s(te){this.type.set(TYPE.HSL),this.changed=!0,this.data.s=te}set l(te){this.type.set(TYPE.HSL),this.changed=!0,this.data.l=te}set a(te){this.changed=!0,this.data.a=te}}const Channels$1=Channels,channels=new Channels$1({r:0,g:0,b:0,a:0},"transparent"),ChannelsReusable=channels,Hex={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:ie=>{if(ie.charCodeAt(0)!==35)return;const te=ie.match(Hex.re);if(!te)return;const ne=te[1],re=parseInt(ne,16),oe=ne.length,le=oe%4===0,ae=oe>4,he=ae?1:17,de=ae?8:4,ue=le?0:-1,pe=ae?255:15;return ChannelsReusable.set({r:(re>>de*(ue+3)&pe)*he,g:(re>>de*(ue+2)&pe)*he,b:(re>>de*(ue+1)&pe)*he,a:le?(re&pe)*he/255:1},ie)},stringify:ie=>{const{r:te,g:ne,b:re,a:oe}=ie;return oe<1?`#${DEC2HEX[Math.round(te)]}${DEC2HEX[Math.round(ne)]}${DEC2HEX[Math.round(re)]}${DEC2HEX[Math.round(oe*255)]}`:`#${DEC2HEX[Math.round(te)]}${DEC2HEX[Math.round(ne)]}${DEC2HEX[Math.round(re)]}`}},Hex$1=Hex,HSL={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:ie=>{const te=ie.match(HSL.hueRe);if(te){const[,ne,re]=te;switch(re){case"grad":return _$1.channel.clamp.h(parseFloat(ne)*.9);case"rad":return _$1.channel.clamp.h(parseFloat(ne)*180/Math.PI);case"turn":return _$1.channel.clamp.h(parseFloat(ne)*360)}}return _$1.channel.clamp.h(parseFloat(ie))},parse:ie=>{const te=ie.charCodeAt(0);if(te!==104&&te!==72)return;const ne=ie.match(HSL.re);if(!ne)return;const[,re,oe,le,ae,he]=ne;return ChannelsReusable.set({h:HSL._hue2deg(re),s:_$1.channel.clamp.s(parseFloat(oe)),l:_$1.channel.clamp.l(parseFloat(le)),a:ae?_$1.channel.clamp.a(he?parseFloat(ae)/100:parseFloat(ae)):1},ie)},stringify:ie=>{const{h:te,s:ne,l:re,a:oe}=ie;return oe<1?`hsla(${_$1.lang.round(te)}, ${_$1.lang.round(ne)}%, ${_$1.lang.round(re)}%, ${oe})`:`hsl(${_$1.lang.round(te)}, ${_$1.lang.round(ne)}%, ${_$1.lang.round(re)}%)`}},HSL$1=HSL,Keyword={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:ie=>{ie=ie.toLowerCase();const te=Keyword.colors[ie];if(te)return Hex$1.parse(te)},stringify:ie=>{const te=Hex$1.stringify(ie);for(const ne in Keyword.colors)if(Keyword.colors[ne]===te)return ne}},Keyword$1=Keyword,RGB={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:ie=>{const te=ie.charCodeAt(0);if(te!==114&&te!==82)return;const ne=ie.match(RGB.re);if(!ne)return;const[,re,oe,le,ae,he,de,ue,pe]=ne;return ChannelsReusable.set({r:_$1.channel.clamp.r(oe?parseFloat(re)*2.55:parseFloat(re)),g:_$1.channel.clamp.g(ae?parseFloat(le)*2.55:parseFloat(le)),b:_$1.channel.clamp.b(de?parseFloat(he)*2.55:parseFloat(he)),a:ue?_$1.channel.clamp.a(pe?parseFloat(ue)/100:parseFloat(ue)):1},ie)},stringify:ie=>{const{r:te,g:ne,b:re,a:oe}=ie;return oe<1?`rgba(${_$1.lang.round(te)}, ${_$1.lang.round(ne)}, ${_$1.lang.round(re)}, ${_$1.lang.round(oe)})`:`rgb(${_$1.lang.round(te)}, ${_$1.lang.round(ne)}, ${_$1.lang.round(re)})`}},RGB$1=RGB,Color$1={format:{keyword:Keyword$1,hex:Hex$1,rgb:RGB$1,rgba:RGB$1,hsl:HSL$1,hsla:HSL$1},parse:ie=>{if(typeof ie!="string")return ie;const te=Hex$1.parse(ie)||RGB$1.parse(ie)||HSL$1.parse(ie)||Keyword$1.parse(ie);if(te)return te;throw new Error(`Unsupported color format: "${ie}"`)},stringify:ie=>!ie.changed&&ie.color?ie.color:ie.type.is(TYPE.HSL)||ie.data.r===void 0?HSL$1.stringify(ie):ie.a<1||!Number.isInteger(ie.r)||!Number.isInteger(ie.g)||!Number.isInteger(ie.b)?RGB$1.stringify(ie):Hex$1.stringify(ie)},Color$2=Color$1,change=(ie,te)=>{const ne=Color$2.parse(ie);for(const re in te)ne[re]=_$1.channel.clamp[re](te[re]);return Color$2.stringify(ne)},change$1=change,rgba$1=(ie,te,ne=0,re=1)=>{if(typeof ie!="number")return change$1(ie,{a:te});const oe=ChannelsReusable.set({r:_$1.channel.clamp.r(ie),g:_$1.channel.clamp.g(te),b:_$1.channel.clamp.b(ne),a:_$1.channel.clamp.a(re)});return Color$2.stringify(oe)},rgba2=rgba$1,luminance=ie=>{const{r:te,g:ne,b:re}=Color$2.parse(ie),oe=.2126*_$1.channel.toLinear(te)+.7152*_$1.channel.toLinear(ne)+.0722*_$1.channel.toLinear(re);return _$1.lang.round(oe)},luminance$1=luminance,isLight=ie=>luminance$1(ie)>=.5,isLight$1=isLight,isDark=ie=>!isLight$1(ie),isDark$1=isDark,adjustChannel=(ie,te,ne)=>{const re=Color$2.parse(ie),oe=re[te],le=_$1.channel.clamp[te](oe+ne);return oe!==le&&(re[te]=le),Color$2.stringify(re)},adjustChannel$1=adjustChannel,lighten=(ie,te)=>adjustChannel$1(ie,"l",te),lighten$1=lighten,darken=(ie,te)=>adjustChannel$1(ie,"l",-te),darken$1=darken,adjust=(ie,te)=>{const ne=Color$2.parse(ie),re={};for(const oe in te)te[oe]&&(re[oe]=ne[oe]+te[oe]);return change$1(ie,re)},adjust6=adjust,mix=(ie,te,ne=50)=>{const{r:re,g:oe,b:le,a:ae}=Color$2.parse(ie),{r:he,g:de,b:ue,a:pe}=Color$2.parse(te),fe=ne/100,ge=fe*2-1,$e=ae-pe,Ee=((ge*$e===-1?ge:(ge+$e)/(1+ge*$e))+1)/2,Se=1-Ee,ve=re*Ee+he*Se,ke=oe*Ee+de*Se,Re=le*Ee+ue*Se,Ne=ae*fe+pe*(1-fe);return rgba2(ve,ke,Re,Ne)},mix$1=mix,invert=(ie,te=100)=>{const ne=Color$2.parse(ie);return ne.r=255-ne.r,ne.g=255-ne.g,ne.b=255-ne.b,mix$1(ne,ie,te)},invert5=invert;/*! @license DOMPurify 3.2.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.3/LICENSE */const{entries,setPrototypeOf,isFrozen,getPrototypeOf,getOwnPropertyDescriptor}=Object;let{freeze,seal,create:create$1}=Object,{apply:apply$1,construct}=typeof Reflect<"u"&&Reflect;freeze||(freeze=function(te){return te});seal||(seal=function(te){return te});apply$1||(apply$1=function(te,ne,re){return te.apply(ne,re)});construct||(construct=function(te,ne){return new te(...ne)});const arrayForEach=unapply(Array.prototype.forEach),arrayPop=unapply(Array.prototype.pop),arrayPush=unapply(Array.prototype.push),stringToLowerCase=unapply(String.prototype.toLowerCase),stringToString=unapply(String.prototype.toString),stringMatch=unapply(String.prototype.match),stringReplace=unapply(String.prototype.replace),stringIndexOf=unapply(String.prototype.indexOf),stringTrim=unapply(String.prototype.trim),objectHasOwnProperty=unapply(Object.prototype.hasOwnProperty),regExpTest=unapply(RegExp.prototype.test),typeErrorCreate=unconstruct(TypeError);function unapply(ie){return function(te){for(var ne=arguments.length,re=new Array(ne>1?ne-1:0),oe=1;oe<ne;oe++)re[oe-1]=arguments[oe];return apply$1(ie,te,re)}}function unconstruct(ie){return function(){for(var te=arguments.length,ne=new Array(te),re=0;re<te;re++)ne[re]=arguments[re];return construct(ie,ne)}}function addToSet(ie,te){let ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:stringToLowerCase;setPrototypeOf&&setPrototypeOf(ie,null);let re=te.length;for(;re--;){let oe=te[re];if(typeof oe=="string"){const le=ne(oe);le!==oe&&(isFrozen(te)||(te[re]=le),oe=le)}ie[oe]=!0}return ie}function cleanArray(ie){for(let te=0;te<ie.length;te++)objectHasOwnProperty(ie,te)||(ie[te]=null);return ie}function clone(ie){const te=create$1(null);for(const[ne,re]of entries(ie))objectHasOwnProperty(ie,ne)&&(Array.isArray(re)?te[ne]=cleanArray(re):re&&typeof re=="object"&&re.constructor===Object?te[ne]=clone(re):te[ne]=re);return te}function lookupGetter(ie,te){for(;ie!==null;){const re=getOwnPropertyDescriptor(ie,te);if(re){if(re.get)return unapply(re.get);if(typeof re.value=="function")return unapply(re.value)}ie=getPrototypeOf(ie)}function ne(){return null}return ne}const html$1=freeze(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),svg$1=freeze(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),svgFilters=freeze(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),svgDisallowed=freeze(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mathMl$1=freeze(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),mathMlDisallowed=freeze(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),text$1=freeze(["#text"]),html$2=freeze(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),svg=freeze(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mathMl=freeze(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xml=freeze(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),MUSTACHE_EXPR=seal(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ERB_EXPR=seal(/<%[\w\W]*|[\w\W]*%>/gm),TMPLIT_EXPR=seal(/\$\{[\w\W]*}/gm),DATA_ATTR=seal(/^data-[\-\w.\u00B7-\uFFFF]+$/),ARIA_ATTR=seal(/^aria-[\-\w]+$/),IS_ALLOWED_URI=seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),IS_SCRIPT_OR_DATA=seal(/^(?:\w+script|data):/i),ATTR_WHITESPACE=seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),DOCTYPE_NAME=seal(/^html$/i),CUSTOM_ELEMENT=seal(/^[a-z][.\w]*(-[.\w]+)+$/i);var EXPRESSIONS=Object.freeze({__proto__:null,ARIA_ATTR,ATTR_WHITESPACE,CUSTOM_ELEMENT,DATA_ATTR,DOCTYPE_NAME,ERB_EXPR,IS_ALLOWED_URI,IS_SCRIPT_OR_DATA,MUSTACHE_EXPR,TMPLIT_EXPR});const NODE_TYPE={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},getGlobal=function ie(){return typeof window>"u"?null:window},_createTrustedTypesPolicy=function ie(te,ne){if(typeof te!="object"||typeof te.createPolicy!="function")return null;let re=null;const oe="data-tt-policy-suffix";ne&&ne.hasAttribute(oe)&&(re=ne.getAttribute(oe));const le="dompurify"+(re?"#"+re:"");try{return te.createPolicy(le,{createHTML(ae){return ae},createScriptURL(ae){return ae}})}catch{return console.warn("TrustedTypes policy "+le+" could not be created."),null}},_createHooksMap=function ie(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function createDOMPurify(){let ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:getGlobal();const te=xt=>createDOMPurify(xt);if(te.version="3.2.3",te.removed=[],!ie||!ie.document||ie.document.nodeType!==NODE_TYPE.document)return te.isSupported=!1,te;let{document:ne}=ie;const re=ne,oe=re.currentScript,{DocumentFragment:le,HTMLTemplateElement:ae,Node:he,Element:de,NodeFilter:ue,NamedNodeMap:pe=ie.NamedNodeMap||ie.MozNamedAttrMap,HTMLFormElement:fe,DOMParser:ge,trustedTypes:$e}=ie,Te=de.prototype,Ee=lookupGetter(Te,"cloneNode"),Se=lookupGetter(Te,"remove"),ve=lookupGetter(Te,"nextSibling"),ke=lookupGetter(Te,"childNodes"),Re=lookupGetter(Te,"parentNode");if(typeof ae=="function"){const xt=ne.createElement("template");xt.content&&xt.content.ownerDocument&&(ne=xt.content.ownerDocument)}let Ne,xe="";const{implementation:ze,createNodeIterator:Me,createDocumentFragment:Ae,getElementsByTagName:Qe}=ne,{importNode:ht}=re;let Pe=_createHooksMap();te.isSupported=typeof entries=="function"&&typeof Re=="function"&&ze&&ze.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:_t,ERB_EXPR:rt,TMPLIT_EXPR:Ke,DATA_ATTR:Je,ARIA_ATTR:qe,IS_SCRIPT_OR_DATA:ct,ATTR_WHITESPACE:Le,CUSTOM_ELEMENT:je}=EXPRESSIONS;let{IS_ALLOWED_URI:pt}=EXPRESSIONS,Ot=null;const Ht=addToSet({},[...html$1,...svg$1,...svgFilters,...mathMl$1,...text$1]);let Ze=null;const bt=addToSet({},[...html$2,...svg,...mathMl,...xml]);let Pt=Object.seal(create$1(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Et=null,Lt=null,Ut=!0,Bt=!0,Ft=!1,jt=!0,zt=!1,mi=!0,Fi=!1,ki=!1,$i=!1,Di=!1,Ui=!1,Yi=!1,Nt=!0,Jt=!1;const Yt="user-content-";let zi=!0,_i=!1,Fe={},Li=null;const hi=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let si=null;const vi=addToSet({},["audio","video","img","source","image","track"]);let lt=null;const Ct=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ce="http://www.w3.org/1998/Math/MathML",Oe="http://www.w3.org/2000/svg",Ue="http://www.w3.org/1999/xhtml";let We=Ue,Tt=!1,Kt=null;const Ii=addToSet({},[Ce,Oe,Ue],stringToString);let Hi=addToSet({},["mi","mo","mn","ms","mtext"]),ln=addToSet({},["annotation-xml"]);const Ki=addToSet({},["title","style","font","a","script"]);let ye=null;const we=["application/xhtml+xml","text/html"],Be="text/html";let Ve=null,ft=null;const It=ne.createElement("form"),Dt=function(Xe){return Xe instanceof RegExp||Xe instanceof Function},Oi=function(){let Xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ft&&ft===Xe)){if((!Xe||typeof Xe!="object")&&(Xe={}),Xe=clone(Xe),ye=we.indexOf(Xe.PARSER_MEDIA_TYPE)===-1?Be:Xe.PARSER_MEDIA_TYPE,Ve=ye==="application/xhtml+xml"?stringToString:stringToLowerCase,Ot=objectHasOwnProperty(Xe,"ALLOWED_TAGS")?addToSet({},Xe.ALLOWED_TAGS,Ve):Ht,Ze=objectHasOwnProperty(Xe,"ALLOWED_ATTR")?addToSet({},Xe.ALLOWED_ATTR,Ve):bt,Kt=objectHasOwnProperty(Xe,"ALLOWED_NAMESPACES")?addToSet({},Xe.ALLOWED_NAMESPACES,stringToString):Ii,lt=objectHasOwnProperty(Xe,"ADD_URI_SAFE_ATTR")?addToSet(clone(Ct),Xe.ADD_URI_SAFE_ATTR,Ve):Ct,si=objectHasOwnProperty(Xe,"ADD_DATA_URI_TAGS")?addToSet(clone(vi),Xe.ADD_DATA_URI_TAGS,Ve):vi,Li=objectHasOwnProperty(Xe,"FORBID_CONTENTS")?addToSet({},Xe.FORBID_CONTENTS,Ve):hi,Et=objectHasOwnProperty(Xe,"FORBID_TAGS")?addToSet({},Xe.FORBID_TAGS,Ve):{},Lt=objectHasOwnProperty(Xe,"FORBID_ATTR")?addToSet({},Xe.FORBID_ATTR,Ve):{},Fe=objectHasOwnProperty(Xe,"USE_PROFILES")?Xe.USE_PROFILES:!1,Ut=Xe.ALLOW_ARIA_ATTR!==!1,Bt=Xe.ALLOW_DATA_ATTR!==!1,Ft=Xe.ALLOW_UNKNOWN_PROTOCOLS||!1,jt=Xe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,zt=Xe.SAFE_FOR_TEMPLATES||!1,mi=Xe.SAFE_FOR_XML!==!1,Fi=Xe.WHOLE_DOCUMENT||!1,Di=Xe.RETURN_DOM||!1,Ui=Xe.RETURN_DOM_FRAGMENT||!1,Yi=Xe.RETURN_TRUSTED_TYPE||!1,$i=Xe.FORCE_BODY||!1,Nt=Xe.SANITIZE_DOM!==!1,Jt=Xe.SANITIZE_NAMED_PROPS||!1,zi=Xe.KEEP_CONTENT!==!1,_i=Xe.IN_PLACE||!1,pt=Xe.ALLOWED_URI_REGEXP||IS_ALLOWED_URI,We=Xe.NAMESPACE||Ue,Hi=Xe.MATHML_TEXT_INTEGRATION_POINTS||Hi,ln=Xe.HTML_INTEGRATION_POINTS||ln,Pt=Xe.CUSTOM_ELEMENT_HANDLING||{},Xe.CUSTOM_ELEMENT_HANDLING&&Dt(Xe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Pt.tagNameCheck=Xe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Xe.CUSTOM_ELEMENT_HANDLING&&Dt(Xe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Pt.attributeNameCheck=Xe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Xe.CUSTOM_ELEMENT_HANDLING&&typeof Xe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Pt.allowCustomizedBuiltInElements=Xe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),zt&&(Bt=!1),Ui&&(Di=!0),Fe&&(Ot=addToSet({},text$1),Ze=[],Fe.html===!0&&(addToSet(Ot,html$1),addToSet(Ze,html$2)),Fe.svg===!0&&(addToSet(Ot,svg$1),addToSet(Ze,svg),addToSet(Ze,xml)),Fe.svgFilters===!0&&(addToSet(Ot,svgFilters),addToSet(Ze,svg),addToSet(Ze,xml)),Fe.mathMl===!0&&(addToSet(Ot,mathMl$1),addToSet(Ze,mathMl),addToSet(Ze,xml))),Xe.ADD_TAGS&&(Ot===Ht&&(Ot=clone(Ot)),addToSet(Ot,Xe.ADD_TAGS,Ve)),Xe.ADD_ATTR&&(Ze===bt&&(Ze=clone(Ze)),addToSet(Ze,Xe.ADD_ATTR,Ve)),Xe.ADD_URI_SAFE_ATTR&&addToSet(lt,Xe.ADD_URI_SAFE_ATTR,Ve),Xe.FORBID_CONTENTS&&(Li===hi&&(Li=clone(Li)),addToSet(Li,Xe.FORBID_CONTENTS,Ve)),zi&&(Ot["#text"]=!0),Fi&&addToSet(Ot,["html","head","body"]),Ot.table&&(addToSet(Ot,["tbody"]),delete Et.tbody),Xe.TRUSTED_TYPES_POLICY){if(typeof Xe.TRUSTED_TYPES_POLICY.createHTML!="function")throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Xe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ne=Xe.TRUSTED_TYPES_POLICY,xe=Ne.createHTML("")}else Ne===void 0&&(Ne=_createTrustedTypesPolicy($e,oe)),Ne!==null&&typeof xe=="string"&&(xe=Ne.createHTML(""));freeze&&freeze(Xe),ft=Xe}},an=addToSet({},[...svg$1,...svgFilters,...svgDisallowed]),fn=addToSet({},[...mathMl$1,...mathMlDisallowed]),mn=function(Xe){let St=Re(Xe);(!St||!St.tagName)&&(St={namespaceURI:We,tagName:"template"});const At=stringToLowerCase(Xe.tagName),ii=stringToLowerCase(St.tagName);return Kt[Xe.namespaceURI]?Xe.namespaceURI===Oe?St.namespaceURI===Ue?At==="svg":St.namespaceURI===Ce?At==="svg"&&(ii==="annotation-xml"||Hi[ii]):!!an[At]:Xe.namespaceURI===Ce?St.namespaceURI===Ue?At==="math":St.namespaceURI===Oe?At==="math"&&ln[ii]:!!fn[At]:Xe.namespaceURI===Ue?St.namespaceURI===Oe&&!ln[ii]||St.namespaceURI===Ce&&!Hi[ii]?!1:!fn[At]&&(Ki[At]||!an[At]):!!(ye==="application/xhtml+xml"&&Kt[Xe.namespaceURI]):!1},Pi=function(Xe){arrayPush(te.removed,{element:Xe});try{Re(Xe).removeChild(Xe)}catch{Se(Xe)}},In=function(Xe,St){try{arrayPush(te.removed,{attribute:St.getAttributeNode(Xe),from:St})}catch{arrayPush(te.removed,{attribute:null,from:St})}if(St.removeAttribute(Xe),Xe==="is")if(Di||Ui)try{Pi(St)}catch{}else try{St.setAttribute(Xe,"")}catch{}},fs=function(Xe){let St=null,At=null;if($i)Xe="<remove></remove>"+Xe;else{const gi=stringMatch(Xe,/^[\r\n\t ]+/);At=gi&&gi[0]}ye==="application/xhtml+xml"&&We===Ue&&(Xe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Xe+"</body></html>");const ii=Ne?Ne.createHTML(Xe):Xe;if(We===Ue)try{St=new ge().parseFromString(ii,ye)}catch{}if(!St||!St.documentElement){St=ze.createDocument(We,"template",null);try{St.documentElement.innerHTML=Tt?xe:ii}catch{}}const Ti=St.body||St.documentElement;return Xe&&At&&Ti.insertBefore(ne.createTextNode(At),Ti.childNodes[0]||null),We===Ue?Qe.call(St,Fi?"html":"body")[0]:Fi?St.documentElement:Ti},ms=function(Xe){return Me.call(Xe.ownerDocument||Xe,Xe,ue.SHOW_ELEMENT|ue.SHOW_COMMENT|ue.SHOW_TEXT|ue.SHOW_PROCESSING_INSTRUCTION|ue.SHOW_CDATA_SECTION,null)},$s=function(Xe){return Xe instanceof fe&&(typeof Xe.nodeName!="string"||typeof Xe.textContent!="string"||typeof Xe.removeChild!="function"||!(Xe.attributes instanceof pe)||typeof Xe.removeAttribute!="function"||typeof Xe.setAttribute!="function"||typeof Xe.namespaceURI!="string"||typeof Xe.insertBefore!="function"||typeof Xe.hasChildNodes!="function")},Ms=function(Xe){return typeof he=="function"&&Xe instanceof he};function tn(xt,Xe,St){arrayForEach(xt,At=>{At.call(te,Xe,St,ft)})}const On=function(Xe){let St=null;if(tn(Pe.beforeSanitizeElements,Xe,null),$s(Xe))return Pi(Xe),!0;const At=Ve(Xe.nodeName);if(tn(Pe.uponSanitizeElement,Xe,{tagName:At,allowedTags:Ot}),Xe.hasChildNodes()&&!Ms(Xe.firstElementChild)&&regExpTest(/<[/\w]/g,Xe.innerHTML)&&regExpTest(/<[/\w]/g,Xe.textContent)||Xe.nodeType===NODE_TYPE.progressingInstruction||mi&&Xe.nodeType===NODE_TYPE.comment&&regExpTest(/<[/\w]/g,Xe.data))return Pi(Xe),!0;if(!Ot[At]||Et[At]){if(!Et[At]&&Zn(At)&&(Pt.tagNameCheck instanceof RegExp&&regExpTest(Pt.tagNameCheck,At)||Pt.tagNameCheck instanceof Function&&Pt.tagNameCheck(At)))return!1;if(zi&&!Li[At]){const ii=Re(Xe)||Xe.parentNode,Ti=ke(Xe)||Xe.childNodes;if(Ti&&ii){const gi=Ti.length;for(let Ci=gi-1;Ci>=0;--Ci){const Gi=Ee(Ti[Ci],!0);Gi.__removalCount=(Xe.__removalCount||0)+1,ii.insertBefore(Gi,ve(Xe))}}}return Pi(Xe),!0}return Xe instanceof de&&!mn(Xe)||(At==="noscript"||At==="noembed"||At==="noframes")&&regExpTest(/<\/no(script|embed|frames)/i,Xe.innerHTML)?(Pi(Xe),!0):(zt&&Xe.nodeType===NODE_TYPE.text&&(St=Xe.textContent,arrayForEach([_t,rt,Ke],ii=>{St=stringReplace(St,ii," ")}),Xe.textContent!==St&&(arrayPush(te.removed,{element:Xe.cloneNode()}),Xe.textContent=St)),tn(Pe.afterSanitizeElements,Xe,null),!1)},xs=function(Xe,St,At){if(Nt&&(St==="id"||St==="name")&&(At in ne||At in It))return!1;if(!(Bt&&!Lt[St]&&regExpTest(Je,St))){if(!(Ut&&regExpTest(qe,St))){if(!Ze[St]||Lt[St]){if(!(Zn(Xe)&&(Pt.tagNameCheck instanceof RegExp&&regExpTest(Pt.tagNameCheck,Xe)||Pt.tagNameCheck instanceof Function&&Pt.tagNameCheck(Xe))&&(Pt.attributeNameCheck instanceof RegExp&&regExpTest(Pt.attributeNameCheck,St)||Pt.attributeNameCheck instanceof Function&&Pt.attributeNameCheck(St))||St==="is"&&Pt.allowCustomizedBuiltInElements&&(Pt.tagNameCheck instanceof RegExp&&regExpTest(Pt.tagNameCheck,At)||Pt.tagNameCheck instanceof Function&&Pt.tagNameCheck(At))))return!1}else if(!lt[St]){if(!regExpTest(pt,stringReplace(At,Le,""))){if(!((St==="src"||St==="xlink:href"||St==="href")&&Xe!=="script"&&stringIndexOf(At,"data:")===0&&si[Xe])){if(!(Ft&&!regExpTest(ct,stringReplace(At,Le,"")))){if(At)return!1}}}}}}return!0},Zn=function(Xe){return Xe!=="annotation-xml"&&stringMatch(Xe,je)},Ds=function(Xe){tn(Pe.beforeSanitizeAttributes,Xe,null);const{attributes:St}=Xe;if(!St||$s(Xe))return;const At={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ze,forceKeepAttr:void 0};let ii=St.length;for(;ii--;){const Ti=St[ii],{name:gi,namespaceURI:Ci,value:Gi}=Ti,$n=Ve(gi);let fi=gi==="value"?Gi:stringTrim(Gi);if(At.attrName=$n,At.attrValue=fi,At.keepAttr=!0,At.forceKeepAttr=void 0,tn(Pe.uponSanitizeAttribute,Xe,At),fi=At.attrValue,Jt&&($n==="id"||$n==="name")&&(In(gi,Xe),fi=Yt+fi),mi&&regExpTest(/((--!?|])>)|<\/(style|title)/i,fi)){In(gi,Xe);continue}if(At.forceKeepAttr||(In(gi,Xe),!At.keepAttr))continue;if(!jt&&regExpTest(/\/>/i,fi)){In(gi,Xe);continue}zt&&arrayForEach([_t,rt,Ke],Rn=>{fi=stringReplace(fi,Rn," ")});const Ps=Ve(Xe.nodeName);if(xs(Ps,$n,fi)){if(Ne&&typeof $e=="object"&&typeof $e.getAttributeType=="function"&&!Ci)switch($e.getAttributeType(Ps,$n)){case"TrustedHTML":{fi=Ne.createHTML(fi);break}case"TrustedScriptURL":{fi=Ne.createScriptURL(fi);break}}try{Ci?Xe.setAttributeNS(Ci,gi,fi):Xe.setAttribute(gi,fi),$s(Xe)?Pi(Xe):arrayPop(te.removed)}catch{}}}tn(Pe.afterSanitizeAttributes,Xe,null)},Qn=function xt(Xe){let St=null;const At=ms(Xe);for(tn(Pe.beforeSanitizeShadowDOM,Xe,null);St=At.nextNode();)tn(Pe.uponSanitizeShadowNode,St,null),On(St),Ds(St),St.content instanceof le&&xt(St.content);tn(Pe.afterSanitizeShadowDOM,Xe,null)};return te.sanitize=function(xt){let Xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},St=null,At=null,ii=null,Ti=null;if(Tt=!xt,Tt&&(xt="<!-->"),typeof xt!="string"&&!Ms(xt))if(typeof xt.toString=="function"){if(xt=xt.toString(),typeof xt!="string")throw typeErrorCreate("dirty is not a string, aborting")}else throw typeErrorCreate("toString is not a function");if(!te.isSupported)return xt;if(ki||Oi(Xe),te.removed=[],typeof xt=="string"&&(_i=!1),_i){if(xt.nodeName){const Gi=Ve(xt.nodeName);if(!Ot[Gi]||Et[Gi])throw typeErrorCreate("root node is forbidden and cannot be sanitized in-place")}}else if(xt instanceof he)St=fs("<!---->"),At=St.ownerDocument.importNode(xt,!0),At.nodeType===NODE_TYPE.element&&At.nodeName==="BODY"||At.nodeName==="HTML"?St=At:St.appendChild(At);else{if(!Di&&!zt&&!Fi&&xt.indexOf("<")===-1)return Ne&&Yi?Ne.createHTML(xt):xt;if(St=fs(xt),!St)return Di?null:Yi?xe:""}St&&$i&&Pi(St.firstChild);const gi=ms(_i?xt:St);for(;ii=gi.nextNode();)On(ii),Ds(ii),ii.content instanceof le&&Qn(ii.content);if(_i)return xt;if(Di){if(Ui)for(Ti=Ae.call(St.ownerDocument);St.firstChild;)Ti.appendChild(St.firstChild);else Ti=St;return(Ze.shadowroot||Ze.shadowrootmode)&&(Ti=ht.call(re,Ti,!0)),Ti}let Ci=Fi?St.outerHTML:St.innerHTML;return Fi&&Ot["!doctype"]&&St.ownerDocument&&St.ownerDocument.doctype&&St.ownerDocument.doctype.name&&regExpTest(DOCTYPE_NAME,St.ownerDocument.doctype.name)&&(Ci="<!DOCTYPE "+St.ownerDocument.doctype.name+`>
`+Ci),zt&&arrayForEach([_t,rt,Ke],Gi=>{Ci=stringReplace(Ci,Gi," ")}),Ne&&Yi?Ne.createHTML(Ci):Ci},te.setConfig=function(){let xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Oi(xt),ki=!0},te.clearConfig=function(){ft=null,ki=!1},te.isValidAttribute=function(xt,Xe,St){ft||Oi({});const At=Ve(xt),ii=Ve(Xe);return xs(At,ii,St)},te.addHook=function(xt,Xe){typeof Xe=="function"&&arrayPush(Pe[xt],Xe)},te.removeHook=function(xt){return arrayPop(Pe[xt])},te.removeHooks=function(xt){Pe[xt]=[]},te.removeAllHooks=function(){Pe=_createHooksMap()},te}var purify=createDOMPurify(),__defProp=Object.defineProperty,__name=(ie,te)=>__defProp(ie,"name",{value:te,configurable:!0}),__export=(ie,te)=>{for(var ne in te)__defProp(ie,ne,{get:te[ne],enumerable:!0})},LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},log={trace:__name((...ie)=>{},"trace"),debug:__name((...ie)=>{},"debug"),info:__name((...ie)=>{},"info"),warn:__name((...ie)=>{},"warn"),error:__name((...ie)=>{},"error"),fatal:__name((...ie)=>{},"fatal")},setLogLevel=__name(function(ie="fatal"){let te=LEVELS.fatal;typeof ie=="string"?ie.toLowerCase()in LEVELS&&(te=LEVELS[ie]):typeof ie=="number"&&(te=ie),log.trace=()=>{},log.debug=()=>{},log.info=()=>{},log.warn=()=>{},log.error=()=>{},log.fatal=()=>{},te<=LEVELS.fatal&&(log.fatal=console.error?console.error.bind(console,format("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",format("FATAL"))),te<=LEVELS.error&&(log.error=console.error?console.error.bind(console,format("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",format("ERROR"))),te<=LEVELS.warn&&(log.warn=console.warn?console.warn.bind(console,format("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",format("WARN"))),te<=LEVELS.info&&(log.info=console.info?console.info.bind(console,format("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",format("INFO"))),te<=LEVELS.debug&&(log.debug=console.debug?console.debug.bind(console,format("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",format("DEBUG"))),te<=LEVELS.trace&&(log.trace=console.debug?console.debug.bind(console,format("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",format("TRACE")))},"setLogLevel"),format=__name(ie=>`%c${dayjs2().format("ss.SSS")} : ${ie} : `,"format"),frontMatterRegex=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,directiveRegex=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,anyCommentRegex=/\s*%%.*\n/gm,jo,UnknownDiagramError=(jo=class extends Error{constructor(te){super(te),this.name="UnknownDiagramError"}},__name(jo,"UnknownDiagramError"),jo),detectors={},detectType$1=__name(function(ie,te){ie=ie.replace(frontMatterRegex,"").replace(directiveRegex,"").replace(anyCommentRegex,`
`);for(const[ne,{detector:re}]of Object.entries(detectors))if(re(ie,te))return ne;throw new UnknownDiagramError(`No diagram type detected matching given configuration for text: ${ie}`)},"detectType"),registerLazyLoadedDiagrams=__name((...ie)=>{for(const{id:te,detector:ne,loader:re}of ie)addDetector(te,ne,re)},"registerLazyLoadedDiagrams"),addDetector=__name((ie,te,ne)=>{detectors[ie]&&log.warn(`Detector with key ${ie} already exists. Overwriting.`),detectors[ie]={detector:te,loader:ne},log.debug(`Detector with key ${ie} added${ne?" with loader":""}`)},"addDetector"),getDiagramLoader=__name(ie=>detectors[ie].loader,"getDiagramLoader"),assignWithDepth=__name((ie,te,{depth:ne=2,clobber:re=!1}={})=>{const oe={depth:ne,clobber:re};return Array.isArray(te)&&!Array.isArray(ie)?(te.forEach(le=>assignWithDepth(ie,le,oe)),ie):Array.isArray(te)&&Array.isArray(ie)?(te.forEach(le=>{ie.includes(le)||ie.push(le)}),ie):ie===void 0||ne<=0?ie!=null&&typeof ie=="object"&&typeof te=="object"?Object.assign(ie,te):te:(te!==void 0&&typeof ie=="object"&&typeof te=="object"&&Object.keys(te).forEach(le=>{typeof te[le]=="object"&&(ie[le]===void 0||typeof ie[le]=="object")?(ie[le]===void 0&&(ie[le]=Array.isArray(te[le])?[]:{}),ie[le]=assignWithDepth(ie[le],te[le],{depth:ne-1,clobber:re})):(re||typeof ie[le]!="object"&&typeof te[le]!="object")&&(ie[le]=te[le])}),ie)},"assignWithDepth"),assignWithDepth_default=assignWithDepth,oldAttributeBackgroundColorOdd="#ffffff",oldAttributeBackgroundColorEven="#f2f2f2",mkBorder=__name((ie,te)=>te?adjust6(ie,{s:-40,l:10}):adjust6(ie,{s:-40,l:-10}),"mkBorder"),Yo,Theme=(Yo=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var ne,re,oe,le,ae,he,de,ue,pe,fe,ge;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||adjust6(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||adjust6(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||mkBorder(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||mkBorder(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||invert5(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||invert5(this.tertiaryColor),this.lineColor=this.lineColor||invert5(this.background),this.arrowheadColor=this.arrowheadColor||invert5(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?darken$1(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||darken$1(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||invert5(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||lighten$1(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust6(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust6(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust6(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust6(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust6(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust6(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||adjust6(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust6(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust6(this.primaryColor,{h:330}),this.darkMode)for(let $e=0;$e<this.THEME_COLOR_LIMIT;$e++)this["cScale"+$e]=darken$1(this["cScale"+$e],75);else for(let $e=0;$e<this.THEME_COLOR_LIMIT;$e++)this["cScale"+$e]=darken$1(this["cScale"+$e],25);for(let $e=0;$e<this.THEME_COLOR_LIMIT;$e++)this["cScaleInv"+$e]=this["cScaleInv"+$e]||invert5(this["cScale"+$e]);for(let $e=0;$e<this.THEME_COLOR_LIMIT;$e++)this.darkMode?this["cScalePeer"+$e]=this["cScalePeer"+$e]||lighten$1(this["cScale"+$e],10):this["cScalePeer"+$e]=this["cScalePeer"+$e]||darken$1(this["cScale"+$e],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let $e=0;$e<this.THEME_COLOR_LIMIT;$e++)this["cScaleLabel"+$e]=this["cScaleLabel"+$e]||this.scaleLabelColor;const te=this.darkMode?-4:-1;for(let $e=0;$e<5;$e++)this["surface"+$e]=this["surface"+$e]||adjust6(this.mainBkg,{h:180,s:-15,l:te*(5+$e*3)}),this["surfacePeer"+$e]=this["surfacePeer"+$e]||adjust6(this.mainBkg,{h:180,s:-15,l:te*(8+$e*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||adjust6(this.primaryColor,{h:64}),this.fillType3=this.fillType3||adjust6(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||adjust6(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||adjust6(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||adjust6(this.primaryColor,{h:128}),this.fillType7=this.fillType7||adjust6(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||adjust6(this.primaryColor,{l:-10}),this.pie5=this.pie5||adjust6(this.secondaryColor,{l:-10}),this.pie6=this.pie6||adjust6(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||adjust6(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||adjust6(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||adjust6(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||adjust6(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||adjust6(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||adjust6(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||adjust6(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||adjust6(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||adjust6(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||adjust6(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||adjust6(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||adjust6(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||isDark$1(this.quadrant1Fill)?lighten$1(this.quadrant1Fill):darken$1(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((ne=this.xyChart)==null?void 0:ne.backgroundColor)||this.background,titleColor:((re=this.xyChart)==null?void 0:re.titleColor)||this.primaryTextColor,xAxisTitleColor:((oe=this.xyChart)==null?void 0:oe.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((le=this.xyChart)==null?void 0:le.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((ae=this.xyChart)==null?void 0:ae.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((he=this.xyChart)==null?void 0:he.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((de=this.xyChart)==null?void 0:de.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((ue=this.xyChart)==null?void 0:ue.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((pe=this.xyChart)==null?void 0:pe.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((fe=this.xyChart)==null?void 0:fe.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((ge=this.xyChart)==null?void 0:ge.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?darken$1(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust6(this.primaryColor,{h:-30}),this.git4=this.git4||adjust6(this.primaryColor,{h:-60}),this.git5=this.git5||adjust6(this.primaryColor,{h:-90}),this.git6=this.git6||adjust6(this.primaryColor,{h:60}),this.git7=this.git7||adjust6(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten$1(this.git0,25),this.git1=lighten$1(this.git1,25),this.git2=lighten$1(this.git2,25),this.git3=lighten$1(this.git3,25),this.git4=lighten$1(this.git4,25),this.git5=lighten$1(this.git5,25),this.git6=lighten$1(this.git6,25),this.git7=lighten$1(this.git7,25)):(this.git0=darken$1(this.git0,25),this.git1=darken$1(this.git1,25),this.git2=darken$1(this.git2,25),this.git3=darken$1(this.git3,25),this.git4=darken$1(this.git4,25),this.git5=darken$1(this.git5,25),this.git6=darken$1(this.git6,25),this.git7=darken$1(this.git7,25)),this.gitInv0=this.gitInv0||invert5(this.git0),this.gitInv1=this.gitInv1||invert5(this.git1),this.gitInv2=this.gitInv2||invert5(this.git2),this.gitInv3=this.gitInv3||invert5(this.git3),this.gitInv4=this.gitInv4||invert5(this.git4),this.gitInv5=this.gitInv5||invert5(this.git5),this.gitInv6=this.gitInv6||invert5(this.git6),this.gitInv7=this.gitInv7||invert5(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(te){if(typeof te!="object"){this.updateColors();return}const ne=Object.keys(te);ne.forEach(re=>{this[re]=te[re]}),this.updateColors(),ne.forEach(re=>{this[re]=te[re]})}},__name(Yo,"Theme"),Yo),getThemeVariables=__name(ie=>{const te=new Theme;return te.calculate(ie),te},"getThemeVariables"),Ko,Theme2=(Ko=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=lighten$1(this.primaryColor,16),this.tertiaryColor=adjust6(this.primaryColor,{h:-160}),this.primaryBorderColor=invert5(this.background),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert5(this.primaryColor),this.secondaryTextColor=invert5(this.secondaryColor),this.tertiaryTextColor=invert5(this.tertiaryColor),this.lineColor=invert5(this.background),this.textColor=invert5(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=lighten$1(invert5("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=rgba2(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=darken$1("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=darken$1(this.sectionBkgColor,10),this.taskBorderColor=rgba2(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=rgba2(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var te,ne,re,oe,le,ae,he,de,ue,pe,fe;this.secondBkg=lighten$1(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=lighten$1(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=lighten$1(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust6(this.primaryColor,{h:64}),this.fillType3=adjust6(this.secondaryColor,{h:64}),this.fillType4=adjust6(this.primaryColor,{h:-64}),this.fillType5=adjust6(this.secondaryColor,{h:-64}),this.fillType6=adjust6(this.primaryColor,{h:128}),this.fillType7=adjust6(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust6(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust6(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust6(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust6(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust6(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust6(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust6(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust6(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust6(this.primaryColor,{h:330});for(let ge=0;ge<this.THEME_COLOR_LIMIT;ge++)this["cScaleInv"+ge]=this["cScaleInv"+ge]||invert5(this["cScale"+ge]);for(let ge=0;ge<this.THEME_COLOR_LIMIT;ge++)this["cScalePeer"+ge]=this["cScalePeer"+ge]||lighten$1(this["cScale"+ge],10);for(let ge=0;ge<5;ge++)this["surface"+ge]=this["surface"+ge]||adjust6(this.mainBkg,{h:30,s:-30,l:-(-10+ge*4)}),this["surfacePeer"+ge]=this["surfacePeer"+ge]||adjust6(this.mainBkg,{h:30,s:-30,l:-(-7+ge*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let ge=0;ge<this.THEME_COLOR_LIMIT;ge++)this["cScaleLabel"+ge]=this["cScaleLabel"+ge]||this.scaleLabelColor;for(let ge=0;ge<this.THEME_COLOR_LIMIT;ge++)this["pie"+ge]=this["cScale"+ge];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||adjust6(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||adjust6(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||adjust6(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||adjust6(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||adjust6(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||adjust6(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||isDark$1(this.quadrant1Fill)?lighten$1(this.quadrant1Fill):darken$1(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((te=this.xyChart)==null?void 0:te.backgroundColor)||this.background,titleColor:((ne=this.xyChart)==null?void 0:ne.titleColor)||this.primaryTextColor,xAxisTitleColor:((re=this.xyChart)==null?void 0:re.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((oe=this.xyChart)==null?void 0:oe.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((le=this.xyChart)==null?void 0:le.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((ae=this.xyChart)==null?void 0:ae.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((he=this.xyChart)==null?void 0:he.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((de=this.xyChart)==null?void 0:de.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((ue=this.xyChart)==null?void 0:ue.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((pe=this.xyChart)==null?void 0:pe.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((fe=this.xyChart)==null?void 0:fe.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?darken$1(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=lighten$1(this.secondaryColor,20),this.git1=lighten$1(this.pie2||this.secondaryColor,20),this.git2=lighten$1(this.pie3||this.tertiaryColor,20),this.git3=lighten$1(this.pie4||adjust6(this.primaryColor,{h:-30}),20),this.git4=lighten$1(this.pie5||adjust6(this.primaryColor,{h:-60}),20),this.git5=lighten$1(this.pie6||adjust6(this.primaryColor,{h:-90}),10),this.git6=lighten$1(this.pie7||adjust6(this.primaryColor,{h:60}),10),this.git7=lighten$1(this.pie8||adjust6(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||invert5(this.git0),this.gitInv1=this.gitInv1||invert5(this.git1),this.gitInv2=this.gitInv2||invert5(this.git2),this.gitInv3=this.gitInv3||invert5(this.git3),this.gitInv4=this.gitInv4||invert5(this.git4),this.gitInv5=this.gitInv5||invert5(this.git5),this.gitInv6=this.gitInv6||invert5(this.git6),this.gitInv7=this.gitInv7||invert5(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||invert5(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||invert5(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||lighten$1(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||lighten$1(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(te){if(typeof te!="object"){this.updateColors();return}const ne=Object.keys(te);ne.forEach(re=>{this[re]=te[re]}),this.updateColors(),ne.forEach(re=>{this[re]=te[re]})}},__name(Ko,"Theme"),Ko),getThemeVariables2=__name(ie=>{const te=new Theme2;return te.calculate(ie),te},"getThemeVariables"),qo,Theme3=(qo=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=adjust6(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=adjust6(this.primaryColor,{h:-160}),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert5(this.primaryColor),this.secondaryTextColor=invert5(this.secondaryColor),this.tertiaryTextColor=invert5(this.tertiaryColor),this.lineColor=invert5(this.background),this.textColor=invert5(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=rgba2(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var te,ne,re,oe,le,ae,he,de,ue,pe,fe;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust6(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust6(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust6(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust6(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust6(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust6(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust6(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust6(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust6(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||darken$1(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||darken$1(this.tertiaryColor,40);for(let ge=0;ge<this.THEME_COLOR_LIMIT;ge++)this["cScale"+ge]=darken$1(this["cScale"+ge],10),this["cScalePeer"+ge]=this["cScalePeer"+ge]||darken$1(this["cScale"+ge],25);for(let ge=0;ge<this.THEME_COLOR_LIMIT;ge++)this["cScaleInv"+ge]=this["cScaleInv"+ge]||adjust6(this["cScale"+ge],{h:180});for(let ge=0;ge<5;ge++)this["surface"+ge]=this["surface"+ge]||adjust6(this.mainBkg,{h:30,l:-(5+ge*5)}),this["surfacePeer"+ge]=this["surfacePeer"+ge]||adjust6(this.mainBkg,{h:30,l:-(7+ge*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||invert5(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||invert5(this.labelTextColor);for(let ge=0;ge<this.THEME_COLOR_LIMIT;ge++)this["cScaleLabel"+ge]=this["cScaleLabel"+ge]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=lighten$1(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust6(this.primaryColor,{h:64}),this.fillType3=adjust6(this.secondaryColor,{h:64}),this.fillType4=adjust6(this.primaryColor,{h:-64}),this.fillType5=adjust6(this.secondaryColor,{h:-64}),this.fillType6=adjust6(this.primaryColor,{h:128}),this.fillType7=adjust6(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||adjust6(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||adjust6(this.primaryColor,{l:-10}),this.pie5=this.pie5||adjust6(this.secondaryColor,{l:-30}),this.pie6=this.pie6||adjust6(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||adjust6(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||adjust6(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||adjust6(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||adjust6(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||adjust6(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||adjust6(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||adjust6(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||adjust6(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||adjust6(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||adjust6(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||adjust6(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||adjust6(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||isDark$1(this.quadrant1Fill)?lighten$1(this.quadrant1Fill):darken$1(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((te=this.xyChart)==null?void 0:te.backgroundColor)||this.background,titleColor:((ne=this.xyChart)==null?void 0:ne.titleColor)||this.primaryTextColor,xAxisTitleColor:((re=this.xyChart)==null?void 0:re.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((oe=this.xyChart)==null?void 0:oe.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((le=this.xyChart)==null?void 0:le.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((ae=this.xyChart)==null?void 0:ae.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((he=this.xyChart)==null?void 0:he.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((de=this.xyChart)==null?void 0:de.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((ue=this.xyChart)==null?void 0:ue.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((pe=this.xyChart)==null?void 0:pe.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((fe=this.xyChart)==null?void 0:fe.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust6(this.primaryColor,{h:-30}),this.git4=this.git4||adjust6(this.primaryColor,{h:-60}),this.git5=this.git5||adjust6(this.primaryColor,{h:-90}),this.git6=this.git6||adjust6(this.primaryColor,{h:60}),this.git7=this.git7||adjust6(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten$1(this.git0,25),this.git1=lighten$1(this.git1,25),this.git2=lighten$1(this.git2,25),this.git3=lighten$1(this.git3,25),this.git4=lighten$1(this.git4,25),this.git5=lighten$1(this.git5,25),this.git6=lighten$1(this.git6,25),this.git7=lighten$1(this.git7,25)):(this.git0=darken$1(this.git0,25),this.git1=darken$1(this.git1,25),this.git2=darken$1(this.git2,25),this.git3=darken$1(this.git3,25),this.git4=darken$1(this.git4,25),this.git5=darken$1(this.git5,25),this.git6=darken$1(this.git6,25),this.git7=darken$1(this.git7,25)),this.gitInv0=this.gitInv0||darken$1(invert5(this.git0),25),this.gitInv1=this.gitInv1||invert5(this.git1),this.gitInv2=this.gitInv2||invert5(this.git2),this.gitInv3=this.gitInv3||invert5(this.git3),this.gitInv4=this.gitInv4||invert5(this.git4),this.gitInv5=this.gitInv5||invert5(this.git5),this.gitInv6=this.gitInv6||invert5(this.git6),this.gitInv7=this.gitInv7||invert5(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||invert5(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||invert5(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(te){if(typeof te!="object"){this.updateColors();return}const ne=Object.keys(te);ne.forEach(re=>{this[re]=te[re]}),this.updateColors(),ne.forEach(re=>{this[re]=te[re]})}},__name(qo,"Theme"),qo),getThemeVariables3=__name(ie=>{const te=new Theme3;return te.calculate(ie),te},"getThemeVariables"),Jo,Theme4=(Jo=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=lighten$1("#cde498",10),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert5(this.primaryColor),this.secondaryTextColor=invert5(this.secondaryColor),this.tertiaryTextColor=invert5(this.primaryColor),this.lineColor=invert5(this.background),this.textColor=invert5(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var te,ne,re,oe,le,ae,he,de,ue,pe,fe;this.actorBorder=darken$1(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust6(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust6(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust6(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust6(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust6(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust6(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust6(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust6(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust6(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||darken$1(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||darken$1(this.tertiaryColor,40);for(let ge=0;ge<this.THEME_COLOR_LIMIT;ge++)this["cScale"+ge]=darken$1(this["cScale"+ge],10),this["cScalePeer"+ge]=this["cScalePeer"+ge]||darken$1(this["cScale"+ge],25);for(let ge=0;ge<this.THEME_COLOR_LIMIT;ge++)this["cScaleInv"+ge]=this["cScaleInv"+ge]||adjust6(this["cScale"+ge],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let ge=0;ge<this.THEME_COLOR_LIMIT;ge++)this["cScaleLabel"+ge]=this["cScaleLabel"+ge]||this.scaleLabelColor;for(let ge=0;ge<5;ge++)this["surface"+ge]=this["surface"+ge]||adjust6(this.mainBkg,{h:30,s:-30,l:-(5+ge*5)}),this["surfacePeer"+ge]=this["surfacePeer"+ge]||adjust6(this.mainBkg,{h:30,s:-30,l:-(8+ge*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust6(this.primaryColor,{h:64}),this.fillType3=adjust6(this.secondaryColor,{h:64}),this.fillType4=adjust6(this.primaryColor,{h:-64}),this.fillType5=adjust6(this.secondaryColor,{h:-64}),this.fillType6=adjust6(this.primaryColor,{h:128}),this.fillType7=adjust6(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||adjust6(this.primaryColor,{l:-30}),this.pie5=this.pie5||adjust6(this.secondaryColor,{l:-30}),this.pie6=this.pie6||adjust6(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||adjust6(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||adjust6(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||adjust6(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||adjust6(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||adjust6(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||adjust6(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||adjust6(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||adjust6(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||adjust6(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||adjust6(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||adjust6(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||adjust6(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||isDark$1(this.quadrant1Fill)?lighten$1(this.quadrant1Fill):darken$1(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.xyChart={backgroundColor:((te=this.xyChart)==null?void 0:te.backgroundColor)||this.background,titleColor:((ne=this.xyChart)==null?void 0:ne.titleColor)||this.primaryTextColor,xAxisTitleColor:((re=this.xyChart)==null?void 0:re.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((oe=this.xyChart)==null?void 0:oe.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((le=this.xyChart)==null?void 0:le.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((ae=this.xyChart)==null?void 0:ae.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((he=this.xyChart)==null?void 0:he.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((de=this.xyChart)==null?void 0:de.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((ue=this.xyChart)==null?void 0:ue.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((pe=this.xyChart)==null?void 0:pe.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((fe=this.xyChart)==null?void 0:fe.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust6(this.primaryColor,{h:-30}),this.git4=this.git4||adjust6(this.primaryColor,{h:-60}),this.git5=this.git5||adjust6(this.primaryColor,{h:-90}),this.git6=this.git6||adjust6(this.primaryColor,{h:60}),this.git7=this.git7||adjust6(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten$1(this.git0,25),this.git1=lighten$1(this.git1,25),this.git2=lighten$1(this.git2,25),this.git3=lighten$1(this.git3,25),this.git4=lighten$1(this.git4,25),this.git5=lighten$1(this.git5,25),this.git6=lighten$1(this.git6,25),this.git7=lighten$1(this.git7,25)):(this.git0=darken$1(this.git0,25),this.git1=darken$1(this.git1,25),this.git2=darken$1(this.git2,25),this.git3=darken$1(this.git3,25),this.git4=darken$1(this.git4,25),this.git5=darken$1(this.git5,25),this.git6=darken$1(this.git6,25),this.git7=darken$1(this.git7,25)),this.gitInv0=this.gitInv0||invert5(this.git0),this.gitInv1=this.gitInv1||invert5(this.git1),this.gitInv2=this.gitInv2||invert5(this.git2),this.gitInv3=this.gitInv3||invert5(this.git3),this.gitInv4=this.gitInv4||invert5(this.git4),this.gitInv5=this.gitInv5||invert5(this.git5),this.gitInv6=this.gitInv6||invert5(this.git6),this.gitInv7=this.gitInv7||invert5(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||invert5(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||invert5(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(te){if(typeof te!="object"){this.updateColors();return}const ne=Object.keys(te);ne.forEach(re=>{this[re]=te[re]}),this.updateColors(),ne.forEach(re=>{this[re]=te[re]})}},__name(Jo,"Theme"),Jo),getThemeVariables4=__name(ie=>{const te=new Theme4;return te.calculate(ie),te},"getThemeVariables"),Zo,Theme5=(Zo=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=lighten$1(this.contrast,55),this.background="#ffffff",this.tertiaryColor=adjust6(this.primaryColor,{h:-160}),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert5(this.primaryColor),this.secondaryTextColor=invert5(this.secondaryColor),this.tertiaryTextColor=invert5(this.tertiaryColor),this.lineColor=invert5(this.background),this.textColor=invert5(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var te,ne,re,oe,le,ae,he,de,ue,pe,fe;this.secondBkg=lighten$1(this.contrast,55),this.border2=this.contrast,this.actorBorder=lighten$1(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let ge=0;ge<this.THEME_COLOR_LIMIT;ge++)this["cScaleInv"+ge]=this["cScaleInv"+ge]||invert5(this["cScale"+ge]);for(let ge=0;ge<this.THEME_COLOR_LIMIT;ge++)this.darkMode?this["cScalePeer"+ge]=this["cScalePeer"+ge]||lighten$1(this["cScale"+ge],10):this["cScalePeer"+ge]=this["cScalePeer"+ge]||darken$1(this["cScale"+ge],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let ge=0;ge<this.THEME_COLOR_LIMIT;ge++)this["cScaleLabel"+ge]=this["cScaleLabel"+ge]||this.scaleLabelColor;for(let ge=0;ge<5;ge++)this["surface"+ge]=this["surface"+ge]||adjust6(this.mainBkg,{l:-(5+ge*5)}),this["surfacePeer"+ge]=this["surfacePeer"+ge]||adjust6(this.mainBkg,{l:-(8+ge*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=lighten$1(this.contrast,30),this.sectionBkgColor2=lighten$1(this.contrast,30),this.taskBorderColor=darken$1(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=lighten$1(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=darken$1(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust6(this.primaryColor,{h:64}),this.fillType3=adjust6(this.secondaryColor,{h:64}),this.fillType4=adjust6(this.primaryColor,{h:-64}),this.fillType5=adjust6(this.secondaryColor,{h:-64}),this.fillType6=adjust6(this.primaryColor,{h:128}),this.fillType7=adjust6(this.secondaryColor,{h:128});for(let ge=0;ge<this.THEME_COLOR_LIMIT;ge++)this["pie"+ge]=this["cScale"+ge];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||adjust6(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||adjust6(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||adjust6(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||adjust6(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||adjust6(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||adjust6(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||isDark$1(this.quadrant1Fill)?lighten$1(this.quadrant1Fill):darken$1(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((te=this.xyChart)==null?void 0:te.backgroundColor)||this.background,titleColor:((ne=this.xyChart)==null?void 0:ne.titleColor)||this.primaryTextColor,xAxisTitleColor:((re=this.xyChart)==null?void 0:re.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((oe=this.xyChart)==null?void 0:oe.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((le=this.xyChart)==null?void 0:le.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((ae=this.xyChart)==null?void 0:ae.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((he=this.xyChart)==null?void 0:he.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((de=this.xyChart)==null?void 0:de.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((ue=this.xyChart)==null?void 0:ue.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((pe=this.xyChart)==null?void 0:pe.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((fe=this.xyChart)==null?void 0:fe.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=darken$1(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||adjust6(this.primaryColor,{h:-30}),this.git4=this.pie5||adjust6(this.primaryColor,{h:-60}),this.git5=this.pie6||adjust6(this.primaryColor,{h:-90}),this.git6=this.pie7||adjust6(this.primaryColor,{h:60}),this.git7=this.pie8||adjust6(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||invert5(this.git0),this.gitInv1=this.gitInv1||invert5(this.git1),this.gitInv2=this.gitInv2||invert5(this.git2),this.gitInv3=this.gitInv3||invert5(this.git3),this.gitInv4=this.gitInv4||invert5(this.git4),this.gitInv5=this.gitInv5||invert5(this.git5),this.gitInv6=this.gitInv6||invert5(this.git6),this.gitInv7=this.gitInv7||invert5(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(te){if(typeof te!="object"){this.updateColors();return}const ne=Object.keys(te);ne.forEach(re=>{this[re]=te[re]}),this.updateColors(),ne.forEach(re=>{this[re]=te[re]})}},__name(Zo,"Theme"),Zo),getThemeVariables5=__name(ie=>{const te=new Theme5;return te.calculate(ie),te},"getThemeVariables"),themes_default={base:{getThemeVariables},dark:{getThemeVariables:getThemeVariables2},default:{getThemeVariables:getThemeVariables3},forest:{getThemeVariables:getThemeVariables4},neutral:{getThemeVariables:getThemeVariables5}},config_schema_default={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},config={...config_schema_default,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF"},themeCSS:void 0,themeVariables:themes_default.default.getThemeVariables(),sequence:{...config_schema_default.sequence,messageFont:__name(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:__name(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:__name(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...config_schema_default.gantt,tickInterval:void 0,useWidth:void 0},c4:{...config_schema_default.c4,useWidth:void 0,personFont:__name(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),external_personFont:__name(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:__name(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:__name(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:__name(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:__name(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:__name(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:__name(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:__name(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:__name(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:__name(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:__name(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:__name(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:__name(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:__name(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:__name(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:__name(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:__name(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:__name(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:__name(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:__name(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:__name(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...config_schema_default.pie,useWidth:984},xyChart:{...config_schema_default.xyChart,useWidth:void 0},requirement:{...config_schema_default.requirement,useWidth:void 0},packet:{...config_schema_default.packet}},keyify=__name((ie,te="")=>Object.keys(ie).reduce((ne,re)=>Array.isArray(ie[re])?ne:typeof ie[re]=="object"&&ie[re]!==null?[...ne,te+re,...keyify(ie[re],"")]:[...ne,te+re],[]),"keyify"),configKeys=new Set(keyify(config,"")),defaultConfig_default=config,sanitizeDirective=__name(ie=>{if(log.debug("sanitizeDirective called with",ie),!(typeof ie!="object"||ie==null)){if(Array.isArray(ie)){ie.forEach(te=>sanitizeDirective(te));return}for(const te of Object.keys(ie)){if(log.debug("Checking key",te),te.startsWith("__")||te.includes("proto")||te.includes("constr")||!configKeys.has(te)||ie[te]==null){log.debug("sanitize deleting key: ",te),delete ie[te];continue}if(typeof ie[te]=="object"){log.debug("sanitizing object",te),sanitizeDirective(ie[te]);continue}const ne=["themeCSS","fontFamily","altFontFamily"];for(const re of ne)te.includes(re)&&(log.debug("sanitizing css option",te),ie[te]=sanitizeCss(ie[te]))}if(ie.themeVariables)for(const te of Object.keys(ie.themeVariables)){const ne=ie.themeVariables[te];ne!=null&&ne.match&&!ne.match(/^[\d "#%(),.;A-Za-z]+$/)&&(ie.themeVariables[te]="")}log.debug("After sanitization",ie)}},"sanitizeDirective"),sanitizeCss=__name(ie=>{let te=0,ne=0;for(const re of ie){if(te<ne)return"{ /* ERROR: Unbalanced CSS */ }";re==="{"?te++:re==="}"&&ne++}return te!==ne?"{ /* ERROR: Unbalanced CSS */ }":ie},"sanitizeCss"),defaultConfig=Object.freeze(defaultConfig_default),siteConfig=assignWithDepth_default({},defaultConfig),configFromInitialize,directives=[],currentConfig=assignWithDepth_default({},defaultConfig),updateCurrentConfig=__name((ie,te)=>{let ne=assignWithDepth_default({},ie),re={};for(const oe of te)sanitize(oe),re=assignWithDepth_default(re,oe);if(ne=assignWithDepth_default(ne,re),re.theme&&re.theme in themes_default){const oe=assignWithDepth_default({},configFromInitialize),le=assignWithDepth_default(oe.themeVariables||{},re.themeVariables);ne.theme&&ne.theme in themes_default&&(ne.themeVariables=themes_default[ne.theme].getThemeVariables(le))}return currentConfig=ne,checkConfig(currentConfig),currentConfig},"updateCurrentConfig"),setSiteConfig=__name(ie=>(siteConfig=assignWithDepth_default({},defaultConfig),siteConfig=assignWithDepth_default(siteConfig,ie),ie.theme&&themes_default[ie.theme]&&(siteConfig.themeVariables=themes_default[ie.theme].getThemeVariables(ie.themeVariables)),updateCurrentConfig(siteConfig,directives),siteConfig),"setSiteConfig"),saveConfigFromInitialize=__name(ie=>{configFromInitialize=assignWithDepth_default({},ie)},"saveConfigFromInitialize"),updateSiteConfig=__name(ie=>(siteConfig=assignWithDepth_default(siteConfig,ie),updateCurrentConfig(siteConfig,directives),siteConfig),"updateSiteConfig"),getSiteConfig=__name(()=>assignWithDepth_default({},siteConfig),"getSiteConfig"),setConfig=__name(ie=>(checkConfig(ie),assignWithDepth_default(currentConfig,ie),getConfig()),"setConfig"),getConfig=__name(()=>assignWithDepth_default({},currentConfig),"getConfig"),sanitize=__name(ie=>{ie&&(["secure",...siteConfig.secure??[]].forEach(te=>{Object.hasOwn(ie,te)&&(log.debug(`Denied attempt to modify a secure key ${te}`,ie[te]),delete ie[te])}),Object.keys(ie).forEach(te=>{te.startsWith("__")&&delete ie[te]}),Object.keys(ie).forEach(te=>{typeof ie[te]=="string"&&(ie[te].includes("<")||ie[te].includes(">")||ie[te].includes("url(data:"))&&delete ie[te],typeof ie[te]=="object"&&sanitize(ie[te])}))},"sanitize"),addDirective=__name(ie=>{var te;sanitizeDirective(ie),ie.fontFamily&&!((te=ie.themeVariables)!=null&&te.fontFamily)&&(ie.themeVariables={...ie.themeVariables,fontFamily:ie.fontFamily}),directives.push(ie),updateCurrentConfig(siteConfig,directives)},"addDirective"),reset=__name((ie=siteConfig)=>{directives=[],updateCurrentConfig(ie,directives)},"reset"),ConfigWarning={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},issuedWarnings={},issueWarning=__name(ie=>{issuedWarnings[ie]||(log.warn(ConfigWarning[ie]),issuedWarnings[ie]=!0)},"issueWarning"),checkConfig=__name(ie=>{ie&&(ie.lazyLoadedDiagrams||ie.loadExternalDiagramsAtStartup)&&issueWarning("LAZY_LOAD_DEPRECATED")},"checkConfig"),lineBreakRegex=/<br\s*\/?>/gi,getRows=__name(ie=>ie?breakToPlaceholder(ie).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),setupDompurifyHooksIfNotSetup=(()=>{let ie=!1;return()=>{ie||(setupDompurifyHooks(),ie=!0)}})();function setupDompurifyHooks(){const ie="data-temp-href-target";purify.addHook("beforeSanitizeAttributes",te=>{te instanceof Element&&te.tagName==="A"&&te.hasAttribute("target")&&te.setAttribute(ie,te.getAttribute("target")??"")}),purify.addHook("afterSanitizeAttributes",te=>{te instanceof Element&&te.tagName==="A"&&te.hasAttribute(ie)&&(te.setAttribute("target",te.getAttribute(ie)??""),te.removeAttribute(ie),te.getAttribute("target")==="_blank"&&te.setAttribute("rel","noopener"))})}__name(setupDompurifyHooks,"setupDompurifyHooks");var removeScript=__name(ie=>(setupDompurifyHooksIfNotSetup(),purify.sanitize(ie)),"removeScript"),sanitizeMore=__name((ie,te)=>{var ne;if(((ne=te.flowchart)==null?void 0:ne.htmlLabels)!==!1){const re=te.securityLevel;re==="antiscript"||re==="strict"?ie=removeScript(ie):re!=="loose"&&(ie=breakToPlaceholder(ie),ie=ie.replace(/</g,"&lt;").replace(/>/g,"&gt;"),ie=ie.replace(/=/g,"&equals;"),ie=placeholderToBreak(ie))}return ie},"sanitizeMore"),sanitizeText=__name((ie,te)=>ie&&(te.dompurifyConfig?ie=purify.sanitize(sanitizeMore(ie,te),te.dompurifyConfig).toString():ie=purify.sanitize(sanitizeMore(ie,te),{FORBID_TAGS:["style"]}).toString(),ie),"sanitizeText"),sanitizeTextOrArray=__name((ie,te)=>typeof ie=="string"?sanitizeText(ie,te):ie.flat().map(ne=>sanitizeText(ne,te)),"sanitizeTextOrArray"),hasBreaks=__name(ie=>lineBreakRegex.test(ie),"hasBreaks"),splitBreaks=__name(ie=>ie.split(lineBreakRegex),"splitBreaks"),placeholderToBreak=__name(ie=>ie.replace(/#br#/g,"<br/>"),"placeholderToBreak"),breakToPlaceholder=__name(ie=>ie.replace(lineBreakRegex,"#br#"),"breakToPlaceholder"),getUrl=__name(ie=>{let te="";return ie&&(te=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,te=te.replaceAll(/\(/g,"\\("),te=te.replaceAll(/\)/g,"\\)")),te},"getUrl"),evaluate=__name(ie=>!(ie===!1||["false","null","0"].includes(String(ie).trim().toLowerCase())),"evaluate"),getMax=__name(function(...ie){const te=ie.filter(ne=>!isNaN(ne));return Math.max(...te)},"getMax"),getMin=__name(function(...ie){const te=ie.filter(ne=>!isNaN(ne));return Math.min(...te)},"getMin"),parseGenericTypes=__name(function(ie){const te=ie.split(/(,)/),ne=[];for(let re=0;re<te.length;re++){let oe=te[re];if(oe===","&&re>0&&re+1<te.length){const le=te[re-1],ae=te[re+1];shouldCombineSets(le,ae)&&(oe=le+","+ae,re++,ne.pop())}ne.push(processSet(oe))}return ne.join("")},"parseGenericTypes"),countOccurrence=__name((ie,te)=>Math.max(0,ie.split(te).length-1),"countOccurrence"),shouldCombineSets=__name((ie,te)=>{const ne=countOccurrence(ie,"~"),re=countOccurrence(te,"~");return ne===1&&re===1},"shouldCombineSets"),processSet=__name(ie=>{const te=countOccurrence(ie,"~");let ne=!1;if(te<=1)return ie;te%2!==0&&ie.startsWith("~")&&(ie=ie.substring(1),ne=!0);const re=[...ie];let oe=re.indexOf("~"),le=re.lastIndexOf("~");for(;oe!==-1&&le!==-1&&oe!==le;)re[oe]="<",re[le]=">",oe=re.indexOf("~"),le=re.lastIndexOf("~");return ne&&re.unshift("~"),re.join("")},"processSet"),isMathMLSupported=__name(()=>window.MathMLElement!==void 0,"isMathMLSupported"),katexRegex=/\$\$(.*)\$\$/g,hasKatex=__name(ie=>{var te;return(((te=ie.match(katexRegex))==null?void 0:te.length)??0)>0},"hasKatex"),calculateMathMLDimensions=__name(async(ie,te)=>{ie=await renderKatex(ie,te);const ne=document.createElement("div");ne.innerHTML=ie,ne.id="katex-temp",ne.style.visibility="hidden",ne.style.position="absolute",ne.style.top="0";const re=document.querySelector("body");re==null||re.insertAdjacentElement("beforeend",ne);const oe={width:ne.clientWidth,height:ne.clientHeight};return ne.remove(),oe},"calculateMathMLDimensions"),renderKatex=__name(async(ie,te)=>{if(!hasKatex(ie))return ie;if(!(isMathMLSupported()||te.legacyMathML||te.forceLegacyMathML))return ie.replace(katexRegex,"MathML is unsupported in this environment.");const{default:ne}=await __vitePreload(()=>import("./katex-9a88bd85.js"),[]),re=te.forceLegacyMathML||!isMathMLSupported()&&te.legacyMathML?"htmlAndMathml":"mathml";return ie.split(lineBreakRegex).map(oe=>hasKatex(oe)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${oe}</div>`:`<div>${oe}</div>`).join("").replace(katexRegex,(oe,le)=>ne.renderToString(le,{throwOnError:!0,displayMode:!0,output:re}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))},"renderKatex"),common_default={getRows,sanitizeText,sanitizeTextOrArray,hasBreaks,splitBreaks,lineBreakRegex,removeScript,getUrl,evaluate,getMax,getMin},d3Attrs=__name(function(ie,te){for(let ne of te)ie.attr(ne[0],ne[1])},"d3Attrs"),calculateSvgSizeAttrs=__name(function(ie,te,ne){let re=new Map;return ne?(re.set("width","100%"),re.set("style",`max-width: ${te}px;`)):(re.set("height",ie),re.set("width",te)),re},"calculateSvgSizeAttrs"),configureSvgSize=__name(function(ie,te,ne,re){const oe=calculateSvgSizeAttrs(te,ne,re);d3Attrs(ie,oe)},"configureSvgSize"),setupGraphViewbox=__name(function(ie,te,ne,re){const oe=te.node().getBBox(),le=oe.width,ae=oe.height;log.info(`SVG bounds: ${le}x${ae}`,oe);let he=0,de=0;log.info(`Graph bounds: ${he}x${de}`,ie),he=le+ne*2,de=ae+ne*2,log.info(`Calculated bounds: ${he}x${de}`),configureSvgSize(te,de,he,re);const ue=`${oe.x-ne} ${oe.y-ne} ${oe.width+2*ne} ${oe.height+2*ne}`;te.attr("viewBox",ue)},"setupGraphViewbox"),themes={},getStyles=__name((ie,te,ne)=>{let re="";return ie in themes&&themes[ie]?re=themes[ie](ne):log.warn(`No theme found for ${ie}`),` & {
    font-family: ${ne.fontFamily};
    font-size: ${ne.fontSize};
    fill: ${ne.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${ne.errorBkgColor};
  }
  & .error-text {
    fill: ${ne.errorTextColor};
    stroke: ${ne.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${ne.lineColor};
    stroke: ${ne.lineColor};
  }
  & .marker.cross {
    stroke: ${ne.lineColor};
  }

  & svg {
    font-family: ${ne.fontFamily};
    font-size: ${ne.fontSize};
  }
   & p {
    margin: 0
   }

  ${re}

  ${te}
`},"getStyles"),addStylesForDiagram=__name((ie,te)=>{te!==void 0&&(themes[ie]=te)},"addStylesForDiagram"),styles_default=getStyles,commonDb_exports={};__export(commonDb_exports,{clear:()=>clear$2,getAccDescription:()=>getAccDescription,getAccTitle:()=>getAccTitle,getDiagramTitle:()=>getDiagramTitle,setAccDescription:()=>setAccDescription,setAccTitle:()=>setAccTitle,setDiagramTitle:()=>setDiagramTitle});var accTitle="",diagramTitle="",accDescription="",sanitizeText2=__name(ie=>sanitizeText(ie,getConfig()),"sanitizeText"),clear$2=__name(()=>{accTitle="",accDescription="",diagramTitle=""},"clear"),setAccTitle=__name(ie=>{accTitle=sanitizeText2(ie).replace(/^\s+/g,"")},"setAccTitle"),getAccTitle=__name(()=>accTitle,"getAccTitle"),setAccDescription=__name(ie=>{accDescription=sanitizeText2(ie).replace(/\n\s+/g,`
`)},"setAccDescription"),getAccDescription=__name(()=>accDescription,"getAccDescription"),setDiagramTitle=__name(ie=>{diagramTitle=sanitizeText2(ie)},"setDiagramTitle"),getDiagramTitle=__name(()=>diagramTitle,"getDiagramTitle"),log2=log,setLogLevel2=setLogLevel,getConfig2=getConfig,setConfig2=setConfig,defaultConfig2=defaultConfig,sanitizeText3=__name(ie=>sanitizeText(ie,getConfig2()),"sanitizeText"),setupGraphViewbox2=setupGraphViewbox,getCommonDb=__name(()=>commonDb_exports,"getCommonDb"),diagrams={},registerDiagram=__name((ie,te,ne)=>{var re;diagrams[ie]&&log2.warn(`Diagram with id ${ie} already registered. Overwriting.`),diagrams[ie]=te,ne&&addDetector(ie,ne),addStylesForDiagram(ie,te.styles),(re=te.injectUtils)==null||re.call(te,log2,setLogLevel2,getConfig2,sanitizeText3,setupGraphViewbox2,getCommonDb(),()=>{})},"registerDiagram"),getDiagram=__name(ie=>{if(ie in diagrams)return diagrams[ie];throw new DiagramNotFoundError(ie)},"getDiagram"),Qo,DiagramNotFoundError=(Qo=class extends Error{constructor(te){super(`Diagram ${te} not found.`)}},__name(Qo,"DiagramNotFoundError"),Qo);function isNothing(ie){return typeof ie>"u"||ie===null}__name(isNothing,"isNothing");function isObject$1(ie){return typeof ie=="object"&&ie!==null}__name(isObject$1,"isObject");function toArray(ie){return Array.isArray(ie)?ie:isNothing(ie)?[]:[ie]}__name(toArray,"toArray");function extend$1(ie,te){var ne,re,oe,le;if(te)for(le=Object.keys(te),ne=0,re=le.length;ne<re;ne+=1)oe=le[ne],ie[oe]=te[oe];return ie}__name(extend$1,"extend");function repeat(ie,te){var ne="",re;for(re=0;re<te;re+=1)ne+=ie;return ne}__name(repeat,"repeat");function isNegativeZero(ie){return ie===0&&Number.NEGATIVE_INFINITY===1/ie}__name(isNegativeZero,"isNegativeZero");var isNothing_1=isNothing,isObject_1=isObject$1,toArray_1=toArray,repeat_1=repeat,isNegativeZero_1=isNegativeZero,extend_1=extend$1,common={isNothing:isNothing_1,isObject:isObject_1,toArray:toArray_1,repeat:repeat_1,isNegativeZero:isNegativeZero_1,extend:extend_1};function formatError(ie,te){var ne="",re=ie.reason||"(unknown reason)";return ie.mark?(ie.mark.name&&(ne+='in "'+ie.mark.name+'" '),ne+="("+(ie.mark.line+1)+":"+(ie.mark.column+1)+")",!te&&ie.mark.snippet&&(ne+=`

`+ie.mark.snippet),re+" "+ne):re}__name(formatError,"formatError");function YAMLException$1(ie,te){Error.call(this),this.name="YAMLException",this.reason=ie,this.mark=te,this.message=formatError(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}__name(YAMLException$1,"YAMLException$1");YAMLException$1.prototype=Object.create(Error.prototype);YAMLException$1.prototype.constructor=YAMLException$1;YAMLException$1.prototype.toString=__name(function ie(te){return this.name+": "+formatError(this,te)},"toString");var exception=YAMLException$1;function getLine(ie,te,ne,re,oe){var le="",ae="",he=Math.floor(oe/2)-1;return re-te>he&&(le=" ... ",te=re-he+le.length),ne-re>he&&(ae=" ...",ne=re+he-ae.length),{str:le+ie.slice(te,ne).replace(/\t/g,"→")+ae,pos:re-te+le.length}}__name(getLine,"getLine");function padStart(ie,te){return common.repeat(" ",te-ie.length)+ie}__name(padStart,"padStart");function makeSnippet(ie,te){if(te=Object.create(te||null),!ie.buffer)return null;te.maxLength||(te.maxLength=79),typeof te.indent!="number"&&(te.indent=1),typeof te.linesBefore!="number"&&(te.linesBefore=3),typeof te.linesAfter!="number"&&(te.linesAfter=2);for(var ne=/\r?\n|\r|\0/g,re=[0],oe=[],le,ae=-1;le=ne.exec(ie.buffer);)oe.push(le.index),re.push(le.index+le[0].length),ie.position<=le.index&&ae<0&&(ae=re.length-2);ae<0&&(ae=re.length-1);var he="",de,ue,pe=Math.min(ie.line+te.linesAfter,oe.length).toString().length,fe=te.maxLength-(te.indent+pe+3);for(de=1;de<=te.linesBefore&&!(ae-de<0);de++)ue=getLine(ie.buffer,re[ae-de],oe[ae-de],ie.position-(re[ae]-re[ae-de]),fe),he=common.repeat(" ",te.indent)+padStart((ie.line-de+1).toString(),pe)+" | "+ue.str+`
`+he;for(ue=getLine(ie.buffer,re[ae],oe[ae],ie.position,fe),he+=common.repeat(" ",te.indent)+padStart((ie.line+1).toString(),pe)+" | "+ue.str+`
`,he+=common.repeat("-",te.indent+pe+3+ue.pos)+`^
`,de=1;de<=te.linesAfter&&!(ae+de>=oe.length);de++)ue=getLine(ie.buffer,re[ae+de],oe[ae+de],ie.position-(re[ae]-re[ae+de]),fe),he+=common.repeat(" ",te.indent)+padStart((ie.line+de+1).toString(),pe)+" | "+ue.str+`
`;return he.replace(/\n$/,"")}__name(makeSnippet,"makeSnippet");var snippet=makeSnippet,TYPE_CONSTRUCTOR_OPTIONS=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],YAML_NODE_KINDS=["scalar","sequence","mapping"];function compileStyleAliases(ie){var te={};return ie!==null&&Object.keys(ie).forEach(function(ne){ie[ne].forEach(function(re){te[String(re)]=ne})}),te}__name(compileStyleAliases,"compileStyleAliases");function Type$1(ie,te){if(te=te||{},Object.keys(te).forEach(function(ne){if(TYPE_CONSTRUCTOR_OPTIONS.indexOf(ne)===-1)throw new exception('Unknown option "'+ne+'" is met in definition of "'+ie+'" YAML type.')}),this.options=te,this.tag=ie,this.kind=te.kind||null,this.resolve=te.resolve||function(){return!0},this.construct=te.construct||function(ne){return ne},this.instanceOf=te.instanceOf||null,this.predicate=te.predicate||null,this.represent=te.represent||null,this.representName=te.representName||null,this.defaultStyle=te.defaultStyle||null,this.multi=te.multi||!1,this.styleAliases=compileStyleAliases(te.styleAliases||null),YAML_NODE_KINDS.indexOf(this.kind)===-1)throw new exception('Unknown kind "'+this.kind+'" is specified for "'+ie+'" YAML type.')}__name(Type$1,"Type$1");var type=Type$1;function compileList(ie,te){var ne=[];return ie[te].forEach(function(re){var oe=ne.length;ne.forEach(function(le,ae){le.tag===re.tag&&le.kind===re.kind&&le.multi===re.multi&&(oe=ae)}),ne[oe]=re}),ne}__name(compileList,"compileList");function compileMap(){var ie={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},te,ne;function re(oe){oe.multi?(ie.multi[oe.kind].push(oe),ie.multi.fallback.push(oe)):ie[oe.kind][oe.tag]=ie.fallback[oe.tag]=oe}for(__name(re,"collectType"),te=0,ne=arguments.length;te<ne;te+=1)arguments[te].forEach(re);return ie}__name(compileMap,"compileMap");function Schema$1(ie){return this.extend(ie)}__name(Schema$1,"Schema$1");Schema$1.prototype.extend=__name(function ie(te){var ne=[],re=[];if(te instanceof type)re.push(te);else if(Array.isArray(te))re=re.concat(te);else if(te&&(Array.isArray(te.implicit)||Array.isArray(te.explicit)))te.implicit&&(ne=ne.concat(te.implicit)),te.explicit&&(re=re.concat(te.explicit));else throw new exception("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");ne.forEach(function(le){if(!(le instanceof type))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(le.loadKind&&le.loadKind!=="scalar")throw new exception("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(le.multi)throw new exception("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),re.forEach(function(le){if(!(le instanceof type))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var oe=Object.create(Schema$1.prototype);return oe.implicit=(this.implicit||[]).concat(ne),oe.explicit=(this.explicit||[]).concat(re),oe.compiledImplicit=compileList(oe,"implicit"),oe.compiledExplicit=compileList(oe,"explicit"),oe.compiledTypeMap=compileMap(oe.compiledImplicit,oe.compiledExplicit),oe},"extend");var schema=Schema$1,str=new type("tag:yaml.org,2002:str",{kind:"scalar",construct:__name(function(ie){return ie!==null?ie:""},"construct")}),seq=new type("tag:yaml.org,2002:seq",{kind:"sequence",construct:__name(function(ie){return ie!==null?ie:[]},"construct")}),map=new type("tag:yaml.org,2002:map",{kind:"mapping",construct:__name(function(ie){return ie!==null?ie:{}},"construct")}),failsafe=new schema({explicit:[str,seq,map]});function resolveYamlNull(ie){if(ie===null)return!0;var te=ie.length;return te===1&&ie==="~"||te===4&&(ie==="null"||ie==="Null"||ie==="NULL")}__name(resolveYamlNull,"resolveYamlNull");function constructYamlNull(){return null}__name(constructYamlNull,"constructYamlNull");function isNull(ie){return ie===null}__name(isNull,"isNull");var _null=new type("tag:yaml.org,2002:null",{kind:"scalar",resolve:resolveYamlNull,construct:constructYamlNull,predicate:isNull,represent:{canonical:__name(function(){return"~"},"canonical"),lowercase:__name(function(){return"null"},"lowercase"),uppercase:__name(function(){return"NULL"},"uppercase"),camelcase:__name(function(){return"Null"},"camelcase"),empty:__name(function(){return""},"empty")},defaultStyle:"lowercase"});function resolveYamlBoolean(ie){if(ie===null)return!1;var te=ie.length;return te===4&&(ie==="true"||ie==="True"||ie==="TRUE")||te===5&&(ie==="false"||ie==="False"||ie==="FALSE")}__name(resolveYamlBoolean,"resolveYamlBoolean");function constructYamlBoolean(ie){return ie==="true"||ie==="True"||ie==="TRUE"}__name(constructYamlBoolean,"constructYamlBoolean");function isBoolean(ie){return Object.prototype.toString.call(ie)==="[object Boolean]"}__name(isBoolean,"isBoolean");var bool=new type("tag:yaml.org,2002:bool",{kind:"scalar",resolve:resolveYamlBoolean,construct:constructYamlBoolean,predicate:isBoolean,represent:{lowercase:__name(function(ie){return ie?"true":"false"},"lowercase"),uppercase:__name(function(ie){return ie?"TRUE":"FALSE"},"uppercase"),camelcase:__name(function(ie){return ie?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function isHexCode(ie){return 48<=ie&&ie<=57||65<=ie&&ie<=70||97<=ie&&ie<=102}__name(isHexCode,"isHexCode");function isOctCode(ie){return 48<=ie&&ie<=55}__name(isOctCode,"isOctCode");function isDecCode(ie){return 48<=ie&&ie<=57}__name(isDecCode,"isDecCode");function resolveYamlInteger(ie){if(ie===null)return!1;var te=ie.length,ne=0,re=!1,oe;if(!te)return!1;if(oe=ie[ne],(oe==="-"||oe==="+")&&(oe=ie[++ne]),oe==="0"){if(ne+1===te)return!0;if(oe=ie[++ne],oe==="b"){for(ne++;ne<te;ne++)if(oe=ie[ne],oe!=="_"){if(oe!=="0"&&oe!=="1")return!1;re=!0}return re&&oe!=="_"}if(oe==="x"){for(ne++;ne<te;ne++)if(oe=ie[ne],oe!=="_"){if(!isHexCode(ie.charCodeAt(ne)))return!1;re=!0}return re&&oe!=="_"}if(oe==="o"){for(ne++;ne<te;ne++)if(oe=ie[ne],oe!=="_"){if(!isOctCode(ie.charCodeAt(ne)))return!1;re=!0}return re&&oe!=="_"}}if(oe==="_")return!1;for(;ne<te;ne++)if(oe=ie[ne],oe!=="_"){if(!isDecCode(ie.charCodeAt(ne)))return!1;re=!0}return!(!re||oe==="_")}__name(resolveYamlInteger,"resolveYamlInteger");function constructYamlInteger(ie){var te=ie,ne=1,re;if(te.indexOf("_")!==-1&&(te=te.replace(/_/g,"")),re=te[0],(re==="-"||re==="+")&&(re==="-"&&(ne=-1),te=te.slice(1),re=te[0]),te==="0")return 0;if(re==="0"){if(te[1]==="b")return ne*parseInt(te.slice(2),2);if(te[1]==="x")return ne*parseInt(te.slice(2),16);if(te[1]==="o")return ne*parseInt(te.slice(2),8)}return ne*parseInt(te,10)}__name(constructYamlInteger,"constructYamlInteger");function isInteger(ie){return Object.prototype.toString.call(ie)==="[object Number]"&&ie%1===0&&!common.isNegativeZero(ie)}__name(isInteger,"isInteger");var int=new type("tag:yaml.org,2002:int",{kind:"scalar",resolve:resolveYamlInteger,construct:constructYamlInteger,predicate:isInteger,represent:{binary:__name(function(ie){return ie>=0?"0b"+ie.toString(2):"-0b"+ie.toString(2).slice(1)},"binary"),octal:__name(function(ie){return ie>=0?"0o"+ie.toString(8):"-0o"+ie.toString(8).slice(1)},"octal"),decimal:__name(function(ie){return ie.toString(10)},"decimal"),hexadecimal:__name(function(ie){return ie>=0?"0x"+ie.toString(16).toUpperCase():"-0x"+ie.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YAML_FLOAT_PATTERN=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function resolveYamlFloat(ie){return!(ie===null||!YAML_FLOAT_PATTERN.test(ie)||ie[ie.length-1]==="_")}__name(resolveYamlFloat,"resolveYamlFloat");function constructYamlFloat(ie){var te,ne;return te=ie.replace(/_/g,"").toLowerCase(),ne=te[0]==="-"?-1:1,"+-".indexOf(te[0])>=0&&(te=te.slice(1)),te===".inf"?ne===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:te===".nan"?NaN:ne*parseFloat(te,10)}__name(constructYamlFloat,"constructYamlFloat");var SCIENTIFIC_WITHOUT_DOT=/^[-+]?[0-9]+e/;function representYamlFloat(ie,te){var ne;if(isNaN(ie))switch(te){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===ie)switch(te){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===ie)switch(te){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(common.isNegativeZero(ie))return"-0.0";return ne=ie.toString(10),SCIENTIFIC_WITHOUT_DOT.test(ne)?ne.replace("e",".e"):ne}__name(representYamlFloat,"representYamlFloat");function isFloat(ie){return Object.prototype.toString.call(ie)==="[object Number]"&&(ie%1!==0||common.isNegativeZero(ie))}__name(isFloat,"isFloat");var float=new type("tag:yaml.org,2002:float",{kind:"scalar",resolve:resolveYamlFloat,construct:constructYamlFloat,predicate:isFloat,represent:representYamlFloat,defaultStyle:"lowercase"}),json=failsafe.extend({implicit:[_null,bool,int,float]}),core=json,YAML_DATE_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),YAML_TIMESTAMP_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function resolveYamlTimestamp(ie){return ie===null?!1:YAML_DATE_REGEXP.exec(ie)!==null||YAML_TIMESTAMP_REGEXP.exec(ie)!==null}__name(resolveYamlTimestamp,"resolveYamlTimestamp");function constructYamlTimestamp(ie){var te,ne,re,oe,le,ae,he,de=0,ue=null,pe,fe,ge;if(te=YAML_DATE_REGEXP.exec(ie),te===null&&(te=YAML_TIMESTAMP_REGEXP.exec(ie)),te===null)throw new Error("Date resolve error");if(ne=+te[1],re=+te[2]-1,oe=+te[3],!te[4])return new Date(Date.UTC(ne,re,oe));if(le=+te[4],ae=+te[5],he=+te[6],te[7]){for(de=te[7].slice(0,3);de.length<3;)de+="0";de=+de}return te[9]&&(pe=+te[10],fe=+(te[11]||0),ue=(pe*60+fe)*6e4,te[9]==="-"&&(ue=-ue)),ge=new Date(Date.UTC(ne,re,oe,le,ae,he,de)),ue&&ge.setTime(ge.getTime()-ue),ge}__name(constructYamlTimestamp,"constructYamlTimestamp");function representYamlTimestamp(ie){return ie.toISOString()}__name(representYamlTimestamp,"representYamlTimestamp");var timestamp=new type("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:resolveYamlTimestamp,construct:constructYamlTimestamp,instanceOf:Date,represent:representYamlTimestamp});function resolveYamlMerge(ie){return ie==="<<"||ie===null}__name(resolveYamlMerge,"resolveYamlMerge");var merge$2=new type("tag:yaml.org,2002:merge",{kind:"scalar",resolve:resolveYamlMerge}),BASE64_MAP=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function resolveYamlBinary(ie){if(ie===null)return!1;var te,ne,re=0,oe=ie.length,le=BASE64_MAP;for(ne=0;ne<oe;ne++)if(te=le.indexOf(ie.charAt(ne)),!(te>64)){if(te<0)return!1;re+=6}return re%8===0}__name(resolveYamlBinary,"resolveYamlBinary");function constructYamlBinary(ie){var te,ne,re=ie.replace(/[\r\n=]/g,""),oe=re.length,le=BASE64_MAP,ae=0,he=[];for(te=0;te<oe;te++)te%4===0&&te&&(he.push(ae>>16&255),he.push(ae>>8&255),he.push(ae&255)),ae=ae<<6|le.indexOf(re.charAt(te));return ne=oe%4*6,ne===0?(he.push(ae>>16&255),he.push(ae>>8&255),he.push(ae&255)):ne===18?(he.push(ae>>10&255),he.push(ae>>2&255)):ne===12&&he.push(ae>>4&255),new Uint8Array(he)}__name(constructYamlBinary,"constructYamlBinary");function representYamlBinary(ie){var te="",ne=0,re,oe,le=ie.length,ae=BASE64_MAP;for(re=0;re<le;re++)re%3===0&&re&&(te+=ae[ne>>18&63],te+=ae[ne>>12&63],te+=ae[ne>>6&63],te+=ae[ne&63]),ne=(ne<<8)+ie[re];return oe=le%3,oe===0?(te+=ae[ne>>18&63],te+=ae[ne>>12&63],te+=ae[ne>>6&63],te+=ae[ne&63]):oe===2?(te+=ae[ne>>10&63],te+=ae[ne>>4&63],te+=ae[ne<<2&63],te+=ae[64]):oe===1&&(te+=ae[ne>>2&63],te+=ae[ne<<4&63],te+=ae[64],te+=ae[64]),te}__name(representYamlBinary,"representYamlBinary");function isBinary(ie){return Object.prototype.toString.call(ie)==="[object Uint8Array]"}__name(isBinary,"isBinary");var binary=new type("tag:yaml.org,2002:binary",{kind:"scalar",resolve:resolveYamlBinary,construct:constructYamlBinary,predicate:isBinary,represent:representYamlBinary}),_hasOwnProperty$3=Object.prototype.hasOwnProperty,_toString$2=Object.prototype.toString;function resolveYamlOmap(ie){if(ie===null)return!0;var te=[],ne,re,oe,le,ae,he=ie;for(ne=0,re=he.length;ne<re;ne+=1){if(oe=he[ne],ae=!1,_toString$2.call(oe)!=="[object Object]")return!1;for(le in oe)if(_hasOwnProperty$3.call(oe,le))if(!ae)ae=!0;else return!1;if(!ae)return!1;if(te.indexOf(le)===-1)te.push(le);else return!1}return!0}__name(resolveYamlOmap,"resolveYamlOmap");function constructYamlOmap(ie){return ie!==null?ie:[]}__name(constructYamlOmap,"constructYamlOmap");var omap=new type("tag:yaml.org,2002:omap",{kind:"sequence",resolve:resolveYamlOmap,construct:constructYamlOmap}),_toString$1=Object.prototype.toString;function resolveYamlPairs(ie){if(ie===null)return!0;var te,ne,re,oe,le,ae=ie;for(le=new Array(ae.length),te=0,ne=ae.length;te<ne;te+=1){if(re=ae[te],_toString$1.call(re)!=="[object Object]"||(oe=Object.keys(re),oe.length!==1))return!1;le[te]=[oe[0],re[oe[0]]]}return!0}__name(resolveYamlPairs,"resolveYamlPairs");function constructYamlPairs(ie){if(ie===null)return[];var te,ne,re,oe,le,ae=ie;for(le=new Array(ae.length),te=0,ne=ae.length;te<ne;te+=1)re=ae[te],oe=Object.keys(re),le[te]=[oe[0],re[oe[0]]];return le}__name(constructYamlPairs,"constructYamlPairs");var pairs=new type("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:resolveYamlPairs,construct:constructYamlPairs}),_hasOwnProperty$2=Object.prototype.hasOwnProperty;function resolveYamlSet(ie){if(ie===null)return!0;var te,ne=ie;for(te in ne)if(_hasOwnProperty$2.call(ne,te)&&ne[te]!==null)return!1;return!0}__name(resolveYamlSet,"resolveYamlSet");function constructYamlSet(ie){return ie!==null?ie:{}}__name(constructYamlSet,"constructYamlSet");var set$2=new type("tag:yaml.org,2002:set",{kind:"mapping",resolve:resolveYamlSet,construct:constructYamlSet}),_default=core.extend({implicit:[timestamp,merge$2],explicit:[binary,omap,pairs,set$2]}),_hasOwnProperty$1=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN=1,CONTEXT_FLOW_OUT=2,CONTEXT_BLOCK_IN=3,CONTEXT_BLOCK_OUT=4,CHOMPING_CLIP=1,CHOMPING_STRIP=2,CHOMPING_KEEP=3,PATTERN_NON_PRINTABLE=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _class(ie){return Object.prototype.toString.call(ie)}__name(_class,"_class");function is_EOL(ie){return ie===10||ie===13}__name(is_EOL,"is_EOL");function is_WHITE_SPACE(ie){return ie===9||ie===32}__name(is_WHITE_SPACE,"is_WHITE_SPACE");function is_WS_OR_EOL(ie){return ie===9||ie===32||ie===10||ie===13}__name(is_WS_OR_EOL,"is_WS_OR_EOL");function is_FLOW_INDICATOR(ie){return ie===44||ie===91||ie===93||ie===123||ie===125}__name(is_FLOW_INDICATOR,"is_FLOW_INDICATOR");function fromHexCode(ie){var te;return 48<=ie&&ie<=57?ie-48:(te=ie|32,97<=te&&te<=102?te-97+10:-1)}__name(fromHexCode,"fromHexCode");function escapedHexLen(ie){return ie===120?2:ie===117?4:ie===85?8:0}__name(escapedHexLen,"escapedHexLen");function fromDecimalCode(ie){return 48<=ie&&ie<=57?ie-48:-1}__name(fromDecimalCode,"fromDecimalCode");function simpleEscapeSequence(ie){return ie===48?"\0":ie===97?"\x07":ie===98?"\b":ie===116||ie===9?"	":ie===110?`
`:ie===118?"\v":ie===102?"\f":ie===114?"\r":ie===101?"\x1B":ie===32?" ":ie===34?'"':ie===47?"/":ie===92?"\\":ie===78?"":ie===95?" ":ie===76?"\u2028":ie===80?"\u2029":""}__name(simpleEscapeSequence,"simpleEscapeSequence");function charFromCodepoint(ie){return ie<=65535?String.fromCharCode(ie):String.fromCharCode((ie-65536>>10)+55296,(ie-65536&1023)+56320)}__name(charFromCodepoint,"charFromCodepoint");var simpleEscapeCheck=new Array(256),simpleEscapeMap=new Array(256);for(i$1=0;i$1<256;i$1++)simpleEscapeCheck[i$1]=simpleEscapeSequence(i$1)?1:0,simpleEscapeMap[i$1]=simpleEscapeSequence(i$1);var i$1;function State$1(ie,te){this.input=ie,this.filename=te.filename||null,this.schema=te.schema||_default,this.onWarning=te.onWarning||null,this.legacy=te.legacy||!1,this.json=te.json||!1,this.listener=te.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=ie.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}__name(State$1,"State$1");function generateError(ie,te){var ne={name:ie.filename,buffer:ie.input.slice(0,-1),position:ie.position,line:ie.line,column:ie.position-ie.lineStart};return ne.snippet=snippet(ne),new exception(te,ne)}__name(generateError,"generateError");function throwError(ie,te){throw generateError(ie,te)}__name(throwError,"throwError");function throwWarning(ie,te){ie.onWarning&&ie.onWarning.call(null,generateError(ie,te))}__name(throwWarning,"throwWarning");var directiveHandlers={YAML:__name(function ie(te,ne,re){var oe,le,ae;te.version!==null&&throwError(te,"duplication of %YAML directive"),re.length!==1&&throwError(te,"YAML directive accepts exactly one argument"),oe=/^([0-9]+)\.([0-9]+)$/.exec(re[0]),oe===null&&throwError(te,"ill-formed argument of the YAML directive"),le=parseInt(oe[1],10),ae=parseInt(oe[2],10),le!==1&&throwError(te,"unacceptable YAML version of the document"),te.version=re[0],te.checkLineBreaks=ae<2,ae!==1&&ae!==2&&throwWarning(te,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:__name(function ie(te,ne,re){var oe,le;re.length!==2&&throwError(te,"TAG directive accepts exactly two arguments"),oe=re[0],le=re[1],PATTERN_TAG_HANDLE.test(oe)||throwError(te,"ill-formed tag handle (first argument) of the TAG directive"),_hasOwnProperty$1.call(te.tagMap,oe)&&throwError(te,'there is a previously declared suffix for "'+oe+'" tag handle'),PATTERN_TAG_URI.test(le)||throwError(te,"ill-formed tag prefix (second argument) of the TAG directive");try{le=decodeURIComponent(le)}catch{throwError(te,"tag prefix is malformed: "+le)}te.tagMap[oe]=le},"handleTagDirective")};function captureSegment(ie,te,ne,re){var oe,le,ae,he;if(te<ne){if(he=ie.input.slice(te,ne),re)for(oe=0,le=he.length;oe<le;oe+=1)ae=he.charCodeAt(oe),ae===9||32<=ae&&ae<=1114111||throwError(ie,"expected valid JSON character");else PATTERN_NON_PRINTABLE.test(he)&&throwError(ie,"the stream contains non-printable characters");ie.result+=he}}__name(captureSegment,"captureSegment");function mergeMappings(ie,te,ne,re){var oe,le,ae,he;for(common.isObject(ne)||throwError(ie,"cannot merge mappings; the provided source object is unacceptable"),oe=Object.keys(ne),ae=0,he=oe.length;ae<he;ae+=1)le=oe[ae],_hasOwnProperty$1.call(te,le)||(te[le]=ne[le],re[le]=!0)}__name(mergeMappings,"mergeMappings");function storeMappingPair(ie,te,ne,re,oe,le,ae,he,de){var ue,pe;if(Array.isArray(oe))for(oe=Array.prototype.slice.call(oe),ue=0,pe=oe.length;ue<pe;ue+=1)Array.isArray(oe[ue])&&throwError(ie,"nested arrays are not supported inside keys"),typeof oe=="object"&&_class(oe[ue])==="[object Object]"&&(oe[ue]="[object Object]");if(typeof oe=="object"&&_class(oe)==="[object Object]"&&(oe="[object Object]"),oe=String(oe),te===null&&(te={}),re==="tag:yaml.org,2002:merge")if(Array.isArray(le))for(ue=0,pe=le.length;ue<pe;ue+=1)mergeMappings(ie,te,le[ue],ne);else mergeMappings(ie,te,le,ne);else!ie.json&&!_hasOwnProperty$1.call(ne,oe)&&_hasOwnProperty$1.call(te,oe)&&(ie.line=ae||ie.line,ie.lineStart=he||ie.lineStart,ie.position=de||ie.position,throwError(ie,"duplicated mapping key")),oe==="__proto__"?Object.defineProperty(te,oe,{configurable:!0,enumerable:!0,writable:!0,value:le}):te[oe]=le,delete ne[oe];return te}__name(storeMappingPair,"storeMappingPair");function readLineBreak(ie){var te;te=ie.input.charCodeAt(ie.position),te===10?ie.position++:te===13?(ie.position++,ie.input.charCodeAt(ie.position)===10&&ie.position++):throwError(ie,"a line break is expected"),ie.line+=1,ie.lineStart=ie.position,ie.firstTabInLine=-1}__name(readLineBreak,"readLineBreak");function skipSeparationSpace(ie,te,ne){for(var re=0,oe=ie.input.charCodeAt(ie.position);oe!==0;){for(;is_WHITE_SPACE(oe);)oe===9&&ie.firstTabInLine===-1&&(ie.firstTabInLine=ie.position),oe=ie.input.charCodeAt(++ie.position);if(te&&oe===35)do oe=ie.input.charCodeAt(++ie.position);while(oe!==10&&oe!==13&&oe!==0);if(is_EOL(oe))for(readLineBreak(ie),oe=ie.input.charCodeAt(ie.position),re++,ie.lineIndent=0;oe===32;)ie.lineIndent++,oe=ie.input.charCodeAt(++ie.position);else break}return ne!==-1&&re!==0&&ie.lineIndent<ne&&throwWarning(ie,"deficient indentation"),re}__name(skipSeparationSpace,"skipSeparationSpace");function testDocumentSeparator(ie){var te=ie.position,ne;return ne=ie.input.charCodeAt(te),!!((ne===45||ne===46)&&ne===ie.input.charCodeAt(te+1)&&ne===ie.input.charCodeAt(te+2)&&(te+=3,ne=ie.input.charCodeAt(te),ne===0||is_WS_OR_EOL(ne)))}__name(testDocumentSeparator,"testDocumentSeparator");function writeFoldedLines(ie,te){te===1?ie.result+=" ":te>1&&(ie.result+=common.repeat(`
`,te-1))}__name(writeFoldedLines,"writeFoldedLines");function readPlainScalar(ie,te,ne){var re,oe,le,ae,he,de,ue,pe,fe=ie.kind,ge=ie.result,$e;if($e=ie.input.charCodeAt(ie.position),is_WS_OR_EOL($e)||is_FLOW_INDICATOR($e)||$e===35||$e===38||$e===42||$e===33||$e===124||$e===62||$e===39||$e===34||$e===37||$e===64||$e===96||($e===63||$e===45)&&(oe=ie.input.charCodeAt(ie.position+1),is_WS_OR_EOL(oe)||ne&&is_FLOW_INDICATOR(oe)))return!1;for(ie.kind="scalar",ie.result="",le=ae=ie.position,he=!1;$e!==0;){if($e===58){if(oe=ie.input.charCodeAt(ie.position+1),is_WS_OR_EOL(oe)||ne&&is_FLOW_INDICATOR(oe))break}else if($e===35){if(re=ie.input.charCodeAt(ie.position-1),is_WS_OR_EOL(re))break}else{if(ie.position===ie.lineStart&&testDocumentSeparator(ie)||ne&&is_FLOW_INDICATOR($e))break;if(is_EOL($e))if(de=ie.line,ue=ie.lineStart,pe=ie.lineIndent,skipSeparationSpace(ie,!1,-1),ie.lineIndent>=te){he=!0,$e=ie.input.charCodeAt(ie.position);continue}else{ie.position=ae,ie.line=de,ie.lineStart=ue,ie.lineIndent=pe;break}}he&&(captureSegment(ie,le,ae,!1),writeFoldedLines(ie,ie.line-de),le=ae=ie.position,he=!1),is_WHITE_SPACE($e)||(ae=ie.position+1),$e=ie.input.charCodeAt(++ie.position)}return captureSegment(ie,le,ae,!1),ie.result?!0:(ie.kind=fe,ie.result=ge,!1)}__name(readPlainScalar,"readPlainScalar");function readSingleQuotedScalar(ie,te){var ne,re,oe;if(ne=ie.input.charCodeAt(ie.position),ne!==39)return!1;for(ie.kind="scalar",ie.result="",ie.position++,re=oe=ie.position;(ne=ie.input.charCodeAt(ie.position))!==0;)if(ne===39)if(captureSegment(ie,re,ie.position,!0),ne=ie.input.charCodeAt(++ie.position),ne===39)re=ie.position,ie.position++,oe=ie.position;else return!0;else is_EOL(ne)?(captureSegment(ie,re,oe,!0),writeFoldedLines(ie,skipSeparationSpace(ie,!1,te)),re=oe=ie.position):ie.position===ie.lineStart&&testDocumentSeparator(ie)?throwError(ie,"unexpected end of the document within a single quoted scalar"):(ie.position++,oe=ie.position);throwError(ie,"unexpected end of the stream within a single quoted scalar")}__name(readSingleQuotedScalar,"readSingleQuotedScalar");function readDoubleQuotedScalar(ie,te){var ne,re,oe,le,ae,he;if(he=ie.input.charCodeAt(ie.position),he!==34)return!1;for(ie.kind="scalar",ie.result="",ie.position++,ne=re=ie.position;(he=ie.input.charCodeAt(ie.position))!==0;){if(he===34)return captureSegment(ie,ne,ie.position,!0),ie.position++,!0;if(he===92){if(captureSegment(ie,ne,ie.position,!0),he=ie.input.charCodeAt(++ie.position),is_EOL(he))skipSeparationSpace(ie,!1,te);else if(he<256&&simpleEscapeCheck[he])ie.result+=simpleEscapeMap[he],ie.position++;else if((ae=escapedHexLen(he))>0){for(oe=ae,le=0;oe>0;oe--)he=ie.input.charCodeAt(++ie.position),(ae=fromHexCode(he))>=0?le=(le<<4)+ae:throwError(ie,"expected hexadecimal character");ie.result+=charFromCodepoint(le),ie.position++}else throwError(ie,"unknown escape sequence");ne=re=ie.position}else is_EOL(he)?(captureSegment(ie,ne,re,!0),writeFoldedLines(ie,skipSeparationSpace(ie,!1,te)),ne=re=ie.position):ie.position===ie.lineStart&&testDocumentSeparator(ie)?throwError(ie,"unexpected end of the document within a double quoted scalar"):(ie.position++,re=ie.position)}throwError(ie,"unexpected end of the stream within a double quoted scalar")}__name(readDoubleQuotedScalar,"readDoubleQuotedScalar");function readFlowCollection(ie,te){var ne=!0,re,oe,le,ae=ie.tag,he,de=ie.anchor,ue,pe,fe,ge,$e,Te=Object.create(null),Ee,Se,ve,ke;if(ke=ie.input.charCodeAt(ie.position),ke===91)pe=93,$e=!1,he=[];else if(ke===123)pe=125,$e=!0,he={};else return!1;for(ie.anchor!==null&&(ie.anchorMap[ie.anchor]=he),ke=ie.input.charCodeAt(++ie.position);ke!==0;){if(skipSeparationSpace(ie,!0,te),ke=ie.input.charCodeAt(ie.position),ke===pe)return ie.position++,ie.tag=ae,ie.anchor=de,ie.kind=$e?"mapping":"sequence",ie.result=he,!0;ne?ke===44&&throwError(ie,"expected the node content, but found ','"):throwError(ie,"missed comma between flow collection entries"),Se=Ee=ve=null,fe=ge=!1,ke===63&&(ue=ie.input.charCodeAt(ie.position+1),is_WS_OR_EOL(ue)&&(fe=ge=!0,ie.position++,skipSeparationSpace(ie,!0,te))),re=ie.line,oe=ie.lineStart,le=ie.position,composeNode(ie,te,CONTEXT_FLOW_IN,!1,!0),Se=ie.tag,Ee=ie.result,skipSeparationSpace(ie,!0,te),ke=ie.input.charCodeAt(ie.position),(ge||ie.line===re)&&ke===58&&(fe=!0,ke=ie.input.charCodeAt(++ie.position),skipSeparationSpace(ie,!0,te),composeNode(ie,te,CONTEXT_FLOW_IN,!1,!0),ve=ie.result),$e?storeMappingPair(ie,he,Te,Se,Ee,ve,re,oe,le):fe?he.push(storeMappingPair(ie,null,Te,Se,Ee,ve,re,oe,le)):he.push(Ee),skipSeparationSpace(ie,!0,te),ke=ie.input.charCodeAt(ie.position),ke===44?(ne=!0,ke=ie.input.charCodeAt(++ie.position)):ne=!1}throwError(ie,"unexpected end of the stream within a flow collection")}__name(readFlowCollection,"readFlowCollection");function readBlockScalar(ie,te){var ne,re,oe=CHOMPING_CLIP,le=!1,ae=!1,he=te,de=0,ue=!1,pe,fe;if(fe=ie.input.charCodeAt(ie.position),fe===124)re=!1;else if(fe===62)re=!0;else return!1;for(ie.kind="scalar",ie.result="";fe!==0;)if(fe=ie.input.charCodeAt(++ie.position),fe===43||fe===45)CHOMPING_CLIP===oe?oe=fe===43?CHOMPING_KEEP:CHOMPING_STRIP:throwError(ie,"repeat of a chomping mode identifier");else if((pe=fromDecimalCode(fe))>=0)pe===0?throwError(ie,"bad explicit indentation width of a block scalar; it cannot be less than one"):ae?throwError(ie,"repeat of an indentation width identifier"):(he=te+pe-1,ae=!0);else break;if(is_WHITE_SPACE(fe)){do fe=ie.input.charCodeAt(++ie.position);while(is_WHITE_SPACE(fe));if(fe===35)do fe=ie.input.charCodeAt(++ie.position);while(!is_EOL(fe)&&fe!==0)}for(;fe!==0;){for(readLineBreak(ie),ie.lineIndent=0,fe=ie.input.charCodeAt(ie.position);(!ae||ie.lineIndent<he)&&fe===32;)ie.lineIndent++,fe=ie.input.charCodeAt(++ie.position);if(!ae&&ie.lineIndent>he&&(he=ie.lineIndent),is_EOL(fe)){de++;continue}if(ie.lineIndent<he){oe===CHOMPING_KEEP?ie.result+=common.repeat(`
`,le?1+de:de):oe===CHOMPING_CLIP&&le&&(ie.result+=`
`);break}for(re?is_WHITE_SPACE(fe)?(ue=!0,ie.result+=common.repeat(`
`,le?1+de:de)):ue?(ue=!1,ie.result+=common.repeat(`
`,de+1)):de===0?le&&(ie.result+=" "):ie.result+=common.repeat(`
`,de):ie.result+=common.repeat(`
`,le?1+de:de),le=!0,ae=!0,de=0,ne=ie.position;!is_EOL(fe)&&fe!==0;)fe=ie.input.charCodeAt(++ie.position);captureSegment(ie,ne,ie.position,!1)}return!0}__name(readBlockScalar,"readBlockScalar");function readBlockSequence(ie,te){var ne,re=ie.tag,oe=ie.anchor,le=[],ae,he=!1,de;if(ie.firstTabInLine!==-1)return!1;for(ie.anchor!==null&&(ie.anchorMap[ie.anchor]=le),de=ie.input.charCodeAt(ie.position);de!==0&&(ie.firstTabInLine!==-1&&(ie.position=ie.firstTabInLine,throwError(ie,"tab characters must not be used in indentation")),!(de!==45||(ae=ie.input.charCodeAt(ie.position+1),!is_WS_OR_EOL(ae))));){if(he=!0,ie.position++,skipSeparationSpace(ie,!0,-1)&&ie.lineIndent<=te){le.push(null),de=ie.input.charCodeAt(ie.position);continue}if(ne=ie.line,composeNode(ie,te,CONTEXT_BLOCK_IN,!1,!0),le.push(ie.result),skipSeparationSpace(ie,!0,-1),de=ie.input.charCodeAt(ie.position),(ie.line===ne||ie.lineIndent>te)&&de!==0)throwError(ie,"bad indentation of a sequence entry");else if(ie.lineIndent<te)break}return he?(ie.tag=re,ie.anchor=oe,ie.kind="sequence",ie.result=le,!0):!1}__name(readBlockSequence,"readBlockSequence");function readBlockMapping(ie,te,ne){var re,oe,le,ae,he,de,ue=ie.tag,pe=ie.anchor,fe={},ge=Object.create(null),$e=null,Te=null,Ee=null,Se=!1,ve=!1,ke;if(ie.firstTabInLine!==-1)return!1;for(ie.anchor!==null&&(ie.anchorMap[ie.anchor]=fe),ke=ie.input.charCodeAt(ie.position);ke!==0;){if(!Se&&ie.firstTabInLine!==-1&&(ie.position=ie.firstTabInLine,throwError(ie,"tab characters must not be used in indentation")),re=ie.input.charCodeAt(ie.position+1),le=ie.line,(ke===63||ke===58)&&is_WS_OR_EOL(re))ke===63?(Se&&(storeMappingPair(ie,fe,ge,$e,Te,null,ae,he,de),$e=Te=Ee=null),ve=!0,Se=!0,oe=!0):Se?(Se=!1,oe=!0):throwError(ie,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),ie.position+=1,ke=re;else{if(ae=ie.line,he=ie.lineStart,de=ie.position,!composeNode(ie,ne,CONTEXT_FLOW_OUT,!1,!0))break;if(ie.line===le){for(ke=ie.input.charCodeAt(ie.position);is_WHITE_SPACE(ke);)ke=ie.input.charCodeAt(++ie.position);if(ke===58)ke=ie.input.charCodeAt(++ie.position),is_WS_OR_EOL(ke)||throwError(ie,"a whitespace character is expected after the key-value separator within a block mapping"),Se&&(storeMappingPair(ie,fe,ge,$e,Te,null,ae,he,de),$e=Te=Ee=null),ve=!0,Se=!1,oe=!1,$e=ie.tag,Te=ie.result;else if(ve)throwError(ie,"can not read an implicit mapping pair; a colon is missed");else return ie.tag=ue,ie.anchor=pe,!0}else if(ve)throwError(ie,"can not read a block mapping entry; a multiline key may not be an implicit key");else return ie.tag=ue,ie.anchor=pe,!0}if((ie.line===le||ie.lineIndent>te)&&(Se&&(ae=ie.line,he=ie.lineStart,de=ie.position),composeNode(ie,te,CONTEXT_BLOCK_OUT,!0,oe)&&(Se?Te=ie.result:Ee=ie.result),Se||(storeMappingPair(ie,fe,ge,$e,Te,Ee,ae,he,de),$e=Te=Ee=null),skipSeparationSpace(ie,!0,-1),ke=ie.input.charCodeAt(ie.position)),(ie.line===le||ie.lineIndent>te)&&ke!==0)throwError(ie,"bad indentation of a mapping entry");else if(ie.lineIndent<te)break}return Se&&storeMappingPair(ie,fe,ge,$e,Te,null,ae,he,de),ve&&(ie.tag=ue,ie.anchor=pe,ie.kind="mapping",ie.result=fe),ve}__name(readBlockMapping,"readBlockMapping");function readTagProperty(ie){var te,ne=!1,re=!1,oe,le,ae;if(ae=ie.input.charCodeAt(ie.position),ae!==33)return!1;if(ie.tag!==null&&throwError(ie,"duplication of a tag property"),ae=ie.input.charCodeAt(++ie.position),ae===60?(ne=!0,ae=ie.input.charCodeAt(++ie.position)):ae===33?(re=!0,oe="!!",ae=ie.input.charCodeAt(++ie.position)):oe="!",te=ie.position,ne){do ae=ie.input.charCodeAt(++ie.position);while(ae!==0&&ae!==62);ie.position<ie.length?(le=ie.input.slice(te,ie.position),ae=ie.input.charCodeAt(++ie.position)):throwError(ie,"unexpected end of the stream within a verbatim tag")}else{for(;ae!==0&&!is_WS_OR_EOL(ae);)ae===33&&(re?throwError(ie,"tag suffix cannot contain exclamation marks"):(oe=ie.input.slice(te-1,ie.position+1),PATTERN_TAG_HANDLE.test(oe)||throwError(ie,"named tag handle cannot contain such characters"),re=!0,te=ie.position+1)),ae=ie.input.charCodeAt(++ie.position);le=ie.input.slice(te,ie.position),PATTERN_FLOW_INDICATORS.test(le)&&throwError(ie,"tag suffix cannot contain flow indicator characters")}le&&!PATTERN_TAG_URI.test(le)&&throwError(ie,"tag name cannot contain such characters: "+le);try{le=decodeURIComponent(le)}catch{throwError(ie,"tag name is malformed: "+le)}return ne?ie.tag=le:_hasOwnProperty$1.call(ie.tagMap,oe)?ie.tag=ie.tagMap[oe]+le:oe==="!"?ie.tag="!"+le:oe==="!!"?ie.tag="tag:yaml.org,2002:"+le:throwError(ie,'undeclared tag handle "'+oe+'"'),!0}__name(readTagProperty,"readTagProperty");function readAnchorProperty(ie){var te,ne;if(ne=ie.input.charCodeAt(ie.position),ne!==38)return!1;for(ie.anchor!==null&&throwError(ie,"duplication of an anchor property"),ne=ie.input.charCodeAt(++ie.position),te=ie.position;ne!==0&&!is_WS_OR_EOL(ne)&&!is_FLOW_INDICATOR(ne);)ne=ie.input.charCodeAt(++ie.position);return ie.position===te&&throwError(ie,"name of an anchor node must contain at least one character"),ie.anchor=ie.input.slice(te,ie.position),!0}__name(readAnchorProperty,"readAnchorProperty");function readAlias(ie){var te,ne,re;if(re=ie.input.charCodeAt(ie.position),re!==42)return!1;for(re=ie.input.charCodeAt(++ie.position),te=ie.position;re!==0&&!is_WS_OR_EOL(re)&&!is_FLOW_INDICATOR(re);)re=ie.input.charCodeAt(++ie.position);return ie.position===te&&throwError(ie,"name of an alias node must contain at least one character"),ne=ie.input.slice(te,ie.position),_hasOwnProperty$1.call(ie.anchorMap,ne)||throwError(ie,'unidentified alias "'+ne+'"'),ie.result=ie.anchorMap[ne],skipSeparationSpace(ie,!0,-1),!0}__name(readAlias,"readAlias");function composeNode(ie,te,ne,re,oe){var le,ae,he,de=1,ue=!1,pe=!1,fe,ge,$e,Te,Ee,Se;if(ie.listener!==null&&ie.listener("open",ie),ie.tag=null,ie.anchor=null,ie.kind=null,ie.result=null,le=ae=he=CONTEXT_BLOCK_OUT===ne||CONTEXT_BLOCK_IN===ne,re&&skipSeparationSpace(ie,!0,-1)&&(ue=!0,ie.lineIndent>te?de=1:ie.lineIndent===te?de=0:ie.lineIndent<te&&(de=-1)),de===1)for(;readTagProperty(ie)||readAnchorProperty(ie);)skipSeparationSpace(ie,!0,-1)?(ue=!0,he=le,ie.lineIndent>te?de=1:ie.lineIndent===te?de=0:ie.lineIndent<te&&(de=-1)):he=!1;if(he&&(he=ue||oe),(de===1||CONTEXT_BLOCK_OUT===ne)&&(CONTEXT_FLOW_IN===ne||CONTEXT_FLOW_OUT===ne?Ee=te:Ee=te+1,Se=ie.position-ie.lineStart,de===1?he&&(readBlockSequence(ie,Se)||readBlockMapping(ie,Se,Ee))||readFlowCollection(ie,Ee)?pe=!0:(ae&&readBlockScalar(ie,Ee)||readSingleQuotedScalar(ie,Ee)||readDoubleQuotedScalar(ie,Ee)?pe=!0:readAlias(ie)?(pe=!0,(ie.tag!==null||ie.anchor!==null)&&throwError(ie,"alias node should not have any properties")):readPlainScalar(ie,Ee,CONTEXT_FLOW_IN===ne)&&(pe=!0,ie.tag===null&&(ie.tag="?")),ie.anchor!==null&&(ie.anchorMap[ie.anchor]=ie.result)):de===0&&(pe=he&&readBlockSequence(ie,Se))),ie.tag===null)ie.anchor!==null&&(ie.anchorMap[ie.anchor]=ie.result);else if(ie.tag==="?"){for(ie.result!==null&&ie.kind!=="scalar"&&throwError(ie,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+ie.kind+'"'),fe=0,ge=ie.implicitTypes.length;fe<ge;fe+=1)if(Te=ie.implicitTypes[fe],Te.resolve(ie.result)){ie.result=Te.construct(ie.result),ie.tag=Te.tag,ie.anchor!==null&&(ie.anchorMap[ie.anchor]=ie.result);break}}else if(ie.tag!=="!"){if(_hasOwnProperty$1.call(ie.typeMap[ie.kind||"fallback"],ie.tag))Te=ie.typeMap[ie.kind||"fallback"][ie.tag];else for(Te=null,$e=ie.typeMap.multi[ie.kind||"fallback"],fe=0,ge=$e.length;fe<ge;fe+=1)if(ie.tag.slice(0,$e[fe].tag.length)===$e[fe].tag){Te=$e[fe];break}Te||throwError(ie,"unknown tag !<"+ie.tag+">"),ie.result!==null&&Te.kind!==ie.kind&&throwError(ie,"unacceptable node kind for !<"+ie.tag+'> tag; it should be "'+Te.kind+'", not "'+ie.kind+'"'),Te.resolve(ie.result,ie.tag)?(ie.result=Te.construct(ie.result,ie.tag),ie.anchor!==null&&(ie.anchorMap[ie.anchor]=ie.result)):throwError(ie,"cannot resolve a node with !<"+ie.tag+"> explicit tag")}return ie.listener!==null&&ie.listener("close",ie),ie.tag!==null||ie.anchor!==null||pe}__name(composeNode,"composeNode");function readDocument(ie){var te=ie.position,ne,re,oe,le=!1,ae;for(ie.version=null,ie.checkLineBreaks=ie.legacy,ie.tagMap=Object.create(null),ie.anchorMap=Object.create(null);(ae=ie.input.charCodeAt(ie.position))!==0&&(skipSeparationSpace(ie,!0,-1),ae=ie.input.charCodeAt(ie.position),!(ie.lineIndent>0||ae!==37));){for(le=!0,ae=ie.input.charCodeAt(++ie.position),ne=ie.position;ae!==0&&!is_WS_OR_EOL(ae);)ae=ie.input.charCodeAt(++ie.position);for(re=ie.input.slice(ne,ie.position),oe=[],re.length<1&&throwError(ie,"directive name must not be less than one character in length");ae!==0;){for(;is_WHITE_SPACE(ae);)ae=ie.input.charCodeAt(++ie.position);if(ae===35){do ae=ie.input.charCodeAt(++ie.position);while(ae!==0&&!is_EOL(ae));break}if(is_EOL(ae))break;for(ne=ie.position;ae!==0&&!is_WS_OR_EOL(ae);)ae=ie.input.charCodeAt(++ie.position);oe.push(ie.input.slice(ne,ie.position))}ae!==0&&readLineBreak(ie),_hasOwnProperty$1.call(directiveHandlers,re)?directiveHandlers[re](ie,re,oe):throwWarning(ie,'unknown document directive "'+re+'"')}if(skipSeparationSpace(ie,!0,-1),ie.lineIndent===0&&ie.input.charCodeAt(ie.position)===45&&ie.input.charCodeAt(ie.position+1)===45&&ie.input.charCodeAt(ie.position+2)===45?(ie.position+=3,skipSeparationSpace(ie,!0,-1)):le&&throwError(ie,"directives end mark is expected"),composeNode(ie,ie.lineIndent-1,CONTEXT_BLOCK_OUT,!1,!0),skipSeparationSpace(ie,!0,-1),ie.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS.test(ie.input.slice(te,ie.position))&&throwWarning(ie,"non-ASCII line breaks are interpreted as content"),ie.documents.push(ie.result),ie.position===ie.lineStart&&testDocumentSeparator(ie)){ie.input.charCodeAt(ie.position)===46&&(ie.position+=3,skipSeparationSpace(ie,!0,-1));return}if(ie.position<ie.length-1)throwError(ie,"end of the stream or a document separator is expected");else return}__name(readDocument,"readDocument");function loadDocuments(ie,te){ie=String(ie),te=te||{},ie.length!==0&&(ie.charCodeAt(ie.length-1)!==10&&ie.charCodeAt(ie.length-1)!==13&&(ie+=`
`),ie.charCodeAt(0)===65279&&(ie=ie.slice(1)));var ne=new State$1(ie,te),re=ie.indexOf("\0");for(re!==-1&&(ne.position=re,throwError(ne,"null byte is not allowed in input")),ne.input+="\0";ne.input.charCodeAt(ne.position)===32;)ne.lineIndent+=1,ne.position+=1;for(;ne.position<ne.length-1;)readDocument(ne);return ne.documents}__name(loadDocuments,"loadDocuments");function loadAll$1(ie,te,ne){te!==null&&typeof te=="object"&&typeof ne>"u"&&(ne=te,te=null);var re=loadDocuments(ie,ne);if(typeof te!="function")return re;for(var oe=0,le=re.length;oe<le;oe+=1)te(re[oe])}__name(loadAll$1,"loadAll$1");function load$1(ie,te){var ne=loadDocuments(ie,te);if(ne.length!==0){if(ne.length===1)return ne[0];throw new exception("expected a single document in the stream, but found more")}}__name(load$1,"load$1");var loadAll_1=loadAll$1,load_1=load$1,loader$1={loadAll:loadAll_1,load:load_1},_toString=Object.prototype.toString,_hasOwnProperty=Object.prototype.hasOwnProperty,CHAR_BOM=65279,CHAR_TAB=9,CHAR_LINE_FEED=10,CHAR_CARRIAGE_RETURN=13,CHAR_SPACE=32,CHAR_EXCLAMATION=33,CHAR_DOUBLE_QUOTE=34,CHAR_SHARP=35,CHAR_PERCENT=37,CHAR_AMPERSAND=38,CHAR_SINGLE_QUOTE=39,CHAR_ASTERISK=42,CHAR_COMMA=44,CHAR_MINUS=45,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_GREATER_THAN=62,CHAR_QUESTION=63,CHAR_COMMERCIAL_AT=64,CHAR_LEFT_SQUARE_BRACKET=91,CHAR_RIGHT_SQUARE_BRACKET=93,CHAR_GRAVE_ACCENT=96,CHAR_LEFT_CURLY_BRACKET=123,CHAR_VERTICAL_LINE=124,CHAR_RIGHT_CURLY_BRACKET=125,ESCAPE_SEQUENCES={};ESCAPE_SEQUENCES[0]="\\0";ESCAPE_SEQUENCES[7]="\\a";ESCAPE_SEQUENCES[8]="\\b";ESCAPE_SEQUENCES[9]="\\t";ESCAPE_SEQUENCES[10]="\\n";ESCAPE_SEQUENCES[11]="\\v";ESCAPE_SEQUENCES[12]="\\f";ESCAPE_SEQUENCES[13]="\\r";ESCAPE_SEQUENCES[27]="\\e";ESCAPE_SEQUENCES[34]='\\"';ESCAPE_SEQUENCES[92]="\\\\";ESCAPE_SEQUENCES[133]="\\N";ESCAPE_SEQUENCES[160]="\\_";ESCAPE_SEQUENCES[8232]="\\L";ESCAPE_SEQUENCES[8233]="\\P";var DEPRECATED_BOOLEANS_SYNTAX=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],DEPRECATED_BASE60_SYNTAX=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function compileStyleMap(ie,te){var ne,re,oe,le,ae,he,de;if(te===null)return{};for(ne={},re=Object.keys(te),oe=0,le=re.length;oe<le;oe+=1)ae=re[oe],he=String(te[ae]),ae.slice(0,2)==="!!"&&(ae="tag:yaml.org,2002:"+ae.slice(2)),de=ie.compiledTypeMap.fallback[ae],de&&_hasOwnProperty.call(de.styleAliases,he)&&(he=de.styleAliases[he]),ne[ae]=he;return ne}__name(compileStyleMap,"compileStyleMap");function encodeHex(ie){var te,ne,re;if(te=ie.toString(16).toUpperCase(),ie<=255)ne="x",re=2;else if(ie<=65535)ne="u",re=4;else if(ie<=4294967295)ne="U",re=8;else throw new exception("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+ne+common.repeat("0",re-te.length)+te}__name(encodeHex,"encodeHex");var QUOTING_TYPE_SINGLE=1,QUOTING_TYPE_DOUBLE=2;function State(ie){this.schema=ie.schema||_default,this.indent=Math.max(1,ie.indent||2),this.noArrayIndent=ie.noArrayIndent||!1,this.skipInvalid=ie.skipInvalid||!1,this.flowLevel=common.isNothing(ie.flowLevel)?-1:ie.flowLevel,this.styleMap=compileStyleMap(this.schema,ie.styles||null),this.sortKeys=ie.sortKeys||!1,this.lineWidth=ie.lineWidth||80,this.noRefs=ie.noRefs||!1,this.noCompatMode=ie.noCompatMode||!1,this.condenseFlow=ie.condenseFlow||!1,this.quotingType=ie.quotingType==='"'?QUOTING_TYPE_DOUBLE:QUOTING_TYPE_SINGLE,this.forceQuotes=ie.forceQuotes||!1,this.replacer=typeof ie.replacer=="function"?ie.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}__name(State,"State");function indentString(ie,te){for(var ne=common.repeat(" ",te),re=0,oe=-1,le="",ae,he=ie.length;re<he;)oe=ie.indexOf(`
`,re),oe===-1?(ae=ie.slice(re),re=he):(ae=ie.slice(re,oe+1),re=oe+1),ae.length&&ae!==`
`&&(le+=ne),le+=ae;return le}__name(indentString,"indentString");function generateNextLine(ie,te){return`
`+common.repeat(" ",ie.indent*te)}__name(generateNextLine,"generateNextLine");function testImplicitResolving(ie,te){var ne,re,oe;for(ne=0,re=ie.implicitTypes.length;ne<re;ne+=1)if(oe=ie.implicitTypes[ne],oe.resolve(te))return!0;return!1}__name(testImplicitResolving,"testImplicitResolving");function isWhitespace(ie){return ie===CHAR_SPACE||ie===CHAR_TAB}__name(isWhitespace,"isWhitespace");function isPrintable(ie){return 32<=ie&&ie<=126||161<=ie&&ie<=55295&&ie!==8232&&ie!==8233||57344<=ie&&ie<=65533&&ie!==CHAR_BOM||65536<=ie&&ie<=1114111}__name(isPrintable,"isPrintable");function isNsCharOrWhitespace(ie){return isPrintable(ie)&&ie!==CHAR_BOM&&ie!==CHAR_CARRIAGE_RETURN&&ie!==CHAR_LINE_FEED}__name(isNsCharOrWhitespace,"isNsCharOrWhitespace");function isPlainSafe(ie,te,ne){var re=isNsCharOrWhitespace(ie),oe=re&&!isWhitespace(ie);return(ne?re:re&&ie!==CHAR_COMMA&&ie!==CHAR_LEFT_SQUARE_BRACKET&&ie!==CHAR_RIGHT_SQUARE_BRACKET&&ie!==CHAR_LEFT_CURLY_BRACKET&&ie!==CHAR_RIGHT_CURLY_BRACKET)&&ie!==CHAR_SHARP&&!(te===CHAR_COLON&&!oe)||isNsCharOrWhitespace(te)&&!isWhitespace(te)&&ie===CHAR_SHARP||te===CHAR_COLON&&oe}__name(isPlainSafe,"isPlainSafe");function isPlainSafeFirst(ie){return isPrintable(ie)&&ie!==CHAR_BOM&&!isWhitespace(ie)&&ie!==CHAR_MINUS&&ie!==CHAR_QUESTION&&ie!==CHAR_COLON&&ie!==CHAR_COMMA&&ie!==CHAR_LEFT_SQUARE_BRACKET&&ie!==CHAR_RIGHT_SQUARE_BRACKET&&ie!==CHAR_LEFT_CURLY_BRACKET&&ie!==CHAR_RIGHT_CURLY_BRACKET&&ie!==CHAR_SHARP&&ie!==CHAR_AMPERSAND&&ie!==CHAR_ASTERISK&&ie!==CHAR_EXCLAMATION&&ie!==CHAR_VERTICAL_LINE&&ie!==CHAR_EQUALS&&ie!==CHAR_GREATER_THAN&&ie!==CHAR_SINGLE_QUOTE&&ie!==CHAR_DOUBLE_QUOTE&&ie!==CHAR_PERCENT&&ie!==CHAR_COMMERCIAL_AT&&ie!==CHAR_GRAVE_ACCENT}__name(isPlainSafeFirst,"isPlainSafeFirst");function isPlainSafeLast(ie){return!isWhitespace(ie)&&ie!==CHAR_COLON}__name(isPlainSafeLast,"isPlainSafeLast");function codePointAt(ie,te){var ne=ie.charCodeAt(te),re;return ne>=55296&&ne<=56319&&te+1<ie.length&&(re=ie.charCodeAt(te+1),re>=56320&&re<=57343)?(ne-55296)*1024+re-56320+65536:ne}__name(codePointAt,"codePointAt");function needIndentIndicator(ie){var te=/^\n* /;return te.test(ie)}__name(needIndentIndicator,"needIndentIndicator");var STYLE_PLAIN=1,STYLE_SINGLE=2,STYLE_LITERAL=3,STYLE_FOLDED=4,STYLE_DOUBLE=5;function chooseScalarStyle(ie,te,ne,re,oe,le,ae,he){var de,ue=0,pe=null,fe=!1,ge=!1,$e=re!==-1,Te=-1,Ee=isPlainSafeFirst(codePointAt(ie,0))&&isPlainSafeLast(codePointAt(ie,ie.length-1));if(te||ae)for(de=0;de<ie.length;ue>=65536?de+=2:de++){if(ue=codePointAt(ie,de),!isPrintable(ue))return STYLE_DOUBLE;Ee=Ee&&isPlainSafe(ue,pe,he),pe=ue}else{for(de=0;de<ie.length;ue>=65536?de+=2:de++){if(ue=codePointAt(ie,de),ue===CHAR_LINE_FEED)fe=!0,$e&&(ge=ge||de-Te-1>re&&ie[Te+1]!==" ",Te=de);else if(!isPrintable(ue))return STYLE_DOUBLE;Ee=Ee&&isPlainSafe(ue,pe,he),pe=ue}ge=ge||$e&&de-Te-1>re&&ie[Te+1]!==" "}return!fe&&!ge?Ee&&!ae&&!oe(ie)?STYLE_PLAIN:le===QUOTING_TYPE_DOUBLE?STYLE_DOUBLE:STYLE_SINGLE:ne>9&&needIndentIndicator(ie)?STYLE_DOUBLE:ae?le===QUOTING_TYPE_DOUBLE?STYLE_DOUBLE:STYLE_SINGLE:ge?STYLE_FOLDED:STYLE_LITERAL}__name(chooseScalarStyle,"chooseScalarStyle");function writeScalar(ie,te,ne,re,oe){ie.dump=function(){if(te.length===0)return ie.quotingType===QUOTING_TYPE_DOUBLE?'""':"''";if(!ie.noCompatMode&&(DEPRECATED_BOOLEANS_SYNTAX.indexOf(te)!==-1||DEPRECATED_BASE60_SYNTAX.test(te)))return ie.quotingType===QUOTING_TYPE_DOUBLE?'"'+te+'"':"'"+te+"'";var le=ie.indent*Math.max(1,ne),ae=ie.lineWidth===-1?-1:Math.max(Math.min(ie.lineWidth,40),ie.lineWidth-le),he=re||ie.flowLevel>-1&&ne>=ie.flowLevel;function de(ue){return testImplicitResolving(ie,ue)}switch(__name(de,"testAmbiguity"),chooseScalarStyle(te,he,ie.indent,ae,de,ie.quotingType,ie.forceQuotes&&!re,oe)){case STYLE_PLAIN:return te;case STYLE_SINGLE:return"'"+te.replace(/'/g,"''")+"'";case STYLE_LITERAL:return"|"+blockHeader(te,ie.indent)+dropEndingNewline(indentString(te,le));case STYLE_FOLDED:return">"+blockHeader(te,ie.indent)+dropEndingNewline(indentString(foldString(te,ae),le));case STYLE_DOUBLE:return'"'+escapeString(te)+'"';default:throw new exception("impossible error: invalid scalar style")}}()}__name(writeScalar,"writeScalar");function blockHeader(ie,te){var ne=needIndentIndicator(ie)?String(te):"",re=ie[ie.length-1]===`
`,oe=re&&(ie[ie.length-2]===`
`||ie===`
`),le=oe?"+":re?"":"-";return ne+le+`
`}__name(blockHeader,"blockHeader");function dropEndingNewline(ie){return ie[ie.length-1]===`
`?ie.slice(0,-1):ie}__name(dropEndingNewline,"dropEndingNewline");function foldString(ie,te){for(var ne=/(\n+)([^\n]*)/g,re=function(){var ue=ie.indexOf(`
`);return ue=ue!==-1?ue:ie.length,ne.lastIndex=ue,foldLine(ie.slice(0,ue),te)}(),oe=ie[0]===`
`||ie[0]===" ",le,ae;ae=ne.exec(ie);){var he=ae[1],de=ae[2];le=de[0]===" ",re+=he+(!oe&&!le&&de!==""?`
`:"")+foldLine(de,te),oe=le}return re}__name(foldString,"foldString");function foldLine(ie,te){if(ie===""||ie[0]===" ")return ie;for(var ne=/ [^ ]/g,re,oe=0,le,ae=0,he=0,de="";re=ne.exec(ie);)he=re.index,he-oe>te&&(le=ae>oe?ae:he,de+=`
`+ie.slice(oe,le),oe=le+1),ae=he;return de+=`
`,ie.length-oe>te&&ae>oe?de+=ie.slice(oe,ae)+`
`+ie.slice(ae+1):de+=ie.slice(oe),de.slice(1)}__name(foldLine,"foldLine");function escapeString(ie){for(var te="",ne=0,re,oe=0;oe<ie.length;ne>=65536?oe+=2:oe++)ne=codePointAt(ie,oe),re=ESCAPE_SEQUENCES[ne],!re&&isPrintable(ne)?(te+=ie[oe],ne>=65536&&(te+=ie[oe+1])):te+=re||encodeHex(ne);return te}__name(escapeString,"escapeString");function writeFlowSequence(ie,te,ne){var re="",oe=ie.tag,le,ae,he;for(le=0,ae=ne.length;le<ae;le+=1)he=ne[le],ie.replacer&&(he=ie.replacer.call(ne,String(le),he)),(writeNode(ie,te,he,!1,!1)||typeof he>"u"&&writeNode(ie,te,null,!1,!1))&&(re!==""&&(re+=","+(ie.condenseFlow?"":" ")),re+=ie.dump);ie.tag=oe,ie.dump="["+re+"]"}__name(writeFlowSequence,"writeFlowSequence");function writeBlockSequence(ie,te,ne,re){var oe="",le=ie.tag,ae,he,de;for(ae=0,he=ne.length;ae<he;ae+=1)de=ne[ae],ie.replacer&&(de=ie.replacer.call(ne,String(ae),de)),(writeNode(ie,te+1,de,!0,!0,!1,!0)||typeof de>"u"&&writeNode(ie,te+1,null,!0,!0,!1,!0))&&((!re||oe!=="")&&(oe+=generateNextLine(ie,te)),ie.dump&&CHAR_LINE_FEED===ie.dump.charCodeAt(0)?oe+="-":oe+="- ",oe+=ie.dump);ie.tag=le,ie.dump=oe||"[]"}__name(writeBlockSequence,"writeBlockSequence");function writeFlowMapping(ie,te,ne){var re="",oe=ie.tag,le=Object.keys(ne),ae,he,de,ue,pe;for(ae=0,he=le.length;ae<he;ae+=1)pe="",re!==""&&(pe+=", "),ie.condenseFlow&&(pe+='"'),de=le[ae],ue=ne[de],ie.replacer&&(ue=ie.replacer.call(ne,de,ue)),writeNode(ie,te,de,!1,!1)&&(ie.dump.length>1024&&(pe+="? "),pe+=ie.dump+(ie.condenseFlow?'"':"")+":"+(ie.condenseFlow?"":" "),writeNode(ie,te,ue,!1,!1)&&(pe+=ie.dump,re+=pe));ie.tag=oe,ie.dump="{"+re+"}"}__name(writeFlowMapping,"writeFlowMapping");function writeBlockMapping(ie,te,ne,re){var oe="",le=ie.tag,ae=Object.keys(ne),he,de,ue,pe,fe,ge;if(ie.sortKeys===!0)ae.sort();else if(typeof ie.sortKeys=="function")ae.sort(ie.sortKeys);else if(ie.sortKeys)throw new exception("sortKeys must be a boolean or a function");for(he=0,de=ae.length;he<de;he+=1)ge="",(!re||oe!=="")&&(ge+=generateNextLine(ie,te)),ue=ae[he],pe=ne[ue],ie.replacer&&(pe=ie.replacer.call(ne,ue,pe)),writeNode(ie,te+1,ue,!0,!0,!0)&&(fe=ie.tag!==null&&ie.tag!=="?"||ie.dump&&ie.dump.length>1024,fe&&(ie.dump&&CHAR_LINE_FEED===ie.dump.charCodeAt(0)?ge+="?":ge+="? "),ge+=ie.dump,fe&&(ge+=generateNextLine(ie,te)),writeNode(ie,te+1,pe,!0,fe)&&(ie.dump&&CHAR_LINE_FEED===ie.dump.charCodeAt(0)?ge+=":":ge+=": ",ge+=ie.dump,oe+=ge));ie.tag=le,ie.dump=oe||"{}"}__name(writeBlockMapping,"writeBlockMapping");function detectType(ie,te,ne){var re,oe,le,ae,he,de;for(oe=ne?ie.explicitTypes:ie.implicitTypes,le=0,ae=oe.length;le<ae;le+=1)if(he=oe[le],(he.instanceOf||he.predicate)&&(!he.instanceOf||typeof te=="object"&&te instanceof he.instanceOf)&&(!he.predicate||he.predicate(te))){if(ne?he.multi&&he.representName?ie.tag=he.representName(te):ie.tag=he.tag:ie.tag="?",he.represent){if(de=ie.styleMap[he.tag]||he.defaultStyle,_toString.call(he.represent)==="[object Function]")re=he.represent(te,de);else if(_hasOwnProperty.call(he.represent,de))re=he.represent[de](te,de);else throw new exception("!<"+he.tag+'> tag resolver accepts not "'+de+'" style');ie.dump=re}return!0}return!1}__name(detectType,"detectType");function writeNode(ie,te,ne,re,oe,le,ae){ie.tag=null,ie.dump=ne,detectType(ie,ne,!1)||detectType(ie,ne,!0);var he=_toString.call(ie.dump),de=re,ue;re&&(re=ie.flowLevel<0||ie.flowLevel>te);var pe=he==="[object Object]"||he==="[object Array]",fe,ge;if(pe&&(fe=ie.duplicates.indexOf(ne),ge=fe!==-1),(ie.tag!==null&&ie.tag!=="?"||ge||ie.indent!==2&&te>0)&&(oe=!1),ge&&ie.usedDuplicates[fe])ie.dump="*ref_"+fe;else{if(pe&&ge&&!ie.usedDuplicates[fe]&&(ie.usedDuplicates[fe]=!0),he==="[object Object]")re&&Object.keys(ie.dump).length!==0?(writeBlockMapping(ie,te,ie.dump,oe),ge&&(ie.dump="&ref_"+fe+ie.dump)):(writeFlowMapping(ie,te,ie.dump),ge&&(ie.dump="&ref_"+fe+" "+ie.dump));else if(he==="[object Array]")re&&ie.dump.length!==0?(ie.noArrayIndent&&!ae&&te>0?writeBlockSequence(ie,te-1,ie.dump,oe):writeBlockSequence(ie,te,ie.dump,oe),ge&&(ie.dump="&ref_"+fe+ie.dump)):(writeFlowSequence(ie,te,ie.dump),ge&&(ie.dump="&ref_"+fe+" "+ie.dump));else if(he==="[object String]")ie.tag!=="?"&&writeScalar(ie,ie.dump,te,le,de);else{if(he==="[object Undefined]")return!1;if(ie.skipInvalid)return!1;throw new exception("unacceptable kind of an object to dump "+he)}ie.tag!==null&&ie.tag!=="?"&&(ue=encodeURI(ie.tag[0]==="!"?ie.tag.slice(1):ie.tag).replace(/!/g,"%21"),ie.tag[0]==="!"?ue="!"+ue:ue.slice(0,18)==="tag:yaml.org,2002:"?ue="!!"+ue.slice(18):ue="!<"+ue+">",ie.dump=ue+" "+ie.dump)}return!0}__name(writeNode,"writeNode");function getDuplicateReferences(ie,te){var ne=[],re=[],oe,le;for(inspectNode(ie,ne,re),oe=0,le=re.length;oe<le;oe+=1)te.duplicates.push(ne[re[oe]]);te.usedDuplicates=new Array(le)}__name(getDuplicateReferences,"getDuplicateReferences");function inspectNode(ie,te,ne){var re,oe,le;if(ie!==null&&typeof ie=="object")if(oe=te.indexOf(ie),oe!==-1)ne.indexOf(oe)===-1&&ne.push(oe);else if(te.push(ie),Array.isArray(ie))for(oe=0,le=ie.length;oe<le;oe+=1)inspectNode(ie[oe],te,ne);else for(re=Object.keys(ie),oe=0,le=re.length;oe<le;oe+=1)inspectNode(ie[re[oe]],te,ne)}__name(inspectNode,"inspectNode");function dump$1(ie,te){te=te||{};var ne=new State(te);ne.noRefs||getDuplicateReferences(ie,ne);var re=ie;return ne.replacer&&(re=ne.replacer.call({"":re},"",re)),writeNode(ne,0,re,!0,!0)?ne.dump+`
`:""}__name(dump$1,"dump$1");function renamed(ie,te){return function(){throw new Error("Function yaml."+ie+" is removed in js-yaml 4. Use yaml."+te+" instead, which is now safe by default.")}}__name(renamed,"renamed");var JSON_SCHEMA=json,load=loader$1.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/const defaultIconDimensions=Object.freeze({left:0,top:0,width:16,height:16}),defaultIconTransformations=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),defaultIconProps=Object.freeze({...defaultIconDimensions,...defaultIconTransformations}),defaultExtendedIconProps=Object.freeze({...defaultIconProps,body:"",hidden:!1}),defaultIconSizeCustomisations=Object.freeze({width:null,height:null}),defaultIconCustomisations=Object.freeze({...defaultIconSizeCustomisations,...defaultIconTransformations}),stringToIcon=(ie,te,ne,re="")=>{const oe=ie.split(":");if(ie.slice(0,1)==="@"){if(oe.length<2||oe.length>3)return null;re=oe.shift().slice(1)}if(oe.length>3||!oe.length)return null;if(oe.length>1){const he=oe.pop(),de=oe.pop(),ue={provider:oe.length>0?oe[0]:re,prefix:de,name:he};return te&&!validateIconName(ue)?null:ue}const le=oe[0],ae=le.split("-");if(ae.length>1){const he={provider:re,prefix:ae.shift(),name:ae.join("-")};return te&&!validateIconName(he)?null:he}if(ne&&re===""){const he={provider:re,prefix:"",name:le};return te&&!validateIconName(he,ne)?null:he}return null},validateIconName=(ie,te)=>ie?!!((te&&ie.prefix===""||ie.prefix)&&ie.name):!1;function mergeIconTransformations(ie,te){const ne={};!ie.hFlip!=!te.hFlip&&(ne.hFlip=!0),!ie.vFlip!=!te.vFlip&&(ne.vFlip=!0);const re=((ie.rotate||0)+(te.rotate||0))%4;return re&&(ne.rotate=re),ne}function mergeIconData(ie,te){const ne=mergeIconTransformations(ie,te);for(const re in defaultExtendedIconProps)re in defaultIconTransformations?re in ie&&!(re in ne)&&(ne[re]=defaultIconTransformations[re]):re in te?ne[re]=te[re]:re in ie&&(ne[re]=ie[re]);return ne}function getIconsTree(ie,te){const ne=ie.icons,re=ie.aliases||Object.create(null),oe=Object.create(null);function le(ae){if(ne[ae])return oe[ae]=[];if(!(ae in oe)){oe[ae]=null;const he=re[ae]&&re[ae].parent,de=he&&le(he);de&&(oe[ae]=[he].concat(de))}return oe[ae]}return(te||Object.keys(ne).concat(Object.keys(re))).forEach(le),oe}function internalGetIconData(ie,te,ne){const re=ie.icons,oe=ie.aliases||Object.create(null);let le={};function ae(he){le=mergeIconData(re[he]||oe[he],le)}return ae(te),ne.forEach(ae),mergeIconData(ie,le)}function getIconData(ie,te){if(ie.icons[te])return internalGetIconData(ie,te,[]);const ne=getIconsTree(ie,[te])[te];return ne?internalGetIconData(ie,te,ne):null}const unitsSplit=/(-?[0-9.]*[0-9]+[0-9.]*)/g,unitsTest=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function calculateSize(ie,te,ne){if(te===1)return ie;if(ne=ne||100,typeof ie=="number")return Math.ceil(ie*te*ne)/ne;if(typeof ie!="string")return ie;const re=ie.split(unitsSplit);if(re===null||!re.length)return ie;const oe=[];let le=re.shift(),ae=unitsTest.test(le);for(;;){if(ae){const he=parseFloat(le);isNaN(he)?oe.push(le):oe.push(Math.ceil(he*te*ne)/ne)}else oe.push(le);if(le=re.shift(),le===void 0)return oe.join("");ae=!ae}}function splitSVGDefs(ie,te="defs"){let ne="";const re=ie.indexOf("<"+te);for(;re>=0;){const oe=ie.indexOf(">",re),le=ie.indexOf("</"+te);if(oe===-1||le===-1)break;const ae=ie.indexOf(">",le);if(ae===-1)break;ne+=ie.slice(oe+1,le).trim(),ie=ie.slice(0,re).trim()+ie.slice(ae+1)}return{defs:ne,content:ie}}function mergeDefsAndContent(ie,te){return ie?"<defs>"+ie+"</defs>"+te:te}function wrapSVGContent(ie,te,ne){const re=splitSVGDefs(ie);return mergeDefsAndContent(re.defs,te+re.content+ne)}const isUnsetKeyword=ie=>ie==="unset"||ie==="undefined"||ie==="none";function iconToSVG(ie,te){const ne={...defaultIconProps,...ie},re={...defaultIconCustomisations,...te},oe={left:ne.left,top:ne.top,width:ne.width,height:ne.height};let le=ne.body;[ne,re].forEach(Ee=>{const Se=[],ve=Ee.hFlip,ke=Ee.vFlip;let Re=Ee.rotate;ve?ke?Re+=2:(Se.push("translate("+(oe.width+oe.left).toString()+" "+(0-oe.top).toString()+")"),Se.push("scale(-1 1)"),oe.top=oe.left=0):ke&&(Se.push("translate("+(0-oe.left).toString()+" "+(oe.height+oe.top).toString()+")"),Se.push("scale(1 -1)"),oe.top=oe.left=0);let Ne;switch(Re<0&&(Re-=Math.floor(Re/4)*4),Re=Re%4,Re){case 1:Ne=oe.height/2+oe.top,Se.unshift("rotate(90 "+Ne.toString()+" "+Ne.toString()+")");break;case 2:Se.unshift("rotate(180 "+(oe.width/2+oe.left).toString()+" "+(oe.height/2+oe.top).toString()+")");break;case 3:Ne=oe.width/2+oe.left,Se.unshift("rotate(-90 "+Ne.toString()+" "+Ne.toString()+")");break}Re%2===1&&(oe.left!==oe.top&&(Ne=oe.left,oe.left=oe.top,oe.top=Ne),oe.width!==oe.height&&(Ne=oe.width,oe.width=oe.height,oe.height=Ne)),Se.length&&(le=wrapSVGContent(le,'<g transform="'+Se.join(" ")+'">',"</g>"))});const ae=re.width,he=re.height,de=oe.width,ue=oe.height;let pe,fe;ae===null?(fe=he===null?"1em":he==="auto"?ue:he,pe=calculateSize(fe,de/ue)):(pe=ae==="auto"?de:ae,fe=he===null?calculateSize(pe,ue/de):he==="auto"?ue:he);const ge={},$e=(Ee,Se)=>{isUnsetKeyword(Se)||(ge[Ee]=Se.toString())};$e("width",pe),$e("height",fe);const Te=[oe.left,oe.top,de,ue];return ge.viewBox=Te.join(" "),{attributes:ge,viewBox:Te,body:le}}const regex=/\sid="(\S+)"/g,randomPrefix="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let counter=0;function replaceIDs(ie,te=randomPrefix){const ne=[];let re;for(;re=regex.exec(ie);)ne.push(re[1]);if(!ne.length)return ie;const oe="suffix"+(Math.random()*16777216|Date.now()).toString(16);return ne.forEach(le=>{const ae=typeof te=="function"?te(le):te+(counter++).toString(),he=le.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");ie=ie.replace(new RegExp('([#;"])('+he+')([")]|\\.[a-z])',"g"),"$1"+ae+oe+"$3")}),ie=ie.replace(new RegExp(oe,"g"),""),ie}function iconToHTML(ie,te){let ne=ie.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const re in te)ne+=" "+re+'="'+te[re]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+ne+">"+ie+"</svg>"}var unknownIcon={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},iconsStore=new Map,loaderStore=new Map,registerIconPacks=__name(ie=>{for(const te of ie){if(!te.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(log.debug("Registering icon pack:",te.name),"loader"in te)loaderStore.set(te.name,te.loader);else if("icons"in te)iconsStore.set(te.name,te.icons);else throw log.error("Invalid icon loader:",te),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),getRegisteredIconData=__name(async(ie,te)=>{const ne=stringToIcon(ie,!0,te!==void 0);if(!ne)throw new Error(`Invalid icon name: ${ie}`);const re=ne.prefix||te;if(!re)throw new Error(`Icon name must contain a prefix: ${ie}`);let oe=iconsStore.get(re);if(!oe){const ae=loaderStore.get(re);if(!ae)throw new Error(`Icon set not found: ${ne.prefix}`);try{oe={...await ae(),prefix:re},iconsStore.set(re,oe)}catch(he){throw log.error(he),new Error(`Failed to load icon set: ${ne.prefix}`)}}const le=getIconData(oe,ne.name);if(!le)throw new Error(`Icon not found: ${ie}`);return le},"getRegisteredIconData"),getIconSVG=__name(async(ie,te)=>{let ne;try{ne=await getRegisteredIconData(ie,te==null?void 0:te.fallbackPrefix)}catch(le){log.error(le),ne=unknownIcon}const re=iconToSVG(ne,te);return iconToHTML(replaceIDs(re.body),re.attributes)},"getIconSVG"),getSubGraphTitleMargins=__name(({flowchart:ie})=>{var oe,le;const te=((oe=ie==null?void 0:ie.subGraphTitleMargin)==null?void 0:oe.top)??0,ne=((le=ie==null?void 0:ie.subGraphTitleMargin)==null?void 0:le.bottom)??0,re=te+ne;return{subGraphTitleTopMargin:te,subGraphTitleBottomMargin:ne,subGraphTitleTotalMargin:re}},"getSubGraphTitleMargins"),dist={},constants={};Object.defineProperty(constants,"__esModule",{value:!0});constants.BLANK_URL=constants.relativeFirstCharacters=constants.whitespaceEscapeCharsRegex=constants.urlSchemeRegex=constants.ctrlCharactersRegex=constants.htmlCtrlEntityRegex=constants.htmlEntitiesRegex=constants.invalidProtocolRegex=void 0;constants.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im;constants.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g;constants.htmlCtrlEntityRegex=/&(newline|tab);/gi;constants.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim;constants.urlSchemeRegex=/^.+(:|&colon;)/gim;constants.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g;constants.relativeFirstCharacters=[".","/"];constants.BLANK_URL="about:blank";Object.defineProperty(dist,"__esModule",{value:!0});var sanitizeUrl_1=dist.sanitizeUrl=void 0,constants_1=constants;function isRelativeUrlWithoutProtocol(ie){return constants_1.relativeFirstCharacters.indexOf(ie[0])>-1}function decodeHtmlCharacters(ie){var te=ie.replace(constants_1.ctrlCharactersRegex,"");return te.replace(constants_1.htmlEntitiesRegex,function(ne,re){return String.fromCharCode(re)})}function isValidUrl(ie){return URL.canParse(ie)}function decodeURI(ie){try{return decodeURIComponent(ie)}catch{return ie}}function sanitizeUrl(ie){if(!ie)return constants_1.BLANK_URL;var te,ne=decodeURI(ie.trim());do ne=decodeHtmlCharacters(ne).replace(constants_1.htmlCtrlEntityRegex,"").replace(constants_1.ctrlCharactersRegex,"").replace(constants_1.whitespaceEscapeCharsRegex,"").trim(),ne=decodeURI(ne),te=ne.match(constants_1.ctrlCharactersRegex)||ne.match(constants_1.htmlEntitiesRegex)||ne.match(constants_1.htmlCtrlEntityRegex)||ne.match(constants_1.whitespaceEscapeCharsRegex);while(te&&te.length>0);var re=ne;if(!re)return constants_1.BLANK_URL;if(isRelativeUrlWithoutProtocol(re))return re;var oe=re.trimStart(),le=oe.match(constants_1.urlSchemeRegex);if(!le)return re;var ae=le[0].toLowerCase().trim();if(constants_1.invalidProtocolRegex.test(ae))return constants_1.BLANK_URL;var he=oe.replace(/\\/g,"/");if(ae==="mailto:"||ae.includes("://"))return he;if(ae==="http:"||ae==="https:"){if(!isValidUrl(he))return constants_1.BLANK_URL;var de=new URL(he);return de.protocol=de.protocol.toLowerCase(),de.hostname=de.hostname.toLowerCase(),de.toString()}return he}sanitizeUrl_1=dist.sanitizeUrl=sanitizeUrl;var noop$1={value:()=>{}};function dispatch(){for(var ie=0,te=arguments.length,ne={},re;ie<te;++ie){if(!(re=arguments[ie]+"")||re in ne||/[\s.]/.test(re))throw new Error("illegal type: "+re);ne[re]=[]}return new Dispatch(ne)}function Dispatch(ie){this._=ie}function parseTypenames$1(ie,te){return ie.trim().split(/^|\s+/).map(function(ne){var re="",oe=ne.indexOf(".");if(oe>=0&&(re=ne.slice(oe+1),ne=ne.slice(0,oe)),ne&&!te.hasOwnProperty(ne))throw new Error("unknown type: "+ne);return{type:ne,name:re}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(ie,te){var ne=this._,re=parseTypenames$1(ie+"",ne),oe,le=-1,ae=re.length;if(arguments.length<2){for(;++le<ae;)if((oe=(ie=re[le]).type)&&(oe=get$1(ne[oe],ie.name)))return oe;return}if(te!=null&&typeof te!="function")throw new Error("invalid callback: "+te);for(;++le<ae;)if(oe=(ie=re[le]).type)ne[oe]=set$1(ne[oe],ie.name,te);else if(te==null)for(oe in ne)ne[oe]=set$1(ne[oe],ie.name,null);return this},copy:function(){var ie={},te=this._;for(var ne in te)ie[ne]=te[ne].slice();return new Dispatch(ie)},call:function(ie,te){if((oe=arguments.length-2)>0)for(var ne=new Array(oe),re=0,oe,le;re<oe;++re)ne[re]=arguments[re+2];if(!this._.hasOwnProperty(ie))throw new Error("unknown type: "+ie);for(le=this._[ie],re=0,oe=le.length;re<oe;++re)le[re].value.apply(te,ne)},apply:function(ie,te,ne){if(!this._.hasOwnProperty(ie))throw new Error("unknown type: "+ie);for(var re=this._[ie],oe=0,le=re.length;oe<le;++oe)re[oe].value.apply(te,ne)}};function get$1(ie,te){for(var ne=0,re=ie.length,oe;ne<re;++ne)if((oe=ie[ne]).name===te)return oe.value}function set$1(ie,te,ne){for(var re=0,oe=ie.length;re<oe;++re)if(ie[re].name===te){ie[re]=noop$1,ie=ie.slice(0,re).concat(ie.slice(re+1));break}return ne!=null&&ie.push({name:te,value:ne}),ie}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(ie){var te=ie+="",ne=te.indexOf(":");return ne>=0&&(te=ie.slice(0,ne))!=="xmlns"&&(ie=ie.slice(ne+1)),namespaces.hasOwnProperty(te)?{space:namespaces[te],local:ie}:ie}function creatorInherit(ie){return function(){var te=this.ownerDocument,ne=this.namespaceURI;return ne===xhtml&&te.documentElement.namespaceURI===xhtml?te.createElement(ie):te.createElementNS(ne,ie)}}function creatorFixed(ie){return function(){return this.ownerDocument.createElementNS(ie.space,ie.local)}}function creator(ie){var te=namespace(ie);return(te.local?creatorFixed:creatorInherit)(te)}function none(){}function selector(ie){return ie==null?none:function(){return this.querySelector(ie)}}function selection_select(ie){typeof ie!="function"&&(ie=selector(ie));for(var te=this._groups,ne=te.length,re=new Array(ne),oe=0;oe<ne;++oe)for(var le=te[oe],ae=le.length,he=re[oe]=new Array(ae),de,ue,pe=0;pe<ae;++pe)(de=le[pe])&&(ue=ie.call(de,de.__data__,pe,le))&&("__data__"in de&&(ue.__data__=de.__data__),he[pe]=ue);return new Selection$1(re,this._parents)}function array$1(ie){return ie==null?[]:Array.isArray(ie)?ie:Array.from(ie)}function empty(){return[]}function selectorAll(ie){return ie==null?empty:function(){return this.querySelectorAll(ie)}}function arrayAll(ie){return function(){return array$1(ie.apply(this,arguments))}}function selection_selectAll(ie){typeof ie=="function"?ie=arrayAll(ie):ie=selectorAll(ie);for(var te=this._groups,ne=te.length,re=[],oe=[],le=0;le<ne;++le)for(var ae=te[le],he=ae.length,de,ue=0;ue<he;++ue)(de=ae[ue])&&(re.push(ie.call(de,de.__data__,ue,ae)),oe.push(de));return new Selection$1(re,oe)}function matcher(ie){return function(){return this.matches(ie)}}function childMatcher(ie){return function(te){return te.matches(ie)}}var find=Array.prototype.find;function childFind(ie){return function(){return find.call(this.children,ie)}}function childFirst(){return this.firstElementChild}function selection_selectChild(ie){return this.select(ie==null?childFirst:childFind(typeof ie=="function"?ie:childMatcher(ie)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(ie){return function(){return filter.call(this.children,ie)}}function selection_selectChildren(ie){return this.selectAll(ie==null?children:childrenFilter(typeof ie=="function"?ie:childMatcher(ie)))}function selection_filter(ie){typeof ie!="function"&&(ie=matcher(ie));for(var te=this._groups,ne=te.length,re=new Array(ne),oe=0;oe<ne;++oe)for(var le=te[oe],ae=le.length,he=re[oe]=[],de,ue=0;ue<ae;++ue)(de=le[ue])&&ie.call(de,de.__data__,ue,le)&&he.push(de);return new Selection$1(re,this._parents)}function sparse(ie){return new Array(ie.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(ie,te){this.ownerDocument=ie.ownerDocument,this.namespaceURI=ie.namespaceURI,this._next=null,this._parent=ie,this.__data__=te}EnterNode.prototype={constructor:EnterNode,appendChild:function(ie){return this._parent.insertBefore(ie,this._next)},insertBefore:function(ie,te){return this._parent.insertBefore(ie,te)},querySelector:function(ie){return this._parent.querySelector(ie)},querySelectorAll:function(ie){return this._parent.querySelectorAll(ie)}};function constant$3(ie){return function(){return ie}}function bindIndex(ie,te,ne,re,oe,le){for(var ae=0,he,de=te.length,ue=le.length;ae<ue;++ae)(he=te[ae])?(he.__data__=le[ae],re[ae]=he):ne[ae]=new EnterNode(ie,le[ae]);for(;ae<de;++ae)(he=te[ae])&&(oe[ae]=he)}function bindKey(ie,te,ne,re,oe,le,ae){var he,de,ue=new Map,pe=te.length,fe=le.length,ge=new Array(pe),$e;for(he=0;he<pe;++he)(de=te[he])&&(ge[he]=$e=ae.call(de,de.__data__,he,te)+"",ue.has($e)?oe[he]=de:ue.set($e,de));for(he=0;he<fe;++he)$e=ae.call(ie,le[he],he,le)+"",(de=ue.get($e))?(re[he]=de,de.__data__=le[he],ue.delete($e)):ne[he]=new EnterNode(ie,le[he]);for(he=0;he<pe;++he)(de=te[he])&&ue.get(ge[he])===de&&(oe[he]=de)}function datum(ie){return ie.__data__}function selection_data(ie,te){if(!arguments.length)return Array.from(this,datum);var ne=te?bindKey:bindIndex,re=this._parents,oe=this._groups;typeof ie!="function"&&(ie=constant$3(ie));for(var le=oe.length,ae=new Array(le),he=new Array(le),de=new Array(le),ue=0;ue<le;++ue){var pe=re[ue],fe=oe[ue],ge=fe.length,$e=arraylike(ie.call(pe,pe&&pe.__data__,ue,re)),Te=$e.length,Ee=he[ue]=new Array(Te),Se=ae[ue]=new Array(Te),ve=de[ue]=new Array(ge);ne(pe,fe,Ee,Se,ve,$e,te);for(var ke=0,Re=0,Ne,xe;ke<Te;++ke)if(Ne=Ee[ke]){for(ke>=Re&&(Re=ke+1);!(xe=Se[Re])&&++Re<Te;);Ne._next=xe||null}}return ae=new Selection$1(ae,re),ae._enter=he,ae._exit=de,ae}function arraylike(ie){return typeof ie=="object"&&"length"in ie?ie:Array.from(ie)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(ie,te,ne){var re=this.enter(),oe=this,le=this.exit();return typeof ie=="function"?(re=ie(re),re&&(re=re.selection())):re=re.append(ie+""),te!=null&&(oe=te(oe),oe&&(oe=oe.selection())),ne==null?le.remove():ne(le),re&&oe?re.merge(oe).order():oe}function selection_merge(ie){for(var te=ie.selection?ie.selection():ie,ne=this._groups,re=te._groups,oe=ne.length,le=re.length,ae=Math.min(oe,le),he=new Array(oe),de=0;de<ae;++de)for(var ue=ne[de],pe=re[de],fe=ue.length,ge=he[de]=new Array(fe),$e,Te=0;Te<fe;++Te)($e=ue[Te]||pe[Te])&&(ge[Te]=$e);for(;de<oe;++de)he[de]=ne[de];return new Selection$1(he,this._parents)}function selection_order(){for(var ie=this._groups,te=-1,ne=ie.length;++te<ne;)for(var re=ie[te],oe=re.length-1,le=re[oe],ae;--oe>=0;)(ae=re[oe])&&(le&&ae.compareDocumentPosition(le)^4&&le.parentNode.insertBefore(ae,le),le=ae);return this}function selection_sort(ie){ie||(ie=ascending);function te(fe,ge){return fe&&ge?ie(fe.__data__,ge.__data__):!fe-!ge}for(var ne=this._groups,re=ne.length,oe=new Array(re),le=0;le<re;++le){for(var ae=ne[le],he=ae.length,de=oe[le]=new Array(he),ue,pe=0;pe<he;++pe)(ue=ae[pe])&&(de[pe]=ue);de.sort(te)}return new Selection$1(oe,this._parents).order()}function ascending(ie,te){return ie<te?-1:ie>te?1:ie>=te?0:NaN}function selection_call(){var ie=arguments[0];return arguments[0]=this,ie.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var ie=this._groups,te=0,ne=ie.length;te<ne;++te)for(var re=ie[te],oe=0,le=re.length;oe<le;++oe){var ae=re[oe];if(ae)return ae}return null}function selection_size(){let ie=0;for(const te of this)++ie;return ie}function selection_empty(){return!this.node()}function selection_each(ie){for(var te=this._groups,ne=0,re=te.length;ne<re;++ne)for(var oe=te[ne],le=0,ae=oe.length,he;le<ae;++le)(he=oe[le])&&ie.call(he,he.__data__,le,oe);return this}function attrRemove$1(ie){return function(){this.removeAttribute(ie)}}function attrRemoveNS$1(ie){return function(){this.removeAttributeNS(ie.space,ie.local)}}function attrConstant$1(ie,te){return function(){this.setAttribute(ie,te)}}function attrConstantNS$1(ie,te){return function(){this.setAttributeNS(ie.space,ie.local,te)}}function attrFunction$1(ie,te){return function(){var ne=te.apply(this,arguments);ne==null?this.removeAttribute(ie):this.setAttribute(ie,ne)}}function attrFunctionNS$1(ie,te){return function(){var ne=te.apply(this,arguments);ne==null?this.removeAttributeNS(ie.space,ie.local):this.setAttributeNS(ie.space,ie.local,ne)}}function selection_attr(ie,te){var ne=namespace(ie);if(arguments.length<2){var re=this.node();return ne.local?re.getAttributeNS(ne.space,ne.local):re.getAttribute(ne)}return this.each((te==null?ne.local?attrRemoveNS$1:attrRemove$1:typeof te=="function"?ne.local?attrFunctionNS$1:attrFunction$1:ne.local?attrConstantNS$1:attrConstant$1)(ne,te))}function defaultView(ie){return ie.ownerDocument&&ie.ownerDocument.defaultView||ie.document&&ie||ie.defaultView}function styleRemove$1(ie){return function(){this.style.removeProperty(ie)}}function styleConstant$1(ie,te,ne){return function(){this.style.setProperty(ie,te,ne)}}function styleFunction$1(ie,te,ne){return function(){var re=te.apply(this,arguments);re==null?this.style.removeProperty(ie):this.style.setProperty(ie,re,ne)}}function selection_style(ie,te,ne){return arguments.length>1?this.each((te==null?styleRemove$1:typeof te=="function"?styleFunction$1:styleConstant$1)(ie,te,ne??"")):styleValue(this.node(),ie)}function styleValue(ie,te){return ie.style.getPropertyValue(te)||defaultView(ie).getComputedStyle(ie,null).getPropertyValue(te)}function propertyRemove(ie){return function(){delete this[ie]}}function propertyConstant(ie,te){return function(){this[ie]=te}}function propertyFunction(ie,te){return function(){var ne=te.apply(this,arguments);ne==null?delete this[ie]:this[ie]=ne}}function selection_property(ie,te){return arguments.length>1?this.each((te==null?propertyRemove:typeof te=="function"?propertyFunction:propertyConstant)(ie,te)):this.node()[ie]}function classArray(ie){return ie.trim().split(/^|\s+/)}function classList(ie){return ie.classList||new ClassList(ie)}function ClassList(ie){this._node=ie,this._names=classArray(ie.getAttribute("class")||"")}ClassList.prototype={add:function(ie){var te=this._names.indexOf(ie);te<0&&(this._names.push(ie),this._node.setAttribute("class",this._names.join(" ")))},remove:function(ie){var te=this._names.indexOf(ie);te>=0&&(this._names.splice(te,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(ie){return this._names.indexOf(ie)>=0}};function classedAdd(ie,te){for(var ne=classList(ie),re=-1,oe=te.length;++re<oe;)ne.add(te[re])}function classedRemove(ie,te){for(var ne=classList(ie),re=-1,oe=te.length;++re<oe;)ne.remove(te[re])}function classedTrue(ie){return function(){classedAdd(this,ie)}}function classedFalse(ie){return function(){classedRemove(this,ie)}}function classedFunction(ie,te){return function(){(te.apply(this,arguments)?classedAdd:classedRemove)(this,ie)}}function selection_classed(ie,te){var ne=classArray(ie+"");if(arguments.length<2){for(var re=classList(this.node()),oe=-1,le=ne.length;++oe<le;)if(!re.contains(ne[oe]))return!1;return!0}return this.each((typeof te=="function"?classedFunction:te?classedTrue:classedFalse)(ne,te))}function textRemove(){this.textContent=""}function textConstant$1(ie){return function(){this.textContent=ie}}function textFunction$1(ie){return function(){var te=ie.apply(this,arguments);this.textContent=te??""}}function selection_text(ie){return arguments.length?this.each(ie==null?textRemove:(typeof ie=="function"?textFunction$1:textConstant$1)(ie)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(ie){return function(){this.innerHTML=ie}}function htmlFunction(ie){return function(){var te=ie.apply(this,arguments);this.innerHTML=te??""}}function selection_html(ie){return arguments.length?this.each(ie==null?htmlRemove:(typeof ie=="function"?htmlFunction:htmlConstant)(ie)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(ie){var te=typeof ie=="function"?ie:creator(ie);return this.select(function(){return this.appendChild(te.apply(this,arguments))})}function constantNull(){return null}function selection_insert(ie,te){var ne=typeof ie=="function"?ie:creator(ie),re=te==null?constantNull:typeof te=="function"?te:selector(te);return this.select(function(){return this.insertBefore(ne.apply(this,arguments),re.apply(this,arguments)||null)})}function remove(){var ie=this.parentNode;ie&&ie.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var ie=this.cloneNode(!1),te=this.parentNode;return te?te.insertBefore(ie,this.nextSibling):ie}function selection_cloneDeep(){var ie=this.cloneNode(!0),te=this.parentNode;return te?te.insertBefore(ie,this.nextSibling):ie}function selection_clone(ie){return this.select(ie?selection_cloneDeep:selection_cloneShallow)}function selection_datum(ie){return arguments.length?this.property("__data__",ie):this.node().__data__}function contextListener(ie){return function(te){ie.call(this,te,this.__data__)}}function parseTypenames(ie){return ie.trim().split(/^|\s+/).map(function(te){var ne="",re=te.indexOf(".");return re>=0&&(ne=te.slice(re+1),te=te.slice(0,re)),{type:te,name:ne}})}function onRemove(ie){return function(){var te=this.__on;if(te){for(var ne=0,re=-1,oe=te.length,le;ne<oe;++ne)le=te[ne],(!ie.type||le.type===ie.type)&&le.name===ie.name?this.removeEventListener(le.type,le.listener,le.options):te[++re]=le;++re?te.length=re:delete this.__on}}}function onAdd(ie,te,ne){return function(){var re=this.__on,oe,le=contextListener(te);if(re){for(var ae=0,he=re.length;ae<he;++ae)if((oe=re[ae]).type===ie.type&&oe.name===ie.name){this.removeEventListener(oe.type,oe.listener,oe.options),this.addEventListener(oe.type,oe.listener=le,oe.options=ne),oe.value=te;return}}this.addEventListener(ie.type,le,ne),oe={type:ie.type,name:ie.name,value:te,listener:le,options:ne},re?re.push(oe):this.__on=[oe]}}function selection_on(ie,te,ne){var re=parseTypenames(ie+""),oe,le=re.length,ae;if(arguments.length<2){var he=this.node().__on;if(he){for(var de=0,ue=he.length,pe;de<ue;++de)for(oe=0,pe=he[de];oe<le;++oe)if((ae=re[oe]).type===pe.type&&ae.name===pe.name)return pe.value}return}for(he=te?onAdd:onRemove,oe=0;oe<le;++oe)this.each(he(re[oe],te,ne));return this}function dispatchEvent(ie,te,ne){var re=defaultView(ie),oe=re.CustomEvent;typeof oe=="function"?oe=new oe(te,ne):(oe=re.document.createEvent("Event"),ne?(oe.initEvent(te,ne.bubbles,ne.cancelable),oe.detail=ne.detail):oe.initEvent(te,!1,!1)),ie.dispatchEvent(oe)}function dispatchConstant(ie,te){return function(){return dispatchEvent(this,ie,te)}}function dispatchFunction(ie,te){return function(){return dispatchEvent(this,ie,te.apply(this,arguments))}}function selection_dispatch(ie,te){return this.each((typeof te=="function"?dispatchFunction:dispatchConstant)(ie,te))}function*selection_iterator(){for(var ie=this._groups,te=0,ne=ie.length;te<ne;++te)for(var re=ie[te],oe=0,le=re.length,ae;oe<le;++oe)(ae=re[oe])&&(yield ae)}var root$2=[null];function Selection$1(ie,te){this._groups=ie,this._parents=te}function selection(){return new Selection$1([[document.documentElement]],root$2)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(ie){return typeof ie=="string"?new Selection$1([[document.querySelector(ie)]],[document.documentElement]):new Selection$1([[ie]],root$2)}function define(ie,te,ne){ie.prototype=te.prototype=ne,ne.constructor=ie}function extend(ie,te){var ne=Object.create(ie.prototype);for(var re in te)ne[re]=te[re];return ne}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(ie){return Object.assign(new this.constructor,this,ie)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(ie){var te,ne;return ie=(ie+"").trim().toLowerCase(),(te=reHex.exec(ie))?(ne=te[1].length,te=parseInt(te[1],16),ne===6?rgbn(te):ne===3?new Rgb(te>>8&15|te>>4&240,te>>4&15|te&240,(te&15)<<4|te&15,1):ne===8?rgba(te>>24&255,te>>16&255,te>>8&255,(te&255)/255):ne===4?rgba(te>>12&15|te>>8&240,te>>8&15|te>>4&240,te>>4&15|te&240,((te&15)<<4|te&15)/255):null):(te=reRgbInteger.exec(ie))?new Rgb(te[1],te[2],te[3],1):(te=reRgbPercent.exec(ie))?new Rgb(te[1]*255/100,te[2]*255/100,te[3]*255/100,1):(te=reRgbaInteger.exec(ie))?rgba(te[1],te[2],te[3],te[4]):(te=reRgbaPercent.exec(ie))?rgba(te[1]*255/100,te[2]*255/100,te[3]*255/100,te[4]):(te=reHslPercent.exec(ie))?hsla(te[1],te[2]/100,te[3]/100,1):(te=reHslaPercent.exec(ie))?hsla(te[1],te[2]/100,te[3]/100,te[4]):named.hasOwnProperty(ie)?rgbn(named[ie]):ie==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(ie){return new Rgb(ie>>16&255,ie>>8&255,ie&255,1)}function rgba(ie,te,ne,re){return re<=0&&(ie=te=ne=NaN),new Rgb(ie,te,ne,re)}function rgbConvert(ie){return ie instanceof Color||(ie=color(ie)),ie?(ie=ie.rgb(),new Rgb(ie.r,ie.g,ie.b,ie.opacity)):new Rgb}function rgb(ie,te,ne,re){return arguments.length===1?rgbConvert(ie):new Rgb(ie,te,ne,re??1)}function Rgb(ie,te,ne,re){this.r=+ie,this.g=+te,this.b=+ne,this.opacity=+re}define(Rgb,rgb,extend(Color,{brighter(ie){return ie=ie==null?brighter:Math.pow(brighter,ie),new Rgb(this.r*ie,this.g*ie,this.b*ie,this.opacity)},darker(ie){return ie=ie==null?darker:Math.pow(darker,ie),new Rgb(this.r*ie,this.g*ie,this.b*ie,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const ie=clampa(this.opacity);return`${ie===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${ie===1?")":`, ${ie})`}`}function clampa(ie){return isNaN(ie)?1:Math.max(0,Math.min(1,ie))}function clampi(ie){return Math.max(0,Math.min(255,Math.round(ie)||0))}function hex(ie){return ie=clampi(ie),(ie<16?"0":"")+ie.toString(16)}function hsla(ie,te,ne,re){return re<=0?ie=te=ne=NaN:ne<=0||ne>=1?ie=te=NaN:te<=0&&(ie=NaN),new Hsl(ie,te,ne,re)}function hslConvert(ie){if(ie instanceof Hsl)return new Hsl(ie.h,ie.s,ie.l,ie.opacity);if(ie instanceof Color||(ie=color(ie)),!ie)return new Hsl;if(ie instanceof Hsl)return ie;ie=ie.rgb();var te=ie.r/255,ne=ie.g/255,re=ie.b/255,oe=Math.min(te,ne,re),le=Math.max(te,ne,re),ae=NaN,he=le-oe,de=(le+oe)/2;return he?(te===le?ae=(ne-re)/he+(ne<re)*6:ne===le?ae=(re-te)/he+2:ae=(te-ne)/he+4,he/=de<.5?le+oe:2-le-oe,ae*=60):he=de>0&&de<1?0:ae,new Hsl(ae,he,de,ie.opacity)}function hsl(ie,te,ne,re){return arguments.length===1?hslConvert(ie):new Hsl(ie,te,ne,re??1)}function Hsl(ie,te,ne,re){this.h=+ie,this.s=+te,this.l=+ne,this.opacity=+re}define(Hsl,hsl,extend(Color,{brighter(ie){return ie=ie==null?brighter:Math.pow(brighter,ie),new Hsl(this.h,this.s,this.l*ie,this.opacity)},darker(ie){return ie=ie==null?darker:Math.pow(darker,ie),new Hsl(this.h,this.s,this.l*ie,this.opacity)},rgb(){var ie=this.h%360+(this.h<0)*360,te=isNaN(ie)||isNaN(this.s)?0:this.s,ne=this.l,re=ne+(ne<.5?ne:1-ne)*te,oe=2*ne-re;return new Rgb(hsl2rgb(ie>=240?ie-240:ie+120,oe,re),hsl2rgb(ie,oe,re),hsl2rgb(ie<120?ie+240:ie-120,oe,re),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const ie=clampa(this.opacity);return`${ie===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${ie===1?")":`, ${ie})`}`}}));function clamph(ie){return ie=(ie||0)%360,ie<0?ie+360:ie}function clampt(ie){return Math.max(0,Math.min(1,ie||0))}function hsl2rgb(ie,te,ne){return(ie<60?te+(ne-te)*ie/60:ie<180?ne:ie<240?te+(ne-te)*(240-ie)/60:te)*255}const constant$2=ie=>()=>ie;function linear(ie,te){return function(ne){return ie+ne*te}}function exponential(ie,te,ne){return ie=Math.pow(ie,ne),te=Math.pow(te,ne)-ie,ne=1/ne,function(re){return Math.pow(ie+re*te,ne)}}function hue(ie,te){var ne=te-ie;return ne?linear(ie,ne>180||ne<-180?ne-360*Math.round(ne/360):ne):constant$2(isNaN(ie)?te:ie)}function gamma(ie){return(ie=+ie)==1?nogamma:function(te,ne){return ne-te?exponential(te,ne,ie):constant$2(isNaN(te)?ne:te)}}function nogamma(ie,te){var ne=te-ie;return ne?linear(ie,ne):constant$2(isNaN(ie)?te:ie)}const interpolateRgb=function ie(te){var ne=gamma(te);function re(oe,le){var ae=ne((oe=rgb(oe)).r,(le=rgb(le)).r),he=ne(oe.g,le.g),de=ne(oe.b,le.b),ue=nogamma(oe.opacity,le.opacity);return function(pe){return oe.r=ae(pe),oe.g=he(pe),oe.b=de(pe),oe.opacity=ue(pe),oe+""}}return re.gamma=ie,re}(1);function interpolateNumber(ie,te){return ie=+ie,te=+te,function(ne){return ie*(1-ne)+te*ne}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(ie){return function(){return ie}}function one(ie){return function(te){return ie(te)+""}}function interpolateString(ie,te){var ne=reA.lastIndex=reB.lastIndex=0,re,oe,le,ae=-1,he=[],de=[];for(ie=ie+"",te=te+"";(re=reA.exec(ie))&&(oe=reB.exec(te));)(le=oe.index)>ne&&(le=te.slice(ne,le),he[ae]?he[ae]+=le:he[++ae]=le),(re=re[0])===(oe=oe[0])?he[ae]?he[ae]+=oe:he[++ae]=oe:(he[++ae]=null,de.push({i:ae,x:interpolateNumber(re,oe)})),ne=reB.lastIndex;return ne<te.length&&(le=te.slice(ne),he[ae]?he[ae]+=le:he[++ae]=le),he.length<2?de[0]?one(de[0].x):zero(te):(te=de.length,function(ue){for(var pe=0,fe;pe<te;++pe)he[(fe=de[pe]).i]=fe.x(ue);return he.join("")})}var degrees=180/Math.PI,identity$1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(ie,te,ne,re,oe,le){var ae,he,de;return(ae=Math.sqrt(ie*ie+te*te))&&(ie/=ae,te/=ae),(de=ie*ne+te*re)&&(ne-=ie*de,re-=te*de),(he=Math.sqrt(ne*ne+re*re))&&(ne/=he,re/=he,de/=he),ie*re<te*ne&&(ie=-ie,te=-te,de=-de,ae=-ae),{translateX:oe,translateY:le,rotate:Math.atan2(te,ie)*degrees,skewX:Math.atan(de)*degrees,scaleX:ae,scaleY:he}}var svgNode;function parseCss(ie){const te=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(ie+"");return te.isIdentity?identity$1:decompose(te.a,te.b,te.c,te.d,te.e,te.f)}function parseSvg(ie){return ie==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",ie),!(ie=svgNode.transform.baseVal.consolidate()))?identity$1:(ie=ie.matrix,decompose(ie.a,ie.b,ie.c,ie.d,ie.e,ie.f))}function interpolateTransform(ie,te,ne,re){function oe(ue){return ue.length?ue.pop()+" ":""}function le(ue,pe,fe,ge,$e,Te){if(ue!==fe||pe!==ge){var Ee=$e.push("translate(",null,te,null,ne);Te.push({i:Ee-4,x:interpolateNumber(ue,fe)},{i:Ee-2,x:interpolateNumber(pe,ge)})}else(fe||ge)&&$e.push("translate("+fe+te+ge+ne)}function ae(ue,pe,fe,ge){ue!==pe?(ue-pe>180?pe+=360:pe-ue>180&&(ue+=360),ge.push({i:fe.push(oe(fe)+"rotate(",null,re)-2,x:interpolateNumber(ue,pe)})):pe&&fe.push(oe(fe)+"rotate("+pe+re)}function he(ue,pe,fe,ge){ue!==pe?ge.push({i:fe.push(oe(fe)+"skewX(",null,re)-2,x:interpolateNumber(ue,pe)}):pe&&fe.push(oe(fe)+"skewX("+pe+re)}function de(ue,pe,fe,ge,$e,Te){if(ue!==fe||pe!==ge){var Ee=$e.push(oe($e)+"scale(",null,",",null,")");Te.push({i:Ee-4,x:interpolateNumber(ue,fe)},{i:Ee-2,x:interpolateNumber(pe,ge)})}else(fe!==1||ge!==1)&&$e.push(oe($e)+"scale("+fe+","+ge+")")}return function(ue,pe){var fe=[],ge=[];return ue=ie(ue),pe=ie(pe),le(ue.translateX,ue.translateY,pe.translateX,pe.translateY,fe,ge),ae(ue.rotate,pe.rotate,fe,ge),he(ue.skewX,pe.skewX,fe,ge),de(ue.scaleX,ue.scaleY,pe.scaleX,pe.scaleY,fe,ge),ue=pe=null,function($e){for(var Te=-1,Ee=ge.length,Se;++Te<Ee;)fe[(Se=ge[Te]).i]=Se.x($e);return fe.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(ie){setTimeout(ie,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(ie,te,ne){if(typeof ie!="function")throw new TypeError("callback is not a function");ne=(ne==null?now():+ne)+(te==null?0:+te),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=ie,this._time=ne,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(ie,te,ne){var re=new Timer;return re.restart(ie,te,ne),re}function timerFlush(){now(),++frame;for(var ie=taskHead,te;ie;)(te=clockNow-ie._time)>=0&&ie._call.call(void 0,te),ie=ie._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var ie=clock.now(),te=ie-clockLast;te>pokeDelay&&(clockSkew-=te,clockLast=ie)}function nap(){for(var ie,te=taskHead,ne,re=1/0;te;)te._call?(re>te._time&&(re=te._time),ie=te,te=te._next):(ne=te._next,te._next=null,te=ie?ie._next=ne:taskHead=ne);taskTail=ie,sleep(re)}function sleep(ie){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var te=ie-clockNow;te>24?(ie<1/0&&(timeout$1=setTimeout(wake,ie-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(ie,te,ne){var re=new Timer;return te=te==null?0:+te,re.restart(oe=>{re.stop(),ie(oe+te)},te,ne),re}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(ie,te,ne,re,oe,le){var ae=ie.__transition;if(!ae)ie.__transition={};else if(ne in ae)return;create(ie,ne,{name:te,index:re,group:oe,on:emptyOn,tween:emptyTween,time:le.time,delay:le.delay,duration:le.duration,ease:le.ease,timer:null,state:CREATED})}function init$1(ie,te){var ne=get(ie,te);if(ne.state>CREATED)throw new Error("too late; already scheduled");return ne}function set(ie,te){var ne=get(ie,te);if(ne.state>STARTED)throw new Error("too late; already running");return ne}function get(ie,te){var ne=ie.__transition;if(!ne||!(ne=ne[te]))throw new Error("transition not found");return ne}function create(ie,te,ne){var re=ie.__transition,oe;re[te]=ne,ne.timer=timer(le,0,ne.time);function le(ue){ne.state=SCHEDULED,ne.timer.restart(ae,ne.delay,ne.time),ne.delay<=ue&&ae(ue-ne.delay)}function ae(ue){var pe,fe,ge,$e;if(ne.state!==SCHEDULED)return de();for(pe in re)if($e=re[pe],$e.name===ne.name){if($e.state===STARTED)return timeout(ae);$e.state===RUNNING?($e.state=ENDED,$e.timer.stop(),$e.on.call("interrupt",ie,ie.__data__,$e.index,$e.group),delete re[pe]):+pe<te&&($e.state=ENDED,$e.timer.stop(),$e.on.call("cancel",ie,ie.__data__,$e.index,$e.group),delete re[pe])}if(timeout(function(){ne.state===STARTED&&(ne.state=RUNNING,ne.timer.restart(he,ne.delay,ne.time),he(ue))}),ne.state=STARTING,ne.on.call("start",ie,ie.__data__,ne.index,ne.group),ne.state===STARTING){for(ne.state=STARTED,oe=new Array(ge=ne.tween.length),pe=0,fe=-1;pe<ge;++pe)($e=ne.tween[pe].value.call(ie,ie.__data__,ne.index,ne.group))&&(oe[++fe]=$e);oe.length=fe+1}}function he(ue){for(var pe=ue<ne.duration?ne.ease.call(null,ue/ne.duration):(ne.timer.restart(de),ne.state=ENDING,1),fe=-1,ge=oe.length;++fe<ge;)oe[fe].call(ie,pe);ne.state===ENDING&&(ne.on.call("end",ie,ie.__data__,ne.index,ne.group),de())}function de(){ne.state=ENDED,ne.timer.stop(),delete re[te];for(var ue in re)return;delete ie.__transition}}function interrupt(ie,te){var ne=ie.__transition,re,oe,le=!0,ae;if(ne){te=te==null?null:te+"";for(ae in ne){if((re=ne[ae]).name!==te){le=!1;continue}oe=re.state>STARTING&&re.state<ENDING,re.state=ENDED,re.timer.stop(),re.on.call(oe?"interrupt":"cancel",ie,ie.__data__,re.index,re.group),delete ne[ae]}le&&delete ie.__transition}}function selection_interrupt(ie){return this.each(function(){interrupt(this,ie)})}function tweenRemove(ie,te){var ne,re;return function(){var oe=set(this,ie),le=oe.tween;if(le!==ne){re=ne=le;for(var ae=0,he=re.length;ae<he;++ae)if(re[ae].name===te){re=re.slice(),re.splice(ae,1);break}}oe.tween=re}}function tweenFunction(ie,te,ne){var re,oe;if(typeof ne!="function")throw new Error;return function(){var le=set(this,ie),ae=le.tween;if(ae!==re){oe=(re=ae).slice();for(var he={name:te,value:ne},de=0,ue=oe.length;de<ue;++de)if(oe[de].name===te){oe[de]=he;break}de===ue&&oe.push(he)}le.tween=oe}}function transition_tween(ie,te){var ne=this._id;if(ie+="",arguments.length<2){for(var re=get(this.node(),ne).tween,oe=0,le=re.length,ae;oe<le;++oe)if((ae=re[oe]).name===ie)return ae.value;return null}return this.each((te==null?tweenRemove:tweenFunction)(ne,ie,te))}function tweenValue(ie,te,ne){var re=ie._id;return ie.each(function(){var oe=set(this,re);(oe.value||(oe.value={}))[te]=ne.apply(this,arguments)}),function(oe){return get(oe,re).value[te]}}function interpolate(ie,te){var ne;return(typeof te=="number"?interpolateNumber:te instanceof color?interpolateRgb:(ne=color(te))?(te=ne,interpolateRgb):interpolateString)(ie,te)}function attrRemove(ie){return function(){this.removeAttribute(ie)}}function attrRemoveNS(ie){return function(){this.removeAttributeNS(ie.space,ie.local)}}function attrConstant(ie,te,ne){var re,oe=ne+"",le;return function(){var ae=this.getAttribute(ie);return ae===oe?null:ae===re?le:le=te(re=ae,ne)}}function attrConstantNS(ie,te,ne){var re,oe=ne+"",le;return function(){var ae=this.getAttributeNS(ie.space,ie.local);return ae===oe?null:ae===re?le:le=te(re=ae,ne)}}function attrFunction(ie,te,ne){var re,oe,le;return function(){var ae,he=ne(this),de;return he==null?void this.removeAttribute(ie):(ae=this.getAttribute(ie),de=he+"",ae===de?null:ae===re&&de===oe?le:(oe=de,le=te(re=ae,he)))}}function attrFunctionNS(ie,te,ne){var re,oe,le;return function(){var ae,he=ne(this),de;return he==null?void this.removeAttributeNS(ie.space,ie.local):(ae=this.getAttributeNS(ie.space,ie.local),de=he+"",ae===de?null:ae===re&&de===oe?le:(oe=de,le=te(re=ae,he)))}}function transition_attr(ie,te){var ne=namespace(ie),re=ne==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(ie,typeof te=="function"?(ne.local?attrFunctionNS:attrFunction)(ne,re,tweenValue(this,"attr."+ie,te)):te==null?(ne.local?attrRemoveNS:attrRemove)(ne):(ne.local?attrConstantNS:attrConstant)(ne,re,te))}function attrInterpolate(ie,te){return function(ne){this.setAttribute(ie,te.call(this,ne))}}function attrInterpolateNS(ie,te){return function(ne){this.setAttributeNS(ie.space,ie.local,te.call(this,ne))}}function attrTweenNS(ie,te){var ne,re;function oe(){var le=te.apply(this,arguments);return le!==re&&(ne=(re=le)&&attrInterpolateNS(ie,le)),ne}return oe._value=te,oe}function attrTween(ie,te){var ne,re;function oe(){var le=te.apply(this,arguments);return le!==re&&(ne=(re=le)&&attrInterpolate(ie,le)),ne}return oe._value=te,oe}function transition_attrTween(ie,te){var ne="attr."+ie;if(arguments.length<2)return(ne=this.tween(ne))&&ne._value;if(te==null)return this.tween(ne,null);if(typeof te!="function")throw new Error;var re=namespace(ie);return this.tween(ne,(re.local?attrTweenNS:attrTween)(re,te))}function delayFunction(ie,te){return function(){init$1(this,ie).delay=+te.apply(this,arguments)}}function delayConstant(ie,te){return te=+te,function(){init$1(this,ie).delay=te}}function transition_delay(ie){var te=this._id;return arguments.length?this.each((typeof ie=="function"?delayFunction:delayConstant)(te,ie)):get(this.node(),te).delay}function durationFunction(ie,te){return function(){set(this,ie).duration=+te.apply(this,arguments)}}function durationConstant(ie,te){return te=+te,function(){set(this,ie).duration=te}}function transition_duration(ie){var te=this._id;return arguments.length?this.each((typeof ie=="function"?durationFunction:durationConstant)(te,ie)):get(this.node(),te).duration}function easeConstant(ie,te){if(typeof te!="function")throw new Error;return function(){set(this,ie).ease=te}}function transition_ease(ie){var te=this._id;return arguments.length?this.each(easeConstant(te,ie)):get(this.node(),te).ease}function easeVarying(ie,te){return function(){var ne=te.apply(this,arguments);if(typeof ne!="function")throw new Error;set(this,ie).ease=ne}}function transition_easeVarying(ie){if(typeof ie!="function")throw new Error;return this.each(easeVarying(this._id,ie))}function transition_filter(ie){typeof ie!="function"&&(ie=matcher(ie));for(var te=this._groups,ne=te.length,re=new Array(ne),oe=0;oe<ne;++oe)for(var le=te[oe],ae=le.length,he=re[oe]=[],de,ue=0;ue<ae;++ue)(de=le[ue])&&ie.call(de,de.__data__,ue,le)&&he.push(de);return new Transition(re,this._parents,this._name,this._id)}function transition_merge(ie){if(ie._id!==this._id)throw new Error;for(var te=this._groups,ne=ie._groups,re=te.length,oe=ne.length,le=Math.min(re,oe),ae=new Array(re),he=0;he<le;++he)for(var de=te[he],ue=ne[he],pe=de.length,fe=ae[he]=new Array(pe),ge,$e=0;$e<pe;++$e)(ge=de[$e]||ue[$e])&&(fe[$e]=ge);for(;he<re;++he)ae[he]=te[he];return new Transition(ae,this._parents,this._name,this._id)}function start(ie){return(ie+"").trim().split(/^|\s+/).every(function(te){var ne=te.indexOf(".");return ne>=0&&(te=te.slice(0,ne)),!te||te==="start"})}function onFunction(ie,te,ne){var re,oe,le=start(te)?init$1:set;return function(){var ae=le(this,ie),he=ae.on;he!==re&&(oe=(re=he).copy()).on(te,ne),ae.on=oe}}function transition_on(ie,te){var ne=this._id;return arguments.length<2?get(this.node(),ne).on.on(ie):this.each(onFunction(ne,ie,te))}function removeFunction(ie){return function(){var te=this.parentNode;for(var ne in this.__transition)if(+ne!==ie)return;te&&te.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(ie){var te=this._name,ne=this._id;typeof ie!="function"&&(ie=selector(ie));for(var re=this._groups,oe=re.length,le=new Array(oe),ae=0;ae<oe;++ae)for(var he=re[ae],de=he.length,ue=le[ae]=new Array(de),pe,fe,ge=0;ge<de;++ge)(pe=he[ge])&&(fe=ie.call(pe,pe.__data__,ge,he))&&("__data__"in pe&&(fe.__data__=pe.__data__),ue[ge]=fe,schedule(ue[ge],te,ne,ge,ue,get(pe,ne)));return new Transition(le,this._parents,te,ne)}function transition_selectAll(ie){var te=this._name,ne=this._id;typeof ie!="function"&&(ie=selectorAll(ie));for(var re=this._groups,oe=re.length,le=[],ae=[],he=0;he<oe;++he)for(var de=re[he],ue=de.length,pe,fe=0;fe<ue;++fe)if(pe=de[fe]){for(var ge=ie.call(pe,pe.__data__,fe,de),$e,Te=get(pe,ne),Ee=0,Se=ge.length;Ee<Se;++Ee)($e=ge[Ee])&&schedule($e,te,ne,Ee,ge,Te);le.push(ge),ae.push(pe)}return new Transition(le,ae,te,ne)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(ie,te){var ne,re,oe;return function(){var le=styleValue(this,ie),ae=(this.style.removeProperty(ie),styleValue(this,ie));return le===ae?null:le===ne&&ae===re?oe:oe=te(ne=le,re=ae)}}function styleRemove(ie){return function(){this.style.removeProperty(ie)}}function styleConstant(ie,te,ne){var re,oe=ne+"",le;return function(){var ae=styleValue(this,ie);return ae===oe?null:ae===re?le:le=te(re=ae,ne)}}function styleFunction(ie,te,ne){var re,oe,le;return function(){var ae=styleValue(this,ie),he=ne(this),de=he+"";return he==null&&(de=he=(this.style.removeProperty(ie),styleValue(this,ie))),ae===de?null:ae===re&&de===oe?le:(oe=de,le=te(re=ae,he))}}function styleMaybeRemove(ie,te){var ne,re,oe,le="style."+te,ae="end."+le,he;return function(){var de=set(this,ie),ue=de.on,pe=de.value[le]==null?he||(he=styleRemove(te)):void 0;(ue!==ne||oe!==pe)&&(re=(ne=ue).copy()).on(ae,oe=pe),de.on=re}}function transition_style(ie,te,ne){var re=(ie+="")=="transform"?interpolateTransformCss:interpolate;return te==null?this.styleTween(ie,styleNull(ie,re)).on("end.style."+ie,styleRemove(ie)):typeof te=="function"?this.styleTween(ie,styleFunction(ie,re,tweenValue(this,"style."+ie,te))).each(styleMaybeRemove(this._id,ie)):this.styleTween(ie,styleConstant(ie,re,te),ne).on("end.style."+ie,null)}function styleInterpolate(ie,te,ne){return function(re){this.style.setProperty(ie,te.call(this,re),ne)}}function styleTween(ie,te,ne){var re,oe;function le(){var ae=te.apply(this,arguments);return ae!==oe&&(re=(oe=ae)&&styleInterpolate(ie,ae,ne)),re}return le._value=te,le}function transition_styleTween(ie,te,ne){var re="style."+(ie+="");if(arguments.length<2)return(re=this.tween(re))&&re._value;if(te==null)return this.tween(re,null);if(typeof te!="function")throw new Error;return this.tween(re,styleTween(ie,te,ne??""))}function textConstant(ie){return function(){this.textContent=ie}}function textFunction(ie){return function(){var te=ie(this);this.textContent=te??""}}function transition_text(ie){return this.tween("text",typeof ie=="function"?textFunction(tweenValue(this,"text",ie)):textConstant(ie==null?"":ie+""))}function textInterpolate(ie){return function(te){this.textContent=ie.call(this,te)}}function textTween(ie){var te,ne;function re(){var oe=ie.apply(this,arguments);return oe!==ne&&(te=(ne=oe)&&textInterpolate(oe)),te}return re._value=ie,re}function transition_textTween(ie){var te="text";if(arguments.length<1)return(te=this.tween(te))&&te._value;if(ie==null)return this.tween(te,null);if(typeof ie!="function")throw new Error;return this.tween(te,textTween(ie))}function transition_transition(){for(var ie=this._name,te=this._id,ne=newId(),re=this._groups,oe=re.length,le=0;le<oe;++le)for(var ae=re[le],he=ae.length,de,ue=0;ue<he;++ue)if(de=ae[ue]){var pe=get(de,te);schedule(de,ie,ne,ue,ae,{time:pe.time+pe.delay+pe.duration,delay:0,duration:pe.duration,ease:pe.ease})}return new Transition(re,this._parents,ie,ne)}function transition_end(){var ie,te,ne=this,re=ne._id,oe=ne.size();return new Promise(function(le,ae){var he={value:ae},de={value:function(){--oe===0&&le()}};ne.each(function(){var ue=set(this,re),pe=ue.on;pe!==ie&&(te=(ie=pe).copy(),te._.cancel.push(he),te._.interrupt.push(he),te._.end.push(de)),ue.on=te}),oe===0&&le()})}var id$1=0;function Transition(ie,te,ne,re){this._groups=ie,this._parents=te,this._name=ne,this._id=re}function newId(){return++id$1}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(ie){return((ie*=2)<=1?ie*ie*ie:(ie-=2)*ie*ie+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(ie,te){for(var ne;!(ne=ie.__transition)||!(ne=ne[te]);)if(!(ie=ie.parentNode))throw new Error(`transition ${te} not found`);return ne}function selection_transition(ie){var te,ne;ie instanceof Transition?(te=ie._id,ie=ie._name):(te=newId(),(ne=defaultTiming).time=now(),ie=ie==null?null:ie+"");for(var re=this._groups,oe=re.length,le=0;le<oe;++le)for(var ae=re[le],he=ae.length,de,ue=0;ue<he;++ue)(de=ae[ue])&&schedule(de,ie,te,ue,ae,ne||inherit(de,te));return new Transition(re,this._parents,ie,te)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;const pi$1=Math.PI,tau$1=2*pi$1,epsilon$1=1e-6,tauEpsilon=tau$1-epsilon$1;function append$1(ie){this._+=ie[0];for(let te=1,ne=ie.length;te<ne;++te)this._+=arguments[te]+ie[te]}function appendRound(ie){let te=Math.floor(ie);if(!(te>=0))throw new Error(`invalid digits: ${ie}`);if(te>15)return append$1;const ne=10**te;return function(re){this._+=re[0];for(let oe=1,le=re.length;oe<le;++oe)this._+=Math.round(arguments[oe]*ne)/ne+re[oe]}}class Path{constructor(te){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=te==null?append$1:appendRound(te)}moveTo(te,ne){this._append`M${this._x0=this._x1=+te},${this._y0=this._y1=+ne}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(te,ne){this._append`L${this._x1=+te},${this._y1=+ne}`}quadraticCurveTo(te,ne,re,oe){this._append`Q${+te},${+ne},${this._x1=+re},${this._y1=+oe}`}bezierCurveTo(te,ne,re,oe,le,ae){this._append`C${+te},${+ne},${+re},${+oe},${this._x1=+le},${this._y1=+ae}`}arcTo(te,ne,re,oe,le){if(te=+te,ne=+ne,re=+re,oe=+oe,le=+le,le<0)throw new Error(`negative radius: ${le}`);let ae=this._x1,he=this._y1,de=re-te,ue=oe-ne,pe=ae-te,fe=he-ne,ge=pe*pe+fe*fe;if(this._x1===null)this._append`M${this._x1=te},${this._y1=ne}`;else if(ge>epsilon$1)if(!(Math.abs(fe*de-ue*pe)>epsilon$1)||!le)this._append`L${this._x1=te},${this._y1=ne}`;else{let $e=re-ae,Te=oe-he,Ee=de*de+ue*ue,Se=$e*$e+Te*Te,ve=Math.sqrt(Ee),ke=Math.sqrt(ge),Re=le*Math.tan((pi$1-Math.acos((Ee+ge-Se)/(2*ve*ke)))/2),Ne=Re/ke,xe=Re/ve;Math.abs(Ne-1)>epsilon$1&&this._append`L${te+Ne*pe},${ne+Ne*fe}`,this._append`A${le},${le},0,0,${+(fe*$e>pe*Te)},${this._x1=te+xe*de},${this._y1=ne+xe*ue}`}}arc(te,ne,re,oe,le,ae){if(te=+te,ne=+ne,re=+re,ae=!!ae,re<0)throw new Error(`negative radius: ${re}`);let he=re*Math.cos(oe),de=re*Math.sin(oe),ue=te+he,pe=ne+de,fe=1^ae,ge=ae?oe-le:le-oe;this._x1===null?this._append`M${ue},${pe}`:(Math.abs(this._x1-ue)>epsilon$1||Math.abs(this._y1-pe)>epsilon$1)&&this._append`L${ue},${pe}`,re&&(ge<0&&(ge=ge%tau$1+tau$1),ge>tauEpsilon?this._append`A${re},${re},0,1,${fe},${te-he},${ne-de}A${re},${re},0,1,${fe},${this._x1=ue},${this._y1=pe}`:ge>epsilon$1&&this._append`A${re},${re},0,${+(ge>=pi$1)},${fe},${this._x1=te+re*Math.cos(le)},${this._y1=ne+re*Math.sin(le)}`)}rect(te,ne,re,oe){this._append`M${this._x0=this._x1=+te},${this._y0=this._y1=+ne}h${re=+re}v${+oe}h${-re}Z`}toString(){return this._}}function constant$1(ie){return function(){return ie}}const abs$1=Math.abs,atan2=Math.atan2,cos=Math.cos,max=Math.max,min=Math.min,sin=Math.sin,sqrt=Math.sqrt,epsilon=1e-12,pi=Math.PI,halfPi=pi/2,tau=2*pi;function acos(ie){return ie>1?0:ie<-1?pi:Math.acos(ie)}function asin(ie){return ie>=1?halfPi:ie<=-1?-halfPi:Math.asin(ie)}function withPath(ie){let te=3;return ie.digits=function(ne){if(!arguments.length)return te;if(ne==null)te=null;else{const re=Math.floor(ne);if(!(re>=0))throw new RangeError(`invalid digits: ${ne}`);te=re}return ie},()=>new Path(te)}function array(ie){return typeof ie=="object"&&"length"in ie?ie:Array.from(ie)}function Linear(ie){this._context=ie}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(ie,te){switch(ie=+ie,te=+te,this._point){case 0:this._point=1,this._line?this._context.lineTo(ie,te):this._context.moveTo(ie,te);break;case 1:this._point=2;default:this._context.lineTo(ie,te);break}}};function curveLinear(ie){return new Linear(ie)}function x$1(ie){return ie[0]}function y$1(ie){return ie[1]}function line$1(ie,te){var ne=constant$1(!0),re=null,oe=curveLinear,le=null,ae=withPath(he);ie=typeof ie=="function"?ie:ie===void 0?x$1:constant$1(ie),te=typeof te=="function"?te:te===void 0?y$1:constant$1(te);function he(de){var ue,pe=(de=array(de)).length,fe,ge=!1,$e;for(re==null&&(le=oe($e=ae())),ue=0;ue<=pe;++ue)!(ue<pe&&ne(fe=de[ue],ue,de))===ge&&((ge=!ge)?le.lineStart():le.lineEnd()),ge&&le.point(+ie(fe,ue,de),+te(fe,ue,de));if($e)return le=null,$e+""||null}return he.x=function(de){return arguments.length?(ie=typeof de=="function"?de:constant$1(+de),he):ie},he.y=function(de){return arguments.length?(te=typeof de=="function"?de:constant$1(+de),he):te},he.defined=function(de){return arguments.length?(ne=typeof de=="function"?de:constant$1(!!de),he):ne},he.curve=function(de){return arguments.length?(oe=de,re!=null&&(le=oe(re)),he):oe},he.context=function(de){return arguments.length?(de==null?re=le=null:le=oe(re=de),he):re},he}class Bump{constructor(te,ne){this._context=te,this._x=ne}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(te,ne){switch(te=+te,ne=+ne,this._point){case 0:{this._point=1,this._line?this._context.lineTo(te,ne):this._context.moveTo(te,ne);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+te)/2,this._y0,this._x0,ne,te,ne):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+ne)/2,te,this._y0,te,ne);break}}this._x0=te,this._y0=ne}}function bumpX(ie){return new Bump(ie,!0)}function bumpY(ie){return new Bump(ie,!1)}function noop(){}function point$4(ie,te,ne){ie._context.bezierCurveTo((2*ie._x0+ie._x1)/3,(2*ie._y0+ie._y1)/3,(ie._x0+2*ie._x1)/3,(ie._y0+2*ie._y1)/3,(ie._x0+4*ie._x1+te)/6,(ie._y0+4*ie._y1+ne)/6)}function Basis(ie){this._context=ie}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$4(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(ie,te){switch(ie=+ie,te=+te,this._point){case 0:this._point=1,this._line?this._context.lineTo(ie,te):this._context.moveTo(ie,te);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$4(this,ie,te);break}this._x0=this._x1,this._x1=ie,this._y0=this._y1,this._y1=te}};function curveBasis(ie){return new Basis(ie)}function BasisClosed(ie){this._context=ie}BasisClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(ie,te){switch(ie=+ie,te=+te,this._point){case 0:this._point=1,this._x2=ie,this._y2=te;break;case 1:this._point=2,this._x3=ie,this._y3=te;break;case 2:this._point=3,this._x4=ie,this._y4=te,this._context.moveTo((this._x0+4*this._x1+ie)/6,(this._y0+4*this._y1+te)/6);break;default:point$4(this,ie,te);break}this._x0=this._x1,this._x1=ie,this._y0=this._y1,this._y1=te}};function curveBasisClosed(ie){return new BasisClosed(ie)}function BasisOpen(ie){this._context=ie}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(ie,te){switch(ie=+ie,te=+te,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var ne=(this._x0+4*this._x1+ie)/6,re=(this._y0+4*this._y1+te)/6;this._line?this._context.lineTo(ne,re):this._context.moveTo(ne,re);break;case 3:this._point=4;default:point$4(this,ie,te);break}this._x0=this._x1,this._x1=ie,this._y0=this._y1,this._y1=te}};function curveBasisOpen(ie){return new BasisOpen(ie)}function Bundle(ie,te){this._basis=new Basis(ie),this._beta=te}Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var ie=this._x,te=this._y,ne=ie.length-1;if(ne>0)for(var re=ie[0],oe=te[0],le=ie[ne]-re,ae=te[ne]-oe,he=-1,de;++he<=ne;)de=he/ne,this._basis.point(this._beta*ie[he]+(1-this._beta)*(re+de*le),this._beta*te[he]+(1-this._beta)*(oe+de*ae));this._x=this._y=null,this._basis.lineEnd()},point:function(ie,te){this._x.push(+ie),this._y.push(+te)}};const curveBundle=function ie(te){function ne(re){return te===1?new Basis(re):new Bundle(re,te)}return ne.beta=function(re){return ie(+re)},ne}(.85);function point$3(ie,te,ne){ie._context.bezierCurveTo(ie._x1+ie._k*(ie._x2-ie._x0),ie._y1+ie._k*(ie._y2-ie._y0),ie._x2+ie._k*(ie._x1-te),ie._y2+ie._k*(ie._y1-ne),ie._x2,ie._y2)}function Cardinal(ie,te){this._context=ie,this._k=(1-te)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(ie,te){switch(ie=+ie,te=+te,this._point){case 0:this._point=1,this._line?this._context.lineTo(ie,te):this._context.moveTo(ie,te);break;case 1:this._point=2,this._x1=ie,this._y1=te;break;case 2:this._point=3;default:point$3(this,ie,te);break}this._x0=this._x1,this._x1=this._x2,this._x2=ie,this._y0=this._y1,this._y1=this._y2,this._y2=te}};const curveCardinal=function ie(te){function ne(re){return new Cardinal(re,te)}return ne.tension=function(re){return ie(+re)},ne}(0);function CardinalClosed(ie,te){this._context=ie,this._k=(1-te)/6}CardinalClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(ie,te){switch(ie=+ie,te=+te,this._point){case 0:this._point=1,this._x3=ie,this._y3=te;break;case 1:this._point=2,this._context.moveTo(this._x4=ie,this._y4=te);break;case 2:this._point=3,this._x5=ie,this._y5=te;break;default:point$3(this,ie,te);break}this._x0=this._x1,this._x1=this._x2,this._x2=ie,this._y0=this._y1,this._y1=this._y2,this._y2=te}};const curveCardinalClosed=function ie(te){function ne(re){return new CardinalClosed(re,te)}return ne.tension=function(re){return ie(+re)},ne}(0);function CardinalOpen(ie,te){this._context=ie,this._k=(1-te)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(ie,te){switch(ie=+ie,te=+te,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$3(this,ie,te);break}this._x0=this._x1,this._x1=this._x2,this._x2=ie,this._y0=this._y1,this._y1=this._y2,this._y2=te}};const curveCardinalOpen=function ie(te){function ne(re){return new CardinalOpen(re,te)}return ne.tension=function(re){return ie(+re)},ne}(0);function point$2(ie,te,ne){var re=ie._x1,oe=ie._y1,le=ie._x2,ae=ie._y2;if(ie._l01_a>epsilon){var he=2*ie._l01_2a+3*ie._l01_a*ie._l12_a+ie._l12_2a,de=3*ie._l01_a*(ie._l01_a+ie._l12_a);re=(re*he-ie._x0*ie._l12_2a+ie._x2*ie._l01_2a)/de,oe=(oe*he-ie._y0*ie._l12_2a+ie._y2*ie._l01_2a)/de}if(ie._l23_a>epsilon){var ue=2*ie._l23_2a+3*ie._l23_a*ie._l12_a+ie._l12_2a,pe=3*ie._l23_a*(ie._l23_a+ie._l12_a);le=(le*ue+ie._x1*ie._l23_2a-te*ie._l12_2a)/pe,ae=(ae*ue+ie._y1*ie._l23_2a-ne*ie._l12_2a)/pe}ie._context.bezierCurveTo(re,oe,le,ae,ie._x2,ie._y2)}function CatmullRom(ie,te){this._context=ie,this._alpha=te}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(ie,te){if(ie=+ie,te=+te,this._point){var ne=this._x2-ie,re=this._y2-te;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(ne*ne+re*re,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(ie,te):this._context.moveTo(ie,te);break;case 1:this._point=2;break;case 2:this._point=3;default:point$2(this,ie,te);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=ie,this._y0=this._y1,this._y1=this._y2,this._y2=te}};const curveCatmullRom=function ie(te){function ne(re){return te?new CatmullRom(re,te):new Cardinal(re,0)}return ne.alpha=function(re){return ie(+re)},ne}(.5);function CatmullRomClosed(ie,te){this._context=ie,this._alpha=te}CatmullRomClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(ie,te){if(ie=+ie,te=+te,this._point){var ne=this._x2-ie,re=this._y2-te;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(ne*ne+re*re,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=ie,this._y3=te;break;case 1:this._point=2,this._context.moveTo(this._x4=ie,this._y4=te);break;case 2:this._point=3,this._x5=ie,this._y5=te;break;default:point$2(this,ie,te);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=ie,this._y0=this._y1,this._y1=this._y2,this._y2=te}};const curveCatmullRomClosed=function ie(te){function ne(re){return te?new CatmullRomClosed(re,te):new CardinalClosed(re,0)}return ne.alpha=function(re){return ie(+re)},ne}(.5);function CatmullRomOpen(ie,te){this._context=ie,this._alpha=te}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(ie,te){if(ie=+ie,te=+te,this._point){var ne=this._x2-ie,re=this._y2-te;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(ne*ne+re*re,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$2(this,ie,te);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=ie,this._y0=this._y1,this._y1=this._y2,this._y2=te}};const curveCatmullRomOpen=function ie(te){function ne(re){return te?new CatmullRomOpen(re,te):new CardinalOpen(re,0)}return ne.alpha=function(re){return ie(+re)},ne}(.5);function LinearClosed(ie){this._context=ie}LinearClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(ie,te){ie=+ie,te=+te,this._point?this._context.lineTo(ie,te):(this._point=1,this._context.moveTo(ie,te))}};function curveLinearClosed(ie){return new LinearClosed(ie)}function sign(ie){return ie<0?-1:1}function slope3(ie,te,ne){var re=ie._x1-ie._x0,oe=te-ie._x1,le=(ie._y1-ie._y0)/(re||oe<0&&-0),ae=(ne-ie._y1)/(oe||re<0&&-0),he=(le*oe+ae*re)/(re+oe);return(sign(le)+sign(ae))*Math.min(Math.abs(le),Math.abs(ae),.5*Math.abs(he))||0}function slope2(ie,te){var ne=ie._x1-ie._x0;return ne?(3*(ie._y1-ie._y0)/ne-te)/2:te}function point$1(ie,te,ne){var re=ie._x0,oe=ie._y0,le=ie._x1,ae=ie._y1,he=(le-re)/3;ie._context.bezierCurveTo(re+he,oe+he*te,le-he,ae-he*ne,le,ae)}function MonotoneX(ie){this._context=ie}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$1(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(ie,te){var ne=NaN;if(ie=+ie,te=+te,!(ie===this._x1&&te===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(ie,te):this._context.moveTo(ie,te);break;case 1:this._point=2;break;case 2:this._point=3,point$1(this,slope2(this,ne=slope3(this,ie,te)),ne);break;default:point$1(this,this._t0,ne=slope3(this,ie,te));break}this._x0=this._x1,this._x1=ie,this._y0=this._y1,this._y1=te,this._t0=ne}}};function MonotoneY(ie){this._context=new ReflectContext(ie)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(ie,te){MonotoneX.prototype.point.call(this,te,ie)};function ReflectContext(ie){this._context=ie}ReflectContext.prototype={moveTo:function(ie,te){this._context.moveTo(te,ie)},closePath:function(){this._context.closePath()},lineTo:function(ie,te){this._context.lineTo(te,ie)},bezierCurveTo:function(ie,te,ne,re,oe,le){this._context.bezierCurveTo(te,ie,re,ne,le,oe)}};function monotoneX(ie){return new MonotoneX(ie)}function monotoneY(ie){return new MonotoneY(ie)}function Natural(ie){this._context=ie}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var ie=this._x,te=this._y,ne=ie.length;if(ne)if(this._line?this._context.lineTo(ie[0],te[0]):this._context.moveTo(ie[0],te[0]),ne===2)this._context.lineTo(ie[1],te[1]);else for(var re=controlPoints(ie),oe=controlPoints(te),le=0,ae=1;ae<ne;++le,++ae)this._context.bezierCurveTo(re[0][le],oe[0][le],re[1][le],oe[1][le],ie[ae],te[ae]);(this._line||this._line!==0&&ne===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(ie,te){this._x.push(+ie),this._y.push(+te)}};function controlPoints(ie){var te,ne=ie.length-1,re,oe=new Array(ne),le=new Array(ne),ae=new Array(ne);for(oe[0]=0,le[0]=2,ae[0]=ie[0]+2*ie[1],te=1;te<ne-1;++te)oe[te]=1,le[te]=4,ae[te]=4*ie[te]+2*ie[te+1];for(oe[ne-1]=2,le[ne-1]=7,ae[ne-1]=8*ie[ne-1]+ie[ne],te=1;te<ne;++te)re=oe[te]/le[te-1],le[te]-=re,ae[te]-=re*ae[te-1];for(oe[ne-1]=ae[ne-1]/le[ne-1],te=ne-2;te>=0;--te)oe[te]=(ae[te]-oe[te+1])/le[te];for(le[ne-1]=(ie[ne]+oe[ne-1])/2,te=0;te<ne-1;++te)le[te]=2*ie[te+1]-oe[te+1];return[oe,le]}function curveNatural(ie){return new Natural(ie)}function Step(ie,te){this._context=ie,this._t=te}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(ie,te){switch(ie=+ie,te=+te,this._point){case 0:this._point=1,this._line?this._context.lineTo(ie,te):this._context.moveTo(ie,te);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,te),this._context.lineTo(ie,te);else{var ne=this._x*(1-this._t)+ie*this._t;this._context.lineTo(ne,this._y),this._context.lineTo(ne,te)}break}}this._x=ie,this._y=te}};function curveStep(ie){return new Step(ie,.5)}function stepBefore(ie){return new Step(ie,0)}function stepAfter(ie){return new Step(ie,1)}function Transform(ie,te,ne){this.k=ie,this.x=te,this.y=ne}Transform.prototype={constructor:Transform,scale:function(ie){return ie===1?this:new Transform(this.k*ie,this.x,this.y)},translate:function(ie,te){return ie===0&te===0?this:new Transform(this.k,this.x+this.k*ie,this.y+this.k*te)},apply:function(ie){return[ie[0]*this.k+this.x,ie[1]*this.k+this.y]},applyX:function(ie){return ie*this.k+this.x},applyY:function(ie){return ie*this.k+this.y},invert:function(ie){return[(ie[0]-this.x)/this.k,(ie[1]-this.y)/this.k]},invertX:function(ie){return(ie-this.x)/this.k},invertY:function(ie){return(ie-this.y)/this.k},rescaleX:function(ie){return ie.copy().domain(ie.range().map(this.invertX,this).map(ie.invert,ie))},rescaleY:function(ie){return ie.copy().domain(ie.range().map(this.invertY,this).map(ie.invert,ie))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Transform.prototype;var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;const freeGlobal$1=freeGlobal;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal$1||freeSelf||Function("return this")();const root$1=root;var Symbol$1=root$1.Symbol;const Symbol$2=Symbol$1;var objectProto$c=Object.prototype,hasOwnProperty$a=objectProto$c.hasOwnProperty,nativeObjectToString$1=objectProto$c.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(ie){var te=hasOwnProperty$a.call(ie,symToStringTag$1),ne=ie[symToStringTag$1];try{ie[symToStringTag$1]=void 0;var re=!0}catch{}var oe=nativeObjectToString$1.call(ie);return re&&(te?ie[symToStringTag$1]=ne:delete ie[symToStringTag$1]),oe}var objectProto$b=Object.prototype,nativeObjectToString=objectProto$b.toString;function objectToString(ie){return nativeObjectToString.call(ie)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(ie){return ie==null?ie===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(ie)?getRawTag(ie):objectToString(ie)}function isObject(ie){var te=typeof ie;return ie!=null&&(te=="object"||te=="function")}var asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(ie){if(!isObject(ie))return!1;var te=baseGetTag(ie);return te==funcTag$1||te==genTag||te==asyncTag||te==proxyTag}var coreJsData=root$1["__core-js_shared__"];const coreJsData$1=coreJsData;var maskSrcKey=function(){var ie=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return ie?"Symbol(src)_1."+ie:""}();function isMasked(ie){return!!maskSrcKey&&maskSrcKey in ie}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(ie){if(ie!=null){try{return funcToString$2.call(ie)}catch{}try{return ie+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$a=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$9=objectProto$a.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$9).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(ie){if(!isObject(ie)||isMasked(ie))return!1;var te=isFunction(ie)?reIsNative:reIsHostCtor;return te.test(toSource(ie))}function getValue(ie,te){return ie==null?void 0:ie[te]}function getNative(ie,te){var ne=getValue(ie,te);return baseIsNative(ne)?ne:void 0}var nativeCreate=getNative(Object,"create");const nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(ie){var te=this.has(ie)&&delete this.__data__[ie];return this.size-=te?1:0,te}var HASH_UNDEFINED$1="__lodash_hash_undefined__",objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty;function hashGet(ie){var te=this.__data__;if(nativeCreate$1){var ne=te[ie];return ne===HASH_UNDEFINED$1?void 0:ne}return hasOwnProperty$8.call(te,ie)?te[ie]:void 0}var objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function hashHas(ie){var te=this.__data__;return nativeCreate$1?te[ie]!==void 0:hasOwnProperty$7.call(te,ie)}var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(ie,te){var ne=this.__data__;return this.size+=this.has(ie)?0:1,ne[ie]=nativeCreate$1&&te===void 0?HASH_UNDEFINED:te,this}function Hash(ie){var te=-1,ne=ie==null?0:ie.length;for(this.clear();++te<ne;){var re=ie[te];this.set(re[0],re[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function eq(ie,te){return ie===te||ie!==ie&&te!==te}function assocIndexOf(ie,te){for(var ne=ie.length;ne--;)if(eq(ie[ne][0],te))return ne;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(ie){var te=this.__data__,ne=assocIndexOf(te,ie);if(ne<0)return!1;var re=te.length-1;return ne==re?te.pop():splice.call(te,ne,1),--this.size,!0}function listCacheGet(ie){var te=this.__data__,ne=assocIndexOf(te,ie);return ne<0?void 0:te[ne][1]}function listCacheHas(ie){return assocIndexOf(this.__data__,ie)>-1}function listCacheSet(ie,te){var ne=this.__data__,re=assocIndexOf(ne,ie);return re<0?(++this.size,ne.push([ie,te])):ne[re][1]=te,this}function ListCache(ie){var te=-1,ne=ie==null?0:ie.length;for(this.clear();++te<ne;){var re=ie[te];this.set(re[0],re[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$1,"Map");const Map$2=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(ie){var te=typeof ie;return te=="string"||te=="number"||te=="symbol"||te=="boolean"?ie!=="__proto__":ie===null}function getMapData(ie,te){var ne=ie.__data__;return isKeyable(te)?ne[typeof te=="string"?"string":"hash"]:ne.map}function mapCacheDelete(ie){var te=getMapData(this,ie).delete(ie);return this.size-=te?1:0,te}function mapCacheGet(ie){return getMapData(this,ie).get(ie)}function mapCacheHas(ie){return getMapData(this,ie).has(ie)}function mapCacheSet(ie,te){var ne=getMapData(this,ie),re=ne.size;return ne.set(ie,te),this.size+=ne.size==re?0:1,this}function MapCache(ie){var te=-1,ne=ie==null?0:ie.length;for(this.clear();++te<ne;){var re=ie[te];this.set(re[0],re[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT="Expected a function";function memoize(ie,te){if(typeof ie!="function"||te!=null&&typeof te!="function")throw new TypeError(FUNC_ERROR_TEXT);var ne=function(){var re=arguments,oe=te?te.apply(this,re):re[0],le=ne.cache;if(le.has(oe))return le.get(oe);var ae=ie.apply(this,re);return ne.cache=le.set(oe,ae)||le,ae};return ne.cache=new(memoize.Cache||MapCache),ne}memoize.Cache=MapCache;function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(ie){var te=this.__data__,ne=te.delete(ie);return this.size=te.size,ne}function stackGet(ie){return this.__data__.get(ie)}function stackHas(ie){return this.__data__.has(ie)}var LARGE_ARRAY_SIZE=200;function stackSet(ie,te){var ne=this.__data__;if(ne instanceof ListCache){var re=ne.__data__;if(!Map$2||re.length<LARGE_ARRAY_SIZE-1)return re.push([ie,te]),this.size=++ne.size,this;ne=this.__data__=new MapCache(re)}return ne.set(ie,te),this.size=ne.size,this}function Stack(ie){var te=this.__data__=new ListCache(ie);this.size=te.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;var defineProperty=function(){try{var ie=getNative(Object,"defineProperty");return ie({},"",{}),ie}catch{}}();const defineProperty$1=defineProperty;function baseAssignValue(ie,te,ne){te=="__proto__"&&defineProperty$1?defineProperty$1(ie,te,{configurable:!0,enumerable:!0,value:ne,writable:!0}):ie[te]=ne}function assignMergeValue(ie,te,ne){(ne!==void 0&&!eq(ie[te],ne)||ne===void 0&&!(te in ie))&&baseAssignValue(ie,te,ne)}function createBaseFor(ie){return function(te,ne,re){for(var oe=-1,le=Object(te),ae=re(te),he=ae.length;he--;){var de=ae[ie?he:++oe];if(ne(le[de],de,le)===!1)break}return te}}var baseFor=createBaseFor();const baseFor$1=baseFor;var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$1=moduleExports$2?root$1.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(ie,te){if(te)return ie.slice();var ne=ie.length,re=allocUnsafe?allocUnsafe(ne):new ie.constructor(ne);return ie.copy(re),re}var Uint8Array$1=root$1.Uint8Array;const Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(ie){var te=new ie.constructor(ie.byteLength);return new Uint8Array$2(te).set(new Uint8Array$2(ie)),te}function cloneTypedArray(ie,te){var ne=te?cloneArrayBuffer(ie.buffer):ie.buffer;return new ie.constructor(ne,ie.byteOffset,ie.length)}function copyArray(ie,te){var ne=-1,re=ie.length;for(te||(te=Array(re));++ne<re;)te[ne]=ie[ne];return te}var objectCreate=Object.create,baseCreate=function(){function ie(){}return function(te){if(!isObject(te))return{};if(objectCreate)return objectCreate(te);ie.prototype=te;var ne=new ie;return ie.prototype=void 0,ne}}();const baseCreate$1=baseCreate;function overArg(ie,te){return function(ne){return ie(te(ne))}}var getPrototype=overArg(Object.getPrototypeOf,Object);const getPrototype$1=getPrototype;var objectProto$7=Object.prototype;function isPrototype(ie){var te=ie&&ie.constructor,ne=typeof te=="function"&&te.prototype||objectProto$7;return ie===ne}function initCloneObject(ie){return typeof ie.constructor=="function"&&!isPrototype(ie)?baseCreate$1(getPrototype$1(ie)):{}}function isObjectLike(ie){return ie!=null&&typeof ie=="object"}var argsTag$1="[object Arguments]";function baseIsArguments(ie){return isObjectLike(ie)&&baseGetTag(ie)==argsTag$1}var objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty,propertyIsEnumerable=objectProto$6.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(ie){return isObjectLike(ie)&&hasOwnProperty$6.call(ie,"callee")&&!propertyIsEnumerable.call(ie,"callee")};const isArguments$1=isArguments;var isArray=Array.isArray;const isArray$1=isArray;var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(ie){return typeof ie=="number"&&ie>-1&&ie%1==0&&ie<=MAX_SAFE_INTEGER$1}function isArrayLike(ie){return ie!=null&&isLength(ie.length)&&!isFunction(ie)}function isArrayLikeObject(ie){return isObjectLike(ie)&&isArrayLike(ie)}function stubFalse(){return!1}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,Buffer=moduleExports$1?root$1.Buffer:void 0,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse;const isBuffer$1=isBuffer;var objectTag$2="[object Object]",funcProto=Function.prototype,objectProto$5=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$5=objectProto$5.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(ie){if(!isObjectLike(ie)||baseGetTag(ie)!=objectTag$2)return!1;var te=getPrototype$1(ie);if(te===null)return!0;var ne=hasOwnProperty$5.call(te,"constructor")&&te.constructor;return typeof ne=="function"&&ne instanceof ne&&funcToString.call(ne)==objectCtorString}var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag$2="[object Map]",numberTag="[object Number]",objectTag$1="[object Object]",regexpTag="[object RegExp]",setTag$2="[object Set]",stringTag="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag$1]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag$2]=typedArrayTags[numberTag]=typedArrayTags[objectTag$1]=typedArrayTags[regexpTag]=typedArrayTags[setTag$2]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray(ie){return isObjectLike(ie)&&isLength(ie.length)&&!!typedArrayTags[baseGetTag(ie)]}function baseUnary(ie){return function(te){return ie(te)}}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal$1.process,nodeUtil=function(){try{var ie=freeModule&&freeModule.require&&freeModule.require("util").types;return ie||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}();const nodeUtil$1=nodeUtil;var nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;const isTypedArray$1=isTypedArray;function safeGet(ie,te){if(!(te==="constructor"&&typeof ie[te]=="function")&&te!="__proto__")return ie[te]}var objectProto$4=Object.prototype,hasOwnProperty$4=objectProto$4.hasOwnProperty;function assignValue(ie,te,ne){var re=ie[te];(!(hasOwnProperty$4.call(ie,te)&&eq(re,ne))||ne===void 0&&!(te in ie))&&baseAssignValue(ie,te,ne)}function copyObject(ie,te,ne,re){var oe=!ne;ne||(ne={});for(var le=-1,ae=te.length;++le<ae;){var he=te[le],de=re?re(ne[he],ie[he],he,ne,ie):void 0;de===void 0&&(de=ie[he]),oe?baseAssignValue(ne,he,de):assignValue(ne,he,de)}return ne}function baseTimes(ie,te){for(var ne=-1,re=Array(ie);++ne<ie;)re[ne]=te(ne);return re}var MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(ie,te){var ne=typeof ie;return te=te??MAX_SAFE_INTEGER,!!te&&(ne=="number"||ne!="symbol"&&reIsUint.test(ie))&&ie>-1&&ie%1==0&&ie<te}var objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty;function arrayLikeKeys(ie,te){var ne=isArray$1(ie),re=!ne&&isArguments$1(ie),oe=!ne&&!re&&isBuffer$1(ie),le=!ne&&!re&&!oe&&isTypedArray$1(ie),ae=ne||re||oe||le,he=ae?baseTimes(ie.length,String):[],de=he.length;for(var ue in ie)(te||hasOwnProperty$3.call(ie,ue))&&!(ae&&(ue=="length"||oe&&(ue=="offset"||ue=="parent")||le&&(ue=="buffer"||ue=="byteLength"||ue=="byteOffset")||isIndex(ue,de)))&&he.push(ue);return he}function nativeKeysIn(ie){var te=[];if(ie!=null)for(var ne in Object(ie))te.push(ne);return te}var objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function baseKeysIn(ie){if(!isObject(ie))return nativeKeysIn(ie);var te=isPrototype(ie),ne=[];for(var re in ie)re=="constructor"&&(te||!hasOwnProperty$2.call(ie,re))||ne.push(re);return ne}function keysIn(ie){return isArrayLike(ie)?arrayLikeKeys(ie,!0):baseKeysIn(ie)}function toPlainObject(ie){return copyObject(ie,keysIn(ie))}function baseMergeDeep(ie,te,ne,re,oe,le,ae){var he=safeGet(ie,ne),de=safeGet(te,ne),ue=ae.get(de);if(ue){assignMergeValue(ie,ne,ue);return}var pe=le?le(he,de,ne+"",ie,te,ae):void 0,fe=pe===void 0;if(fe){var ge=isArray$1(de),$e=!ge&&isBuffer$1(de),Te=!ge&&!$e&&isTypedArray$1(de);pe=de,ge||$e||Te?isArray$1(he)?pe=he:isArrayLikeObject(he)?pe=copyArray(he):$e?(fe=!1,pe=cloneBuffer(de,!0)):Te?(fe=!1,pe=cloneTypedArray(de,!0)):pe=[]:isPlainObject(de)||isArguments$1(de)?(pe=he,isArguments$1(he)?pe=toPlainObject(he):(!isObject(he)||isFunction(he))&&(pe=initCloneObject(de))):fe=!1}fe&&(ae.set(de,pe),oe(pe,de,re,le,ae),ae.delete(de)),assignMergeValue(ie,ne,pe)}function baseMerge(ie,te,ne,re,oe){ie!==te&&baseFor$1(te,function(le,ae){if(oe||(oe=new Stack),isObject(le))baseMergeDeep(ie,te,ae,ne,baseMerge,re,oe);else{var he=re?re(safeGet(ie,ae),le,ae+"",ie,te,oe):void 0;he===void 0&&(he=le),assignMergeValue(ie,ae,he)}},keysIn)}function identity(ie){return ie}function apply(ie,te,ne){switch(ne.length){case 0:return ie.call(te);case 1:return ie.call(te,ne[0]);case 2:return ie.call(te,ne[0],ne[1]);case 3:return ie.call(te,ne[0],ne[1],ne[2])}return ie.apply(te,ne)}var nativeMax=Math.max;function overRest(ie,te,ne){return te=nativeMax(te===void 0?ie.length-1:te,0),function(){for(var re=arguments,oe=-1,le=nativeMax(re.length-te,0),ae=Array(le);++oe<le;)ae[oe]=re[te+oe];oe=-1;for(var he=Array(te+1);++oe<te;)he[oe]=re[oe];return he[te]=ne(ae),apply(ie,this,he)}}function constant(ie){return function(){return ie}}var baseSetToString=defineProperty$1?function(ie,te){return defineProperty$1(ie,"toString",{configurable:!0,enumerable:!1,value:constant(te),writable:!0})}:identity;const baseSetToString$1=baseSetToString;var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(ie){var te=0,ne=0;return function(){var re=nativeNow(),oe=HOT_SPAN-(re-ne);if(ne=re,oe>0){if(++te>=HOT_COUNT)return arguments[0]}else te=0;return ie.apply(void 0,arguments)}}var setToString=shortOut(baseSetToString$1);const setToString$1=setToString;function baseRest(ie,te){return setToString$1(overRest(ie,te,identity),ie+"")}function isIterateeCall(ie,te,ne){if(!isObject(ne))return!1;var re=typeof te;return(re=="number"?isArrayLike(ne)&&isIndex(te,ne.length):re=="string"&&te in ne)?eq(ne[te],ie):!1}function createAssigner(ie){return baseRest(function(te,ne){var re=-1,oe=ne.length,le=oe>1?ne[oe-1]:void 0,ae=oe>2?ne[2]:void 0;for(le=ie.length>3&&typeof le=="function"?(oe--,le):void 0,ae&&isIterateeCall(ne[0],ne[1],ae)&&(le=oe<3?void 0:le,oe=1),te=Object(te);++re<oe;){var he=ne[re];he&&ie(te,he,re,le)}return te})}var merge=createAssigner(function(ie,te,ne){baseMerge(ie,te,ne)});const merge$1=merge;var ZERO_WIDTH_SPACE="​",d3CurveTypes={curveBasis,curveBasisClosed,curveBasisOpen,curveBumpX:bumpX,curveBumpY:bumpY,curveBundle,curveCardinalClosed,curveCardinalOpen,curveCardinal,curveCatmullRomClosed,curveCatmullRomOpen,curveCatmullRom,curveLinear,curveLinearClosed,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural,curveStep,curveStepAfter:stepAfter,curveStepBefore:stepBefore},directiveWithoutOpen=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,detectInit=__name(function(ie,te){const ne=detectDirective(ie,/(?:init\b)|(?:initialize\b)/);let re={};if(Array.isArray(ne)){const ae=ne.map(he=>he.args);sanitizeDirective(ae),re=assignWithDepth_default(re,[...ae])}else re=ne.args;if(!re)return;let oe=detectType$1(ie,te);const le="config";return re[le]!==void 0&&(oe==="flowchart-v2"&&(oe="flowchart"),re[oe]=re[le],delete re[le]),re},"detectInit"),detectDirective=__name(function(ie,te=null){var ne,re;try{const oe=new RegExp(`[%]{2}(?![{]${directiveWithoutOpen.source})(?=[}][%]{2}).*
`,"ig");ie=ie.trim().replace(oe,"").replace(/'/gm,'"'),log.debug(`Detecting diagram directive${te!==null?" type:"+te:""} based on the text:${ie}`);let le;const ae=[];for(;(le=directiveRegex.exec(ie))!==null;)if(le.index===directiveRegex.lastIndex&&directiveRegex.lastIndex++,le&&!te||te&&((ne=le[1])!=null&&ne.match(te))||te&&((re=le[2])!=null&&re.match(te))){const he=le[1]?le[1]:le[2],de=le[3]?le[3].trim():le[4]?JSON.parse(le[4].trim()):null;ae.push({type:he,args:de})}return ae.length===0?{type:ie,args:null}:ae.length===1?ae[0]:ae}catch(oe){return log.error(`ERROR: ${oe.message} - Unable to parse directive type: '${te}' based on the text: '${ie}'`),{type:void 0,args:null}}},"detectDirective"),removeDirectives=__name(function(ie){return ie.replace(directiveRegex,"")},"removeDirectives"),isSubstringInArray=__name(function(ie,te){for(const[ne,re]of te.entries())if(re.match(ie))return ne;return-1},"isSubstringInArray");function interpolateToCurve(ie,te){if(!ie)return te;const ne=`curve${ie.charAt(0).toUpperCase()+ie.slice(1)}`;return d3CurveTypes[ne]??te}__name(interpolateToCurve,"interpolateToCurve");function formatUrl(ie,te){const ne=ie.trim();if(ne)return te.securityLevel!=="loose"?sanitizeUrl_1(ne):ne}__name(formatUrl,"formatUrl");var runFunc=__name((ie,...te)=>{const ne=ie.split("."),re=ne.length-1,oe=ne[re];let le=window;for(let ae=0;ae<re;ae++)if(le=le[ne[ae]],!le){log.error(`Function name: ${ie} not found in window`);return}le[oe](...te)},"runFunc");function distance(ie,te){return!ie||!te?0:Math.sqrt(Math.pow(te.x-ie.x,2)+Math.pow(te.y-ie.y,2))}__name(distance,"distance");function traverseEdge(ie){let te,ne=0;ie.forEach(oe=>{ne+=distance(oe,te),te=oe});const re=ne/2;return calculatePoint(ie,re)}__name(traverseEdge,"traverseEdge");function calcLabelPosition(ie){return ie.length===1?ie[0]:traverseEdge(ie)}__name(calcLabelPosition,"calcLabelPosition");var roundNumber=__name((ie,te=2)=>{const ne=Math.pow(10,te);return Math.round(ie*ne)/ne},"roundNumber"),calculatePoint=__name((ie,te)=>{let ne,re=te;for(const oe of ie){if(ne){const le=distance(oe,ne);if(le<re)re-=le;else{const ae=re/le;if(ae<=0)return ne;if(ae>=1)return{x:oe.x,y:oe.y};if(ae>0&&ae<1)return{x:roundNumber((1-ae)*ne.x+ae*oe.x,5),y:roundNumber((1-ae)*ne.y+ae*oe.y,5)}}}ne=oe}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),calcCardinalityPosition=__name((ie,te,ne)=>{log.info(`our points ${JSON.stringify(te)}`),te[0]!==ne&&(te=te.reverse());const oe=calculatePoint(te,25),le=ie?10:5,ae=Math.atan2(te[0].y-oe.y,te[0].x-oe.x),he={x:0,y:0};return he.x=Math.sin(ae)*le+(te[0].x+oe.x)/2,he.y=-Math.cos(ae)*le+(te[0].y+oe.y)/2,he},"calcCardinalityPosition");function calcTerminalLabelPosition(ie,te,ne){const re=structuredClone(ne);log.info("our points",re),te!=="start_left"&&te!=="start_right"&&re.reverse();const oe=25+ie,le=calculatePoint(re,oe),ae=10+ie*.5,he=Math.atan2(re[0].y-le.y,re[0].x-le.x),de={x:0,y:0};return te==="start_left"?(de.x=Math.sin(he+Math.PI)*ae+(re[0].x+le.x)/2,de.y=-Math.cos(he+Math.PI)*ae+(re[0].y+le.y)/2):te==="end_right"?(de.x=Math.sin(he-Math.PI)*ae+(re[0].x+le.x)/2-5,de.y=-Math.cos(he-Math.PI)*ae+(re[0].y+le.y)/2-5):te==="end_left"?(de.x=Math.sin(he)*ae+(re[0].x+le.x)/2-5,de.y=-Math.cos(he)*ae+(re[0].y+le.y)/2-5):(de.x=Math.sin(he)*ae+(re[0].x+le.x)/2,de.y=-Math.cos(he)*ae+(re[0].y+le.y)/2),de}__name(calcTerminalLabelPosition,"calcTerminalLabelPosition");function getStylesFromArray(ie){let te="",ne="";for(const re of ie)re!==void 0&&(re.startsWith("color:")||re.startsWith("text-align:")?ne=ne+re+";":te=te+re+";");return{style:te,labelStyle:ne}}__name(getStylesFromArray,"getStylesFromArray");var cnt=0,generateId=__name(()=>(cnt++,"id-"+Math.random().toString(36).substr(2,12)+"-"+cnt),"generateId");function makeRandomHex(ie){let te="";const ne="0123456789abcdef",re=ne.length;for(let oe=0;oe<ie;oe++)te+=ne.charAt(Math.floor(Math.random()*re));return te}__name(makeRandomHex,"makeRandomHex");var random=__name(ie=>makeRandomHex(ie.length),"random"),getTextObj=__name(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),drawSimpleText=__name(function(ie,te){const ne=te.text.replace(common_default.lineBreakRegex," "),[,re]=parseFontSize(te.fontSize),oe=ie.append("text");oe.attr("x",te.x),oe.attr("y",te.y),oe.style("text-anchor",te.anchor),oe.style("font-family",te.fontFamily),oe.style("font-size",re),oe.style("font-weight",te.fontWeight),oe.attr("fill",te.fill),te.class!==void 0&&oe.attr("class",te.class);const le=oe.append("tspan");return le.attr("x",te.x+te.textMargin*2),le.attr("fill",te.fill),le.text(ne),oe},"drawSimpleText"),wrapLabel=memoize((ie,te,ne)=>{if(!ie||(ne=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},ne),common_default.lineBreakRegex.test(ie)))return ie;const re=ie.split(" ").filter(Boolean),oe=[];let le="";return re.forEach((ae,he)=>{const de=calculateTextWidth(`${ae} `,ne),ue=calculateTextWidth(le,ne);if(de>te){const{hyphenatedStrings:ge,remainingWord:$e}=breakString(ae,te,"-",ne);oe.push(le,...ge),le=$e}else ue+de>=te?(oe.push(le),le=ae):le=[le,ae].filter(Boolean).join(" ");he+1===re.length&&oe.push(le)}),oe.filter(ae=>ae!=="").join(ne.joinWith)},(ie,te,ne)=>`${ie}${te}${ne.fontSize}${ne.fontWeight}${ne.fontFamily}${ne.joinWith}`),breakString=memoize((ie,te,ne="-",re)=>{re=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},re);const oe=[...ie],le=[];let ae="";return oe.forEach((he,de)=>{const ue=`${ae}${he}`;if(calculateTextWidth(ue,re)>=te){const fe=de+1,ge=oe.length===fe,$e=`${ue}${ne}`;le.push(ge?ue:$e),ae=""}else ae=ue}),{hyphenatedStrings:le,remainingWord:ae}},(ie,te,ne="-",re)=>`${ie}${te}${ne}${re.fontSize}${re.fontWeight}${re.fontFamily}`);function calculateTextHeight(ie,te){return calculateTextDimensions(ie,te).height}__name(calculateTextHeight,"calculateTextHeight");function calculateTextWidth(ie,te){return calculateTextDimensions(ie,te).width}__name(calculateTextWidth,"calculateTextWidth");var calculateTextDimensions=memoize((ie,te)=>{const{fontSize:ne=12,fontFamily:re="Arial",fontWeight:oe=400}=te;if(!ie)return{width:0,height:0};const[,le]=parseFontSize(ne),ae=["sans-serif",re],he=ie.split(common_default.lineBreakRegex),de=[],ue=select("body");if(!ue.remove)return{width:0,height:0,lineHeight:0};const pe=ue.append("svg");for(const ge of ae){let $e=0;const Te={width:0,height:0,lineHeight:0};for(const Ee of he){const Se=getTextObj();Se.text=Ee||ZERO_WIDTH_SPACE;const ve=drawSimpleText(pe,Se).style("font-size",le).style("font-weight",oe).style("font-family",ge),ke=(ve._groups||ve)[0][0].getBBox();if(ke.width===0&&ke.height===0)throw new Error("svg element not in render tree");Te.width=Math.round(Math.max(Te.width,ke.width)),$e=Math.round(ke.height),Te.height+=$e,Te.lineHeight=Math.round(Math.max(Te.lineHeight,$e))}de.push(Te)}pe.remove();const fe=isNaN(de[1].height)||isNaN(de[1].width)||isNaN(de[1].lineHeight)||de[0].height>de[1].height&&de[0].width>de[1].width&&de[0].lineHeight>de[1].lineHeight?0:1;return de[fe]},(ie,te)=>`${ie}${te.fontSize}${te.fontWeight}${te.fontFamily}`),el,InitIDGenerator=(el=class{constructor(te=!1,ne){this.count=0,this.count=ne?ne.length:0,this.next=te?()=>this.count++:()=>Date.now()}},__name(el,"InitIDGenerator"),el),decoder,entityDecode=__name(function(ie){return decoder=decoder||document.createElement("div"),ie=escape(ie).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),decoder.innerHTML=ie,unescape(decoder.textContent)},"entityDecode");function isDetailedError(ie){return"str"in ie}__name(isDetailedError,"isDetailedError");var insertTitle=__name((ie,te,ne,re)=>{var le;if(!re)return;const oe=(le=ie.node())==null?void 0:le.getBBox();oe&&ie.append("text").text(re).attr("text-anchor","middle").attr("x",oe.x+oe.width/2).attr("y",-ne).attr("class",te)},"insertTitle"),parseFontSize=__name(ie=>{if(typeof ie=="number")return[ie,ie+"px"];const te=parseInt(ie??"",10);return Number.isNaN(te)?[void 0,void 0]:ie===String(te)?[te,ie+"px"]:[te,ie]},"parseFontSize");function cleanAndMerge(ie,te){return merge$1({},ie,te)}__name(cleanAndMerge,"cleanAndMerge");var utils_default={assignWithDepth:assignWithDepth_default,wrapLabel,calculateTextHeight,calculateTextWidth,calculateTextDimensions,cleanAndMerge,detectInit,detectDirective,isSubstringInArray,interpolateToCurve,calcLabelPosition,calcCardinalityPosition,calcTerminalLabelPosition,formatUrl,getStylesFromArray,generateId,random,runFunc,entityDecode,insertTitle,parseFontSize,InitIDGenerator},encodeEntities=__name(function(ie){let te=ie;return te=te.replace(/style.*:\S*#.*;/g,function(ne){return ne.substring(0,ne.length-1)}),te=te.replace(/classDef.*:\S*#.*;/g,function(ne){return ne.substring(0,ne.length-1)}),te=te.replace(/#\w+;/g,function(ne){const re=ne.substring(1,ne.length-1);return/^\+?\d+$/.test(re)?"ﬂ°°"+re+"¶ß":"ﬂ°"+re+"¶ß"}),te},"encodeEntities"),decodeEntities=__name(function(ie){return ie.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},"decodeEntities"),getEdgeId=__name((ie,te,{counter:ne=0,prefix:re,suffix:oe})=>`${re?`${re}_`:""}${ie}_${te}_${ne}${oe?`_${oe}`:""}`,"getEdgeId");function handleUndefinedAttr(ie){return ie??null}__name(handleUndefinedAttr,"handleUndefinedAttr");function _getDefaults(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let _defaults=_getDefaults();function changeDefaults(ie){_defaults=ie}const escapeTest=/[&<>"']/,escapeReplace=new RegExp(escapeTest.source,"g"),escapeTestNoEncode=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode=new RegExp(escapeTestNoEncode.source,"g"),escapeReplacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},getEscapeReplacement=ie=>escapeReplacements[ie];function escape$1(ie,te){if(te){if(escapeTest.test(ie))return ie.replace(escapeReplace,getEscapeReplacement)}else if(escapeTestNoEncode.test(ie))return ie.replace(escapeReplaceNoEncode,getEscapeReplacement);return ie}const unescapeTest=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function unescape$1(ie){return ie.replace(unescapeTest,(te,ne)=>(ne=ne.toLowerCase(),ne==="colon"?":":ne.charAt(0)==="#"?ne.charAt(1)==="x"?String.fromCharCode(parseInt(ne.substring(2),16)):String.fromCharCode(+ne.substring(1)):""))}const caret$1=/(^|[^\[])\^/g;function edit(ie,te){let ne=typeof ie=="string"?ie:ie.source;te=te||"";const re={replace:(oe,le)=>{let ae=typeof le=="string"?le:le.source;return ae=ae.replace(caret$1,"$1"),ne=ne.replace(oe,ae),re},getRegex:()=>new RegExp(ne,te)};return re}function cleanUrl(ie){try{ie=encodeURI(ie).replace(/%25/g,"%")}catch{return null}return ie}const noopTest={exec:()=>null};function splitCells(ie,te){const ne=ie.replace(/\|/g,(le,ae,he)=>{let de=!1,ue=ae;for(;--ue>=0&&he[ue]==="\\";)de=!de;return de?"|":" |"}),re=ne.split(/ \|/);let oe=0;if(re[0].trim()||re.shift(),re.length>0&&!re[re.length-1].trim()&&re.pop(),te)if(re.length>te)re.splice(te);else for(;re.length<te;)re.push("");for(;oe<re.length;oe++)re[oe]=re[oe].trim().replace(/\\\|/g,"|");return re}function rtrim(ie,te,ne){const re=ie.length;if(re===0)return"";let oe=0;for(;oe<re;){const le=ie.charAt(re-oe-1);if(le===te&&!ne)oe++;else if(le!==te&&ne)oe++;else break}return ie.slice(0,re-oe)}function findClosingBracket(ie,te){if(ie.indexOf(te[1])===-1)return-1;let ne=0;for(let re=0;re<ie.length;re++)if(ie[re]==="\\")re++;else if(ie[re]===te[0])ne++;else if(ie[re]===te[1]&&(ne--,ne<0))return re;return-1}function outputLink(ie,te,ne,re){const oe=te.href,le=te.title?escape$1(te.title):null,ae=ie[1].replace(/\\([\[\]])/g,"$1");if(ie[0].charAt(0)!=="!"){re.state.inLink=!0;const he={type:"link",raw:ne,href:oe,title:le,text:ae,tokens:re.inlineTokens(ae)};return re.state.inLink=!1,he}return{type:"image",raw:ne,href:oe,title:le,text:escape$1(ae)}}function indentCodeCompensation(ie,te){const ne=ie.match(/^(\s+)(?:```)/);if(ne===null)return te;const re=ne[1];return te.split(`
`).map(oe=>{const le=oe.match(/^\s+/);if(le===null)return oe;const[ae]=le;return ae.length>=re.length?oe.slice(re.length):oe}).join(`
`)}class _Tokenizer{constructor(te){ei(this,"options");ei(this,"rules");ei(this,"lexer");this.options=te||_defaults}space(te){const ne=this.rules.block.newline.exec(te);if(ne&&ne[0].length>0)return{type:"space",raw:ne[0]}}code(te){const ne=this.rules.block.code.exec(te);if(ne){const re=ne[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:ne[0],codeBlockStyle:"indented",text:this.options.pedantic?re:rtrim(re,`
`)}}}fences(te){const ne=this.rules.block.fences.exec(te);if(ne){const re=ne[0],oe=indentCodeCompensation(re,ne[3]||"");return{type:"code",raw:re,lang:ne[2]?ne[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):ne[2],text:oe}}}heading(te){const ne=this.rules.block.heading.exec(te);if(ne){let re=ne[2].trim();if(/#$/.test(re)){const oe=rtrim(re,"#");(this.options.pedantic||!oe||/ $/.test(oe))&&(re=oe.trim())}return{type:"heading",raw:ne[0],depth:ne[1].length,text:re,tokens:this.lexer.inline(re)}}}hr(te){const ne=this.rules.block.hr.exec(te);if(ne)return{type:"hr",raw:rtrim(ne[0],`
`)}}blockquote(te){const ne=this.rules.block.blockquote.exec(te);if(ne){let re=rtrim(ne[0],`
`).split(`
`),oe="",le="";const ae=[];for(;re.length>0;){let he=!1;const de=[];let ue;for(ue=0;ue<re.length;ue++)if(/^ {0,3}>/.test(re[ue]))de.push(re[ue]),he=!0;else if(!he)de.push(re[ue]);else break;re=re.slice(ue);const pe=de.join(`
`),fe=pe.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");oe=oe?`${oe}
${pe}`:pe,le=le?`${le}
${fe}`:fe;const ge=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(fe,ae,!0),this.lexer.state.top=ge,re.length===0)break;const $e=ae[ae.length-1];if(($e==null?void 0:$e.type)==="code")break;if(($e==null?void 0:$e.type)==="blockquote"){const Te=$e,Ee=Te.raw+`
`+re.join(`
`),Se=this.blockquote(Ee);ae[ae.length-1]=Se,oe=oe.substring(0,oe.length-Te.raw.length)+Se.raw,le=le.substring(0,le.length-Te.text.length)+Se.text;break}else if(($e==null?void 0:$e.type)==="list"){const Te=$e,Ee=Te.raw+`
`+re.join(`
`),Se=this.list(Ee);ae[ae.length-1]=Se,oe=oe.substring(0,oe.length-$e.raw.length)+Se.raw,le=le.substring(0,le.length-Te.raw.length)+Se.raw,re=Ee.substring(ae[ae.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:oe,tokens:ae,text:le}}}list(te){let ne=this.rules.block.list.exec(te);if(ne){let re=ne[1].trim();const oe=re.length>1,le={type:"list",raw:"",ordered:oe,start:oe?+re.slice(0,-1):"",loose:!1,items:[]};re=oe?`\\d{1,9}\\${re.slice(-1)}`:`\\${re}`,this.options.pedantic&&(re=oe?re:"[*+-]");const ae=new RegExp(`^( {0,3}${re})((?:[	 ][^\\n]*)?(?:\\n|$))`);let he=!1;for(;te;){let de=!1,ue="",pe="";if(!(ne=ae.exec(te))||this.rules.block.hr.test(te))break;ue=ne[0],te=te.substring(ue.length);let fe=ne[2].split(`
`,1)[0].replace(/^\t+/,ve=>" ".repeat(3*ve.length)),ge=te.split(`
`,1)[0],$e=!fe.trim(),Te=0;if(this.options.pedantic?(Te=2,pe=fe.trimStart()):$e?Te=ne[1].length+1:(Te=ne[2].search(/[^ ]/),Te=Te>4?1:Te,pe=fe.slice(Te),Te+=ne[1].length),$e&&/^ *$/.test(ge)&&(ue+=ge+`
`,te=te.substring(ge.length+1),de=!0),!de){const ve=new RegExp(`^ {0,${Math.min(3,Te-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),ke=new RegExp(`^ {0,${Math.min(3,Te-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),Re=new RegExp(`^ {0,${Math.min(3,Te-1)}}(?:\`\`\`|~~~)`),Ne=new RegExp(`^ {0,${Math.min(3,Te-1)}}#`);for(;te;){const xe=te.split(`
`,1)[0];if(ge=xe,this.options.pedantic&&(ge=ge.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),Re.test(ge)||Ne.test(ge)||ve.test(ge)||ke.test(te))break;if(ge.search(/[^ ]/)>=Te||!ge.trim())pe+=`
`+ge.slice(Te);else{if($e||fe.search(/[^ ]/)>=4||Re.test(fe)||Ne.test(fe)||ke.test(fe))break;pe+=`
`+ge}!$e&&!ge.trim()&&($e=!0),ue+=xe+`
`,te=te.substring(xe.length+1),fe=ge.slice(Te)}}le.loose||(he?le.loose=!0:/\n *\n *$/.test(ue)&&(he=!0));let Ee=null,Se;this.options.gfm&&(Ee=/^\[[ xX]\] /.exec(pe),Ee&&(Se=Ee[0]!=="[ ] ",pe=pe.replace(/^\[[ xX]\] +/,""))),le.items.push({type:"list_item",raw:ue,task:!!Ee,checked:Se,loose:!1,text:pe,tokens:[]}),le.raw+=ue}le.items[le.items.length-1].raw=le.items[le.items.length-1].raw.trimEnd(),le.items[le.items.length-1].text=le.items[le.items.length-1].text.trimEnd(),le.raw=le.raw.trimEnd();for(let de=0;de<le.items.length;de++)if(this.lexer.state.top=!1,le.items[de].tokens=this.lexer.blockTokens(le.items[de].text,[]),!le.loose){const ue=le.items[de].tokens.filter(fe=>fe.type==="space"),pe=ue.length>0&&ue.some(fe=>/\n.*\n/.test(fe.raw));le.loose=pe}if(le.loose)for(let de=0;de<le.items.length;de++)le.items[de].loose=!0;return le}}html(te){const ne=this.rules.block.html.exec(te);if(ne)return{type:"html",block:!0,raw:ne[0],pre:ne[1]==="pre"||ne[1]==="script"||ne[1]==="style",text:ne[0]}}def(te){const ne=this.rules.block.def.exec(te);if(ne){const re=ne[1].toLowerCase().replace(/\s+/g," "),oe=ne[2]?ne[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",le=ne[3]?ne[3].substring(1,ne[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):ne[3];return{type:"def",tag:re,raw:ne[0],href:oe,title:le}}}table(te){const ne=this.rules.block.table.exec(te);if(!ne||!/[:|]/.test(ne[2]))return;const re=splitCells(ne[1]),oe=ne[2].replace(/^\||\| *$/g,"").split("|"),le=ne[3]&&ne[3].trim()?ne[3].replace(/\n[ \t]*$/,"").split(`
`):[],ae={type:"table",raw:ne[0],header:[],align:[],rows:[]};if(re.length===oe.length){for(const he of oe)/^ *-+: *$/.test(he)?ae.align.push("right"):/^ *:-+: *$/.test(he)?ae.align.push("center"):/^ *:-+ *$/.test(he)?ae.align.push("left"):ae.align.push(null);for(let he=0;he<re.length;he++)ae.header.push({text:re[he],tokens:this.lexer.inline(re[he]),header:!0,align:ae.align[he]});for(const he of le)ae.rows.push(splitCells(he,ae.header.length).map((de,ue)=>({text:de,tokens:this.lexer.inline(de),header:!1,align:ae.align[ue]})));return ae}}lheading(te){const ne=this.rules.block.lheading.exec(te);if(ne)return{type:"heading",raw:ne[0],depth:ne[2].charAt(0)==="="?1:2,text:ne[1],tokens:this.lexer.inline(ne[1])}}paragraph(te){const ne=this.rules.block.paragraph.exec(te);if(ne){const re=ne[1].charAt(ne[1].length-1)===`
`?ne[1].slice(0,-1):ne[1];return{type:"paragraph",raw:ne[0],text:re,tokens:this.lexer.inline(re)}}}text(te){const ne=this.rules.block.text.exec(te);if(ne)return{type:"text",raw:ne[0],text:ne[0],tokens:this.lexer.inline(ne[0])}}escape(te){const ne=this.rules.inline.escape.exec(te);if(ne)return{type:"escape",raw:ne[0],text:escape$1(ne[1])}}tag(te){const ne=this.rules.inline.tag.exec(te);if(ne)return!this.lexer.state.inLink&&/^<a /i.test(ne[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(ne[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(ne[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(ne[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:ne[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:ne[0]}}link(te){const ne=this.rules.inline.link.exec(te);if(ne){const re=ne[2].trim();if(!this.options.pedantic&&/^</.test(re)){if(!/>$/.test(re))return;const ae=rtrim(re.slice(0,-1),"\\");if((re.length-ae.length)%2===0)return}else{const ae=findClosingBracket(ne[2],"()");if(ae>-1){const de=(ne[0].indexOf("!")===0?5:4)+ne[1].length+ae;ne[2]=ne[2].substring(0,ae),ne[0]=ne[0].substring(0,de).trim(),ne[3]=""}}let oe=ne[2],le="";if(this.options.pedantic){const ae=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(oe);ae&&(oe=ae[1],le=ae[3])}else le=ne[3]?ne[3].slice(1,-1):"";return oe=oe.trim(),/^</.test(oe)&&(this.options.pedantic&&!/>$/.test(re)?oe=oe.slice(1):oe=oe.slice(1,-1)),outputLink(ne,{href:oe&&oe.replace(this.rules.inline.anyPunctuation,"$1"),title:le&&le.replace(this.rules.inline.anyPunctuation,"$1")},ne[0],this.lexer)}}reflink(te,ne){let re;if((re=this.rules.inline.reflink.exec(te))||(re=this.rules.inline.nolink.exec(te))){const oe=(re[2]||re[1]).replace(/\s+/g," "),le=ne[oe.toLowerCase()];if(!le){const ae=re[0].charAt(0);return{type:"text",raw:ae,text:ae}}return outputLink(re,le,re[0],this.lexer)}}emStrong(te,ne,re=""){let oe=this.rules.inline.emStrongLDelim.exec(te);if(!oe||oe[3]&&re.match(/[\p{L}\p{N}]/u))return;if(!(oe[1]||oe[2]||"")||!re||this.rules.inline.punctuation.exec(re)){const ae=[...oe[0]].length-1;let he,de,ue=ae,pe=0;const fe=oe[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(fe.lastIndex=0,ne=ne.slice(-1*te.length+ae);(oe=fe.exec(ne))!=null;){if(he=oe[1]||oe[2]||oe[3]||oe[4]||oe[5]||oe[6],!he)continue;if(de=[...he].length,oe[3]||oe[4]){ue+=de;continue}else if((oe[5]||oe[6])&&ae%3&&!((ae+de)%3)){pe+=de;continue}if(ue-=de,ue>0)continue;de=Math.min(de,de+ue+pe);const ge=[...oe[0]][0].length,$e=te.slice(0,ae+oe.index+ge+de);if(Math.min(ae,de)%2){const Ee=$e.slice(1,-1);return{type:"em",raw:$e,text:Ee,tokens:this.lexer.inlineTokens(Ee)}}const Te=$e.slice(2,-2);return{type:"strong",raw:$e,text:Te,tokens:this.lexer.inlineTokens(Te)}}}}codespan(te){const ne=this.rules.inline.code.exec(te);if(ne){let re=ne[2].replace(/\n/g," ");const oe=/[^ ]/.test(re),le=/^ /.test(re)&&/ $/.test(re);return oe&&le&&(re=re.substring(1,re.length-1)),re=escape$1(re,!0),{type:"codespan",raw:ne[0],text:re}}}br(te){const ne=this.rules.inline.br.exec(te);if(ne)return{type:"br",raw:ne[0]}}del(te){const ne=this.rules.inline.del.exec(te);if(ne)return{type:"del",raw:ne[0],text:ne[2],tokens:this.lexer.inlineTokens(ne[2])}}autolink(te){const ne=this.rules.inline.autolink.exec(te);if(ne){let re,oe;return ne[2]==="@"?(re=escape$1(ne[1]),oe="mailto:"+re):(re=escape$1(ne[1]),oe=re),{type:"link",raw:ne[0],text:re,href:oe,tokens:[{type:"text",raw:re,text:re}]}}}url(te){var re;let ne;if(ne=this.rules.inline.url.exec(te)){let oe,le;if(ne[2]==="@")oe=escape$1(ne[0]),le="mailto:"+oe;else{let ae;do ae=ne[0],ne[0]=((re=this.rules.inline._backpedal.exec(ne[0]))==null?void 0:re[0])??"";while(ae!==ne[0]);oe=escape$1(ne[0]),ne[1]==="www."?le="http://"+ne[0]:le=ne[0]}return{type:"link",raw:ne[0],text:oe,href:le,tokens:[{type:"text",raw:oe,text:oe}]}}}inlineText(te){const ne=this.rules.inline.text.exec(te);if(ne){let re;return this.lexer.state.inRawBlock?re=ne[0]:re=escape$1(ne[0]),{type:"text",raw:ne[0],text:re}}}}const newline=/^(?: *(?:\n|$))+/,blockCode=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,bullet=/(?:[*+-]|\d{1,9}[.)])/,lheading=edit(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,bullet).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),_paragraph=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,blockText=/^[^\n]+/,_blockLabel=/(?!\s*\])(?:\\.|[^\[\]\\])+/,def=edit(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",_blockLabel).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),list=edit(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,bullet).getRegex(),_tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",_comment=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,html=edit("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",_comment).replace("tag",_tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),paragraph=edit(_paragraph).replace("hr",hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_tag).getRegex(),blockquote=edit(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",paragraph).getRegex(),blockNormal={blockquote,code:blockCode,def,fences,heading,hr,html,lheading,list,newline,paragraph,table:noopTest,text:blockText},gfmTable=edit("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_tag).getRegex(),blockGfm={...blockNormal,table:gfmTable,paragraph:edit(_paragraph).replace("hr",hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",gfmTable).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_tag).getRegex()},blockPedantic={...blockNormal,html:edit(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",_comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:noopTest,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:edit(_paragraph).replace("hr",hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",lheading).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},escape$2=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,inlineCode=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br=/^( {2,}|\\)\n(?!\s*$)/,inlineText=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,_punctuation="\\p{P}\\p{S}",punctuation=edit(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,_punctuation).getRegex(),blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,emStrongLDelim=edit(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,_punctuation).getRegex(),emStrongRDelimAst=edit("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,_punctuation).getRegex(),emStrongRDelimUnd=edit("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,_punctuation).getRegex(),anyPunctuation=edit(/\\([punct])/,"gu").replace(/punct/g,_punctuation).getRegex(),autolink=edit(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),_inlineComment=edit(_comment).replace("(?:-->|$)","-->").getRegex(),tag=edit("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",_inlineComment).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),_inlineLabel=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,link=edit(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",_inlineLabel).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),reflink=edit(/^!?\[(label)\]\[(ref)\]/).replace("label",_inlineLabel).replace("ref",_blockLabel).getRegex(),nolink=edit(/^!?\[(ref)\](?:\[\])?/).replace("ref",_blockLabel).getRegex(),reflinkSearch=edit("reflink|nolink(?!\\()","g").replace("reflink",reflink).replace("nolink",nolink).getRegex(),inlineNormal={_backpedal:noopTest,anyPunctuation,autolink,blockSkip,br,code:inlineCode,del:noopTest,emStrongLDelim,emStrongRDelimAst,emStrongRDelimUnd,escape:escape$2,link,nolink,punctuation,reflink,reflinkSearch,tag,text:inlineText,url:noopTest},inlinePedantic={...inlineNormal,link:edit(/^!?\[(label)\]\((.*?)\)/).replace("label",_inlineLabel).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",_inlineLabel).getRegex()},inlineGfm={...inlineNormal,escape:edit(escape$2).replace("])","~|])").getRegex(),url:edit(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},inlineBreaks={...inlineGfm,br:edit(br).replace("{2,}","*").getRegex(),text:edit(inlineGfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},block={normal:blockNormal,gfm:blockGfm,pedantic:blockPedantic},inline={normal:inlineNormal,gfm:inlineGfm,breaks:inlineBreaks,pedantic:inlinePedantic};class _Lexer{constructor(te){ei(this,"tokens");ei(this,"options");ei(this,"state");ei(this,"tokenizer");ei(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=te||_defaults,this.options.tokenizer=this.options.tokenizer||new _Tokenizer,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const ne={block:block.normal,inline:inline.normal};this.options.pedantic?(ne.block=block.pedantic,ne.inline=inline.pedantic):this.options.gfm&&(ne.block=block.gfm,this.options.breaks?ne.inline=inline.breaks:ne.inline=inline.gfm),this.tokenizer.rules=ne}static get rules(){return{block,inline}}static lex(te,ne){return new _Lexer(ne).lex(te)}static lexInline(te,ne){return new _Lexer(ne).inlineTokens(te)}lex(te){te=te.replace(/\r\n|\r/g,`
`),this.blockTokens(te,this.tokens);for(let ne=0;ne<this.inlineQueue.length;ne++){const re=this.inlineQueue[ne];this.inlineTokens(re.src,re.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(te,ne=[],re=!1){this.options.pedantic?te=te.replace(/\t/g,"    ").replace(/^ +$/gm,""):te=te.replace(/^( *)(\t+)/gm,(he,de,ue)=>de+"    ".repeat(ue.length));let oe,le,ae;for(;te;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(he=>(oe=he.call({lexer:this},te,ne))?(te=te.substring(oe.raw.length),ne.push(oe),!0):!1))){if(oe=this.tokenizer.space(te)){te=te.substring(oe.raw.length),oe.raw.length===1&&ne.length>0?ne[ne.length-1].raw+=`
`:ne.push(oe);continue}if(oe=this.tokenizer.code(te)){te=te.substring(oe.raw.length),le=ne[ne.length-1],le&&(le.type==="paragraph"||le.type==="text")?(le.raw+=`
`+oe.raw,le.text+=`
`+oe.text,this.inlineQueue[this.inlineQueue.length-1].src=le.text):ne.push(oe);continue}if(oe=this.tokenizer.fences(te)){te=te.substring(oe.raw.length),ne.push(oe);continue}if(oe=this.tokenizer.heading(te)){te=te.substring(oe.raw.length),ne.push(oe);continue}if(oe=this.tokenizer.hr(te)){te=te.substring(oe.raw.length),ne.push(oe);continue}if(oe=this.tokenizer.blockquote(te)){te=te.substring(oe.raw.length),ne.push(oe);continue}if(oe=this.tokenizer.list(te)){te=te.substring(oe.raw.length),ne.push(oe);continue}if(oe=this.tokenizer.html(te)){te=te.substring(oe.raw.length),ne.push(oe);continue}if(oe=this.tokenizer.def(te)){te=te.substring(oe.raw.length),le=ne[ne.length-1],le&&(le.type==="paragraph"||le.type==="text")?(le.raw+=`
`+oe.raw,le.text+=`
`+oe.raw,this.inlineQueue[this.inlineQueue.length-1].src=le.text):this.tokens.links[oe.tag]||(this.tokens.links[oe.tag]={href:oe.href,title:oe.title});continue}if(oe=this.tokenizer.table(te)){te=te.substring(oe.raw.length),ne.push(oe);continue}if(oe=this.tokenizer.lheading(te)){te=te.substring(oe.raw.length),ne.push(oe);continue}if(ae=te,this.options.extensions&&this.options.extensions.startBlock){let he=1/0;const de=te.slice(1);let ue;this.options.extensions.startBlock.forEach(pe=>{ue=pe.call({lexer:this},de),typeof ue=="number"&&ue>=0&&(he=Math.min(he,ue))}),he<1/0&&he>=0&&(ae=te.substring(0,he+1))}if(this.state.top&&(oe=this.tokenizer.paragraph(ae))){le=ne[ne.length-1],re&&(le==null?void 0:le.type)==="paragraph"?(le.raw+=`
`+oe.raw,le.text+=`
`+oe.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=le.text):ne.push(oe),re=ae.length!==te.length,te=te.substring(oe.raw.length);continue}if(oe=this.tokenizer.text(te)){te=te.substring(oe.raw.length),le=ne[ne.length-1],le&&le.type==="text"?(le.raw+=`
`+oe.raw,le.text+=`
`+oe.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=le.text):ne.push(oe);continue}if(te){const he="Infinite loop on byte: "+te.charCodeAt(0);if(this.options.silent){console.error(he);break}else throw new Error(he)}}return this.state.top=!0,ne}inline(te,ne=[]){return this.inlineQueue.push({src:te,tokens:ne}),ne}inlineTokens(te,ne=[]){let re,oe,le,ae=te,he,de,ue;if(this.tokens.links){const pe=Object.keys(this.tokens.links);if(pe.length>0)for(;(he=this.tokenizer.rules.inline.reflinkSearch.exec(ae))!=null;)pe.includes(he[0].slice(he[0].lastIndexOf("[")+1,-1))&&(ae=ae.slice(0,he.index)+"["+"a".repeat(he[0].length-2)+"]"+ae.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(he=this.tokenizer.rules.inline.blockSkip.exec(ae))!=null;)ae=ae.slice(0,he.index)+"["+"a".repeat(he[0].length-2)+"]"+ae.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(he=this.tokenizer.rules.inline.anyPunctuation.exec(ae))!=null;)ae=ae.slice(0,he.index)+"++"+ae.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;te;)if(de||(ue=""),de=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(pe=>(re=pe.call({lexer:this},te,ne))?(te=te.substring(re.raw.length),ne.push(re),!0):!1))){if(re=this.tokenizer.escape(te)){te=te.substring(re.raw.length),ne.push(re);continue}if(re=this.tokenizer.tag(te)){te=te.substring(re.raw.length),oe=ne[ne.length-1],oe&&re.type==="text"&&oe.type==="text"?(oe.raw+=re.raw,oe.text+=re.text):ne.push(re);continue}if(re=this.tokenizer.link(te)){te=te.substring(re.raw.length),ne.push(re);continue}if(re=this.tokenizer.reflink(te,this.tokens.links)){te=te.substring(re.raw.length),oe=ne[ne.length-1],oe&&re.type==="text"&&oe.type==="text"?(oe.raw+=re.raw,oe.text+=re.text):ne.push(re);continue}if(re=this.tokenizer.emStrong(te,ae,ue)){te=te.substring(re.raw.length),ne.push(re);continue}if(re=this.tokenizer.codespan(te)){te=te.substring(re.raw.length),ne.push(re);continue}if(re=this.tokenizer.br(te)){te=te.substring(re.raw.length),ne.push(re);continue}if(re=this.tokenizer.del(te)){te=te.substring(re.raw.length),ne.push(re);continue}if(re=this.tokenizer.autolink(te)){te=te.substring(re.raw.length),ne.push(re);continue}if(!this.state.inLink&&(re=this.tokenizer.url(te))){te=te.substring(re.raw.length),ne.push(re);continue}if(le=te,this.options.extensions&&this.options.extensions.startInline){let pe=1/0;const fe=te.slice(1);let ge;this.options.extensions.startInline.forEach($e=>{ge=$e.call({lexer:this},fe),typeof ge=="number"&&ge>=0&&(pe=Math.min(pe,ge))}),pe<1/0&&pe>=0&&(le=te.substring(0,pe+1))}if(re=this.tokenizer.inlineText(le)){te=te.substring(re.raw.length),re.raw.slice(-1)!=="_"&&(ue=re.raw.slice(-1)),de=!0,oe=ne[ne.length-1],oe&&oe.type==="text"?(oe.raw+=re.raw,oe.text+=re.text):ne.push(re);continue}if(te){const pe="Infinite loop on byte: "+te.charCodeAt(0);if(this.options.silent){console.error(pe);break}else throw new Error(pe)}}return ne}}class _Renderer{constructor(te){ei(this,"options");ei(this,"parser");this.options=te||_defaults}space(te){return""}code({text:te,lang:ne,escaped:re}){var ae;const oe=(ae=(ne||"").match(/^\S*/))==null?void 0:ae[0],le=te.replace(/\n$/,"")+`
`;return oe?'<pre><code class="language-'+escape$1(oe)+'">'+(re?le:escape$1(le,!0))+`</code></pre>
`:"<pre><code>"+(re?le:escape$1(le,!0))+`</code></pre>
`}blockquote({tokens:te}){return`<blockquote>
${this.parser.parse(te)}</blockquote>
`}html({text:te}){return te}heading({tokens:te,depth:ne}){return`<h${ne}>${this.parser.parseInline(te)}</h${ne}>
`}hr(te){return`<hr>
`}list(te){const ne=te.ordered,re=te.start;let oe="";for(let he=0;he<te.items.length;he++){const de=te.items[he];oe+=this.listitem(de)}const le=ne?"ol":"ul",ae=ne&&re!==1?' start="'+re+'"':"";return"<"+le+ae+`>
`+oe+"</"+le+`>
`}listitem(te){let ne="";if(te.task){const re=this.checkbox({checked:!!te.checked});te.loose?te.tokens.length>0&&te.tokens[0].type==="paragraph"?(te.tokens[0].text=re+" "+te.tokens[0].text,te.tokens[0].tokens&&te.tokens[0].tokens.length>0&&te.tokens[0].tokens[0].type==="text"&&(te.tokens[0].tokens[0].text=re+" "+te.tokens[0].tokens[0].text)):te.tokens.unshift({type:"text",raw:re+" ",text:re+" "}):ne+=re+" "}return ne+=this.parser.parse(te.tokens,!!te.loose),`<li>${ne}</li>
`}checkbox({checked:te}){return"<input "+(te?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:te}){return`<p>${this.parser.parseInline(te)}</p>
`}table(te){let ne="",re="";for(let le=0;le<te.header.length;le++)re+=this.tablecell(te.header[le]);ne+=this.tablerow({text:re});let oe="";for(let le=0;le<te.rows.length;le++){const ae=te.rows[le];re="";for(let he=0;he<ae.length;he++)re+=this.tablecell(ae[he]);oe+=this.tablerow({text:re})}return oe&&(oe=`<tbody>${oe}</tbody>`),`<table>
<thead>
`+ne+`</thead>
`+oe+`</table>
`}tablerow({text:te}){return`<tr>
${te}</tr>
`}tablecell(te){const ne=this.parser.parseInline(te.tokens),re=te.header?"th":"td";return(te.align?`<${re} align="${te.align}">`:`<${re}>`)+ne+`</${re}>
`}strong({tokens:te}){return`<strong>${this.parser.parseInline(te)}</strong>`}em({tokens:te}){return`<em>${this.parser.parseInline(te)}</em>`}codespan({text:te}){return`<code>${te}</code>`}br(te){return"<br>"}del({tokens:te}){return`<del>${this.parser.parseInline(te)}</del>`}link({href:te,title:ne,tokens:re}){const oe=this.parser.parseInline(re),le=cleanUrl(te);if(le===null)return oe;te=le;let ae='<a href="'+te+'"';return ne&&(ae+=' title="'+ne+'"'),ae+=">"+oe+"</a>",ae}image({href:te,title:ne,text:re}){const oe=cleanUrl(te);if(oe===null)return re;te=oe;let le=`<img src="${te}" alt="${re}"`;return ne&&(le+=` title="${ne}"`),le+=">",le}text(te){return"tokens"in te&&te.tokens?this.parser.parseInline(te.tokens):te.text}}class _TextRenderer{strong({text:te}){return te}em({text:te}){return te}codespan({text:te}){return te}del({text:te}){return te}html({text:te}){return te}text({text:te}){return te}link({text:te}){return""+te}image({text:te}){return""+te}br(){return""}}class _Parser{constructor(te){ei(this,"options");ei(this,"renderer");ei(this,"textRenderer");this.options=te||_defaults,this.options.renderer=this.options.renderer||new _Renderer,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new _TextRenderer}static parse(te,ne){return new _Parser(ne).parse(te)}static parseInline(te,ne){return new _Parser(ne).parseInline(te)}parse(te,ne=!0){let re="";for(let oe=0;oe<te.length;oe++){const le=te[oe];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[le.type]){const he=le,de=this.options.extensions.renderers[he.type].call({parser:this},he);if(de!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(he.type)){re+=de||"";continue}}const ae=le;switch(ae.type){case"space":{re+=this.renderer.space(ae);continue}case"hr":{re+=this.renderer.hr(ae);continue}case"heading":{re+=this.renderer.heading(ae);continue}case"code":{re+=this.renderer.code(ae);continue}case"table":{re+=this.renderer.table(ae);continue}case"blockquote":{re+=this.renderer.blockquote(ae);continue}case"list":{re+=this.renderer.list(ae);continue}case"html":{re+=this.renderer.html(ae);continue}case"paragraph":{re+=this.renderer.paragraph(ae);continue}case"text":{let he=ae,de=this.renderer.text(he);for(;oe+1<te.length&&te[oe+1].type==="text";)he=te[++oe],de+=`
`+this.renderer.text(he);ne?re+=this.renderer.paragraph({type:"paragraph",raw:de,text:de,tokens:[{type:"text",raw:de,text:de}]}):re+=de;continue}default:{const he='Token with "'+ae.type+'" type was not found.';if(this.options.silent)return console.error(he),"";throw new Error(he)}}}return re}parseInline(te,ne){ne=ne||this.renderer;let re="";for(let oe=0;oe<te.length;oe++){const le=te[oe];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[le.type]){const he=this.options.extensions.renderers[le.type].call({parser:this},le);if(he!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(le.type)){re+=he||"";continue}}const ae=le;switch(ae.type){case"escape":{re+=ne.text(ae);break}case"html":{re+=ne.html(ae);break}case"link":{re+=ne.link(ae);break}case"image":{re+=ne.image(ae);break}case"strong":{re+=ne.strong(ae);break}case"em":{re+=ne.em(ae);break}case"codespan":{re+=ne.codespan(ae);break}case"br":{re+=ne.br(ae);break}case"del":{re+=ne.del(ae);break}case"text":{re+=ne.text(ae);break}default:{const he='Token with "'+ae.type+'" type was not found.';if(this.options.silent)return console.error(he),"";throw new Error(he)}}}return re}}class _Hooks{constructor(te){ei(this,"options");this.options=te||_defaults}preprocess(te){return te}postprocess(te){return te}processAllTokens(te){return te}}ei(_Hooks,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var La,sm,tl,cd,Na,rm;class Marked{constructor(...te){Aa(this,La);Aa(this,tl);Aa(this,Na);ei(this,"defaults",_getDefaults());ei(this,"options",this.setOptions);ei(this,"parse",Xo(this,tl,cd).call(this,_Lexer.lex,_Parser.parse));ei(this,"parseInline",Xo(this,tl,cd).call(this,_Lexer.lexInline,_Parser.parseInline));ei(this,"Parser",_Parser);ei(this,"Renderer",_Renderer);ei(this,"TextRenderer",_TextRenderer);ei(this,"Lexer",_Lexer);ei(this,"Tokenizer",_Tokenizer);ei(this,"Hooks",_Hooks);this.use(...te)}walkTokens(te,ne){var oe,le;let re=[];for(const ae of te)switch(re=re.concat(ne.call(this,ae)),ae.type){case"table":{const he=ae;for(const de of he.header)re=re.concat(this.walkTokens(de.tokens,ne));for(const de of he.rows)for(const ue of de)re=re.concat(this.walkTokens(ue.tokens,ne));break}case"list":{const he=ae;re=re.concat(this.walkTokens(he.items,ne));break}default:{const he=ae;(le=(oe=this.defaults.extensions)==null?void 0:oe.childTokens)!=null&&le[he.type]?this.defaults.extensions.childTokens[he.type].forEach(de=>{const ue=he[de].flat(1/0);re=re.concat(this.walkTokens(ue,ne))}):he.tokens&&(re=re.concat(this.walkTokens(he.tokens,ne)))}}return re}use(...te){const ne=this.defaults.extensions||{renderers:{},childTokens:{}};return te.forEach(re=>{const oe={...re};if(oe.async=this.defaults.async||oe.async||!1,re.extensions&&(re.extensions.forEach(le=>{if(!le.name)throw new Error("extension name required");if("renderer"in le){const ae=ne.renderers[le.name];ae?ne.renderers[le.name]=function(...he){let de=le.renderer.apply(this,he);return de===!1&&(de=ae.apply(this,he)),de}:ne.renderers[le.name]=le.renderer}if("tokenizer"in le){if(!le.level||le.level!=="block"&&le.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const ae=ne[le.level];ae?ae.unshift(le.tokenizer):ne[le.level]=[le.tokenizer],le.start&&(le.level==="block"?ne.startBlock?ne.startBlock.push(le.start):ne.startBlock=[le.start]:le.level==="inline"&&(ne.startInline?ne.startInline.push(le.start):ne.startInline=[le.start]))}"childTokens"in le&&le.childTokens&&(ne.childTokens[le.name]=le.childTokens)}),oe.extensions=ne),re.renderer){const le=this.defaults.renderer||new _Renderer(this.defaults);for(const ae in re.renderer){if(!(ae in le))throw new Error(`renderer '${ae}' does not exist`);if(["options","parser"].includes(ae))continue;const he=ae;let de=re.renderer[he];re.useNewRenderer||(de=Xo(this,La,sm).call(this,de,he,le));const ue=le[he];le[he]=(...pe)=>{let fe=de.apply(le,pe);return fe===!1&&(fe=ue.apply(le,pe)),fe||""}}oe.renderer=le}if(re.tokenizer){const le=this.defaults.tokenizer||new _Tokenizer(this.defaults);for(const ae in re.tokenizer){if(!(ae in le))throw new Error(`tokenizer '${ae}' does not exist`);if(["options","rules","lexer"].includes(ae))continue;const he=ae,de=re.tokenizer[he],ue=le[he];le[he]=(...pe)=>{let fe=de.apply(le,pe);return fe===!1&&(fe=ue.apply(le,pe)),fe}}oe.tokenizer=le}if(re.hooks){const le=this.defaults.hooks||new _Hooks;for(const ae in re.hooks){if(!(ae in le))throw new Error(`hook '${ae}' does not exist`);if(ae==="options")continue;const he=ae,de=re.hooks[he],ue=le[he];_Hooks.passThroughHooks.has(ae)?le[he]=pe=>{if(this.defaults.async)return Promise.resolve(de.call(le,pe)).then(ge=>ue.call(le,ge));const fe=de.call(le,pe);return ue.call(le,fe)}:le[he]=(...pe)=>{let fe=de.apply(le,pe);return fe===!1&&(fe=ue.apply(le,pe)),fe}}oe.hooks=le}if(re.walkTokens){const le=this.defaults.walkTokens,ae=re.walkTokens;oe.walkTokens=function(he){let de=[];return de.push(ae.call(this,he)),le&&(de=de.concat(le.call(this,he))),de}}this.defaults={...this.defaults,...oe}}),this}setOptions(te){return this.defaults={...this.defaults,...te},this}lexer(te,ne){return _Lexer.lex(te,ne??this.defaults)}parser(te,ne){return _Parser.parse(te,ne??this.defaults)}}La=new WeakSet,sm=function(te,ne,re){switch(ne){case"heading":return function(oe){return!oe.type||oe.type!==ne?te.apply(this,arguments):te.call(this,re.parser.parseInline(oe.tokens),oe.depth,unescape$1(re.parser.parseInline(oe.tokens,re.parser.textRenderer)))};case"code":return function(oe){return!oe.type||oe.type!==ne?te.apply(this,arguments):te.call(this,oe.text,oe.lang,!!oe.escaped)};case"table":return function(oe){if(!oe.type||oe.type!==ne)return te.apply(this,arguments);let le="",ae="";for(let de=0;de<oe.header.length;de++)ae+=this.tablecell({text:oe.header[de].text,tokens:oe.header[de].tokens,header:!0,align:oe.align[de]});le+=this.tablerow({text:ae});let he="";for(let de=0;de<oe.rows.length;de++){const ue=oe.rows[de];ae="";for(let pe=0;pe<ue.length;pe++)ae+=this.tablecell({text:ue[pe].text,tokens:ue[pe].tokens,header:!1,align:oe.align[pe]});he+=this.tablerow({text:ae})}return te.call(this,le,he)};case"blockquote":return function(oe){if(!oe.type||oe.type!==ne)return te.apply(this,arguments);const le=this.parser.parse(oe.tokens);return te.call(this,le)};case"list":return function(oe){if(!oe.type||oe.type!==ne)return te.apply(this,arguments);const le=oe.ordered,ae=oe.start,he=oe.loose;let de="";for(let ue=0;ue<oe.items.length;ue++){const pe=oe.items[ue],fe=pe.checked,ge=pe.task;let $e="";if(pe.task){const Te=this.checkbox({checked:!!fe});he?pe.tokens.length>0&&pe.tokens[0].type==="paragraph"?(pe.tokens[0].text=Te+" "+pe.tokens[0].text,pe.tokens[0].tokens&&pe.tokens[0].tokens.length>0&&pe.tokens[0].tokens[0].type==="text"&&(pe.tokens[0].tokens[0].text=Te+" "+pe.tokens[0].tokens[0].text)):pe.tokens.unshift({type:"text",text:Te+" "}):$e+=Te+" "}$e+=this.parser.parse(pe.tokens,he),de+=this.listitem({type:"list_item",raw:$e,text:$e,task:ge,checked:!!fe,loose:he,tokens:pe.tokens})}return te.call(this,de,le,ae)};case"html":return function(oe){return!oe.type||oe.type!==ne?te.apply(this,arguments):te.call(this,oe.text,oe.block)};case"paragraph":return function(oe){return!oe.type||oe.type!==ne?te.apply(this,arguments):te.call(this,this.parser.parseInline(oe.tokens))};case"escape":return function(oe){return!oe.type||oe.type!==ne?te.apply(this,arguments):te.call(this,oe.text)};case"link":return function(oe){return!oe.type||oe.type!==ne?te.apply(this,arguments):te.call(this,oe.href,oe.title,this.parser.parseInline(oe.tokens))};case"image":return function(oe){return!oe.type||oe.type!==ne?te.apply(this,arguments):te.call(this,oe.href,oe.title,oe.text)};case"strong":return function(oe){return!oe.type||oe.type!==ne?te.apply(this,arguments):te.call(this,this.parser.parseInline(oe.tokens))};case"em":return function(oe){return!oe.type||oe.type!==ne?te.apply(this,arguments):te.call(this,this.parser.parseInline(oe.tokens))};case"codespan":return function(oe){return!oe.type||oe.type!==ne?te.apply(this,arguments):te.call(this,oe.text)};case"del":return function(oe){return!oe.type||oe.type!==ne?te.apply(this,arguments):te.call(this,this.parser.parseInline(oe.tokens))};case"text":return function(oe){return!oe.type||oe.type!==ne?te.apply(this,arguments):te.call(this,oe.text)}}return te},tl=new WeakSet,cd=function(te,ne){return(re,oe)=>{const le={...oe},ae={...this.defaults,...le};this.defaults.async===!0&&le.async===!1&&(ae.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),ae.async=!0);const he=Xo(this,Na,rm).call(this,!!ae.silent,!!ae.async);if(typeof re>"u"||re===null)return he(new Error("marked(): input parameter is undefined or null"));if(typeof re!="string")return he(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(re)+", string expected"));if(ae.hooks&&(ae.hooks.options=ae),ae.async)return Promise.resolve(ae.hooks?ae.hooks.preprocess(re):re).then(de=>te(de,ae)).then(de=>ae.hooks?ae.hooks.processAllTokens(de):de).then(de=>ae.walkTokens?Promise.all(this.walkTokens(de,ae.walkTokens)).then(()=>de):de).then(de=>ne(de,ae)).then(de=>ae.hooks?ae.hooks.postprocess(de):de).catch(he);try{ae.hooks&&(re=ae.hooks.preprocess(re));let de=te(re,ae);ae.hooks&&(de=ae.hooks.processAllTokens(de)),ae.walkTokens&&this.walkTokens(de,ae.walkTokens);let ue=ne(de,ae);return ae.hooks&&(ue=ae.hooks.postprocess(ue)),ue}catch(de){return he(de)}}},Na=new WeakSet,rm=function(te,ne){return re=>{if(re.message+=`
Please report this to https://github.com/markedjs/marked.`,te){const oe="<p>An error occurred:</p><pre>"+escape$1(re.message+"",!0)+"</pre>";return ne?Promise.resolve(oe):oe}if(ne)return Promise.reject(re);throw re}};const markedInstance=new Marked;function marked(ie,te){return markedInstance.parse(ie,te)}marked.options=marked.setOptions=function(ie){return markedInstance.setOptions(ie),marked.defaults=markedInstance.defaults,changeDefaults(marked.defaults),marked};marked.getDefaults=_getDefaults;marked.defaults=_defaults;marked.use=function(...ie){return markedInstance.use(...ie),marked.defaults=markedInstance.defaults,changeDefaults(marked.defaults),marked};marked.walkTokens=function(ie,te){return markedInstance.walkTokens(ie,te)};marked.parseInline=markedInstance.parseInline;marked.Parser=_Parser;marked.parser=_Parser.parse;marked.Renderer=_Renderer;marked.TextRenderer=_TextRenderer;marked.Lexer=_Lexer;marked.lexer=_Lexer.lex;marked.Tokenizer=_Tokenizer;marked.Hooks=_Hooks;marked.parse=marked;marked.options;marked.setOptions;marked.use;marked.walkTokens;marked.parseInline;_Parser.parse;_Lexer.lex;function dedent(ie){for(var te=[],ne=1;ne<arguments.length;ne++)te[ne-1]=arguments[ne];var re=Array.from(typeof ie=="string"?[ie]:ie);re[re.length-1]=re[re.length-1].replace(/\r?\n([\t ]*)$/,"");var oe=re.reduce(function(he,de){var ue=de.match(/\n([\t ]+|(?!\s).)/g);return ue?he.concat(ue.map(function(pe){var fe,ge;return(ge=(fe=pe.match(/[\t ]/g))===null||fe===void 0?void 0:fe.length)!==null&&ge!==void 0?ge:0})):he},[]);if(oe.length){var le=new RegExp(`
[	 ]{`+Math.min.apply(Math,oe)+"}","g");re=re.map(function(he){return he.replace(le,`
`)})}re[0]=re[0].replace(/^\r?\n/,"");var ae=re[0];return te.forEach(function(he,de){var ue=ae.match(/(?:^|\n)( *)$/),pe=ue?ue[1]:"",fe=he;typeof he=="string"&&he.includes(`
`)&&(fe=String(he).split(`
`).map(function(ge,$e){return $e===0?ge:""+pe+ge}).join(`
`)),ae+=fe+re[de+1]}),ae}function preprocessMarkdown(ie,{markdownAutoWrap:te}){const re=ie.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),oe=dedent(re);return te===!1?oe.replace(/ /g,"&nbsp;"):oe}__name(preprocessMarkdown,"preprocessMarkdown");function markdownToLines(ie,te={}){const ne=preprocessMarkdown(ie,te),re=marked.lexer(ne),oe=[[]];let le=0;function ae(he,de="normal"){he.type==="text"?he.text.split(`
`).forEach((pe,fe)=>{fe!==0&&(le++,oe.push([])),pe.split(" ").forEach(ge=>{ge=ge.replace(/&#39;/g,"'"),ge&&oe[le].push({content:ge,type:de})})}):he.type==="strong"||he.type==="em"?he.tokens.forEach(ue=>{ae(ue,he.type)}):he.type==="html"&&oe[le].push({content:he.text,type:"normal"})}return __name(ae,"processNode"),re.forEach(he=>{var de;he.type==="paragraph"?(de=he.tokens)==null||de.forEach(ue=>{ae(ue)}):he.type==="html"&&oe[le].push({content:he.text,type:"normal"})}),oe}__name(markdownToLines,"markdownToLines");function markdownToHTML(ie,{markdownAutoWrap:te}={}){const ne=marked.lexer(ie);function re(oe){var le,ae,he;return oe.type==="text"?te===!1?oe.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):oe.text.replace(/\n */g,"<br/>"):oe.type==="strong"?`<strong>${(le=oe.tokens)==null?void 0:le.map(re).join("")}</strong>`:oe.type==="em"?`<em>${(ae=oe.tokens)==null?void 0:ae.map(re).join("")}</em>`:oe.type==="paragraph"?`<p>${(he=oe.tokens)==null?void 0:he.map(re).join("")}</p>`:oe.type==="space"?"":oe.type==="html"?`${oe.text}`:oe.type==="escape"?oe.text:`Unsupported markdown: ${oe.type}`}return __name(re,"output"),ne.map(re).join("")}__name(markdownToHTML,"markdownToHTML");function splitTextToChars(ie){return Intl.Segmenter?[...new Intl.Segmenter().segment(ie)].map(te=>te.segment):[...ie]}__name(splitTextToChars,"splitTextToChars");function splitWordToFitWidth(ie,te){const ne=splitTextToChars(te.content);return splitWordToFitWidthRecursion(ie,[],ne,te.type)}__name(splitWordToFitWidth,"splitWordToFitWidth");function splitWordToFitWidthRecursion(ie,te,ne,re){if(ne.length===0)return[{content:te.join(""),type:re},{content:"",type:re}];const[oe,...le]=ne,ae=[...te,oe];return ie([{content:ae.join(""),type:re}])?splitWordToFitWidthRecursion(ie,ae,le,re):(te.length===0&&oe&&(te.push(oe),ne.shift()),[{content:te.join(""),type:re},{content:ne.join(""),type:re}])}__name(splitWordToFitWidthRecursion,"splitWordToFitWidthRecursion");function splitLineToFitWidth(ie,te){if(ie.some(({content:ne})=>ne.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return splitLineToFitWidthRecursion(ie,te)}__name(splitLineToFitWidth,"splitLineToFitWidth");function splitLineToFitWidthRecursion(ie,te,ne=[],re=[]){if(ie.length===0)return re.length>0&&ne.push(re),ne.length>0?ne:[];let oe="";ie[0].content===" "&&(oe=" ",ie.shift());const le=ie.shift()??{content:" ",type:"normal"},ae=[...re];if(oe!==""&&ae.push({content:oe,type:"normal"}),ae.push(le),te(ae))return splitLineToFitWidthRecursion(ie,te,ne,ae);if(re.length>0)ne.push(re),ie.unshift(le);else if(le.content){const[he,de]=splitWordToFitWidth(te,le);ne.push([he]),de.content&&ie.unshift(de)}return splitLineToFitWidthRecursion(ie,te,ne)}__name(splitLineToFitWidthRecursion,"splitLineToFitWidthRecursion");function applyStyle$1(ie,te){te&&ie.attr("style",te)}__name(applyStyle$1,"applyStyle");async function addHtmlSpan(ie,te,ne,re,oe=!1){const le=ie.append("foreignObject");le.attr("width",`${10*ne}px`),le.attr("height",`${10*ne}px`);const ae=le.append("xhtml:div");let he=te.label;te.label&&hasKatex(te.label)&&(he=await renderKatex(te.label.replace(common_default.lineBreakRegex,`
`),getConfig2()));const de=te.isNode?"nodeLabel":"edgeLabel",ue=ae.append("span");ue.html(he),applyStyle$1(ue,te.labelStyle),ue.attr("class",`${de} ${re}`),applyStyle$1(ae,te.labelStyle),ae.style("display","table-cell"),ae.style("white-space","nowrap"),ae.style("line-height","1.5"),ae.style("max-width",ne+"px"),ae.style("text-align","center"),ae.attr("xmlns","http://www.w3.org/1999/xhtml"),oe&&ae.attr("class","labelBkg");let pe=ae.node().getBoundingClientRect();return pe.width===ne&&(ae.style("display","table"),ae.style("white-space","break-spaces"),ae.style("width",ne+"px"),pe=ae.node().getBoundingClientRect()),le.node()}__name(addHtmlSpan,"addHtmlSpan");function createTspan(ie,te,ne){return ie.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",te*ne-.1+"em").attr("dy",ne+"em")}__name(createTspan,"createTspan");function computeWidthOfText(ie,te,ne){const re=ie.append("text"),oe=createTspan(re,1,te);updateTextContentAndStyles(oe,ne);const le=oe.node().getComputedTextLength();return re.remove(),le}__name(computeWidthOfText,"computeWidthOfText");function computeDimensionOfText(ie,te,ne){var ae;const re=ie.append("text"),oe=createTspan(re,1,te);updateTextContentAndStyles(oe,[{content:ne,type:"normal"}]);const le=(ae=oe.node())==null?void 0:ae.getBoundingClientRect();return le&&re.remove(),le}__name(computeDimensionOfText,"computeDimensionOfText");function createFormattedText(ie,te,ne,re=!1){const le=te.append("g"),ae=le.insert("rect").attr("class","background").attr("style","stroke: none"),he=le.append("text").attr("y","-10.1");let de=0;for(const ue of ne){const pe=__name(ge=>computeWidthOfText(le,1.1,ge)<=ie,"checkWidth"),fe=pe(ue)?[ue]:splitLineToFitWidth(ue,pe);for(const ge of fe){const $e=createTspan(he,de,1.1);updateTextContentAndStyles($e,ge),de++}}if(re){const ue=he.node().getBBox(),pe=2;return ae.attr("x",ue.x-pe).attr("y",ue.y-pe).attr("width",ue.width+2*pe).attr("height",ue.height+2*pe),le.node()}else return he.node()}__name(createFormattedText,"createFormattedText");function updateTextContentAndStyles(ie,te){ie.text(""),te.forEach((ne,re)=>{const oe=ie.append("tspan").attr("font-style",ne.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",ne.type==="strong"?"bold":"normal");re===0?oe.text(ne.content):oe.text(" "+ne.content)})}__name(updateTextContentAndStyles,"updateTextContentAndStyles");function replaceIconSubstring(ie){return ie.replace(/fa[bklrs]?:fa-[\w-]+/g,te=>`<i class='${te.replace(":"," ")}'></i>`)}__name(replaceIconSubstring,"replaceIconSubstring");var createText=__name(async(ie,te="",{style:ne="",isTitle:re=!1,classes:oe="",useHtmlLabels:le=!0,isNode:ae=!0,width:he=200,addSvgBackground:de=!1}={},ue)=>{if(log.debug("XYZ createText",te,ne,re,oe,le,ae,"addSvgBackground: ",de),le){const pe=markdownToHTML(te,ue),fe=replaceIconSubstring(decodeEntities(pe)),ge=te.replace(/\\\\/g,"\\"),$e={isNode:ae,label:hasKatex(te)?ge:fe,labelStyle:ne.replace("fill:","color:")};return await addHtmlSpan(ie,$e,he,oe,de)}else{const pe=te.replace(/<br\s*\/?>/g,"<br/>"),fe=markdownToLines(pe.replace("<br>","<br/>"),ue),ge=createFormattedText(he,ie,fe,te?de:!1);if(ae){/stroke:/.exec(ne)&&(ne=ne.replace("stroke:","lineColor:"));const $e=ne.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");select(ge).attr("style",$e)}else{const $e=ne.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");select(ge).select("rect").attr("style",$e.replace(/background:/g,"fill:"));const Te=ne.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");select(ge).select("text").attr("style",Te)}return ge}},"createText");function t(ie,te,ne){if(ie&&ie.length){const[re,oe]=te,le=Math.PI/180*ne,ae=Math.cos(le),he=Math.sin(le);for(const de of ie){const[ue,pe]=de;de[0]=(ue-re)*ae-(pe-oe)*he+re,de[1]=(ue-re)*he+(pe-oe)*ae+oe}}}function e(ie,te){return ie[0]===te[0]&&ie[1]===te[1]}function s(ie,te,ne,re=1){const oe=ne,le=Math.max(te,.1),ae=ie[0]&&ie[0][0]&&typeof ie[0][0]=="number"?[ie]:ie,he=[0,0];if(oe)for(const ue of ae)t(ue,he,oe);const de=function(ue,pe,fe){const ge=[];for(const ke of ue){const Re=[...ke];e(Re[0],Re[Re.length-1])||Re.push([Re[0][0],Re[0][1]]),Re.length>2&&ge.push(Re)}const $e=[];pe=Math.max(pe,.1);const Te=[];for(const ke of ge)for(let Re=0;Re<ke.length-1;Re++){const Ne=ke[Re],xe=ke[Re+1];if(Ne[1]!==xe[1]){const ze=Math.min(Ne[1],xe[1]);Te.push({ymin:ze,ymax:Math.max(Ne[1],xe[1]),x:ze===Ne[1]?Ne[0]:xe[0],islope:(xe[0]-Ne[0])/(xe[1]-Ne[1])})}}if(Te.sort((ke,Re)=>ke.ymin<Re.ymin?-1:ke.ymin>Re.ymin?1:ke.x<Re.x?-1:ke.x>Re.x?1:ke.ymax===Re.ymax?0:(ke.ymax-Re.ymax)/Math.abs(ke.ymax-Re.ymax)),!Te.length)return $e;let Ee=[],Se=Te[0].ymin,ve=0;for(;Ee.length||Te.length;){if(Te.length){let ke=-1;for(let Re=0;Re<Te.length&&!(Te[Re].ymin>Se);Re++)ke=Re;Te.splice(0,ke+1).forEach(Re=>{Ee.push({s:Se,edge:Re})})}if(Ee=Ee.filter(ke=>!(ke.edge.ymax<=Se)),Ee.sort((ke,Re)=>ke.edge.x===Re.edge.x?0:(ke.edge.x-Re.edge.x)/Math.abs(ke.edge.x-Re.edge.x)),(fe!==1||ve%pe==0)&&Ee.length>1)for(let ke=0;ke<Ee.length;ke+=2){const Re=ke+1;if(Re>=Ee.length)break;const Ne=Ee[ke].edge,xe=Ee[Re].edge;$e.push([[Math.round(Ne.x),Se],[Math.round(xe.x),Se]])}Se+=fe,Ee.forEach(ke=>{ke.edge.x=ke.edge.x+fe*ke.edge.islope}),ve++}return $e}(ae,le,re);if(oe){for(const ue of ae)t(ue,he,-oe);(function(ue,pe,fe){const ge=[];ue.forEach($e=>ge.push(...$e)),t(ge,pe,fe)})(de,he,-oe)}return de}function n(ie,te){var ne;const re=te.hachureAngle+90;let oe=te.hachureGap;oe<0&&(oe=4*te.strokeWidth),oe=Math.round(Math.max(oe,.1));let le=1;return te.roughness>=1&&(((ne=te.randomizer)===null||ne===void 0?void 0:ne.next())||Math.random())>.7&&(le=oe),s(ie,oe,re,le||1)}class o{constructor(te){this.helper=te}fillPolygons(te,ne){return this._fillPolygons(te,ne)}_fillPolygons(te,ne){const re=n(te,ne);return{type:"fillSketch",ops:this.renderLines(re,ne)}}renderLines(te,ne){const re=[];for(const oe of te)re.push(...this.helper.doubleLineOps(oe[0][0],oe[0][1],oe[1][0],oe[1][1],ne));return re}}function a(ie){const te=ie[0],ne=ie[1];return Math.sqrt(Math.pow(te[0]-ne[0],2)+Math.pow(te[1]-ne[1],2))}class h extends o{fillPolygons(te,ne){let re=ne.hachureGap;re<0&&(re=4*ne.strokeWidth),re=Math.max(re,.1);const oe=n(te,Object.assign({},ne,{hachureGap:re})),le=Math.PI/180*ne.hachureAngle,ae=[],he=.5*re*Math.cos(le),de=.5*re*Math.sin(le);for(const[ue,pe]of oe)a([ue,pe])&&ae.push([[ue[0]-he,ue[1]+de],[...pe]],[[ue[0]+he,ue[1]-de],[...pe]]);return{type:"fillSketch",ops:this.renderLines(ae,ne)}}}class r extends o{fillPolygons(te,ne){const re=this._fillPolygons(te,ne),oe=Object.assign({},ne,{hachureAngle:ne.hachureAngle+90}),le=this._fillPolygons(te,oe);return re.ops=re.ops.concat(le.ops),re}}class i{constructor(te){this.helper=te}fillPolygons(te,ne){const re=n(te,ne=Object.assign({},ne,{hachureAngle:0}));return this.dotsOnLines(re,ne)}dotsOnLines(te,ne){const re=[];let oe=ne.hachureGap;oe<0&&(oe=4*ne.strokeWidth),oe=Math.max(oe,.1);let le=ne.fillWeight;le<0&&(le=ne.strokeWidth/2);const ae=oe/4;for(const he of te){const de=a(he),ue=de/oe,pe=Math.ceil(ue)-1,fe=de-pe*oe,ge=(he[0][0]+he[1][0])/2-oe/4,$e=Math.min(he[0][1],he[1][1]);for(let Te=0;Te<pe;Te++){const Ee=$e+fe+Te*oe,Se=ge-ae+2*Math.random()*ae,ve=Ee-ae+2*Math.random()*ae,ke=this.helper.ellipse(Se,ve,le,le,ne);re.push(...ke.ops)}}return{type:"fillSketch",ops:re}}}class c{constructor(te){this.helper=te}fillPolygons(te,ne){const re=n(te,ne);return{type:"fillSketch",ops:this.dashedLine(re,ne)}}dashedLine(te,ne){const re=ne.dashOffset<0?ne.hachureGap<0?4*ne.strokeWidth:ne.hachureGap:ne.dashOffset,oe=ne.dashGap<0?ne.hachureGap<0?4*ne.strokeWidth:ne.hachureGap:ne.dashGap,le=[];return te.forEach(ae=>{const he=a(ae),de=Math.floor(he/(re+oe)),ue=(he+oe-de*(re+oe))/2;let pe=ae[0],fe=ae[1];pe[0]>fe[0]&&(pe=ae[1],fe=ae[0]);const ge=Math.atan((fe[1]-pe[1])/(fe[0]-pe[0]));for(let $e=0;$e<de;$e++){const Te=$e*(re+oe),Ee=Te+re,Se=[pe[0]+Te*Math.cos(ge)+ue*Math.cos(ge),pe[1]+Te*Math.sin(ge)+ue*Math.sin(ge)],ve=[pe[0]+Ee*Math.cos(ge)+ue*Math.cos(ge),pe[1]+Ee*Math.sin(ge)+ue*Math.sin(ge)];le.push(...this.helper.doubleLineOps(Se[0],Se[1],ve[0],ve[1],ne))}}),le}}class l{constructor(te){this.helper=te}fillPolygons(te,ne){const re=ne.hachureGap<0?4*ne.strokeWidth:ne.hachureGap,oe=ne.zigzagOffset<0?re:ne.zigzagOffset,le=n(te,ne=Object.assign({},ne,{hachureGap:re+oe}));return{type:"fillSketch",ops:this.zigzagLines(le,oe,ne)}}zigzagLines(te,ne,re){const oe=[];return te.forEach(le=>{const ae=a(le),he=Math.round(ae/(2*ne));let de=le[0],ue=le[1];de[0]>ue[0]&&(de=le[1],ue=le[0]);const pe=Math.atan((ue[1]-de[1])/(ue[0]-de[0]));for(let fe=0;fe<he;fe++){const ge=2*fe*ne,$e=2*(fe+1)*ne,Te=Math.sqrt(2*Math.pow(ne,2)),Ee=[de[0]+ge*Math.cos(pe),de[1]+ge*Math.sin(pe)],Se=[de[0]+$e*Math.cos(pe),de[1]+$e*Math.sin(pe)],ve=[Ee[0]+Te*Math.cos(pe+Math.PI/4),Ee[1]+Te*Math.sin(pe+Math.PI/4)];oe.push(...this.helper.doubleLineOps(Ee[0],Ee[1],ve[0],ve[1],re),...this.helper.doubleLineOps(ve[0],ve[1],Se[0],Se[1],re))}}),oe}}const u={};class p{constructor(te){this.seed=te}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const f=0,d=1,g=2,M={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function k(ie,te){return ie.type===te}function b(ie){const te=[],ne=function(ae){const he=new Array;for(;ae!=="";)if(ae.match(/^([ \t\r\n,]+)/))ae=ae.substr(RegExp.$1.length);else if(ae.match(/^([aAcChHlLmMqQsStTvVzZ])/))he[he.length]={type:f,text:RegExp.$1},ae=ae.substr(RegExp.$1.length);else{if(!ae.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];he[he.length]={type:d,text:`${parseFloat(RegExp.$1)}`},ae=ae.substr(RegExp.$1.length)}return he[he.length]={type:g,text:""},he}(ie);let re="BOD",oe=0,le=ne[oe];for(;!k(le,g);){let ae=0;const he=[];if(re==="BOD"){if(le.text!=="M"&&le.text!=="m")return b("M0,0"+ie);oe++,ae=M[le.text],re=le.text}else k(le,d)?ae=M[re]:(oe++,ae=M[le.text],re=le.text);if(!(oe+ae<ne.length))throw new Error("Path data ended short");for(let de=oe;de<oe+ae;de++){const ue=ne[de];if(!k(ue,d))throw new Error("Param not a number: "+re+","+ue.text);he[he.length]=+ue.text}if(typeof M[re]!="number")throw new Error("Bad segment: "+re);{const de={key:re,data:he};te.push(de),oe+=ae,le=ne[oe],re==="M"&&(re="L"),re==="m"&&(re="l")}}return te}function y(ie){let te=0,ne=0,re=0,oe=0;const le=[];for(const{key:ae,data:he}of ie)switch(ae){case"M":le.push({key:"M",data:[...he]}),[te,ne]=he,[re,oe]=he;break;case"m":te+=he[0],ne+=he[1],le.push({key:"M",data:[te,ne]}),re=te,oe=ne;break;case"L":le.push({key:"L",data:[...he]}),[te,ne]=he;break;case"l":te+=he[0],ne+=he[1],le.push({key:"L",data:[te,ne]});break;case"C":le.push({key:"C",data:[...he]}),te=he[4],ne=he[5];break;case"c":{const de=he.map((ue,pe)=>pe%2?ue+ne:ue+te);le.push({key:"C",data:de}),te=de[4],ne=de[5];break}case"Q":le.push({key:"Q",data:[...he]}),te=he[2],ne=he[3];break;case"q":{const de=he.map((ue,pe)=>pe%2?ue+ne:ue+te);le.push({key:"Q",data:de}),te=de[2],ne=de[3];break}case"A":le.push({key:"A",data:[...he]}),te=he[5],ne=he[6];break;case"a":te+=he[5],ne+=he[6],le.push({key:"A",data:[he[0],he[1],he[2],he[3],he[4],te,ne]});break;case"H":le.push({key:"H",data:[...he]}),te=he[0];break;case"h":te+=he[0],le.push({key:"H",data:[te]});break;case"V":le.push({key:"V",data:[...he]}),ne=he[0];break;case"v":ne+=he[0],le.push({key:"V",data:[ne]});break;case"S":le.push({key:"S",data:[...he]}),te=he[2],ne=he[3];break;case"s":{const de=he.map((ue,pe)=>pe%2?ue+ne:ue+te);le.push({key:"S",data:de}),te=de[2],ne=de[3];break}case"T":le.push({key:"T",data:[...he]}),te=he[0],ne=he[1];break;case"t":te+=he[0],ne+=he[1],le.push({key:"T",data:[te,ne]});break;case"Z":case"z":le.push({key:"Z",data:[]}),te=re,ne=oe}return le}function m(ie){const te=[];let ne="",re=0,oe=0,le=0,ae=0,he=0,de=0;for(const{key:ue,data:pe}of ie){switch(ue){case"M":te.push({key:"M",data:[...pe]}),[re,oe]=pe,[le,ae]=pe;break;case"C":te.push({key:"C",data:[...pe]}),re=pe[4],oe=pe[5],he=pe[2],de=pe[3];break;case"L":te.push({key:"L",data:[...pe]}),[re,oe]=pe;break;case"H":re=pe[0],te.push({key:"L",data:[re,oe]});break;case"V":oe=pe[0],te.push({key:"L",data:[re,oe]});break;case"S":{let fe=0,ge=0;ne==="C"||ne==="S"?(fe=re+(re-he),ge=oe+(oe-de)):(fe=re,ge=oe),te.push({key:"C",data:[fe,ge,...pe]}),he=pe[0],de=pe[1],re=pe[2],oe=pe[3];break}case"T":{const[fe,ge]=pe;let $e=0,Te=0;ne==="Q"||ne==="T"?($e=re+(re-he),Te=oe+(oe-de)):($e=re,Te=oe);const Ee=re+2*($e-re)/3,Se=oe+2*(Te-oe)/3,ve=fe+2*($e-fe)/3,ke=ge+2*(Te-ge)/3;te.push({key:"C",data:[Ee,Se,ve,ke,fe,ge]}),he=$e,de=Te,re=fe,oe=ge;break}case"Q":{const[fe,ge,$e,Te]=pe,Ee=re+2*(fe-re)/3,Se=oe+2*(ge-oe)/3,ve=$e+2*(fe-$e)/3,ke=Te+2*(ge-Te)/3;te.push({key:"C",data:[Ee,Se,ve,ke,$e,Te]}),he=fe,de=ge,re=$e,oe=Te;break}case"A":{const fe=Math.abs(pe[0]),ge=Math.abs(pe[1]),$e=pe[2],Te=pe[3],Ee=pe[4],Se=pe[5],ve=pe[6];fe===0||ge===0?(te.push({key:"C",data:[re,oe,Se,ve,Se,ve]}),re=Se,oe=ve):(re!==Se||oe!==ve)&&(x(re,oe,Se,ve,fe,ge,$e,Te,Ee).forEach(function(ke){te.push({key:"C",data:ke})}),re=Se,oe=ve);break}case"Z":te.push({key:"Z",data:[]}),re=le,oe=ae}ne=ue}return te}function w(ie,te,ne){return[ie*Math.cos(ne)-te*Math.sin(ne),ie*Math.sin(ne)+te*Math.cos(ne)]}function x(ie,te,ne,re,oe,le,ae,he,de,ue){const pe=(fe=ae,Math.PI*fe/180);var fe;let ge=[],$e=0,Te=0,Ee=0,Se=0;if(ue)[$e,Te,Ee,Se]=ue;else{[ie,te]=w(ie,te,-pe),[ne,re]=w(ne,re,-pe);const rt=(ie-ne)/2,Ke=(te-re)/2;let Je=rt*rt/(oe*oe)+Ke*Ke/(le*le);Je>1&&(Je=Math.sqrt(Je),oe*=Je,le*=Je);const qe=oe*oe,ct=le*le,Le=qe*ct-qe*Ke*Ke-ct*rt*rt,je=qe*Ke*Ke+ct*rt*rt,pt=(he===de?-1:1)*Math.sqrt(Math.abs(Le/je));Ee=pt*oe*Ke/le+(ie+ne)/2,Se=pt*-le*rt/oe+(te+re)/2,$e=Math.asin(parseFloat(((te-Se)/le).toFixed(9))),Te=Math.asin(parseFloat(((re-Se)/le).toFixed(9))),ie<Ee&&($e=Math.PI-$e),ne<Ee&&(Te=Math.PI-Te),$e<0&&($e=2*Math.PI+$e),Te<0&&(Te=2*Math.PI+Te),de&&$e>Te&&($e-=2*Math.PI),!de&&Te>$e&&(Te-=2*Math.PI)}let ve=Te-$e;if(Math.abs(ve)>120*Math.PI/180){const rt=Te,Ke=ne,Je=re;Te=de&&Te>$e?$e+120*Math.PI/180*1:$e+120*Math.PI/180*-1,ge=x(ne=Ee+oe*Math.cos(Te),re=Se+le*Math.sin(Te),Ke,Je,oe,le,ae,0,de,[Te,rt,Ee,Se])}ve=Te-$e;const ke=Math.cos($e),Re=Math.sin($e),Ne=Math.cos(Te),xe=Math.sin(Te),ze=Math.tan(ve/4),Me=4/3*oe*ze,Ae=4/3*le*ze,Qe=[ie,te],ht=[ie+Me*Re,te-Ae*ke],Pe=[ne+Me*xe,re-Ae*Ne],_t=[ne,re];if(ht[0]=2*Qe[0]-ht[0],ht[1]=2*Qe[1]-ht[1],ue)return[ht,Pe,_t].concat(ge);{ge=[ht,Pe,_t].concat(ge);const rt=[];for(let Ke=0;Ke<ge.length;Ke+=3){const Je=w(ge[Ke][0],ge[Ke][1],pe),qe=w(ge[Ke+1][0],ge[Ke+1][1],pe),ct=w(ge[Ke+2][0],ge[Ke+2][1],pe);rt.push([Je[0],Je[1],qe[0],qe[1],ct[0],ct[1]])}return rt}}const P={randOffset:function(ie,te){return G(ie,te)},randOffsetWithRange:function(ie,te,ne){return E(ie,te,ne)},ellipse:function(ie,te,ne,re,oe){const le=T(ne,re,oe);return D(ie,te,oe,le).opset},doubleLineOps:function(ie,te,ne,re,oe){return $$1(ie,te,ne,re,oe,!0)}};function v(ie,te,ne,re,oe){return{type:"path",ops:$$1(ie,te,ne,re,oe)}}function S(ie,te,ne){const re=(ie||[]).length;if(re>2){const oe=[];for(let le=0;le<re-1;le++)oe.push(...$$1(ie[le][0],ie[le][1],ie[le+1][0],ie[le+1][1],ne));return te&&oe.push(...$$1(ie[re-1][0],ie[re-1][1],ie[0][0],ie[0][1],ne)),{type:"path",ops:oe}}return re===2?v(ie[0][0],ie[0][1],ie[1][0],ie[1][1],ne):{type:"path",ops:[]}}function O(ie,te,ne,re,oe){return function(le,ae){return S(le,!0,ae)}([[ie,te],[ie+ne,te],[ie+ne,te+re],[ie,te+re]],oe)}function L(ie,te){if(ie.length){const ne=typeof ie[0][0]=="number"?[ie]:ie,re=j(ne[0],1*(1+.2*te.roughness),te),oe=te.disableMultiStroke?[]:j(ne[0],1.5*(1+.22*te.roughness),z(te));for(let le=1;le<ne.length;le++){const ae=ne[le];if(ae.length){const he=j(ae,1*(1+.2*te.roughness),te),de=te.disableMultiStroke?[]:j(ae,1.5*(1+.22*te.roughness),z(te));for(const ue of he)ue.op!=="move"&&re.push(ue);for(const ue of de)ue.op!=="move"&&oe.push(ue)}}return{type:"path",ops:re.concat(oe)}}return{type:"path",ops:[]}}function T(ie,te,ne){const re=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(ie/2,2)+Math.pow(te/2,2))/2)),oe=Math.ceil(Math.max(ne.curveStepCount,ne.curveStepCount/Math.sqrt(200)*re)),le=2*Math.PI/oe;let ae=Math.abs(ie/2),he=Math.abs(te/2);const de=1-ne.curveFitting;return ae+=G(ae*de,ne),he+=G(he*de,ne),{increment:le,rx:ae,ry:he}}function D(ie,te,ne,re){const[oe,le]=F(re.increment,ie,te,re.rx,re.ry,1,re.increment*E(.1,E(.4,1,ne),ne),ne);let ae=q(oe,null,ne);if(!ne.disableMultiStroke&&ne.roughness!==0){const[he]=F(re.increment,ie,te,re.rx,re.ry,1.5,0,ne),de=q(he,null,ne);ae=ae.concat(de)}return{estimatedPoints:le,opset:{type:"path",ops:ae}}}function A(ie,te,ne,re,oe,le,ae,he,de){const ue=ie,pe=te;let fe=Math.abs(ne/2),ge=Math.abs(re/2);fe+=G(.01*fe,de),ge+=G(.01*ge,de);let $e=oe,Te=le;for(;$e<0;)$e+=2*Math.PI,Te+=2*Math.PI;Te-$e>2*Math.PI&&($e=0,Te=2*Math.PI);const Ee=2*Math.PI/de.curveStepCount,Se=Math.min(Ee/2,(Te-$e)/2),ve=V(Se,ue,pe,fe,ge,$e,Te,1,de);if(!de.disableMultiStroke){const ke=V(Se,ue,pe,fe,ge,$e,Te,1.5,de);ve.push(...ke)}return ae&&(he?ve.push(...$$1(ue,pe,ue+fe*Math.cos($e),pe+ge*Math.sin($e),de),...$$1(ue,pe,ue+fe*Math.cos(Te),pe+ge*Math.sin(Te),de)):ve.push({op:"lineTo",data:[ue,pe]},{op:"lineTo",data:[ue+fe*Math.cos($e),pe+ge*Math.sin($e)]})),{type:"path",ops:ve}}function _(ie,te){const ne=m(y(b(ie))),re=[];let oe=[0,0],le=[0,0];for(const{key:ae,data:he}of ne)switch(ae){case"M":le=[he[0],he[1]],oe=[he[0],he[1]];break;case"L":re.push(...$$1(le[0],le[1],he[0],he[1],te)),le=[he[0],he[1]];break;case"C":{const[de,ue,pe,fe,ge,$e]=he;re.push(...Z(de,ue,pe,fe,ge,$e,le,te)),le=[ge,$e];break}case"Z":re.push(...$$1(le[0],le[1],oe[0],oe[1],te)),le=[oe[0],oe[1]]}return{type:"path",ops:re}}function I(ie,te){const ne=[];for(const re of ie)if(re.length){const oe=te.maxRandomnessOffset||0,le=re.length;if(le>2){ne.push({op:"move",data:[re[0][0]+G(oe,te),re[0][1]+G(oe,te)]});for(let ae=1;ae<le;ae++)ne.push({op:"lineTo",data:[re[ae][0]+G(oe,te),re[ae][1]+G(oe,te)]})}}return{type:"fillPath",ops:ne}}function C(ie,te){return function(ne,re){let oe=ne.fillStyle||"hachure";if(!u[oe])switch(oe){case"zigzag":u[oe]||(u[oe]=new h(re));break;case"cross-hatch":u[oe]||(u[oe]=new r(re));break;case"dots":u[oe]||(u[oe]=new i(re));break;case"dashed":u[oe]||(u[oe]=new c(re));break;case"zigzag-line":u[oe]||(u[oe]=new l(re));break;default:oe="hachure",u[oe]||(u[oe]=new o(re))}return u[oe]}(te,P).fillPolygons(ie,te)}function z(ie){const te=Object.assign({},ie);return te.randomizer=void 0,ie.seed&&(te.seed=ie.seed+1),te}function W(ie){return ie.randomizer||(ie.randomizer=new p(ie.seed||0)),ie.randomizer.next()}function E(ie,te,ne,re=1){return ne.roughness*re*(W(ne)*(te-ie)+ie)}function G(ie,te,ne=1){return E(-ie,ie,te,ne)}function $$1(ie,te,ne,re,oe,le=!1){const ae=le?oe.disableMultiStrokeFill:oe.disableMultiStroke,he=R(ie,te,ne,re,oe,!0,!1);if(ae)return he;const de=R(ie,te,ne,re,oe,!0,!0);return he.concat(de)}function R(ie,te,ne,re,oe,le,ae){const he=Math.pow(ie-ne,2)+Math.pow(te-re,2),de=Math.sqrt(he);let ue=1;ue=de<200?1:de>500?.4:-.0016668*de+1.233334;let pe=oe.maxRandomnessOffset||0;pe*pe*100>he&&(pe=de/10);const fe=pe/2,ge=.2+.2*W(oe);let $e=oe.bowing*oe.maxRandomnessOffset*(re-te)/200,Te=oe.bowing*oe.maxRandomnessOffset*(ie-ne)/200;$e=G($e,oe,ue),Te=G(Te,oe,ue);const Ee=[],Se=()=>G(fe,oe,ue),ve=()=>G(pe,oe,ue),ke=oe.preserveVertices;return le&&(ae?Ee.push({op:"move",data:[ie+(ke?0:Se()),te+(ke?0:Se())]}):Ee.push({op:"move",data:[ie+(ke?0:G(pe,oe,ue)),te+(ke?0:G(pe,oe,ue))]})),ae?Ee.push({op:"bcurveTo",data:[$e+ie+(ne-ie)*ge+Se(),Te+te+(re-te)*ge+Se(),$e+ie+2*(ne-ie)*ge+Se(),Te+te+2*(re-te)*ge+Se(),ne+(ke?0:Se()),re+(ke?0:Se())]}):Ee.push({op:"bcurveTo",data:[$e+ie+(ne-ie)*ge+ve(),Te+te+(re-te)*ge+ve(),$e+ie+2*(ne-ie)*ge+ve(),Te+te+2*(re-te)*ge+ve(),ne+(ke?0:ve()),re+(ke?0:ve())]}),Ee}function j(ie,te,ne){if(!ie.length)return[];const re=[];re.push([ie[0][0]+G(te,ne),ie[0][1]+G(te,ne)]),re.push([ie[0][0]+G(te,ne),ie[0][1]+G(te,ne)]);for(let oe=1;oe<ie.length;oe++)re.push([ie[oe][0]+G(te,ne),ie[oe][1]+G(te,ne)]),oe===ie.length-1&&re.push([ie[oe][0]+G(te,ne),ie[oe][1]+G(te,ne)]);return q(re,null,ne)}function q(ie,te,ne){const re=ie.length,oe=[];if(re>3){const le=[],ae=1-ne.curveTightness;oe.push({op:"move",data:[ie[1][0],ie[1][1]]});for(let he=1;he+2<re;he++){const de=ie[he];le[0]=[de[0],de[1]],le[1]=[de[0]+(ae*ie[he+1][0]-ae*ie[he-1][0])/6,de[1]+(ae*ie[he+1][1]-ae*ie[he-1][1])/6],le[2]=[ie[he+1][0]+(ae*ie[he][0]-ae*ie[he+2][0])/6,ie[he+1][1]+(ae*ie[he][1]-ae*ie[he+2][1])/6],le[3]=[ie[he+1][0],ie[he+1][1]],oe.push({op:"bcurveTo",data:[le[1][0],le[1][1],le[2][0],le[2][1],le[3][0],le[3][1]]})}if(te&&te.length===2){const he=ne.maxRandomnessOffset;oe.push({op:"lineTo",data:[te[0]+G(he,ne),te[1]+G(he,ne)]})}}else re===3?(oe.push({op:"move",data:[ie[1][0],ie[1][1]]}),oe.push({op:"bcurveTo",data:[ie[1][0],ie[1][1],ie[2][0],ie[2][1],ie[2][0],ie[2][1]]})):re===2&&oe.push(...R(ie[0][0],ie[0][1],ie[1][0],ie[1][1],ne,!0,!0));return oe}function F(ie,te,ne,re,oe,le,ae,he){const de=[],ue=[];if(he.roughness===0){ie/=4,ue.push([te+re*Math.cos(-ie),ne+oe*Math.sin(-ie)]);for(let pe=0;pe<=2*Math.PI;pe+=ie){const fe=[te+re*Math.cos(pe),ne+oe*Math.sin(pe)];de.push(fe),ue.push(fe)}ue.push([te+re*Math.cos(0),ne+oe*Math.sin(0)]),ue.push([te+re*Math.cos(ie),ne+oe*Math.sin(ie)])}else{const pe=G(.5,he)-Math.PI/2;ue.push([G(le,he)+te+.9*re*Math.cos(pe-ie),G(le,he)+ne+.9*oe*Math.sin(pe-ie)]);const fe=2*Math.PI+pe-.01;for(let ge=pe;ge<fe;ge+=ie){const $e=[G(le,he)+te+re*Math.cos(ge),G(le,he)+ne+oe*Math.sin(ge)];de.push($e),ue.push($e)}ue.push([G(le,he)+te+re*Math.cos(pe+2*Math.PI+.5*ae),G(le,he)+ne+oe*Math.sin(pe+2*Math.PI+.5*ae)]),ue.push([G(le,he)+te+.98*re*Math.cos(pe+ae),G(le,he)+ne+.98*oe*Math.sin(pe+ae)]),ue.push([G(le,he)+te+.9*re*Math.cos(pe+.5*ae),G(le,he)+ne+.9*oe*Math.sin(pe+.5*ae)])}return[ue,de]}function V(ie,te,ne,re,oe,le,ae,he,de){const ue=le+G(.1,de),pe=[];pe.push([G(he,de)+te+.9*re*Math.cos(ue-ie),G(he,de)+ne+.9*oe*Math.sin(ue-ie)]);for(let fe=ue;fe<=ae;fe+=ie)pe.push([G(he,de)+te+re*Math.cos(fe),G(he,de)+ne+oe*Math.sin(fe)]);return pe.push([te+re*Math.cos(ae),ne+oe*Math.sin(ae)]),pe.push([te+re*Math.cos(ae),ne+oe*Math.sin(ae)]),q(pe,null,de)}function Z(ie,te,ne,re,oe,le,ae,he){const de=[],ue=[he.maxRandomnessOffset||1,(he.maxRandomnessOffset||1)+.3];let pe=[0,0];const fe=he.disableMultiStroke?1:2,ge=he.preserveVertices;for(let $e=0;$e<fe;$e++)$e===0?de.push({op:"move",data:[ae[0],ae[1]]}):de.push({op:"move",data:[ae[0]+(ge?0:G(ue[0],he)),ae[1]+(ge?0:G(ue[0],he))]}),pe=ge?[oe,le]:[oe+G(ue[$e],he),le+G(ue[$e],he)],de.push({op:"bcurveTo",data:[ie+G(ue[$e],he),te+G(ue[$e],he),ne+G(ue[$e],he),re+G(ue[$e],he),pe[0],pe[1]]});return de}function Q(ie){return[...ie]}function H(ie,te=0){const ne=ie.length;if(ne<3)throw new Error("A curve must have at least three points.");const re=[];if(ne===3)re.push(Q(ie[0]),Q(ie[1]),Q(ie[2]),Q(ie[2]));else{const oe=[];oe.push(ie[0],ie[0]);for(let he=1;he<ie.length;he++)oe.push(ie[he]),he===ie.length-1&&oe.push(ie[he]);const le=[],ae=1-te;re.push(Q(oe[0]));for(let he=1;he+2<oe.length;he++){const de=oe[he];le[0]=[de[0],de[1]],le[1]=[de[0]+(ae*oe[he+1][0]-ae*oe[he-1][0])/6,de[1]+(ae*oe[he+1][1]-ae*oe[he-1][1])/6],le[2]=[oe[he+1][0]+(ae*oe[he][0]-ae*oe[he+2][0])/6,oe[he+1][1]+(ae*oe[he][1]-ae*oe[he+2][1])/6],le[3]=[oe[he+1][0],oe[he+1][1]],re.push(le[1],le[2],le[3])}}return re}function N(ie,te){return Math.pow(ie[0]-te[0],2)+Math.pow(ie[1]-te[1],2)}function B(ie,te,ne){const re=N(te,ne);if(re===0)return N(ie,te);let oe=((ie[0]-te[0])*(ne[0]-te[0])+(ie[1]-te[1])*(ne[1]-te[1]))/re;return oe=Math.max(0,Math.min(1,oe)),N(ie,J(te,ne,oe))}function J(ie,te,ne){return[ie[0]+(te[0]-ie[0])*ne,ie[1]+(te[1]-ie[1])*ne]}function K(ie,te,ne,re){const oe=re||[];if(function(he,de){const ue=he[de+0],pe=he[de+1],fe=he[de+2],ge=he[de+3];let $e=3*pe[0]-2*ue[0]-ge[0];$e*=$e;let Te=3*pe[1]-2*ue[1]-ge[1];Te*=Te;let Ee=3*fe[0]-2*ge[0]-ue[0];Ee*=Ee;let Se=3*fe[1]-2*ge[1]-ue[1];return Se*=Se,$e<Ee&&($e=Ee),Te<Se&&(Te=Se),$e+Te}(ie,te)<ne){const he=ie[te+0];oe.length?(le=oe[oe.length-1],ae=he,Math.sqrt(N(le,ae))>1&&oe.push(he)):oe.push(he),oe.push(ie[te+3])}else{const de=ie[te+0],ue=ie[te+1],pe=ie[te+2],fe=ie[te+3],ge=J(de,ue,.5),$e=J(ue,pe,.5),Te=J(pe,fe,.5),Ee=J(ge,$e,.5),Se=J($e,Te,.5),ve=J(Ee,Se,.5);K([de,ge,Ee,ve],0,ne,oe),K([ve,Se,Te,fe],0,ne,oe)}var le,ae;return oe}function U(ie,te){return X(ie,0,ie.length,te)}function X(ie,te,ne,re,oe){const le=oe||[],ae=ie[te],he=ie[ne-1];let de=0,ue=1;for(let pe=te+1;pe<ne-1;++pe){const fe=B(ie[pe],ae,he);fe>de&&(de=fe,ue=pe)}return Math.sqrt(de)>re?(X(ie,te,ue+1,re,le),X(ie,ue,ne,re,le)):(le.length||le.push(ae),le.push(he)),le}function Y(ie,te=.15,ne){const re=[],oe=(ie.length-1)/3;for(let le=0;le<oe;le++)K(ie,3*le,te,re);return ne&&ne>0?X(re,0,re.length,ne):re}const tt="none";class et{constructor(te){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=te||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(te){return te?Object.assign({},this.defaultOptions,te):this.defaultOptions}_d(te,ne,re){return{shape:te,sets:ne||[],options:re||this.defaultOptions}}line(te,ne,re,oe,le){const ae=this._o(le);return this._d("line",[v(te,ne,re,oe,ae)],ae)}rectangle(te,ne,re,oe,le){const ae=this._o(le),he=[],de=O(te,ne,re,oe,ae);if(ae.fill){const ue=[[te,ne],[te+re,ne],[te+re,ne+oe],[te,ne+oe]];ae.fillStyle==="solid"?he.push(I([ue],ae)):he.push(C([ue],ae))}return ae.stroke!==tt&&he.push(de),this._d("rectangle",he,ae)}ellipse(te,ne,re,oe,le){const ae=this._o(le),he=[],de=T(re,oe,ae),ue=D(te,ne,ae,de);if(ae.fill)if(ae.fillStyle==="solid"){const pe=D(te,ne,ae,de).opset;pe.type="fillPath",he.push(pe)}else he.push(C([ue.estimatedPoints],ae));return ae.stroke!==tt&&he.push(ue.opset),this._d("ellipse",he,ae)}circle(te,ne,re,oe){const le=this.ellipse(te,ne,re,re,oe);return le.shape="circle",le}linearPath(te,ne){const re=this._o(ne);return this._d("linearPath",[S(te,!1,re)],re)}arc(te,ne,re,oe,le,ae,he=!1,de){const ue=this._o(de),pe=[],fe=A(te,ne,re,oe,le,ae,he,!0,ue);if(he&&ue.fill)if(ue.fillStyle==="solid"){const ge=Object.assign({},ue);ge.disableMultiStroke=!0;const $e=A(te,ne,re,oe,le,ae,!0,!1,ge);$e.type="fillPath",pe.push($e)}else pe.push(function(ge,$e,Te,Ee,Se,ve,ke){const Re=ge,Ne=$e;let xe=Math.abs(Te/2),ze=Math.abs(Ee/2);xe+=G(.01*xe,ke),ze+=G(.01*ze,ke);let Me=Se,Ae=ve;for(;Me<0;)Me+=2*Math.PI,Ae+=2*Math.PI;Ae-Me>2*Math.PI&&(Me=0,Ae=2*Math.PI);const Qe=(Ae-Me)/ke.curveStepCount,ht=[];for(let Pe=Me;Pe<=Ae;Pe+=Qe)ht.push([Re+xe*Math.cos(Pe),Ne+ze*Math.sin(Pe)]);return ht.push([Re+xe*Math.cos(Ae),Ne+ze*Math.sin(Ae)]),ht.push([Re,Ne]),C([ht],ke)}(te,ne,re,oe,le,ae,ue));return ue.stroke!==tt&&pe.push(fe),this._d("arc",pe,ue)}curve(te,ne){const re=this._o(ne),oe=[],le=L(te,re);if(re.fill&&re.fill!==tt)if(re.fillStyle==="solid"){const ae=L(te,Object.assign(Object.assign({},re),{disableMultiStroke:!0,roughness:re.roughness?re.roughness+re.fillShapeRoughnessGain:0}));oe.push({type:"fillPath",ops:this._mergedShape(ae.ops)})}else{const ae=[],he=te;if(he.length){const de=typeof he[0][0]=="number"?[he]:he;for(const ue of de)ue.length<3?ae.push(...ue):ue.length===3?ae.push(...Y(H([ue[0],ue[0],ue[1],ue[2]]),10,(1+re.roughness)/2)):ae.push(...Y(H(ue),10,(1+re.roughness)/2))}ae.length&&oe.push(C([ae],re))}return re.stroke!==tt&&oe.push(le),this._d("curve",oe,re)}polygon(te,ne){const re=this._o(ne),oe=[],le=S(te,!0,re);return re.fill&&(re.fillStyle==="solid"?oe.push(I([te],re)):oe.push(C([te],re))),re.stroke!==tt&&oe.push(le),this._d("polygon",oe,re)}path(te,ne){const re=this._o(ne),oe=[];if(!te)return this._d("path",oe,re);te=(te||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const le=re.fill&&re.fill!=="transparent"&&re.fill!==tt,ae=re.stroke!==tt,he=!!(re.simplification&&re.simplification<1),de=function(pe,fe,ge){const $e=m(y(b(pe))),Te=[];let Ee=[],Se=[0,0],ve=[];const ke=()=>{ve.length>=4&&Ee.push(...Y(ve,fe)),ve=[]},Re=()=>{ke(),Ee.length&&(Te.push(Ee),Ee=[])};for(const{key:xe,data:ze}of $e)switch(xe){case"M":Re(),Se=[ze[0],ze[1]],Ee.push(Se);break;case"L":ke(),Ee.push([ze[0],ze[1]]);break;case"C":if(!ve.length){const Me=Ee.length?Ee[Ee.length-1]:Se;ve.push([Me[0],Me[1]])}ve.push([ze[0],ze[1]]),ve.push([ze[2],ze[3]]),ve.push([ze[4],ze[5]]);break;case"Z":ke(),Ee.push([Se[0],Se[1]])}if(Re(),!ge)return Te;const Ne=[];for(const xe of Te){const ze=U(xe,ge);ze.length&&Ne.push(ze)}return Ne}(te,1,he?4-4*(re.simplification||1):(1+re.roughness)/2),ue=_(te,re);if(le)if(re.fillStyle==="solid")if(de.length===1){const pe=_(te,Object.assign(Object.assign({},re),{disableMultiStroke:!0,roughness:re.roughness?re.roughness+re.fillShapeRoughnessGain:0}));oe.push({type:"fillPath",ops:this._mergedShape(pe.ops)})}else oe.push(I(de,re));else oe.push(C(de,re));return ae&&(he?de.forEach(pe=>{oe.push(S(pe,!1,re))}):oe.push(ue)),this._d("path",oe,re)}opsToPath(te,ne){let re="";for(const oe of te.ops){const le=typeof ne=="number"&&ne>=0?oe.data.map(ae=>+ae.toFixed(ne)):oe.data;switch(oe.op){case"move":re+=`M${le[0]} ${le[1]} `;break;case"bcurveTo":re+=`C${le[0]} ${le[1]}, ${le[2]} ${le[3]}, ${le[4]} ${le[5]} `;break;case"lineTo":re+=`L${le[0]} ${le[1]} `}}return re.trim()}toPaths(te){const ne=te.sets||[],re=te.options||this.defaultOptions,oe=[];for(const le of ne){let ae=null;switch(le.type){case"path":ae={d:this.opsToPath(le),stroke:re.stroke,strokeWidth:re.strokeWidth,fill:tt};break;case"fillPath":ae={d:this.opsToPath(le),stroke:tt,strokeWidth:0,fill:re.fill||tt};break;case"fillSketch":ae=this.fillSketch(le,re)}ae&&oe.push(ae)}return oe}fillSketch(te,ne){let re=ne.fillWeight;return re<0&&(re=ne.strokeWidth/2),{d:this.opsToPath(te),stroke:ne.fill||tt,strokeWidth:re,fill:tt}}_mergedShape(te){return te.filter((ne,re)=>re===0||ne.op!=="move")}}class st{constructor(te,ne){this.canvas=te,this.ctx=this.canvas.getContext("2d"),this.gen=new et(ne)}draw(te){const ne=te.sets||[],re=te.options||this.getDefaultOptions(),oe=this.ctx,le=te.options.fixedDecimalPlaceDigits;for(const ae of ne)switch(ae.type){case"path":oe.save(),oe.strokeStyle=re.stroke==="none"?"transparent":re.stroke,oe.lineWidth=re.strokeWidth,re.strokeLineDash&&oe.setLineDash(re.strokeLineDash),re.strokeLineDashOffset&&(oe.lineDashOffset=re.strokeLineDashOffset),this._drawToContext(oe,ae,le),oe.restore();break;case"fillPath":{oe.save(),oe.fillStyle=re.fill||"";const he=te.shape==="curve"||te.shape==="polygon"||te.shape==="path"?"evenodd":"nonzero";this._drawToContext(oe,ae,le,he),oe.restore();break}case"fillSketch":this.fillSketch(oe,ae,re)}}fillSketch(te,ne,re){let oe=re.fillWeight;oe<0&&(oe=re.strokeWidth/2),te.save(),re.fillLineDash&&te.setLineDash(re.fillLineDash),re.fillLineDashOffset&&(te.lineDashOffset=re.fillLineDashOffset),te.strokeStyle=re.fill||"",te.lineWidth=oe,this._drawToContext(te,ne,re.fixedDecimalPlaceDigits),te.restore()}_drawToContext(te,ne,re,oe="nonzero"){te.beginPath();for(const le of ne.ops){const ae=typeof re=="number"&&re>=0?le.data.map(he=>+he.toFixed(re)):le.data;switch(le.op){case"move":te.moveTo(ae[0],ae[1]);break;case"bcurveTo":te.bezierCurveTo(ae[0],ae[1],ae[2],ae[3],ae[4],ae[5]);break;case"lineTo":te.lineTo(ae[0],ae[1])}}ne.type==="fillPath"?te.fill(oe):te.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(te,ne,re,oe,le){const ae=this.gen.line(te,ne,re,oe,le);return this.draw(ae),ae}rectangle(te,ne,re,oe,le){const ae=this.gen.rectangle(te,ne,re,oe,le);return this.draw(ae),ae}ellipse(te,ne,re,oe,le){const ae=this.gen.ellipse(te,ne,re,oe,le);return this.draw(ae),ae}circle(te,ne,re,oe){const le=this.gen.circle(te,ne,re,oe);return this.draw(le),le}linearPath(te,ne){const re=this.gen.linearPath(te,ne);return this.draw(re),re}polygon(te,ne){const re=this.gen.polygon(te,ne);return this.draw(re),re}arc(te,ne,re,oe,le,ae,he=!1,de){const ue=this.gen.arc(te,ne,re,oe,le,ae,he,de);return this.draw(ue),ue}curve(te,ne){const re=this.gen.curve(te,ne);return this.draw(re),re}path(te,ne){const re=this.gen.path(te,ne);return this.draw(re),re}}const nt="http://www.w3.org/2000/svg";class ot{constructor(te,ne){this.svg=te,this.gen=new et(ne)}draw(te){const ne=te.sets||[],re=te.options||this.getDefaultOptions(),oe=this.svg.ownerDocument||window.document,le=oe.createElementNS(nt,"g"),ae=te.options.fixedDecimalPlaceDigits;for(const he of ne){let de=null;switch(he.type){case"path":de=oe.createElementNS(nt,"path"),de.setAttribute("d",this.opsToPath(he,ae)),de.setAttribute("stroke",re.stroke),de.setAttribute("stroke-width",re.strokeWidth+""),de.setAttribute("fill","none"),re.strokeLineDash&&de.setAttribute("stroke-dasharray",re.strokeLineDash.join(" ").trim()),re.strokeLineDashOffset&&de.setAttribute("stroke-dashoffset",`${re.strokeLineDashOffset}`);break;case"fillPath":de=oe.createElementNS(nt,"path"),de.setAttribute("d",this.opsToPath(he,ae)),de.setAttribute("stroke","none"),de.setAttribute("stroke-width","0"),de.setAttribute("fill",re.fill||""),te.shape!=="curve"&&te.shape!=="polygon"||de.setAttribute("fill-rule","evenodd");break;case"fillSketch":de=this.fillSketch(oe,he,re)}de&&le.appendChild(de)}return le}fillSketch(te,ne,re){let oe=re.fillWeight;oe<0&&(oe=re.strokeWidth/2);const le=te.createElementNS(nt,"path");return le.setAttribute("d",this.opsToPath(ne,re.fixedDecimalPlaceDigits)),le.setAttribute("stroke",re.fill||""),le.setAttribute("stroke-width",oe+""),le.setAttribute("fill","none"),re.fillLineDash&&le.setAttribute("stroke-dasharray",re.fillLineDash.join(" ").trim()),re.fillLineDashOffset&&le.setAttribute("stroke-dashoffset",`${re.fillLineDashOffset}`),le}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(te,ne){return this.gen.opsToPath(te,ne)}line(te,ne,re,oe,le){const ae=this.gen.line(te,ne,re,oe,le);return this.draw(ae)}rectangle(te,ne,re,oe,le){const ae=this.gen.rectangle(te,ne,re,oe,le);return this.draw(ae)}ellipse(te,ne,re,oe,le){const ae=this.gen.ellipse(te,ne,re,oe,le);return this.draw(ae)}circle(te,ne,re,oe){const le=this.gen.circle(te,ne,re,oe);return this.draw(le)}linearPath(te,ne){const re=this.gen.linearPath(te,ne);return this.draw(re)}polygon(te,ne){const re=this.gen.polygon(te,ne);return this.draw(re)}arc(te,ne,re,oe,le,ae,he=!1,de){const ue=this.gen.arc(te,ne,re,oe,le,ae,he,de);return this.draw(ue)}curve(te,ne){const re=this.gen.curve(te,ne);return this.draw(re)}path(te,ne){const re=this.gen.path(te,ne);return this.draw(re)}}var at={canvas:(ie,te)=>new st(ie,te),svg:(ie,te)=>new ot(ie,te),generator:ie=>new et(ie),newSeed:()=>et.newSeed()},labelHelper=__name(async(ie,te,ne)=>{var fe,ge;let re;const oe=te.useHtmlLabels||evaluate((fe=getConfig2())==null?void 0:fe.htmlLabels);ne?re=ne:re="node default";const le=ie.insert("g").attr("class",re).attr("id",te.domId||te.id),ae=le.insert("g").attr("class","label").attr("style",handleUndefinedAttr(te.labelStyle));let he;te.label===void 0?he="":he=typeof te.label=="string"?te.label:te.label[0];const de=await createText(ae,sanitizeText(decodeEntities(he),getConfig2()),{useHtmlLabels:oe,width:te.width||((ge=getConfig2().flowchart)==null?void 0:ge.wrappingWidth),cssClasses:"markdown-node-label",style:te.labelStyle,addSvgBackground:!!te.icon||!!te.img});let ue=de.getBBox();const pe=((te==null?void 0:te.padding)??0)/2;if(oe){const $e=de.children[0],Te=select(de),Ee=$e.getElementsByTagName("img");if(Ee){const Se=he.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...Ee].map(ve=>new Promise(ke=>{function Re(){if(ve.style.display="flex",ve.style.flexDirection="column",Se){const Ne=getConfig2().fontSize?getConfig2().fontSize:window.getComputedStyle(document.body).fontSize,xe=5,[ze=defaultConfig_default.fontSize]=parseFontSize(Ne),Me=ze*xe+"px";ve.style.minWidth=Me,ve.style.maxWidth=Me}else ve.style.width="100%";ke(ve)}__name(Re,"setupImage"),setTimeout(()=>{ve.complete&&Re()}),ve.addEventListener("error",Re),ve.addEventListener("load",Re)})))}ue=$e.getBoundingClientRect(),Te.attr("width",ue.width),Te.attr("height",ue.height)}return oe?ae.attr("transform","translate("+-ue.width/2+", "+-ue.height/2+")"):ae.attr("transform","translate(0, "+-ue.height/2+")"),te.centerLabel&&ae.attr("transform","translate("+-ue.width/2+", "+-ue.height/2+")"),ae.insert("rect",":first-child"),{shapeSvg:le,bbox:ue,halfPadding:pe,label:ae}},"labelHelper"),insertLabel=__name(async(ie,te,ne)=>{var de,ue,pe,fe,ge,$e;const re=ne.useHtmlLabels||evaluate((ue=(de=getConfig2())==null?void 0:de.flowchart)==null?void 0:ue.htmlLabels),oe=ie.insert("g").attr("class","label").attr("style",ne.labelStyle||""),le=await createText(oe,sanitizeText(decodeEntities(te),getConfig2()),{useHtmlLabels:re,width:ne.width||((fe=(pe=getConfig2())==null?void 0:pe.flowchart)==null?void 0:fe.wrappingWidth),style:ne.labelStyle,addSvgBackground:!!ne.icon||!!ne.img});let ae=le.getBBox();const he=ne.padding/2;if(evaluate(($e=(ge=getConfig2())==null?void 0:ge.flowchart)==null?void 0:$e.htmlLabels)){const Te=le.children[0],Ee=select(le);ae=Te.getBoundingClientRect(),Ee.attr("width",ae.width),Ee.attr("height",ae.height)}return re?oe.attr("transform","translate("+-ae.width/2+", "+-ae.height/2+")"):oe.attr("transform","translate(0, "+-ae.height/2+")"),ne.centerLabel&&oe.attr("transform","translate("+-ae.width/2+", "+-ae.height/2+")"),oe.insert("rect",":first-child"),{shapeSvg:ie,bbox:ae,halfPadding:he,label:oe}},"insertLabel"),updateNodeBounds=__name((ie,te)=>{const ne=te.node().getBBox();ie.width=ne.width,ie.height=ne.height},"updateNodeBounds"),getNodeClasses=__name((ie,te)=>(ie.look==="handDrawn"?"rough-node":"node")+" "+ie.cssClasses+" "+(te||""),"getNodeClasses");function createPathFromPoints(ie){const te=ie.map((ne,re)=>`${re===0?"M":"L"}${ne.x},${ne.y}`);return te.push("Z"),te.join(" ")}__name(createPathFromPoints,"createPathFromPoints");function generateFullSineWavePoints(ie,te,ne,re,oe,le){const ae=[],de=ne-ie,ue=re-te,pe=de/le,fe=2*Math.PI/pe,ge=te+ue/2;for(let $e=0;$e<=50;$e++){const Te=$e/50,Ee=ie+Te*de,Se=ge+oe*Math.sin(fe*(Ee-ie));ae.push({x:Ee,y:Se})}return ae}__name(generateFullSineWavePoints,"generateFullSineWavePoints");function generateCirclePoints(ie,te,ne,re,oe,le){const ae=[],he=oe*Math.PI/180,pe=(le*Math.PI/180-he)/(re-1);for(let fe=0;fe<re;fe++){const ge=he+fe*pe,$e=ie+ne*Math.cos(ge),Te=te+ne*Math.sin(ge);ae.push({x:-$e,y:-Te})}return ae}__name(generateCirclePoints,"generateCirclePoints");var intersectRect=__name((ie,te)=>{var ne=ie.x,re=ie.y,oe=te.x-ne,le=te.y-re,ae=ie.width/2,he=ie.height/2,de,ue;return Math.abs(le)*ae>Math.abs(oe)*he?(le<0&&(he=-he),de=le===0?0:he*oe/le,ue=he):(oe<0&&(ae=-ae),de=ae,ue=oe===0?0:ae*le/oe),{x:ne+de,y:re+ue}},"intersectRect"),intersect_rect_default=intersectRect;function applyStyle(ie,te){te&&ie.attr("style",te)}__name(applyStyle,"applyStyle");async function addHtmlLabel(ie){const te=select(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),ne=te.append("xhtml:div");let re=ie.label;ie.label&&hasKatex(ie.label)&&(re=await renderKatex(ie.label.replace(common_default.lineBreakRegex,`
`),getConfig2()));const oe=ie.isNode?"nodeLabel":"edgeLabel";return ne.html('<span class="'+oe+'" '+(ie.labelStyle?'style="'+ie.labelStyle+'"':"")+">"+re+"</span>"),applyStyle(ne,ie.labelStyle),ne.style("display","inline-block"),ne.style("padding-right","1px"),ne.style("white-space","nowrap"),ne.attr("xmlns","http://www.w3.org/1999/xhtml"),te.node()}__name(addHtmlLabel,"addHtmlLabel");var createLabel=__name(async(ie,te,ne,re)=>{let oe=ie||"";if(typeof oe=="object"&&(oe=oe[0]),evaluate(getConfig2().flowchart.htmlLabels)){oe=oe.replace(/\\n|\n/g,"<br />"),log.info("vertexText"+oe);const le={isNode:re,label:decodeEntities(oe).replace(/fa[blrs]?:fa-[\w-]+/g,he=>`<i class='${he.replace(":"," ")}'></i>`),labelStyle:te&&te.replace("fill:","color:")};return await addHtmlLabel(le)}else{const le=document.createElementNS("http://www.w3.org/2000/svg","text");le.setAttribute("style",te.replace("color:","fill:"));let ae=[];typeof oe=="string"?ae=oe.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(oe)?ae=oe:ae=[];for(const he of ae){const de=document.createElementNS("http://www.w3.org/2000/svg","tspan");de.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),de.setAttribute("dy","1em"),de.setAttribute("x","0"),ne?de.setAttribute("class","title-row"):de.setAttribute("class","row"),de.textContent=he.trim(),le.appendChild(de)}return le}},"createLabel"),createLabel_default=createLabel,createRoundedRectPathD=__name((ie,te,ne,re,oe)=>["M",ie+oe,te,"H",ie+ne-oe,"A",oe,oe,0,0,1,ie+ne,te+oe,"V",te+re-oe,"A",oe,oe,0,0,1,ie+ne-oe,te+re,"H",ie+oe,"A",oe,oe,0,0,1,ie,te+re-oe,"V",te+oe,"A",oe,oe,0,0,1,ie+oe,te,"Z"].join(" "),"createRoundedRectPathD"),solidStateFill=__name(ie=>{const{handDrawnSeed:te}=getConfig2();return{fill:ie,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:ie,seed:te}},"solidStateFill"),compileStyles=__name(ie=>{const te=styles2Map([...ie.cssCompiledStyles||[],...ie.cssStyles||[]]);return{stylesMap:te,stylesArray:[...te]}},"compileStyles"),styles2Map=__name(ie=>{const te=new Map;return ie.forEach(ne=>{const[re,oe]=ne.split(":");te.set(re.trim(),oe==null?void 0:oe.trim())}),te},"styles2Map"),styles2String=__name(ie=>{const{stylesArray:te}=compileStyles(ie),ne=[],re=[],oe=[],le=[];return te.forEach(ae=>{const he=ae[0];he==="color"||he==="font-size"||he==="font-family"||he==="font-weight"||he==="font-style"||he==="text-decoration"||he==="text-align"||he==="text-transform"||he==="line-height"||he==="letter-spacing"||he==="word-spacing"||he==="text-shadow"||he==="text-overflow"||he==="white-space"||he==="word-wrap"||he==="word-break"||he==="overflow-wrap"||he==="hyphens"?ne.push(ae.join(":")+" !important"):(re.push(ae.join(":")+" !important"),he.includes("stroke")&&oe.push(ae.join(":")+" !important"),he==="fill"&&le.push(ae.join(":")+" !important"))}),{labelStyles:ne.join(";"),nodeStyles:re.join(";"),stylesArray:te,borderStyles:oe,backgroundStyles:le}},"styles2String"),userNodeOverrides=__name((ie,te)=>{var de;const{themeVariables:ne,handDrawnSeed:re}=getConfig2(),{nodeBorder:oe,mainBkg:le}=ne,{stylesMap:ae}=compileStyles(ie);return Object.assign({roughness:.7,fill:ae.get("fill")||le,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:ae.get("stroke")||oe,seed:re,strokeWidth:((de=ae.get("stroke-width"))==null?void 0:de.replace("px",""))||1.3,fillLineDash:[0,0]},te)},"userNodeOverrides"),rect=__name(async(ie,te)=>{log.info("Creating subgraph rect for ",te.id,te);const ne=getConfig2(),{themeVariables:re,handDrawnSeed:oe}=ne,{clusterBkg:le,clusterBorder:ae}=re,{labelStyles:he,nodeStyles:de,borderStyles:ue,backgroundStyles:pe}=styles2String(te),fe=ie.insert("g").attr("class","cluster "+te.cssClasses).attr("id",te.id).attr("data-look",te.look),ge=evaluate(ne.flowchart.htmlLabels),$e=fe.insert("g").attr("class","cluster-label "),Te=await createText($e,te.label,{style:te.labelStyle,useHtmlLabels:ge,isNode:!0});let Ee=Te.getBBox();if(evaluate(ne.flowchart.htmlLabels)){const Me=Te.children[0],Ae=select(Te);Ee=Me.getBoundingClientRect(),Ae.attr("width",Ee.width),Ae.attr("height",Ee.height)}const Se=te.width<=Ee.width+te.padding?Ee.width+te.padding:te.width;te.width<=Ee.width+te.padding?te.diff=(Se-te.width)/2-te.padding:te.diff=-te.padding;const ve=te.height,ke=te.x-Se/2,Re=te.y-ve/2;log.trace("Data ",te,JSON.stringify(te));let Ne;if(te.look==="handDrawn"){const Me=at.svg(fe),Ae=userNodeOverrides(te,{roughness:.7,fill:le,stroke:ae,fillWeight:3,seed:oe}),Qe=Me.path(createRoundedRectPathD(ke,Re,Se,ve,0),Ae);Ne=fe.insert(()=>(log.debug("Rough node insert CXC",Qe),Qe),":first-child"),Ne.select("path:nth-child(2)").attr("style",ue.join(";")),Ne.select("path").attr("style",pe.join(";").replace("fill","stroke"))}else Ne=fe.insert("rect",":first-child"),Ne.attr("style",de).attr("rx",te.rx).attr("ry",te.ry).attr("x",ke).attr("y",Re).attr("width",Se).attr("height",ve);const{subGraphTitleTopMargin:xe}=getSubGraphTitleMargins(ne);if($e.attr("transform",`translate(${te.x-Ee.width/2}, ${te.y-te.height/2+xe})`),he){const Me=$e.select("span");Me&&Me.attr("style",he)}const ze=Ne.node().getBBox();return te.offsetX=0,te.width=ze.width,te.height=ze.height,te.offsetY=Ee.height-te.padding/2,te.intersect=function(Me){return intersect_rect_default(te,Me)},{cluster:fe,labelBBox:Ee}},"rect"),noteGroup=__name((ie,te)=>{const ne=ie.insert("g").attr("class","note-cluster").attr("id",te.id),re=ne.insert("rect",":first-child"),oe=0*te.padding,le=oe/2;re.attr("rx",te.rx).attr("ry",te.ry).attr("x",te.x-te.width/2-le).attr("y",te.y-te.height/2-le).attr("width",te.width+oe).attr("height",te.height+oe).attr("fill","none");const ae=re.node().getBBox();return te.width=ae.width,te.height=ae.height,te.intersect=function(he){return intersect_rect_default(te,he)},{cluster:ne,labelBBox:{width:0,height:0}}},"noteGroup"),roundedWithTitle=__name(async(ie,te)=>{const ne=getConfig2(),{themeVariables:re,handDrawnSeed:oe}=ne,{altBackground:le,compositeBackground:ae,compositeTitleBackground:he,nodeBorder:de}=re,ue=ie.insert("g").attr("class",te.cssClasses).attr("id",te.id).attr("data-id",te.id).attr("data-look",te.look),pe=ue.insert("g",":first-child"),fe=ue.insert("g").attr("class","cluster-label");let ge=ue.append("rect");const $e=fe.node().appendChild(await createLabel_default(te.label,te.labelStyle,void 0,!0));let Te=$e.getBBox();if(evaluate(ne.flowchart.htmlLabels)){const Qe=$e.children[0],ht=select($e);Te=Qe.getBoundingClientRect(),ht.attr("width",Te.width),ht.attr("height",Te.height)}const Ee=0*te.padding,Se=Ee/2,ve=(te.width<=Te.width+te.padding?Te.width+te.padding:te.width)+Ee;te.width<=Te.width+te.padding?te.diff=(ve-te.width)/2-te.padding:te.diff=-te.padding;const ke=te.height+Ee,Re=te.height+Ee-Te.height-6,Ne=te.x-ve/2,xe=te.y-ke/2;te.width=ve;const ze=te.y-te.height/2-Se+Te.height+2;let Me;if(te.look==="handDrawn"){const Qe=te.cssClasses.includes("statediagram-cluster-alt"),ht=at.svg(ue),Pe=te.rx||te.ry?ht.path(createRoundedRectPathD(Ne,xe,ve,ke,10),{roughness:.7,fill:he,fillStyle:"solid",stroke:de,seed:oe}):ht.rectangle(Ne,xe,ve,ke,{seed:oe});Me=ue.insert(()=>Pe,":first-child");const _t=ht.rectangle(Ne,ze,ve,Re,{fill:Qe?le:ae,fillStyle:Qe?"hachure":"solid",stroke:de,seed:oe});Me=ue.insert(()=>Pe,":first-child"),ge=ue.insert(()=>_t)}else{Me=pe.insert("rect",":first-child");const Qe="outer";Me.attr("class",Qe).attr("x",Ne).attr("y",xe).attr("width",ve).attr("height",ke).attr("data-look",te.look),ge.attr("class","inner").attr("x",Ne).attr("y",ze).attr("width",ve).attr("height",Re)}fe.attr("transform",`translate(${te.x-Te.width/2}, ${xe+1-(evaluate(ne.flowchart.htmlLabels)?0:3)})`);const Ae=Me.node().getBBox();return te.height=Ae.height,te.offsetX=0,te.offsetY=Te.height-te.padding/2,te.labelBBox=Te,te.intersect=function(Qe){return intersect_rect_default(te,Qe)},{cluster:ue,labelBBox:Te}},"roundedWithTitle"),kanbanSection=__name(async(ie,te)=>{log.info("Creating subgraph rect for ",te.id,te);const ne=getConfig2(),{themeVariables:re,handDrawnSeed:oe}=ne,{clusterBkg:le,clusterBorder:ae}=re,{labelStyles:he,nodeStyles:de,borderStyles:ue,backgroundStyles:pe}=styles2String(te),fe=ie.insert("g").attr("class","cluster "+te.cssClasses).attr("id",te.id).attr("data-look",te.look),ge=evaluate(ne.flowchart.htmlLabels),$e=fe.insert("g").attr("class","cluster-label "),Te=await createText($e,te.label,{style:te.labelStyle,useHtmlLabels:ge,isNode:!0,width:te.width});let Ee=Te.getBBox();if(evaluate(ne.flowchart.htmlLabels)){const Me=Te.children[0],Ae=select(Te);Ee=Me.getBoundingClientRect(),Ae.attr("width",Ee.width),Ae.attr("height",Ee.height)}const Se=te.width<=Ee.width+te.padding?Ee.width+te.padding:te.width;te.width<=Ee.width+te.padding?te.diff=(Se-te.width)/2-te.padding:te.diff=-te.padding;const ve=te.height,ke=te.x-Se/2,Re=te.y-ve/2;log.trace("Data ",te,JSON.stringify(te));let Ne;if(te.look==="handDrawn"){const Me=at.svg(fe),Ae=userNodeOverrides(te,{roughness:.7,fill:le,stroke:ae,fillWeight:4,seed:oe}),Qe=Me.path(createRoundedRectPathD(ke,Re,Se,ve,te.rx),Ae);Ne=fe.insert(()=>(log.debug("Rough node insert CXC",Qe),Qe),":first-child"),Ne.select("path:nth-child(2)").attr("style",ue.join(";")),Ne.select("path").attr("style",pe.join(";").replace("fill","stroke"))}else Ne=fe.insert("rect",":first-child"),Ne.attr("style",de).attr("rx",te.rx).attr("ry",te.ry).attr("x",ke).attr("y",Re).attr("width",Se).attr("height",ve);const{subGraphTitleTopMargin:xe}=getSubGraphTitleMargins(ne);if($e.attr("transform",`translate(${te.x-Ee.width/2}, ${te.y-te.height/2+xe})`),he){const Me=$e.select("span");Me&&Me.attr("style",he)}const ze=Ne.node().getBBox();return te.offsetX=0,te.width=ze.width,te.height=ze.height,te.offsetY=Ee.height-te.padding/2,te.intersect=function(Me){return intersect_rect_default(te,Me)},{cluster:fe,labelBBox:Ee}},"kanbanSection"),divider=__name((ie,te)=>{const ne=getConfig2(),{themeVariables:re,handDrawnSeed:oe}=ne,{nodeBorder:le}=re,ae=ie.insert("g").attr("class",te.cssClasses).attr("id",te.id).attr("data-look",te.look),he=ae.insert("g",":first-child"),de=0*te.padding,ue=te.width+de;te.diff=-te.padding;const pe=te.height+de,fe=te.x-ue/2,ge=te.y-pe/2;te.width=ue;let $e;if(te.look==="handDrawn"){const Se=at.svg(ae).rectangle(fe,ge,ue,pe,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:le,seed:oe});$e=ae.insert(()=>Se,":first-child")}else{$e=he.insert("rect",":first-child");const Ee="divider";$e.attr("class",Ee).attr("x",fe).attr("y",ge).attr("width",ue).attr("height",pe).attr("data-look",te.look)}const Te=$e.node().getBBox();return te.height=Te.height,te.offsetX=0,te.offsetY=0,te.intersect=function(Ee){return intersect_rect_default(te,Ee)},{cluster:ae,labelBBox:{}}},"divider"),squareRect=rect,shapes={rect,squareRect,roundedWithTitle,noteGroup,divider,kanbanSection},clusterElems=new Map,insertCluster=__name(async(ie,te)=>{const ne=te.shape||"rect",re=await shapes[ne](ie,te);return clusterElems.set(te.id,re),re},"insertCluster"),clear$1=__name(()=>{clusterElems=new Map},"clear");function intersectNode(ie,te){return ie.intersect(te)}__name(intersectNode,"intersectNode");var intersect_node_default=intersectNode;function intersectEllipse(ie,te,ne,re){var oe=ie.x,le=ie.y,ae=oe-re.x,he=le-re.y,de=Math.sqrt(te*te*he*he+ne*ne*ae*ae),ue=Math.abs(te*ne*ae/de);re.x<oe&&(ue=-ue);var pe=Math.abs(te*ne*he/de);return re.y<le&&(pe=-pe),{x:oe+ue,y:le+pe}}__name(intersectEllipse,"intersectEllipse");var intersect_ellipse_default=intersectEllipse;function intersectCircle(ie,te,ne){return intersect_ellipse_default(ie,te,te,ne)}__name(intersectCircle,"intersectCircle");var intersect_circle_default=intersectCircle;function intersectLine(ie,te,ne,re){var oe,le,ae,he,de,ue,pe,fe,ge,$e,Te,Ee,Se,ve,ke;if(oe=te.y-ie.y,ae=ie.x-te.x,de=te.x*ie.y-ie.x*te.y,ge=oe*ne.x+ae*ne.y+de,$e=oe*re.x+ae*re.y+de,!(ge!==0&&$e!==0&&sameSign(ge,$e))&&(le=re.y-ne.y,he=ne.x-re.x,ue=re.x*ne.y-ne.x*re.y,pe=le*ie.x+he*ie.y+ue,fe=le*te.x+he*te.y+ue,!(pe!==0&&fe!==0&&sameSign(pe,fe))&&(Te=oe*he-le*ae,Te!==0)))return Ee=Math.abs(Te/2),Se=ae*ue-he*de,ve=Se<0?(Se-Ee)/Te:(Se+Ee)/Te,Se=le*de-oe*ue,ke=Se<0?(Se-Ee)/Te:(Se+Ee)/Te,{x:ve,y:ke}}__name(intersectLine,"intersectLine");function sameSign(ie,te){return ie*te>0}__name(sameSign,"sameSign");var intersect_line_default=intersectLine;function intersectPolygon(ie,te,ne){let re=ie.x,oe=ie.y,le=[],ae=Number.POSITIVE_INFINITY,he=Number.POSITIVE_INFINITY;typeof te.forEach=="function"?te.forEach(function(pe){ae=Math.min(ae,pe.x),he=Math.min(he,pe.y)}):(ae=Math.min(ae,te.x),he=Math.min(he,te.y));let de=re-ie.width/2-ae,ue=oe-ie.height/2-he;for(let pe=0;pe<te.length;pe++){let fe=te[pe],ge=te[pe<te.length-1?pe+1:0],$e=intersect_line_default(ie,ne,{x:de+fe.x,y:ue+fe.y},{x:de+ge.x,y:ue+ge.y});$e&&le.push($e)}return le.length?(le.length>1&&le.sort(function(pe,fe){let ge=pe.x-ne.x,$e=pe.y-ne.y,Te=Math.sqrt(ge*ge+$e*$e),Ee=fe.x-ne.x,Se=fe.y-ne.y,ve=Math.sqrt(Ee*Ee+Se*Se);return Te<ve?-1:Te===ve?0:1}),le[0]):ie}__name(intersectPolygon,"intersectPolygon");var intersect_polygon_default=intersectPolygon,intersect_default={node:intersect_node_default,circle:intersect_circle_default,ellipse:intersect_ellipse_default,polygon:intersect_polygon_default,rect:intersect_rect_default};function anchor(ie,te){const{labelStyles:ne}=styles2String(te);te.labelStyle=ne;const re=getNodeClasses(te);let oe=re;re||(oe="anchor");const le=ie.insert("g").attr("class",oe).attr("id",te.domId||te.id),ae=1,{cssStyles:he}=te,de=at.svg(le),ue=userNodeOverrides(te,{fill:"black",stroke:"none",fillStyle:"solid"});te.look!=="handDrawn"&&(ue.roughness=0);const pe=de.circle(0,0,ae*2,ue),fe=le.insert(()=>pe,":first-child");return fe.attr("class","anchor").attr("style",handleUndefinedAttr(he)),updateNodeBounds(te,fe),te.intersect=function(ge){return log.info("Circle intersect",te,ae,ge),intersect_default.circle(te,ae,ge)},le}__name(anchor,"anchor");function generateArcPoints(ie,te,ne,re,oe,le,ae){const de=(ie+ne)/2,ue=(te+re)/2,pe=Math.atan2(re-te,ne-ie),fe=(ne-ie)/2,ge=(re-te)/2,$e=fe/oe,Te=ge/le,Ee=Math.sqrt($e**2+Te**2);if(Ee>1)throw new Error("The given radii are too small to create an arc between the points.");const Se=Math.sqrt(1-Ee**2),ve=de+Se*le*Math.sin(pe)*(ae?-1:1),ke=ue-Se*oe*Math.cos(pe)*(ae?-1:1),Re=Math.atan2((te-ke)/le,(ie-ve)/oe);let xe=Math.atan2((re-ke)/le,(ne-ve)/oe)-Re;ae&&xe<0&&(xe+=2*Math.PI),!ae&&xe>0&&(xe-=2*Math.PI);const ze=[];for(let Me=0;Me<20;Me++){const Ae=Me/19,Qe=Re+Ae*xe,ht=ve+oe*Math.cos(Qe),Pe=ke+le*Math.sin(Qe);ze.push({x:ht,y:Pe})}return ze}__name(generateArcPoints,"generateArcPoints");async function bowTieRect(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le}=await labelHelper(ie,te,getNodeClasses(te)),ae=le.width+te.padding+20,he=le.height+te.padding,de=he/2,ue=de/(2.5+he/50),{cssStyles:pe}=te,fe=[{x:ae/2,y:-he/2},{x:-ae/2,y:-he/2},...generateArcPoints(-ae/2,-he/2,-ae/2,he/2,ue,de,!1),{x:ae/2,y:he/2},...generateArcPoints(ae/2,he/2,ae/2,-he/2,ue,de,!0)],ge=at.svg(oe),$e=userNodeOverrides(te,{});te.look!=="handDrawn"&&($e.roughness=0,$e.fillStyle="solid");const Te=createPathFromPoints(fe),Ee=ge.path(Te,$e),Se=oe.insert(()=>Ee,":first-child");return Se.attr("class","basic label-container"),pe&&te.look!=="handDrawn"&&Se.selectAll("path").attr("style",pe),re&&te.look!=="handDrawn"&&Se.selectAll("path").attr("style",re),Se.attr("transform",`translate(${ue/2}, 0)`),updateNodeBounds(te,Se),te.intersect=function(ve){return intersect_default.polygon(te,fe,ve)},oe}__name(bowTieRect,"bowTieRect");function insertPolygonShape(ie,te,ne,re){return ie.insert("polygon",":first-child").attr("points",re.map(function(oe){return oe.x+","+oe.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-te/2+","+ne/2+")")}__name(insertPolygonShape,"insertPolygonShape");async function card(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le}=await labelHelper(ie,te,getNodeClasses(te)),ae=le.height+te.padding,he=12,de=le.width+te.padding+he,ue=0,pe=de,fe=-ae,ge=0,$e=[{x:ue+he,y:fe},{x:pe,y:fe},{x:pe,y:ge},{x:ue,y:ge},{x:ue,y:fe+he},{x:ue+he,y:fe}];let Te;const{cssStyles:Ee}=te;if(te.look==="handDrawn"){const Se=at.svg(oe),ve=userNodeOverrides(te,{}),ke=createPathFromPoints($e),Re=Se.path(ke,ve);Te=oe.insert(()=>Re,":first-child").attr("transform",`translate(${-de/2}, ${ae/2})`),Ee&&Te.attr("style",Ee)}else Te=insertPolygonShape(oe,de,ae,$e);return re&&Te.attr("style",re),updateNodeBounds(te,Te),te.intersect=function(Se){return intersect_default.polygon(te,$e,Se)},oe}__name(card,"card");function choice(ie,te){const{nodeStyles:ne}=styles2String(te);te.label="";const re=ie.insert("g").attr("class",getNodeClasses(te)).attr("id",te.domId??te.id),{cssStyles:oe}=te,le=Math.max(28,te.width??0),ae=[{x:0,y:le/2},{x:le/2,y:0},{x:0,y:-le/2},{x:-le/2,y:0}],he=at.svg(re),de=userNodeOverrides(te,{});te.look!=="handDrawn"&&(de.roughness=0,de.fillStyle="solid");const ue=createPathFromPoints(ae),pe=he.path(ue,de),fe=re.insert(()=>pe,":first-child");return oe&&te.look!=="handDrawn"&&fe.selectAll("path").attr("style",oe),ne&&te.look!=="handDrawn"&&fe.selectAll("path").attr("style",ne),te.width=28,te.height=28,te.intersect=function(ge){return intersect_default.polygon(te,ae,ge)},re}__name(choice,"choice");async function circle$1(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le,halfPadding:ae}=await labelHelper(ie,te,getNodeClasses(te)),he=le.width/2+ae;let de;const{cssStyles:ue}=te;if(te.look==="handDrawn"){const pe=at.svg(oe),fe=userNodeOverrides(te,{}),ge=pe.circle(0,0,he*2,fe);de=oe.insert(()=>ge,":first-child"),de.attr("class","basic label-container").attr("style",handleUndefinedAttr(ue))}else de=oe.insert("circle",":first-child").attr("class","basic label-container").attr("style",re).attr("r",he).attr("cx",0).attr("cy",0);return updateNodeBounds(te,de),te.intersect=function(pe){return log.info("Circle intersect",te,he,pe),intersect_default.circle(te,he,pe)},oe}__name(circle$1,"circle");function createLine(ie){const te=Math.cos(Math.PI/4),ne=Math.sin(Math.PI/4),re=ie*2,oe={x:re/2*te,y:re/2*ne},le={x:-(re/2)*te,y:re/2*ne},ae={x:-(re/2)*te,y:-(re/2)*ne},he={x:re/2*te,y:-(re/2)*ne};return`M ${le.x},${le.y} L ${he.x},${he.y}
                   M ${oe.x},${oe.y} L ${ae.x},${ae.y}`}__name(createLine,"createLine");function crossedCircle(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne,te.label="";const oe=ie.insert("g").attr("class",getNodeClasses(te)).attr("id",te.domId??te.id),le=Math.max(30,(te==null?void 0:te.width)??0),{cssStyles:ae}=te,he=at.svg(oe),de=userNodeOverrides(te,{});te.look!=="handDrawn"&&(de.roughness=0,de.fillStyle="solid");const ue=he.circle(0,0,le*2,de),pe=createLine(le),fe=he.path(pe,de),ge=oe.insert(()=>ue,":first-child");return ge.insert(()=>fe),ae&&te.look!=="handDrawn"&&ge.selectAll("path").attr("style",ae),re&&te.look!=="handDrawn"&&ge.selectAll("path").attr("style",re),updateNodeBounds(te,ge),te.intersect=function($e){return log.info("crossedCircle intersect",te,{radius:le,point:$e}),intersect_default.circle(te,le,$e)},oe}__name(crossedCircle,"crossedCircle");function generateCirclePoints2(ie,te,ne,re=100,oe=0,le=180){const ae=[],he=oe*Math.PI/180,pe=(le*Math.PI/180-he)/(re-1);for(let fe=0;fe<re;fe++){const ge=he+fe*pe,$e=ie+ne*Math.cos(ge),Te=te+ne*Math.sin(ge);ae.push({x:-$e,y:-Te})}return ae}__name(generateCirclePoints2,"generateCirclePoints");async function curlyBraceLeft(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le,label:ae}=await labelHelper(ie,te,getNodeClasses(te)),he=le.width+(te.padding??0),de=le.height+(te.padding??0),ue=Math.max(5,de*.1),{cssStyles:pe}=te,fe=[...generateCirclePoints2(he/2,-de/2,ue,30,-90,0),{x:-he/2-ue,y:ue},...generateCirclePoints2(he/2+ue*2,-ue,ue,20,-180,-270),...generateCirclePoints2(he/2+ue*2,ue,ue,20,-90,-180),{x:-he/2-ue,y:-de/2},...generateCirclePoints2(he/2,de/2,ue,20,0,90)],ge=[{x:he/2,y:-de/2-ue},{x:-he/2,y:-de/2-ue},...generateCirclePoints2(he/2,-de/2,ue,20,-90,0),{x:-he/2-ue,y:-ue},...generateCirclePoints2(he/2+he*.1,-ue,ue,20,-180,-270),...generateCirclePoints2(he/2+he*.1,ue,ue,20,-90,-180),{x:-he/2-ue,y:de/2},...generateCirclePoints2(he/2,de/2,ue,20,0,90),{x:-he/2,y:de/2+ue},{x:he/2,y:de/2+ue}],$e=at.svg(oe),Te=userNodeOverrides(te,{fill:"none"});te.look!=="handDrawn"&&(Te.roughness=0,Te.fillStyle="solid");const Se=createPathFromPoints(fe).replace("Z",""),ve=$e.path(Se,Te),ke=createPathFromPoints(ge),Re=$e.path(ke,{...Te}),Ne=oe.insert("g",":first-child");return Ne.insert(()=>Re,":first-child").attr("stroke-opacity",0),Ne.insert(()=>ve,":first-child"),Ne.attr("class","text"),pe&&te.look!=="handDrawn"&&Ne.selectAll("path").attr("style",pe),re&&te.look!=="handDrawn"&&Ne.selectAll("path").attr("style",re),Ne.attr("transform",`translate(${ue}, 0)`),ae.attr("transform",`translate(${-he/2+ue-(le.x-(le.left??0))},${-de/2+(te.padding??0)/2-(le.y-(le.top??0))})`),updateNodeBounds(te,Ne),te.intersect=function(xe){return intersect_default.polygon(te,ge,xe)},oe}__name(curlyBraceLeft,"curlyBraceLeft");function generateCirclePoints3(ie,te,ne,re=100,oe=0,le=180){const ae=[],he=oe*Math.PI/180,pe=(le*Math.PI/180-he)/(re-1);for(let fe=0;fe<re;fe++){const ge=he+fe*pe,$e=ie+ne*Math.cos(ge),Te=te+ne*Math.sin(ge);ae.push({x:$e,y:Te})}return ae}__name(generateCirclePoints3,"generateCirclePoints");async function curlyBraceRight(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le,label:ae}=await labelHelper(ie,te,getNodeClasses(te)),he=le.width+(te.padding??0),de=le.height+(te.padding??0),ue=Math.max(5,de*.1),{cssStyles:pe}=te,fe=[...generateCirclePoints3(he/2,-de/2,ue,20,-90,0),{x:he/2+ue,y:-ue},...generateCirclePoints3(he/2+ue*2,-ue,ue,20,-180,-270),...generateCirclePoints3(he/2+ue*2,ue,ue,20,-90,-180),{x:he/2+ue,y:de/2},...generateCirclePoints3(he/2,de/2,ue,20,0,90)],ge=[{x:-he/2,y:-de/2-ue},{x:he/2,y:-de/2-ue},...generateCirclePoints3(he/2,-de/2,ue,20,-90,0),{x:he/2+ue,y:-ue},...generateCirclePoints3(he/2+ue*2,-ue,ue,20,-180,-270),...generateCirclePoints3(he/2+ue*2,ue,ue,20,-90,-180),{x:he/2+ue,y:de/2},...generateCirclePoints3(he/2,de/2,ue,20,0,90),{x:he/2,y:de/2+ue},{x:-he/2,y:de/2+ue}],$e=at.svg(oe),Te=userNodeOverrides(te,{fill:"none"});te.look!=="handDrawn"&&(Te.roughness=0,Te.fillStyle="solid");const Se=createPathFromPoints(fe).replace("Z",""),ve=$e.path(Se,Te),ke=createPathFromPoints(ge),Re=$e.path(ke,{...Te}),Ne=oe.insert("g",":first-child");return Ne.insert(()=>Re,":first-child").attr("stroke-opacity",0),Ne.insert(()=>ve,":first-child"),Ne.attr("class","text"),pe&&te.look!=="handDrawn"&&Ne.selectAll("path").attr("style",pe),re&&te.look!=="handDrawn"&&Ne.selectAll("path").attr("style",re),Ne.attr("transform",`translate(${-ue}, 0)`),ae.attr("transform",`translate(${-he/2+(te.padding??0)/2-(le.x-(le.left??0))},${-de/2+(te.padding??0)/2-(le.y-(le.top??0))})`),updateNodeBounds(te,Ne),te.intersect=function(xe){return intersect_default.polygon(te,ge,xe)},oe}__name(curlyBraceRight,"curlyBraceRight");function generateCirclePoints4(ie,te,ne,re=100,oe=0,le=180){const ae=[],he=oe*Math.PI/180,pe=(le*Math.PI/180-he)/(re-1);for(let fe=0;fe<re;fe++){const ge=he+fe*pe,$e=ie+ne*Math.cos(ge),Te=te+ne*Math.sin(ge);ae.push({x:-$e,y:-Te})}return ae}__name(generateCirclePoints4,"generateCirclePoints");async function curlyBraces(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le,label:ae}=await labelHelper(ie,te,getNodeClasses(te)),he=le.width+(te.padding??0),de=le.height+(te.padding??0),ue=Math.max(5,de*.1),{cssStyles:pe}=te,fe=[...generateCirclePoints4(he/2,-de/2,ue,30,-90,0),{x:-he/2-ue,y:ue},...generateCirclePoints4(he/2+ue*2,-ue,ue,20,-180,-270),...generateCirclePoints4(he/2+ue*2,ue,ue,20,-90,-180),{x:-he/2-ue,y:-de/2},...generateCirclePoints4(he/2,de/2,ue,20,0,90)],ge=[...generateCirclePoints4(-he/2+ue+ue/2,-de/2,ue,20,-90,-180),{x:he/2-ue/2,y:ue},...generateCirclePoints4(-he/2-ue/2,-ue,ue,20,0,90),...generateCirclePoints4(-he/2-ue/2,ue,ue,20,-90,0),{x:he/2-ue/2,y:-ue},...generateCirclePoints4(-he/2+ue+ue/2,de/2,ue,30,-180,-270)],$e=[{x:he/2,y:-de/2-ue},{x:-he/2,y:-de/2-ue},...generateCirclePoints4(he/2,-de/2,ue,20,-90,0),{x:-he/2-ue,y:-ue},...generateCirclePoints4(he/2+ue*2,-ue,ue,20,-180,-270),...generateCirclePoints4(he/2+ue*2,ue,ue,20,-90,-180),{x:-he/2-ue,y:de/2},...generateCirclePoints4(he/2,de/2,ue,20,0,90),{x:-he/2,y:de/2+ue},{x:he/2-ue-ue/2,y:de/2+ue},...generateCirclePoints4(-he/2+ue+ue/2,-de/2,ue,20,-90,-180),{x:he/2-ue/2,y:ue},...generateCirclePoints4(-he/2-ue/2,-ue,ue,20,0,90),...generateCirclePoints4(-he/2-ue/2,ue,ue,20,-90,0),{x:he/2-ue/2,y:-ue},...generateCirclePoints4(-he/2+ue+ue/2,de/2,ue,30,-180,-270)],Te=at.svg(oe),Ee=userNodeOverrides(te,{fill:"none"});te.look!=="handDrawn"&&(Ee.roughness=0,Ee.fillStyle="solid");const ve=createPathFromPoints(fe).replace("Z",""),ke=Te.path(ve,Ee),Ne=createPathFromPoints(ge).replace("Z",""),xe=Te.path(Ne,Ee),ze=createPathFromPoints($e),Me=Te.path(ze,{...Ee}),Ae=oe.insert("g",":first-child");return Ae.insert(()=>Me,":first-child").attr("stroke-opacity",0),Ae.insert(()=>ke,":first-child"),Ae.insert(()=>xe,":first-child"),Ae.attr("class","text"),pe&&te.look!=="handDrawn"&&Ae.selectAll("path").attr("style",pe),re&&te.look!=="handDrawn"&&Ae.selectAll("path").attr("style",re),Ae.attr("transform",`translate(${ue-ue/4}, 0)`),ae.attr("transform",`translate(${-he/2+(te.padding??0)/2-(le.x-(le.left??0))},${-de/2+(te.padding??0)/2-(le.y-(le.top??0))})`),updateNodeBounds(te,Ae),te.intersect=function(Qe){return intersect_default.polygon(te,$e,Qe)},oe}__name(curlyBraces,"curlyBraces");async function curvedTrapezoid(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le}=await labelHelper(ie,te,getNodeClasses(te)),ae=80,he=20,de=Math.max(ae,(le.width+(te.padding??0)*2)*1.25,(te==null?void 0:te.width)??0),ue=Math.max(he,le.height+(te.padding??0)*2,(te==null?void 0:te.height)??0),pe=ue/2,{cssStyles:fe}=te,ge=at.svg(oe),$e=userNodeOverrides(te,{});te.look!=="handDrawn"&&($e.roughness=0,$e.fillStyle="solid");const Te=de,Ee=ue,Se=Te-pe,ve=Ee/4,ke=[{x:Se,y:0},{x:ve,y:0},{x:0,y:Ee/2},{x:ve,y:Ee},{x:Se,y:Ee},...generateCirclePoints(-Se,-Ee/2,pe,50,270,90)],Re=createPathFromPoints(ke),Ne=ge.path(Re,$e),xe=oe.insert(()=>Ne,":first-child");return xe.attr("class","basic label-container"),fe&&te.look!=="handDrawn"&&xe.selectChildren("path").attr("style",fe),re&&te.look!=="handDrawn"&&xe.selectChildren("path").attr("style",re),xe.attr("transform",`translate(${-de/2}, ${-ue/2})`),updateNodeBounds(te,xe),te.intersect=function(ze){return intersect_default.polygon(te,ke,ze)},oe}__name(curvedTrapezoid,"curvedTrapezoid");var createCylinderPathD=__name((ie,te,ne,re,oe,le)=>[`M${ie},${te+le}`,`a${oe},${le} 0,0,0 ${ne},0`,`a${oe},${le} 0,0,0 ${-ne},0`,`l0,${re}`,`a${oe},${le} 0,0,0 ${ne},0`,`l0,${-re}`].join(" "),"createCylinderPathD"),createOuterCylinderPathD=__name((ie,te,ne,re,oe,le)=>[`M${ie},${te+le}`,`M${ie+ne},${te+le}`,`a${oe},${le} 0,0,0 ${-ne},0`,`l0,${re}`,`a${oe},${le} 0,0,0 ${ne},0`,`l0,${-re}`].join(" "),"createOuterCylinderPathD"),createInnerCylinderPathD=__name((ie,te,ne,re,oe,le)=>[`M${ie-ne/2},${-re/2}`,`a${oe},${le} 0,0,0 ${ne},0`].join(" "),"createInnerCylinderPathD");async function cylinder(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le,label:ae}=await labelHelper(ie,te,getNodeClasses(te)),he=Math.max(le.width+te.padding,te.width??0),de=he/2,ue=de/(2.5+he/50),pe=Math.max(le.height+ue+te.padding,te.height??0);let fe;const{cssStyles:ge}=te;if(te.look==="handDrawn"){const $e=at.svg(oe),Te=createOuterCylinderPathD(0,0,he,pe,de,ue),Ee=createInnerCylinderPathD(0,ue,he,pe,de,ue),Se=$e.path(Te,userNodeOverrides(te,{})),ve=$e.path(Ee,userNodeOverrides(te,{fill:"none"}));fe=oe.insert(()=>ve,":first-child"),fe=oe.insert(()=>Se,":first-child"),fe.attr("class","basic label-container"),ge&&fe.attr("style",ge)}else{const $e=createCylinderPathD(0,0,he,pe,de,ue);fe=oe.insert("path",":first-child").attr("d",$e).attr("class","basic label-container").attr("style",handleUndefinedAttr(ge)).attr("style",re)}return fe.attr("label-offset-y",ue),fe.attr("transform",`translate(${-he/2}, ${-(pe/2+ue)})`),updateNodeBounds(te,fe),ae.attr("transform",`translate(${-(le.width/2)-(le.x-(le.left??0))}, ${-(le.height/2)+(te.padding??0)/1.5-(le.y-(le.top??0))})`),te.intersect=function($e){const Te=intersect_default.rect(te,$e),Ee=Te.x-(te.x??0);if(de!=0&&(Math.abs(Ee)<(te.width??0)/2||Math.abs(Ee)==(te.width??0)/2&&Math.abs(Te.y-(te.y??0))>(te.height??0)/2-ue)){let Se=ue*ue*(1-Ee*Ee/(de*de));Se>0&&(Se=Math.sqrt(Se)),Se=ue-Se,$e.y-(te.y??0)>0&&(Se=-Se),Te.y+=Se}return Te},oe}__name(cylinder,"cylinder");async function dividedRectangle(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le,label:ae}=await labelHelper(ie,te,getNodeClasses(te)),he=le.width+te.padding,de=le.height+te.padding,ue=de*.2,pe=-he/2,fe=-de/2-ue/2,{cssStyles:ge}=te,$e=at.svg(oe),Te=userNodeOverrides(te,{});te.look!=="handDrawn"&&(Te.roughness=0,Te.fillStyle="solid");const Ee=[{x:pe,y:fe+ue},{x:-pe,y:fe+ue},{x:-pe,y:-fe},{x:pe,y:-fe},{x:pe,y:fe},{x:-pe,y:fe},{x:-pe,y:fe+ue}],Se=$e.polygon(Ee.map(ke=>[ke.x,ke.y]),Te),ve=oe.insert(()=>Se,":first-child");return ve.attr("class","basic label-container"),ge&&te.look!=="handDrawn"&&ve.selectAll("path").attr("style",ge),re&&te.look!=="handDrawn"&&ve.selectAll("path").attr("style",re),ae.attr("transform",`translate(${pe+(te.padding??0)/2-(le.x-(le.left??0))}, ${fe+ue+(te.padding??0)/2-(le.y-(le.top??0))})`),updateNodeBounds(te,ve),te.intersect=function(ke){return intersect_default.rect(te,ke)},oe}__name(dividedRectangle,"dividedRectangle");async function doublecircle(ie,te){var ge,$e;const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le,halfPadding:ae}=await labelHelper(ie,te,getNodeClasses(te)),he=5,de=le.width/2+ae+he,ue=le.width/2+ae;let pe;const{cssStyles:fe}=te;if(te.look==="handDrawn"){const Te=at.svg(oe),Ee=userNodeOverrides(te,{roughness:.2,strokeWidth:2.5}),Se=userNodeOverrides(te,{roughness:.2,strokeWidth:1.5}),ve=Te.circle(0,0,de*2,Ee),ke=Te.circle(0,0,ue*2,Se);pe=oe.insert("g",":first-child"),pe.attr("class",handleUndefinedAttr(te.cssClasses)).attr("style",handleUndefinedAttr(fe)),(ge=pe.node())==null||ge.appendChild(ve),($e=pe.node())==null||$e.appendChild(ke)}else{pe=oe.insert("g",":first-child");const Te=pe.insert("circle",":first-child"),Ee=pe.insert("circle");pe.attr("class","basic label-container").attr("style",re),Te.attr("class","outer-circle").attr("style",re).attr("r",de).attr("cx",0).attr("cy",0),Ee.attr("class","inner-circle").attr("style",re).attr("r",ue).attr("cx",0).attr("cy",0)}return updateNodeBounds(te,pe),te.intersect=function(Te){return log.info("DoubleCircle intersect",te,de,Te),intersect_default.circle(te,de,Te)},oe}__name(doublecircle,"doublecircle");function filledCircle(ie,te,{config:{themeVariables:ne}}){const{labelStyles:re,nodeStyles:oe}=styles2String(te);te.label="",te.labelStyle=re;const le=ie.insert("g").attr("class",getNodeClasses(te)).attr("id",te.domId??te.id),ae=7,{cssStyles:he}=te,de=at.svg(le),{nodeBorder:ue}=ne,pe=userNodeOverrides(te,{fillStyle:"solid"});te.look!=="handDrawn"&&(pe.roughness=0);const fe=de.circle(0,0,ae*2,pe),ge=le.insert(()=>fe,":first-child");return ge.selectAll("path").attr("style",`fill: ${ue} !important;`),he&&he.length>0&&te.look!=="handDrawn"&&ge.selectAll("path").attr("style",he),oe&&te.look!=="handDrawn"&&ge.selectAll("path").attr("style",oe),updateNodeBounds(te,ge),te.intersect=function($e){return log.info("filledCircle intersect",te,{radius:ae,point:$e}),intersect_default.circle(te,ae,$e)},le}__name(filledCircle,"filledCircle");async function flippedTriangle(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le,label:ae}=await labelHelper(ie,te,getNodeClasses(te)),he=le.width+(te.padding??0),de=he+le.height,ue=he+le.height,pe=[{x:0,y:-de},{x:ue,y:-de},{x:ue/2,y:0}],{cssStyles:fe}=te,ge=at.svg(oe),$e=userNodeOverrides(te,{});te.look!=="handDrawn"&&($e.roughness=0,$e.fillStyle="solid");const Te=createPathFromPoints(pe),Ee=ge.path(Te,$e),Se=oe.insert(()=>Ee,":first-child").attr("transform",`translate(${-de/2}, ${de/2})`);return fe&&te.look!=="handDrawn"&&Se.selectChildren("path").attr("style",fe),re&&te.look!=="handDrawn"&&Se.selectChildren("path").attr("style",re),te.width=he,te.height=de,updateNodeBounds(te,Se),ae.attr("transform",`translate(${-le.width/2-(le.x-(le.left??0))}, ${-de/2+(te.padding??0)/2+(le.y-(le.top??0))})`),te.intersect=function(ve){return log.info("Triangle intersect",te,pe,ve),intersect_default.polygon(te,pe,ve)},oe}__name(flippedTriangle,"flippedTriangle");function forkJoin(ie,te,{dir:ne,config:{state:re,themeVariables:oe}}){const{nodeStyles:le}=styles2String(te);te.label="";const ae=ie.insert("g").attr("class",getNodeClasses(te)).attr("id",te.domId??te.id),{cssStyles:he}=te;let de=Math.max(70,(te==null?void 0:te.width)??0),ue=Math.max(10,(te==null?void 0:te.height)??0);ne==="LR"&&(de=Math.max(10,(te==null?void 0:te.width)??0),ue=Math.max(70,(te==null?void 0:te.height)??0));const pe=-1*de/2,fe=-1*ue/2,ge=at.svg(ae),$e=userNodeOverrides(te,{stroke:oe.lineColor,fill:oe.lineColor});te.look!=="handDrawn"&&($e.roughness=0,$e.fillStyle="solid");const Te=ge.rectangle(pe,fe,de,ue,$e),Ee=ae.insert(()=>Te,":first-child");he&&te.look!=="handDrawn"&&Ee.selectAll("path").attr("style",he),le&&te.look!=="handDrawn"&&Ee.selectAll("path").attr("style",le),updateNodeBounds(te,Ee);const Se=(re==null?void 0:re.padding)??0;return te.width&&te.height&&(te.width+=Se/2||0,te.height+=Se/2||0),te.intersect=function(ve){return intersect_default.rect(te,ve)},ae}__name(forkJoin,"forkJoin");async function halfRoundedRectangle(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const oe=80,le=50,{shapeSvg:ae,bbox:he}=await labelHelper(ie,te,getNodeClasses(te)),de=Math.max(oe,he.width+(te.padding??0)*2,(te==null?void 0:te.width)??0),ue=Math.max(le,he.height+(te.padding??0)*2,(te==null?void 0:te.height)??0),pe=ue/2,{cssStyles:fe}=te,ge=at.svg(ae),$e=userNodeOverrides(te,{});te.look!=="handDrawn"&&($e.roughness=0,$e.fillStyle="solid");const Te=[{x:-de/2,y:-ue/2},{x:de/2-pe,y:-ue/2},...generateCirclePoints(-de/2+pe,0,pe,50,90,270),{x:de/2-pe,y:ue/2},{x:-de/2,y:ue/2}],Ee=createPathFromPoints(Te),Se=ge.path(Ee,$e),ve=ae.insert(()=>Se,":first-child");return ve.attr("class","basic label-container"),fe&&te.look!=="handDrawn"&&ve.selectChildren("path").attr("style",fe),re&&te.look!=="handDrawn"&&ve.selectChildren("path").attr("style",re),updateNodeBounds(te,ve),te.intersect=function(ke){return log.info("Pill intersect",te,{radius:pe,point:ke}),intersect_default.polygon(te,Te,ke)},ae}__name(halfRoundedRectangle,"halfRoundedRectangle");var createHexagonPathD=__name((ie,te,ne,re,oe)=>[`M${ie+oe},${te}`,`L${ie+ne-oe},${te}`,`L${ie+ne},${te-re/2}`,`L${ie+ne-oe},${te-re}`,`L${ie+oe},${te-re}`,`L${ie},${te-re/2}`,"Z"].join(" "),"createHexagonPathD");async function hexagon(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le}=await labelHelper(ie,te,getNodeClasses(te)),ae=4,he=le.height+te.padding,de=he/ae,ue=le.width+2*de+te.padding,pe=[{x:de,y:0},{x:ue-de,y:0},{x:ue,y:-he/2},{x:ue-de,y:-he},{x:de,y:-he},{x:0,y:-he/2}];let fe;const{cssStyles:ge}=te;if(te.look==="handDrawn"){const $e=at.svg(oe),Te=userNodeOverrides(te,{}),Ee=createHexagonPathD(0,0,ue,he,de),Se=$e.path(Ee,Te);fe=oe.insert(()=>Se,":first-child").attr("transform",`translate(${-ue/2}, ${he/2})`),ge&&fe.attr("style",ge)}else fe=insertPolygonShape(oe,ue,he,pe);return re&&fe.attr("style",re),te.width=ue,te.height=he,updateNodeBounds(te,fe),te.intersect=function($e){return intersect_default.polygon(te,pe,$e)},oe}__name(hexagon,"hexagon");async function hourglass(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.label="",te.labelStyle=ne;const{shapeSvg:oe}=await labelHelper(ie,te,getNodeClasses(te)),le=Math.max(30,(te==null?void 0:te.width)??0),ae=Math.max(30,(te==null?void 0:te.height)??0),{cssStyles:he}=te,de=at.svg(oe),ue=userNodeOverrides(te,{});te.look!=="handDrawn"&&(ue.roughness=0,ue.fillStyle="solid");const pe=[{x:0,y:0},{x:le,y:0},{x:0,y:ae},{x:le,y:ae}],fe=createPathFromPoints(pe),ge=de.path(fe,ue),$e=oe.insert(()=>ge,":first-child");return $e.attr("class","basic label-container"),he&&te.look!=="handDrawn"&&$e.selectChildren("path").attr("style",he),re&&te.look!=="handDrawn"&&$e.selectChildren("path").attr("style",re),$e.attr("transform",`translate(${-le/2}, ${-ae/2})`),updateNodeBounds(te,$e),te.intersect=function(Te){return log.info("Pill intersect",te,{points:pe}),intersect_default.polygon(te,pe,Te)},oe}__name(hourglass,"hourglass");async function icon(ie,te,{config:{themeVariables:ne,flowchart:re}}){const{labelStyles:oe}=styles2String(te);te.labelStyle=oe;const le=te.assetHeight??48,ae=te.assetWidth??48,he=Math.max(le,ae),de=re==null?void 0:re.wrappingWidth;te.width=Math.max(he,de??0);const{shapeSvg:ue,bbox:pe,label:fe}=await labelHelper(ie,te,"icon-shape default"),ge=te.pos==="t",$e=he,Te=he,{nodeBorder:Ee}=ne,{stylesMap:Se}=compileStyles(te),ve=-Te/2,ke=-$e/2,Re=te.label?8:0,Ne=at.svg(ue),xe=userNodeOverrides(te,{stroke:"none",fill:"none"});te.look!=="handDrawn"&&(xe.roughness=0,xe.fillStyle="solid");const ze=Ne.rectangle(ve,ke,Te,$e,xe),Me=Math.max(Te,pe.width),Ae=$e+pe.height+Re,Qe=Ne.rectangle(-Me/2,-Ae/2,Me,Ae,{...xe,fill:"transparent",stroke:"none"}),ht=ue.insert(()=>ze,":first-child"),Pe=ue.insert(()=>Qe);if(te.icon){const _t=ue.append("g");_t.html(`<g>${await getIconSVG(te.icon,{height:he,width:he,fallbackPrefix:""})}</g>`);const rt=_t.node().getBBox(),Ke=rt.width,Je=rt.height,qe=rt.x,ct=rt.y;_t.attr("transform",`translate(${-Ke/2-qe},${ge?pe.height/2+Re/2-Je/2-ct:-pe.height/2-Re/2-Je/2-ct})`),_t.attr("style",`color: ${Se.get("stroke")??Ee};`)}return fe.attr("transform",`translate(${-pe.width/2-(pe.x-(pe.left??0))},${ge?-Ae/2:Ae/2-pe.height})`),ht.attr("transform",`translate(0,${ge?pe.height/2+Re/2:-pe.height/2-Re/2})`),updateNodeBounds(te,Pe),te.intersect=function(_t){if(log.info("iconSquare intersect",te,_t),!te.label)return intersect_default.rect(te,_t);const rt=te.x??0,Ke=te.y??0,Je=te.height??0;let qe=[];return ge?qe=[{x:rt-pe.width/2,y:Ke-Je/2},{x:rt+pe.width/2,y:Ke-Je/2},{x:rt+pe.width/2,y:Ke-Je/2+pe.height+Re},{x:rt+Te/2,y:Ke-Je/2+pe.height+Re},{x:rt+Te/2,y:Ke+Je/2},{x:rt-Te/2,y:Ke+Je/2},{x:rt-Te/2,y:Ke-Je/2+pe.height+Re},{x:rt-pe.width/2,y:Ke-Je/2+pe.height+Re}]:qe=[{x:rt-Te/2,y:Ke-Je/2},{x:rt+Te/2,y:Ke-Je/2},{x:rt+Te/2,y:Ke-Je/2+$e},{x:rt+pe.width/2,y:Ke-Je/2+$e},{x:rt+pe.width/2/2,y:Ke+Je/2},{x:rt-pe.width/2,y:Ke+Je/2},{x:rt-pe.width/2,y:Ke-Je/2+$e},{x:rt-Te/2,y:Ke-Je/2+$e}],intersect_default.polygon(te,qe,_t)},ue}__name(icon,"icon");async function iconCircle(ie,te,{config:{themeVariables:ne,flowchart:re}}){const{labelStyles:oe}=styles2String(te);te.labelStyle=oe;const le=te.assetHeight??48,ae=te.assetWidth??48,he=Math.max(le,ae),de=re==null?void 0:re.wrappingWidth;te.width=Math.max(he,de??0);const{shapeSvg:ue,bbox:pe,label:fe}=await labelHelper(ie,te,"icon-shape default"),ge=20,$e=te.label?8:0,Te=te.pos==="t",{nodeBorder:Ee,mainBkg:Se}=ne,{stylesMap:ve}=compileStyles(te),ke=at.svg(ue),Re=userNodeOverrides(te,{});te.look!=="handDrawn"&&(Re.roughness=0,Re.fillStyle="solid");const Ne=ve.get("fill");Re.stroke=Ne??Se;const xe=ue.append("g");te.icon&&xe.html(`<g>${await getIconSVG(te.icon,{height:he,width:he,fallbackPrefix:""})}</g>`);const ze=xe.node().getBBox(),Me=ze.width,Ae=ze.height,Qe=ze.x,ht=ze.y,Pe=Math.max(Me,Ae)*Math.SQRT2+ge*2,_t=ke.circle(0,0,Pe,Re),rt=Math.max(Pe,pe.width),Ke=Pe+pe.height+$e,Je=ke.rectangle(-rt/2,-Ke/2,rt,Ke,{...Re,fill:"transparent",stroke:"none"}),qe=ue.insert(()=>_t,":first-child"),ct=ue.insert(()=>Je);return xe.attr("transform",`translate(${-Me/2-Qe},${Te?pe.height/2+$e/2-Ae/2-ht:-pe.height/2-$e/2-Ae/2-ht})`),xe.attr("style",`color: ${ve.get("stroke")??Ee};`),fe.attr("transform",`translate(${-pe.width/2-(pe.x-(pe.left??0))},${Te?-Ke/2:Ke/2-pe.height})`),qe.attr("transform",`translate(0,${Te?pe.height/2+$e/2:-pe.height/2-$e/2})`),updateNodeBounds(te,ct),te.intersect=function(Le){return log.info("iconSquare intersect",te,Le),intersect_default.rect(te,Le)},ue}__name(iconCircle,"iconCircle");async function iconRounded(ie,te,{config:{themeVariables:ne,flowchart:re}}){const{labelStyles:oe}=styles2String(te);te.labelStyle=oe;const le=te.assetHeight??48,ae=te.assetWidth??48,he=Math.max(le,ae),de=re==null?void 0:re.wrappingWidth;te.width=Math.max(he,de??0);const{shapeSvg:ue,bbox:pe,halfPadding:fe,label:ge}=await labelHelper(ie,te,"icon-shape default"),$e=te.pos==="t",Te=he+fe*2,Ee=he+fe*2,{nodeBorder:Se,mainBkg:ve}=ne,{stylesMap:ke}=compileStyles(te),Re=-Ee/2,Ne=-Te/2,xe=te.label?8:0,ze=at.svg(ue),Me=userNodeOverrides(te,{});te.look!=="handDrawn"&&(Me.roughness=0,Me.fillStyle="solid");const Ae=ke.get("fill");Me.stroke=Ae??ve;const Qe=ze.path(createRoundedRectPathD(Re,Ne,Ee,Te,5),Me),ht=Math.max(Ee,pe.width),Pe=Te+pe.height+xe,_t=ze.rectangle(-ht/2,-Pe/2,ht,Pe,{...Me,fill:"transparent",stroke:"none"}),rt=ue.insert(()=>Qe,":first-child").attr("class","icon-shape2"),Ke=ue.insert(()=>_t);if(te.icon){const Je=ue.append("g");Je.html(`<g>${await getIconSVG(te.icon,{height:he,width:he,fallbackPrefix:""})}</g>`);const qe=Je.node().getBBox(),ct=qe.width,Le=qe.height,je=qe.x,pt=qe.y;Je.attr("transform",`translate(${-ct/2-je},${$e?pe.height/2+xe/2-Le/2-pt:-pe.height/2-xe/2-Le/2-pt})`),Je.attr("style",`color: ${ke.get("stroke")??Se};`)}return ge.attr("transform",`translate(${-pe.width/2-(pe.x-(pe.left??0))},${$e?-Pe/2:Pe/2-pe.height})`),rt.attr("transform",`translate(0,${$e?pe.height/2+xe/2:-pe.height/2-xe/2})`),updateNodeBounds(te,Ke),te.intersect=function(Je){if(log.info("iconSquare intersect",te,Je),!te.label)return intersect_default.rect(te,Je);const qe=te.x??0,ct=te.y??0,Le=te.height??0;let je=[];return $e?je=[{x:qe-pe.width/2,y:ct-Le/2},{x:qe+pe.width/2,y:ct-Le/2},{x:qe+pe.width/2,y:ct-Le/2+pe.height+xe},{x:qe+Ee/2,y:ct-Le/2+pe.height+xe},{x:qe+Ee/2,y:ct+Le/2},{x:qe-Ee/2,y:ct+Le/2},{x:qe-Ee/2,y:ct-Le/2+pe.height+xe},{x:qe-pe.width/2,y:ct-Le/2+pe.height+xe}]:je=[{x:qe-Ee/2,y:ct-Le/2},{x:qe+Ee/2,y:ct-Le/2},{x:qe+Ee/2,y:ct-Le/2+Te},{x:qe+pe.width/2,y:ct-Le/2+Te},{x:qe+pe.width/2/2,y:ct+Le/2},{x:qe-pe.width/2,y:ct+Le/2},{x:qe-pe.width/2,y:ct-Le/2+Te},{x:qe-Ee/2,y:ct-Le/2+Te}],intersect_default.polygon(te,je,Je)},ue}__name(iconRounded,"iconRounded");async function iconSquare(ie,te,{config:{themeVariables:ne,flowchart:re}}){const{labelStyles:oe}=styles2String(te);te.labelStyle=oe;const le=te.assetHeight??48,ae=te.assetWidth??48,he=Math.max(le,ae),de=re==null?void 0:re.wrappingWidth;te.width=Math.max(he,de??0);const{shapeSvg:ue,bbox:pe,halfPadding:fe,label:ge}=await labelHelper(ie,te,"icon-shape default"),$e=te.pos==="t",Te=he+fe*2,Ee=he+fe*2,{nodeBorder:Se,mainBkg:ve}=ne,{stylesMap:ke}=compileStyles(te),Re=-Ee/2,Ne=-Te/2,xe=te.label?8:0,ze=at.svg(ue),Me=userNodeOverrides(te,{});te.look!=="handDrawn"&&(Me.roughness=0,Me.fillStyle="solid");const Ae=ke.get("fill");Me.stroke=Ae??ve;const Qe=ze.path(createRoundedRectPathD(Re,Ne,Ee,Te,.1),Me),ht=Math.max(Ee,pe.width),Pe=Te+pe.height+xe,_t=ze.rectangle(-ht/2,-Pe/2,ht,Pe,{...Me,fill:"transparent",stroke:"none"}),rt=ue.insert(()=>Qe,":first-child"),Ke=ue.insert(()=>_t);if(te.icon){const Je=ue.append("g");Je.html(`<g>${await getIconSVG(te.icon,{height:he,width:he,fallbackPrefix:""})}</g>`);const qe=Je.node().getBBox(),ct=qe.width,Le=qe.height,je=qe.x,pt=qe.y;Je.attr("transform",`translate(${-ct/2-je},${$e?pe.height/2+xe/2-Le/2-pt:-pe.height/2-xe/2-Le/2-pt})`),Je.attr("style",`color: ${ke.get("stroke")??Se};`)}return ge.attr("transform",`translate(${-pe.width/2-(pe.x-(pe.left??0))},${$e?-Pe/2:Pe/2-pe.height})`),rt.attr("transform",`translate(0,${$e?pe.height/2+xe/2:-pe.height/2-xe/2})`),updateNodeBounds(te,Ke),te.intersect=function(Je){if(log.info("iconSquare intersect",te,Je),!te.label)return intersect_default.rect(te,Je);const qe=te.x??0,ct=te.y??0,Le=te.height??0;let je=[];return $e?je=[{x:qe-pe.width/2,y:ct-Le/2},{x:qe+pe.width/2,y:ct-Le/2},{x:qe+pe.width/2,y:ct-Le/2+pe.height+xe},{x:qe+Ee/2,y:ct-Le/2+pe.height+xe},{x:qe+Ee/2,y:ct+Le/2},{x:qe-Ee/2,y:ct+Le/2},{x:qe-Ee/2,y:ct-Le/2+pe.height+xe},{x:qe-pe.width/2,y:ct-Le/2+pe.height+xe}]:je=[{x:qe-Ee/2,y:ct-Le/2},{x:qe+Ee/2,y:ct-Le/2},{x:qe+Ee/2,y:ct-Le/2+Te},{x:qe+pe.width/2,y:ct-Le/2+Te},{x:qe+pe.width/2/2,y:ct+Le/2},{x:qe-pe.width/2,y:ct+Le/2},{x:qe-pe.width/2,y:ct-Le/2+Te},{x:qe-Ee/2,y:ct-Le/2+Te}],intersect_default.polygon(te,je,Je)},ue}__name(iconSquare,"iconSquare");async function imageSquare(ie,te,{config:{flowchart:ne}}){const re=new Image;re.src=(te==null?void 0:te.img)??"",await re.decode();const oe=Number(re.naturalWidth.toString().replace("px","")),le=Number(re.naturalHeight.toString().replace("px",""));te.imageAspectRatio=oe/le;const{labelStyles:ae}=styles2String(te);te.labelStyle=ae;const he=ne==null?void 0:ne.wrappingWidth;te.defaultWidth=ne==null?void 0:ne.wrappingWidth;const de=Math.max(te.label?he??0:0,(te==null?void 0:te.assetWidth)??oe),ue=te.constraint==="on"&&te!=null&&te.assetHeight?te.assetHeight*te.imageAspectRatio:de,pe=te.constraint==="on"?ue/te.imageAspectRatio:(te==null?void 0:te.assetHeight)??le;te.width=Math.max(ue,he??0);const{shapeSvg:fe,bbox:ge,label:$e}=await labelHelper(ie,te,"image-shape default"),Te=te.pos==="t",Ee=-ue/2,Se=-pe/2,ve=te.label?8:0,ke=at.svg(fe),Re=userNodeOverrides(te,{});te.look!=="handDrawn"&&(Re.roughness=0,Re.fillStyle="solid");const Ne=ke.rectangle(Ee,Se,ue,pe,Re),xe=Math.max(ue,ge.width),ze=pe+ge.height+ve,Me=ke.rectangle(-xe/2,-ze/2,xe,ze,{...Re,fill:"none",stroke:"none"}),Ae=fe.insert(()=>Ne,":first-child"),Qe=fe.insert(()=>Me);if(te.img){const ht=fe.append("image");ht.attr("href",te.img),ht.attr("width",ue),ht.attr("height",pe),ht.attr("preserveAspectRatio","none"),ht.attr("transform",`translate(${-ue/2},${Te?ze/2-pe:-ze/2})`)}return $e.attr("transform",`translate(${-ge.width/2-(ge.x-(ge.left??0))},${Te?-pe/2-ge.height/2-ve/2:pe/2-ge.height/2+ve/2})`),Ae.attr("transform",`translate(0,${Te?ge.height/2+ve/2:-ge.height/2-ve/2})`),updateNodeBounds(te,Qe),te.intersect=function(ht){if(log.info("iconSquare intersect",te,ht),!te.label)return intersect_default.rect(te,ht);const Pe=te.x??0,_t=te.y??0,rt=te.height??0;let Ke=[];return Te?Ke=[{x:Pe-ge.width/2,y:_t-rt/2},{x:Pe+ge.width/2,y:_t-rt/2},{x:Pe+ge.width/2,y:_t-rt/2+ge.height+ve},{x:Pe+ue/2,y:_t-rt/2+ge.height+ve},{x:Pe+ue/2,y:_t+rt/2},{x:Pe-ue/2,y:_t+rt/2},{x:Pe-ue/2,y:_t-rt/2+ge.height+ve},{x:Pe-ge.width/2,y:_t-rt/2+ge.height+ve}]:Ke=[{x:Pe-ue/2,y:_t-rt/2},{x:Pe+ue/2,y:_t-rt/2},{x:Pe+ue/2,y:_t-rt/2+pe},{x:Pe+ge.width/2,y:_t-rt/2+pe},{x:Pe+ge.width/2/2,y:_t+rt/2},{x:Pe-ge.width/2,y:_t+rt/2},{x:Pe-ge.width/2,y:_t-rt/2+pe},{x:Pe-ue/2,y:_t-rt/2+pe}],intersect_default.polygon(te,Ke,ht)},fe}__name(imageSquare,"imageSquare");async function inv_trapezoid(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le}=await labelHelper(ie,te,getNodeClasses(te)),ae=Math.max(le.width+(te.padding??0)*2,(te==null?void 0:te.width)??0),he=Math.max(le.height+(te.padding??0)*2,(te==null?void 0:te.height)??0),de=[{x:0,y:0},{x:ae,y:0},{x:ae+3*he/6,y:-he},{x:-3*he/6,y:-he}];let ue;const{cssStyles:pe}=te;if(te.look==="handDrawn"){const fe=at.svg(oe),ge=userNodeOverrides(te,{}),$e=createPathFromPoints(de),Te=fe.path($e,ge);ue=oe.insert(()=>Te,":first-child").attr("transform",`translate(${-ae/2}, ${he/2})`),pe&&ue.attr("style",pe)}else ue=insertPolygonShape(oe,ae,he,de);return re&&ue.attr("style",re),te.width=ae,te.height=he,updateNodeBounds(te,ue),te.intersect=function(fe){return intersect_default.polygon(te,de,fe)},oe}__name(inv_trapezoid,"inv_trapezoid");async function drawRect(ie,te,ne){const{labelStyles:re,nodeStyles:oe}=styles2String(te);te.labelStyle=re;const{shapeSvg:le,bbox:ae}=await labelHelper(ie,te,getNodeClasses(te)),he=Math.max(ae.width+ne.labelPaddingX*2,(te==null?void 0:te.width)||0),de=Math.max(ae.height+ne.labelPaddingY*2,(te==null?void 0:te.height)||0),ue=-he/2,pe=-de/2;let fe,{rx:ge,ry:$e}=te;const{cssStyles:Te}=te;if(ne!=null&&ne.rx&&ne.ry&&(ge=ne.rx,$e=ne.ry),te.look==="handDrawn"){const Ee=at.svg(le),Se=userNodeOverrides(te,{}),ve=ge||$e?Ee.path(createRoundedRectPathD(ue,pe,he,de,ge||0),Se):Ee.rectangle(ue,pe,he,de,Se);fe=le.insert(()=>ve,":first-child"),fe.attr("class","basic label-container").attr("style",handleUndefinedAttr(Te))}else fe=le.insert("rect",":first-child"),fe.attr("class","basic label-container").attr("style",oe).attr("rx",handleUndefinedAttr(ge)).attr("ry",handleUndefinedAttr($e)).attr("x",ue).attr("y",pe).attr("width",he).attr("height",de);return updateNodeBounds(te,fe),te.intersect=function(Ee){return intersect_default.rect(te,Ee)},le}__name(drawRect,"drawRect");async function labelRect(ie,te){const{shapeSvg:ne,bbox:re,label:oe}=await labelHelper(ie,te,"label"),le=ne.insert("rect",":first-child"),ae=.1,he=.1;return le.attr("width",ae).attr("height",he),ne.attr("class","label edgeLabel"),oe.attr("transform",`translate(${-(re.width/2)-(re.x-(re.left??0))}, ${-(re.height/2)-(re.y-(re.top??0))})`),updateNodeBounds(te,le),te.intersect=function(de){return intersect_default.rect(te,de)},ne}__name(labelRect,"labelRect");async function lean_left(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le}=await labelHelper(ie,te,getNodeClasses(te)),ae=Math.max(le.width+(te.padding??0),(te==null?void 0:te.width)??0),he=Math.max(le.height+(te.padding??0),(te==null?void 0:te.height)??0),de=[{x:0,y:0},{x:ae+3*he/6,y:0},{x:ae,y:-he},{x:-(3*he)/6,y:-he}];let ue;const{cssStyles:pe}=te;if(te.look==="handDrawn"){const fe=at.svg(oe),ge=userNodeOverrides(te,{}),$e=createPathFromPoints(de),Te=fe.path($e,ge);ue=oe.insert(()=>Te,":first-child").attr("transform",`translate(${-ae/2}, ${he/2})`),pe&&ue.attr("style",pe)}else ue=insertPolygonShape(oe,ae,he,de);return re&&ue.attr("style",re),te.width=ae,te.height=he,updateNodeBounds(te,ue),te.intersect=function(fe){return intersect_default.polygon(te,de,fe)},oe}__name(lean_left,"lean_left");async function lean_right(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le}=await labelHelper(ie,te,getNodeClasses(te)),ae=Math.max(le.width+(te.padding??0),(te==null?void 0:te.width)??0),he=Math.max(le.height+(te.padding??0),(te==null?void 0:te.height)??0),de=[{x:-3*he/6,y:0},{x:ae,y:0},{x:ae+3*he/6,y:-he},{x:0,y:-he}];let ue;const{cssStyles:pe}=te;if(te.look==="handDrawn"){const fe=at.svg(oe),ge=userNodeOverrides(te,{}),$e=createPathFromPoints(de),Te=fe.path($e,ge);ue=oe.insert(()=>Te,":first-child").attr("transform",`translate(${-ae/2}, ${he/2})`),pe&&ue.attr("style",pe)}else ue=insertPolygonShape(oe,ae,he,de);return re&&ue.attr("style",re),te.width=ae,te.height=he,updateNodeBounds(te,ue),te.intersect=function(fe){return intersect_default.polygon(te,de,fe)},oe}__name(lean_right,"lean_right");function lightningBolt(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.label="",te.labelStyle=ne;const oe=ie.insert("g").attr("class",getNodeClasses(te)).attr("id",te.domId??te.id),{cssStyles:le}=te,ae=Math.max(35,(te==null?void 0:te.width)??0),he=Math.max(35,(te==null?void 0:te.height)??0),de=7,ue=[{x:ae,y:0},{x:0,y:he+de/2},{x:ae-2*de,y:he+de/2},{x:0,y:2*he},{x:ae,y:he-de/2},{x:2*de,y:he-de/2}],pe=at.svg(oe),fe=userNodeOverrides(te,{});te.look!=="handDrawn"&&(fe.roughness=0,fe.fillStyle="solid");const ge=createPathFromPoints(ue),$e=pe.path(ge,fe),Te=oe.insert(()=>$e,":first-child");return le&&te.look!=="handDrawn"&&Te.selectAll("path").attr("style",le),re&&te.look!=="handDrawn"&&Te.selectAll("path").attr("style",re),Te.attr("transform",`translate(-${ae/2},${-he})`),updateNodeBounds(te,Te),te.intersect=function(Ee){return log.info("lightningBolt intersect",te,Ee),intersect_default.polygon(te,ue,Ee)},oe}__name(lightningBolt,"lightningBolt");var createCylinderPathD2=__name((ie,te,ne,re,oe,le,ae)=>[`M${ie},${te+le}`,`a${oe},${le} 0,0,0 ${ne},0`,`a${oe},${le} 0,0,0 ${-ne},0`,`l0,${re}`,`a${oe},${le} 0,0,0 ${ne},0`,`l0,${-re}`,`M${ie},${te+le+ae}`,`a${oe},${le} 0,0,0 ${ne},0`].join(" "),"createCylinderPathD"),createOuterCylinderPathD2=__name((ie,te,ne,re,oe,le,ae)=>[`M${ie},${te+le}`,`M${ie+ne},${te+le}`,`a${oe},${le} 0,0,0 ${-ne},0`,`l0,${re}`,`a${oe},${le} 0,0,0 ${ne},0`,`l0,${-re}`,`M${ie},${te+le+ae}`,`a${oe},${le} 0,0,0 ${ne},0`].join(" "),"createOuterCylinderPathD"),createInnerCylinderPathD2=__name((ie,te,ne,re,oe,le)=>[`M${ie-ne/2},${-re/2}`,`a${oe},${le} 0,0,0 ${ne},0`].join(" "),"createInnerCylinderPathD");async function linedCylinder(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le,label:ae}=await labelHelper(ie,te,getNodeClasses(te)),he=Math.max(le.width+(te.padding??0),te.width??0),de=he/2,ue=de/(2.5+he/50),pe=Math.max(le.height+ue+(te.padding??0),te.height??0),fe=pe*.1;let ge;const{cssStyles:$e}=te;if(te.look==="handDrawn"){const Te=at.svg(oe),Ee=createOuterCylinderPathD2(0,0,he,pe,de,ue,fe),Se=createInnerCylinderPathD2(0,ue,he,pe,de,ue),ve=userNodeOverrides(te,{}),ke=Te.path(Ee,ve),Re=Te.path(Se,ve);oe.insert(()=>Re,":first-child").attr("class","line"),ge=oe.insert(()=>ke,":first-child"),ge.attr("class","basic label-container"),$e&&ge.attr("style",$e)}else{const Te=createCylinderPathD2(0,0,he,pe,de,ue,fe);ge=oe.insert("path",":first-child").attr("d",Te).attr("class","basic label-container").attr("style",handleUndefinedAttr($e)).attr("style",re)}return ge.attr("label-offset-y",ue),ge.attr("transform",`translate(${-he/2}, ${-(pe/2+ue)})`),updateNodeBounds(te,ge),ae.attr("transform",`translate(${-(le.width/2)-(le.x-(le.left??0))}, ${-(le.height/2)+ue-(le.y-(le.top??0))})`),te.intersect=function(Te){const Ee=intersect_default.rect(te,Te),Se=Ee.x-(te.x??0);if(de!=0&&(Math.abs(Se)<(te.width??0)/2||Math.abs(Se)==(te.width??0)/2&&Math.abs(Ee.y-(te.y??0))>(te.height??0)/2-ue)){let ve=ue*ue*(1-Se*Se/(de*de));ve>0&&(ve=Math.sqrt(ve)),ve=ue-ve,Te.y-(te.y??0)>0&&(ve=-ve),Ee.y+=ve}return Ee},oe}__name(linedCylinder,"linedCylinder");async function linedWaveEdgedRect(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le,label:ae}=await labelHelper(ie,te,getNodeClasses(te)),he=Math.max(le.width+(te.padding??0)*2,(te==null?void 0:te.width)??0),de=Math.max(le.height+(te.padding??0)*2,(te==null?void 0:te.height)??0),ue=de/4,pe=de+ue,{cssStyles:fe}=te,ge=at.svg(oe),$e=userNodeOverrides(te,{});te.look!=="handDrawn"&&($e.roughness=0,$e.fillStyle="solid");const Te=[{x:-he/2-he/2*.1,y:-pe/2},{x:-he/2-he/2*.1,y:pe/2},...generateFullSineWavePoints(-he/2-he/2*.1,pe/2,he/2+he/2*.1,pe/2,ue,.8),{x:he/2+he/2*.1,y:-pe/2},{x:-he/2-he/2*.1,y:-pe/2},{x:-he/2,y:-pe/2},{x:-he/2,y:pe/2*1.1},{x:-he/2,y:-pe/2}],Ee=ge.polygon(Te.map(ve=>[ve.x,ve.y]),$e),Se=oe.insert(()=>Ee,":first-child");return Se.attr("class","basic label-container"),fe&&te.look!=="handDrawn"&&Se.selectAll("path").attr("style",fe),re&&te.look!=="handDrawn"&&Se.selectAll("path").attr("style",re),Se.attr("transform",`translate(0,${-ue/2})`),ae.attr("transform",`translate(${-he/2+(te.padding??0)+he/2*.1/2-(le.x-(le.left??0))},${-de/2+(te.padding??0)-ue/2-(le.y-(le.top??0))})`),updateNodeBounds(te,Se),te.intersect=function(ve){return intersect_default.polygon(te,Te,ve)},oe}__name(linedWaveEdgedRect,"linedWaveEdgedRect");async function multiRect(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le,label:ae}=await labelHelper(ie,te,getNodeClasses(te)),he=Math.max(le.width+(te.padding??0)*2,(te==null?void 0:te.width)??0),de=Math.max(le.height+(te.padding??0)*2,(te==null?void 0:te.height)??0),ue=5,pe=-he/2,fe=-de/2,{cssStyles:ge}=te,$e=at.svg(oe),Te=userNodeOverrides(te,{}),Ee=[{x:pe-ue,y:fe+ue},{x:pe-ue,y:fe+de+ue},{x:pe+he-ue,y:fe+de+ue},{x:pe+he-ue,y:fe+de},{x:pe+he,y:fe+de},{x:pe+he,y:fe+de-ue},{x:pe+he+ue,y:fe+de-ue},{x:pe+he+ue,y:fe-ue},{x:pe+ue,y:fe-ue},{x:pe+ue,y:fe},{x:pe,y:fe},{x:pe,y:fe+ue}],Se=[{x:pe,y:fe+ue},{x:pe+he-ue,y:fe+ue},{x:pe+he-ue,y:fe+de},{x:pe+he,y:fe+de},{x:pe+he,y:fe},{x:pe,y:fe}];te.look!=="handDrawn"&&(Te.roughness=0,Te.fillStyle="solid");const ve=createPathFromPoints(Ee),ke=$e.path(ve,Te),Re=createPathFromPoints(Se),Ne=$e.path(Re,{...Te,fill:"none"}),xe=oe.insert(()=>Ne,":first-child");return xe.insert(()=>ke,":first-child"),xe.attr("class","basic label-container"),ge&&te.look!=="handDrawn"&&xe.selectAll("path").attr("style",ge),re&&te.look!=="handDrawn"&&xe.selectAll("path").attr("style",re),ae.attr("transform",`translate(${-(le.width/2)-ue-(le.x-(le.left??0))}, ${-(le.height/2)+ue-(le.y-(le.top??0))})`),updateNodeBounds(te,xe),te.intersect=function(ze){return intersect_default.polygon(te,Ee,ze)},oe}__name(multiRect,"multiRect");async function multiWaveEdgedRectangle(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le,label:ae}=await labelHelper(ie,te,getNodeClasses(te)),he=Math.max(le.width+(te.padding??0)*2,(te==null?void 0:te.width)??0),de=Math.max(le.height+(te.padding??0)*2,(te==null?void 0:te.height)??0),ue=de/4,pe=de+ue,fe=-he/2,ge=-pe/2,$e=5,{cssStyles:Te}=te,Ee=generateFullSineWavePoints(fe-$e,ge+pe+$e,fe+he-$e,ge+pe+$e,ue,.8),Se=Ee==null?void 0:Ee[Ee.length-1],ve=[{x:fe-$e,y:ge+$e},{x:fe-$e,y:ge+pe+$e},...Ee,{x:fe+he-$e,y:Se.y-$e},{x:fe+he,y:Se.y-$e},{x:fe+he,y:Se.y-2*$e},{x:fe+he+$e,y:Se.y-2*$e},{x:fe+he+$e,y:ge-$e},{x:fe+$e,y:ge-$e},{x:fe+$e,y:ge},{x:fe,y:ge},{x:fe,y:ge+$e}],ke=[{x:fe,y:ge+$e},{x:fe+he-$e,y:ge+$e},{x:fe+he-$e,y:Se.y-$e},{x:fe+he,y:Se.y-$e},{x:fe+he,y:ge},{x:fe,y:ge}],Re=at.svg(oe),Ne=userNodeOverrides(te,{});te.look!=="handDrawn"&&(Ne.roughness=0,Ne.fillStyle="solid");const xe=createPathFromPoints(ve),ze=Re.path(xe,Ne),Me=createPathFromPoints(ke),Ae=Re.path(Me,Ne),Qe=oe.insert(()=>ze,":first-child");return Qe.insert(()=>Ae),Qe.attr("class","basic label-container"),Te&&te.look!=="handDrawn"&&Qe.selectAll("path").attr("style",Te),re&&te.look!=="handDrawn"&&Qe.selectAll("path").attr("style",re),Qe.attr("transform",`translate(0,${-ue/2})`),ae.attr("transform",`translate(${-(le.width/2)-$e-(le.x-(le.left??0))}, ${-(le.height/2)+$e-ue/2-(le.y-(le.top??0))})`),updateNodeBounds(te,Qe),te.intersect=function(ht){return intersect_default.polygon(te,ve,ht)},oe}__name(multiWaveEdgedRectangle,"multiWaveEdgedRectangle");async function note(ie,te,{config:{themeVariables:ne}}){var ve;const{labelStyles:re,nodeStyles:oe}=styles2String(te);te.labelStyle=re,te.useHtmlLabels||((ve=getConfig().flowchart)==null?void 0:ve.htmlLabels)!==!1||(te.centerLabel=!0);const{shapeSvg:ae,bbox:he}=await labelHelper(ie,te,getNodeClasses(te)),de=Math.max(he.width+(te.padding??0)*2,(te==null?void 0:te.width)??0),ue=Math.max(he.height+(te.padding??0)*2,(te==null?void 0:te.height)??0),pe=-de/2,fe=-ue/2,{cssStyles:ge}=te,$e=at.svg(ae),Te=userNodeOverrides(te,{fill:ne.noteBkgColor,stroke:ne.noteBorderColor});te.look!=="handDrawn"&&(Te.roughness=0,Te.fillStyle="solid");const Ee=$e.rectangle(pe,fe,de,ue,Te),Se=ae.insert(()=>Ee,":first-child");return Se.attr("class","basic label-container"),ge&&te.look!=="handDrawn"&&Se.selectAll("path").attr("style",ge),oe&&te.look!=="handDrawn"&&Se.selectAll("path").attr("style",oe),updateNodeBounds(te,Se),te.intersect=function(ke){return intersect_default.rect(te,ke)},ae}__name(note,"note");var createDecisionBoxPathD=__name((ie,te,ne)=>[`M${ie+ne/2},${te}`,`L${ie+ne},${te-ne/2}`,`L${ie+ne/2},${te-ne}`,`L${ie},${te-ne/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function question(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le}=await labelHelper(ie,te,getNodeClasses(te)),ae=le.width+te.padding,he=le.height+te.padding,de=ae+he,ue=[{x:de/2,y:0},{x:de,y:-de/2},{x:de/2,y:-de},{x:0,y:-de/2}];let pe;const{cssStyles:fe}=te;if(te.look==="handDrawn"){const ge=at.svg(oe),$e=userNodeOverrides(te,{}),Te=createDecisionBoxPathD(0,0,de),Ee=ge.path(Te,$e);pe=oe.insert(()=>Ee,":first-child").attr("transform",`translate(${-de/2}, ${de/2})`),fe&&pe.attr("style",fe)}else pe=insertPolygonShape(oe,de,de,ue);return re&&pe.attr("style",re),updateNodeBounds(te,pe),te.intersect=function(ge){return log.debug(`APA12 Intersect called SPLIT
point:`,ge,`
node:
`,te,`
res:`,intersect_default.polygon(te,ue,ge)),intersect_default.polygon(te,ue,ge)},oe}__name(question,"question");async function rect_left_inv_arrow(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le,label:ae}=await labelHelper(ie,te,getNodeClasses(te)),he=Math.max(le.width+(te.padding??0),(te==null?void 0:te.width)??0),de=Math.max(le.height+(te.padding??0),(te==null?void 0:te.height)??0),ue=-he/2,pe=-de/2,fe=pe/2,ge=[{x:ue+fe,y:pe},{x:ue,y:0},{x:ue+fe,y:-pe},{x:-ue,y:-pe},{x:-ue,y:pe}],{cssStyles:$e}=te,Te=at.svg(oe),Ee=userNodeOverrides(te,{});te.look!=="handDrawn"&&(Ee.roughness=0,Ee.fillStyle="solid");const Se=createPathFromPoints(ge),ve=Te.path(Se,Ee),ke=oe.insert(()=>ve,":first-child");return ke.attr("class","basic label-container"),$e&&te.look!=="handDrawn"&&ke.selectAll("path").attr("style",$e),re&&te.look!=="handDrawn"&&ke.selectAll("path").attr("style",re),ke.attr("transform",`translate(${-fe/2},0)`),ae.attr("transform",`translate(${-fe/2-le.width/2-(le.x-(le.left??0))}, ${-(le.height/2)-(le.y-(le.top??0))})`),updateNodeBounds(te,ke),te.intersect=function(Re){return intersect_default.polygon(te,ge,Re)},oe}__name(rect_left_inv_arrow,"rect_left_inv_arrow");async function rectWithTitle(ie,te){var Ae,Qe;const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;let oe;te.cssClasses?oe="node "+te.cssClasses:oe="node default";const le=ie.insert("g").attr("class",oe).attr("id",te.domId||te.id),ae=le.insert("g"),he=le.insert("g").attr("class","label").attr("style",re),de=te.description,ue=te.label,pe=he.node().appendChild(await createLabel_default(ue,te.labelStyle,!0,!0));let fe={width:0,height:0};if(evaluate((Qe=(Ae=getConfig2())==null?void 0:Ae.flowchart)==null?void 0:Qe.htmlLabels)){const ht=pe.children[0],Pe=select(pe);fe=ht.getBoundingClientRect(),Pe.attr("width",fe.width),Pe.attr("height",fe.height)}log.info("Text 2",de);const ge=de||[],$e=pe.getBBox(),Te=he.node().appendChild(await createLabel_default(ge.join?ge.join("<br/>"):ge,te.labelStyle,!0,!0)),Ee=Te.children[0],Se=select(Te);fe=Ee.getBoundingClientRect(),Se.attr("width",fe.width),Se.attr("height",fe.height);const ve=(te.padding||0)/2;select(Te).attr("transform","translate( "+(fe.width>$e.width?0:($e.width-fe.width)/2)+", "+($e.height+ve+5)+")"),select(pe).attr("transform","translate( "+(fe.width<$e.width?0:-($e.width-fe.width)/2)+", 0)"),fe=he.node().getBBox(),he.attr("transform","translate("+-fe.width/2+", "+(-fe.height/2-ve+3)+")");const ke=fe.width+(te.padding||0),Re=fe.height+(te.padding||0),Ne=-fe.width/2-ve,xe=-fe.height/2-ve;let ze,Me;if(te.look==="handDrawn"){const ht=at.svg(le),Pe=userNodeOverrides(te,{}),_t=ht.path(createRoundedRectPathD(Ne,xe,ke,Re,te.rx||0),Pe),rt=ht.line(-fe.width/2-ve,-fe.height/2-ve+$e.height+ve,fe.width/2+ve,-fe.height/2-ve+$e.height+ve,Pe);Me=le.insert(()=>(log.debug("Rough node insert CXC",_t),rt),":first-child"),ze=le.insert(()=>(log.debug("Rough node insert CXC",_t),_t),":first-child")}else ze=ae.insert("rect",":first-child"),Me=ae.insert("line"),ze.attr("class","outer title-state").attr("style",re).attr("x",-fe.width/2-ve).attr("y",-fe.height/2-ve).attr("width",fe.width+(te.padding||0)).attr("height",fe.height+(te.padding||0)),Me.attr("class","divider").attr("x1",-fe.width/2-ve).attr("x2",fe.width/2+ve).attr("y1",-fe.height/2-ve+$e.height+ve).attr("y2",-fe.height/2-ve+$e.height+ve);return updateNodeBounds(te,ze),te.intersect=function(ht){return intersect_default.rect(te,ht)},le}__name(rectWithTitle,"rectWithTitle");async function roundedRect(ie,te){const ne={rx:5,ry:5,classes:"",labelPaddingX:((te==null?void 0:te.padding)||0)*1,labelPaddingY:((te==null?void 0:te.padding)||0)*1};return drawRect(ie,te,ne)}__name(roundedRect,"roundedRect");async function shadedProcess(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le,label:ae}=await labelHelper(ie,te,getNodeClasses(te)),he=(te==null?void 0:te.padding)??0,de=Math.max(le.width+(te.padding??0)*2,(te==null?void 0:te.width)??0),ue=Math.max(le.height+(te.padding??0)*2,(te==null?void 0:te.height)??0),pe=-le.width/2-he,fe=-le.height/2-he,{cssStyles:ge}=te,$e=at.svg(oe),Te=userNodeOverrides(te,{});te.look!=="handDrawn"&&(Te.roughness=0,Te.fillStyle="solid");const Ee=[{x:pe,y:fe},{x:pe+de+8,y:fe},{x:pe+de+8,y:fe+ue},{x:pe-8,y:fe+ue},{x:pe-8,y:fe},{x:pe,y:fe},{x:pe,y:fe+ue}],Se=$e.polygon(Ee.map(ke=>[ke.x,ke.y]),Te),ve=oe.insert(()=>Se,":first-child");return ve.attr("class","basic label-container").attr("style",handleUndefinedAttr(ge)),re&&te.look!=="handDrawn"&&ve.selectAll("path").attr("style",re),ge&&te.look!=="handDrawn"&&ve.selectAll("path").attr("style",re),ae.attr("transform",`translate(${-de/2+4+(te.padding??0)-(le.x-(le.left??0))},${-ue/2+(te.padding??0)-(le.y-(le.top??0))})`),updateNodeBounds(te,ve),te.intersect=function(ke){return intersect_default.rect(te,ke)},oe}__name(shadedProcess,"shadedProcess");async function slopedRect(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le,label:ae}=await labelHelper(ie,te,getNodeClasses(te)),he=Math.max(le.width+(te.padding??0)*2,(te==null?void 0:te.width)??0),de=Math.max(le.height+(te.padding??0)*2,(te==null?void 0:te.height)??0),ue=-he/2,pe=-de/2,{cssStyles:fe}=te,ge=at.svg(oe),$e=userNodeOverrides(te,{});te.look!=="handDrawn"&&($e.roughness=0,$e.fillStyle="solid");const Te=[{x:ue,y:pe},{x:ue,y:pe+de},{x:ue+he,y:pe+de},{x:ue+he,y:pe-de/2}],Ee=createPathFromPoints(Te),Se=ge.path(Ee,$e),ve=oe.insert(()=>Se,":first-child");return ve.attr("class","basic label-container"),fe&&te.look!=="handDrawn"&&ve.selectChildren("path").attr("style",fe),re&&te.look!=="handDrawn"&&ve.selectChildren("path").attr("style",re),ve.attr("transform",`translate(0, ${de/4})`),ae.attr("transform",`translate(${-he/2+(te.padding??0)-(le.x-(le.left??0))}, ${-de/4+(te.padding??0)-(le.y-(le.top??0))})`),updateNodeBounds(te,ve),te.intersect=function(ke){return intersect_default.polygon(te,Te,ke)},oe}__name(slopedRect,"slopedRect");async function squareRect2(ie,te){const ne={rx:0,ry:0,classes:"",labelPaddingX:((te==null?void 0:te.padding)||0)*2,labelPaddingY:((te==null?void 0:te.padding)||0)*1};return drawRect(ie,te,ne)}__name(squareRect2,"squareRect");async function stadium(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le}=await labelHelper(ie,te,getNodeClasses(te)),ae=le.height+te.padding,he=le.width+ae/4+te.padding;let de;const{cssStyles:ue}=te;if(te.look==="handDrawn"){const pe=at.svg(oe),fe=userNodeOverrides(te,{}),ge=createRoundedRectPathD(-he/2,-ae/2,he,ae,ae/2),$e=pe.path(ge,fe);de=oe.insert(()=>$e,":first-child"),de.attr("class","basic label-container").attr("style",handleUndefinedAttr(ue))}else de=oe.insert("rect",":first-child"),de.attr("class","basic label-container").attr("style",re).attr("rx",ae/2).attr("ry",ae/2).attr("x",-he/2).attr("y",-ae/2).attr("width",he).attr("height",ae);return updateNodeBounds(te,de),te.intersect=function(pe){return intersect_default.rect(te,pe)},oe}__name(stadium,"stadium");async function state(ie,te){return drawRect(ie,te,{rx:5,ry:5,classes:"flowchart-node"})}__name(state,"state");function stateEnd(ie,te,{config:{themeVariables:ne}}){const{labelStyles:re,nodeStyles:oe}=styles2String(te);te.labelStyle=re;const{cssStyles:le}=te,{lineColor:ae,stateBorder:he,nodeBorder:de}=ne,ue=ie.insert("g").attr("class","node default").attr("id",te.domId||te.id),pe=at.svg(ue),fe=userNodeOverrides(te,{});te.look!=="handDrawn"&&(fe.roughness=0,fe.fillStyle="solid");const ge=pe.circle(0,0,14,{...fe,stroke:ae,strokeWidth:2}),$e=he??de,Te=pe.circle(0,0,5,{...fe,fill:$e,stroke:$e,strokeWidth:2,fillStyle:"solid"}),Ee=ue.insert(()=>ge,":first-child");return Ee.insert(()=>Te),le&&Ee.selectAll("path").attr("style",le),oe&&Ee.selectAll("path").attr("style",oe),updateNodeBounds(te,Ee),te.intersect=function(Se){return intersect_default.circle(te,7,Se)},ue}__name(stateEnd,"stateEnd");function stateStart(ie,te,{config:{themeVariables:ne}}){const{lineColor:re}=ne,oe=ie.insert("g").attr("class","node default").attr("id",te.domId||te.id);let le;if(te.look==="handDrawn"){const he=at.svg(oe).circle(0,0,14,solidStateFill(re));le=oe.insert(()=>he),le.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else le=oe.insert("circle",":first-child"),le.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return updateNodeBounds(te,le),te.intersect=function(ae){return intersect_default.circle(te,7,ae)},oe}__name(stateStart,"stateStart");async function subroutine(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le}=await labelHelper(ie,te,getNodeClasses(te)),ae=((te==null?void 0:te.padding)||0)/2,he=le.width+te.padding,de=le.height+te.padding,ue=-le.width/2-ae,pe=-le.height/2-ae,fe=[{x:0,y:0},{x:he,y:0},{x:he,y:-de},{x:0,y:-de},{x:0,y:0},{x:-8,y:0},{x:he+8,y:0},{x:he+8,y:-de},{x:-8,y:-de},{x:-8,y:0}];if(te.look==="handDrawn"){const ge=at.svg(oe),$e=userNodeOverrides(te,{}),Te=ge.rectangle(ue-8,pe,he+16,de,$e),Ee=ge.line(ue,pe,ue,pe+de,$e),Se=ge.line(ue+he,pe,ue+he,pe+de,$e);oe.insert(()=>Ee,":first-child"),oe.insert(()=>Se,":first-child");const ve=oe.insert(()=>Te,":first-child"),{cssStyles:ke}=te;ve.attr("class","basic label-container").attr("style",handleUndefinedAttr(ke)),updateNodeBounds(te,ve)}else{const ge=insertPolygonShape(oe,he,de,fe);re&&ge.attr("style",re),updateNodeBounds(te,ge)}return te.intersect=function(ge){return intersect_default.polygon(te,fe,ge)},oe}__name(subroutine,"subroutine");async function taggedRect(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le}=await labelHelper(ie,te,getNodeClasses(te)),ae=Math.max(le.width+(te.padding??0)*2,(te==null?void 0:te.width)??0),he=Math.max(le.height+(te.padding??0)*2,(te==null?void 0:te.height)??0),de=-ae/2,ue=-he/2,pe=.2*he,fe=.2*he,{cssStyles:ge}=te,$e=at.svg(oe),Te=userNodeOverrides(te,{}),Ee=[{x:de-pe/2,y:ue},{x:de+ae+pe/2,y:ue},{x:de+ae+pe/2,y:ue+he},{x:de-pe/2,y:ue+he}],Se=[{x:de+ae-pe/2,y:ue+he},{x:de+ae+pe/2,y:ue+he},{x:de+ae+pe/2,y:ue+he-fe}];te.look!=="handDrawn"&&(Te.roughness=0,Te.fillStyle="solid");const ve=createPathFromPoints(Ee),ke=$e.path(ve,Te),Re=createPathFromPoints(Se),Ne=$e.path(Re,{...Te,fillStyle:"solid"}),xe=oe.insert(()=>Ne,":first-child");return xe.insert(()=>ke,":first-child"),xe.attr("class","basic label-container"),ge&&te.look!=="handDrawn"&&xe.selectAll("path").attr("style",ge),re&&te.look!=="handDrawn"&&xe.selectAll("path").attr("style",re),updateNodeBounds(te,xe),te.intersect=function(ze){return intersect_default.polygon(te,Ee,ze)},oe}__name(taggedRect,"taggedRect");async function taggedWaveEdgedRectangle(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le,label:ae}=await labelHelper(ie,te,getNodeClasses(te)),he=Math.max(le.width+(te.padding??0)*2,(te==null?void 0:te.width)??0),de=Math.max(le.height+(te.padding??0)*2,(te==null?void 0:te.height)??0),ue=de/4,pe=.2*he,fe=.2*de,ge=de+ue,{cssStyles:$e}=te,Te=at.svg(oe),Ee=userNodeOverrides(te,{});te.look!=="handDrawn"&&(Ee.roughness=0,Ee.fillStyle="solid");const Se=[{x:-he/2-he/2*.1,y:ge/2},...generateFullSineWavePoints(-he/2-he/2*.1,ge/2,he/2+he/2*.1,ge/2,ue,.8),{x:he/2+he/2*.1,y:-ge/2},{x:-he/2-he/2*.1,y:-ge/2}],ve=-he/2+he/2*.1,ke=-ge/2-fe*.4,Re=[{x:ve+he-pe,y:(ke+de)*1.4},{x:ve+he,y:ke+de-fe},{x:ve+he,y:(ke+de)*.9},...generateFullSineWavePoints(ve+he,(ke+de)*1.3,ve+he-pe,(ke+de)*1.5,-de*.03,.5)],Ne=createPathFromPoints(Se),xe=Te.path(Ne,Ee),ze=createPathFromPoints(Re),Me=Te.path(ze,{...Ee,fillStyle:"solid"}),Ae=oe.insert(()=>Me,":first-child");return Ae.insert(()=>xe,":first-child"),Ae.attr("class","basic label-container"),$e&&te.look!=="handDrawn"&&Ae.selectAll("path").attr("style",$e),re&&te.look!=="handDrawn"&&Ae.selectAll("path").attr("style",re),Ae.attr("transform",`translate(0,${-ue/2})`),ae.attr("transform",`translate(${-he/2+(te.padding??0)-(le.x-(le.left??0))},${-de/2+(te.padding??0)-ue/2-(le.y-(le.top??0))})`),updateNodeBounds(te,Ae),te.intersect=function(Qe){return intersect_default.polygon(te,Se,Qe)},oe}__name(taggedWaveEdgedRectangle,"taggedWaveEdgedRectangle");async function text(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le}=await labelHelper(ie,te,getNodeClasses(te)),ae=Math.max(le.width+te.padding,(te==null?void 0:te.width)||0),he=Math.max(le.height+te.padding,(te==null?void 0:te.height)||0),de=-ae/2,ue=-he/2,pe=oe.insert("rect",":first-child");return pe.attr("class","text").attr("style",re).attr("rx",0).attr("ry",0).attr("x",de).attr("y",ue).attr("width",ae).attr("height",he),updateNodeBounds(te,pe),te.intersect=function(fe){return intersect_default.rect(te,fe)},oe}__name(text,"text");var createCylinderPathD3=__name((ie,te,ne,re,oe,le)=>`M${ie},${te}
    a${oe},${le} 0,0,1 0,${-re}
    l${ne},0
    a${oe},${le} 0,0,1 0,${re}
    M${ne},${-re}
    a${oe},${le} 0,0,0 0,${re}
    l${-ne},0`,"createCylinderPathD"),createOuterCylinderPathD3=__name((ie,te,ne,re,oe,le)=>[`M${ie},${te}`,`M${ie+ne},${te}`,`a${oe},${le} 0,0,0 0,${-re}`,`l${-ne},0`,`a${oe},${le} 0,0,0 0,${re}`,`l${ne},0`].join(" "),"createOuterCylinderPathD"),createInnerCylinderPathD3=__name((ie,te,ne,re,oe,le)=>[`M${ie+ne/2},${-re/2}`,`a${oe},${le} 0,0,0 0,${re}`].join(" "),"createInnerCylinderPathD");async function tiltedCylinder(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le,label:ae,halfPadding:he}=await labelHelper(ie,te,getNodeClasses(te)),de=te.look==="neo"?he*2:he,ue=le.height+de,pe=ue/2,fe=pe/(2.5+ue/50),ge=le.width+fe+de,{cssStyles:$e}=te;let Te;if(te.look==="handDrawn"){const Ee=at.svg(oe),Se=createOuterCylinderPathD3(0,0,ge,ue,fe,pe),ve=createInnerCylinderPathD3(0,0,ge,ue,fe,pe),ke=Ee.path(Se,userNodeOverrides(te,{})),Re=Ee.path(ve,userNodeOverrides(te,{fill:"none"}));Te=oe.insert(()=>Re,":first-child"),Te=oe.insert(()=>ke,":first-child"),Te.attr("class","basic label-container"),$e&&Te.attr("style",$e)}else{const Ee=createCylinderPathD3(0,0,ge,ue,fe,pe);Te=oe.insert("path",":first-child").attr("d",Ee).attr("class","basic label-container").attr("style",handleUndefinedAttr($e)).attr("style",re),Te.attr("class","basic label-container"),$e&&Te.selectAll("path").attr("style",$e),re&&Te.selectAll("path").attr("style",re)}return Te.attr("label-offset-x",fe),Te.attr("transform",`translate(${-ge/2}, ${ue/2} )`),ae.attr("transform",`translate(${-(le.width/2)-fe-(le.x-(le.left??0))}, ${-(le.height/2)-(le.y-(le.top??0))})`),updateNodeBounds(te,Te),te.intersect=function(Ee){const Se=intersect_default.rect(te,Ee),ve=Se.y-(te.y??0);if(pe!=0&&(Math.abs(ve)<(te.height??0)/2||Math.abs(ve)==(te.height??0)/2&&Math.abs(Se.x-(te.x??0))>(te.width??0)/2-fe)){let ke=fe*fe*(1-ve*ve/(pe*pe));ke!=0&&(ke=Math.sqrt(Math.abs(ke))),ke=fe-ke,Ee.x-(te.x??0)>0&&(ke=-ke),Se.x+=ke}return Se},oe}__name(tiltedCylinder,"tiltedCylinder");async function trapezoid(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le}=await labelHelper(ie,te,getNodeClasses(te)),ae=le.width+te.padding,he=le.height+te.padding,de=[{x:-3*he/6,y:0},{x:ae+3*he/6,y:0},{x:ae,y:-he},{x:0,y:-he}];let ue;const{cssStyles:pe}=te;if(te.look==="handDrawn"){const fe=at.svg(oe),ge=userNodeOverrides(te,{}),$e=createPathFromPoints(de),Te=fe.path($e,ge);ue=oe.insert(()=>Te,":first-child").attr("transform",`translate(${-ae/2}, ${he/2})`),pe&&ue.attr("style",pe)}else ue=insertPolygonShape(oe,ae,he,de);return re&&ue.attr("style",re),te.width=ae,te.height=he,updateNodeBounds(te,ue),te.intersect=function(fe){return intersect_default.polygon(te,de,fe)},oe}__name(trapezoid,"trapezoid");async function trapezoidalPentagon(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le}=await labelHelper(ie,te,getNodeClasses(te)),ae=60,he=20,de=Math.max(ae,le.width+(te.padding??0)*2,(te==null?void 0:te.width)??0),ue=Math.max(he,le.height+(te.padding??0)*2,(te==null?void 0:te.height)??0),{cssStyles:pe}=te,fe=at.svg(oe),ge=userNodeOverrides(te,{});te.look!=="handDrawn"&&(ge.roughness=0,ge.fillStyle="solid");const $e=[{x:-de/2*.8,y:-ue/2},{x:de/2*.8,y:-ue/2},{x:de/2,y:-ue/2*.6},{x:de/2,y:ue/2},{x:-de/2,y:ue/2},{x:-de/2,y:-ue/2*.6}],Te=createPathFromPoints($e),Ee=fe.path(Te,ge),Se=oe.insert(()=>Ee,":first-child");return Se.attr("class","basic label-container"),pe&&te.look!=="handDrawn"&&Se.selectChildren("path").attr("style",pe),re&&te.look!=="handDrawn"&&Se.selectChildren("path").attr("style",re),updateNodeBounds(te,Se),te.intersect=function(ve){return intersect_default.polygon(te,$e,ve)},oe}__name(trapezoidalPentagon,"trapezoidalPentagon");async function triangle(ie,te){var ke;const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le,label:ae}=await labelHelper(ie,te,getNodeClasses(te)),he=evaluate((ke=getConfig2().flowchart)==null?void 0:ke.htmlLabels),de=le.width+(te.padding??0),ue=de+le.height,pe=de+le.height,fe=[{x:0,y:0},{x:pe,y:0},{x:pe/2,y:-ue}],{cssStyles:ge}=te,$e=at.svg(oe),Te=userNodeOverrides(te,{});te.look!=="handDrawn"&&(Te.roughness=0,Te.fillStyle="solid");const Ee=createPathFromPoints(fe),Se=$e.path(Ee,Te),ve=oe.insert(()=>Se,":first-child").attr("transform",`translate(${-ue/2}, ${ue/2})`);return ge&&te.look!=="handDrawn"&&ve.selectChildren("path").attr("style",ge),re&&te.look!=="handDrawn"&&ve.selectChildren("path").attr("style",re),te.width=de,te.height=ue,updateNodeBounds(te,ve),ae.attr("transform",`translate(${-le.width/2-(le.x-(le.left??0))}, ${ue/2-(le.height+(te.padding??0)/(he?2:1)-(le.y-(le.top??0)))})`),te.intersect=function(Re){return log.info("Triangle intersect",te,fe,Re),intersect_default.polygon(te,fe,Re)},oe}__name(triangle,"triangle");async function waveEdgedRectangle(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le,label:ae}=await labelHelper(ie,te,getNodeClasses(te)),he=Math.max(le.width+(te.padding??0)*2,(te==null?void 0:te.width)??0),de=Math.max(le.height+(te.padding??0)*2,(te==null?void 0:te.height)??0),ue=de/8,pe=de+ue,{cssStyles:fe}=te,$e=70-he,Te=$e>0?$e/2:0,Ee=at.svg(oe),Se=userNodeOverrides(te,{});te.look!=="handDrawn"&&(Se.roughness=0,Se.fillStyle="solid");const ve=[{x:-he/2-Te,y:pe/2},...generateFullSineWavePoints(-he/2-Te,pe/2,he/2+Te,pe/2,ue,.8),{x:he/2+Te,y:-pe/2},{x:-he/2-Te,y:-pe/2}],ke=createPathFromPoints(ve),Re=Ee.path(ke,Se),Ne=oe.insert(()=>Re,":first-child");return Ne.attr("class","basic label-container"),fe&&te.look!=="handDrawn"&&Ne.selectAll("path").attr("style",fe),re&&te.look!=="handDrawn"&&Ne.selectAll("path").attr("style",re),Ne.attr("transform",`translate(0,${-ue/2})`),ae.attr("transform",`translate(${-he/2+(te.padding??0)-(le.x-(le.left??0))},${-de/2+(te.padding??0)-ue-(le.y-(le.top??0))})`),updateNodeBounds(te,Ne),te.intersect=function(xe){return intersect_default.polygon(te,ve,xe)},oe}__name(waveEdgedRectangle,"waveEdgedRectangle");async function waveRectangle(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le}=await labelHelper(ie,te,getNodeClasses(te)),ae=100,he=50,de=Math.max(le.width+(te.padding??0)*2,(te==null?void 0:te.width)??0),ue=Math.max(le.height+(te.padding??0)*2,(te==null?void 0:te.height)??0),pe=de/ue;let fe=de,ge=ue;fe>ge*pe?ge=fe/pe:fe=ge*pe,fe=Math.max(fe,ae),ge=Math.max(ge,he);const $e=Math.min(ge*.2,ge/4),Te=ge+$e*2,{cssStyles:Ee}=te,Se=at.svg(oe),ve=userNodeOverrides(te,{});te.look!=="handDrawn"&&(ve.roughness=0,ve.fillStyle="solid");const ke=[{x:-fe/2,y:Te/2},...generateFullSineWavePoints(-fe/2,Te/2,fe/2,Te/2,$e,1),{x:fe/2,y:-Te/2},...generateFullSineWavePoints(fe/2,-Te/2,-fe/2,-Te/2,$e,-1)],Re=createPathFromPoints(ke),Ne=Se.path(Re,ve),xe=oe.insert(()=>Ne,":first-child");return xe.attr("class","basic label-container"),Ee&&te.look!=="handDrawn"&&xe.selectAll("path").attr("style",Ee),re&&te.look!=="handDrawn"&&xe.selectAll("path").attr("style",re),updateNodeBounds(te,xe),te.intersect=function(ze){return intersect_default.polygon(te,ke,ze)},oe}__name(waveRectangle,"waveRectangle");async function windowPane(ie,te){const{labelStyles:ne,nodeStyles:re}=styles2String(te);te.labelStyle=ne;const{shapeSvg:oe,bbox:le,label:ae}=await labelHelper(ie,te,getNodeClasses(te)),he=Math.max(le.width+(te.padding??0)*2,(te==null?void 0:te.width)??0),de=Math.max(le.height+(te.padding??0)*2,(te==null?void 0:te.height)??0),ue=5,pe=-he/2,fe=-de/2,{cssStyles:ge}=te,$e=at.svg(oe),Te=userNodeOverrides(te,{}),Ee=[{x:pe-ue,y:fe-ue},{x:pe-ue,y:fe+de},{x:pe+he,y:fe+de},{x:pe+he,y:fe-ue}],Se=`M${pe-ue},${fe-ue} L${pe+he},${fe-ue} L${pe+he},${fe+de} L${pe-ue},${fe+de} L${pe-ue},${fe-ue}
                M${pe-ue},${fe} L${pe+he},${fe}
                M${pe},${fe-ue} L${pe},${fe+de}`;te.look!=="handDrawn"&&(Te.roughness=0,Te.fillStyle="solid");const ve=$e.path(Se,Te),ke=oe.insert(()=>ve,":first-child");return ke.attr("transform",`translate(${ue/2}, ${ue/2})`),ke.attr("class","basic label-container"),ge&&te.look!=="handDrawn"&&ke.selectAll("path").attr("style",ge),re&&te.look!=="handDrawn"&&ke.selectAll("path").attr("style",re),ae.attr("transform",`translate(${-(le.width/2)+ue/2-(le.x-(le.left??0))}, ${-(le.height/2)+ue/2-(le.y-(le.top??0))})`),updateNodeBounds(te,ke),te.intersect=function(Re){return intersect_default.polygon(te,Ee,Re)},oe}__name(windowPane,"windowPane");async function textHelper(ie,te,ne,re,oe=ne.class.padding??12){const le=re?0:3,ae=ie.insert("g").attr("class",getNodeClasses(te)).attr("id",te.domId||te.id);let he=null,de=null,ue=null,pe=null,fe=0,ge=0,$e=0;if(he=ae.insert("g").attr("class","annotation-group text"),te.annotations.length>0){const ke=te.annotations[0];await addText(he,{text:`«${ke}»`},0),fe=he.node().getBBox().height}de=ae.insert("g").attr("class","label-group text"),await addText(de,te,0,["font-weight: bolder"]);const Te=de.node().getBBox();ge=Te.height,ue=ae.insert("g").attr("class","members-group text");let Ee=0;for(const ke of te.members){const Re=await addText(ue,ke,Ee,[ke.parseClassifier()]);Ee+=Re+le}$e=ue.node().getBBox().height,$e<=0&&($e=oe/2),pe=ae.insert("g").attr("class","methods-group text");let Se=0;for(const ke of te.methods){const Re=await addText(pe,ke,Se,[ke.parseClassifier()]);Se+=Re+le}let ve=ae.node().getBBox();if(he!==null){const ke=he.node().getBBox();he.attr("transform",`translate(${-ke.width/2})`)}return de.attr("transform",`translate(${-Te.width/2}, ${fe})`),ve=ae.node().getBBox(),ue.attr("transform",`translate(0, ${fe+ge+oe*2})`),ve=ae.node().getBBox(),pe.attr("transform",`translate(0, ${fe+ge+($e?$e+oe*4:oe*2)})`),ve=ae.node().getBBox(),{shapeSvg:ae,bbox:ve}}__name(textHelper,"textHelper");async function addText(ie,te,ne,re=[]){const oe=ie.insert("g").attr("class","label").attr("style",re.join("; ")),le=getConfig();let ae="useHtmlLabels"in te?te.useHtmlLabels:evaluate(le.htmlLabels)??!0,he="";"text"in te?he=te.text:he=te.label,!ae&&he.startsWith("\\")&&(he=he.substring(1)),hasKatex(he)&&(ae=!0);const de=await createText(oe,sanitizeText3(decodeEntities(he)),{width:calculateTextWidth(he,le)+50,classes:"markdown-node-label",useHtmlLabels:ae},le);let ue,pe=1;if(ae){const fe=de.children[0],ge=select(de);pe=fe.innerHTML.split("<br>").length,fe.innerHTML.includes("</math>")&&(pe+=fe.innerHTML.split("<mrow>").length-1);const $e=fe.getElementsByTagName("img");if($e){const Te=he.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...$e].map(Ee=>new Promise(Se=>{function ve(){var ke;if(Ee.style.display="flex",Ee.style.flexDirection="column",Te){const Re=((ke=le.fontSize)==null?void 0:ke.toString())??window.getComputedStyle(document.body).fontSize,Ne=5,xe=parseInt(Re,10)*Ne+"px";Ee.style.minWidth=xe,Ee.style.maxWidth=xe}else Ee.style.width="100%";Se(Ee)}__name(ve,"setupImage"),setTimeout(()=>{Ee.complete&&ve()}),Ee.addEventListener("error",ve),Ee.addEventListener("load",ve)})))}ue=fe.getBoundingClientRect(),ge.attr("width",ue.width),ge.attr("height",ue.height)}else{re.includes("font-weight: bolder")&&select(de).selectAll("tspan").attr("font-weight",""),pe=de.children.length;const fe=de.children[0];(de.textContent===""||de.textContent.includes("&gt"))&&(fe.textContent=he[0]+he.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),he[1]===" "&&(fe.textContent=fe.textContent[0]+" "+fe.textContent.substring(1))),fe.textContent==="undefined"&&(fe.textContent=""),ue=de.getBBox()}return oe.attr("transform","translate(0,"+(-ue.height/(2*pe)+ne)+")"),ue.height}__name(addText,"addText");async function classBox(ie,te){var Qe,ht;const ne=getConfig2(),re=ne.class.padding??12,oe=re,le=te.useHtmlLabels??evaluate(ne.htmlLabels)??!0,ae=te;ae.annotations=ae.annotations??[],ae.members=ae.members??[],ae.methods=ae.methods??[];const{shapeSvg:he,bbox:de}=await textHelper(ie,te,ne,le,oe),{labelStyles:ue,nodeStyles:pe}=styles2String(te);te.labelStyle=ue,te.cssStyles=ae.styles||"";const fe=((Qe=ae.styles)==null?void 0:Qe.join(";"))||pe||"";te.cssStyles||(te.cssStyles=fe.replaceAll("!important","").split(";"));const ge=ae.members.length===0&&ae.methods.length===0&&!((ht=ne.class)!=null&&ht.hideEmptyMembersBox),$e=at.svg(he),Te=userNodeOverrides(te,{});te.look!=="handDrawn"&&(Te.roughness=0,Te.fillStyle="solid");const Ee=de.width;let Se=de.height;ae.members.length===0&&ae.methods.length===0?Se+=oe:ae.members.length>0&&ae.methods.length===0&&(Se+=oe*2);const ve=-Ee/2,ke=-Se/2,Re=$e.rectangle(ve-re,ke-re-(ge?re:ae.members.length===0&&ae.methods.length===0?-re/2:0),Ee+2*re,Se+2*re+(ge?re*2:ae.members.length===0&&ae.methods.length===0?-re:0),Te),Ne=he.insert(()=>Re,":first-child");Ne.attr("class","basic label-container");const xe=Ne.node().getBBox();he.selectAll(".text").each((Pe,_t,rt)=>{var je;const Ke=select(rt[_t]),Je=Ke.attr("transform");let qe=0;if(Je){const Ot=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(Je);Ot&&(qe=parseFloat(Ot[2]))}let ct=qe+ke+re-(ge?re:ae.members.length===0&&ae.methods.length===0?-re/2:0);le||(ct-=4);let Le=ve;(Ke.attr("class").includes("label-group")||Ke.attr("class").includes("annotation-group"))&&(Le=-((je=Ke.node())==null?void 0:je.getBBox().width)/2||0,he.selectAll("text").each(function(pt,Ot,Ht){window.getComputedStyle(Ht[Ot]).textAnchor==="middle"&&(Le=0)})),Ke.attr("transform",`translate(${Le}, ${ct})`)});const ze=he.select(".annotation-group").node().getBBox().height-(ge?re/2:0)||0,Me=he.select(".label-group").node().getBBox().height-(ge?re/2:0)||0,Ae=he.select(".members-group").node().getBBox().height-(ge?re/2:0)||0;if(ae.members.length>0||ae.methods.length>0||ge){const Pe=$e.line(xe.x,ze+Me+ke+re,xe.x+xe.width,ze+Me+ke+re,Te);he.insert(()=>Pe).attr("class","divider").attr("style",fe)}if(ge||ae.members.length>0||ae.methods.length>0){const Pe=$e.line(xe.x,ze+Me+Ae+ke+oe*2+re,xe.x+xe.width,ze+Me+Ae+ke+re+oe*2,Te);he.insert(()=>Pe).attr("class","divider").attr("style",fe)}if(ae.look!=="handDrawn"&&he.selectAll("path").attr("style",fe),Ne.select(":nth-child(2)").attr("style",fe),he.selectAll(".divider").select("path").attr("style",fe),te.labelStyle?he.selectAll("span").attr("style",te.labelStyle):he.selectAll("span").attr("style",fe),!le){const Pe=RegExp(/color\s*:\s*([^;]*)/),_t=Pe.exec(fe);if(_t){const rt=_t[0].replace("color","fill");he.selectAll("tspan").attr("style",rt)}else if(ue){const rt=Pe.exec(ue);if(rt){const Ke=rt[0].replace("color","fill");he.selectAll("tspan").attr("style",Ke)}}}return updateNodeBounds(te,Ne),te.intersect=function(Pe){return intersect_default.rect(te,Pe)},he}__name(classBox,"classBox");var colorFromPriority=__name(ie=>{switch(ie){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function kanbanItem(ie,te,{config:ne}){var _t,rt;const{labelStyles:re,nodeStyles:oe}=styles2String(te);te.labelStyle=re||"";const le=10,ae=te.width;te.width=(te.width??200)-10;const{shapeSvg:he,bbox:de,label:ue}=await labelHelper(ie,te,getNodeClasses(te)),pe=te.padding||10;let fe="",ge;"ticket"in te&&te.ticket&&((_t=ne==null?void 0:ne.kanban)!=null&&_t.ticketBaseUrl)&&(fe=(rt=ne==null?void 0:ne.kanban)==null?void 0:rt.ticketBaseUrl.replace("#TICKET#",te.ticket),ge=he.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",fe).attr("target","_blank"));const $e={useHtmlLabels:te.useHtmlLabels,labelStyle:te.labelStyle||"",width:te.width,img:te.img,padding:te.padding||8,centerLabel:!1};let Te,Ee;ge?{label:Te,bbox:Ee}=await insertLabel(ge,"ticket"in te&&te.ticket||"",$e):{label:Te,bbox:Ee}=await insertLabel(he,"ticket"in te&&te.ticket||"",$e);const{label:Se,bbox:ve}=await insertLabel(he,"assigned"in te&&te.assigned||"",$e);te.width=ae;const ke=10,Re=(te==null?void 0:te.width)||0,Ne=Math.max(Ee.height,ve.height)/2,xe=Math.max(de.height+ke*2,(te==null?void 0:te.height)||0)+Ne,ze=-Re/2,Me=-xe/2;ue.attr("transform","translate("+(pe-Re/2)+", "+(-Ne-de.height/2)+")"),Te.attr("transform","translate("+(pe-Re/2)+", "+(-Ne+de.height/2)+")"),Se.attr("transform","translate("+(pe+Re/2-ve.width-2*le)+", "+(-Ne+de.height/2)+")");let Ae;const{rx:Qe,ry:ht}=te,{cssStyles:Pe}=te;if(te.look==="handDrawn"){const Ke=at.svg(he),Je=userNodeOverrides(te,{}),qe=Qe||ht?Ke.path(createRoundedRectPathD(ze,Me,Re,xe,Qe||0),Je):Ke.rectangle(ze,Me,Re,xe,Je);Ae=he.insert(()=>qe,":first-child"),Ae.attr("class","basic label-container").attr("style",Pe||null)}else{Ae=he.insert("rect",":first-child"),Ae.attr("class","basic label-container __APA__").attr("style",oe).attr("rx",Qe??5).attr("ry",ht??5).attr("x",ze).attr("y",Me).attr("width",Re).attr("height",xe);const Ke="priority"in te&&te.priority;if(Ke){const Je=he.append("line"),qe=ze+2,ct=Me+Math.floor((Qe??0)/2),Le=Me+xe-Math.floor((Qe??0)/2);Je.attr("x1",qe).attr("y1",ct).attr("x2",qe).attr("y2",Le).attr("stroke-width","4").attr("stroke",colorFromPriority(Ke))}}return updateNodeBounds(te,Ae),te.height=xe,te.intersect=function(Ke){return intersect_default.rect(te,Ke)},he}__name(kanbanItem,"kanbanItem");var shapesDefs=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:squareRect2},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:roundedRect},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:stadium},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:subroutine},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:cylinder},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:circle$1},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:question},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:hexagon},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:lean_right},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:lean_left},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:trapezoid},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:inv_trapezoid},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:doublecircle},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:text},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:card},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:shadedProcess},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:stateStart},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:stateEnd},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:forkJoin},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:hourglass},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:curlyBraceLeft},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:curlyBraceRight},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:curlyBraces},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:lightningBolt},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:waveEdgedRectangle},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:halfRoundedRectangle},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:tiltedCylinder},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:linedCylinder},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:curvedTrapezoid},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:dividedRectangle},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:triangle},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:windowPane},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:filledCircle},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:trapezoidalPentagon},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:flippedTriangle},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:slopedRect},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:multiWaveEdgedRectangle},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:multiRect},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:bowTieRect},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:crossedCircle},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:taggedWaveEdgedRectangle},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:taggedRect},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:waveRectangle},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:rect_left_inv_arrow},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:linedWaveEdgedRect}],generateShapeMap=__name(()=>{const te=[...Object.entries({state,choice,note,rectWithTitle,labelRect,iconSquare,iconCircle,icon,iconRounded,imageSquare,anchor,kanbanItem,classBox}),...shapesDefs.flatMap(ne=>[ne.shortName,..."aliases"in ne?ne.aliases:[],..."internalAliases"in ne?ne.internalAliases:[]].map(oe=>[oe,ne.handler]))];return Object.fromEntries(te)},"generateShapeMap"),shapes2=generateShapeMap();function isValidShape(ie){return ie in shapes2}__name(isValidShape,"isValidShape");var nodeElems=new Map;async function insertNode(ie,te,ne){let re,oe;te.shape==="rect"&&(te.rx&&te.ry?te.shape="roundedRect":te.shape="squareRect");const le=te.shape?shapes2[te.shape]:void 0;if(!le)throw new Error(`No such shape: ${te.shape}. Please check your syntax.`);if(te.link){let ae;ne.config.securityLevel==="sandbox"?ae="_top":te.linkTarget&&(ae=te.linkTarget||"_blank"),re=ie.insert("svg:a").attr("xlink:href",te.link).attr("target",ae??null),oe=await le(re,te,ne)}else oe=await le(ie,te,ne),re=oe;return te.tooltip&&oe.attr("title",te.tooltip),nodeElems.set(te.id,re),te.haveCallback&&re.attr("class",re.attr("class")+" clickable"),re}__name(insertNode,"insertNode");var setNodeElem=__name((ie,te)=>{nodeElems.set(te.id,ie)},"setNodeElem"),clear2=__name(()=>{nodeElems.clear()},"clear"),positionNode=__name(ie=>{const te=nodeElems.get(ie.id);log.trace("Transforming node",ie.diff,ie,"translate("+(ie.x-ie.width/2-5)+", "+ie.width/2+")");const ne=8,re=ie.diff||0;return ie.clusterNode?te.attr("transform","translate("+(ie.x+re-ie.width/2)+", "+(ie.y-ie.height/2-ne)+")"):te.attr("transform","translate("+ie.x+", "+ie.y+")"),re},"positionNode"),markerOffsets={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:4};function calculateDeltaAndAngle(ie,te){if(ie===void 0||te===void 0)return{angle:0,deltaX:0,deltaY:0};ie=pointTransformer(ie),te=pointTransformer(te);const[ne,re]=[ie.x,ie.y],[oe,le]=[te.x,te.y],ae=oe-ne,he=le-re;return{angle:Math.atan(he/ae),deltaX:ae,deltaY:he}}__name(calculateDeltaAndAngle,"calculateDeltaAndAngle");var pointTransformer=__name(ie=>Array.isArray(ie)?{x:ie[0],y:ie[1]}:ie,"pointTransformer"),getLineFunctionsWithOffset=__name(ie=>({x:__name(function(te,ne,re){let oe=0;const le=pointTransformer(re[0]).x<pointTransformer(re[re.length-1]).x?"left":"right";if(ne===0&&Object.hasOwn(markerOffsets,ie.arrowTypeStart)){const{angle:$e,deltaX:Te}=calculateDeltaAndAngle(re[0],re[1]);oe=markerOffsets[ie.arrowTypeStart]*Math.cos($e)*(Te>=0?1:-1)}else if(ne===re.length-1&&Object.hasOwn(markerOffsets,ie.arrowTypeEnd)){const{angle:$e,deltaX:Te}=calculateDeltaAndAngle(re[re.length-1],re[re.length-2]);oe=markerOffsets[ie.arrowTypeEnd]*Math.cos($e)*(Te>=0?1:-1)}const ae=Math.abs(pointTransformer(te).x-pointTransformer(re[re.length-1]).x),he=Math.abs(pointTransformer(te).y-pointTransformer(re[re.length-1]).y),de=Math.abs(pointTransformer(te).x-pointTransformer(re[0]).x),ue=Math.abs(pointTransformer(te).y-pointTransformer(re[0]).y),pe=markerOffsets[ie.arrowTypeStart],fe=markerOffsets[ie.arrowTypeEnd],ge=1;if(ae<fe&&ae>0&&he<fe){let $e=fe+ge-ae;$e*=le==="right"?-1:1,oe-=$e}if(de<pe&&de>0&&ue<pe){let $e=pe+ge-de;$e*=le==="right"?-1:1,oe+=$e}return pointTransformer(te).x+oe},"x"),y:__name(function(te,ne,re){let oe=0;const le=pointTransformer(re[0]).y<pointTransformer(re[re.length-1]).y?"down":"up";if(ne===0&&Object.hasOwn(markerOffsets,ie.arrowTypeStart)){const{angle:$e,deltaY:Te}=calculateDeltaAndAngle(re[0],re[1]);oe=markerOffsets[ie.arrowTypeStart]*Math.abs(Math.sin($e))*(Te>=0?1:-1)}else if(ne===re.length-1&&Object.hasOwn(markerOffsets,ie.arrowTypeEnd)){const{angle:$e,deltaY:Te}=calculateDeltaAndAngle(re[re.length-1],re[re.length-2]);oe=markerOffsets[ie.arrowTypeEnd]*Math.abs(Math.sin($e))*(Te>=0?1:-1)}const ae=Math.abs(pointTransformer(te).y-pointTransformer(re[re.length-1]).y),he=Math.abs(pointTransformer(te).x-pointTransformer(re[re.length-1]).x),de=Math.abs(pointTransformer(te).y-pointTransformer(re[0]).y),ue=Math.abs(pointTransformer(te).x-pointTransformer(re[0]).x),pe=markerOffsets[ie.arrowTypeStart],fe=markerOffsets[ie.arrowTypeEnd],ge=1;if(ae<fe&&ae>0&&he<fe){let $e=fe+ge-ae;$e*=le==="up"?-1:1,oe-=$e}if(de<pe&&de>0&&ue<pe){let $e=pe+ge-de;$e*=le==="up"?-1:1,oe+=$e}return pointTransformer(te).y+oe},"y")}),"getLineFunctionsWithOffset"),addEdgeMarkers=__name((ie,te,ne,re,oe)=>{te.arrowTypeStart&&addEdgeMarker(ie,"start",te.arrowTypeStart,ne,re,oe),te.arrowTypeEnd&&addEdgeMarker(ie,"end",te.arrowTypeEnd,ne,re,oe)},"addEdgeMarkers"),arrowTypesMap={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},addEdgeMarker=__name((ie,te,ne,re,oe,le)=>{const ae=arrowTypesMap[ne];if(!ae){log.warn(`Unknown arrow type: ${ne}`);return}const he=te==="start"?"Start":"End";ie.attr(`marker-${te}`,`url(${re}#${oe}_${le}-${ae}${he})`)},"addEdgeMarker"),edgeLabels=new Map,terminalLabels=new Map,clear=__name(()=>{edgeLabels.clear(),terminalLabels.clear()},"clear"),getLabelStyles=__name(ie=>ie?ie.reduce((ne,re)=>ne+";"+re,""):"","getLabelStyles"),insertEdgeLabel=__name(async(ie,te)=>{let ne=evaluate(getConfig2().flowchart.htmlLabels);const re=await createText(ie,te.label,{style:getLabelStyles(te.labelStyle),useHtmlLabels:ne,addSvgBackground:!0,isNode:!1});log.info("abc82",te,te.labelType);const oe=ie.insert("g").attr("class","edgeLabel"),le=oe.insert("g").attr("class","label");le.node().appendChild(re);let ae=re.getBBox();if(ne){const de=re.children[0],ue=select(re);ae=de.getBoundingClientRect(),ue.attr("width",ae.width),ue.attr("height",ae.height)}le.attr("transform","translate("+-ae.width/2+", "+-ae.height/2+")"),edgeLabels.set(te.id,oe),te.width=ae.width,te.height=ae.height;let he;if(te.startLabelLeft){const de=await createLabel_default(te.startLabelLeft,getLabelStyles(te.labelStyle)),ue=ie.insert("g").attr("class","edgeTerminals"),pe=ue.insert("g").attr("class","inner");he=pe.node().appendChild(de);const fe=de.getBBox();pe.attr("transform","translate("+-fe.width/2+", "+-fe.height/2+")"),terminalLabels.get(te.id)||terminalLabels.set(te.id,{}),terminalLabels.get(te.id).startLeft=ue,setTerminalWidth(he,te.startLabelLeft)}if(te.startLabelRight){const de=await createLabel_default(te.startLabelRight,getLabelStyles(te.labelStyle)),ue=ie.insert("g").attr("class","edgeTerminals"),pe=ue.insert("g").attr("class","inner");he=ue.node().appendChild(de),pe.node().appendChild(de);const fe=de.getBBox();pe.attr("transform","translate("+-fe.width/2+", "+-fe.height/2+")"),terminalLabels.get(te.id)||terminalLabels.set(te.id,{}),terminalLabels.get(te.id).startRight=ue,setTerminalWidth(he,te.startLabelRight)}if(te.endLabelLeft){const de=await createLabel_default(te.endLabelLeft,getLabelStyles(te.labelStyle)),ue=ie.insert("g").attr("class","edgeTerminals"),pe=ue.insert("g").attr("class","inner");he=pe.node().appendChild(de);const fe=de.getBBox();pe.attr("transform","translate("+-fe.width/2+", "+-fe.height/2+")"),ue.node().appendChild(de),terminalLabels.get(te.id)||terminalLabels.set(te.id,{}),terminalLabels.get(te.id).endLeft=ue,setTerminalWidth(he,te.endLabelLeft)}if(te.endLabelRight){const de=await createLabel_default(te.endLabelRight,getLabelStyles(te.labelStyle)),ue=ie.insert("g").attr("class","edgeTerminals"),pe=ue.insert("g").attr("class","inner");he=pe.node().appendChild(de);const fe=de.getBBox();pe.attr("transform","translate("+-fe.width/2+", "+-fe.height/2+")"),ue.node().appendChild(de),terminalLabels.get(te.id)||terminalLabels.set(te.id,{}),terminalLabels.get(te.id).endRight=ue,setTerminalWidth(he,te.endLabelRight)}return re},"insertEdgeLabel");function setTerminalWidth(ie,te){getConfig2().flowchart.htmlLabels&&ie&&(ie.style.width=te.length*9+"px",ie.style.height="12px")}__name(setTerminalWidth,"setTerminalWidth");var positionEdgeLabel=__name((ie,te)=>{log.debug("Moving label abc88 ",ie.id,ie.label,edgeLabels.get(ie.id),te);let ne=te.updatedPath?te.updatedPath:te.originalPath;const re=getConfig2(),{subGraphTitleTotalMargin:oe}=getSubGraphTitleMargins(re);if(ie.label){const le=edgeLabels.get(ie.id);let ae=ie.x,he=ie.y;if(ne){const de=utils_default.calcLabelPosition(ne);log.debug("Moving label "+ie.label+" from (",ae,",",he,") to (",de.x,",",de.y,") abc88"),te.updatedPath&&(ae=de.x,he=de.y)}le.attr("transform",`translate(${ae}, ${he+oe/2})`)}if(ie.startLabelLeft){const le=terminalLabels.get(ie.id).startLeft;let ae=ie.x,he=ie.y;if(ne){const de=utils_default.calcTerminalLabelPosition(ie.arrowTypeStart?10:0,"start_left",ne);ae=de.x,he=de.y}le.attr("transform",`translate(${ae}, ${he})`)}if(ie.startLabelRight){const le=terminalLabels.get(ie.id).startRight;let ae=ie.x,he=ie.y;if(ne){const de=utils_default.calcTerminalLabelPosition(ie.arrowTypeStart?10:0,"start_right",ne);ae=de.x,he=de.y}le.attr("transform",`translate(${ae}, ${he})`)}if(ie.endLabelLeft){const le=terminalLabels.get(ie.id).endLeft;let ae=ie.x,he=ie.y;if(ne){const de=utils_default.calcTerminalLabelPosition(ie.arrowTypeEnd?10:0,"end_left",ne);ae=de.x,he=de.y}le.attr("transform",`translate(${ae}, ${he})`)}if(ie.endLabelRight){const le=terminalLabels.get(ie.id).endRight;let ae=ie.x,he=ie.y;if(ne){const de=utils_default.calcTerminalLabelPosition(ie.arrowTypeEnd?10:0,"end_right",ne);ae=de.x,he=de.y}le.attr("transform",`translate(${ae}, ${he})`)}},"positionEdgeLabel"),outsideNode=__name((ie,te)=>{const ne=ie.x,re=ie.y,oe=Math.abs(te.x-ne),le=Math.abs(te.y-re),ae=ie.width/2,he=ie.height/2;return oe>=ae||le>=he},"outsideNode"),intersection=__name((ie,te,ne)=>{log.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(te)}
  insidePoint : ${JSON.stringify(ne)}
  node        : x:${ie.x} y:${ie.y} w:${ie.width} h:${ie.height}`);const re=ie.x,oe=ie.y,le=Math.abs(re-ne.x),ae=ie.width/2;let he=ne.x<te.x?ae-le:ae+le;const de=ie.height/2,ue=Math.abs(te.y-ne.y),pe=Math.abs(te.x-ne.x);if(Math.abs(oe-te.y)*ae>Math.abs(re-te.x)*de){let fe=ne.y<te.y?te.y-de-oe:oe-de-te.y;he=pe*fe/ue;const ge={x:ne.x<te.x?ne.x+he:ne.x-pe+he,y:ne.y<te.y?ne.y+ue-fe:ne.y-ue+fe};return he===0&&(ge.x=te.x,ge.y=te.y),pe===0&&(ge.x=te.x),ue===0&&(ge.y=te.y),log.debug(`abc89 top/bottom calc, Q ${ue}, q ${fe}, R ${pe}, r ${he}`,ge),ge}else{ne.x<te.x?he=te.x-ae-re:he=re-ae-te.x;let fe=ue*he/pe,ge=ne.x<te.x?ne.x+pe-he:ne.x-pe+he,$e=ne.y<te.y?ne.y+fe:ne.y-fe;return log.debug(`sides calc abc89, Q ${ue}, q ${fe}, R ${pe}, r ${he}`,{_x:ge,_y:$e}),he===0&&(ge=te.x,$e=te.y),pe===0&&(ge=te.x),ue===0&&($e=te.y),{x:ge,y:$e}}},"intersection"),cutPathAtIntersect=__name((ie,te)=>{log.warn("abc88 cutPathAtIntersect",ie,te);let ne=[],re=ie[0],oe=!1;return ie.forEach(le=>{if(log.info("abc88 checking point",le,te),!outsideNode(te,le)&&!oe){const ae=intersection(te,re,le);log.debug("abc88 inside",le,re,ae),log.debug("abc88 intersection",ae,te);let he=!1;ne.forEach(de=>{he=he||de.x===ae.x&&de.y===ae.y}),ne.some(de=>de.x===ae.x&&de.y===ae.y)?log.warn("abc88 no intersect",ae,ne):ne.push(ae),oe=!0}else log.warn("abc88 outside",le,re),re=le,oe||ne.push(le)}),log.debug("returning points",ne),ne},"cutPathAtIntersect");function extractCornerPoints(ie){const te=[],ne=[];for(let re=1;re<ie.length-1;re++){const oe=ie[re-1],le=ie[re],ae=ie[re+1];(oe.x===le.x&&le.y===ae.y&&Math.abs(le.x-ae.x)>5&&Math.abs(le.y-oe.y)>5||oe.y===le.y&&le.x===ae.x&&Math.abs(le.x-oe.x)>5&&Math.abs(le.y-ae.y)>5)&&(te.push(le),ne.push(re))}return{cornerPoints:te,cornerPointPositions:ne}}__name(extractCornerPoints,"extractCornerPoints");var findAdjacentPoint=__name(function(ie,te,ne){const re=te.x-ie.x,oe=te.y-ie.y,le=Math.sqrt(re*re+oe*oe),ae=ne/le;return{x:te.x-ae*re,y:te.y-ae*oe}},"findAdjacentPoint"),fixCorners=__name(function(ie){const{cornerPointPositions:te}=extractCornerPoints(ie),ne=[];for(let re=0;re<ie.length;re++)if(te.includes(re)){const oe=ie[re-1],le=ie[re+1],ae=ie[re],he=findAdjacentPoint(oe,ae,5),de=findAdjacentPoint(le,ae,5),ue=de.x-he.x,pe=de.y-he.y;ne.push(he);const fe=Math.sqrt(2)*2;let ge={x:ae.x,y:ae.y};if(Math.abs(le.x-oe.x)>10&&Math.abs(le.y-oe.y)>=10){log.debug("Corner point fixing",Math.abs(le.x-oe.x),Math.abs(le.y-oe.y));const $e=5;ae.x===he.x?ge={x:ue<0?he.x-$e+fe:he.x+$e-fe,y:pe<0?he.y-fe:he.y+fe}:ge={x:ue<0?he.x-fe:he.x+fe,y:pe<0?he.y-$e+fe:he.y+$e-fe}}else log.debug("Corner point skipping fixing",Math.abs(le.x-oe.x),Math.abs(le.y-oe.y));ne.push(ge,de)}else ne.push(ie[re]);return ne},"fixCorners"),insertEdge=__name(function(ie,te,ne,re,oe,le,ae){const{handDrawnSeed:he}=getConfig2();let de=te.points,ue=!1;const pe=oe;var fe=le;fe.intersect&&pe.intersect&&(de=de.slice(1,te.points.length-1),de.unshift(pe.intersect(de[0])),log.debug("Last point APA12",te.start,"-->",te.end,de[de.length-1],fe,fe.intersect(de[de.length-1])),de.push(fe.intersect(de[de.length-1]))),te.toCluster&&(log.info("to cluster abc88",ne.get(te.toCluster)),de=cutPathAtIntersect(te.points,ne.get(te.toCluster).node),ue=!0),te.fromCluster&&(log.debug("from cluster abc88",ne.get(te.fromCluster),JSON.stringify(de,null,2)),de=cutPathAtIntersect(de.reverse(),ne.get(te.fromCluster).node).reverse(),ue=!0);let ge=de.filter(Me=>!Number.isNaN(Me.y));ge=fixCorners(ge);let $e=curveBasis;te.curve&&($e=te.curve);const{x:Te,y:Ee}=getLineFunctionsWithOffset(te),Se=line$1().x(Te).y(Ee).curve($e);let ve;switch(te.thickness){case"normal":ve="edge-thickness-normal";break;case"thick":ve="edge-thickness-thick";break;case"invisible":ve="edge-thickness-invisible";break;default:ve="edge-thickness-normal"}switch(te.pattern){case"solid":ve+=" edge-pattern-solid";break;case"dotted":ve+=" edge-pattern-dotted";break;case"dashed":ve+=" edge-pattern-dashed";break;default:ve+=" edge-pattern-solid"}let ke,Re=Se(ge);const Ne=Array.isArray(te.style)?te.style:[te.style];if(te.look==="handDrawn"){const Me=at.svg(ie);Object.assign([],ge);const Ae=Me.path(Re,{roughness:.3,seed:he});ve+=" transition",ke=select(Ae).select("path").attr("id",te.id).attr("class"," "+ve+(te.classes?" "+te.classes:"")).attr("style",Ne?Ne.reduce((ht,Pe)=>ht+";"+Pe,""):"");let Qe=ke.attr("d");ke.attr("d",Qe),ie.node().appendChild(ke.node())}else ke=ie.append("path").attr("d",Re).attr("id",te.id).attr("class"," "+ve+(te.classes?" "+te.classes:"")).attr("style",Ne?Ne.reduce((Me,Ae)=>Me+";"+Ae,""):"");let xe="";(getConfig2().flowchart.arrowMarkerAbsolute||getConfig2().state.arrowMarkerAbsolute)&&(xe=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,xe=xe.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),log.info("arrowTypeStart",te.arrowTypeStart),log.info("arrowTypeEnd",te.arrowTypeEnd),addEdgeMarkers(ke,te,xe,ae,re);let ze={};return ue&&(ze.updatedPath=de),ze.originalPath=te.points,ze},"insertEdge"),insertMarkers=__name((ie,te,ne,re)=>{te.forEach(oe=>{markers[oe](ie,ne,re)})},"insertMarkers"),extension=__name((ie,te,ne)=>{log.trace("Making markers for ",ne),ie.append("defs").append("marker").attr("id",ne+"_"+te+"-extensionStart").attr("class","marker extension "+te).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),ie.append("defs").append("marker").attr("id",ne+"_"+te+"-extensionEnd").attr("class","marker extension "+te).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),composition=__name((ie,te,ne)=>{ie.append("defs").append("marker").attr("id",ne+"_"+te+"-compositionStart").attr("class","marker composition "+te).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),ie.append("defs").append("marker").attr("id",ne+"_"+te+"-compositionEnd").attr("class","marker composition "+te).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),aggregation=__name((ie,te,ne)=>{ie.append("defs").append("marker").attr("id",ne+"_"+te+"-aggregationStart").attr("class","marker aggregation "+te).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),ie.append("defs").append("marker").attr("id",ne+"_"+te+"-aggregationEnd").attr("class","marker aggregation "+te).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),dependency=__name((ie,te,ne)=>{ie.append("defs").append("marker").attr("id",ne+"_"+te+"-dependencyStart").attr("class","marker dependency "+te).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),ie.append("defs").append("marker").attr("id",ne+"_"+te+"-dependencyEnd").attr("class","marker dependency "+te).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),lollipop=__name((ie,te,ne)=>{ie.append("defs").append("marker").attr("id",ne+"_"+te+"-lollipopStart").attr("class","marker lollipop "+te).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),ie.append("defs").append("marker").attr("id",ne+"_"+te+"-lollipopEnd").attr("class","marker lollipop "+te).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),point=__name((ie,te,ne)=>{ie.append("marker").attr("id",ne+"_"+te+"-pointEnd").attr("class","marker "+te).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),ie.append("marker").attr("id",ne+"_"+te+"-pointStart").attr("class","marker "+te).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),circle=__name((ie,te,ne)=>{ie.append("marker").attr("id",ne+"_"+te+"-circleEnd").attr("class","marker "+te).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),ie.append("marker").attr("id",ne+"_"+te+"-circleStart").attr("class","marker "+te).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),cross=__name((ie,te,ne)=>{ie.append("marker").attr("id",ne+"_"+te+"-crossEnd").attr("class","marker cross "+te).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),ie.append("marker").attr("id",ne+"_"+te+"-crossStart").attr("class","marker cross "+te).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),barb=__name((ie,te,ne)=>{ie.append("defs").append("marker").attr("id",ne+"_"+te+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),markers={extension,composition,aggregation,dependency,lollipop,point,circle,cross,barb},markers_default=insertMarkers,internalHelpers={common:common_default,getConfig,insertCluster,insertEdge,insertEdgeLabel,insertMarkers:markers_default,insertNode,interpolateToCurve,labelHelper,log,positionEdgeLabel},layoutAlgorithms={},registerLayoutLoaders=__name(ie=>{for(const te of ie)layoutAlgorithms[te.name]=te},"registerLayoutLoaders"),registerDefaultLayoutLoaders=__name(()=>{registerLayoutLoaders([{name:"dagre",loader:__name(async()=>await __vitePreload(()=>import("./dagre-4EVJKHTY-7f853d7d.js"),["assets/dagre-4EVJKHTY-7f853d7d.js","assets/graph-3b31ae90.js","assets/_baseUniq-cb6d068b.js","assets/layout-21bb151e.js","assets/_basePickBy-71bb2679.js","assets/clone-9db763cc.js"]),"loader")}])},"registerDefaultLayoutLoaders");registerDefaultLayoutLoaders();var render$1=__name(async(ie,te)=>{if(!(ie.layoutAlgorithm in layoutAlgorithms))throw new Error(`Unknown layout algorithm: ${ie.layoutAlgorithm}`);const ne=layoutAlgorithms[ie.layoutAlgorithm];return(await ne.loader()).render(ie,te,internalHelpers,{algorithm:ne.algorithm})},"render"),getRegisteredLayoutAlgorithm=__name((ie="",{fallback:te="dagre"}={})=>{if(ie in layoutAlgorithms)return ie;if(te in layoutAlgorithms)return log.warn(`Layout algorithm ${ie} is not registered. Using ${te} as fallback.`),te;throw new Error(`Both layout algorithms ${ie} and ${te} are not registered.`)},"getRegisteredLayoutAlgorithm"),version="11.4.1",selectSvgElement=__name(ie=>{var oe;const{securityLevel:te}=getConfig2();let ne=select("body");if(te==="sandbox"){const ae=((oe=select(`#i${ie}`).node())==null?void 0:oe.contentDocument)??document;ne=select(ae.body)}return ne.select(`#${ie}`)},"selectSvgElement"),COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode;function trim(ie){return ie.trim()}function replace(ie,te,ne){return ie.replace(te,ne)}function indexof(ie,te,ne){return ie.indexOf(te,ne)}function charat(ie,te){return ie.charCodeAt(te)|0}function substr(ie,te,ne){return ie.slice(te,ne)}function strlen(ie){return ie.length}function sizeof(ie){return ie.length}function append(ie,te){return te.push(ie),ie}var line=1,column=1,length=0,position=0,character=0,characters="";function node(ie,te,ne,re,oe,le,ae,he){return{value:ie,root:te,parent:ne,type:re,props:oe,children:le,line,column,length:ae,return:"",siblings:he}}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(ie,te){return substr(characters,ie,te)}function token(ie){switch(ie){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(ie){return line=column=1,length=strlen(characters=ie),position=0,[]}function dealloc(ie){return characters="",ie}function delimit(ie){return trim(slice(position-1,delimiter(ie===91?ie+2:ie===40?ie+1:ie)))}function whitespace(ie){for(;(character=peek())&&character<33;)next();return token(ie)>2||token(character)>3?"":" "}function escaping(ie,te){for(;--te&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(ie,caret()+(te<6&&peek()==32&&next()==32))}function delimiter(ie){for(;next();)switch(character){case ie:return position;case 34:case 39:ie!==34&&ie!==39&&delimiter(character);break;case 40:ie===41&&delimiter(ie);break;case 92:next();break}return position}function commenter(ie,te){for(;next()&&ie+character!==47+10;)if(ie+character===42+42&&peek()===47)break;return"/*"+slice(te,position-1)+"*"+from(ie===47?ie:next())}function identifier(ie){for(;!token(peek());)next();return slice(ie,position)}function compile(ie){return dealloc(parse$1("",null,null,null,[""],ie=alloc(ie),0,[0],ie))}function parse$1(ie,te,ne,re,oe,le,ae,he,de){for(var ue=0,pe=0,fe=ae,ge=0,$e=0,Te=0,Ee=1,Se=1,ve=1,ke=0,Re="",Ne=oe,xe=le,ze=re,Me=Re;Se;)switch(Te=ke,ke=next()){case 40:if(Te!=108&&charat(Me,fe-1)==58){indexof(Me+=replace(delimit(ke),"&","&\f"),"&\f",abs(ue?he[ue-1]:0))!=-1&&(ve=-1);break}case 34:case 39:case 91:Me+=delimit(ke);break;case 9:case 10:case 13:case 32:Me+=whitespace(Te);break;case 92:Me+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),te,ne,de),de),(token(Te||1)==5||token(peek()||1)==5)&&strlen(Me)&&substr(Me,-1,void 0)!==" "&&(Me+=" ");break;default:Me+="/"}break;case 123*Ee:he[ue++]=strlen(Me)*ve;case 125*Ee:case 59:case 0:switch(ke){case 0:case 125:Se=0;case 59+pe:ve==-1&&(Me=replace(Me,/\f/g,"")),$e>0&&(strlen(Me)-fe||Ee===0&&Te===47)&&append($e>32?declaration(Me+";",re,ne,fe-1,de):declaration(replace(Me," ","")+";",re,ne,fe-2,de),de);break;case 59:Me+=";";default:if(append(ze=ruleset(Me,te,ne,ue,pe,oe,he,Re,Ne=[],xe=[],fe,le),le),ke===123)if(pe===0)parse$1(Me,te,ze,ze,Ne,le,fe,he,xe);else switch(ge===99&&charat(Me,3)===110?100:ge){case 100:case 108:case 109:case 115:parse$1(ie,ze,ze,re&&append(ruleset(ie,ze,ze,0,0,oe,he,Re,oe,Ne=[],fe,xe),xe),oe,xe,fe,he,re?Ne:xe);break;default:parse$1(Me,ze,ze,ze,[""],xe,0,he,xe)}}ue=pe=$e=0,Ee=ve=1,Re=Me="",fe=ae;break;case 58:fe=1+strlen(Me),$e=Te;default:if(Ee<1){if(ke==123)--Ee;else if(ke==125&&Ee++==0&&prev()==125)continue}switch(Me+=from(ke),ke*Ee){case 38:ve=pe>0?1:(Me+="\f",-1);break;case 44:he[ue++]=(strlen(Me)-1)*ve,ve=1;break;case 64:peek()===45&&(Me+=delimit(next())),ge=peek(),pe=fe=strlen(Re=Me+=identifier(caret())),ke++;break;case 45:Te===45&&strlen(Me)==2&&(Ee=0)}}return le}function ruleset(ie,te,ne,re,oe,le,ae,he,de,ue,pe,fe){for(var ge=oe-1,$e=oe===0?le:[""],Te=sizeof($e),Ee=0,Se=0,ve=0;Ee<re;++Ee)for(var ke=0,Re=substr(ie,ge+1,ge=abs(Se=ae[Ee])),Ne=ie;ke<Te;++ke)(Ne=trim(Se>0?$e[ke]+" "+Re:replace(Re,/&\f/g,$e[ke])))&&(de[ve++]=Ne);return node(ie,te,ne,oe===0?RULESET:he,de,ue,pe,fe)}function comment(ie,te,ne,re){return node(ie,te,ne,COMMENT,from(char()),substr(ie,2,-2),0,re)}function declaration(ie,te,ne,re,oe){return node(ie,te,ne,DECLARATION,substr(ie,0,re),substr(ie,re+1,-1),re,oe)}function serialize(ie,te){for(var ne="",re=0;re<ie.length;re++)ne+=te(ie[re],re,ie,te)||"";return ne}function stringify(ie,te,ne,re){switch(ie.type){case LAYER:if(ie.children.length)break;case IMPORT:case DECLARATION:return ie.return=ie.return||ie.value;case COMMENT:return"";case KEYFRAMES:return ie.return=ie.value+"{"+serialize(ie.children,re)+"}";case RULESET:if(!strlen(ie.value=ie.props.join(",")))return""}return strlen(ne=serialize(ie.children,re))?ie.return=ie.value+"{"+ne+"}":""}var nativeKeys=overArg(Object.keys,Object);const nativeKeys$1=nativeKeys;var objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function baseKeys(ie){if(!isPrototype(ie))return nativeKeys$1(ie);var te=[];for(var ne in Object(ie))hasOwnProperty$1.call(ie,ne)&&ne!="constructor"&&te.push(ne);return te}var DataView=getNative(root$1,"DataView");const DataView$1=DataView;var Promise$1=getNative(root$1,"Promise");const Promise$2=Promise$1;var Set$1=getNative(root$1,"Set");const Set$2=Set$1;var WeakMap$1=getNative(root$1,"WeakMap");const WeakMap$2=WeakMap$1;var mapTag$1="[object Map]",objectTag="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag||Map$2&&getTag(new Map$2)!=mapTag$1||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$1||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag)&&(getTag=function(ie){var te=baseGetTag(ie),ne=te==objectTag?ie.constructor:void 0,re=ne?toSource(ne):"";if(re)switch(re){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag}return te});const getTag$1=getTag;var mapTag="[object Map]",setTag="[object Set]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function isEmpty(ie){if(ie==null)return!0;if(isArrayLike(ie)&&(isArray$1(ie)||typeof ie=="string"||typeof ie.splice=="function"||isBuffer$1(ie)||isTypedArray$1(ie)||isArguments$1(ie)))return!ie.length;var te=getTag$1(ie);if(te==mapTag||te==setTag)return!ie.size;if(isPrototype(ie))return!baseKeys(ie).length;for(var ne in ie)if(hasOwnProperty.call(ie,ne))return!1;return!0}var id="c4",detector=__name(ie=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(ie),"detector"),loader=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./c4Diagram-6F5ED5ID-0c8d86eb.js"),["assets/c4Diagram-6F5ED5ID-0c8d86eb.js","assets/chunk-ASOPGD6M-3fc5cce4.js"]);return{id,diagram:ie}},"loader"),plugin={id,detector,loader},c4Detector_default=plugin,id2="flowchart",detector2=__name((ie,te)=>{var ne,re;return((ne=te==null?void 0:te.flowchart)==null?void 0:ne.defaultRenderer)==="dagre-wrapper"||((re=te==null?void 0:te.flowchart)==null?void 0:re.defaultRenderer)==="elk"?!1:/^\s*graph/.test(ie)},"detector"),loader2=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./flowDiagram-7ASYPVHJ-e885f145.js"),["assets/flowDiagram-7ASYPVHJ-e885f145.js","assets/chunk-5HRBRIJM-b7bfbc9f.js","assets/channel-8bd35d35.js"]);return{id:id2,diagram:ie}},"loader"),plugin2={id:id2,detector:detector2,loader:loader2},flowDetector_default=plugin2,id3="flowchart-v2",detector3=__name((ie,te)=>{var ne,re,oe;return((ne=te==null?void 0:te.flowchart)==null?void 0:ne.defaultRenderer)==="dagre-d3"?!1:(((re=te==null?void 0:te.flowchart)==null?void 0:re.defaultRenderer)==="elk"&&(te.layout="elk"),/^\s*graph/.test(ie)&&((oe=te==null?void 0:te.flowchart)==null?void 0:oe.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(ie))},"detector"),loader3=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./flowDiagram-7ASYPVHJ-e885f145.js"),["assets/flowDiagram-7ASYPVHJ-e885f145.js","assets/chunk-5HRBRIJM-b7bfbc9f.js","assets/channel-8bd35d35.js"]);return{id:id3,diagram:ie}},"loader"),plugin3={id:id3,detector:detector3,loader:loader3},flowDetector_v2_default=plugin3,id4="er",detector4=__name(ie=>/^\s*erDiagram/.test(ie),"detector"),loader4=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./erDiagram-6RL3IURR-7adc40c2.js"),["assets/erDiagram-6RL3IURR-7adc40c2.js","assets/graph-3b31ae90.js","assets/_baseUniq-cb6d068b.js","assets/layout-21bb151e.js","assets/_basePickBy-71bb2679.js"]);return{id:id4,diagram:ie}},"loader"),plugin4={id:id4,detector:detector4,loader:loader4},erDetector_default=plugin4,id5="gitGraph",detector5=__name(ie=>/^\s*gitGraph/.test(ie),"detector"),loader5=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./gitGraphDiagram-NRZ2UAAF-d60c6a40.js"),["assets/gitGraphDiagram-NRZ2UAAF-d60c6a40.js","assets/chunk-TMUBEWPD-abe4dbb8.js","assets/chunk-KFBOBJHC-fa7cb857.js","assets/mermaid-parser.core-8e486d51.js","assets/_baseUniq-cb6d068b.js","assets/_basePickBy-71bb2679.js","assets/clone-9db763cc.js"]);return{id:id5,diagram:ie}},"loader"),plugin5={id:id5,detector:detector5,loader:loader5},gitGraphDetector_default=plugin5,id6="gantt",detector6=__name(ie=>/^\s*gantt/.test(ie),"detector"),loader6=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./ganttDiagram-NTVNEXSI-d9afedc2.js"),["assets/ganttDiagram-NTVNEXSI-d9afedc2.js","assets/linear-ca19141b.js","assets/init-77b53fdd.js"]);return{id:id6,diagram:ie}},"loader"),plugin6={id:id6,detector:detector6,loader:loader6},ganttDetector_default=plugin6,id7="info",detector7=__name(ie=>/^\s*info/.test(ie),"detector"),loader7=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./infoDiagram-A4XQUW5V-a2a37772.js"),["assets/infoDiagram-A4XQUW5V-a2a37772.js","assets/mermaid-parser.core-8e486d51.js","assets/_baseUniq-cb6d068b.js","assets/_basePickBy-71bb2679.js","assets/clone-9db763cc.js"]);return{id:id7,diagram:ie}},"loader"),info={id:id7,detector:detector7,loader:loader7},id8="pie",detector8=__name(ie=>/^\s*pie/.test(ie),"detector"),loader8=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./pieDiagram-YF2LJOPJ-d075912d.js"),["assets/pieDiagram-YF2LJOPJ-d075912d.js","assets/chunk-TMUBEWPD-abe4dbb8.js","assets/mermaid-parser.core-8e486d51.js","assets/_baseUniq-cb6d068b.js","assets/_basePickBy-71bb2679.js","assets/clone-9db763cc.js","assets/arc-7cac3fce.js","assets/ordinal-ba9b4969.js","assets/init-77b53fdd.js"]);return{id:id8,diagram:ie}},"loader"),pie={id:id8,detector:detector8,loader:loader8},id9="quadrantChart",detector9=__name(ie=>/^\s*quadrantChart/.test(ie),"detector"),loader9=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./quadrantDiagram-OS5C2QUG-33f6e112.js"),["assets/quadrantDiagram-OS5C2QUG-33f6e112.js","assets/linear-ca19141b.js","assets/init-77b53fdd.js"]);return{id:id9,diagram:ie}},"loader"),plugin7={id:id9,detector:detector9,loader:loader9},quadrantDetector_default=plugin7,id10="xychart",detector10=__name(ie=>/^\s*xychart-beta/.test(ie),"detector"),loader10=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./xychartDiagram-6QU3TZC5-0f11681e.js"),["assets/xychartDiagram-6QU3TZC5-0f11681e.js","assets/init-77b53fdd.js","assets/ordinal-ba9b4969.js","assets/linear-ca19141b.js"]);return{id:id10,diagram:ie}},"loader"),plugin8={id:id10,detector:detector10,loader:loader10},xychartDetector_default=plugin8,id11="requirement",detector11=__name(ie=>/^\s*requirement(Diagram)?/.test(ie),"detector"),loader11=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./requirementDiagram-MIRIMTAZ-2c18f514.js"),["assets/requirementDiagram-MIRIMTAZ-2c18f514.js","assets/graph-3b31ae90.js","assets/_baseUniq-cb6d068b.js","assets/layout-21bb151e.js","assets/_basePickBy-71bb2679.js"]);return{id:id11,diagram:ie}},"loader"),plugin9={id:id11,detector:detector11,loader:loader11},requirementDetector_default=plugin9,id12="sequence",detector12=__name(ie=>/^\s*sequenceDiagram/.test(ie),"detector"),loader12=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./sequenceDiagram-G6AWOVSC-fd24ba2b.js"),["assets/sequenceDiagram-G6AWOVSC-fd24ba2b.js","assets/chunk-ASOPGD6M-3fc5cce4.js","assets/chunk-KFBOBJHC-fa7cb857.js"]);return{id:id12,diagram:ie}},"loader"),plugin10={id:id12,detector:detector12,loader:loader12},sequenceDetector_default=plugin10,id13="class",detector13=__name((ie,te)=>{var ne;return((ne=te==null?void 0:te.class)==null?void 0:ne.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(ie)},"detector"),loader13=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./classDiagram-LNE6IOMH-d27a3284.js"),["assets/classDiagram-LNE6IOMH-d27a3284.js","assets/chunk-T2TOU4HS-1903ed91.js","assets/chunk-5HRBRIJM-b7bfbc9f.js"]);return{id:id13,diagram:ie}},"loader"),plugin11={id:id13,detector:detector13,loader:loader13},classDetector_default=plugin11,id14="classDiagram",detector14=__name((ie,te)=>{var ne;return/^\s*classDiagram/.test(ie)&&((ne=te==null?void 0:te.class)==null?void 0:ne.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(ie)},"detector"),loader14=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./classDiagram-v2-MQ7JQ4JX-d27a3284.js"),["assets/classDiagram-v2-MQ7JQ4JX-d27a3284.js","assets/chunk-T2TOU4HS-1903ed91.js","assets/chunk-5HRBRIJM-b7bfbc9f.js"]);return{id:id14,diagram:ie}},"loader"),plugin12={id:id14,detector:detector14,loader:loader14},classDetector_V2_default=plugin12,id15="state",detector15=__name((ie,te)=>{var ne;return((ne=te==null?void 0:te.state)==null?void 0:ne.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(ie)},"detector"),loader15=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./stateDiagram-MAYHULR4-dff53ea2.js"),["assets/stateDiagram-MAYHULR4-dff53ea2.js","assets/chunk-7U56Z5CX-3b7a728b.js","assets/chunk-5HRBRIJM-b7bfbc9f.js","assets/graph-3b31ae90.js","assets/_baseUniq-cb6d068b.js","assets/layout-21bb151e.js","assets/_basePickBy-71bb2679.js"]);return{id:id15,diagram:ie}},"loader"),plugin13={id:id15,detector:detector15,loader:loader15},stateDetector_default=plugin13,id16="stateDiagram",detector16=__name((ie,te)=>{var ne;return!!(/^\s*stateDiagram-v2/.test(ie)||/^\s*stateDiagram/.test(ie)&&((ne=te==null?void 0:te.state)==null?void 0:ne.defaultRenderer)==="dagre-wrapper")},"detector"),loader16=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./stateDiagram-v2-4JROLMXI-f718dac1.js"),["assets/stateDiagram-v2-4JROLMXI-f718dac1.js","assets/chunk-7U56Z5CX-3b7a728b.js","assets/chunk-5HRBRIJM-b7bfbc9f.js"]);return{id:id16,diagram:ie}},"loader"),plugin14={id:id16,detector:detector16,loader:loader16},stateDetector_V2_default=plugin14,id17="journey",detector17=__name(ie=>/^\s*journey/.test(ie),"detector"),loader17=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./journeyDiagram-G5WM74LC-743177d7.js"),["assets/journeyDiagram-G5WM74LC-743177d7.js","assets/chunk-ASOPGD6M-3fc5cce4.js","assets/arc-7cac3fce.js"]);return{id:id17,diagram:ie}},"loader"),plugin15={id:id17,detector:detector17,loader:loader17},journeyDetector_default=plugin15,draw=__name((ie,te,ne)=>{log.debug(`rendering svg for syntax error
`);const re=selectSvgElement(te),oe=re.append("g");re.attr("viewBox","0 0 2412 512"),configureSvgSize(re,100,512,!0),oe.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),oe.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),oe.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),oe.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),oe.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),oe.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),oe.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),oe.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${ne}`)},"draw"),renderer={draw},errorRenderer_default=renderer,diagram={db:{},renderer,parser:{parse:__name(()=>{},"parse")}},errorDiagram_default=diagram,id18="flowchart-elk",detector18=__name((ie,te={})=>{var ne;return/^\s*flowchart-elk/.test(ie)||/^\s*flowchart|graph/.test(ie)&&((ne=te==null?void 0:te.flowchart)==null?void 0:ne.defaultRenderer)==="elk"?(te.layout="elk",!0):!1},"detector"),loader18=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./flowDiagram-7ASYPVHJ-e885f145.js"),["assets/flowDiagram-7ASYPVHJ-e885f145.js","assets/chunk-5HRBRIJM-b7bfbc9f.js","assets/channel-8bd35d35.js"]);return{id:id18,diagram:ie}},"loader"),plugin16={id:id18,detector:detector18,loader:loader18},detector_default=plugin16,id19="timeline",detector19=__name(ie=>/^\s*timeline/.test(ie),"detector"),loader19=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./timeline-definition-U7ZMHBDA-fbb9a18e.js"),["assets/timeline-definition-U7ZMHBDA-fbb9a18e.js","assets/arc-7cac3fce.js"]);return{id:id19,diagram:ie}},"loader"),plugin17={id:id19,detector:detector19,loader:loader19},detector_default2=plugin17,id20="mindmap",detector20=__name(ie=>/^\s*mindmap/.test(ie),"detector"),loader20=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./mindmap-definition-GWI6TPTV-6f86fb6c.js"),["assets/mindmap-definition-GWI6TPTV-6f86fb6c.js","assets/cytoscape.esm-c2ab435f.js"]);return{id:id20,diagram:ie}},"loader"),plugin18={id:id20,detector:detector20,loader:loader20},detector_default3=plugin18,id21="kanban",detector21=__name(ie=>/^\s*kanban/.test(ie),"detector"),loader21=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./kanban-definition-QRCXZQQD-56822941.js"),[]);return{id:id21,diagram:ie}},"loader"),plugin19={id:id21,detector:detector21,loader:loader21},detector_default4=plugin19,id22="sankey",detector22=__name(ie=>/^\s*sankey-beta/.test(ie),"detector"),loader22=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./sankeyDiagram-Y46BX6SQ-d1eb663f.js"),["assets/sankeyDiagram-Y46BX6SQ-d1eb663f.js","assets/ordinal-ba9b4969.js","assets/init-77b53fdd.js"]);return{id:id22,diagram:ie}},"loader"),plugin20={id:id22,detector:detector22,loader:loader22},sankeyDetector_default=plugin20,id23="packet",detector23=__name(ie=>/^\s*packet-beta/.test(ie),"detector"),loader23=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./diagram-QW4FP2JN-33b392d7.js"),["assets/diagram-QW4FP2JN-33b392d7.js","assets/chunk-TMUBEWPD-abe4dbb8.js","assets/mermaid-parser.core-8e486d51.js","assets/_baseUniq-cb6d068b.js","assets/_basePickBy-71bb2679.js","assets/clone-9db763cc.js"]);return{id:id23,diagram:ie}},"loader"),packet={id:id23,detector:detector23,loader:loader23},id24="block",detector24=__name(ie=>/^\s*block-beta/.test(ie),"detector"),loader24=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./blockDiagram-ZHA2E4KO-bf80cd47.js"),["assets/blockDiagram-ZHA2E4KO-bf80cd47.js","assets/clone-9db763cc.js","assets/_baseUniq-cb6d068b.js","assets/graph-3b31ae90.js","assets/channel-8bd35d35.js"]);return{id:id24,diagram:ie}},"loader"),plugin21={id:id24,detector:detector24,loader:loader24},blockDetector_default=plugin21,id25="architecture",detector25=__name(ie=>/^\s*architecture/.test(ie),"detector"),loader25=__name(async()=>{const{diagram:ie}=await __vitePreload(()=>import("./architectureDiagram-UYN6MBPD-40d6fef8.js"),["assets/architectureDiagram-UYN6MBPD-40d6fef8.js","assets/chunk-TMUBEWPD-abe4dbb8.js","assets/chunk-KFBOBJHC-fa7cb857.js","assets/mermaid-parser.core-8e486d51.js","assets/_baseUniq-cb6d068b.js","assets/_basePickBy-71bb2679.js","assets/clone-9db763cc.js","assets/cytoscape.esm-c2ab435f.js"]);return{id:id25,diagram:ie}},"loader"),architecture={id:id25,detector:detector25,loader:loader25},architectureDetector_default=architecture,hasLoadedDiagrams=!1,addDiagrams=__name(()=>{hasLoadedDiagrams||(hasLoadedDiagrams=!0,registerDiagram("error",errorDiagram_default,ie=>ie.toLowerCase().trim()==="error"),registerDiagram("---",{db:{clear:__name(()=>{},"clear")},styles:{},renderer:{draw:__name(()=>{},"draw")},parser:{parse:__name(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:__name(()=>null,"init")},ie=>ie.toLowerCase().trimStart().startsWith("---")),registerLazyLoadedDiagrams(c4Detector_default,detector_default4,classDetector_V2_default,classDetector_default,erDetector_default,ganttDetector_default,info,pie,requirementDetector_default,sequenceDetector_default,detector_default,flowDetector_v2_default,flowDetector_default,detector_default3,detector_default2,gitGraphDetector_default,stateDetector_V2_default,stateDetector_default,journeyDetector_default,quadrantDetector_default,sankeyDetector_default,packet,xychartDetector_default,blockDetector_default,architectureDetector_default))},"addDiagrams"),loadRegisteredDiagrams=__name(async()=>{log.debug("Loading registered diagrams");const te=(await Promise.allSettled(Object.entries(detectors).map(async([ne,{detector:re,loader:oe}])=>{if(oe)try{getDiagram(ne)}catch{try{const{diagram:le,id:ae}=await oe();registerDiagram(ae,le,re)}catch(le){throw log.error(`Failed to load external diagram with key ${ne}. Removing from detectors.`),delete detectors[ne],le}}}))).filter(ne=>ne.status==="rejected");if(te.length>0){log.error(`Failed to load ${te.length} external diagrams`);for(const ne of te)log.error(ne);throw new Error(`Failed to load ${te.length} external diagrams`)}},"loadRegisteredDiagrams"),SVG_ROLE="graphics-document document";function setA11yDiagramInfo(ie,te){ie.attr("role",SVG_ROLE),te!==""&&ie.attr("aria-roledescription",te)}__name(setA11yDiagramInfo,"setA11yDiagramInfo");function addSVGa11yTitleDescription(ie,te,ne,re){if(ie.insert!==void 0){if(ne){const oe=`chart-desc-${re}`;ie.attr("aria-describedby",oe),ie.insert("desc",":first-child").attr("id",oe).text(ne)}if(te){const oe=`chart-title-${re}`;ie.attr("aria-labelledby",oe),ie.insert("title",":first-child").attr("id",oe).text(te)}}}__name(addSVGa11yTitleDescription,"addSVGa11yTitleDescription");var Jr,Diagram=(Jr=class{constructor(te,ne,re,oe,le){this.type=te,this.text=ne,this.db=re,this.parser=oe,this.renderer=le}static async fromText(te,ne={}){var ue,pe;const re=getConfig(),oe=detectType$1(te,re);te=encodeEntities(te)+`
`;try{getDiagram(oe)}catch{const fe=getDiagramLoader(oe);if(!fe)throw new UnknownDiagramError(`Diagram ${oe} not found.`);const{id:ge,diagram:$e}=await fe();registerDiagram(ge,$e)}const{db:le,parser:ae,renderer:he,init:de}=getDiagram(oe);return ae.parser&&(ae.parser.yy=le),(ue=le.clear)==null||ue.call(le),de==null||de(re),ne.title&&((pe=le.setDiagramTitle)==null||pe.call(le,ne.title)),await ae.parse(te),new Jr(oe,te,le,ae,he)}async render(te,ne){await this.renderer.draw(this.text,te,ne,this)}getParser(){return this.parser}getType(){return this.type}},__name(Jr,"Diagram"),Jr),interactionFunctions=[],attachFunctions=__name(()=>{interactionFunctions.forEach(ie=>{ie()}),interactionFunctions=[]},"attachFunctions"),cleanupComments=__name(ie=>ie.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function extractFrontMatter(ie){const te=ie.match(frontMatterRegex);if(!te)return{text:ie,metadata:{}};let ne=load(te[1],{schema:JSON_SCHEMA})??{};ne=typeof ne=="object"&&!Array.isArray(ne)?ne:{};const re={};return ne.displayMode&&(re.displayMode=ne.displayMode.toString()),ne.title&&(re.title=ne.title.toString()),ne.config&&(re.config=ne.config),{text:ie.slice(te[0].length),metadata:re}}__name(extractFrontMatter,"extractFrontMatter");var cleanupText=__name(ie=>ie.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(te,ne,re)=>"<"+ne+re.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),processFrontmatter=__name(ie=>{const{text:te,metadata:ne}=extractFrontMatter(ie),{displayMode:re,title:oe,config:le={}}=ne;return re&&(le.gantt||(le.gantt={}),le.gantt.displayMode=re),{title:oe,config:le,text:te}},"processFrontmatter"),processDirectives=__name(ie=>{const te=utils_default.detectInit(ie)??{},ne=utils_default.detectDirective(ie,"wrap");return Array.isArray(ne)?te.wrap=ne.some(({type:re})=>re==="wrap"):(ne==null?void 0:ne.type)==="wrap"&&(te.wrap=!0),{text:removeDirectives(ie),directive:te}},"processDirectives");function preprocessDiagram(ie){const te=cleanupText(ie),ne=processFrontmatter(te),re=processDirectives(ne.text),oe=cleanAndMerge(ne.config,re.directive);return ie=cleanupComments(re.text),{code:ie,title:ne.title,config:oe}}__name(preprocessDiagram,"preprocessDiagram");function toBase64(ie){const te=new TextEncoder().encode(ie),ne=Array.from(te,re=>String.fromCodePoint(re)).join("");return btoa(ne)}__name(toBase64,"toBase64");var MAX_TEXTLENGTH=5e4,MAX_TEXTLENGTH_EXCEEDED_MSG="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",SECURITY_LVL_SANDBOX="sandbox",SECURITY_LVL_LOOSE="loose",XMLNS_SVG_STD="http://www.w3.org/2000/svg",XMLNS_XLINK_STD="http://www.w3.org/1999/xlink",XMLNS_XHTML_STD="http://www.w3.org/1999/xhtml",IFRAME_WIDTH="100%",IFRAME_HEIGHT="100%",IFRAME_STYLES="border:0;margin:0;",IFRAME_BODY_STYLE="margin:0",IFRAME_SANDBOX_OPTS="allow-top-navigation-by-user-activation allow-popups",IFRAME_NOT_SUPPORTED_MSG='The "iframe" tag is not supported by your browser.',DOMPURIFY_TAGS=["foreignobject"],DOMPURIFY_ATTR=["dominant-baseline"];function processAndSetConfigs(ie){const te=preprocessDiagram(ie);return reset(),addDirective(te.config??{}),te}__name(processAndSetConfigs,"processAndSetConfigs");async function parse(ie,te){addDiagrams();try{const{code:ne,config:re}=processAndSetConfigs(ie);return{diagramType:(await getDiagramFromText(ne)).type,config:re}}catch(ne){if(te!=null&&te.suppressErrors)return!1;throw ne}}__name(parse,"parse");var cssImportantStyles=__name((ie,te,ne=[])=>`
.${ie} ${te} { ${ne.join(" !important; ")} !important; }`,"cssImportantStyles"),createCssStyles=__name((ie,te=new Map)=>{var re;let ne="";if(ie.themeCSS!==void 0&&(ne+=`
${ie.themeCSS}`),ie.fontFamily!==void 0&&(ne+=`
:root { --mermaid-font-family: ${ie.fontFamily}}`),ie.altFontFamily!==void 0&&(ne+=`
:root { --mermaid-alt-font-family: ${ie.altFontFamily}}`),te instanceof Map){const he=ie.htmlLabels??((re=ie.flowchart)==null?void 0:re.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];te.forEach(de=>{isEmpty(de.styles)||he.forEach(ue=>{ne+=cssImportantStyles(de.id,ue,de.styles)}),isEmpty(de.textStyles)||(ne+=cssImportantStyles(de.id,"tspan",((de==null?void 0:de.textStyles)||[]).map(ue=>ue.replace("color","fill"))))})}return ne},"createCssStyles"),createUserStyles=__name((ie,te,ne,re)=>{const oe=createCssStyles(ie,ne),le=styles_default(te,oe,ie.themeVariables);return serialize(compile(`${re}{${le}}`),stringify)},"createUserStyles"),cleanUpSvgCode=__name((ie="",te,ne)=>{let re=ie;return!ne&&!te&&(re=re.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),re=decodeEntities(re),re=re.replace(/<br>/g,"<br/>"),re},"cleanUpSvgCode"),putIntoIFrame=__name((ie="",te)=>{var oe,le;const ne=(le=(oe=te==null?void 0:te.viewBox)==null?void 0:oe.baseVal)!=null&&le.height?te.viewBox.baseVal.height+"px":IFRAME_HEIGHT,re=toBase64(`<body style="${IFRAME_BODY_STYLE}">${ie}</body>`);return`<iframe style="width:${IFRAME_WIDTH};height:${ne};${IFRAME_STYLES}" src="data:text/html;charset=UTF-8;base64,${re}" sandbox="${IFRAME_SANDBOX_OPTS}">
  ${IFRAME_NOT_SUPPORTED_MSG}
</iframe>`},"putIntoIFrame"),appendDivSvgG=__name((ie,te,ne,re,oe)=>{const le=ie.append("div");le.attr("id",ne),re&&le.attr("style",re);const ae=le.append("svg").attr("id",te).attr("width","100%").attr("xmlns",XMLNS_SVG_STD);return oe&&ae.attr("xmlns:xlink",oe),ae.append("g"),ie},"appendDivSvgG");function sandboxedIframe(ie,te){return ie.append("iframe").attr("id",te).attr("style","width: 100%; height: 100%;").attr("sandbox","")}__name(sandboxedIframe,"sandboxedIframe");var removeExistingElements=__name((ie,te,ne,re)=>{var oe,le,ae;(oe=ie.getElementById(te))==null||oe.remove(),(le=ie.getElementById(ne))==null||le.remove(),(ae=ie.getElementById(re))==null||ae.remove()},"removeExistingElements"),render=__name(async function(ie,te,ne){var _t,rt,Ke,Je,qe,ct;addDiagrams();const re=processAndSetConfigs(te);te=re.code;const oe=getConfig();log.debug(oe),te.length>((oe==null?void 0:oe.maxTextSize)??MAX_TEXTLENGTH)&&(te=MAX_TEXTLENGTH_EXCEEDED_MSG);const le="#"+ie,ae="i"+ie,he="#"+ae,de="d"+ie,ue="#"+de,pe=__name(()=>{const je=select(ge?he:ue).node();je&&"remove"in je&&je.remove()},"removeTempElements");let fe=select("body");const ge=oe.securityLevel===SECURITY_LVL_SANDBOX,$e=oe.securityLevel===SECURITY_LVL_LOOSE,Te=oe.fontFamily;if(ne!==void 0){if(ne&&(ne.innerHTML=""),ge){const Le=sandboxedIframe(select(ne),ae);fe=select(Le.nodes()[0].contentDocument.body),fe.node().style.margin=0}else fe=select(ne);appendDivSvgG(fe,ie,de,`font-family: ${Te}`,XMLNS_XLINK_STD)}else{if(removeExistingElements(document,ie,de,ae),ge){const Le=sandboxedIframe(select("body"),ae);fe=select(Le.nodes()[0].contentDocument.body),fe.node().style.margin=0}else fe=select("body");appendDivSvgG(fe,ie,de)}let Ee,Se;try{Ee=await Diagram.fromText(te,{title:re.title})}catch(Le){if(oe.suppressErrorRendering)throw pe(),Le;Ee=await Diagram.fromText("error"),Se=Le}const ve=fe.select(ue).node(),ke=Ee.type,Re=ve.firstChild,Ne=Re.firstChild,xe=(rt=(_t=Ee.renderer).getClasses)==null?void 0:rt.call(_t,te,Ee),ze=createUserStyles(oe,ke,xe,le),Me=document.createElement("style");Me.innerHTML=ze,Re.insertBefore(Me,Ne);try{await Ee.renderer.draw(te,ie,version,Ee)}catch(Le){throw oe.suppressErrorRendering?pe():errorRenderer_default.draw(te,ie,version),Le}const Ae=fe.select(`${ue} svg`),Qe=(Je=(Ke=Ee.db).getAccTitle)==null?void 0:Je.call(Ke),ht=(ct=(qe=Ee.db).getAccDescription)==null?void 0:ct.call(qe);addA11yInfo(ke,Ae,Qe,ht),fe.select(`[id="${ie}"]`).selectAll("foreignobject > *").attr("xmlns",XMLNS_XHTML_STD);let Pe=fe.select(ue).node().innerHTML;if(log.debug("config.arrowMarkerAbsolute",oe.arrowMarkerAbsolute),Pe=cleanUpSvgCode(Pe,ge,evaluate(oe.arrowMarkerAbsolute)),ge){const Le=fe.select(ue+" svg").node();Pe=putIntoIFrame(Pe,Le)}else $e||(Pe=purify.sanitize(Pe,{ADD_TAGS:DOMPURIFY_TAGS,ADD_ATTR:DOMPURIFY_ATTR,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(attachFunctions(),Se)throw Se;return pe(),{diagramType:ke,svg:Pe,bindFunctions:Ee.db.bindFunctions}},"render");function initialize(ie={}){var re;const te=assignWithDepth_default({},ie);te!=null&&te.fontFamily&&!((re=te.themeVariables)!=null&&re.fontFamily)&&(te.themeVariables||(te.themeVariables={}),te.themeVariables.fontFamily=te.fontFamily),saveConfigFromInitialize(te),te!=null&&te.theme&&te.theme in themes_default?te.themeVariables=themes_default[te.theme].getThemeVariables(te.themeVariables):te&&(te.themeVariables=themes_default.default.getThemeVariables(te.themeVariables));const ne=typeof te=="object"?setSiteConfig(te):getSiteConfig();setLogLevel(ne.logLevel),addDiagrams()}__name(initialize,"initialize");var getDiagramFromText=__name((ie,te={})=>{const{code:ne}=preprocessDiagram(ie);return Diagram.fromText(ne,te)},"getDiagramFromText");function addA11yInfo(ie,te,ne,re){setA11yDiagramInfo(te,ie),addSVGa11yTitleDescription(te,ne,re,te.attr("id"))}__name(addA11yInfo,"addA11yInfo");var mermaidAPI=Object.freeze({render,parse,getDiagramFromText,initialize,getConfig,setConfig,getSiteConfig,updateSiteConfig,reset:__name(()=>{reset()},"reset"),globalReset:__name(()=>{reset(defaultConfig)},"globalReset"),defaultConfig});setLogLevel(getConfig().logLevel);reset(getConfig());var handleError=__name((ie,te,ne)=>{log.warn(ie),isDetailedError(ie)?(ne&&ne(ie.str,ie.hash),te.push({...ie,message:ie.str,error:ie})):(ne&&ne(ie),ie instanceof Error&&te.push({str:ie.message,message:ie.message,hash:ie.name,error:ie}))},"handleError"),run=__name(async function(ie={querySelector:".mermaid"}){try{await runThrowsErrors(ie)}catch(te){if(isDetailedError(te)&&log.error(te.str),mermaid.parseError&&mermaid.parseError(te),!ie.suppressErrors)throw log.error("Use the suppressErrors option to suppress these errors"),te}},"run"),runThrowsErrors=__name(async function({postRenderCallback:ie,querySelector:te,nodes:ne}={querySelector:".mermaid"}){const re=mermaidAPI.getConfig();log.debug(`${ie?"":"No "}Callback function found`);let oe;if(ne)oe=ne;else if(te)oe=document.querySelectorAll(te);else throw new Error("Nodes and querySelector are both undefined");log.debug(`Found ${oe.length} diagrams`),(re==null?void 0:re.startOnLoad)!==void 0&&(log.debug("Start On Load: "+(re==null?void 0:re.startOnLoad)),mermaidAPI.updateSiteConfig({startOnLoad:re==null?void 0:re.startOnLoad}));const le=new utils_default.InitIDGenerator(re.deterministicIds,re.deterministicIDSeed);let ae;const he=[];for(const de of Array.from(oe)){if(log.info("Rendering diagram: "+de.id),de.getAttribute("data-processed"))continue;de.setAttribute("data-processed","true");const ue=`mermaid-${le.next()}`;ae=de.innerHTML,ae=dedent(utils_default.entityDecode(ae)).trim().replace(/<br\s*\/?>/gi,"<br/>");const pe=utils_default.detectInit(ae);pe&&log.debug("Detected early reinit: ",pe);try{const{svg:fe,bindFunctions:ge}=await render2(ue,ae,de);de.innerHTML=fe,ie&&await ie(ue),ge&&ge(de)}catch(fe){handleError(fe,he,mermaid.parseError)}}if(he.length>0)throw he[0]},"runThrowsErrors"),initialize2=__name(function(ie){mermaidAPI.initialize(ie)},"initialize"),init=__name(async function(ie,te,ne){log.warn("mermaid.init is deprecated. Please use run instead."),ie&&initialize2(ie);const re={postRenderCallback:ne,querySelector:".mermaid"};typeof te=="string"?re.querySelector=te:te&&(te instanceof HTMLElement?re.nodes=[te]:re.nodes=te),await run(re)},"init"),registerExternalDiagrams=__name(async(ie,{lazyLoad:te=!0}={})=>{addDiagrams(),registerLazyLoadedDiagrams(...ie),te===!1&&await loadRegisteredDiagrams()},"registerExternalDiagrams"),contentLoaded=__name(function(){if(mermaid.startOnLoad){const{startOnLoad:ie}=mermaidAPI.getConfig();ie&&mermaid.run().catch(te=>log.error("Mermaid failed to initialize",te))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",contentLoaded,!1);var setParseErrorHandler=__name(function(ie){mermaid.parseError=ie},"setParseErrorHandler"),executionQueue=[],executionQueueRunning=!1,executeQueue=__name(async()=>{if(!executionQueueRunning){for(executionQueueRunning=!0;executionQueue.length>0;){const ie=executionQueue.shift();if(ie)try{await ie()}catch(te){log.error("Error executing queue",te)}}executionQueueRunning=!1}},"executeQueue"),parse2=__name(async(ie,te)=>new Promise((ne,re)=>{const oe=__name(()=>new Promise((le,ae)=>{mermaidAPI.parse(ie,te).then(he=>{le(he),ne(he)},he=>{var de;log.error("Error parsing",he),(de=mermaid.parseError)==null||de.call(mermaid,he),ae(he),re(he)})}),"performCall");executionQueue.push(oe),executeQueue().catch(re)}),"parse"),render2=__name((ie,te,ne)=>new Promise((re,oe)=>{const le=__name(()=>new Promise((ae,he)=>{mermaidAPI.render(ie,te,ne).then(de=>{ae(de),re(de)},de=>{var ue;log.error("Error parsing",de),(ue=mermaid.parseError)==null||ue.call(mermaid,de),he(de),oe(de)})}),"performCall");executionQueue.push(le),executeQueue().catch(oe)}),"render"),mermaid={startOnLoad:!0,mermaidAPI,parse:parse2,render:render2,init,run,registerExternalDiagrams,registerLayoutLoaders,initialize:initialize2,parseError:void 0,contentLoaded,setParseErrorHandler,detectType:detectType$1,registerIconPacks},mermaid_default=mermaid;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */function create_default_slot_9$4(ie){let te;return{c(){te=text$2("The Reality2 Marketplace")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_8$4(ie){let te;return{c(){te=text$2("Swarm, Bee, Antenna and Behaviour Definitions to build your own Sentants/Bees.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_7$4(ie){let te;return{c(){te=element("span")},m(ne,re){insert(ne,te,re),ie[7](te)},p:noop$2,d(ne){ne&&detach(te),ie[7](null)}}}function create_default_slot_6$4(ie){let te,ne,re,oe,le,ae,he,de,ue,pe,fe;return te=new Text({props:{ui:!0,big:!0,$$slots:{default:[create_default_slot_9$4]},$$scope:{ctx:ie}}}),oe=new Text({props:{ui:!0,medium:!0,$$slots:{default:[create_default_slot_8$4]},$$scope:{ctx:ie}}}),ae=new Divider({props:{ui:!0}}),de=new Container({props:{ui:!0,style:"background-color: #888888;",$$slots:{default:[create_default_slot_7$4]},$$scope:{ctx:ie}}}),pe=new Divider({props:{ui:!0}}),{c(){create_component(te.$$.fragment),ne=element("br"),re=space(),create_component(oe.$$.fragment),le=space(),create_component(ae.$$.fragment),he=space(),create_component(de.$$.fragment),ue=space(),create_component(pe.$$.fragment)},m(ge,$e){mount_component(te,ge,$e),insert(ge,ne,$e),insert(ge,re,$e),mount_component(oe,ge,$e),insert(ge,le,$e),mount_component(ae,ge,$e),insert(ge,he,$e),mount_component(de,ge,$e),insert(ge,ue,$e),mount_component(pe,ge,$e),fe=!0},p(ge,$e){const Te={};$e&268435456&&(Te.$$scope={dirty:$e,ctx:ge}),te.$set(Te);const Ee={};$e&268435456&&(Ee.$$scope={dirty:$e,ctx:ge}),oe.$set(Ee);const Se={};$e&268435472&&(Se.$$scope={dirty:$e,ctx:ge}),de.$set(Se)},i(ge){fe||(transition_in(te.$$.fragment,ge),transition_in(oe.$$.fragment,ge),transition_in(ae.$$.fragment,ge),transition_in(de.$$.fragment,ge),transition_in(pe.$$.fragment,ge),fe=!0)},o(ge){transition_out(te.$$.fragment,ge),transition_out(oe.$$.fragment,ge),transition_out(ae.$$.fragment,ge),transition_out(de.$$.fragment,ge),transition_out(pe.$$.fragment,ge),fe=!1},d(ge){ge&&(detach(ne),detach(re),detach(le),detach(he),detach(ue)),destroy_component(te,ge),destroy_component(oe,ge),destroy_component(ae,ge),destroy_component(de,ge),destroy_component(pe,ge)}}}function create_default_slot_5$4(ie){let te;return{c(){te=text$2("Swarms")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_4$4(ie){let te;return{c(){te=text$2("Bees")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_3$4(ie){let te;return{c(){te=text$2("Antennae")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_2$4(ie){let te;return{c(){te=text$2("Behaviours")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_1$4(ie){let te,ne,re,oe,le,ae,he,de;return te=new Link({props:{item:!0,active:ie[0]==="swarms",blue:ie[0]==="swarms",$$slots:{default:[create_default_slot_5$4]},$$scope:{ctx:ie}}}),te.$on("click",ie[8]),re=new Link({props:{item:!0,active:ie[0]==="bees",blue:ie[0]==="bees",$$slots:{default:[create_default_slot_4$4]},$$scope:{ctx:ie}}}),re.$on("click",ie[9]),le=new Link({props:{item:!0,active:ie[0]==="antennae",blue:ie[0]==="antennae",$$slots:{default:[create_default_slot_3$4]},$$scope:{ctx:ie}}}),le.$on("click",ie[10]),he=new Link({props:{item:!0,active:ie[0]==="behaviours",blue:ie[0]==="behaviours",$$slots:{default:[create_default_slot_2$4]},$$scope:{ctx:ie}}}),he.$on("click",ie[11]),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment),oe=space(),create_component(le.$$.fragment),ae=space(),create_component(he.$$.fragment)},m(ue,pe){mount_component(te,ue,pe),insert(ue,ne,pe),mount_component(re,ue,pe),insert(ue,oe,pe),mount_component(le,ue,pe),insert(ue,ae,pe),mount_component(he,ue,pe),de=!0},p(ue,pe){const fe={};pe&1&&(fe.active=ue[0]==="swarms"),pe&1&&(fe.blue=ue[0]==="swarms"),pe&268435456&&(fe.$$scope={dirty:pe,ctx:ue}),te.$set(fe);const ge={};pe&1&&(ge.active=ue[0]==="bees"),pe&1&&(ge.blue=ue[0]==="bees"),pe&268435456&&(ge.$$scope={dirty:pe,ctx:ue}),re.$set(ge);const $e={};pe&1&&($e.active=ue[0]==="antennae"),pe&1&&($e.blue=ue[0]==="antennae"),pe&268435456&&($e.$$scope={dirty:pe,ctx:ue}),le.$set($e);const Te={};pe&1&&(Te.active=ue[0]==="behaviours"),pe&1&&(Te.blue=ue[0]==="behaviours"),pe&268435456&&(Te.$$scope={dirty:pe,ctx:ue}),he.$set(Te)},i(ue){de||(transition_in(te.$$.fragment,ue),transition_in(re.$$.fragment,ue),transition_in(le.$$.fragment,ue),transition_in(he.$$.fragment,ue),de=!0)},o(ue){transition_out(te.$$.fragment,ue),transition_out(re.$$.fragment,ue),transition_out(le.$$.fragment,ue),transition_out(he.$$.fragment,ue),de=!1},d(ue){ue&&(detach(ne),detach(oe),detach(ae)),destroy_component(te,ue),destroy_component(re,ue),destroy_component(le,ue),destroy_component(he,ue)}}}function create_default_slot$5(ie){let te,ne,re,oe;return te=new Menu$2({props:{ui:!0,large:!0,inverted:!0,pointing:!0,stackable:!0,$$slots:{default:[create_default_slot_1$4]},$$scope:{ctx:ie}}}),re=new Divider({props:{ui:!0}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment)},m(le,ae){mount_component(te,le,ae),insert(le,ne,ae),mount_component(re,le,ae),oe=!0},p(le,ae){const he={};ae&268435457&&(he.$$scope={dirty:ae,ctx:le}),te.$set(he)},i(le){oe||(transition_in(te.$$.fragment,le),transition_in(re.$$.fragment,le),oe=!0)},o(le){transition_out(te.$$.fragment,le),transition_out(re.$$.fragment,le),oe=!1},d(le){le&&detach(ne),destroy_component(te,le),destroy_component(re,le)}}}function create_if_block_4$1(ie){let te,ne,re,oe,le,ae,he;function de($e){ie[20]($e)}function ue($e){ie[21]($e)}function pe($e){ie[22]($e)}function fe($e){ie[23]($e)}let ge={};return ie[2]!==void 0&&(ge.construct_command=ie[2]),ie[3]!==void 0&&(ge.savedState=ie[3]),ie[5]!==void 0&&(ge.variables=ie[5]),ie[1]!==void 0&&(ge.incoming_data=ie[1]),ne=new Construct({props:ge}),binding_callbacks.push(()=>bind(ne,"construct_command",de)),binding_callbacks.push(()=>bind(ne,"savedState",ue)),binding_callbacks.push(()=>bind(ne,"variables",pe)),binding_callbacks.push(()=>bind(ne,"incoming_data",fe)),{c(){te=element("div"),create_component(ne.$$.fragment),set_style(te,"padding","0px"),set_style(te,"position","relative")},m($e,Te){insert($e,te,Te),mount_component(ne,te,null),he=!0},p($e,Te){const Ee={};!re&&Te&4&&(re=!0,Ee.construct_command=$e[2],add_flush_callback(()=>re=!1)),!oe&&Te&8&&(oe=!0,Ee.savedState=$e[3],add_flush_callback(()=>oe=!1)),!le&&Te&32&&(le=!0,Ee.variables=$e[5],add_flush_callback(()=>le=!1)),!ae&&Te&2&&(ae=!0,Ee.incoming_data=$e[1],add_flush_callback(()=>ae=!1)),ne.$set(Ee)},i($e){he||(transition_in(ne.$$.fragment,$e),he=!0)},o($e){transition_out(ne.$$.fragment,$e),he=!1},d($e){$e&&detach(te),destroy_component(ne)}}}function create_if_block_3$1(ie){let te,ne,re,oe;function le(de){ie[18](de)}function ae(de){ie[19](de)}let he={extension:"behaviour",dir:"behaviours",default_image:reality2behaviours};return ie[0]!==void 0&&(he.subpage=ie[0]),ie[1]!==void 0&&(he.incoming_data=ie[1]),te=new MarketItems({props:he}),binding_callbacks.push(()=>bind(te,"subpage",le)),binding_callbacks.push(()=>bind(te,"incoming_data",ae)),{c(){create_component(te.$$.fragment)},m(de,ue){mount_component(te,de,ue),oe=!0},p(de,ue){const pe={};!ne&&ue&1&&(ne=!0,pe.subpage=de[0],add_flush_callback(()=>ne=!1)),!re&&ue&2&&(re=!0,pe.incoming_data=de[1],add_flush_callback(()=>re=!1)),te.$set(pe)},i(de){oe||(transition_in(te.$$.fragment,de),oe=!0)},o(de){transition_out(te.$$.fragment,de),oe=!1},d(de){destroy_component(te,de)}}}function create_if_block_2$1(ie){let te,ne,re,oe;function le(de){ie[16](de)}function ae(de){ie[17](de)}let he={extension:"antenna",dir:"antennae",default_image:reality2antennae};return ie[0]!==void 0&&(he.subpage=ie[0]),ie[1]!==void 0&&(he.incoming_data=ie[1]),te=new MarketItems({props:he}),binding_callbacks.push(()=>bind(te,"subpage",le)),binding_callbacks.push(()=>bind(te,"incoming_data",ae)),{c(){create_component(te.$$.fragment)},m(de,ue){mount_component(te,de,ue),oe=!0},p(de,ue){const pe={};!ne&&ue&1&&(ne=!0,pe.subpage=de[0],add_flush_callback(()=>ne=!1)),!re&&ue&2&&(re=!0,pe.incoming_data=de[1],add_flush_callback(()=>re=!1)),te.$set(pe)},i(de){oe||(transition_in(te.$$.fragment,de),oe=!0)},o(de){transition_out(te.$$.fragment,de),oe=!1},d(de){destroy_component(te,de)}}}function create_if_block_1$1(ie){let te,ne,re,oe;function le(de){ie[14](de)}function ae(de){ie[15](de)}let he={extension:"bee",dir:"bees",default_image:reality2bee};return ie[0]!==void 0&&(he.subpage=ie[0]),ie[1]!==void 0&&(he.incoming_data=ie[1]),te=new MarketItems({props:he}),binding_callbacks.push(()=>bind(te,"subpage",le)),binding_callbacks.push(()=>bind(te,"incoming_data",ae)),{c(){create_component(te.$$.fragment)},m(de,ue){mount_component(te,de,ue),oe=!0},p(de,ue){const pe={};!ne&&ue&1&&(ne=!0,pe.subpage=de[0],add_flush_callback(()=>ne=!1)),!re&&ue&2&&(re=!0,pe.incoming_data=de[1],add_flush_callback(()=>re=!1)),te.$set(pe)},i(de){oe||(transition_in(te.$$.fragment,de),oe=!0)},o(de){transition_out(te.$$.fragment,de),oe=!1},d(de){destroy_component(te,de)}}}function create_if_block$1(ie){let te,ne,re,oe;function le(de){ie[12](de)}function ae(de){ie[13](de)}let he={extension:"swarm",dir:"swarms",default_image:reality2swarm};return ie[0]!==void 0&&(he.subpage=ie[0]),ie[1]!==void 0&&(he.incoming_data=ie[1]),te=new MarketItems({props:he}),binding_callbacks.push(()=>bind(te,"subpage",le)),binding_callbacks.push(()=>bind(te,"incoming_data",ae)),{c(){create_component(te.$$.fragment)},m(de,ue){mount_component(te,de,ue),oe=!0},p(de,ue){const pe={};!ne&&ue&1&&(ne=!0,pe.subpage=de[0],add_flush_callback(()=>ne=!1)),!re&&ue&2&&(re=!0,pe.incoming_data=de[1],add_flush_callback(()=>re=!1)),te.$set(pe)},i(de){oe||(transition_in(te.$$.fragment,de),oe=!0)},o(de){transition_out(te.$$.fragment,de),oe=!1},d(de){destroy_component(te,de)}}}function create_fragment$5(ie){let te,ne,re,oe,le,ae,he,de;te=new Container({props:{ui:!0,style:"padding-top:50px;padding-bottom:20px;",$$slots:{default:[create_default_slot_6$4]},$$scope:{ctx:ie}}}),re=new Container({props:{ui:!0,stackable:!0,$$slots:{default:[create_default_slot$5]},$$scope:{ctx:ie}}});const ue=[create_if_block$1,create_if_block_1$1,create_if_block_2$1,create_if_block_3$1,create_if_block_4$1],pe=[];function fe(ge,$e){return ge[0]=="swarms"?0:ge[0]=="bees"?1:ge[0]=="antennae"?2:ge[0]=="behaviours"?3:ge[0]=="playground"?4:-1}return~(le=fe(ie))&&(ae=pe[le]=ue[le](ie)),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment),oe=space(),ae&&ae.c(),he=empty$1()},m(ge,$e){mount_component(te,ge,$e),insert(ge,ne,$e),mount_component(re,ge,$e),insert(ge,oe,$e),~le&&pe[le].m(ge,$e),insert(ge,he,$e),de=!0},p(ge,[$e]){const Te={};$e&268435472&&(Te.$$scope={dirty:$e,ctx:ge}),te.$set(Te);const Ee={};$e&268435457&&(Ee.$$scope={dirty:$e,ctx:ge}),re.$set(Ee);let Se=le;le=fe(ge),le===Se?~le&&pe[le].p(ge,$e):(ae&&(group_outros(),transition_out(pe[Se],1,1,()=>{pe[Se]=null}),check_outros()),~le?(ae=pe[le],ae?ae.p(ge,$e):(ae=pe[le]=ue[le](ge),ae.c()),transition_in(ae,1),ae.m(he.parentNode,he)):ae=null)},i(ge){de||(transition_in(te.$$.fragment,ge),transition_in(re.$$.fragment,ge),transition_in(ae),de=!0)},o(ge){transition_out(te.$$.fragment,ge),transition_out(re.$$.fragment,ge),transition_out(ae),de=!1},d(ge){ge&&(detach(ne),detach(oe),detach(he)),destroy_component(te,ge),destroy_component(re,ge),~le&&pe[le].d(ge)}}}function instance$5(ie,te,ne){let re,{page:oe="start"}=te,le="swarms",ae=["json",""];var he="";let de={},ue=`        flowchart LR
            A[Download Swarm, Bee, Antenna or Behaviour Definitions from below or from the <a href='https://github.com/reality-two/reality2-definitions'>R2-definitions Github</a>] --> B(Load onto Node using <a href='https://github.com/reality-two/reality2-documentation/blob/main/userfriendly/construct.md'>Construct</a> in default WebApp, <a href='https://github.com/reality-two/reality2-definitions/tree/main/client-python'>Python Client</a> or via <a href='https://github.com/reality-two/reality2-documentation/blob/main/instructions/4%20GraphQL/README.md'>GraphQL</a>)
            B --> C(Tweak and combine with other Recipes to build desired behaviours and add authentication codes.)
            C --> D(Set running on Node.)
            D --> E(Interact using the <a href='https://github.com/reality-two/reality2-node-core-elixir/tree/main/web/sentants'>default WebApp</a>, <a href='https://github.com/reality-two/reality2-definitions/tree/main/client-python'>Python Client</a> or via <a href='https://github.com/reality-two/reality2-documentation/blob/main/instructions/4%20GraphQL/README.md'>GraphQL</a>)
    `,pe;async function fe(){const{svg:rt}=await mermaid_default.render("mermaid",ue);ne(4,pe.innerHTML=rt,pe)}fe();function ge(rt){binding_callbacks[rt?"unshift":"push"](()=>{pe=rt,ne(4,pe)})}const $e=()=>ne(0,le="swarms"),Te=()=>ne(0,le="bees"),Ee=()=>ne(0,le="antennae"),Se=()=>ne(0,le="behaviours");function ve(rt){le=rt,ne(0,le)}function ke(rt){ae=rt,ne(1,ae)}function Re(rt){le=rt,ne(0,le)}function Ne(rt){ae=rt,ne(1,ae)}function xe(rt){le=rt,ne(0,le)}function ze(rt){ae=rt,ne(1,ae)}function Me(rt){le=rt,ne(0,le)}function Ae(rt){ae=rt,ne(1,ae)}function Qe(rt){he=rt,ne(2,he)}function ht(rt){de=rt,ne(3,de)}function Pe(rt){re=rt,ne(5,re)}function _t(rt){ae=rt,ne(1,ae)}return ie.$$set=rt=>{"page"in rt&&ne(6,oe=rt.page)},ne(5,re={}),[le,ae,he,de,pe,re,oe,ge,$e,Te,Ee,Se,ve,ke,Re,Ne,xe,ze,Me,Ae,Qe,ht,Pe,_t]}class Marketplace extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$5,create_fragment$5,safe_not_equal,{page:6})}}function create_default_slot_21$1(ie){let te;return{c(){te=text$2("Reality2 - The framework for the Objects and Actors Metaphor.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_20$1(ie){let te,ne;return te=new Text({props:{ui:!0,big:!0,$$slots:{default:[create_default_slot_21$1]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&2&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_19$1(ie){let te;return{c(){te=text$2("Reality2 imbues wearable and stationary devices with Sentient Digital Agent intelligence, enabling the private use of contextual information to empower adaptive and adaptable interactions, greatly simplifying usability to support the Objects and Actors Metaphor.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_18$1(ie){let te;return{c(){te=text$2("cognitive frameworks")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_17$1(ie){let te,ne,re,oe;return ne=new Link({props:{href:"https://simplyputpsych.co.uk/psych-101-1/what-is-a-schema-in-psychology",target:"_blank",$$slots:{default:[create_default_slot_18$1]},$$scope:{ctx:ie}}}),{c(){te=text$2("We humans build "),create_component(ne.$$.fragment),re=text$2(" in our minds to represent and help understand the complexities of the world around us.  These simplified representations of reality are used to explain our observations and are constantly being revised and adapted as new information comes to light.")},m(le,ae){insert(le,te,ae),mount_component(ne,le,ae),insert(le,re,ae),oe=!0},p(le,ae){const he={};ae&2&&(he.$$scope={dirty:ae,ctx:le}),ne.$set(he)},i(le){oe||(transition_in(ne.$$.fragment,le),oe=!0)},o(le){transition_out(ne.$$.fragment,le),oe=!1},d(le){le&&(detach(te),detach(re)),destroy_component(ne,le)}}}function create_default_slot_16$1(ie){let te;return{c(){te=text$2("Oftentimes, we seek to draw parallels between something we already know and the new information we are trying to make sense of.  To do this, we use metaphors.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_15$1(ie){let te;return{c(){te=text$2("'Calm Technology'")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_14$1(ie){let te,ne,re,oe;return ne=new Link({props:{href:"https://calmtech.com/",target:"_blank",$$slots:{default:[create_default_slot_15$1]},$$scope:{ctx:ie}}}),{c(){te=text$2("For human-made tools, this metaphor becomes the language between the designer and the tool user.  Well-designed tools embody the natural understandings and cognitive and physical capabilities of people, in other words, "),create_component(ne.$$.fragment),re=text$2(".")},m(le,ae){insert(le,te,ae),mount_component(ne,le,ae),insert(le,re,ae),oe=!0},p(le,ae){const he={};ae&2&&(he.$$scope={dirty:ae,ctx:le}),ne.$set(he)},i(le){oe||(transition_in(ne.$$.fragment,le),oe=!0)},o(le){transition_out(ne.$$.fragment,le),oe=!1},d(le){le&&(detach(te),detach(re)),destroy_component(ne,le)}}}function create_default_slot_13$2(ie){let te;return{c(){te=text$2("natural affordance")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_12$3(ie){let te,ne,re,oe;return ne=new Link({props:{href:"https://www.researchgate.net/publication/323773021_'Affordance'_-_what_does_this_mean",target:"_blank",$$slots:{default:[create_default_slot_13$2]},$$scope:{ctx:ie}}}),{c(){te=text$2("A tool that is designed for driving a spiky piece of metal into a piece of wood to secure it to another, will likely be heavy at one end, have a handle that can be grasped, and be strong enough to take the blows.  The "),create_component(ne.$$.fragment),re=text$2(" is so strong that a human picking up such a tool will likely start looking for things to hammer.")},m(le,ae){insert(le,te,ae),mount_component(ne,le,ae),insert(le,re,ae),oe=!0},p(le,ae){const he={};ae&2&&(he.$$scope={dirty:ae,ctx:le}),ne.$set(he)},i(le){oe||(transition_in(ne.$$.fragment,le),oe=!0)},o(le){transition_out(ne.$$.fragment,le),oe=!1},d(le){le&&(detach(te),detach(re)),destroy_component(ne,le)}}}function create_default_slot_11$3(ie){let te;return{c(){te=text$2("metaphor-as-a-language")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_10$3(ie){let te,ne,re,oe;return ne=new Link({props:{href:"https://www.researchgate.net/publication/267487031_Metaphors_in_Conceptual_Design",target:"_blank",$$slots:{default:[create_default_slot_11$3]},$$scope:{ctx:ie}}}),{c(){te=text$2("This "),create_component(ne.$$.fragment),re=text$2(" has been vital in the design of digital technologies.  How many people really understand how a mobile phone works, for example, let alone the Internet and cell networks that connect them all together?")},m(le,ae){insert(le,te,ae),mount_component(ne,le,ae),insert(le,re,ae),oe=!0},p(le,ae){const he={};ae&2&&(he.$$scope={dirty:ae,ctx:le}),ne.$set(he)},i(le){oe||(transition_in(ne.$$.fragment,le),oe=!0)},o(le){transition_out(ne.$$.fragment,le),oe=!1},d(le){le&&(detach(te),detach(re)),destroy_component(ne,le)}}}function create_default_slot_9$3(ie){let te;return{c(){te=text$2("Desktop Metaphor")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_8$3(ie){let te,ne,re,oe;return ne=new Link({props:{href:"https://en.wikipedia.org/wiki/Desktop_metaphor",target:"_blank",$$slots:{default:[create_default_slot_9$3]},$$scope:{ctx:ie}}}),{c(){te=text$2("In the world of personal computers, the "),create_component(ne.$$.fragment),re=text$2(" has served us well, providing a conceptualisation of the inner gubbings of a networked computer since the days of Xerox Parc.  Even mobile devices use a variation of that metaphor, with icons, documents, filing systems, keyboards, and trash cans.")},m(le,ae){insert(le,te,ae),mount_component(ne,le,ae),insert(le,re,ae),oe=!0},p(le,ae){const he={};ae&2&&(he.$$scope={dirty:ae,ctx:le}),ne.$set(he)},i(le){oe||(transition_in(ne.$$.fragment,le),oe=!0)},o(le){transition_out(ne.$$.fragment,le),oe=!1},d(le){le&&(detach(te),detach(re)),destroy_component(ne,le)}}}function create_default_slot_7$3(ie){let te;return{c(){te=text$2("spatial computing")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_6$3(ie){let te;return{c(){te=text$2("Mixed Reality")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_5$3(ie){let te,ne,re,oe,le,ae;return ne=new Link({props:{href:"https://en.wikipedia.org/wiki/Spatial_computing",$$slots:{default:[create_default_slot_7$3]},$$scope:{ctx:ie}}}),oe=new Link({props:{href:"https://en.wikipedia.org/wiki/Mixed_reality",$$slots:{default:[create_default_slot_6$3]},$$scope:{ctx:ie}}}),{c(){te=text$2("However, with the emergence of "),create_component(ne.$$.fragment),re=text$2(" and everyday "),create_component(oe.$$.fragment),le=text$2(", is this metaphor finally going to be deemed ineffective as a language between digital tool designers and their users?")},m(he,de){insert(he,te,de),mount_component(ne,he,de),insert(he,re,de),mount_component(oe,he,de),insert(he,le,de),ae=!0},p(he,de){const ue={};de&2&&(ue.$$scope={dirty:de,ctx:he}),ne.$set(ue);const pe={};de&2&&(pe.$$scope={dirty:de,ctx:he}),oe.$set(pe)},i(he){ae||(transition_in(ne.$$.fragment,he),transition_in(oe.$$.fragment,he),ae=!0)},o(he){transition_out(ne.$$.fragment,he),transition_out(oe.$$.fragment,he),ae=!1},d(he){he&&(detach(te),detach(re),detach(le)),destroy_component(ne,he),destroy_component(oe,he)}}}function create_default_slot_4$3(ie){let te;return{c(){te=text$2("As people carry multiple devices with them, using them when out and about, with interaction via natural language and gestures; we are entering a new paradigm embodied by the 'Objects and Actors Metaphor'.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_3$3(ie){let te,ne,re,oe,le,ae,he,de,ue,pe,fe,ge,$e,Te,Ee,Se,ve,ke,Re,Ne,xe,ze,Me,Ae,Qe,ht,Pe,_t,rt,Ke,Je,qe,ct,Le,je,pt,Ot,Ht;return te=new Divider({props:{ui:!0}}),re=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_19$1]},$$scope:{ctx:ie}}}),le=new Divider({props:{ui:!0}}),he=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_17$1]},$$scope:{ctx:ie}}}),ue=new Divider({props:{ui:!0}}),fe=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_16$1]},$$scope:{ctx:ie}}}),$e=new Divider({props:{ui:!0}}),Ee=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_14$1]},$$scope:{ctx:ie}}}),ve=new Divider({props:{ui:!0}}),Re=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_12$3]},$$scope:{ctx:ie}}}),xe=new Divider({props:{ui:!0}}),Me=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_10$3]},$$scope:{ctx:ie}}}),Qe=new Divider({props:{ui:!0}}),Pe=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_8$3]},$$scope:{ctx:ie}}}),rt=new Divider({props:{ui:!0}}),Je=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_5$3]},$$scope:{ctx:ie}}}),ct=new Divider({props:{ui:!0}}),je=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_4$3]},$$scope:{ctx:ie}}}),Ot=new Divider({props:{ui:!0}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment),oe=space(),create_component(le.$$.fragment),ae=space(),create_component(he.$$.fragment),de=space(),create_component(ue.$$.fragment),pe=space(),create_component(fe.$$.fragment),ge=space(),create_component($e.$$.fragment),Te=space(),create_component(Ee.$$.fragment),Se=space(),create_component(ve.$$.fragment),ke=space(),create_component(Re.$$.fragment),Ne=space(),create_component(xe.$$.fragment),ze=space(),create_component(Me.$$.fragment),Ae=space(),create_component(Qe.$$.fragment),ht=space(),create_component(Pe.$$.fragment),_t=space(),create_component(rt.$$.fragment),Ke=space(),create_component(Je.$$.fragment),qe=space(),create_component(ct.$$.fragment),Le=space(),create_component(je.$$.fragment),pt=space(),create_component(Ot.$$.fragment)},m(Ze,bt){mount_component(te,Ze,bt),insert(Ze,ne,bt),mount_component(re,Ze,bt),insert(Ze,oe,bt),mount_component(le,Ze,bt),insert(Ze,ae,bt),mount_component(he,Ze,bt),insert(Ze,de,bt),mount_component(ue,Ze,bt),insert(Ze,pe,bt),mount_component(fe,Ze,bt),insert(Ze,ge,bt),mount_component($e,Ze,bt),insert(Ze,Te,bt),mount_component(Ee,Ze,bt),insert(Ze,Se,bt),mount_component(ve,Ze,bt),insert(Ze,ke,bt),mount_component(Re,Ze,bt),insert(Ze,Ne,bt),mount_component(xe,Ze,bt),insert(Ze,ze,bt),mount_component(Me,Ze,bt),insert(Ze,Ae,bt),mount_component(Qe,Ze,bt),insert(Ze,ht,bt),mount_component(Pe,Ze,bt),insert(Ze,_t,bt),mount_component(rt,Ze,bt),insert(Ze,Ke,bt),mount_component(Je,Ze,bt),insert(Ze,qe,bt),mount_component(ct,Ze,bt),insert(Ze,Le,bt),mount_component(je,Ze,bt),insert(Ze,pt,bt),mount_component(Ot,Ze,bt),Ht=!0},p(Ze,bt){const Pt={};bt&2&&(Pt.$$scope={dirty:bt,ctx:Ze}),re.$set(Pt);const Et={};bt&2&&(Et.$$scope={dirty:bt,ctx:Ze}),he.$set(Et);const Lt={};bt&2&&(Lt.$$scope={dirty:bt,ctx:Ze}),fe.$set(Lt);const Ut={};bt&2&&(Ut.$$scope={dirty:bt,ctx:Ze}),Ee.$set(Ut);const Bt={};bt&2&&(Bt.$$scope={dirty:bt,ctx:Ze}),Re.$set(Bt);const Ft={};bt&2&&(Ft.$$scope={dirty:bt,ctx:Ze}),Me.$set(Ft);const jt={};bt&2&&(jt.$$scope={dirty:bt,ctx:Ze}),Pe.$set(jt);const zt={};bt&2&&(zt.$$scope={dirty:bt,ctx:Ze}),Je.$set(zt);const mi={};bt&2&&(mi.$$scope={dirty:bt,ctx:Ze}),je.$set(mi)},i(Ze){Ht||(transition_in(te.$$.fragment,Ze),transition_in(re.$$.fragment,Ze),transition_in(le.$$.fragment,Ze),transition_in(he.$$.fragment,Ze),transition_in(ue.$$.fragment,Ze),transition_in(fe.$$.fragment,Ze),transition_in($e.$$.fragment,Ze),transition_in(Ee.$$.fragment,Ze),transition_in(ve.$$.fragment,Ze),transition_in(Re.$$.fragment,Ze),transition_in(xe.$$.fragment,Ze),transition_in(Me.$$.fragment,Ze),transition_in(Qe.$$.fragment,Ze),transition_in(Pe.$$.fragment,Ze),transition_in(rt.$$.fragment,Ze),transition_in(Je.$$.fragment,Ze),transition_in(ct.$$.fragment,Ze),transition_in(je.$$.fragment,Ze),transition_in(Ot.$$.fragment,Ze),Ht=!0)},o(Ze){transition_out(te.$$.fragment,Ze),transition_out(re.$$.fragment,Ze),transition_out(le.$$.fragment,Ze),transition_out(he.$$.fragment,Ze),transition_out(ue.$$.fragment,Ze),transition_out(fe.$$.fragment,Ze),transition_out($e.$$.fragment,Ze),transition_out(Ee.$$.fragment,Ze),transition_out(ve.$$.fragment,Ze),transition_out(Re.$$.fragment,Ze),transition_out(xe.$$.fragment,Ze),transition_out(Me.$$.fragment,Ze),transition_out(Qe.$$.fragment,Ze),transition_out(Pe.$$.fragment,Ze),transition_out(rt.$$.fragment,Ze),transition_out(Je.$$.fragment,Ze),transition_out(ct.$$.fragment,Ze),transition_out(je.$$.fragment,Ze),transition_out(Ot.$$.fragment,Ze),Ht=!1},d(Ze){Ze&&(detach(ne),detach(oe),detach(ae),detach(de),detach(pe),detach(ge),detach(Te),detach(Se),detach(ke),detach(Ne),detach(ze),detach(Ae),detach(ht),detach(_t),detach(Ke),detach(qe),detach(Le),detach(pt)),destroy_component(te,Ze),destroy_component(re,Ze),destroy_component(le,Ze),destroy_component(he,Ze),destroy_component(ue,Ze),destroy_component(fe,Ze),destroy_component($e,Ze),destroy_component(Ee,Ze),destroy_component(ve,Ze),destroy_component(Re,Ze),destroy_component(xe,Ze),destroy_component(Me,Ze),destroy_component(Qe,Ze),destroy_component(Pe,Ze),destroy_component(rt,Ze),destroy_component(Je,Ze),destroy_component(ct,Ze),destroy_component(je,Ze),destroy_component(Ot,Ze)}}}function create_default_slot_2$3(ie){let te;return{c(){te=text$2("As intuitive as picking up and throwing a ball; as human as having a conversation.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_1$3(ie){let te,ne;return te=new Text({props:{ui:!0,big:!0,$$slots:{default:[create_default_slot_2$3]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&2&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot$4(ie){let te,ne,re,oe,le,ae;return te=new Column({props:{sixteen:!0,wide:!0,centered:!0,$$slots:{default:[create_default_slot_20$1]},$$scope:{ctx:ie}}}),re=new Column({props:{sixteen:!0,wide:!0,justified:!0,$$slots:{default:[create_default_slot_3$3]},$$scope:{ctx:ie}}}),le=new Column({props:{sixteen:!0,wide:!0,centered:!0,$$slots:{default:[create_default_slot_1$3]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment),oe=space(),create_component(le.$$.fragment)},m(he,de){mount_component(te,he,de),insert(he,ne,de),mount_component(re,he,de),insert(he,oe,de),mount_component(le,he,de),ae=!0},p(he,de){const ue={};de&2&&(ue.$$scope={dirty:de,ctx:he}),te.$set(ue);const pe={};de&2&&(pe.$$scope={dirty:de,ctx:he}),re.$set(pe);const fe={};de&2&&(fe.$$scope={dirty:de,ctx:he}),le.$set(fe)},i(he){ae||(transition_in(te.$$.fragment,he),transition_in(re.$$.fragment,he),transition_in(le.$$.fragment,he),ae=!0)},o(he){transition_out(te.$$.fragment,he),transition_out(re.$$.fragment,he),transition_out(le.$$.fragment,he),ae=!1},d(he){he&&(detach(ne),detach(oe)),destroy_component(te,he),destroy_component(re,he),destroy_component(le,he)}}}function create_fragment$4(ie){let te,ne;return te=new Container({props:{ui:!0,grid:!0,style:"padding-top:50px;min-height:200px;padding-bottom:50px;",$$slots:{default:[create_default_slot$4]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,[oe]){const le={};oe&2&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function instance$4(ie,te,ne){let{page:re="start"}=te;return ie.$$set=oe=>{"page"in oe&&ne(0,re=oe.page)},[re]}class ObjectsAndActors extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$4,create_fragment$4,safe_not_equal,{page:0})}}function create_default_slot_13$1(ie){let te;return{c(){te=text$2("Transient Networks, connecting devices without bother.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_12$2(ie){let te,ne;return te=new Text({props:{ui:!0,big:!0,$$slots:{default:[create_default_slot_13$1]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&2&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_11$2(ie){let te;return{c(){te=text$2("Reality2 is built on existing hardware and software infrastructure protocols, but reuses these in unusual ways to simplify the user experience to build the Objects and Actors metaphor.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_10$2(ie){let te;return{c(){te=text$2("One of life's complexities is digital authentication.  In the analogue world, this is much less common, with 'authentication' built into the very interaction itself.  I don't need to prove I can throw a ball before I pick it up, I will just be able to do it, or not.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_9$2(ie){let te;return{c(){te=text$2("Similarly, when I walk up to a display screen, I should be able to put up my slidedeck presentation with the flick of the wrist, without first having to wrangle cables or find out the WiFi password.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_8$2(ie){let te;return{c(){te=text$2("Or, when I want to purchase something in a shop, the Point of Sale machine should be able to get permission from the Reality2 enabled devices I am wearing or carrying without having to go through the complexities of swiping cards and PIN codes.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_7$2(ie){let te;return{c(){te=text$2("Me, just being there in that moment, should be enough.  The intelligent use of context (who I am, what I am doing, who I am with, what I typically do here, at this time, etc) is a powerful tool for building Calm Technologies.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_6$2(ie){let te;return{c(){te=text$2("Transient Networks allow Reality2 empowered devices to interact when they are close enough together without having to first connect with passwords, codes or pairing.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_5$2(ie){let te;return{c(){te=text$2("Imagine that each device has around it an interactivity field.  When fields intersect, the Sentient Digital Agents can interact.  So, authentication occurs at the Digital Agent level, not the network level.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_4$2(ie){let te;return{c(){te=text$2("Technically, Reality2 empowered devices use a combination of BLE, Bluetooth and WiFi (and sometimes other protocols such as LoRa) to implement the concept of proximity fields for Transient Networks.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_3$2(ie){let te,ne,re,oe,le,ae,he,de,ue,pe,fe,ge,$e,Te,Ee,Se,ve,ke,Re,Ne,xe,ze,Me,Ae,Qe,ht,Pe,_t,rt,Ke,Je,qe,ct,Le;return te=new Divider({props:{ui:!0}}),re=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_11$2]},$$scope:{ctx:ie}}}),le=new Divider({props:{ui:!0}}),he=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_10$2]},$$scope:{ctx:ie}}}),ue=new Divider({props:{ui:!0}}),fe=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_9$2]},$$scope:{ctx:ie}}}),$e=new Divider({props:{ui:!0}}),Ee=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_8$2]},$$scope:{ctx:ie}}}),ve=new Divider({props:{ui:!0}}),Re=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_7$2]},$$scope:{ctx:ie}}}),xe=new Divider({props:{ui:!0}}),Me=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_6$2]},$$scope:{ctx:ie}}}),Qe=new Divider({props:{ui:!0}}),Pe=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_5$2]},$$scope:{ctx:ie}}}),rt=new Divider({props:{ui:!0}}),Je=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_4$2]},$$scope:{ctx:ie}}}),ct=new Divider({props:{ui:!0}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment),oe=space(),create_component(le.$$.fragment),ae=space(),create_component(he.$$.fragment),de=space(),create_component(ue.$$.fragment),pe=space(),create_component(fe.$$.fragment),ge=space(),create_component($e.$$.fragment),Te=space(),create_component(Ee.$$.fragment),Se=space(),create_component(ve.$$.fragment),ke=space(),create_component(Re.$$.fragment),Ne=space(),create_component(xe.$$.fragment),ze=space(),create_component(Me.$$.fragment),Ae=space(),create_component(Qe.$$.fragment),ht=space(),create_component(Pe.$$.fragment),_t=space(),create_component(rt.$$.fragment),Ke=space(),create_component(Je.$$.fragment),qe=space(),create_component(ct.$$.fragment)},m(je,pt){mount_component(te,je,pt),insert(je,ne,pt),mount_component(re,je,pt),insert(je,oe,pt),mount_component(le,je,pt),insert(je,ae,pt),mount_component(he,je,pt),insert(je,de,pt),mount_component(ue,je,pt),insert(je,pe,pt),mount_component(fe,je,pt),insert(je,ge,pt),mount_component($e,je,pt),insert(je,Te,pt),mount_component(Ee,je,pt),insert(je,Se,pt),mount_component(ve,je,pt),insert(je,ke,pt),mount_component(Re,je,pt),insert(je,Ne,pt),mount_component(xe,je,pt),insert(je,ze,pt),mount_component(Me,je,pt),insert(je,Ae,pt),mount_component(Qe,je,pt),insert(je,ht,pt),mount_component(Pe,je,pt),insert(je,_t,pt),mount_component(rt,je,pt),insert(je,Ke,pt),mount_component(Je,je,pt),insert(je,qe,pt),mount_component(ct,je,pt),Le=!0},p(je,pt){const Ot={};pt&2&&(Ot.$$scope={dirty:pt,ctx:je}),re.$set(Ot);const Ht={};pt&2&&(Ht.$$scope={dirty:pt,ctx:je}),he.$set(Ht);const Ze={};pt&2&&(Ze.$$scope={dirty:pt,ctx:je}),fe.$set(Ze);const bt={};pt&2&&(bt.$$scope={dirty:pt,ctx:je}),Ee.$set(bt);const Pt={};pt&2&&(Pt.$$scope={dirty:pt,ctx:je}),Re.$set(Pt);const Et={};pt&2&&(Et.$$scope={dirty:pt,ctx:je}),Me.$set(Et);const Lt={};pt&2&&(Lt.$$scope={dirty:pt,ctx:je}),Pe.$set(Lt);const Ut={};pt&2&&(Ut.$$scope={dirty:pt,ctx:je}),Je.$set(Ut)},i(je){Le||(transition_in(te.$$.fragment,je),transition_in(re.$$.fragment,je),transition_in(le.$$.fragment,je),transition_in(he.$$.fragment,je),transition_in(ue.$$.fragment,je),transition_in(fe.$$.fragment,je),transition_in($e.$$.fragment,je),transition_in(Ee.$$.fragment,je),transition_in(ve.$$.fragment,je),transition_in(Re.$$.fragment,je),transition_in(xe.$$.fragment,je),transition_in(Me.$$.fragment,je),transition_in(Qe.$$.fragment,je),transition_in(Pe.$$.fragment,je),transition_in(rt.$$.fragment,je),transition_in(Je.$$.fragment,je),transition_in(ct.$$.fragment,je),Le=!0)},o(je){transition_out(te.$$.fragment,je),transition_out(re.$$.fragment,je),transition_out(le.$$.fragment,je),transition_out(he.$$.fragment,je),transition_out(ue.$$.fragment,je),transition_out(fe.$$.fragment,je),transition_out($e.$$.fragment,je),transition_out(Ee.$$.fragment,je),transition_out(ve.$$.fragment,je),transition_out(Re.$$.fragment,je),transition_out(xe.$$.fragment,je),transition_out(Me.$$.fragment,je),transition_out(Qe.$$.fragment,je),transition_out(Pe.$$.fragment,je),transition_out(rt.$$.fragment,je),transition_out(Je.$$.fragment,je),transition_out(ct.$$.fragment,je),Le=!1},d(je){je&&(detach(ne),detach(oe),detach(ae),detach(de),detach(pe),detach(ge),detach(Te),detach(Se),detach(ke),detach(Ne),detach(ze),detach(Ae),detach(ht),detach(_t),detach(Ke),detach(qe)),destroy_component(te,je),destroy_component(re,je),destroy_component(le,je),destroy_component(he,je),destroy_component(ue,je),destroy_component(fe,je),destroy_component($e,je),destroy_component(Ee,je),destroy_component(ve,je),destroy_component(Re,je),destroy_component(xe,je),destroy_component(Me,je),destroy_component(Qe,je),destroy_component(Pe,je),destroy_component(rt,je),destroy_component(Je,je),destroy_component(ct,je)}}}function create_default_slot_2$2(ie){let te;return{c(){te=text$2("Seamless and bother-less interaction between Reality2 empowered devices.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_1$2(ie){let te,ne;return te=new Text({props:{ui:!0,big:!0,$$slots:{default:[create_default_slot_2$2]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&2&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot$3(ie){let te,ne,re,oe,le,ae;return te=new Column({props:{sixteen:!0,wide:!0,centered:!0,$$slots:{default:[create_default_slot_12$2]},$$scope:{ctx:ie}}}),re=new Column({props:{sixteen:!0,wide:!0,justified:!0,$$slots:{default:[create_default_slot_3$2]},$$scope:{ctx:ie}}}),le=new Column({props:{sixteen:!0,wide:!0,centered:!0,$$slots:{default:[create_default_slot_1$2]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment),oe=space(),create_component(le.$$.fragment)},m(he,de){mount_component(te,he,de),insert(he,ne,de),mount_component(re,he,de),insert(he,oe,de),mount_component(le,he,de),ae=!0},p(he,de){const ue={};de&2&&(ue.$$scope={dirty:de,ctx:he}),te.$set(ue);const pe={};de&2&&(pe.$$scope={dirty:de,ctx:he}),re.$set(pe);const fe={};de&2&&(fe.$$scope={dirty:de,ctx:he}),le.$set(fe)},i(he){ae||(transition_in(te.$$.fragment,he),transition_in(re.$$.fragment,he),transition_in(le.$$.fragment,he),ae=!0)},o(he){transition_out(te.$$.fragment,he),transition_out(re.$$.fragment,he),transition_out(le.$$.fragment,he),ae=!1},d(he){he&&(detach(ne),detach(oe)),destroy_component(te,he),destroy_component(re,he),destroy_component(le,he)}}}function create_fragment$3(ie){let te,ne;return te=new Container({props:{ui:!0,grid:!0,style:"padding-top:50px;min-height:200px;padding-bottom:50px;",$$slots:{default:[create_default_slot$3]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,[oe]){const le={};oe&2&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function instance$3(ie,te,ne){let{page:re="start"}=te;return ie.$$set=oe=>{"page"in oe&&ne(0,re=oe.page)},[re]}class TransientNetworks extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$3,create_fragment$3,safe_not_equal,{page:0})}}function create_default_slot_12$1(ie){let te;return{c(){te=text$2("Sentient Digital Agents, your champions and protectors in a fraught world.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_11$1(ie){let te,ne;return te=new Text({props:{ui:!0,big:!0,$$slots:{default:[create_default_slot_12$1]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&2&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_10$1(ie){let te;return{c(){te=text$2("The core of Reality2 is its functionality built on many small, independent elements called 'Sentient Digital Agents' that can sense the digital and physical environments around them.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_9$1(ie){let te;return{c(){te=text$2("We also call Sentants 'Bees', that can work together in 'Swarms'.  Sentants can be programmed (given 'Behaviours') and have their functionality extended using 'Plugins' or 'Antennae' using the bee metaphor.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_8$1(ie){let te;return{c(){te=text$2("A key guideline is that data is to be stored close to its source (with encrypted backups elsewhere as required).  This means that your data is quite literally 'on you', in the devices you wear and carry.  But don't worry, if you lose them, others won't be able to access your personal information.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_7$1(ie){let te;return{c(){te=text$2("Each Sentant (or Bee) has a range of properties, namely it is: Programmeable, Immutable (can't be changed once created), Persistant (exists and 'runs' until it is removed), Unique (only one in the world) and Consistent (it is perceived the same regardless of the visualiser).")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_6$1(ie){let te;return{c(){te=text$2("share functionality")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_5$1(ie){let te,ne,re,oe;return ne=new Link({props:{href:"https://github.com/reality-two/reality2-definitions",target:"_blank",$$slots:{default:[create_default_slot_6$1]},$$scope:{ctx:ie}}}),{c(){te=text$2("Sentants / Bees are set up through loading a script to a Reality2 Node.  These scripts can be exchanged with others to "),create_component(ne.$$.fragment),re=text$2(", and even build up whole libraries of capability.")},m(le,ae){insert(le,te,ae),mount_component(ne,le,ae),insert(le,re,ae),oe=!0},p(le,ae){const he={};ae&2&&(he.$$scope={dirty:ae,ctx:le}),ne.$set(he)},i(le){oe||(transition_in(ne.$$.fragment,le),oe=!0)},o(le){transition_out(ne.$$.fragment,le),oe=!1},d(le){le&&(detach(te),detach(re)),destroy_component(ne,le)}}}function create_default_slot_4$1(ie){let te;return{c(){te=text$2("Swarms of Sentants on Reality2 nodes have the emergent property of the 'Objects and Actors' metaphor.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_3$1(ie){let te,ne,re,oe,le,ae,he,de,ue,pe,fe,ge,$e,Te,Ee,Se,ve,ke,Re,Ne,xe,ze,Me,Ae,Qe,ht;return te=new Divider({props:{ui:!0}}),re=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_10$1]},$$scope:{ctx:ie}}}),le=new Divider({props:{ui:!0}}),he=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_9$1]},$$scope:{ctx:ie}}}),ue=new Divider({props:{ui:!0}}),fe=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_8$1]},$$scope:{ctx:ie}}}),$e=new Divider({props:{ui:!0}}),Ee=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_7$1]},$$scope:{ctx:ie}}}),ve=new Divider({props:{ui:!0}}),Re=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_5$1]},$$scope:{ctx:ie}}}),xe=new Divider({props:{ui:!0}}),Me=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_4$1]},$$scope:{ctx:ie}}}),Qe=new Divider({props:{ui:!0}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment),oe=space(),create_component(le.$$.fragment),ae=space(),create_component(he.$$.fragment),de=space(),create_component(ue.$$.fragment),pe=space(),create_component(fe.$$.fragment),ge=space(),create_component($e.$$.fragment),Te=space(),create_component(Ee.$$.fragment),Se=space(),create_component(ve.$$.fragment),ke=space(),create_component(Re.$$.fragment),Ne=space(),create_component(xe.$$.fragment),ze=space(),create_component(Me.$$.fragment),Ae=space(),create_component(Qe.$$.fragment)},m(Pe,_t){mount_component(te,Pe,_t),insert(Pe,ne,_t),mount_component(re,Pe,_t),insert(Pe,oe,_t),mount_component(le,Pe,_t),insert(Pe,ae,_t),mount_component(he,Pe,_t),insert(Pe,de,_t),mount_component(ue,Pe,_t),insert(Pe,pe,_t),mount_component(fe,Pe,_t),insert(Pe,ge,_t),mount_component($e,Pe,_t),insert(Pe,Te,_t),mount_component(Ee,Pe,_t),insert(Pe,Se,_t),mount_component(ve,Pe,_t),insert(Pe,ke,_t),mount_component(Re,Pe,_t),insert(Pe,Ne,_t),mount_component(xe,Pe,_t),insert(Pe,ze,_t),mount_component(Me,Pe,_t),insert(Pe,Ae,_t),mount_component(Qe,Pe,_t),ht=!0},p(Pe,_t){const rt={};_t&2&&(rt.$$scope={dirty:_t,ctx:Pe}),re.$set(rt);const Ke={};_t&2&&(Ke.$$scope={dirty:_t,ctx:Pe}),he.$set(Ke);const Je={};_t&2&&(Je.$$scope={dirty:_t,ctx:Pe}),fe.$set(Je);const qe={};_t&2&&(qe.$$scope={dirty:_t,ctx:Pe}),Ee.$set(qe);const ct={};_t&2&&(ct.$$scope={dirty:_t,ctx:Pe}),Re.$set(ct);const Le={};_t&2&&(Le.$$scope={dirty:_t,ctx:Pe}),Me.$set(Le)},i(Pe){ht||(transition_in(te.$$.fragment,Pe),transition_in(re.$$.fragment,Pe),transition_in(le.$$.fragment,Pe),transition_in(he.$$.fragment,Pe),transition_in(ue.$$.fragment,Pe),transition_in(fe.$$.fragment,Pe),transition_in($e.$$.fragment,Pe),transition_in(Ee.$$.fragment,Pe),transition_in(ve.$$.fragment,Pe),transition_in(Re.$$.fragment,Pe),transition_in(xe.$$.fragment,Pe),transition_in(Me.$$.fragment,Pe),transition_in(Qe.$$.fragment,Pe),ht=!0)},o(Pe){transition_out(te.$$.fragment,Pe),transition_out(re.$$.fragment,Pe),transition_out(le.$$.fragment,Pe),transition_out(he.$$.fragment,Pe),transition_out(ue.$$.fragment,Pe),transition_out(fe.$$.fragment,Pe),transition_out($e.$$.fragment,Pe),transition_out(Ee.$$.fragment,Pe),transition_out(ve.$$.fragment,Pe),transition_out(Re.$$.fragment,Pe),transition_out(xe.$$.fragment,Pe),transition_out(Me.$$.fragment,Pe),transition_out(Qe.$$.fragment,Pe),ht=!1},d(Pe){Pe&&(detach(ne),detach(oe),detach(ae),detach(de),detach(pe),detach(ge),detach(Te),detach(Se),detach(ke),detach(Ne),detach(ze),detach(Ae)),destroy_component(te,Pe),destroy_component(re,Pe),destroy_component(le,Pe),destroy_component(he,Pe),destroy_component(ue,Pe),destroy_component(fe,Pe),destroy_component($e,Pe),destroy_component(Ee,Pe),destroy_component(ve,Pe),destroy_component(Re,Pe),destroy_component(xe,Pe),destroy_component(Me,Pe),destroy_component(Qe,Pe)}}}function create_default_slot_2$1(ie){let te;return{c(){te=text$2("Sentants intelligently act on your behalf without giving away too much.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_1$1(ie){let te,ne;return te=new Text({props:{ui:!0,big:!0,$$slots:{default:[create_default_slot_2$1]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&2&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot$2(ie){let te,ne,re,oe,le,ae;return te=new Column({props:{sixteen:!0,wide:!0,centered:!0,$$slots:{default:[create_default_slot_11$1]},$$scope:{ctx:ie}}}),re=new Column({props:{sixteen:!0,wide:!0,justified:!0,$$slots:{default:[create_default_slot_3$1]},$$scope:{ctx:ie}}}),le=new Column({props:{sixteen:!0,wide:!0,centered:!0,$$slots:{default:[create_default_slot_1$1]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment),oe=space(),create_component(le.$$.fragment)},m(he,de){mount_component(te,he,de),insert(he,ne,de),mount_component(re,he,de),insert(he,oe,de),mount_component(le,he,de),ae=!0},p(he,de){const ue={};de&2&&(ue.$$scope={dirty:de,ctx:he}),te.$set(ue);const pe={};de&2&&(pe.$$scope={dirty:de,ctx:he}),re.$set(pe);const fe={};de&2&&(fe.$$scope={dirty:de,ctx:he}),le.$set(fe)},i(he){ae||(transition_in(te.$$.fragment,he),transition_in(re.$$.fragment,he),transition_in(le.$$.fragment,he),ae=!0)},o(he){transition_out(te.$$.fragment,he),transition_out(re.$$.fragment,he),transition_out(le.$$.fragment,he),ae=!1},d(he){he&&(detach(ne),detach(oe)),destroy_component(te,he),destroy_component(re,he),destroy_component(le,he)}}}function create_fragment$2(ie){let te,ne;return te=new Container({props:{ui:!0,grid:!0,style:"padding-top:50px;min-height:200px;padding-bottom:50px;",$$slots:{default:[create_default_slot$2]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,[oe]){const le={};oe&2&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function instance$2(ie,te,ne){let{page:re="start"}=te;return ie.$$set=oe=>{"page"in oe&&ne(0,re=oe.page)},[re]}class Sentants extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$2,create_fragment$2,safe_not_equal,{page:0})}}function create_default_slot_38(ie){let te,ne,re;return{c(){te=text$2("Reality2 is opensource, with a dual license.  You can use it for non-commercial applications for free (as is - no liabilities accepted), or commercially.  For commercial applications, please contact us at "),ne=element("a"),ne.textContent="contact@reality2.ai",re=text$2(" and we can work out terms."),attr(ne,"href","mailto:contact@reality2.ai")},m(oe,le){insert(oe,te,le),insert(oe,ne,le),insert(oe,re,le)},p:noop$2,d(oe){oe&&(detach(te),detach(ne),detach(re))}}}function create_default_slot_37(ie){let te;return{c(){te=text$2("Presently (as of December, 2024), Reality2 is in early Beta.  This means that it is not complete, will have bugs, aspects may change suddenly and without warning, and it is not recommended you use it for mission-critical applications.  That said, we encourage you to have a go, and then let us know how it went.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_36(ie){let te;return{c(){te=text$2("Below are links to more information, and the code.  Check in often for updates.  Send feedback, note bugs and ask questions through the appropriate channels on the GitHub repositories.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_35(ie){let te,ne,re,oe,le,ae,he,de,ue,pe;return te=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_38]},$$scope:{ctx:ie}}}),re=new Divider({props:{ui:!0}}),le=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_37]},$$scope:{ctx:ie}}}),he=new Divider({props:{ui:!0}}),ue=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_36]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment),oe=space(),create_component(le.$$.fragment),ae=space(),create_component(he.$$.fragment),de=space(),create_component(ue.$$.fragment)},m(fe,ge){mount_component(te,fe,ge),insert(fe,ne,ge),mount_component(re,fe,ge),insert(fe,oe,ge),mount_component(le,fe,ge),insert(fe,ae,ge),mount_component(he,fe,ge),insert(fe,de,ge),mount_component(ue,fe,ge),pe=!0},p(fe,ge){const $e={};ge&2&&($e.$$scope={dirty:ge,ctx:fe}),te.$set($e);const Te={};ge&2&&(Te.$$scope={dirty:ge,ctx:fe}),le.$set(Te);const Ee={};ge&2&&(Ee.$$scope={dirty:ge,ctx:fe}),ue.$set(Ee)},i(fe){pe||(transition_in(te.$$.fragment,fe),transition_in(re.$$.fragment,fe),transition_in(le.$$.fragment,fe),transition_in(he.$$.fragment,fe),transition_in(ue.$$.fragment,fe),pe=!0)},o(fe){transition_out(te.$$.fragment,fe),transition_out(re.$$.fragment,fe),transition_out(le.$$.fragment,fe),transition_out(he.$$.fragment,fe),transition_out(ue.$$.fragment,fe),pe=!1},d(fe){fe&&(detach(ne),detach(oe),detach(ae),detach(de)),destroy_component(te,fe),destroy_component(re,fe),destroy_component(le,fe),destroy_component(he,fe),destroy_component(ue,fe)}}}function create_default_slot_34(ie){let te,ne,re;return ne=new Icon({props:{ui:!0,splotch:!0}}),{c(){te=text$2("Documentation "),create_component(ne.$$.fragment)},m(oe,le){insert(oe,te,le),mount_component(ne,oe,le),re=!0},p:noop$2,i(oe){re||(transition_in(ne.$$.fragment,oe),re=!0)},o(oe){transition_out(ne.$$.fragment,oe),re=!1},d(oe){oe&&detach(te),destroy_component(ne,oe)}}}function create_default_slot_33(ie){let te;return{c(){te=text$2("https://github.com/reality-two/reality2-documentation")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_32(ie){let te,ne;return te=new Link({props:{href:"https://github.com/reality-two/reality2-documentation",target:"_blank",$$slots:{default:[create_default_slot_33]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&2&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_31(ie){let te,ne,re,oe;return te=new Table_Col({props:{right:!0,aligned:!0,$$slots:{default:[create_default_slot_34]},$$scope:{ctx:ie}}}),re=new Table_Col({props:{$$slots:{default:[create_default_slot_32]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment)},m(le,ae){mount_component(te,le,ae),insert(le,ne,ae),mount_component(re,le,ae),oe=!0},p(le,ae){const he={};ae&2&&(he.$$scope={dirty:ae,ctx:le}),te.$set(he);const de={};ae&2&&(de.$$scope={dirty:ae,ctx:le}),re.$set(de)},i(le){oe||(transition_in(te.$$.fragment,le),transition_in(re.$$.fragment,le),oe=!0)},o(le){transition_out(te.$$.fragment,le),transition_out(re.$$.fragment,le),oe=!1},d(le){le&&detach(ne),destroy_component(te,le),destroy_component(re,le)}}}function create_default_slot_30(ie){let te,ne,re;return ne=new Icon({props:{ui:!0,microchip:!0}}),{c(){te=text$2("Reality2 Node core "),create_component(ne.$$.fragment)},m(oe,le){insert(oe,te,le),mount_component(ne,oe,le),re=!0},p:noop$2,i(oe){re||(transition_in(ne.$$.fragment,oe),re=!0)},o(oe){transition_out(ne.$$.fragment,oe),re=!1},d(oe){oe&&detach(te),destroy_component(ne,oe)}}}function create_default_slot_29(ie){let te;return{c(){te=text$2("https://github.com/reality-two/reality2-node-core-elixir")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_28(ie){let te,ne;return te=new Link({props:{href:"https://github.com/reality-two/reality2-node-core-elixir",target:"_blank",$$slots:{default:[create_default_slot_29]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&2&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_27(ie){let te,ne,re,oe;return te=new Table_Col({props:{right:!0,aligned:!0,$$slots:{default:[create_default_slot_30]},$$scope:{ctx:ie}}}),re=new Table_Col({props:{$$slots:{default:[create_default_slot_28]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment)},m(le,ae){mount_component(te,le,ae),insert(le,ne,ae),mount_component(re,le,ae),oe=!0},p(le,ae){const he={};ae&2&&(he.$$scope={dirty:ae,ctx:le}),te.$set(he);const de={};ae&2&&(de.$$scope={dirty:ae,ctx:le}),re.$set(de)},i(le){oe||(transition_in(te.$$.fragment,le),transition_in(re.$$.fragment,le),oe=!0)},o(le){transition_out(te.$$.fragment,le),transition_out(re.$$.fragment,le),oe=!1},d(le){le&&detach(ne),destroy_component(te,le),destroy_component(re,le)}}}function create_default_slot_26(ie){let te,ne,re;return ne=new Icon({props:{ui:!0,book:!0}}),{c(){te=text$2("Sentant and Swarm definitions "),create_component(ne.$$.fragment)},m(oe,le){insert(oe,te,le),mount_component(ne,oe,le),re=!0},p:noop$2,i(oe){re||(transition_in(ne.$$.fragment,oe),re=!0)},o(oe){transition_out(ne.$$.fragment,oe),re=!1},d(oe){oe&&detach(te),destroy_component(ne,oe)}}}function create_default_slot_25(ie){let te;return{c(){te=text$2("https://github.com/reality-two/reality2-definitions")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_24(ie){let te,ne;return te=new Link({props:{href:"https://github.com/reality-two/reality2-definitions",target:"_blank",$$slots:{default:[create_default_slot_25]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&2&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_23(ie){let te,ne,re,oe;return te=new Table_Col({props:{right:!0,aligned:!0,$$slots:{default:[create_default_slot_26]},$$scope:{ctx:ie}}}),re=new Table_Col({props:{$$slots:{default:[create_default_slot_24]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment)},m(le,ae){mount_component(te,le,ae),insert(le,ne,ae),mount_component(re,le,ae),oe=!0},p(le,ae){const he={};ae&2&&(he.$$scope={dirty:ae,ctx:le}),te.$set(he);const de={};ae&2&&(de.$$scope={dirty:ae,ctx:le}),re.$set(de)},i(le){oe||(transition_in(te.$$.fragment,le),transition_in(re.$$.fragment,le),oe=!0)},o(le){transition_out(te.$$.fragment,le),transition_out(re.$$.fragment,le),oe=!1},d(le){le&&detach(ne),destroy_component(te,le),destroy_component(re,le)}}}function create_default_slot_22(ie){let te,ne,re;return ne=new Icon({props:{ui:!0,glasses:!0}}),{c(){te=text$2("Godot VR Client "),create_component(ne.$$.fragment)},m(oe,le){insert(oe,te,le),mount_component(ne,oe,le),re=!0},p:noop$2,i(oe){re||(transition_in(ne.$$.fragment,oe),re=!0)},o(oe){transition_out(ne.$$.fragment,oe),re=!1},d(oe){oe&&detach(te),destroy_component(ne,oe)}}}function create_default_slot_21(ie){let te;return{c(){te=text$2("https://github.com/reality-two/reality2-godot-client")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_20(ie){let te,ne;return te=new Link({props:{href:"https://github.com/reality-two/reality2-godot-client",target:"_blank",$$slots:{default:[create_default_slot_21]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&2&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_19(ie){let te,ne,re,oe;return te=new Table_Col({props:{right:!0,aligned:!0,$$slots:{default:[create_default_slot_22]},$$scope:{ctx:ie}}}),re=new Table_Col({props:{$$slots:{default:[create_default_slot_20]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment)},m(le,ae){mount_component(te,le,ae),insert(le,ne,ae),mount_component(re,le,ae),oe=!0},p(le,ae){const he={};ae&2&&(he.$$scope={dirty:ae,ctx:le}),te.$set(he);const de={};ae&2&&(de.$$scope={dirty:ae,ctx:le}),re.$set(de)},i(le){oe||(transition_in(te.$$.fragment,le),transition_in(re.$$.fragment,le),oe=!0)},o(le){transition_out(te.$$.fragment,le),transition_out(re.$$.fragment,le),oe=!1},d(le){le&&detach(ne),destroy_component(te,le),destroy_component(re,le)}}}function create_default_slot_18(ie){let te,ne,re;return ne=new Icon({props:{ui:!0,gamepad:!0}}),{c(){te=text$2("IOT WebApp Demo "),create_component(ne.$$.fragment)},m(oe,le){insert(oe,te,le),mount_component(ne,oe,le),re=!0},p:noop$2,i(oe){re||(transition_in(ne.$$.fragment,oe),re=!0)},o(oe){transition_out(ne.$$.fragment,oe),re=!1},d(oe){oe&&detach(te),destroy_component(ne,oe)}}}function create_default_slot_17(ie){let te;return{c(){te=text$2("https://github.com/reality-two/reality2-webapp-iotdemo")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_16(ie){let te,ne;return te=new Link({props:{href:"https://github.com/reality-two/reality2-webapp-iotdemo",target:"_blank",$$slots:{default:[create_default_slot_17]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&2&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_15(ie){let te,ne,re,oe;return te=new Table_Col({props:{right:!0,aligned:!0,$$slots:{default:[create_default_slot_18]},$$scope:{ctx:ie}}}),re=new Table_Col({props:{$$slots:{default:[create_default_slot_16]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment)},m(le,ae){mount_component(te,le,ae),insert(le,ne,ae),mount_component(re,le,ae),oe=!0},p(le,ae){const he={};ae&2&&(he.$$scope={dirty:ae,ctx:le}),te.$set(he);const de={};ae&2&&(de.$$scope={dirty:ae,ctx:le}),re.$set(de)},i(le){oe||(transition_in(te.$$.fragment,le),transition_in(re.$$.fragment,le),oe=!0)},o(le){transition_out(te.$$.fragment,le),transition_out(re.$$.fragment,le),oe=!1},d(le){le&&detach(ne),destroy_component(te,le),destroy_component(re,le)}}}function create_default_slot_14(ie){let te,ne,re;return ne=new Icon({props:{ui:!0,gamepad:!0}}),{c(){te=text$2("Default Sentants WebApp "),create_component(ne.$$.fragment)},m(oe,le){insert(oe,te,le),mount_component(ne,oe,le),re=!0},p:noop$2,i(oe){re||(transition_in(ne.$$.fragment,oe),re=!0)},o(oe){transition_out(ne.$$.fragment,oe),re=!1},d(oe){oe&&detach(te),destroy_component(ne,oe)}}}function create_default_slot_13(ie){let te;return{c(){te=text$2("https://github.com/reality-two/reality2-node-core-elixir/tree/main/web/sentants")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_12(ie){let te,ne;return te=new Link({props:{href:"https://github.com/reality-two/reality2-node-core-elixir/tree/main/web/sentants",target:"_blank",$$slots:{default:[create_default_slot_13]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&2&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_11(ie){let te,ne,re,oe;return te=new Table_Col({props:{right:!0,aligned:!0,$$slots:{default:[create_default_slot_14]},$$scope:{ctx:ie}}}),re=new Table_Col({props:{$$slots:{default:[create_default_slot_12]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment)},m(le,ae){mount_component(te,le,ae),insert(le,ne,ae),mount_component(re,le,ae),oe=!0},p(le,ae){const he={};ae&2&&(he.$$scope={dirty:ae,ctx:le}),te.$set(he);const de={};ae&2&&(de.$$scope={dirty:ae,ctx:le}),re.$set(de)},i(le){oe||(transition_in(te.$$.fragment,le),transition_in(re.$$.fragment,le),oe=!0)},o(le){transition_out(te.$$.fragment,le),transition_out(re.$$.fragment,le),oe=!1},d(le){le&&detach(ne),destroy_component(te,le),destroy_component(re,le)}}}function create_default_slot_10(ie){let te,ne,re,oe,le,ae,he,de,ue,pe,fe,ge;return te=new Table_Row({props:{$$slots:{default:[create_default_slot_31]},$$scope:{ctx:ie}}}),re=new Table_Row({props:{$$slots:{default:[create_default_slot_27]},$$scope:{ctx:ie}}}),le=new Table_Row({props:{$$slots:{default:[create_default_slot_23]},$$scope:{ctx:ie}}}),he=new Table_Row({props:{$$slots:{default:[create_default_slot_19]},$$scope:{ctx:ie}}}),ue=new Table_Row({props:{$$slots:{default:[create_default_slot_15]},$$scope:{ctx:ie}}}),fe=new Table_Row({props:{$$slots:{default:[create_default_slot_11]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment),oe=space(),create_component(le.$$.fragment),ae=space(),create_component(he.$$.fragment),de=space(),create_component(ue.$$.fragment),pe=space(),create_component(fe.$$.fragment)},m($e,Te){mount_component(te,$e,Te),insert($e,ne,Te),mount_component(re,$e,Te),insert($e,oe,Te),mount_component(le,$e,Te),insert($e,ae,Te),mount_component(he,$e,Te),insert($e,de,Te),mount_component(ue,$e,Te),insert($e,pe,Te),mount_component(fe,$e,Te),ge=!0},p($e,Te){const Ee={};Te&2&&(Ee.$$scope={dirty:Te,ctx:$e}),te.$set(Ee);const Se={};Te&2&&(Se.$$scope={dirty:Te,ctx:$e}),re.$set(Se);const ve={};Te&2&&(ve.$$scope={dirty:Te,ctx:$e}),le.$set(ve);const ke={};Te&2&&(ke.$$scope={dirty:Te,ctx:$e}),he.$set(ke);const Re={};Te&2&&(Re.$$scope={dirty:Te,ctx:$e}),ue.$set(Re);const Ne={};Te&2&&(Ne.$$scope={dirty:Te,ctx:$e}),fe.$set(Ne)},i($e){ge||(transition_in(te.$$.fragment,$e),transition_in(re.$$.fragment,$e),transition_in(le.$$.fragment,$e),transition_in(he.$$.fragment,$e),transition_in(ue.$$.fragment,$e),transition_in(fe.$$.fragment,$e),ge=!0)},o($e){transition_out(te.$$.fragment,$e),transition_out(re.$$.fragment,$e),transition_out(le.$$.fragment,$e),transition_out(he.$$.fragment,$e),transition_out(ue.$$.fragment,$e),transition_out(fe.$$.fragment,$e),ge=!1},d($e){$e&&(detach(ne),detach(oe),detach(ae),detach(de),detach(pe)),destroy_component(te,$e),destroy_component(re,$e),destroy_component(le,$e),destroy_component(he,$e),destroy_component(ue,$e),destroy_component(fe,$e)}}}function create_default_slot_9(ie){let te,ne;return te=new Table_Body({props:{$$slots:{default:[create_default_slot_10]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&2&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_8(ie){let te;return{c(){te=text$2("If you are curious about how this website was created, it is a static site created using Svelte, with the graphics library Fomantic UI using the vite framework.  It is hosted on github.io.")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_7(ie){let te,ne,re,oe;return te=new Divider({props:{ui:!0}}),re=new Text({props:{ui:!0,large:!0,$$slots:{default:[create_default_slot_8]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment)},m(le,ae){mount_component(te,le,ae),insert(le,ne,ae),mount_component(re,le,ae),oe=!0},p(le,ae){const he={};ae&2&&(he.$$scope={dirty:ae,ctx:le}),re.$set(he)},i(le){oe||(transition_in(te.$$.fragment,le),transition_in(re.$$.fragment,le),oe=!0)},o(le){transition_out(te.$$.fragment,le),transition_out(re.$$.fragment,le),oe=!1},d(le){le&&detach(ne),destroy_component(te,le),destroy_component(re,le)}}}function create_default_slot_6(ie){let te,ne,re;return ne=new Icon({props:{ui:!0,globe:!0}}),{c(){te=text$2("Reality2 Website "),create_component(ne.$$.fragment)},m(oe,le){insert(oe,te,le),mount_component(ne,oe,le),re=!0},p:noop$2,i(oe){re||(transition_in(ne.$$.fragment,oe),re=!0)},o(oe){transition_out(ne.$$.fragment,oe),re=!1},d(oe){oe&&detach(te),destroy_component(ne,oe)}}}function create_default_slot_5(ie){let te;return{c(){te=text$2("https://github.com/reality-two/reality-two.github.io")},m(ne,re){insert(ne,te,re)},d(ne){ne&&detach(te)}}}function create_default_slot_4(ie){let te,ne;return te=new Link({props:{href:"https://github.com/reality-two/reality-two.github.io",target:"_blank",$$slots:{default:[create_default_slot_5]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&2&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_3(ie){let te,ne,re,oe;return te=new Table_Col({props:{right:!0,aligned:!0,$$slots:{default:[create_default_slot_6]},$$scope:{ctx:ie}}}),re=new Table_Col({props:{$$slots:{default:[create_default_slot_4]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment)},m(le,ae){mount_component(te,le,ae),insert(le,ne,ae),mount_component(re,le,ae),oe=!0},p(le,ae){const he={};ae&2&&(he.$$scope={dirty:ae,ctx:le}),te.$set(he);const de={};ae&2&&(de.$$scope={dirty:ae,ctx:le}),re.$set(de)},i(le){oe||(transition_in(te.$$.fragment,le),transition_in(re.$$.fragment,le),oe=!0)},o(le){transition_out(te.$$.fragment,le),transition_out(re.$$.fragment,le),oe=!1},d(le){le&&detach(ne),destroy_component(te,le),destroy_component(re,le)}}}function create_default_slot_2(ie){let te,ne;return te=new Table_Row({props:{$$slots:{default:[create_default_slot_3]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&2&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot_1(ie){let te,ne;return te=new Table_Body({props:{$$slots:{default:[create_default_slot_2]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&2&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot$1(ie){let te,ne,re,oe,le,ae,he,de;return te=new Column({props:{sixteen:!0,wide:!0,justified:!0,$$slots:{default:[create_default_slot_35]},$$scope:{ctx:ie}}}),re=new Table({props:{ui:!0,inverted:!0,centered:!0,huge:!0,$$slots:{default:[create_default_slot_9]},$$scope:{ctx:ie}}}),le=new Column({props:{sixteen:!0,wide:!0,justified:!0,$$slots:{default:[create_default_slot_7]},$$scope:{ctx:ie}}}),he=new Table({props:{ui:!0,inverted:!0,centered:!0,huge:!0,$$slots:{default:[create_default_slot_1]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment),ne=space(),create_component(re.$$.fragment),oe=space(),create_component(le.$$.fragment),ae=space(),create_component(he.$$.fragment)},m(ue,pe){mount_component(te,ue,pe),insert(ue,ne,pe),mount_component(re,ue,pe),insert(ue,oe,pe),mount_component(le,ue,pe),insert(ue,ae,pe),mount_component(he,ue,pe),de=!0},p(ue,pe){const fe={};pe&2&&(fe.$$scope={dirty:pe,ctx:ue}),te.$set(fe);const ge={};pe&2&&(ge.$$scope={dirty:pe,ctx:ue}),re.$set(ge);const $e={};pe&2&&($e.$$scope={dirty:pe,ctx:ue}),le.$set($e);const Te={};pe&2&&(Te.$$scope={dirty:pe,ctx:ue}),he.$set(Te)},i(ue){de||(transition_in(te.$$.fragment,ue),transition_in(re.$$.fragment,ue),transition_in(le.$$.fragment,ue),transition_in(he.$$.fragment,ue),de=!0)},o(ue){transition_out(te.$$.fragment,ue),transition_out(re.$$.fragment,ue),transition_out(le.$$.fragment,ue),transition_out(he.$$.fragment,ue),de=!1},d(ue){ue&&(detach(ne),detach(oe),detach(ae)),destroy_component(te,ue),destroy_component(re,ue),destroy_component(le,ue),destroy_component(he,ue)}}}function create_fragment$1(ie){let te,ne;return te=new Container({props:{ui:!0,grid:!0,style:"padding-top:20px;min-height:200px;padding-bottom:50px;",$$slots:{default:[create_default_slot$1]},$$scope:{ctx:ie}}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,[oe]){const le={};oe&2&&(le.$$scope={dirty:oe,ctx:re}),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function instance$1(ie,te,ne){let{page:re="start"}=te;return ie.$$set=oe=>{"page"in oe&&ne(0,re=oe.page)},[re]}class Information extends SvelteComponent{constructor(te){super(),init$2(this,te,instance$1,create_fragment$1,safe_not_equal,{page:0})}}function create_if_block_6(ie){let te,ne;return te=new Marketplace({props:{page:ie[0]}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&1&&(le.page=re[0]),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_if_block_5(ie){let te,ne;return te=new TransientNetworks({props:{page:ie[0]}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&1&&(le.page=re[0]),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_if_block_4(ie){let te,ne;return te=new Information({props:{page:ie[0]}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&1&&(le.page=re[0]),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_if_block_3(ie){let te,ne;return te=new Sentants({props:{page:ie[0]}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&1&&(le.page=re[0]),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_if_block_2(ie){let te,ne;return te=new ObjectsAndActors({props:{page:ie[0]}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&1&&(le.page=re[0]),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_if_block_1(ie){let te,ne;return te=new About({props:{page:ie[0],allImages:ie[1]}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&1&&(le.page=re[0]),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_if_block(ie){let te,ne;return te=new Start({props:{page:ie[0],allImages:ie[1]}}),{c(){create_component(te.$$.fragment)},m(re,oe){mount_component(te,re,oe),ne=!0},p(re,oe){const le={};oe&1&&(le.page=re[0]),te.$set(le)},i(re){ne||(transition_in(te.$$.fragment,re),ne=!0)},o(re){transition_out(te.$$.fragment,re),ne=!1},d(re){destroy_component(te,re)}}}function create_default_slot(ie){let te,ne,re,oe,le,ae,he;function de($e){ie[2]($e)}let ue={};ie[0]!==void 0&&(ue.page=ie[0]),te=new MainMenu({props:ue}),binding_callbacks.push(()=>bind(te,"page",de));const pe=[create_if_block,create_if_block_1,create_if_block_2,create_if_block_3,create_if_block_4,create_if_block_5,create_if_block_6],fe=[];function ge($e,Te){return $e[0]==="start"?0:$e[0]==="about"?1:$e[0]==="objectsandactors"?2:$e[0]==="sentants"?3:$e[0]==="information"?4:$e[0]==="transientnetworks"?5:$e[0]==="marketplace"?6:-1}return~(oe=ge(ie))&&(le=fe[oe]=pe[oe](ie)),{c(){create_component(te.$$.fragment),re=space(),le&&le.c(),ae=empty$1()},m($e,Te){mount_component(te,$e,Te),insert($e,re,Te),~oe&&fe[oe].m($e,Te),insert($e,ae,Te),he=!0},p($e,Te){const Ee={};!ne&&Te&1&&(ne=!0,Ee.page=$e[0],add_flush_callback(()=>ne=!1)),te.$set(Ee);let Se=oe;oe=ge($e),oe===Se?~oe&&fe[oe].p($e,Te):(le&&(group_outros(),transition_out(fe[Se],1,1,()=>{fe[Se]=null}),check_outros()),~oe?(le=fe[oe],le?le.p($e,Te):(le=fe[oe]=pe[oe]($e),le.c()),transition_in(le,1),le.m(ae.parentNode,ae)):le=null)},i($e){he||(transition_in(te.$$.fragment,$e),transition_in(le),he=!0)},o($e){transition_out(te.$$.fragment,$e),transition_out(le),he=!1},d($e){$e&&(detach(re),detach(ae)),destroy_component(te,$e),~oe&&fe[oe].d($e)}}}function create_fragment(ie){let te,ne,re;return ne=new Segment({props:{ui:!0,inverted:!0,vertical:!0,center:!0,aligned:!0,style:"min-height:2000px",$$slots:{default:[create_default_slot]},$$scope:{ctx:ie}}}),{c(){te=element("main"),create_component(ne.$$.fragment)},m(oe,le){insert(oe,te,le),mount_component(ne,te,null),re=!0},p(oe,[le]){const ae={};le&9&&(ae.$$scope={dirty:le,ctx:oe}),ne.$set(ae)},i(oe){re||(transition_in(ne.$$.fragment,oe),re=!0)},o(oe){transition_out(ne.$$.fragment,oe),re=!1},d(oe){oe&&detach(te),destroy_component(ne)}}}function instance(ie,te,ne){const re=Object.assign({"/src/assets/MR.png":__vite_glob_0_0,"/src/assets/antennae.png":__vite_glob_0_1,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_01.png":__vite_glob_0_2,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_02.png":__vite_glob_0_3,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_03.png":__vite_glob_0_4,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_04.png":__vite_glob_0_5,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_05.png":__vite_glob_0_6,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_06.png":__vite_glob_0_7,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_07.png":__vite_glob_0_8,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_08.png":__vite_glob_0_9,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_09.png":__vite_glob_0_10,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_10.png":__vite_glob_0_11,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_11.png":__vite_glob_0_12,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_12.png":__vite_glob_0_13,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_13.png":__vite_glob_0_14,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_14.png":__vite_glob_0_15,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_15.png":__vite_glob_0_16,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_16.png":__vite_glob_0_17,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_17.png":__vite_glob_0_18,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_18.png":__vite_glob_0_19,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_19.png":__vite_glob_0_20,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_20.png":__vite_glob_0_21,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_21.png":__vite_glob_0_22,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_22.png":__vite_glob_0_23,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_23.png":__vite_glob_0_24,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_24.png":__vite_glob_0_25,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_25.png":__vite_glob_0_26,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_26.png":__vite_glob_0_27,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_27.png":__vite_glob_0_28,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_28.png":__vite_glob_0_29,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_29.png":__vite_glob_0_30,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_30.png":__vite_glob_0_31,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_31.png":__vite_glob_0_32,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_32.png":__vite_glob_0_33,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_33.png":__vite_glob_0_34,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_34.png":__vite_glob_0_35,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_35.png":__vite_glob_0_36,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_36.png":__vite_glob_0_37,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_37.png":__vite_glob_0_38,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_38.png":__vite_glob_0_39,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_39.png":__vite_glob_0_40,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_40.png":__vite_glob_0_41,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_41.png":__vite_glob_0_42,"/src/assets/beautifully_usable/Beautiful.ai - Reality2 Beautifully Usable_Page_42.png":__vite_glob_0_43,"/src/assets/bee.png":__vite_glob_0_44,"/src/assets/behaviours.png":__vite_glob_0_45,"/src/assets/digital_glue/Beautiful.ai - Reality2 - digital glue_Page_01.png":__vite_glob_0_46,"/src/assets/digital_glue/Beautiful.ai - Reality2 - digital glue_Page_02.png":__vite_glob_0_47,"/src/assets/digital_glue/Beautiful.ai - Reality2 - digital glue_Page_03.png":__vite_glob_0_48,"/src/assets/digital_glue/Beautiful.ai - Reality2 - digital glue_Page_04.png":__vite_glob_0_49,"/src/assets/digital_glue/Beautiful.ai - Reality2 - digital glue_Page_05.png":__vite_glob_0_50,"/src/assets/digital_glue/Beautiful.ai - Reality2 - digital glue_Page_06.png":__vite_glob_0_51,"/src/assets/digital_glue/Beautiful.ai - Reality2 - digital glue_Page_07.png":__vite_glob_0_52,"/src/assets/digital_glue/Beautiful.ai - Reality2 - digital glue_Page_08.png":__vite_glob_0_53,"/src/assets/digital_glue/Beautiful.ai - Reality2 - digital glue_Page_09.png":__vite_glob_0_54,"/src/assets/digital_glue/Beautiful.ai - Reality2 - digital glue_Page_10.png":__vite_glob_0_55,"/src/assets/digital_glue/Beautiful.ai - Reality2 - digital glue_Page_11.png":__vite_glob_0_56,"/src/assets/digital_glue/Beautiful.ai - Reality2 - digital glue_Page_12.png":__vite_glob_0_57,"/src/assets/digital_glue/Beautiful.ai - Reality2 - digital glue_Page_13.png":__vite_glob_0_58,"/src/assets/digital_glue/Beautiful.ai - Reality2 - digital glue_Page_14.png":__vite_glob_0_59,"/src/assets/digital_glue/Beautiful.ai - Reality2 - digital glue_Page_15.png":__vite_glob_0_60,"/src/assets/digital_glue/Beautiful.ai - Reality2 - digital glue_Page_16.png":__vite_glob_0_61,"/src/assets/digital_glue/Beautiful.ai - Reality2 - digital glue_Page_17.png":__vite_glob_0_62,"/src/assets/digital_glue/Beautiful.ai - Reality2 - digital glue_Page_18.png":__vite_glob_0_63,"/src/assets/digital_glue/Beautiful.ai - Reality2 - digital glue_Page_19.png":__vite_glob_0_64,"/src/assets/digital_glue/Beautiful.ai - Reality2 - digital glue_Page_20.png":__vite_glob_0_65,"/src/assets/digital_glue/Beautiful.ai - Reality2 - digital glue_Page_21.png":__vite_glob_0_66,"/src/assets/digital_glue/Beautiful.ai - Reality2 - digital glue_Page_22.png":__vite_glob_0_67,"/src/assets/iot/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_01.png":__vite_glob_0_68,"/src/assets/iot/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_02.png":__vite_glob_0_69,"/src/assets/iot/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_03.png":__vite_glob_0_70,"/src/assets/iot/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_04.png":__vite_glob_0_71,"/src/assets/iot/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_05.png":__vite_glob_0_72,"/src/assets/iot/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_06.png":__vite_glob_0_73,"/src/assets/iot/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_07.png":__vite_glob_0_74,"/src/assets/iot/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_08.png":__vite_glob_0_75,"/src/assets/iot/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_09.png":__vite_glob_0_76,"/src/assets/iot/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_10.png":__vite_glob_0_77,"/src/assets/iot/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_11.png":__vite_glob_0_78,"/src/assets/iot/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_12.png":__vite_glob_0_79,"/src/assets/iot/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_13.png":__vite_glob_0_80,"/src/assets/iot/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_14.png":__vite_glob_0_81,"/src/assets/iot/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_15.png":__vite_glob_0_82,"/src/assets/iot/Beautiful.ai - Reality2 IoT and Digital Twin example_Page_16.png":__vite_glob_0_83,"/src/assets/quadruplediamond.png":__vite_glob_0_84,"/src/assets/reality2 enabled.png":__vite_glob_0_85,"/src/assets/reality2_big_bee.png":__vite_glob_0_86,"/src/assets/swarm.png":__vite_glob_0_87,"/src/assets/wanderland/Beautiful.ai - Reality2 wanderland example_Page_01.png":__vite_glob_0_88,"/src/assets/wanderland/Beautiful.ai - Reality2 wanderland example_Page_02.png":__vite_glob_0_89,"/src/assets/wanderland/Beautiful.ai - Reality2 wanderland example_Page_03.png":__vite_glob_0_90,"/src/assets/wanderland/Beautiful.ai - Reality2 wanderland example_Page_04.png":__vite_glob_0_91,"/src/assets/wanderland/Beautiful.ai - Reality2 wanderland example_Page_05.png":__vite_glob_0_92,"/src/assets/wanderland/Beautiful.ai - Reality2 wanderland example_Page_06.png":__vite_glob_0_93,"/src/assets/wanderland/Beautiful.ai - Reality2 wanderland example_Page_07.png":__vite_glob_0_94,"/src/assets/wanderland/Beautiful.ai - Reality2 wanderland example_Page_08.png":__vite_glob_0_95,"/src/assets/wanderland/Beautiful.ai - Reality2 wanderland example_Page_09.png":__vite_glob_0_96,"/src/assets/wanderland/Beautiful.ai - Reality2 wanderland example_Page_10.png":__vite_glob_0_97,"/src/assets/wanderland/Beautiful.ai - Reality2 wanderland example_Page_11.png":__vite_glob_0_98,"/src/assets/wanderland/Beautiful.ai - Reality2 wanderland example_Page_12.png":__vite_glob_0_99,"/src/assets/wanderland/Beautiful.ai - Reality2 wanderland example_Page_13.png":__vite_glob_0_100,"/src/assets/wanderland/Beautiful.ai - Reality2 wanderland example_Page_14.png":__vite_glob_0_101,"/src/assets/wanderland/Beautiful.ai - Reality2 wanderland example_Page_15.png":__vite_glob_0_102,"/src/assets/wanderland/Beautiful.ai - Reality2 wanderland example_Page_16.png":__vite_glob_0_103,"/src/assets/wanderland/Beautiful.ai - Reality2 wanderland example_Page_17.png":__vite_glob_0_104,"/src/assets/wanderland/Beautiful.ai - Reality2 wanderland example_Page_18.png":__vite_glob_0_105,"/src/assets/wanderland/Beautiful.ai - Reality2 wanderland example_Page_19.png":__vite_glob_0_106});let oe="start";function le(ae){oe=ae,ne(0,oe)}return[oe,re,le]}class App extends SvelteComponent{constructor(te){super(),init$2(this,te,instance,create_fragment,safe_not_equal,{})}}new App({target:document.getElementById("app")});export{withPath as $,rgba2 as A,defaultConfig_default as B,cleanAndMerge as C,getConfig as D,random as E,setupGraphViewbox2 as F,selectSvgElement as G,version as H,getThemeVariables3 as I,JSON_SCHEMA as J,line$1 as K,hasKatex as L,calculateMathMLDimensions as M,renderKatex as N,parseFontSize as O,parseGenericTypes as P,curveBasis as Q,generateId as R,lineBreakRegex as S,__export as T,commonDb_exports as U,setupGraphViewbox as V,isDark$1 as W,lighten$1 as X,darken$1 as Y,ZERO_WIDTH_SPACE as Z,__name as _,assignWithDepth_default as a,dayjs2 as a$,halfPi as a0,epsilon as a1,tau as a2,cos as a3,sin as a4,min as a5,abs$1 as a6,pi as a7,sqrt as a8,atan2 as a9,isArrayLikeObject as aA,constant as aB,isFunction as aC,isEmpty as aD,computeDimensionOfText as aE,array as aF,commonjsGlobal as aG,getDefaultExportFromCjs as aH,unknownIcon as aI,registerIconPacks as aJ,getIconSVG as aK,isObject as aL,isIterateeCall as aM,keysIn as aN,eq as aO,isArrayLike as aP,isArray$1 as aQ,identity as aR,isIndex as aS,assignValue as aT,define as aU,extend as aV,Rgb as aW,Color as aX,rgbConvert as aY,nogamma as aZ,hue as a_,constant$1 as aa,asin as ab,acos as ac,max as ad,insertCluster as ae,insertNode as af,positionNode as ag,getStylesFromArray as ah,evaluate as ai,createText as aj,getSubGraphTitleMargins as ak,getLineFunctionsWithOffset as al,replaceIconSubstring as am,decodeEntities as an,_$1 as ao,Color$2 as ap,markers_default as aq,clear2 as ar,clear as as,clear$1 as at,updateNodeBounds as au,setNodeElem as av,insertEdge as aw,positionEdgeLabel as ax,insertEdgeLabel as ay,baseRest as az,getAccDescription as b,constant$2 as b0,interpolateNumber as b1,color as b2,interpolateRgb as b3,interpolateString as b4,setToString$1 as b5,overRest as b6,root$1 as b7,baseFor$1 as b8,baseAssignValue as b9,isPrototype as bA,__vitePreload as bB,baseUnary as ba,merge$1 as bb,isObjectLike as bc,baseGetTag as bd,Symbol$2 as be,arrayLikeKeys as bf,baseKeys as bg,memoize as bh,isArguments$1 as bi,copyObject as bj,getPrototype$1 as bk,cloneArrayBuffer as bl,cloneTypedArray as bm,getTag$1 as bn,nodeUtil$1 as bo,copyArray as bp,isBuffer$1 as bq,cloneBuffer as br,initCloneObject as bs,Stack as bt,MapCache as bu,Uint8Array$2 as bv,isTypedArray$1 as bw,isLength as bx,Set$2 as by,createAssigner as bz,setAccDescription as c,getConfig2 as d,common_default as e,calculateTextHeight as f,getAccTitle as g,calculateTextWidth as h,sanitizeText as i,select as j,configureSvgSize as k,log as l,sanitizeUrl_1 as m,setConfig2 as n,defaultConfig2 as o,setDiagramTitle as p,getDiagramTitle as q,load as r,setAccTitle as s,isValidShape as t,utils_default as u,clear$2 as v,wrapLabel as w,getEdgeId as x,getRegisteredLayoutAlgorithm as y,render$1 as z};
